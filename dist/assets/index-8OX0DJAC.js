(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=e(s);fetch(s.href,l)}})();function qb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Yv={exports:{}},ig={};var w4;function wR(){if(w4)return ig;w4=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var f in s)f!=="key"&&(l[f]=s[f])}else l=s;return s=l.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:l}}return ig.Fragment=t,ig.jsx=e,ig.jsxs=e,ig}var x4;function xR(){return x4||(x4=1,Yv.exports=wR()),Yv.exports}var k=xR(),Qv={exports:{}},de={};var N4;function NR(){if(N4)return de;N4=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),T=Symbol.iterator;function x(K){return K===null||typeof K!="object"?null:(K=T&&K[T]||K["@@iterator"],typeof K=="function"?K:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,V={};function G(K,ht,_t){this.props=K,this.context=ht,this.refs=V,this.updater=_t||w}G.prototype.isReactComponent={},G.prototype.setState=function(K,ht){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ht,"setState")},G.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function B(){}B.prototype=G.prototype;function Y(K,ht,_t){this.props=K,this.context=ht,this.refs=V,this.updater=_t||w}var et=Y.prototype=new B;et.constructor=Y,L(et,G.prototype),et.isPureReactComponent=!0;var at=Array.isArray;function tt(){}var z={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function U(K,ht,_t){var jt=_t.ref;return{$$typeof:n,type:K,key:ht,ref:jt!==void 0?jt:null,props:_t}}function q(K,ht){return U(K.type,ht,K.props)}function X(K){return typeof K=="object"&&K!==null&&K.$$typeof===n}function Q(K){var ht={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(_t){return ht[_t]})}var H=/\/+/g;function Ft(K,ht){return typeof K=="object"&&K!==null&&K.key!=null?Q(""+K.key):ht.toString(36)}function Pt(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(tt,tt):(K.status="pending",K.then(function(ht){K.status==="pending"&&(K.status="fulfilled",K.value=ht)},function(ht){K.status==="pending"&&(K.status="rejected",K.reason=ht)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function $(K,ht,_t,jt,Yt){var te=typeof K;(te==="undefined"||te==="boolean")&&(K=null);var Rt=!1;if(K===null)Rt=!0;else switch(te){case"bigint":case"string":case"number":Rt=!0;break;case"object":switch(K.$$typeof){case n:case t:Rt=!0;break;case A:return Rt=K._init,$(Rt(K._payload),ht,_t,jt,Yt)}}if(Rt)return Yt=Yt(K),Rt=jt===""?"."+Ft(K,0):jt,at(Yt)?(_t="",Rt!=null&&(_t=Rt.replace(H,"$&/")+"/"),$(Yt,ht,_t,"",function(as){return as})):Yt!=null&&(X(Yt)&&(Yt=q(Yt,_t+(Yt.key==null||K&&K.key===Yt.key?"":(""+Yt.key).replace(H,"$&/")+"/")+Rt)),ht.push(Yt)),1;Rt=0;var Ge=jt===""?".":jt+":";if(at(K))for(var Oe=0;Oe<K.length;Oe++)jt=K[Oe],te=Ge+Ft(jt,Oe),Rt+=$(jt,ht,_t,te,Yt);else if(Oe=x(K),typeof Oe=="function")for(K=Oe.call(K),Oe=0;!(jt=K.next()).done;)jt=jt.value,te=Ge+Ft(jt,Oe++),Rt+=$(jt,ht,_t,te,Yt);else if(te==="object"){if(typeof K.then=="function")return $(Pt(K),ht,_t,jt,Yt);throw ht=String(K),Error("Objects are not valid as a React child (found: "+(ht==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ht)+"). If you meant to render a collection of children, use an array instead.")}return Rt}function Tt(K,ht,_t){if(K==null)return K;var jt=[],Yt=0;return $(K,jt,"","",function(te){return ht.call(_t,te,Yt++)}),jt}function Et(K){if(K._status===-1){var ht=K._result;ht=ht(),ht.then(function(_t){(K._status===0||K._status===-1)&&(K._status=1,K._result=_t)},function(_t){(K._status===0||K._status===-1)&&(K._status=2,K._result=_t)}),K._status===-1&&(K._status=0,K._result=ht)}if(K._status===1)return K._result.default;throw K._result}var Ut=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ht=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ht))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},qt={map:Tt,forEach:function(K,ht,_t){Tt(K,function(){ht.apply(this,arguments)},_t)},count:function(K){var ht=0;return Tt(K,function(){ht++}),ht},toArray:function(K){return Tt(K,function(ht){return ht})||[]},only:function(K){if(!X(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return de.Activity=S,de.Children=qt,de.Component=G,de.Fragment=e,de.Profiler=s,de.PureComponent=Y,de.StrictMode=i,de.Suspense=m,de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,de.__COMPILER_RUNTIME={__proto__:null,c:function(K){return z.H.useMemoCache(K)}},de.cache=function(K){return function(){return K.apply(null,arguments)}},de.cacheSignal=function(){return null},de.cloneElement=function(K,ht,_t){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var jt=L({},K.props),Yt=K.key;if(ht!=null)for(te in ht.key!==void 0&&(Yt=""+ht.key),ht)!M.call(ht,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&ht.ref===void 0||(jt[te]=ht[te]);var te=arguments.length-2;if(te===1)jt.children=_t;else if(1<te){for(var Rt=Array(te),Ge=0;Ge<te;Ge++)Rt[Ge]=arguments[Ge+2];jt.children=Rt}return U(K.type,Yt,jt)},de.createContext=function(K){return K={$$typeof:c,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:l,_context:K},K},de.createElement=function(K,ht,_t){var jt,Yt={},te=null;if(ht!=null)for(jt in ht.key!==void 0&&(te=""+ht.key),ht)M.call(ht,jt)&&jt!=="key"&&jt!=="__self"&&jt!=="__source"&&(Yt[jt]=ht[jt]);var Rt=arguments.length-2;if(Rt===1)Yt.children=_t;else if(1<Rt){for(var Ge=Array(Rt),Oe=0;Oe<Rt;Oe++)Ge[Oe]=arguments[Oe+2];Yt.children=Ge}if(K&&K.defaultProps)for(jt in Rt=K.defaultProps,Rt)Yt[jt]===void 0&&(Yt[jt]=Rt[jt]);return U(K,te,Yt)},de.createRef=function(){return{current:null}},de.forwardRef=function(K){return{$$typeof:f,render:K}},de.isValidElement=X,de.lazy=function(K){return{$$typeof:A,_payload:{_status:-1,_result:K},_init:Et}},de.memo=function(K,ht){return{$$typeof:g,type:K,compare:ht===void 0?null:ht}},de.startTransition=function(K){var ht=z.T,_t={};z.T=_t;try{var jt=K(),Yt=z.S;Yt!==null&&Yt(_t,jt),typeof jt=="object"&&jt!==null&&typeof jt.then=="function"&&jt.then(tt,Ut)}catch(te){Ut(te)}finally{ht!==null&&_t.types!==null&&(ht.types=_t.types),z.T=ht}},de.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},de.use=function(K){return z.H.use(K)},de.useActionState=function(K,ht,_t){return z.H.useActionState(K,ht,_t)},de.useCallback=function(K,ht){return z.H.useCallback(K,ht)},de.useContext=function(K){return z.H.useContext(K)},de.useDebugValue=function(){},de.useDeferredValue=function(K,ht){return z.H.useDeferredValue(K,ht)},de.useEffect=function(K,ht){return z.H.useEffect(K,ht)},de.useEffectEvent=function(K){return z.H.useEffectEvent(K)},de.useId=function(){return z.H.useId()},de.useImperativeHandle=function(K,ht,_t){return z.H.useImperativeHandle(K,ht,_t)},de.useInsertionEffect=function(K,ht){return z.H.useInsertionEffect(K,ht)},de.useLayoutEffect=function(K,ht){return z.H.useLayoutEffect(K,ht)},de.useMemo=function(K,ht){return z.H.useMemo(K,ht)},de.useOptimistic=function(K,ht){return z.H.useOptimistic(K,ht)},de.useReducer=function(K,ht,_t){return z.H.useReducer(K,ht,_t)},de.useRef=function(K){return z.H.useRef(K)},de.useState=function(K){return z.H.useState(K)},de.useSyncExternalStore=function(K,ht,_t){return z.H.useSyncExternalStore(K,ht,_t)},de.useTransition=function(){return z.H.useTransition()},de.version="19.2.4",de}var D4;function b1(){return D4||(D4=1,Qv.exports=NR()),Qv.exports}var j=b1();const Gi=qb(j);var Xv={exports:{}},sg={},Kv={exports:{}},Wv={};var I4;function DR(){return I4||(I4=1,(function(n){function t($,Tt){var Et=$.length;$.push(Tt);t:for(;0<Et;){var Ut=Et-1>>>1,qt=$[Ut];if(0<s(qt,Tt))$[Ut]=Tt,$[Et]=qt,Et=Ut;else break t}}function e($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var Tt=$[0],Et=$.pop();if(Et!==Tt){$[0]=Et;t:for(var Ut=0,qt=$.length,K=qt>>>1;Ut<K;){var ht=2*(Ut+1)-1,_t=$[ht],jt=ht+1,Yt=$[jt];if(0>s(_t,Et))jt<qt&&0>s(Yt,_t)?($[Ut]=Yt,$[jt]=Et,Ut=jt):($[Ut]=_t,$[ht]=Et,Ut=ht);else if(jt<qt&&0>s(Yt,Et))$[Ut]=Yt,$[jt]=Et,Ut=jt;else break t}}return Tt}function s($,Tt){var Et=$.sortIndex-Tt.sortIndex;return Et!==0?Et:$.id-Tt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],g=[],A=1,S=null,T=3,x=!1,w=!1,L=!1,V=!1,G=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function et($){for(var Tt=e(g);Tt!==null;){if(Tt.callback===null)i(g);else if(Tt.startTime<=$)i(g),Tt.sortIndex=Tt.expirationTime,t(m,Tt);else break;Tt=e(g)}}function at($){if(L=!1,et($),!w)if(e(m)!==null)w=!0,tt||(tt=!0,Q());else{var Tt=e(g);Tt!==null&&Pt(at,Tt.startTime-$)}}var tt=!1,z=-1,M=5,U=-1;function q(){return V?!0:!(n.unstable_now()-U<M)}function X(){if(V=!1,tt){var $=n.unstable_now();U=$;var Tt=!0;try{t:{w=!1,L&&(L=!1,B(z),z=-1),x=!0;var Et=T;try{e:{for(et($),S=e(m);S!==null&&!(S.expirationTime>$&&q());){var Ut=S.callback;if(typeof Ut=="function"){S.callback=null,T=S.priorityLevel;var qt=Ut(S.expirationTime<=$);if($=n.unstable_now(),typeof qt=="function"){S.callback=qt,et($),Tt=!0;break e}S===e(m)&&i(m),et($)}else i(m);S=e(m)}if(S!==null)Tt=!0;else{var K=e(g);K!==null&&Pt(at,K.startTime-$),Tt=!1}}break t}finally{S=null,T=Et,x=!1}Tt=void 0}}finally{Tt?Q():tt=!1}}}var Q;if(typeof Y=="function")Q=function(){Y(X)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Ft=H.port2;H.port1.onmessage=X,Q=function(){Ft.postMessage(null)}}else Q=function(){G(X,0)};function Pt($,Tt){z=G(function(){$(n.unstable_now())},Tt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function($){switch(T){case 1:case 2:case 3:var Tt=3;break;default:Tt=T}var Et=T;T=Tt;try{return $()}finally{T=Et}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function($,Tt){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Et=T;T=$;try{return Tt()}finally{T=Et}},n.unstable_scheduleCallback=function($,Tt,Et){var Ut=n.unstable_now();switch(typeof Et=="object"&&Et!==null?(Et=Et.delay,Et=typeof Et=="number"&&0<Et?Ut+Et:Ut):Et=Ut,$){case 1:var qt=-1;break;case 2:qt=250;break;case 5:qt=1073741823;break;case 4:qt=1e4;break;default:qt=5e3}return qt=Et+qt,$={id:A++,callback:Tt,priorityLevel:$,startTime:Et,expirationTime:qt,sortIndex:-1},Et>Ut?($.sortIndex=Et,t(g,$),e(m)===null&&$===e(g)&&(L?(B(z),z=-1):L=!0,Pt(at,Et-Ut))):($.sortIndex=qt,t(m,$),w||x||(w=!0,tt||(tt=!0,Q()))),$},n.unstable_shouldYield=q,n.unstable_wrapCallback=function($){var Tt=T;return function(){var Et=T;T=Tt;try{return $.apply(this,arguments)}finally{T=Et}}}})(Wv)),Wv}var O4;function HA(){return O4||(O4=1,Kv.exports=DR()),Kv.exports}var Jv={exports:{}},zs={};var M4;function IR(){if(M4)return zs;M4=1;var n=b1();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)g+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(m,g,A){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:S==null?null:""+S,children:m,containerInfo:g,implementation:A}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return zs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,zs.createPortal=function(m,g){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(m,g,null,A)},zs.flushSync=function(m){var g=c.T,A=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=g,i.p=A,i.d.f()}},zs.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},zs.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},zs.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var A=g.as,S=f(A,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,x=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;A==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:T,fetchPriority:x}):A==="script"&&i.d.X(m,{crossOrigin:S,integrity:T,fetchPriority:x,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},zs.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var A=f(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},zs.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var A=g.as,S=f(A,g.crossOrigin);i.d.L(m,A,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},zs.preloadModule=function(m,g){if(typeof m=="string")if(g){var A=f(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},zs.requestFormReset=function(m){i.d.r(m)},zs.unstable_batchedUpdates=function(m,g){return m(g)},zs.useFormState=function(m,g,A){return c.H.useFormState(m,g,A)},zs.useFormStatus=function(){return c.H.useHostTransitionStatus()},zs.version="19.2.4",zs}var L4;function OR(){if(L4)return Jv.exports;L4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Jv.exports=IR(),Jv.exports}var V4;function MR(){if(V4)return sg;V4=1;var n=HA(),t=b1(),e=OR();function i(a){var r="https://react.dev/errors/"+a;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)r+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function l(a){var r=a,h=a;if(a.alternate)for(;r.return;)r=r.return;else{a=r;do r=a,(r.flags&4098)!==0&&(h=r.return),a=r.return;while(a)}return r.tag===3?h:null}function c(a){if(a.tag===13){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function f(a){if(a.tag===31){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function m(a){if(l(a)!==a)throw Error(i(188))}function g(a){var r=a.alternate;if(!r){if(r=l(a),r===null)throw Error(i(188));return r!==a?null:a}for(var h=a,d=r;;){var v=h.return;if(v===null)break;var E=v.alternate;if(E===null){if(d=v.return,d!==null){h=d;continue}break}if(v.child===E.child){for(E=v.child;E;){if(E===h)return m(v),a;if(E===d)return m(v),r;E=E.sibling}throw Error(i(188))}if(h.return!==d.return)h=v,d=E;else{for(var N=!1,O=v.child;O;){if(O===h){N=!0,h=v,d=E;break}if(O===d){N=!0,d=v,h=E;break}O=O.sibling}if(!N){for(O=E.child;O;){if(O===h){N=!0,h=E,d=v;break}if(O===d){N=!0,d=E,h=v;break}O=O.sibling}if(!N)throw Error(i(189))}}if(h.alternate!==d)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?a:r}function A(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a;for(a=a.child;a!==null;){if(r=A(a),r!==null)return r;a=a.sibling}return null}var S=Object.assign,T=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),et=Symbol.for("react.forward_ref"),at=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function Q(a){return a===null||typeof a!="object"?null:(a=X&&a[X]||a["@@iterator"],typeof a=="function"?a:null)}var H=Symbol.for("react.client.reference");function Ft(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===H?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case L:return"Fragment";case G:return"Profiler";case V:return"StrictMode";case at:return"Suspense";case tt:return"SuspenseList";case U:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case Y:return a.displayName||"Context";case B:return(a._context.displayName||"Context")+".Consumer";case et:var r=a.render;return a=a.displayName,a||(a=r.displayName||r.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case z:return r=a.displayName||null,r!==null?r:Ft(a.type)||"Memo";case M:r=a._payload,a=a._init;try{return Ft(a(r))}catch{}}return null}var Pt=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Et={pending:!1,data:null,method:null,action:null},Ut=[],qt=-1;function K(a){return{current:a}}function ht(a){0>qt||(a.current=Ut[qt],Ut[qt]=null,qt--)}function _t(a,r){qt++,Ut[qt]=a.current,a.current=r}var jt=K(null),Yt=K(null),te=K(null),Rt=K(null);function Ge(a,r){switch(_t(te,r),_t(Yt,a),_t(jt,null),r.nodeType){case 9:case 11:a=(a=r.documentElement)&&(a=a.namespaceURI)?WS(a):0;break;default:if(a=r.tagName,r=r.namespaceURI)r=WS(r),a=JS(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ht(jt),_t(jt,a)}function Oe(){ht(jt),ht(Yt),ht(te)}function as(a){a.memoizedState!==null&&_t(Rt,a);var r=jt.current,h=JS(r,a.type);r!==h&&(_t(Yt,a),_t(jt,h))}function ua(a){Yt.current===a&&(ht(jt),ht(Yt)),Rt.current===a&&(ht(Rt),$p._currentValue=Et)}var Li,ws;function rs(a){if(Li===void 0)try{throw Error()}catch(h){var r=h.stack.trim().match(/\n( *(at )?)/);Li=r&&r[1]||"",ws=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Li+a+ws}var Ys=!1;function ls(a,r){if(!a||Ys)return"";Ys=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var St=function(){throw Error()};if(Object.defineProperty(St.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(St,[])}catch(pt){var ct=pt}Reflect.construct(a,[],St)}else{try{St.call()}catch(pt){ct=pt}a.call(St.prototype)}}else{try{throw Error()}catch(pt){ct=pt}(St=a())&&typeof St.catch=="function"&&St.catch(function(){})}}catch(pt){if(pt&&ct&&typeof pt.stack=="string")return[pt.stack,ct.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=d.DetermineComponentFrameRoot(),N=E[0],O=E[1];if(N&&O){var W=N.split(`
`),ot=O.split(`
`);for(v=d=0;d<W.length&&!W[d].includes("DetermineComponentFrameRoot");)d++;for(;v<ot.length&&!ot[v].includes("DetermineComponentFrameRoot");)v++;if(d===W.length||v===ot.length)for(d=W.length-1,v=ot.length-1;1<=d&&0<=v&&W[d]!==ot[v];)v--;for(;1<=d&&0<=v;d--,v--)if(W[d]!==ot[v]){if(d!==1||v!==1)do if(d--,v--,0>v||W[d]!==ot[v]){var gt=`
`+W[d].replace(" at new "," at ");return a.displayName&&gt.includes("<anonymous>")&&(gt=gt.replace("<anonymous>",a.displayName)),gt}while(1<=d&&0<=v);break}}}finally{Ys=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?rs(h):""}function Qs(a,r){switch(a.tag){case 26:case 27:case 5:return rs(a.type);case 16:return rs("Lazy");case 13:return a.child!==r&&r!==null?rs("Suspense Fallback"):rs("Suspense");case 19:return rs("SuspenseList");case 0:case 15:return ls(a.type,!1);case 11:return ls(a.type.render,!1);case 1:return ls(a.type,!0);case 31:return rs("Activity");default:return""}}function Yl(a){try{var r="",h=null;do r+=Qs(a,h),h=a,a=a.return;while(a);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var mr=Object.prototype.hasOwnProperty,xs=n.unstable_scheduleCallback,Ha=n.unstable_cancelCallback,qa=n.unstable_shouldYield,Nn=n.unstable_requestPaint,jn=n.unstable_now,zo=n.unstable_getCurrentPriorityLevel,Dn=n.unstable_ImmediatePriority,rn=n.unstable_UserBlockingPriority,Fi=n.unstable_NormalPriority,os=n.unstable_LowPriority,ca=n.unstable_IdlePriority,vt=n.log,Lt=n.unstable_setDisableYieldValue,Kt=null,ne=null;function Me(a){if(typeof vt=="function"&&Lt(a),ne&&typeof ne.setStrictMode=="function")try{ne.setStrictMode(Kt,a)}catch{}}var ni=Math.clz32?Math.clz32:Ql,Fa=Math.log,ha=Math.LN2;function Ql(a){return a>>>=0,a===0?32:31-(Fa(a)/ha|0)|0}var pr=256,fa=262144,Ya=4194304;function da(a){var r=a&42;if(r!==0)return r;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function us(a,r,h){var d=a.pendingLanes;if(d===0)return 0;var v=0,E=a.suspendedLanes,N=a.pingedLanes;a=a.warmLanes;var O=d&134217727;return O!==0?(d=O&~E,d!==0?v=da(d):(N&=O,N!==0?v=da(N):h||(h=O&~a,h!==0&&(v=da(h))))):(O=d&~E,O!==0?v=da(O):N!==0?v=da(N):h||(h=d&~a,h!==0&&(v=da(h)))),v===0?0:r!==0&&r!==v&&(r&E)===0&&(E=v&-v,h=r&-r,E>=h||E===32&&(h&4194048)!==0)?r:v}function nl(a,r){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&r)===0}function Bo(a,r){switch(a){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qa(){var a=Ya;return Ya<<=1,(Ya&62914560)===0&&(Ya=4194304),a}function gr(a){for(var r=[],h=0;31>h;h++)r.push(a);return r}function il(a,r){a.pendingLanes|=r,r!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ii(a,r,h,d,v,E){var N=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var O=a.entanglements,W=a.expirationTimes,ot=a.hiddenUpdates;for(h=N&~h;0<h;){var gt=31-ni(h),St=1<<gt;O[gt]=0,W[gt]=-1;var ct=ot[gt];if(ct!==null)for(ot[gt]=null,gt=0;gt<ct.length;gt++){var pt=ct[gt];pt!==null&&(pt.lane&=-536870913)}h&=~St}d!==0&&sl(a,d,0),E!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=E&~(N&~r))}function sl(a,r,h){a.pendingLanes|=r,a.suspendedLanes&=~r;var d=31-ni(r);a.entangledLanes|=r,a.entanglements[d]=a.entanglements[d]|1073741824|h&261930}function Xa(a,r){var h=a.entangledLanes|=r;for(a=a.entanglements;h;){var d=31-ni(h),v=1<<d;v&r|a[d]&r&&(a[d]|=r),h&=~v}}function al(a,r){var h=r&-r;return h=(h&42)!==0?1:Xl(h),(h&(a.suspendedLanes|r))!==0?0:h}function Xl(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Kl(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Ka(){var a=Tt.p;return a!==0?a:(a=window.event,a===void 0?32:A4(a.type))}function _r(a,r){var h=Tt.p;try{return Tt.p=a,r()}finally{Tt.p=h}}var Wa=Math.random().toString(36).slice(2),pn="__reactFiber$"+Wa,ui="__reactProps$"+Wa,ma="__reactContainer$"+Wa,cs="__reactEvents$"+Wa,Vi="__reactListeners$"+Wa,Wl="__reactHandles$"+Wa,jo="__reactResources$"+Wa,Xs="__reactMarker$"+Wa;function Ja(a){delete a[pn],delete a[ui],delete a[cs],delete a[Vi],delete a[Wl]}function yr(a){var r=a[pn];if(r)return r;for(var h=a.parentNode;h;){if(r=h[ma]||h[pn]){if(h=r.alternate,r.child!==null||h!==null&&h.child!==null)for(a=s4(a);a!==null;){if(h=a[pn])return h;a=s4(a)}return r}a=h,h=a.parentNode}return null}function vr(a){if(a=a[pn]||a[ma]){var r=a.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return a}return null}function Jl(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a.stateNode;throw Error(i(33))}function Ks(a){var r=a[jo];return r||(r=a[jo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function In(a){a[Xs]=!0}var Ws=new Set,Ar={};function Yi(a,r){ki(a,r),ki(a+"Capture",r)}function ki(a,r){for(Ar[a]=r,a=0;a<r.length;a++)Ws.add(r[a])}var hs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zl={},ln={};function qu(a){return mr.call(ln,a)?!0:mr.call(Zl,a)?!1:hs.test(a)?ln[a]=!0:(Zl[a]=!0,!1)}function Er(a,r,h){if(qu(r))if(h===null)a.removeAttribute(r);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(r);return}}a.setAttribute(r,""+h)}}function rl(a,r,h){if(h===null)a.removeAttribute(r);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(r);return}a.setAttribute(r,""+h)}}function Js(a,r,h,d){if(d===null)a.removeAttribute(h);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(r,h,""+d)}}function fs(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Fu(a){var r=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Th(a,r,h){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,r);if(!a.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,E=d.set;return Object.defineProperty(a,r,{configurable:!0,get:function(){return v.call(this)},set:function(N){h=""+N,E.call(this,N)}}),Object.defineProperty(a,r,{enumerable:d.enumerable}),{getValue:function(){return h},setValue:function(N){h=""+N},stopTracking:function(){a._valueTracker=null,delete a[r]}}}}function $l(a){if(!a._valueTracker){var r=Fu(a)?"checked":"value";a._valueTracker=Th(a,r,""+a[r])}}function ci(a){if(!a)return!1;var r=a._valueTracker;if(!r)return!0;var h=r.getValue(),d="";return a&&(d=Fu(a)?a.checked?"true":"false":a.value),a=d,a!==h?(r.setValue(a),!0):!1}function on(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var pa=/[\n"\\]/g;function un(a){return a.replace(pa,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Za(a,r,h,d,v,E,N,O){a.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.type=N:a.removeAttribute("type"),r!=null?N==="number"?(r===0&&a.value===""||a.value!=r)&&(a.value=""+fs(r)):a.value!==""+fs(r)&&(a.value=""+fs(r)):N!=="submit"&&N!=="reset"||a.removeAttribute("value"),r!=null?Ns(a,N,fs(r)):h!=null?Ns(a,N,fs(h)):d!=null&&a.removeAttribute("value"),v==null&&E!=null&&(a.defaultChecked=!!E),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.name=""+fs(O):a.removeAttribute("name")}function ll(a,r,h,d,v,E,N,O){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.type=E),r!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||r!=null)){$l(a);return}h=h!=null?""+fs(h):"",r=r!=null?""+fs(r):h,O||r===a.value||(a.value=r),a.defaultValue=r}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=O?a.checked:!!d,a.defaultChecked=!!d,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(a.name=N),$l(a)}function Ns(a,r,h){r==="number"&&on(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function Le(a,r,h,d){if(a=a.options,r){r={};for(var v=0;v<h.length;v++)r["$"+h[v]]=!0;for(h=0;h<a.length;h++)v=r.hasOwnProperty("$"+a[h].value),a[h].selected!==v&&(a[h].selected=v),v&&d&&(a[h].defaultSelected=!0)}else{for(h=""+fs(h),r=null,v=0;v<a.length;v++){if(a[v].value===h){a[v].selected=!0,d&&(a[v].defaultSelected=!0);return}r!==null||a[v].disabled||(r=a[v])}r!==null&&(r.selected=!0)}}function ol(a,r,h){if(r!=null&&(r=""+fs(r),r!==a.value&&(a.value=r),h==null)){a.defaultValue!==r&&(a.defaultValue=r);return}a.defaultValue=h!=null?""+fs(h):""}function Sr(a,r,h,d){if(r==null){if(d!=null){if(h!=null)throw Error(i(92));if(Pt(d)){if(1<d.length)throw Error(i(93));d=d[0]}h=d}h==null&&(h=""),r=h}h=fs(r),a.defaultValue=h,d=a.textContent,d===h&&d!==""&&d!==null&&(a.value=d),$l(a)}function Zs(a,r){if(r){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=r;return}}a.textContent=r}var Jf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yu(a,r,h){var d=r.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?d?a.setProperty(r,""):r==="float"?a.cssFloat="":a[r]="":d?a.setProperty(r,h):typeof h!="number"||h===0||Jf.has(r)?r==="float"?a.cssFloat=h:a[r]=(""+h).trim():a[r]=h+"px"}function bh(a,r,h){if(r!=null&&typeof r!="object")throw Error(i(62));if(a=a.style,h!=null){for(var d in h)!h.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var v in r)d=r[v],r.hasOwnProperty(v)&&h[v]!==d&&Yu(a,v,d)}else for(var E in r)r.hasOwnProperty(E)&&Yu(a,E,r[E])}function Qu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ch=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $a(a){return Ch.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function vi(){}var Go=null;function Ho(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Tr=null,ds=null;function Rh(a){var r=vr(a);if(r&&(a=r.stateNode)){var h=a[ui]||null;t:switch(a=r.stateNode,r.type){case"input":if(Za(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),r=h.name,h.type==="radio"&&r!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+un(""+r)+'"][type="radio"]'),r=0;r<h.length;r++){var d=h[r];if(d!==a&&d.form===a.form){var v=d[ui]||null;if(!v)throw Error(i(90));Za(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<h.length;r++)d=h[r],d.form===a.form&&ci(d)}break t;case"textarea":ol(a,h.value,h.defaultValue);break t;case"select":r=h.value,r!=null&&Le(a,!!h.multiple,r,!1)}}}var Xu=!1;function wh(a,r,h){if(Xu)return a(r,h);Xu=!0;try{var d=a(r);return d}finally{if(Xu=!1,(Tr!==null||ds!==null)&&(lr(),Tr&&(r=Tr,a=ds,ds=Tr=null,Rh(r),a)))for(r=0;r<a.length;r++)Rh(a[r])}}function ms(a,r){var h=a.stateNode;if(h===null)return null;var d=h[ui]||null;if(d===null)return null;h=d[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break t;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(i(231,r,typeof h));return h}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xh=!1;if(ga)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){xh=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{xh=!1}var Ai=null,qo=null,$s=null;function er(){if($s)return $s;var a,r=qo,h=r.length,d,v="value"in Ai?Ai.value:Ai.textContent,E=v.length;for(a=0;a<h&&r[a]===v[a];a++);var N=h-a;for(d=1;d<=N&&r[h-d]===v[E-d];d++);return $s=v.slice(a,1<d?1-d:void 0)}function to(a){var r=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&r===13&&(a=13)):a=r,a===10&&(a=13),32<=a||a===13?a:0}function br(){return!0}function gn(){return!1}function Pi(a){function r(h,d,v,E,N){this._reactName=h,this._targetInst=v,this.type=d,this.nativeEvent=E,this.target=N,this.currentTarget=null;for(var O in a)a.hasOwnProperty(O)&&(h=a[O],this[O]=h?h(E):E[O]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?br:gn,this.isPropagationStopped=gn,this}return S(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),r}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=Pi(Cr),ul=S({},Cr,{view:0,detail:0}),Nh=Pi(ul),Rr,Fo,Qi,cl=S({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fl,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Qi&&(Qi&&a.type==="mousemove"?(Rr=a.screenX-Qi.screenX,Fo=a.screenY-Qi.screenY):Fo=Rr=0,Qi=a),Rr)},movementY:function(a){return"movementY"in a?a.movementY:Fo}}),Dh=Pi(cl),no=S({},cl,{dataTransfer:0}),Ih=Pi(no),Yo=S({},ul,{relatedTarget:0}),hl=Pi(Yo),Oh=S({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ku=Pi(Oh),Ym=S({},Cr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Mh=Pi(Ym),nr=S({},Cr,{data:0}),Qo=Pi(nr),Xo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zu(a){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(a):(a=Ju[a])?!!r[a]:!1}function fl(){return Zu}var Lh=S({},ul,{key:function(a){if(a.key){var r=Xo[a.key]||a.key;if(r!=="Unidentified")return r}return a.type==="keypress"?(a=to(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Wu[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fl,charCode:function(a){return a.type==="keypress"?to(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?to(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),wr=Pi(Lh),_a=S({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$u=Pi(_a),tc=S({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fl}),Vh=Pi(tc),kh=S({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ec=Pi(kh),Qe=S({},cl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Ph=Pi(Qe),Uh=S({},Cr,{newState:0,oldState:0}),dl=Pi(Uh),_=[9,13,27,32],R=ga&&"CompositionEvent"in window,D=null;ga&&"documentMode"in document&&(D=document.documentMode);var P=ga&&"TextEvent"in window&&!D,rt=ga&&(!R||D&&8<D&&11>=D),mt=" ",It=!1;function qe(a,r){switch(a){case"keyup":return _.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qn(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ge=!1;function hi(a,r){switch(a){case"compositionend":return Qn(r);case"keypress":return r.which!==32?null:(It=!0,mt);case"textInput":return a=r.data,a===mt&&It?null:a;default:return null}}function si(a,r){if(ge)return a==="compositionend"||!R&&qe(a,r)?(a=er(),$s=qo=Ai=null,ge=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return rt&&r.locale!=="ko"?null:r.data;default:return null}}var xr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ps(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r==="input"?!!xr[a.type]:r==="textarea"}function ml(a,r,h,d){Tr?ds?ds.push(d):ds=[d]:Tr=d,r=G_(r,"onChange"),0<r.length&&(h=new eo("onChange","change",null,h,d),a.push({event:h,listeners:r}))}var ya=null,Ko=null;function U0(a){qS(a,0)}function nc(a){var r=Jl(a);if(ci(r))return a}function Qm(a,r){if(a==="change")return r}var Nr=!1;if(ga){var zh;if(ga){var Xm="oninput"in document;if(!Xm){var Km=document.createElement("div");Km.setAttribute("oninput","return;"),Xm=typeof Km.oninput=="function"}zh=Xm}else zh=!1;Nr=zh&&(!document.documentMode||9<document.documentMode)}function va(){ya&&(ya.detachEvent("onpropertychange",Bh),Ko=ya=null)}function Bh(a){if(a.propertyName==="value"&&nc(Ko)){var r=[];ml(r,Ko,a,Ho(a)),wh(U0,r)}}function z0(a,r,h){a==="focusin"?(va(),ya=r,Ko=h,ya.attachEvent("onpropertychange",Bh)):a==="focusout"&&va()}function Wm(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return nc(Ko)}function B0(a,r){if(a==="click")return nc(r)}function j0(a,r){if(a==="input"||a==="change")return nc(r)}function Jm(a,r){return a===r&&(a!==0||1/a===1/r)||a!==a&&r!==r}var gs=typeof Object.is=="function"?Object.is:Jm;function ic(a,r){if(gs(a,r))return!0;if(typeof a!="object"||a===null||typeof r!="object"||r===null)return!1;var h=Object.keys(a),d=Object.keys(r);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var v=h[d];if(!mr.call(r,v)||!gs(a[v],r[v]))return!1}return!0}function jh(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function sc(a,r){var h=jh(a);a=0;for(var d;h;){if(h.nodeType===3){if(d=a+h.textContent.length,a<=r&&d>=r)return{node:h,offset:r-a};a=d}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=jh(h)}}function cn(a,r){return a&&r?a===r?!0:a&&a.nodeType===3?!1:r&&r.nodeType===3?cn(a,r.parentNode):"contains"in a?a.contains(r):a.compareDocumentPosition?!!(a.compareDocumentPosition(r)&16):!1:!1}function G0(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var r=on(a.document);r instanceof a.HTMLIFrameElement;){try{var h=typeof r.contentWindow.location.href=="string"}catch{h=!1}if(h)a=r.contentWindow;else break;r=on(a.document)}return r}function Zm(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r&&(r==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||r==="textarea"||a.contentEditable==="true")}var H0=ga&&"documentMode"in document&&11>=document.documentMode,Dr=null,Ir=null,ac=null,$f=!1;function rc(a,r,h){var d=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;$f||Dr==null||Dr!==on(d)||(d=Dr,"selectionStart"in d&&Zm(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ac&&ic(ac,d)||(ac=d,d=G_(Ir,"onSelect"),0<d.length&&(r=new eo("onSelect","select",null,r,h),a.push({event:r,listeners:d}),r.target=Dr)))}function Xi(a,r){var h={};return h[a.toLowerCase()]=r.toLowerCase(),h["Webkit"+a]="webkit"+r,h["Moz"+a]="moz"+r,h}var Wo={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionrun:Xi("Transition","TransitionRun"),transitionstart:Xi("Transition","TransitionStart"),transitioncancel:Xi("Transition","TransitionCancel"),transitionend:Xi("Transition","TransitionEnd")},Gh={},$m={};ga&&($m=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function pl(a){if(Gh[a])return Gh[a];if(!Wo[a])return a;var r=Wo[a],h;for(h in r)if(r.hasOwnProperty(h)&&h in $m)return Gh[a]=r[h];return a}var td=pl("animationend"),Hh=pl("animationiteration"),tp=pl("animationstart"),q0=pl("transitionrun"),pv=pl("transitionstart"),F0=pl("transitioncancel"),ep=pl("transitionend"),Aa=new Map,qh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qh.push("scrollEnd");function Ea(a,r){Aa.set(a,r),Yi(r,[a])}var Fh=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Sa=[],gl=0,Ei=0;function Yh(){for(var a=gl,r=Ei=gl=0;r<a;){var h=Sa[r];Sa[r++]=null;var d=Sa[r];Sa[r++]=null;var v=Sa[r];Sa[r++]=null;var E=Sa[r];if(Sa[r++]=null,d!==null&&v!==null){var N=d.pending;N===null?v.next=v:(v.next=N.next,N.next=v),d.pending=v}E!==0&&io(h,v,E)}}function Si(a,r,h,d){Sa[gl++]=a,Sa[gl++]=r,Sa[gl++]=h,Sa[gl++]=d,Ei|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function ed(a,r,h,d){return Si(a,r,h,d),Ta(a)}function _s(a,r){return Si(a,null,null,r),Ta(a)}function io(a,r,h){a.lanes|=h;var d=a.alternate;d!==null&&(d.lanes|=h);for(var v=!1,E=a.return;E!==null;)E.childLanes|=h,d=E.alternate,d!==null&&(d.childLanes|=h),E.tag===22&&(a=E.stateNode,a===null||a._visibility&1||(v=!0)),a=E,E=E.return;return a.tag===3?(E=a.stateNode,v&&r!==null&&(v=31-ni(h),a=E.hiddenUpdates,d=a[v],d===null?a[v]=[r]:d.push(r),r.lane=h|536870912),E):null}function Ta(a){if(50<To)throw To=0,pu=null,Error(i(185));for(var r=a.return;r!==null;)a=r,r=a.return;return a.tag===3?a.stateNode:null}var so={};function np(a,r,h,d){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(a,r,h,d){return new np(a,r,h,d)}function nd(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ds(a,r){var h=a.alternate;return h===null?(h=On(a.tag,r,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=r,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,r=a.dependencies,h.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function lc(a,r){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,r=h.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a}function Or(a,r,h,d,v,E){var N=0;if(d=a,typeof a=="function")nd(a)&&(N=1);else if(typeof a=="string")N=pR(a,h,jt.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case U:return a=On(31,h,r,v),a.elementType=U,a.lanes=E,a;case L:return ao(h.children,v,E,r);case V:N=8,v|=24;break;case G:return a=On(12,h,r,v|2),a.elementType=G,a.lanes=E,a;case at:return a=On(13,h,r,v),a.elementType=at,a.lanes=E,a;case tt:return a=On(19,h,r,v),a.elementType=tt,a.lanes=E,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Y:N=10;break t;case B:N=9;break t;case et:N=11;break t;case z:N=14;break t;case M:N=16,d=null;break t}N=29,h=Error(i(130,a===null?"null":typeof a,"")),d=null}return r=On(N,h,r,v),r.elementType=a,r.type=d,r.lanes=E,r}function ao(a,r,h,d){return a=On(7,a,d,r),a.lanes=h,a}function id(a,r,h){return a=On(6,a,null,r),a.lanes=h,a}function oc(a){var r=On(18,null,null,0);return r.stateNode=a,r}function sd(a,r,h){return r=On(4,a.children!==null?a.children:[],a.key,r),r.lanes=h,r.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},r}var Qh=new WeakMap;function ta(a,r){if(typeof a=="object"&&a!==null){var h=Qh.get(a);return h!==void 0?h:(r={value:a,source:r,stack:Yl(r)},Qh.set(a,r),r)}return{value:a,source:r,stack:Yl(r)}}var ro=[],lo=0,uc=null,cc=0,Is=[],En=0,_l=null,Mn=1,ir="";function Mr(a,r){ro[lo++]=cc,ro[lo++]=uc,uc=a,cc=r}function Y0(a,r,h){Is[En++]=Mn,Is[En++]=ir,Is[En++]=_l,_l=a;var d=Mn;a=ir;var v=32-ni(d)-1;d&=~(1<<v),h+=1;var E=32-ni(r)+v;if(30<E){var N=v-v%5;E=(d&(1<<N)-1).toString(32),d>>=N,v-=N,Mn=1<<32-ni(r)+v|h<<v|d,ir=E+a}else Mn=1<<E|h<<v|d,ir=a}function Lr(a){a.return!==null&&(Mr(a,1),Y0(a,1,0))}function ad(a){for(;a===uc;)uc=ro[--lo],ro[lo]=null,cc=ro[--lo],ro[lo]=null;for(;a===_l;)_l=Is[--En],Is[En]=null,ir=Is[--En],Is[En]=null,Mn=Is[--En],Is[En]=null}function rd(a,r){Is[En++]=Mn,Is[En++]=ir,Is[En++]=_l,Mn=r.id,ir=r.overflow,_l=a}var Gn=null,hn=null,xe=!1,yl=null,ea=!1,hc=Error(i(519));function Vr(a){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kr(ta(r,a)),hc}function Q0(a){var r=a.stateNode,h=a.type,d=a.memoizedProps;switch(r[pn]=a,r[ui]=d,h){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(h=0;h<ka.length;h++)ke(ka[h],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":ke("invalid",r),ll(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":ke("invalid",r);break;case"textarea":ke("invalid",r),Sr(r,d.value,d.defaultValue,d.children)}h=d.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||r.textContent===""+h||d.suppressHydrationWarning===!0||XS(r.textContent,h)?(d.popover!=null&&(ke("beforetoggle",r),ke("toggle",r)),d.onScroll!=null&&ke("scroll",r),d.onScrollEnd!=null&&ke("scrollend",r),d.onClick!=null&&(r.onclick=vi),r=!0):r=!1,r||Vr(a,!0)}function X0(a){for(Gn=a.return;Gn;)switch(Gn.tag){case 5:case 31:case 13:ea=!1;return;case 27:case 3:ea=!0;return;default:Gn=Gn.return}}function fc(a){if(a!==Gn)return!1;if(!xe)return X0(a),xe=!0,!1;var r=a.tag,h;if((h=r!==3&&r!==27)&&((h=r===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||Iv(a.type,a.memoizedProps)),h=!h),h&&hn&&Vr(a),X0(a),r===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));hn=i4(a)}else if(r===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));hn=i4(a)}else r===27?(r=hn,Oc(a.type)?(a=kv,kv=null,hn=a):hn=r):hn=Gn?Wr(a.stateNode.nextSibling):null;return!0}function oo(){hn=Gn=null,xe=!1}function ld(){var a=yl;return a!==null&&(qn===null?qn=a:qn.push.apply(qn,a),yl=null),a}function kr(a){yl===null?yl=[a]:yl.push(a)}var dc=K(null),uo=null,Pr=null;function vl(a,r,h){_t(dc,r._currentValue),r._currentValue=h}function Ur(a){a._currentValue=dc.current,ht(dc)}function od(a,r,h){for(;a!==null;){var d=a.alternate;if((a.childLanes&r)!==r?(a.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),a===h)break;a=a.return}}function ud(a,r,h,d){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var E=v.dependencies;if(E!==null){var N=v.child;E=E.firstContext;t:for(;E!==null;){var O=E;E=v;for(var W=0;W<r.length;W++)if(O.context===r[W]){E.lanes|=h,O=E.alternate,O!==null&&(O.lanes|=h),od(E.return,h,a),d||(N=null);break t}E=O.next}}else if(v.tag===18){if(N=v.return,N===null)throw Error(i(341));N.lanes|=h,E=N.alternate,E!==null&&(E.lanes|=h),od(N,h,a),N=null}else N=v.child;if(N!==null)N.return=v;else for(N=v;N!==null;){if(N===a){N=null;break}if(v=N.sibling,v!==null){v.return=N.return,N=v;break}N=N.return}v=N}}function zr(a,r,h,d){a=null;for(var v=r,E=!1;v!==null;){if(!E){if((v.flags&524288)!==0)E=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var N=v.alternate;if(N===null)throw Error(i(387));if(N=N.memoizedProps,N!==null){var O=v.type;gs(v.pendingProps.value,N.value)||(a!==null?a.push(O):a=[O])}}else if(v===Rt.current){if(N=v.alternate,N===null)throw Error(i(387));N.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push($p):a=[$p])}v=v.return}a!==null&&ud(r,a,h,d),r.flags|=262144}function Xh(a){for(a=a.firstContext;a!==null;){if(!gs(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function co(a){uo=a,Pr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function se(a){return K0(uo,a)}function mc(a,r){return uo===null&&co(a),K0(a,r)}function K0(a,r){var h=r._currentValue;if(r={context:r,memoizedValue:h,next:null},Pr===null){if(a===null)throw Error(i(308));Pr=r,a.dependencies={lanes:0,firstContext:r},a.flags|=524288}else Pr=Pr.next=r;return h}var W0=typeof AbortController<"u"?AbortController:function(){var a=[],r=this.signal={aborted:!1,addEventListener:function(h,d){a.push(d)}};this.abort=function(){r.aborted=!0,a.forEach(function(h){return h()})}},gv=n.unstable_scheduleCallback,_v=n.unstable_NormalPriority,ai={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ip(){return{controller:new W0,data:new Map,refCount:0}}function Jo(a){a.refCount--,a.refCount===0&&gv(_v,function(){a.controller.abort()})}var na=null,cd=0,Al=0,ba=null;function sp(a,r){if(na===null){var h=na=[];cd=0,Al=ft(),ba={status:"pending",value:void 0,then:function(d){h.push(d)}}}return cd++,r.then(ap,ap),r}function ap(){if(--cd===0&&na!==null){ba!==null&&(ba.status="fulfilled");var a=na;na=null,Al=0,ba=null;for(var r=0;r<a.length;r++)(0,a[r])()}}function rp(a,r){var h=[],d={status:"pending",value:null,reason:null,then:function(v){h.push(v)}};return a.then(function(){d.status="fulfilled",d.value=r;for(var v=0;v<h.length;v++)(0,h[v])(r)},function(v){for(d.status="rejected",d.reason=v,v=0;v<h.length;v++)(0,h[v])(void 0)}),d}var J0=$.S;$.S=function(a,r){Qp=jn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&sp(a,r),J0!==null&&J0(a,r)};var ho=K(null);function hd(){var a=ho.current;return a!==null?a:le.pooledCache}function Kh(a,r){r===null?_t(ho,ho.current):_t(ho,r.pool)}function lp(){var a=hd();return a===null?null:{parent:ai._currentValue,pool:a}}var Zo=Error(i(460)),Wh=Error(i(474)),_e=Error(i(542)),fd={then:function(){}};function Os(a){return a=a.status,a==="fulfilled"||a==="rejected"}function dd(a,r,h){switch(h=a[h],h===void 0?a.push(r):h!==r&&(r.then(vi,vi),r=h),r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,eu(a),a;default:if(typeof r.status=="string")r.then(vi,vi);else{if(a=le,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=r,a.status="pending",a.then(function(d){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=d}},function(d){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,eu(a),a}throw Br=r,Zo}}function $o(a){try{var r=a._init;return r(a._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Br=h,Zo):h}}var Br=null;function tu(){if(Br===null)throw Error(i(459));var a=Br;return Br=null,a}function eu(a){if(a===Zo||a===_e)throw Error(i(483))}var nu=null,iu=0;function Jh(a){var r=iu;return iu+=1,nu===null&&(nu=[]),dd(nu,a,r)}function Ca(a,r){r=r.props.ref,a.ref=r!==void 0?r:null}function pc(a,r){throw r.$$typeof===T?Error(i(525)):(a=Object.prototype.toString.call(r),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":a)))}function md(a){function r(nt,Z){if(a){var lt=nt.deletions;lt===null?(nt.deletions=[Z],nt.flags|=16):lt.push(Z)}}function h(nt,Z){if(!a)return null;for(;Z!==null;)r(nt,Z),Z=Z.sibling;return null}function d(nt){for(var Z=new Map;nt!==null;)nt.key!==null?Z.set(nt.key,nt):Z.set(nt.index,nt),nt=nt.sibling;return Z}function v(nt,Z){return nt=Ds(nt,Z),nt.index=0,nt.sibling=null,nt}function E(nt,Z,lt){return nt.index=lt,a?(lt=nt.alternate,lt!==null?(lt=lt.index,lt<Z?(nt.flags|=67108866,Z):lt):(nt.flags|=67108866,Z)):(nt.flags|=1048576,Z)}function N(nt){return a&&nt.alternate===null&&(nt.flags|=67108866),nt}function O(nt,Z,lt,yt){return Z===null||Z.tag!==6?(Z=id(lt,nt.mode,yt),Z.return=nt,Z):(Z=v(Z,lt),Z.return=nt,Z)}function W(nt,Z,lt,yt){var Zt=lt.type;return Zt===L?gt(nt,Z,lt.props.children,yt,lt.key):Z!==null&&(Z.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===M&&$o(Zt)===Z.type)?(Z=v(Z,lt.props),Ca(Z,lt),Z.return=nt,Z):(Z=Or(lt.type,lt.key,lt.props,null,nt.mode,yt),Ca(Z,lt),Z.return=nt,Z)}function ot(nt,Z,lt,yt){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==lt.containerInfo||Z.stateNode.implementation!==lt.implementation?(Z=sd(lt,nt.mode,yt),Z.return=nt,Z):(Z=v(Z,lt.children||[]),Z.return=nt,Z)}function gt(nt,Z,lt,yt,Zt){return Z===null||Z.tag!==7?(Z=ao(lt,nt.mode,yt,Zt),Z.return=nt,Z):(Z=v(Z,lt),Z.return=nt,Z)}function St(nt,Z,lt){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=id(""+Z,nt.mode,lt),Z.return=nt,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:return lt=Or(Z.type,Z.key,Z.props,null,nt.mode,lt),Ca(lt,Z),lt.return=nt,lt;case w:return Z=sd(Z,nt.mode,lt),Z.return=nt,Z;case M:return Z=$o(Z),St(nt,Z,lt)}if(Pt(Z)||Q(Z))return Z=ao(Z,nt.mode,lt,null),Z.return=nt,Z;if(typeof Z.then=="function")return St(nt,Jh(Z),lt);if(Z.$$typeof===Y)return St(nt,mc(nt,Z),lt);pc(nt,Z)}return null}function ct(nt,Z,lt,yt){var Zt=Z!==null?Z.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Zt!==null?null:O(nt,Z,""+lt,yt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case x:return lt.key===Zt?W(nt,Z,lt,yt):null;case w:return lt.key===Zt?ot(nt,Z,lt,yt):null;case M:return lt=$o(lt),ct(nt,Z,lt,yt)}if(Pt(lt)||Q(lt))return Zt!==null?null:gt(nt,Z,lt,yt,null);if(typeof lt.then=="function")return ct(nt,Z,Jh(lt),yt);if(lt.$$typeof===Y)return ct(nt,Z,mc(nt,lt),yt);pc(nt,lt)}return null}function pt(nt,Z,lt,yt,Zt){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return nt=nt.get(lt)||null,O(Z,nt,""+yt,Zt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case x:return nt=nt.get(yt.key===null?lt:yt.key)||null,W(Z,nt,yt,Zt);case w:return nt=nt.get(yt.key===null?lt:yt.key)||null,ot(Z,nt,yt,Zt);case M:return yt=$o(yt),pt(nt,Z,lt,yt,Zt)}if(Pt(yt)||Q(yt))return nt=nt.get(lt)||null,gt(Z,nt,yt,Zt,null);if(typeof yt.then=="function")return pt(nt,Z,lt,Jh(yt),Zt);if(yt.$$typeof===Y)return pt(nt,Z,lt,mc(Z,yt),Zt);pc(Z,yt)}return null}function Ht(nt,Z,lt,yt){for(var Zt=null,Xe=null,Qt=Z,Ae=Z=0,ze=null;Qt!==null&&Ae<lt.length;Ae++){Qt.index>Ae?(ze=Qt,Qt=null):ze=Qt.sibling;var Ke=ct(nt,Qt,lt[Ae],yt);if(Ke===null){Qt===null&&(Qt=ze);break}a&&Qt&&Ke.alternate===null&&r(nt,Qt),Z=E(Ke,Z,Ae),Xe===null?Zt=Ke:Xe.sibling=Ke,Xe=Ke,Qt=ze}if(Ae===lt.length)return h(nt,Qt),xe&&Mr(nt,Ae),Zt;if(Qt===null){for(;Ae<lt.length;Ae++)Qt=St(nt,lt[Ae],yt),Qt!==null&&(Z=E(Qt,Z,Ae),Xe===null?Zt=Qt:Xe.sibling=Qt,Xe=Qt);return xe&&Mr(nt,Ae),Zt}for(Qt=d(Qt);Ae<lt.length;Ae++)ze=pt(Qt,nt,Ae,lt[Ae],yt),ze!==null&&(a&&ze.alternate!==null&&Qt.delete(ze.key===null?Ae:ze.key),Z=E(ze,Z,Ae),Xe===null?Zt=ze:Xe.sibling=ze,Xe=ze);return a&&Qt.forEach(function(Pc){return r(nt,Pc)}),xe&&Mr(nt,Ae),Zt}function ie(nt,Z,lt,yt){if(lt==null)throw Error(i(151));for(var Zt=null,Xe=null,Qt=Z,Ae=Z=0,ze=null,Ke=lt.next();Qt!==null&&!Ke.done;Ae++,Ke=lt.next()){Qt.index>Ae?(ze=Qt,Qt=null):ze=Qt.sibling;var Pc=ct(nt,Qt,Ke.value,yt);if(Pc===null){Qt===null&&(Qt=ze);break}a&&Qt&&Pc.alternate===null&&r(nt,Qt),Z=E(Pc,Z,Ae),Xe===null?Zt=Pc:Xe.sibling=Pc,Xe=Pc,Qt=ze}if(Ke.done)return h(nt,Qt),xe&&Mr(nt,Ae),Zt;if(Qt===null){for(;!Ke.done;Ae++,Ke=lt.next())Ke=St(nt,Ke.value,yt),Ke!==null&&(Z=E(Ke,Z,Ae),Xe===null?Zt=Ke:Xe.sibling=Ke,Xe=Ke);return xe&&Mr(nt,Ae),Zt}for(Qt=d(Qt);!Ke.done;Ae++,Ke=lt.next())Ke=pt(Qt,nt,Ae,Ke.value,yt),Ke!==null&&(a&&Ke.alternate!==null&&Qt.delete(Ke.key===null?Ae:Ke.key),Z=E(Ke,Z,Ae),Xe===null?Zt=Ke:Xe.sibling=Ke,Xe=Ke);return a&&Qt.forEach(function(RR){return r(nt,RR)}),xe&&Mr(nt,Ae),Zt}function mn(nt,Z,lt,yt){if(typeof lt=="object"&&lt!==null&&lt.type===L&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case x:t:{for(var Zt=lt.key;Z!==null;){if(Z.key===Zt){if(Zt=lt.type,Zt===L){if(Z.tag===7){h(nt,Z.sibling),yt=v(Z,lt.props.children),yt.return=nt,nt=yt;break t}}else if(Z.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===M&&$o(Zt)===Z.type){h(nt,Z.sibling),yt=v(Z,lt.props),Ca(yt,lt),yt.return=nt,nt=yt;break t}h(nt,Z);break}else r(nt,Z);Z=Z.sibling}lt.type===L?(yt=ao(lt.props.children,nt.mode,yt,lt.key),yt.return=nt,nt=yt):(yt=Or(lt.type,lt.key,lt.props,null,nt.mode,yt),Ca(yt,lt),yt.return=nt,nt=yt)}return N(nt);case w:t:{for(Zt=lt.key;Z!==null;){if(Z.key===Zt)if(Z.tag===4&&Z.stateNode.containerInfo===lt.containerInfo&&Z.stateNode.implementation===lt.implementation){h(nt,Z.sibling),yt=v(Z,lt.children||[]),yt.return=nt,nt=yt;break t}else{h(nt,Z);break}else r(nt,Z);Z=Z.sibling}yt=sd(lt,nt.mode,yt),yt.return=nt,nt=yt}return N(nt);case M:return lt=$o(lt),mn(nt,Z,lt,yt)}if(Pt(lt))return Ht(nt,Z,lt,yt);if(Q(lt)){if(Zt=Q(lt),typeof Zt!="function")throw Error(i(150));return lt=Zt.call(lt),ie(nt,Z,lt,yt)}if(typeof lt.then=="function")return mn(nt,Z,Jh(lt),yt);if(lt.$$typeof===Y)return mn(nt,Z,mc(nt,lt),yt);pc(nt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,Z!==null&&Z.tag===6?(h(nt,Z.sibling),yt=v(Z,lt),yt.return=nt,nt=yt):(h(nt,Z),yt=id(lt,nt.mode,yt),yt.return=nt,nt=yt),N(nt)):h(nt,Z)}return function(nt,Z,lt,yt){try{iu=0;var Zt=mn(nt,Z,lt,yt);return nu=null,Zt}catch(Qt){if(Qt===Zo||Qt===_e)throw Qt;var Xe=On(29,Qt,null,nt.mode);return Xe.lanes=yt,Xe.return=nt,Xe}}}var El=md(!0),pd=md(!1),ys=!1;function Zh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function op(a,r){a=a.updateQueue,r.updateQueue===a&&(r.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Sl(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function fo(a,r,h){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Xt&2)!==0){var v=d.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),d.pending=r,r=Ta(a),io(a,null,h),r}return Si(a,d,r,h),Ta(a)}function mo(a,r,h){if(r=r.updateQueue,r!==null&&(r=r.shared,(h&4194048)!==0)){var d=r.lanes;d&=a.pendingLanes,h|=d,r.lanes=h,Xa(a,h)}}function Jt(a,r){var h=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var v=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var N={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?v=E=N:E=E.next=N,h=h.next}while(h!==null);E===null?v=E=r:E=E.next=r}else v=E=r;h={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:E,shared:d.shared,callbacks:d.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=r:a.next=r,h.lastBaseUpdate=r}var up=!1;function $h(){if(up){var a=ba;if(a!==null)throw a}}function gc(a,r,h,d){up=!1;var v=a.updateQueue;ys=!1;var E=v.firstBaseUpdate,N=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var W=O,ot=W.next;W.next=null,N===null?E=ot:N.next=ot,N=W;var gt=a.alternate;gt!==null&&(gt=gt.updateQueue,O=gt.lastBaseUpdate,O!==N&&(O===null?gt.firstBaseUpdate=ot:O.next=ot,gt.lastBaseUpdate=W))}if(E!==null){var St=v.baseState;N=0,gt=ot=W=null,O=E;do{var ct=O.lane&-536870913,pt=ct!==O.lane;if(pt?(pe&ct)===ct:(d&ct)===ct){ct!==0&&ct===Al&&(up=!0),gt!==null&&(gt=gt.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});t:{var Ht=a,ie=O;ct=r;var mn=h;switch(ie.tag){case 1:if(Ht=ie.payload,typeof Ht=="function"){St=Ht.call(mn,St,ct);break t}St=Ht;break t;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=ie.payload,ct=typeof Ht=="function"?Ht.call(mn,St,ct):Ht,ct==null)break t;St=S({},St,ct);break t;case 2:ys=!0}}ct=O.callback,ct!==null&&(a.flags|=64,pt&&(a.flags|=8192),pt=v.callbacks,pt===null?v.callbacks=[ct]:pt.push(ct))}else pt={lane:ct,tag:O.tag,payload:O.payload,callback:O.callback,next:null},gt===null?(ot=gt=pt,W=St):gt=gt.next=pt,N|=ct;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;pt=O,O=pt.next,pt.next=null,v.lastBaseUpdate=pt,v.shared.pending=null}}while(!0);gt===null&&(W=St),v.baseState=W,v.firstBaseUpdate=ot,v.lastBaseUpdate=gt,E===null&&(v.shared.lanes=0),Qr|=N,a.lanes=N,a.memoizedState=St}}function _c(a,r){if(typeof a!="function")throw Error(i(191,a));a.call(r)}function Z0(a,r){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)_c(h[a],r)}var yc=K(null),gd=K(0);function $0(a,r){a=ra,_t(gd,a),_t(yc,r),ra=a|r.baseLanes}function cp(){_t(gd,ra),_t(yc,yc.current)}function tf(){ra=gd.current,ht(yc),ht(gd)}var Ms=K(null),vs=null;function Tl(a){var r=a.alternate;_t(Ne,Ne.current&1),_t(Ms,a),vs===null&&(r===null||yc.current!==null||r.memoizedState!==null)&&(vs=a)}function hp(a){_t(Ne,Ne.current),_t(Ms,a),vs===null&&(vs=a)}function t_(a){a.tag===22?(_t(Ne,Ne.current),_t(Ms,a),vs===null&&(vs=a)):Ls()}function Ls(){_t(Ne,Ne.current),_t(Ms,Ms.current)}function Xn(a){ht(Ms),vs===a&&(vs=null),ht(Ne)}var Ne=K(0);function ia(a){for(var r=a;r!==null;){if(r.tag===13){var h=r.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Lv(h)||Vv(h)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Sn=0,he=null,en=null,Te=null,Ra=!1,vc=!1,su=!1,_d=0,ef=0,Ac=null,fp=0;function Ln(){throw Error(i(321))}function dp(a,r){if(r===null)return!1;for(var h=0;h<r.length&&h<a.length;h++)if(!gs(a[h],r[h]))return!1;return!0}function yd(a,r,h,d,v,E){return Sn=E,he=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=a===null||a.memoizedState===null?O_:Mp,su=!1,E=h(d,v),su=!1,vc&&(E=au(r,h,d,v)),e_(a),E}function e_(a){$.H=Ec;var r=en!==null&&en.next!==null;if(Sn=0,Te=en=he=null,Ra=!1,ef=0,Ac=null,r)throw Error(i(300));a===null||ri||(a=a.dependencies,a!==null&&Xh(a)&&(ri=!0))}function au(a,r,h,d){he=a;var v=0;do{if(vc&&(Ac=null),ef=0,vc=!1,25<=v)throw Error(i(301));if(v+=1,Te=en=null,a.updateQueue!=null){var E=a.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}$.H=wa,E=r(h,d)}while(vc);return E}function ru(){var a=$.H,r=a.useState()[0];return r=typeof r.then=="function"?nf(r):r,a=a.useState()[0],(en!==null?en.memoizedState:null)!==a&&(he.flags|=1024),r}function mp(){var a=_d!==0;return _d=0,a}function pp(a,r,h){r.updateQueue=a.updateQueue,r.flags&=-2053,a.lanes&=~h}function gp(a){if(Ra){for(a=a.memoizedState;a!==null;){var r=a.queue;r!==null&&(r.pending=null),a=a.next}Ra=!1}Sn=0,Te=en=he=null,vc=!1,ef=_d=0,Ac=null}function fi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?he.memoizedState=Te=a:Te=Te.next=a,Te}function Kn(){if(en===null){var a=he.alternate;a=a!==null?a.memoizedState:null}else a=en.next;var r=Te===null?he.memoizedState:Te.next;if(r!==null)Te=r,en=a;else{if(a===null)throw he.alternate===null?Error(i(467)):Error(i(310));en=a,a={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},Te===null?he.memoizedState=Te=a:Te=Te.next=a}return Te}function vd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nf(a){var r=ef;return ef+=1,Ac===null&&(Ac=[]),a=dd(Ac,a,r),r=he,(Te===null?r.memoizedState:Te.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?O_:Mp),a}function po(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return nf(a);if(a.$$typeof===Y)return se(a)}throw Error(i(438,String(a)))}function _p(a){var r=null,h=he.updateQueue;if(h!==null&&(r=h.memoCache),r==null){var d=he.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),h===null&&(h=vd(),he.updateQueue=h),h.memoCache=r,h=r.data[r.index],h===void 0)for(h=r.data[r.index]=Array(a),d=0;d<a;d++)h[d]=q;return r.index++,h}function bl(a,r){return typeof r=="function"?r(a):r}function Ad(a){var r=Kn();return yp(r,en,a)}function yp(a,r,h){var d=a.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=h;var v=a.baseQueue,E=d.pending;if(E!==null){if(v!==null){var N=v.next;v.next=E.next,E.next=N}r.baseQueue=v=E,d.pending=null}if(E=a.baseState,v===null)a.memoizedState=E;else{r=v.next;var O=N=null,W=null,ot=r,gt=!1;do{var St=ot.lane&-536870913;if(St!==ot.lane?(pe&St)===St:(Sn&St)===St){var ct=ot.revertLane;if(ct===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null}),St===Al&&(gt=!0);else if((Sn&ct)===ct){ot=ot.next,ct===Al&&(gt=!0);continue}else St={lane:0,revertLane:ot.revertLane,gesture:null,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},W===null?(O=W=St,N=E):W=W.next=St,he.lanes|=ct,Qr|=ct;St=ot.action,su&&h(E,St),E=ot.hasEagerState?ot.eagerState:h(E,St)}else ct={lane:St,revertLane:ot.revertLane,gesture:ot.gesture,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},W===null?(O=W=ct,N=E):W=W.next=ct,he.lanes|=St,Qr|=St;ot=ot.next}while(ot!==null&&ot!==r);if(W===null?N=E:W.next=O,!gs(E,a.memoizedState)&&(ri=!0,gt&&(h=ba,h!==null)))throw h;a.memoizedState=E,a.baseState=N,a.baseQueue=W,d.lastRenderedState=E}return v===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function vp(a){var r=Kn(),h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=a;var d=h.dispatch,v=h.pending,E=r.memoizedState;if(v!==null){h.pending=null;var N=v=v.next;do E=a(E,N.action),N=N.next;while(N!==v);gs(E,r.memoizedState)||(ri=!0),r.memoizedState=E,r.baseQueue===null&&(r.baseState=E),h.lastRenderedState=E}return[E,d]}function n_(a,r,h){var d=he,v=Kn(),E=xe;if(E){if(h===void 0)throw Error(i(407));h=h()}else h=r();var N=!gs((en||v).memoizedState,h);if(N&&(v.memoizedState=h,ri=!0),v=v.queue,wp(a_.bind(null,d,v,a),[a]),v.getSnapshot!==r||N||Te!==null&&Te.memoizedState.tag&1){if(d.flags|=2048,go(9,{destroy:void 0},s_.bind(null,d,v,h,r),null),le===null)throw Error(i(349));E||(Sn&127)!==0||i_(d,r,h)}return h}function i_(a,r,h){a.flags|=16384,a={getSnapshot:r,value:h},r=he.updateQueue,r===null?(r=vd(),he.updateQueue=r,r.stores=[a]):(h=r.stores,h===null?r.stores=[a]:h.push(a))}function s_(a,r,h,d){r.value=h,r.getSnapshot=d,r_(r)&&l_(a)}function a_(a,r,h){return h(function(){r_(r)&&l_(a)})}function r_(a){var r=a.getSnapshot;a=a.value;try{var h=r();return!gs(a,h)}catch{return!0}}function l_(a){var r=_s(a,2);r!==null&&ve(r,a,2)}function Ap(a){var r=fi();if(typeof a=="function"){var h=a;if(a=h(),su){Me(!0);try{h()}finally{Me(!1)}}}return r.memoizedState=r.baseState=a,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:a},r}function Ep(a,r,h,d){return a.baseState=h,yp(a,en,typeof d=="function"?d:bl)}function yv(a,r,h,d,v){if(bd(a))throw Error(i(485));if(a=r.action,a!==null){var E={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){E.listeners.push(N)}};$.T!==null?h(!0):E.isTransition=!1,d(E),h=r.pending,h===null?(E.next=r.pending=E,o_(r,E)):(E.next=h.next,r.pending=h.next=E)}}function o_(a,r){var h=r.action,d=r.payload,v=a.state;if(r.isTransition){var E=$.T,N={};$.T=N;try{var O=h(v,d),W=$.S;W!==null&&W(N,O),u_(a,r,O)}catch(ot){Sp(a,r,ot)}finally{E!==null&&N.types!==null&&(E.types=N.types),$.T=E}}else try{E=h(v,d),u_(a,r,E)}catch(ot){Sp(a,r,ot)}}function u_(a,r,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(d){c_(a,r,d)},function(d){return Sp(a,r,d)}):c_(a,r,h)}function c_(a,r,h){r.status="fulfilled",r.value=h,h_(r),a.state=h,r=a.pending,r!==null&&(h=r.next,h===r?a.pending=null:(h=h.next,r.next=h,o_(a,h)))}function Sp(a,r,h){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=h,h_(r),r=r.next;while(r!==d)}a.action=null}function h_(a){a=a.listeners;for(var r=0;r<a.length;r++)(0,a[r])()}function Tp(a,r){return r}function bp(a,r){if(xe){var h=le.formState;if(h!==null){t:{var d=he;if(xe){if(hn){e:{for(var v=hn,E=ea;v.nodeType!==8;){if(!E){v=null;break e}if(v=Wr(v.nextSibling),v===null){v=null;break e}}E=v.data,v=E==="F!"||E==="F"?v:null}if(v){hn=Wr(v.nextSibling),d=v.data==="F!";break t}}Vr(d)}d=!1}d&&(r=h[0])}}return h=fi(),h.memoizedState=h.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:r},h.queue=d,h=N_.bind(null,he,d),d.dispatch=h,d=Ap(!1),E=Op.bind(null,he,!1,d.queue),d=fi(),v={state:r,dispatch:null,action:a,pending:null},d.queue=v,h=yv.bind(null,he,v,E,h),v.dispatch=h,d.memoizedState=a,[r,h,!1]}function f_(a){var r=Kn();return Cp(r,en,a)}function Cp(a,r,h){if(r=yp(a,r,Tp)[0],a=Ad(bl)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=nf(r)}catch(N){throw N===Zo?_e:N}else d=r;r=Kn();var v=r.queue,E=v.dispatch;return h!==r.memoizedState&&(he.flags|=2048,go(9,{destroy:void 0},d_.bind(null,v,h),null)),[d,E,a]}function d_(a,r){a.action=r}function Rp(a){var r=Kn(),h=en;if(h!==null)return Cp(r,h,a);Kn(),r=r.memoizedState,h=Kn();var d=h.queue.dispatch;return h.memoizedState=a,[r,d,!1]}function go(a,r,h,d){return a={tag:a,create:h,deps:d,inst:r,next:null},r=he.updateQueue,r===null&&(r=vd(),he.updateQueue=r),h=r.lastEffect,h===null?r.lastEffect=a.next=a:(d=h.next,h.next=a,a.next=d,r.lastEffect=a),a}function Ed(){return Kn().memoizedState}function Sd(a,r,h,d){var v=fi();he.flags|=a,v.memoizedState=go(1|r,{destroy:void 0},h,d===void 0?null:d)}function Td(a,r,h,d){var v=Kn();d=d===void 0?null:d;var E=v.memoizedState.inst;en!==null&&d!==null&&dp(d,en.memoizedState.deps)?v.memoizedState=go(r,E,h,d):(he.flags|=a,v.memoizedState=go(1|r,E,h,d))}function m_(a,r){Sd(8390656,8,a,r)}function wp(a,r){Td(2048,8,a,r)}function p_(a){he.flags|=4;var r=he.updateQueue;if(r===null)r=vd(),he.updateQueue=r,r.events=[a];else{var h=r.events;h===null?r.events=[a]:h.push(a)}}function g_(a){var r=Kn().memoizedState;return p_({ref:r,nextImpl:a}),function(){if((Xt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function __(a,r){return Td(4,2,a,r)}function y_(a,r){return Td(4,4,a,r)}function v_(a,r){if(typeof r=="function"){a=a();var h=r(a);return function(){typeof h=="function"?h():r(null)}}if(r!=null)return a=a(),r.current=a,function(){r.current=null}}function A_(a,r,h){h=h!=null?h.concat([a]):null,Td(4,4,v_.bind(null,r,a),h)}function xp(){}function E_(a,r){var h=Kn();r=r===void 0?null:r;var d=h.memoizedState;return r!==null&&dp(r,d[1])?d[0]:(h.memoizedState=[a,r],a)}function S_(a,r){var h=Kn();r=r===void 0?null:r;var d=h.memoizedState;if(r!==null&&dp(r,d[1]))return d[0];if(d=a(),su){Me(!0);try{a()}finally{Me(!1)}}return h.memoizedState=[d,r],d}function Np(a,r,h){return h===void 0||(Sn&1073741824)!==0&&(pe&261930)===0?a.memoizedState=r:(a.memoizedState=h,a=Ee(),he.lanes|=a,Qr|=a,h)}function T_(a,r,h,d){return gs(h,r)?h:yc.current!==null?(a=Np(a,h,d),gs(a,r)||(ri=!0),a):(Sn&42)===0||(Sn&1073741824)!==0&&(pe&261930)===0?(ri=!0,a.memoizedState=h):(a=Ee(),he.lanes|=a,Qr|=a,r)}function b_(a,r,h,d,v){var E=Tt.p;Tt.p=E!==0&&8>E?E:8;var N=$.T,O={};$.T=O,Op(a,!1,r,h);try{var W=v(),ot=$.S;if(ot!==null&&ot(O,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var gt=rp(W,d);sf(a,r,gt,oa(a))}else sf(a,r,d,oa(a))}catch(St){sf(a,r,{then:function(){},status:"rejected",reason:St},oa())}finally{Tt.p=E,N!==null&&O.types!==null&&(N.types=O.types),$.T=N}}function vv(){}function Dp(a,r,h,d){if(a.tag!==5)throw Error(i(476));var v=C_(a).queue;b_(a,v,r,Et,h===null?vv:function(){return R_(a),h(d)})}function C_(a){var r=a.memoizedState;if(r!==null)return r;r={memoizedState:Et,baseState:Et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:Et},next:null};var h={};return r.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:h},next:null},a.memoizedState=r,a=a.alternate,a!==null&&(a.memoizedState=r),r}function R_(a){var r=C_(a);r.next===null&&(r=a.alternate.memoizedState),sf(a,r.next.queue,{},oa())}function Ip(){return se($p)}function w_(){return Kn().memoizedState}function x_(){return Kn().memoizedState}function Av(a){for(var r=a.return;r!==null;){switch(r.tag){case 24:case 3:var h=oa();a=Sl(h);var d=fo(r,a,h);d!==null&&(ve(d,r,h),mo(d,r,h)),r={cache:ip()},a.payload=r;return}r=r.return}}function Ev(a,r,h){var d=oa();h={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},bd(a)?D_(r,h):(h=ed(a,r,h,d),h!==null&&(ve(h,a,d),I_(h,r,d)))}function N_(a,r,h){var d=oa();sf(a,r,h,d)}function sf(a,r,h,d){var v={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(bd(a))D_(r,v);else{var E=a.alternate;if(a.lanes===0&&(E===null||E.lanes===0)&&(E=r.lastRenderedReducer,E!==null))try{var N=r.lastRenderedState,O=E(N,h);if(v.hasEagerState=!0,v.eagerState=O,gs(O,N))return Si(a,r,v,0),le===null&&Yh(),!1}catch{}if(h=ed(a,r,v,d),h!==null)return ve(h,a,d),I_(h,r,d),!0}return!1}function Op(a,r,h,d){if(d={lane:2,revertLane:ft(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},bd(a)){if(r)throw Error(i(479))}else r=ed(a,h,d,2),r!==null&&ve(r,a,2)}function bd(a){var r=a.alternate;return a===he||r!==null&&r===he}function D_(a,r){vc=Ra=!0;var h=a.pending;h===null?r.next=r:(r.next=h.next,h.next=r),a.pending=r}function I_(a,r,h){if((h&4194048)!==0){var d=r.lanes;d&=a.pendingLanes,h|=d,r.lanes=h,Xa(a,h)}}var Ec={readContext:se,use:po,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useLayoutEffect:Ln,useInsertionEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useSyncExternalStore:Ln,useId:Ln,useHostTransitionStatus:Ln,useFormState:Ln,useActionState:Ln,useOptimistic:Ln,useMemoCache:Ln,useCacheRefresh:Ln};Ec.useEffectEvent=Ln;var O_={readContext:se,use:po,useCallback:function(a,r){return fi().memoizedState=[a,r===void 0?null:r],a},useContext:se,useEffect:m_,useImperativeHandle:function(a,r,h){h=h!=null?h.concat([a]):null,Sd(4194308,4,v_.bind(null,r,a),h)},useLayoutEffect:function(a,r){return Sd(4194308,4,a,r)},useInsertionEffect:function(a,r){Sd(4,2,a,r)},useMemo:function(a,r){var h=fi();r=r===void 0?null:r;var d=a();if(su){Me(!0);try{a()}finally{Me(!1)}}return h.memoizedState=[d,r],d},useReducer:function(a,r,h){var d=fi();if(h!==void 0){var v=h(r);if(su){Me(!0);try{h(r)}finally{Me(!1)}}}else v=r;return d.memoizedState=d.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},d.queue=a,a=a.dispatch=Ev.bind(null,he,a),[d.memoizedState,a]},useRef:function(a){var r=fi();return a={current:a},r.memoizedState=a},useState:function(a){a=Ap(a);var r=a.queue,h=N_.bind(null,he,r);return r.dispatch=h,[a.memoizedState,h]},useDebugValue:xp,useDeferredValue:function(a,r){var h=fi();return Np(h,a,r)},useTransition:function(){var a=Ap(!1);return a=b_.bind(null,he,a.queue,!0,!1),fi().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,r,h){var d=he,v=fi();if(xe){if(h===void 0)throw Error(i(407));h=h()}else{if(h=r(),le===null)throw Error(i(349));(pe&127)!==0||i_(d,r,h)}v.memoizedState=h;var E={value:h,getSnapshot:r};return v.queue=E,m_(a_.bind(null,d,E,a),[a]),d.flags|=2048,go(9,{destroy:void 0},s_.bind(null,d,E,h,r),null),h},useId:function(){var a=fi(),r=le.identifierPrefix;if(xe){var h=ir,d=Mn;h=(d&~(1<<32-ni(d)-1)).toString(32)+h,r="_"+r+"R_"+h,h=_d++,0<h&&(r+="H"+h.toString(32)),r+="_"}else h=fp++,r="_"+r+"r_"+h.toString(32)+"_";return a.memoizedState=r},useHostTransitionStatus:Ip,useFormState:bp,useActionState:bp,useOptimistic:function(a){var r=fi();r.memoizedState=r.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=h,r=Op.bind(null,he,!0,h),h.dispatch=r,[a,r]},useMemoCache:_p,useCacheRefresh:function(){return fi().memoizedState=Av.bind(null,he)},useEffectEvent:function(a){var r=fi(),h={impl:a};return r.memoizedState=h,function(){if((Xt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},Mp={readContext:se,use:po,useCallback:E_,useContext:se,useEffect:wp,useImperativeHandle:A_,useInsertionEffect:__,useLayoutEffect:y_,useMemo:S_,useReducer:Ad,useRef:Ed,useState:function(){return Ad(bl)},useDebugValue:xp,useDeferredValue:function(a,r){var h=Kn();return T_(h,en.memoizedState,a,r)},useTransition:function(){var a=Ad(bl)[0],r=Kn().memoizedState;return[typeof a=="boolean"?a:nf(a),r]},useSyncExternalStore:n_,useId:w_,useHostTransitionStatus:Ip,useFormState:f_,useActionState:f_,useOptimistic:function(a,r){var h=Kn();return Ep(h,en,a,r)},useMemoCache:_p,useCacheRefresh:x_};Mp.useEffectEvent=g_;var wa={readContext:se,use:po,useCallback:E_,useContext:se,useEffect:wp,useImperativeHandle:A_,useInsertionEffect:__,useLayoutEffect:y_,useMemo:S_,useReducer:vp,useRef:Ed,useState:function(){return vp(bl)},useDebugValue:xp,useDeferredValue:function(a,r){var h=Kn();return en===null?Np(h,a,r):T_(h,en.memoizedState,a,r)},useTransition:function(){var a=vp(bl)[0],r=Kn().memoizedState;return[typeof a=="boolean"?a:nf(a),r]},useSyncExternalStore:n_,useId:w_,useHostTransitionStatus:Ip,useFormState:Rp,useActionState:Rp,useOptimistic:function(a,r){var h=Kn();return en!==null?Ep(h,en,a,r):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:_p,useCacheRefresh:x_};wa.useEffectEvent=g_;function Cd(a,r,h,d){r=a.memoizedState,h=h(d,r),h=h==null?r:S({},r,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var af={enqueueSetState:function(a,r,h){a=a._reactInternals;var d=oa(),v=Sl(d);v.payload=r,h!=null&&(v.callback=h),r=fo(a,v,d),r!==null&&(ve(r,a,d),mo(r,a,d))},enqueueReplaceState:function(a,r,h){a=a._reactInternals;var d=oa(),v=Sl(d);v.tag=1,v.payload=r,h!=null&&(v.callback=h),r=fo(a,v,d),r!==null&&(ve(r,a,d),mo(r,a,d))},enqueueForceUpdate:function(a,r){a=a._reactInternals;var h=oa(),d=Sl(h);d.tag=2,r!=null&&(d.callback=r),r=fo(a,d,h),r!==null&&(ve(r,a,h),mo(r,a,h))}};function Lp(a,r,h,d,v,E,N){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,E,N):r.prototype&&r.prototype.isPureReactComponent?!ic(h,d)||!ic(v,E):!0}function Vp(a,r,h,d){a=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(h,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(h,d),r.state!==a&&af.enqueueReplaceState(r,r.state,null)}function _o(a,r){var h=r;if("ref"in r){h={};for(var d in r)d!=="ref"&&(h[d]=r[d])}if(a=a.defaultProps){h===r&&(h=S({},h));for(var v in a)h[v]===void 0&&(h[v]=a[v])}return h}function M_(a){Fh(a)}function kp(a){console.error(a)}function Pp(a){Fh(a)}function Rd(a,r){try{var h=a.onUncaughtError;h(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function L_(a,r,h){try{var d=a.onCaughtError;d(h.value,{componentStack:h.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Up(a,r,h){return h=Sl(h),h.tag=3,h.payload={element:null},h.callback=function(){Rd(a,r)},h}function zp(a){return a=Sl(a),a.tag=3,a}function V_(a,r,h,d){var v=h.type.getDerivedStateFromError;if(typeof v=="function"){var E=d.value;a.payload=function(){return v(E)},a.callback=function(){L_(r,h,d)}}var N=h.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(a.callback=function(){L_(r,h,d),typeof v!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var O=d.stack;this.componentDidCatch(d.value,{componentStack:O!==null?O:""})})}function di(a,r,h,d,v){if(h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=h.alternate,r!==null&&zr(r,h,v,!0),h=Ms.current,h!==null){switch(h.tag){case 31:case 13:return vs===null?xc():h.alternate===null&&Vn===0&&(Vn=3),h.flags&=-257,h.flags|=65536,h.lanes=v,d===fd?h.flags|=16384:(r=h.updateQueue,r===null?h.updateQueue=new Set([d]):r.add(d),_f(a,d,v)),!1;case 22:return h.flags|=65536,d===fd?h.flags|=16384:(r=h.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},h.updateQueue=r):(h=r.retryQueue,h===null?r.retryQueue=new Set([d]):h.add(d)),_f(a,d,v)),!1}throw Error(i(435,h.tag))}return _f(a,d,v),xc(),!1}if(xe)return r=Ms.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,d!==hc&&(a=Error(i(422),{cause:d}),kr(ta(a,h)))):(d!==hc&&(r=Error(i(423),{cause:d}),kr(ta(r,h))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,d=ta(d,h),v=Up(a.stateNode,d,v),Jt(a,v),Vn!==4&&(Vn=2)),!1;var E=Error(i(520),{cause:d});if(E=ta(E,h),mu===null?mu=[E]:mu.push(E),Vn!==4&&(Vn=2),r===null)return!0;d=ta(d,h),h=r;do{switch(h.tag){case 3:return h.flags|=65536,a=v&-v,h.lanes|=a,a=Up(h.stateNode,d,a),Jt(h,a),!1;case 1:if(r=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Zn===null||!Zn.has(E))))return h.flags|=65536,v&=-v,h.lanes|=v,v=zp(v),V_(v,a,h,d),Jt(h,v),!1}h=h.return}while(h!==null);return!1}var wd=Error(i(461)),ri=!1;function Ti(a,r,h,d){r.child=a===null?pd(r,null,h,d):El(r,a.child,h,d)}function Bp(a,r,h,d,v){h=h.render;var E=r.ref;if("ref"in d){var N={};for(var O in d)O!=="ref"&&(N[O]=d[O])}else N=d;return co(r),d=yd(a,r,h,N,E,v),O=mp(),a!==null&&!ri?(pp(a,r,v),Wn(a,r,v)):(xe&&O&&Lr(r),r.flags|=1,Ti(a,r,d,v),r.child)}function lu(a,r,h,d,v){if(a===null){var E=h.type;return typeof E=="function"&&!nd(E)&&E.defaultProps===void 0&&h.compare===null?(r.tag=15,r.type=E,xd(a,r,E,d,v)):(a=Or(h.type,null,d,r,r.mode,v),a.ref=r.ref,a.return=r,r.child=a)}if(E=a.child,!Ld(a,v)){var N=E.memoizedProps;if(h=h.compare,h=h!==null?h:ic,h(N,d)&&a.ref===r.ref)return Wn(a,r,v)}return r.flags|=1,a=Ds(E,d),a.ref=r.ref,a.return=r,r.child=a}function xd(a,r,h,d,v){if(a!==null){var E=a.memoizedProps;if(ic(E,d)&&a.ref===r.ref)if(ri=!1,r.pendingProps=d=E,Ld(a,v))(a.flags&131072)!==0&&(ri=!0);else return r.lanes=a.lanes,Wn(a,r,v)}return Sc(a,r,h,d,v)}function ou(a,r,h,d){var v=d.children,E=a!==null?a.memoizedState:null;if(a===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(E=E!==null?E.baseLanes|h:h,a!==null){for(d=r.child=a.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~E}else d=0,r.child=null;return Vs(a,r,E,h,d)}if((h&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},a!==null&&Kh(r,E!==null?E.cachePool:null),E!==null?$0(r,E):cp(),t_(r);else return d=r.lanes=536870912,Vs(a,r,E!==null?E.baseLanes|h:h,h,d)}else E!==null?(Kh(r,E.cachePool),$0(r,E),Ls(),r.memoizedState=null):(a!==null&&Kh(r,null),cp(),Ls());return Ti(a,r,v,h),r.child}function jr(a,r){return a!==null&&a.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Vs(a,r,h,d,v){var E=hd();return E=E===null?null:{parent:ai._currentValue,pool:E},r.memoizedState={baseLanes:h,cachePool:E},a!==null&&Kh(r,null),cp(),t_(r),a!==null&&zr(a,r,d,!0),r.childLanes=v,null}function Nd(a,r){return r=Md({mode:r.mode,children:r.children},a.mode),r.ref=a.ref,a.child=r,r.return=a,r}function k_(a,r,h){return El(r,a.child,null,h),a=Nd(r,r.pendingProps),a.flags|=2,Xn(r),r.memoizedState=null,a}function Dd(a,r,h){var d=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,a===null){if(xe){if(d.mode==="hidden")return a=Nd(r,d),r.lanes=536870912,jr(null,a);if(hp(r),(a=hn)?(a=n4(a,ea),a=a!==null&&a.data==="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:_l!==null?{id:Mn,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},h=oc(a),h.return=r,r.child=h,Gn=r,hn=null)):a=null,a===null)throw Vr(r);return r.lanes=536870912,null}return Nd(r,d)}var E=a.memoizedState;if(E!==null){var N=E.dehydrated;if(hp(r),v)if(r.flags&256)r.flags&=-257,r=k_(a,r,h);else if(r.memoizedState!==null)r.child=a.child,r.flags|=128,r=null;else throw Error(i(558));else if(ri||zr(a,r,h,!1),v=(h&a.childLanes)!==0,ri||v){if(d=le,d!==null&&(N=al(d,h),N!==0&&N!==E.retryLane))throw E.retryLane=N,_s(a,N),ve(d,a,N),wd;xc(),r=k_(a,r,h)}else a=E.treeContext,hn=Wr(N.nextSibling),Gn=r,xe=!0,yl=null,ea=!1,a!==null&&rd(r,a),r=Nd(r,d),r.flags|=4096;return r}return a=Ds(a.child,{mode:d.mode,children:d.children}),a.ref=r.ref,r.child=a,a.return=r,a}function uu(a,r){var h=r.ref;if(h===null)a!==null&&a.ref!==null&&(r.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(a===null||a.ref!==h)&&(r.flags|=4194816)}}function Sc(a,r,h,d,v){return co(r),h=yd(a,r,h,d,void 0,v),d=mp(),a!==null&&!ri?(pp(a,r,v),Wn(a,r,v)):(xe&&d&&Lr(r),r.flags|=1,Ti(a,r,h,v),r.child)}function rf(a,r,h,d,v,E){return co(r),r.updateQueue=null,h=au(r,d,h,v),e_(a),d=mp(),a!==null&&!ri?(pp(a,r,E),Wn(a,r,E)):(xe&&d&&Lr(r),r.flags|=1,Ti(a,r,h,E),r.child)}function Id(a,r,h,d,v){if(co(r),r.stateNode===null){var E=so,N=h.contextType;typeof N=="object"&&N!==null&&(E=se(N)),E=new h(d,E),r.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=af,r.stateNode=E,E._reactInternals=r,E=r.stateNode,E.props=d,E.state=r.memoizedState,E.refs={},Zh(r),N=h.contextType,E.context=typeof N=="object"&&N!==null?se(N):so,E.state=r.memoizedState,N=h.getDerivedStateFromProps,typeof N=="function"&&(Cd(r,h,N,d),E.state=r.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(N=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),N!==E.state&&af.enqueueReplaceState(E,E.state,null),gc(r,d,E,v),$h(),E.state=r.memoizedState),typeof E.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(a===null){E=r.stateNode;var O=r.memoizedProps,W=_o(h,O);E.props=W;var ot=E.context,gt=h.contextType;N=so,typeof gt=="object"&&gt!==null&&(N=se(gt));var St=h.getDerivedStateFromProps;gt=typeof St=="function"||typeof E.getSnapshotBeforeUpdate=="function",O=r.pendingProps!==O,gt||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(O||ot!==N)&&Vp(r,E,d,N),ys=!1;var ct=r.memoizedState;E.state=ct,gc(r,d,E,v),$h(),ot=r.memoizedState,O||ct!==ot||ys?(typeof St=="function"&&(Cd(r,h,St,d),ot=r.memoizedState),(W=ys||Lp(r,h,W,d,ct,ot,N))?(gt||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(r.flags|=4194308)):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=ot),E.props=d,E.state=ot,E.context=N,d=W):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{E=r.stateNode,op(a,r),N=r.memoizedProps,gt=_o(h,N),E.props=gt,St=r.pendingProps,ct=E.context,ot=h.contextType,W=so,typeof ot=="object"&&ot!==null&&(W=se(ot)),O=h.getDerivedStateFromProps,(ot=typeof O=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(N!==St||ct!==W)&&Vp(r,E,d,W),ys=!1,ct=r.memoizedState,E.state=ct,gc(r,d,E,v),$h();var pt=r.memoizedState;N!==St||ct!==pt||ys||a!==null&&a.dependencies!==null&&Xh(a.dependencies)?(typeof O=="function"&&(Cd(r,h,O,d),pt=r.memoizedState),(gt=ys||Lp(r,h,gt,d,ct,pt,W)||a!==null&&a.dependencies!==null&&Xh(a.dependencies))?(ot||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,pt,W),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,pt,W)),typeof E.componentDidUpdate=="function"&&(r.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof E.componentDidUpdate!="function"||N===a.memoizedProps&&ct===a.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&ct===a.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=pt),E.props=d,E.state=pt,E.context=W,d=gt):(typeof E.componentDidUpdate!="function"||N===a.memoizedProps&&ct===a.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&ct===a.memoizedState||(r.flags|=1024),d=!1)}return E=d,uu(a,r),d=(r.flags&128)!==0,E||d?(E=r.stateNode,h=d&&typeof h.getDerivedStateFromError!="function"?null:E.render(),r.flags|=1,a!==null&&d?(r.child=El(r,a.child,null,v),r.child=El(r,null,h,v)):Ti(a,r,h,v),r.memoizedState=E.state,a=r.child):a=Wn(a,r,v),a}function P_(a,r,h,d){return oo(),r.flags|=256,Ti(a,r,h,d),r.child}var jp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ki(a){return{baseLanes:a,cachePool:lp()}}function Od(a,r,h){return a=a!==null?a.childLanes&~h:0,r&&(a|=Ts),a}function U_(a,r,h){var d=r.pendingProps,v=!1,E=(r.flags&128)!==0,N;if((N=E)||(N=a!==null&&a.memoizedState===null?!1:(Ne.current&2)!==0),N&&(v=!0,r.flags&=-129),N=(r.flags&32)!==0,r.flags&=-33,a===null){if(xe){if(v?Tl(r):Ls(),(a=hn)?(a=n4(a,ea),a=a!==null&&a.data!=="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:_l!==null?{id:Mn,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},h=oc(a),h.return=r,r.child=h,Gn=r,hn=null)):a=null,a===null)throw Vr(r);return Vv(a)?r.lanes=32:r.lanes=536870912,null}var O=d.children;return d=d.fallback,v?(Ls(),v=r.mode,O=Md({mode:"hidden",children:O},v),d=ao(d,v,h,null),O.return=r,d.return=r,O.sibling=d,r.child=O,d=r.child,d.memoizedState=Ki(h),d.childLanes=Od(a,N,h),r.memoizedState=jp,jr(null,d)):(Tl(r),lf(r,O))}var W=a.memoizedState;if(W!==null&&(O=W.dehydrated,O!==null)){if(E)r.flags&256?(Tl(r),r.flags&=-257,r=Gp(a,r,h)):r.memoizedState!==null?(Ls(),r.child=a.child,r.flags|=128,r=null):(Ls(),O=d.fallback,v=r.mode,d=Md({mode:"visible",children:d.children},v),O=ao(O,v,h,null),O.flags|=2,d.return=r,O.return=r,d.sibling=O,r.child=d,El(r,a.child,null,h),d=r.child,d.memoizedState=Ki(h),d.childLanes=Od(a,N,h),r.memoizedState=jp,r=jr(null,d));else if(Tl(r),Vv(O)){if(N=O.nextSibling&&O.nextSibling.dataset,N)var ot=N.dgst;N=ot,d=Error(i(419)),d.stack="",d.digest=N,kr({value:d,source:null,stack:null}),r=Gp(a,r,h)}else if(ri||zr(a,r,h,!1),N=(h&a.childLanes)!==0,ri||N){if(N=le,N!==null&&(d=al(N,h),d!==0&&d!==W.retryLane))throw W.retryLane=d,_s(a,d),ve(N,a,d),wd;Lv(O)||xc(),r=Gp(a,r,h)}else Lv(O)?(r.flags|=192,r.child=a.child,r=null):(a=W.treeContext,hn=Wr(O.nextSibling),Gn=r,xe=!0,yl=null,ea=!1,a!==null&&rd(r,a),r=lf(r,d.children),r.flags|=4096);return r}return v?(Ls(),O=d.fallback,v=r.mode,W=a.child,ot=W.sibling,d=Ds(W,{mode:"hidden",children:d.children}),d.subtreeFlags=W.subtreeFlags&65011712,ot!==null?O=Ds(ot,O):(O=ao(O,v,h,null),O.flags|=2),O.return=r,d.return=r,d.sibling=O,r.child=d,jr(null,d),d=r.child,O=a.child.memoizedState,O===null?O=Ki(h):(v=O.cachePool,v!==null?(W=ai._currentValue,v=v.parent!==W?{parent:W,pool:W}:v):v=lp(),O={baseLanes:O.baseLanes|h,cachePool:v}),d.memoizedState=O,d.childLanes=Od(a,N,h),r.memoizedState=jp,jr(a.child,d)):(Tl(r),h=a.child,a=h.sibling,h=Ds(h,{mode:"visible",children:d.children}),h.return=r,h.sibling=null,a!==null&&(N=r.deletions,N===null?(r.deletions=[a],r.flags|=16):N.push(a)),r.child=h,r.memoizedState=null,h)}function lf(a,r){return r=Md({mode:"visible",children:r},a.mode),r.return=a,a.child=r}function Md(a,r){return a=On(22,a,null,r),a.lanes=0,a}function Gp(a,r,h){return El(r,a.child,null,h),a=lf(r,r.pendingProps.children),a.flags|=2,r.memoizedState=null,a}function z_(a,r,h){a.lanes|=r;var d=a.alternate;d!==null&&(d.lanes|=r),od(a.return,r,h)}function cu(a,r,h,d,v,E){var N=a.memoizedState;N===null?a.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:v,treeForkCount:E}:(N.isBackwards=r,N.rendering=null,N.renderingStartTime=0,N.last=d,N.tail=h,N.tailMode=v,N.treeForkCount=E)}function ks(a,r,h){var d=r.pendingProps,v=d.revealOrder,E=d.tail;d=d.children;var N=Ne.current,O=(N&2)!==0;if(O?(N=N&1|2,r.flags|=128):N&=1,_t(Ne,N),Ti(a,r,d,h),d=xe?cc:0,!O&&a!==null&&(a.flags&128)!==0)t:for(a=r.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&z_(a,h,r);else if(a.tag===19)z_(a,h,r);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break t;for(;a.sibling===null;){if(a.return===null||a.return===r)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(h=r.child,v=null;h!==null;)a=h.alternate,a!==null&&ia(a)===null&&(v=h),h=h.sibling;h=v,h===null?(v=r.child,r.child=null):(v=h.sibling,h.sibling=null),cu(r,!1,v,h,E,d);break;case"backwards":case"unstable_legacy-backwards":for(h=null,v=r.child,r.child=null;v!==null;){if(a=v.alternate,a!==null&&ia(a)===null){r.child=v;break}a=v.sibling,v.sibling=h,h=v,v=a}cu(r,!0,h,null,E,d);break;case"together":cu(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function Wn(a,r,h){if(a!==null&&(r.dependencies=a.dependencies),Qr|=r.lanes,(h&r.childLanes)===0)if(a!==null){if(zr(a,r,h,!1),(h&r.childLanes)===0)return null}else return null;if(a!==null&&r.child!==a.child)throw Error(i(153));if(r.child!==null){for(a=r.child,h=Ds(a,a.pendingProps),r.child=h,h.return=r;a.sibling!==null;)a=a.sibling,h=h.sibling=Ds(a,a.pendingProps),h.return=r;h.sibling=null}return r.child}function Ld(a,r){return(a.lanes&r)!==0?!0:(a=a.dependencies,!!(a!==null&&Xh(a)))}function Sv(a,r,h){switch(r.tag){case 3:Ge(r,r.stateNode.containerInfo),vl(r,ai,a.memoizedState.cache),oo();break;case 27:case 5:as(r);break;case 4:Ge(r,r.stateNode.containerInfo);break;case 10:vl(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,hp(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Tl(r),r.flags|=128,null):(h&r.child.childLanes)!==0?U_(a,r,h):(Tl(r),a=Wn(a,r,h),a!==null?a.sibling:null);Tl(r);break;case 19:var v=(a.flags&128)!==0;if(d=(h&r.childLanes)!==0,d||(zr(a,r,h,!1),d=(h&r.childLanes)!==0),v){if(d)return ks(a,r,h);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),_t(Ne,Ne.current),d)break;return null;case 22:return r.lanes=0,ou(a,r,h,r.pendingProps);case 24:vl(r,ai,a.memoizedState.cache)}return Wn(a,r,h)}function Vd(a,r,h){if(a!==null)if(a.memoizedProps!==r.pendingProps)ri=!0;else{if(!Ld(a,h)&&(r.flags&128)===0)return ri=!1,Sv(a,r,h);ri=(a.flags&131072)!==0}else ri=!1,xe&&(r.flags&1048576)!==0&&Y0(r,cc,r.index);switch(r.lanes=0,r.tag){case 16:t:{var d=r.pendingProps;if(a=$o(r.elementType),r.type=a,typeof a=="function")nd(a)?(d=_o(a,d),r.tag=1,r=Id(null,r,a,d,h)):(r.tag=0,r=Sc(null,r,a,d,h));else{if(a!=null){var v=a.$$typeof;if(v===et){r.tag=11,r=Bp(null,r,a,d,h);break t}else if(v===z){r.tag=14,r=lu(null,r,a,d,h);break t}}throw r=Ft(a)||a,Error(i(306,r,""))}}return r;case 0:return Sc(a,r,r.type,r.pendingProps,h);case 1:return d=r.type,v=_o(d,r.pendingProps),Id(a,r,d,v,h);case 3:t:{if(Ge(r,r.stateNode.containerInfo),a===null)throw Error(i(387));d=r.pendingProps;var E=r.memoizedState;v=E.element,op(a,r),gc(r,d,null,h);var N=r.memoizedState;if(d=N.cache,vl(r,ai,d),d!==E.cache&&ud(r,[ai],h,!0),$h(),d=N.element,E.isDehydrated)if(E={element:d,isDehydrated:!1,cache:N.cache},r.updateQueue.baseState=E,r.memoizedState=E,r.flags&256){r=P_(a,r,d,h);break t}else if(d!==v){v=ta(Error(i(424)),r),kr(v),r=P_(a,r,d,h);break t}else for(a=r.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,hn=Wr(a.firstChild),Gn=r,xe=!0,yl=null,ea=!0,h=pd(r,null,d,h),r.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(oo(),d===v){r=Wn(a,r,h);break t}Ti(a,r,d,h)}r=r.child}return r;case 26:return uu(a,r),a===null?(h=o4(r.type,null,r.pendingProps,null))?r.memoizedState=h:xe||(h=r.type,a=r.pendingProps,d=H_(te.current).createElement(h),d[pn]=r,d[ui]=a,Cs(d,h,a),In(d),r.stateNode=d):r.memoizedState=o4(r.type,a.memoizedProps,r.pendingProps,a.memoizedState),null;case 27:return as(r),a===null&&xe&&(d=r.stateNode=a4(r.type,r.pendingProps,te.current),Gn=r,ea=!0,v=hn,Oc(r.type)?(kv=v,hn=Wr(d.firstChild)):hn=v),Ti(a,r,r.pendingProps.children,h),uu(a,r),a===null&&(r.flags|=4194304),r.child;case 5:return a===null&&xe&&((v=d=hn)&&(d=nR(d,r.type,r.pendingProps,ea),d!==null?(r.stateNode=d,Gn=r,hn=Wr(d.firstChild),ea=!1,v=!0):v=!1),v||Vr(r)),as(r),v=r.type,E=r.pendingProps,N=a!==null?a.memoizedProps:null,d=E.children,Iv(v,E)?d=null:N!==null&&Iv(v,N)&&(r.flags|=32),r.memoizedState!==null&&(v=yd(a,r,ru,null,null,h),$p._currentValue=v),uu(a,r),Ti(a,r,d,h),r.child;case 6:return a===null&&xe&&((a=h=hn)&&(h=iR(h,r.pendingProps,ea),h!==null?(r.stateNode=h,Gn=r,hn=null,a=!0):a=!1),a||Vr(r)),null;case 13:return U_(a,r,h);case 4:return Ge(r,r.stateNode.containerInfo),d=r.pendingProps,a===null?r.child=El(r,null,d,h):Ti(a,r,d,h),r.child;case 11:return Bp(a,r,r.type,r.pendingProps,h);case 7:return Ti(a,r,r.pendingProps,h),r.child;case 8:return Ti(a,r,r.pendingProps.children,h),r.child;case 12:return Ti(a,r,r.pendingProps.children,h),r.child;case 10:return d=r.pendingProps,vl(r,r.type,d.value),Ti(a,r,d.children,h),r.child;case 9:return v=r.type._context,d=r.pendingProps.children,co(r),v=se(v),d=d(v),r.flags|=1,Ti(a,r,d,h),r.child;case 14:return lu(a,r,r.type,r.pendingProps,h);case 15:return xd(a,r,r.type,r.pendingProps,h);case 19:return ks(a,r,h);case 31:return Dd(a,r,h);case 22:return ou(a,r,h,r.pendingProps);case 24:return co(r),d=se(ai),a===null?(v=hd(),v===null&&(v=le,E=ip(),v.pooledCache=E,E.refCount++,E!==null&&(v.pooledCacheLanes|=h),v=E),r.memoizedState={parent:d,cache:v},Zh(r),vl(r,ai,v)):((a.lanes&h)!==0&&(op(a,r),gc(r,null,null,h),$h()),v=a.memoizedState,E=r.memoizedState,v.parent!==d?(v={parent:d,cache:d},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),vl(r,ai,d)):(d=E.cache,vl(r,ai,d),d!==v.cache&&ud(r,[ai],h,!0))),Ti(a,r,r.pendingProps.children,h),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Gr(a){a.flags|=4}function of(a,r,h,d,v){if((r=(a.mode&32)!==0)&&(r=!1),r){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(Pn())a.flags|=8192;else throw Br=fd,Wh}else a.flags&=-16777217}function Hp(a,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!d4(r))if(Pn())a.flags|=8192;else throw Br=fd,Wh}function Cl(a,r){r!==null&&(a.flags|=4),a.flags&16384&&(r=a.tag!==22?Qa():536870912,a.lanes|=r,_n|=r)}function Hr(a,r){if(!xe)switch(a.tailMode){case"hidden":r=a.tail;for(var h=null;r!==null;)r.alternate!==null&&(h=r),r=r.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?r||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function nn(a){var r=a.alternate!==null&&a.alternate.child===a.child,h=0,d=0;if(r)for(var v=a.child;v!==null;)h|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)h|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=d,a.childLanes=h,r}function uf(a,r,h){var d=r.pendingProps;switch(ad(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(r),null;case 1:return nn(r),null;case 3:return h=r.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Ur(ai),Oe(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(fc(r)?Gr(r):a===null||a.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ld())),nn(r),null;case 26:var v=r.type,E=r.memoizedState;return a===null?(Gr(r),E!==null?(nn(r),Hp(r,E)):(nn(r),of(r,v,null,d,h))):E?E!==a.memoizedState?(Gr(r),nn(r),Hp(r,E)):(nn(r),r.flags&=-16777217):(a=a.memoizedProps,a!==d&&Gr(r),nn(r),of(r,v,a,d,h)),null;case 27:if(ua(r),h=te.current,v=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&Gr(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return nn(r),null}a=jt.current,fc(r)?Q0(r):(a=a4(v,d,h),r.stateNode=a,Gr(r))}return nn(r),null;case 5:if(ua(r),v=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&Gr(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return nn(r),null}if(E=jt.current,fc(r))Q0(r);else{var N=H_(te.current);switch(E){case 1:E=N.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:E=N.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":E=N.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":E=N.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":E=N.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof d.is=="string"?N.createElement("select",{is:d.is}):N.createElement("select"),d.multiple?E.multiple=!0:d.size&&(E.size=d.size);break;default:E=typeof d.is=="string"?N.createElement(v,{is:d.is}):N.createElement(v)}}E[pn]=r,E[ui]=d;t:for(N=r.child;N!==null;){if(N.tag===5||N.tag===6)E.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===r)break t;for(;N.sibling===null;){if(N.return===null||N.return===r)break t;N=N.return}N.sibling.return=N.return,N=N.sibling}r.stateNode=E;t:switch(Cs(E,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&Gr(r)}}return nn(r),of(r,r.type,a===null?null:a.memoizedProps,r.pendingProps,h),null;case 6:if(a&&r.stateNode!=null)a.memoizedProps!==d&&Gr(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(i(166));if(a=te.current,fc(r)){if(a=r.stateNode,h=r.memoizedProps,d=null,v=Gn,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}a[pn]=r,a=!!(a.nodeValue===h||d!==null&&d.suppressHydrationWarning===!0||XS(a.nodeValue,h)),a||Vr(r,!0)}else a=H_(a).createTextNode(d),a[pn]=r,r.stateNode=a}return nn(r),null;case 31:if(h=r.memoizedState,a===null||a.memoizedState!==null){if(d=fc(r),h!==null){if(a===null){if(!d)throw Error(i(318));if(a=r.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(557));a[pn]=r}else oo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;nn(r),a=!1}else h=ld(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=h),a=!0;if(!a)return r.flags&256?(Xn(r),r):(Xn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return nn(r),null;case 13:if(d=r.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=fc(r),d!==null&&d.dehydrated!==null){if(a===null){if(!v)throw Error(i(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[pn]=r}else oo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;nn(r),v=!1}else v=ld(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(Xn(r),r):(Xn(r),null)}return Xn(r),(r.flags&128)!==0?(r.lanes=h,r):(h=d!==null,a=a!==null&&a.memoizedState!==null,h&&(d=r.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),E=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),E!==v&&(d.flags|=2048)),h!==a&&h&&(r.child.flags|=8192),Cl(r,r.updateQueue),nn(r),null);case 4:return Oe(),a===null&&Rv(r.stateNode.containerInfo),nn(r),null;case 10:return Ur(r.type),nn(r),null;case 19:if(ht(Ne),d=r.memoizedState,d===null)return nn(r),null;if(v=(r.flags&128)!==0,E=d.rendering,E===null)if(v)Hr(d,!1);else{if(Vn!==0||a!==null&&(a.flags&128)!==0)for(a=r.child;a!==null;){if(E=ia(a),E!==null){for(r.flags|=128,Hr(d,!1),a=E.updateQueue,r.updateQueue=a,Cl(r,a),r.subtreeFlags=0,a=h,h=r.child;h!==null;)lc(h,a),h=h.sibling;return _t(Ne,Ne.current&1|2),xe&&Mr(r,d.treeForkCount),r.child}a=a.sibling}d.tail!==null&&jn()>Jn&&(r.flags|=128,v=!0,Hr(d,!1),r.lanes=4194304)}else{if(!v)if(a=ia(E),a!==null){if(r.flags|=128,v=!0,a=a.updateQueue,r.updateQueue=a,Cl(r,a),Hr(d,!0),d.tail===null&&d.tailMode==="hidden"&&!E.alternate&&!xe)return nn(r),null}else 2*jn()-d.renderingStartTime>Jn&&h!==536870912&&(r.flags|=128,v=!0,Hr(d,!1),r.lanes=4194304);d.isBackwards?(E.sibling=r.child,r.child=E):(a=d.last,a!==null?a.sibling=E:r.child=E,d.last=E)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=jn(),a.sibling=null,h=Ne.current,_t(Ne,v?h&1|2:h&1),xe&&Mr(r,d.treeForkCount),a):(nn(r),null);case 22:case 23:return Xn(r),tf(),d=r.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(h&536870912)!==0&&(r.flags&128)===0&&(nn(r),r.subtreeFlags&6&&(r.flags|=8192)):nn(r),h=r.updateQueue,h!==null&&Cl(r,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==h&&(r.flags|=2048),a!==null&&ht(ho),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),Ur(ai),nn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function xa(a,r){switch(ad(r),r.tag){case 1:return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 3:return Ur(ai),Oe(),a=r.flags,(a&65536)!==0&&(a&128)===0?(r.flags=a&-65537|128,r):null;case 26:case 27:case 5:return ua(r),null;case 31:if(r.memoizedState!==null){if(Xn(r),r.alternate===null)throw Error(i(340));oo()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 13:if(Xn(r),a=r.memoizedState,a!==null&&a.dehydrated!==null){if(r.alternate===null)throw Error(i(340));oo()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 19:return ht(Ne),null;case 4:return Oe(),null;case 10:return Ur(r.type),null;case 22:case 23:return Xn(r),tf(),a!==null&&ht(ho),a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 24:return Ur(ai),null;case 25:return null;default:return null}}function sa(a,r){switch(ad(r),r.tag){case 3:Ur(ai),Oe();break;case 26:case 27:case 5:ua(r);break;case 4:Oe();break;case 31:r.memoizedState!==null&&Xn(r);break;case 13:Xn(r);break;case 19:ht(Ne);break;case 10:Ur(r.type);break;case 22:case 23:Xn(r),tf(),a!==null&&ht(ho);break;case 24:Ur(ai)}}function Na(a,r){try{var h=r.updateQueue,d=h!==null?h.lastEffect:null;if(d!==null){var v=d.next;h=v;do{if((h.tag&a)===a){d=void 0;var E=h.create,N=h.inst;d=E(),N.destroy=d}h=h.next}while(h!==v)}}catch(O){He(r,r.return,O)}}function Ui(a,r,h){try{var d=r.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var E=v.next;d=E;do{if((d.tag&a)===a){var N=d.inst,O=N.destroy;if(O!==void 0){N.destroy=void 0,v=r;var W=h,ot=O;try{ot()}catch(gt){He(v,W,gt)}}}d=d.next}while(d!==E)}}catch(gt){He(r,r.return,gt)}}function sr(a){var r=a.updateQueue;if(r!==null){var h=a.stateNode;try{Z0(r,h)}catch(d){He(a,a.return,d)}}}function bi(a,r,h){h.props=_o(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(d){He(a,r,d)}}function Rl(a,r){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof h=="function"?a.refCleanup=h(d):h.current=d}}catch(v){He(a,r,v)}}function zi(a,r){var h=a.ref,d=a.refCleanup;if(h!==null)if(typeof d=="function")try{d()}catch(v){He(a,r,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(v){He(a,r,v)}else h.current=null}function cf(a){var r=a.type,h=a.memoizedProps,d=a.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":h.autoFocus&&d.focus();break t;case"img":h.src?d.src=h.src:h.srcSet&&(d.srcset=h.srcSet)}}catch(v){He(a,a.return,v)}}function mi(a,r,h){try{var d=a.stateNode;W8(d,a.type,h,r),d[ui]=r}catch(v){He(a,a.return,v)}}function Tn(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Oc(a.type)||a.tag===4}function be(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||Tn(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Oc(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function qr(a,r,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,r):(r=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,r.appendChild(a),h=h._reactRootContainer,h!=null||r.onclick!==null||(r.onclick=vi));else if(d!==4&&(d===27&&Oc(a.type)&&(h=a.stateNode,r=null),a=a.child,a!==null))for(qr(a,r,h),a=a.sibling;a!==null;)qr(a,r,h),a=a.sibling}function As(a,r,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?h.insertBefore(a,r):h.appendChild(a);else if(d!==4&&(d===27&&Oc(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(As(a,r,h),a=a.sibling;a!==null;)As(a,r,h),a=a.sibling}function kd(a){var r=a.stateNode,h=a.memoizedProps;try{for(var d=a.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);Cs(r,d,h),r[pn]=a,r[ui]=h}catch(E){He(a,a.return,E)}}var Da=!1,fn=!1,ar=!1,B_=typeof WeakSet=="function"?WeakSet:Set,Ci=null;function Tv(a,r){if(a=a.containerInfo,Nv=W_,a=G0(a),Zm(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else t:{h=(h=a.ownerDocument)&&h.defaultView||window;var d=h.getSelection&&h.getSelection();if(d&&d.rangeCount!==0){h=d.anchorNode;var v=d.anchorOffset,E=d.focusNode;d=d.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break t}var N=0,O=-1,W=-1,ot=0,gt=0,St=a,ct=null;e:for(;;){for(var pt;St!==h||v!==0&&St.nodeType!==3||(O=N+v),St!==E||d!==0&&St.nodeType!==3||(W=N+d),St.nodeType===3&&(N+=St.nodeValue.length),(pt=St.firstChild)!==null;)ct=St,St=pt;for(;;){if(St===a)break e;if(ct===h&&++ot===v&&(O=N),ct===E&&++gt===d&&(W=N),(pt=St.nextSibling)!==null)break;St=ct,ct=St.parentNode}St=pt}h=O===-1||W===-1?null:{start:O,end:W}}else h=null}h=h||{start:0,end:0}}else h=null;for(Dv={focusedElem:a,selectionRange:h},W_=!1,Ci=r;Ci!==null;)if(r=Ci,a=r.child,(r.subtreeFlags&1028)!==0&&a!==null)a.return=r,Ci=a;else for(;Ci!==null;){switch(r=Ci,E=r.alternate,a=r.flags,r.tag){case 0:if((a&4)!==0&&(a=r.updateQueue,a=a!==null?a.events:null,a!==null))for(h=0;h<a.length;h++)v=a[h],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&E!==null){a=void 0,h=r,v=E.memoizedProps,E=E.memoizedState,d=h.stateNode;try{var Ht=_o(h.type,v);a=d.getSnapshotBeforeUpdate(Ht,E),d.__reactInternalSnapshotBeforeUpdate=a}catch(ie){He(h,h.return,ie)}}break;case 3:if((a&1024)!==0){if(a=r.stateNode.containerInfo,h=a.nodeType,h===9)Mv(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Mv(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=r.sibling,a!==null){a.return=r.return,Ci=a;break}Ci=r.return}}function bn(a,r,h){var d=h.flags;switch(h.tag){case 0:case 11:case 15:Ma(a,h),d&4&&Na(5,h);break;case 1:if(Ma(a,h),d&4)if(a=h.stateNode,r===null)try{a.componentDidMount()}catch(N){He(h,h.return,N)}else{var v=_o(h.type,r.memoizedProps);r=r.memoizedState;try{a.componentDidUpdate(v,r,a.__reactInternalSnapshotBeforeUpdate)}catch(N){He(h,h.return,N)}}d&64&&sr(h),d&512&&Rl(h,h.return);break;case 3:if(Ma(a,h),d&64&&(a=h.updateQueue,a!==null)){if(r=null,h.child!==null)switch(h.child.tag){case 27:case 5:r=h.child.stateNode;break;case 1:r=h.child.stateNode}try{Z0(a,r)}catch(N){He(h,h.return,N)}}break;case 27:r===null&&d&4&&kd(h);case 26:case 5:Ma(a,h),r===null&&d&4&&cf(h),d&512&&Rl(h,h.return);break;case 12:Ma(a,h);break;case 31:Ma(a,h),d&4&&yo(a,h);break;case 13:Ma(a,h),d&4&&Tc(a,h),d&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=p.bind(null,h),sR(a,h))));break;case 22:if(d=h.memoizedState!==null||Da,!d){r=r!==null&&r.memoizedState!==null||fn,v=Da;var E=fn;Da=d,(fn=r)&&!E?Es(a,h,(h.subtreeFlags&8772)!==0):Ma(a,h),Da=v,fn=E}break;case 30:break;default:Ma(a,h)}}function hf(a){var r=a.alternate;r!==null&&(a.alternate=null,hf(r)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(r=a.stateNode,r!==null&&Ja(r)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var We=null,Wi=!1;function Ia(a,r,h){for(h=h.child;h!==null;)Pd(a,r,h),h=h.sibling}function Pd(a,r,h){if(ne&&typeof ne.onCommitFiberUnmount=="function")try{ne.onCommitFiberUnmount(Kt,h)}catch{}switch(h.tag){case 26:fn||zi(h,r),Ia(a,r,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:fn||zi(h,r);var d=We,v=Wi;Oc(h.type)&&(We=h.stateNode,Wi=!1),Ia(a,r,h),Wp(h.stateNode),We=d,Wi=v;break;case 5:fn||zi(h,r);case 6:if(d=We,v=Wi,We=null,Ia(a,r,h),We=d,Wi=v,We!==null)if(Wi)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(h.stateNode)}catch(E){He(h,r,E)}else try{We.removeChild(h.stateNode)}catch(E){He(h,r,E)}break;case 18:We!==null&&(Wi?(a=We,t4(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),Fd(a)):t4(We,h.stateNode));break;case 4:d=We,v=Wi,We=h.stateNode.containerInfo,Wi=!0,Ia(a,r,h),We=d,Wi=v;break;case 0:case 11:case 14:case 15:Ui(2,h,r),fn||Ui(4,h,r),Ia(a,r,h);break;case 1:fn||(zi(h,r),d=h.stateNode,typeof d.componentWillUnmount=="function"&&bi(h,r,d)),Ia(a,r,h);break;case 21:Ia(a,r,h);break;case 22:fn=(d=fn)||h.memoizedState!==null,Ia(a,r,h),fn=d;break;default:Ia(a,r,h)}}function yo(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Fd(a)}catch(h){He(r,r.return,h)}}}function Tc(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Fd(a)}catch(h){He(r,r.return,h)}}function qp(a){switch(a.tag){case 31:case 13:case 19:var r=a.stateNode;return r===null&&(r=a.stateNode=new B_),r;case 22:return a=a.stateNode,r=a._retryCache,r===null&&(r=a._retryCache=new B_),r;default:throw Error(i(435,a.tag))}}function wl(a,r){var h=qp(a);r.forEach(function(d){if(!h.has(d)){h.add(d);var v=y.bind(null,a,d);d.then(v,v)}})}function pi(a,r){var h=r.deletions;if(h!==null)for(var d=0;d<h.length;d++){var v=h[d],E=a,N=r,O=N;t:for(;O!==null;){switch(O.tag){case 27:if(Oc(O.type)){We=O.stateNode,Wi=!1;break t}break;case 5:We=O.stateNode,Wi=!1;break t;case 3:case 4:We=O.stateNode.containerInfo,Wi=!0;break t}O=O.return}if(We===null)throw Error(i(160));Pd(E,N,v),We=null,Wi=!1,E=v.alternate,E!==null&&(E.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)vo(r,a),r=r.sibling}var Oa=null;function vo(a,r){var h=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:pi(r,a),gi(a),d&4&&(Ui(3,a,a.return),Na(3,a),Ui(5,a,a.return));break;case 1:pi(r,a),gi(a),d&512&&(fn||h===null||zi(h,h.return)),d&64&&Da&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?d:h.concat(d))));break;case 26:var v=Oa;if(pi(r,a),gi(a),d&512&&(fn||h===null||zi(h,h.return)),d&4){var E=h!==null?h.memoizedState:null;if(d=a.memoizedState,h===null)if(d===null)if(a.stateNode===null){t:{d=a.type,h=a.memoizedProps,v=v.ownerDocument||v;e:switch(d){case"title":E=v.getElementsByTagName("title")[0],(!E||E[Xs]||E[pn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=v.createElement(d),v.head.insertBefore(E,v.querySelector("head > title"))),Cs(E,d,h),E[pn]=a,In(E),d=E;break t;case"link":var N=h4("link","href",v).get(d+(h.href||""));if(N){for(var O=0;O<N.length;O++)if(E=N[O],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){N.splice(O,1);break e}}E=v.createElement(d),Cs(E,d,h),v.head.appendChild(E);break;case"meta":if(N=h4("meta","content",v).get(d+(h.content||""))){for(O=0;O<N.length;O++)if(E=N[O],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){N.splice(O,1);break e}}E=v.createElement(d),Cs(E,d,h),v.head.appendChild(E);break;default:throw Error(i(468,d))}E[pn]=a,In(E),d=E}a.stateNode=d}else f4(v,a.type,a.stateNode);else a.stateNode=c4(v,d,a.memoizedProps);else E!==d?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,d===null?f4(v,a.type,a.stateNode):c4(v,d,a.memoizedProps)):d===null&&a.stateNode!==null&&mi(a,a.memoizedProps,h.memoizedProps)}break;case 27:pi(r,a),gi(a),d&512&&(fn||h===null||zi(h,h.return)),h!==null&&d&4&&mi(a,a.memoizedProps,h.memoizedProps);break;case 5:if(pi(r,a),gi(a),d&512&&(fn||h===null||zi(h,h.return)),a.flags&32){v=a.stateNode;try{Zs(v,"")}catch(Ht){He(a,a.return,Ht)}}d&4&&a.stateNode!=null&&(v=a.memoizedProps,mi(a,v,h!==null?h.memoizedProps:v)),d&1024&&(ar=!0);break;case 6:if(pi(r,a),gi(a),d&4){if(a.stateNode===null)throw Error(i(162));d=a.memoizedProps,h=a.stateNode;try{h.nodeValue=d}catch(Ht){He(a,a.return,Ht)}}break;case 3:if(Y_=null,v=Oa,Oa=q_(r.containerInfo),pi(r,a),Oa=v,gi(a),d&4&&h!==null&&h.memoizedState.isDehydrated)try{Fd(r.containerInfo)}catch(Ht){He(a,a.return,Ht)}ar&&(ar=!1,Ud(a));break;case 4:d=Oa,Oa=q_(a.stateNode.containerInfo),pi(r,a),gi(a),Oa=d;break;case 12:pi(r,a),gi(a);break;case 31:pi(r,a),gi(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,wl(a,d)));break;case 13:pi(r,a),gi(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(bc=jn()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,wl(a,d)));break;case 22:v=a.memoizedState!==null;var W=h!==null&&h.memoizedState!==null,ot=Da,gt=fn;if(Da=ot||v,fn=gt||W,pi(r,a),fn=gt,Da=ot,gi(a),d&8192)t:for(r=a.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(h===null||W||Da||fn||Fr(a)),h=null,r=a;;){if(r.tag===5||r.tag===26){if(h===null){W=h=r;try{if(E=W.stateNode,v)N=E.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{O=W.stateNode;var St=W.memoizedProps.style,ct=St!=null&&St.hasOwnProperty("display")?St.display:null;O.style.display=ct==null||typeof ct=="boolean"?"":(""+ct).trim()}}catch(Ht){He(W,W.return,Ht)}}}else if(r.tag===6){if(h===null){W=r;try{W.stateNode.nodeValue=v?"":W.memoizedProps}catch(Ht){He(W,W.return,Ht)}}}else if(r.tag===18){if(h===null){W=r;try{var pt=W.stateNode;v?e4(pt,!0):e4(W.stateNode,!1)}catch(Ht){He(W,W.return,Ht)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===a)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break t;for(;r.sibling===null;){if(r.return===null||r.return===a)break t;h===r&&(h=null),r=r.return}h===r&&(h=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=a.updateQueue,d!==null&&(h=d.retryQueue,h!==null&&(d.retryQueue=null,wl(a,h))));break;case 19:pi(r,a),gi(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,wl(a,d)));break;case 30:break;case 21:break;default:pi(r,a),gi(a)}}function gi(a){var r=a.flags;if(r&2){try{for(var h,d=a.return;d!==null;){if(Tn(d)){h=d;break}d=d.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var v=h.stateNode,E=be(a);As(a,E,v);break;case 5:var N=h.stateNode;h.flags&32&&(Zs(N,""),h.flags&=-33);var O=be(a);As(a,O,N);break;case 3:case 4:var W=h.stateNode.containerInfo,ot=be(a);qr(a,ot,W);break;default:throw Error(i(161))}}catch(gt){He(a,a.return,gt)}a.flags&=-3}r&4096&&(a.flags&=-4097)}function Ud(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var r=a;Ud(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),a=a.sibling}}function Ma(a,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)bn(a,r.alternate,r),r=r.sibling}function Fr(a){for(a=a.child;a!==null;){var r=a;switch(r.tag){case 0:case 11:case 14:case 15:Ui(4,r,r.return),Fr(r);break;case 1:zi(r,r.return);var h=r.stateNode;typeof h.componentWillUnmount=="function"&&bi(r,r.return,h),Fr(r);break;case 27:Wp(r.stateNode);case 26:case 5:zi(r,r.return),Fr(r);break;case 22:r.memoizedState===null&&Fr(r);break;case 30:Fr(r);break;default:Fr(r)}a=a.sibling}}function Es(a,r,h){for(h=h&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,v=a,E=r,N=E.flags;switch(E.tag){case 0:case 11:case 15:Es(v,E,h),Na(4,E);break;case 1:if(Es(v,E,h),d=E,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ot){He(d,d.return,ot)}if(d=E,v=d.updateQueue,v!==null){var O=d.stateNode;try{var W=v.shared.hiddenCallbacks;if(W!==null)for(v.shared.hiddenCallbacks=null,v=0;v<W.length;v++)_c(W[v],O)}catch(ot){He(d,d.return,ot)}}h&&N&64&&sr(E),Rl(E,E.return);break;case 27:kd(E);case 26:case 5:Es(v,E,h),h&&d===null&&N&4&&cf(E),Rl(E,E.return);break;case 12:Es(v,E,h);break;case 31:Es(v,E,h),h&&N&4&&yo(v,E);break;case 13:Es(v,E,h),h&&N&4&&Tc(v,E);break;case 22:E.memoizedState===null&&Es(v,E,h),Rl(E,E.return);break;case 30:break;default:Es(v,E,h)}r=r.sibling}}function Ao(a,r){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&Jo(h))}function hu(a,r){a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&Jo(a))}function Bi(a,r,h,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Fp(a,r,h,d),r=r.sibling}function Fp(a,r,h,d){var v=r.flags;switch(r.tag){case 0:case 11:case 15:Bi(a,r,h,d),v&2048&&Na(9,r);break;case 1:Bi(a,r,h,d);break;case 3:Bi(a,r,h,d),v&2048&&(a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&Jo(a)));break;case 12:if(v&2048){Bi(a,r,h,d),a=r.stateNode;try{var E=r.memoizedProps,N=E.id,O=E.onPostCommit;typeof O=="function"&&O(N,r.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(W){He(r,r.return,W)}}else Bi(a,r,h,d);break;case 31:Bi(a,r,h,d);break;case 13:Bi(a,r,h,d);break;case 23:break;case 22:E=r.stateNode,N=r.alternate,r.memoizedState!==null?E._visibility&2?Bi(a,r,h,d):Yr(a,r):E._visibility&2?Bi(a,r,h,d):(E._visibility|=2,ji(a,r,h,d,(r.subtreeFlags&10256)!==0||!1)),v&2048&&Ao(N,r);break;case 24:Bi(a,r,h,d),v&2048&&hu(r.alternate,r);break;default:Bi(a,r,h,d)}}function ji(a,r,h,d,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var E=a,N=r,O=h,W=d,ot=N.flags;switch(N.tag){case 0:case 11:case 15:ji(E,N,O,W,v),Na(8,N);break;case 23:break;case 22:var gt=N.stateNode;N.memoizedState!==null?gt._visibility&2?ji(E,N,O,W,v):Yr(E,N):(gt._visibility|=2,ji(E,N,O,W,v)),v&&ot&2048&&Ao(N.alternate,N);break;case 24:ji(E,N,O,W,v),v&&ot&2048&&hu(N.alternate,N);break;default:ji(E,N,O,W,v)}r=r.sibling}}function Yr(a,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var h=a,d=r,v=d.flags;switch(d.tag){case 22:Yr(h,d),v&2048&&Ao(d.alternate,d);break;case 24:Yr(h,d),v&2048&&hu(d.alternate,d);break;default:Yr(h,d)}r=r.sibling}}var fu=8192;function aa(a,r,h){if(a.subtreeFlags&fu)for(a=a.child;a!==null;)zd(a,r,h),a=a.sibling}function zd(a,r,h){switch(a.tag){case 26:aa(a,r,h),a.flags&fu&&a.memoizedState!==null&&gR(h,Oa,a.memoizedState,a.memoizedProps);break;case 5:aa(a,r,h);break;case 3:case 4:var d=Oa;Oa=q_(a.stateNode.containerInfo),aa(a,r,h),Oa=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=fu,fu=16777216,aa(a,r,h),fu=d):aa(a,r,h));break;default:aa(a,r,h)}}function du(a){var r=a.alternate;if(r!==null&&(a=r.child,a!==null)){r.child=null;do r=a.sibling,a.sibling=null,a=r;while(a!==null)}}function Eo(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var h=0;h<r.length;h++){var d=r[h];Ci=d,Hn(d,a)}du(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ps(a),a=a.sibling}function Ps(a){switch(a.tag){case 0:case 11:case 15:Eo(a),a.flags&2048&&Ui(9,a,a.return);break;case 3:Eo(a);break;case 12:Eo(a);break;case 22:var r=a.stateNode;a.memoizedState!==null&&r._visibility&2&&(a.return===null||a.return.tag!==13)?(r._visibility&=-3,Ss(a)):Eo(a);break;default:Eo(a)}}function Ss(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var h=0;h<r.length;h++){var d=r[h];Ci=d,Hn(d,a)}du(a)}for(a=a.child;a!==null;){switch(r=a,r.tag){case 0:case 11:case 15:Ui(8,r,r.return),Ss(r);break;case 22:h=r.stateNode,h._visibility&2&&(h._visibility&=-3,Ss(r));break;default:Ss(r)}a=a.sibling}}function Hn(a,r){for(;Ci!==null;){var h=Ci;switch(h.tag){case 0:case 11:case 15:Ui(8,h,r);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var d=h.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Jo(h.memoizedState.cache)}if(d=h.child,d!==null)d.return=h,Ci=d;else t:for(h=a;Ci!==null;){d=Ci;var v=d.sibling,E=d.return;if(hf(d),d===h){Ci=null;break t}if(v!==null){v.return=E,Ci=v;break t}Ci=E}}}var xl={getCacheForType:function(a){var r=se(ai),h=r.data.get(a);return h===void 0&&(h=a(),r.data.set(a,h)),h},cacheSignal:function(){return se(ai).controller.signal}},fe=typeof WeakMap=="function"?WeakMap:Map,Xt=0,le=null,ye=null,pe=0,Ve=0,Ji=null,La=!1,rr=!1,Yp=!1,ra=0,Vn=0,Qr=0,So=0,ff=0,Ts=0,_n=0,mu=null,qn=null,Fn=!1,bc=0,Qp=0,Jn=1/0,kn=null,Zn=null,Je=0,la=null,Cc=null,Va=0,Rc=0,wc=null,df=null,To=0,pu=null;function oa(){return(Xt&2)!==0&&pe!==0?pe&-pe:$.T!==null?ft():Ka()}function Ee(){if(Ts===0)if((pe&536870912)===0||xe){var a=fa;fa<<=1,(fa&3932160)===0&&(fa=262144),Ts=a}else Ts=536870912;return a=Ms.current,a!==null&&(a.flags|=32),Ts}function ve(a,r,h){(a===le&&(Ve===2||Ve===9)||a.cancelPendingCommit!==null)&&(Co(a,0),li(a,pe,Ts,!1)),il(a,h),((Xt&2)===0||a!==le)&&(a===le&&((Xt&2)===0&&(So|=h),Vn===4&&li(a,pe,Ts,!1)),wt(a))}function Se(a,r,h){if((Xt&6)!==0)throw Error(i(327));var d=!h&&(r&127)===0&&(r&a.expiredLanes)===0||nl(a,r),v=d?mf(a,r):bs(a,r,!0),E=d;do{if(v===0){rr&&!d&&li(a,r,0,!1);break}else{if(h=a.current.alternate,E&&!Ze(h)){v=bs(a,r,!1),E=!1;continue}if(v===2){if(E=r,a.errorRecoveryDisabledLanes&E)var N=0;else N=a.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){r=N;t:{var O=a;v=mu;var W=O.current.memoizedState.isDehydrated;if(W&&(Co(O,N).flags|=256),N=bs(O,N,!1),N!==2){if(Yp&&!W){O.errorRecoveryDisabledLanes|=E,So|=E,v=4;break t}E=qn,qn=v,E!==null&&(qn===null?qn=E:qn.push.apply(qn,E))}v=N}if(E=!1,v!==2)continue}}if(v===1){Co(a,0),li(a,r,0,!0);break}t:{switch(d=a,E=v,E){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:li(d,r,Ts,!La);break t;case 2:qn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(v=bc+300-jn(),10<v)){if(li(d,r,Ts,!La),us(d,0,!0)!==0)break t;Va=r,d.timeoutHandle=ZS(Ce.bind(null,d,h,qn,kn,Fn,r,Ts,So,_n,La,E,"Throttled",-0,0),v);break t}Ce(d,h,qn,kn,Fn,r,Ts,So,_n,La,E,null,-0,0)}}break}while(!0);wt(a)}function Ce(a,r,h,d,v,E,N,O,W,ot,gt,St,ct,pt){if(a.timeoutHandle=-1,St=r.subtreeFlags,St&8192||(St&16785408)===16785408){St={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vi},zd(r,E,St);var Ht=(E&62914560)===E?bc-jn():(E&4194048)===E?Qp-jn():0;if(Ht=_R(St,Ht),Ht!==null){Va=E,a.cancelPendingCommit=Ht(Dl.bind(null,a,r,E,h,d,v,N,O,W,gt,St,null,ct,pt)),li(a,E,N,!ot);return}}Dl(a,r,E,h,d,v,N,O,W)}function Ze(a){for(var r=a;;){var h=r.tag;if((h===0||h===11||h===15)&&r.flags&16384&&(h=r.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var d=0;d<h.length;d++){var v=h[d],E=v.getSnapshot;v=v.value;try{if(!gs(E(),v))return!1}catch{return!1}}if(h=r.child,r.subtreeFlags&16384&&h!==null)h.return=r,r=h;else{if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function li(a,r,h,d){r&=~ff,r&=~So,a.suspendedLanes|=r,a.pingedLanes&=~r,d&&(a.warmLanes|=r),d=a.expirationTimes;for(var v=r;0<v;){var E=31-ni(v),N=1<<E;d[E]=-1,v&=~N}h!==0&&sl(a,h,r)}function lr(){return(Xt&6)===0?(zt(0),!1):!0}function bo(){if(ye!==null){if(Ve===0)var a=ye.return;else a=ye,Pr=uo=null,gp(a),nu=null,iu=0,a=ye;for(;a!==null;)sa(a.alternate,a),a=a.return;ye=null}}function Co(a,r){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,$8(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),Va=0,bo(),le=a,ye=h=Ds(a.current,null),pe=r,Ve=0,Ji=null,La=!1,rr=nl(a,r),Yp=!1,_n=Ts=ff=So=Qr=Vn=0,qn=mu=null,Fn=!1,(r&8)!==0&&(r|=r&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=r;0<d;){var v=31-ni(d),E=1<<v;r|=a[v],d&=~E}return ra=r,Yh(),h}function Xr(a,r){he=null,$.H=Ec,r===Zo||r===_e?(r=tu(),Ve=3):r===Wh?(r=tu(),Ve=4):Ve=r===wd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ji=r,ye===null&&(Vn=1,Rd(a,ta(r,a.current)))}function Pn(){var a=Ms.current;return a===null?!0:(pe&4194048)===pe?vs===null:(pe&62914560)===pe||(pe&536870912)!==0?a===vs:!1}function Nl(){var a=$.H;return $.H=Ec,a===null?Ec:a}function Ro(){var a=$.A;return $.A=xl,a}function xc(){Vn=4,La||(pe&4194048)!==pe&&Ms.current!==null||(rr=!0),(Qr&134217727)===0&&(So&134217727)===0||le===null||li(le,pe,Ts,!1)}function bs(a,r,h){var d=Xt;Xt|=2;var v=Nl(),E=Ro();(le!==a||pe!==r)&&(kn=null,Co(a,r)),r=!1;var N=Vn;t:do try{if(Ve!==0&&ye!==null){var O=ye,W=Ji;switch(Ve){case 8:bo(),N=6;break t;case 3:case 2:case 9:case 6:Ms.current===null&&(r=!0);var ot=Ve;if(Ve=0,Ji=null,gu(a,O,W,ot),h&&rr){N=0;break t}break;default:ot=Ve,Ve=0,Ji=null,gu(a,O,W,ot)}}Nc(),N=Vn;break}catch(gt){Xr(a,gt)}while(!0);return r&&a.shellSuspendCounter++,Pr=uo=null,Xt=d,$.H=v,$.A=E,ye===null&&(le=null,pe=0,Yh()),N}function Nc(){for(;ye!==null;)Bd(ye)}function mf(a,r){var h=Xt;Xt|=2;var d=Nl(),v=Ro();le!==a||pe!==r?(kn=null,Jn=jn()+500,Co(a,r)):rr=nl(a,r);t:do try{if(Ve!==0&&ye!==null){r=ye;var E=Ji;e:switch(Ve){case 1:Ve=0,Ji=null,gu(a,r,E,1);break;case 2:case 9:if(Os(E)){Ve=0,Ji=null,pf(r);break}r=function(){Ve!==2&&Ve!==9||le!==a||(Ve=7),wt(a)},E.then(r,r);break t;case 3:Ve=7;break t;case 4:Ve=5;break t;case 7:Os(E)?(Ve=0,Ji=null,pf(r)):(Ve=0,Ji=null,gu(a,r,E,7));break;case 5:var N=null;switch(ye.tag){case 26:N=ye.memoizedState;case 5:case 27:var O=ye;if(N?d4(N):O.stateNode.complete){Ve=0,Ji=null;var W=O.sibling;if(W!==null)ye=W;else{var ot=O.return;ot!==null?(ye=ot,wo(ot)):ye=null}break e}}Ve=0,Ji=null,gu(a,r,E,5);break;case 6:Ve=0,Ji=null,gu(a,r,E,6);break;case 8:bo(),Vn=6;break t;default:throw Error(i(462))}}Us();break}catch(gt){Xr(a,gt)}while(!0);return Pr=uo=null,$.H=d,$.A=v,Xt=h,ye!==null?0:(le=null,pe=0,Yh(),Vn)}function Us(){for(;ye!==null&&!qa();)Bd(ye)}function Bd(a){var r=Vd(a.alternate,a,ra);a.memoizedProps=a.pendingProps,r===null?wo(a):ye=r}function pf(a){var r=a,h=r.alternate;switch(r.tag){case 15:case 0:r=rf(h,r,r.pendingProps,r.type,void 0,pe);break;case 11:r=rf(h,r,r.pendingProps,r.type.render,r.ref,pe);break;case 5:gp(r);default:sa(h,r),r=ye=lc(r,ra),r=Vd(h,r,ra)}a.memoizedProps=a.pendingProps,r===null?wo(a):ye=r}function gu(a,r,h,d){Pr=uo=null,gp(r),nu=null,iu=0;var v=r.return;try{if(di(a,v,r,h,pe)){Vn=1,Rd(a,ta(h,a.current)),ye=null;return}}catch(E){if(v!==null)throw ye=v,E;Vn=1,Rd(a,ta(h,a.current)),ye=null;return}r.flags&32768?(xe||d===1?a=!0:rr||(pe&536870912)!==0?a=!1:(La=a=!0,(d===2||d===9||d===3||d===6)&&(d=Ms.current,d!==null&&d.tag===13&&(d.flags|=16384))),gf(r,a)):wo(r)}function wo(a){var r=a;do{if((r.flags&32768)!==0){gf(r,La);return}a=r.return;var h=uf(r.alternate,r,ra);if(h!==null){ye=h;return}if(r=r.sibling,r!==null){ye=r;return}ye=r=a}while(r!==null);Vn===0&&(Vn=5)}function gf(a,r){do{var h=xa(a.alternate,a);if(h!==null){h.flags&=32767,ye=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!r&&(a=a.sibling,a!==null)){ye=a;return}ye=a=h}while(a!==null);Vn=6,ye=null}function Dl(a,r,h,d,v,E,N,O,W){a.cancelPendingCommit=null;do Dc();while(Je!==0);if((Xt&6)!==0)throw Error(i(327));if(r!==null){if(r===a.current)throw Error(i(177));if(E=r.lanes|r.childLanes,E|=Ei,ii(a,h,E,N,O,W),a===le&&(ye=le=null,pe=0),Cc=r,la=a,Va=h,Rc=E,wc=v,df=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,b(Fi,function(){return jd(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=$.T,$.T=null,v=Tt.p,Tt.p=2,N=Xt,Xt|=4;try{Tv(a,r,h)}finally{Xt=N,Tt.p=v,$.T=d}}Je=1,oi(),Il(),_u()}}function oi(){if(Je===1){Je=0;var a=la,r=Cc,h=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||h){h=$.T,$.T=null;var d=Tt.p;Tt.p=2;var v=Xt;Xt|=4;try{vo(r,a);var E=Dv,N=G0(a.containerInfo),O=E.focusedElem,W=E.selectionRange;if(N!==O&&O&&O.ownerDocument&&cn(O.ownerDocument.documentElement,O)){if(W!==null&&Zm(O)){var ot=W.start,gt=W.end;if(gt===void 0&&(gt=ot),"selectionStart"in O)O.selectionStart=ot,O.selectionEnd=Math.min(gt,O.value.length);else{var St=O.ownerDocument||document,ct=St&&St.defaultView||window;if(ct.getSelection){var pt=ct.getSelection(),Ht=O.textContent.length,ie=Math.min(W.start,Ht),mn=W.end===void 0?ie:Math.min(W.end,Ht);!pt.extend&&ie>mn&&(N=mn,mn=ie,ie=N);var nt=sc(O,ie),Z=sc(O,mn);if(nt&&Z&&(pt.rangeCount!==1||pt.anchorNode!==nt.node||pt.anchorOffset!==nt.offset||pt.focusNode!==Z.node||pt.focusOffset!==Z.offset)){var lt=St.createRange();lt.setStart(nt.node,nt.offset),pt.removeAllRanges(),ie>mn?(pt.addRange(lt),pt.extend(Z.node,Z.offset)):(lt.setEnd(Z.node,Z.offset),pt.addRange(lt))}}}}for(St=[],pt=O;pt=pt.parentNode;)pt.nodeType===1&&St.push({element:pt,left:pt.scrollLeft,top:pt.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<St.length;O++){var yt=St[O];yt.element.scrollLeft=yt.left,yt.element.scrollTop=yt.top}}W_=!!Nv,Dv=Nv=null}finally{Xt=v,Tt.p=d,$.T=h}}a.current=r,Je=2}}function Il(){if(Je===2){Je=0;var a=la,r=Cc,h=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||h){h=$.T,$.T=null;var d=Tt.p;Tt.p=2;var v=Xt;Xt|=4;try{bn(a,r.alternate,r)}finally{Xt=v,Tt.p=d,$.T=h}}Je=3}}function _u(){if(Je===4||Je===3){Je=0,Nn();var a=la,r=Cc,h=Va,d=df;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Je=5:(Je=0,Cc=la=null,Kr(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Zn=null),Kl(h),r=r.stateNode,ne&&typeof ne.onCommitFiberRoot=="function")try{ne.onCommitFiberRoot(Kt,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=$.T,v=Tt.p,Tt.p=2,$.T=null;try{for(var E=a.onRecoverableError,N=0;N<d.length;N++){var O=d[N];E(O.value,{componentStack:O.stack})}}finally{$.T=r,Tt.p=v}}(Va&3)!==0&&Dc(),wt(a),v=a.pendingLanes,(h&261930)!==0&&(v&42)!==0?a===pu?To++:(To=0,pu=a):To=0,zt(0)}}function Kr(a,r){(a.pooledCacheLanes&=r)===0&&(r=a.pooledCache,r!=null&&(a.pooledCache=null,Jo(r)))}function Dc(){return oi(),Il(),_u(),jd()}function jd(){if(Je!==5)return!1;var a=la,r=Rc;Rc=0;var h=Kl(Va),d=$.T,v=Tt.p;try{Tt.p=32>h?32:h,$.T=null,h=wc,wc=null;var E=la,N=Va;if(Je=0,Cc=la=null,Va=0,(Xt&6)!==0)throw Error(i(331));var O=Xt;if(Xt|=4,Ps(E.current),Fp(E,E.current,N,h),Xt=O,zt(0,!1),ne&&typeof ne.onPostCommitFiberRoot=="function")try{ne.onPostCommitFiberRoot(Kt,E)}catch{}return!0}finally{Tt.p=v,$.T=d,Kr(a,r)}}function Xp(a,r,h){r=ta(h,r),r=Up(a.stateNode,r,2),a=fo(a,r,2),a!==null&&(il(a,2),wt(a))}function He(a,r,h){if(a.tag===3)Xp(a,a,h);else for(;r!==null;){if(r.tag===3){Xp(r,a,h);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Zn===null||!Zn.has(d))){a=ta(h,a),h=zp(2),d=fo(r,h,2),d!==null&&(V_(h,d,r,a),il(d,2),wt(d));break}}r=r.return}}function _f(a,r,h){var d=a.pingCache;if(d===null){d=a.pingCache=new fe;var v=new Set;d.set(r,v)}else v=d.get(r),v===void 0&&(v=new Set,d.set(r,v));v.has(h)||(Yp=!0,v.add(h),a=o.bind(null,a,r,h),r.then(a,a))}function o(a,r,h){var d=a.pingCache;d!==null&&d.delete(r),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,le===a&&(pe&h)===h&&(Vn===4||Vn===3&&(pe&62914560)===pe&&300>jn()-bc?(Xt&2)===0&&Co(a,0):ff|=h,_n===pe&&(_n=0)),wt(a)}function u(a,r){r===0&&(r=Qa()),a=_s(a,r),a!==null&&(il(a,r),wt(a))}function p(a){var r=a.memoizedState,h=0;r!==null&&(h=r.retryLane),u(a,h)}function y(a,r){var h=0;switch(a.tag){case 31:case 13:var d=a.stateNode,v=a.memoizedState;v!==null&&(h=v.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(r),u(a,h)}function b(a,r){return xs(a,r)}var C=null,I=null,J=!1,dt=!1,Ct=!1,Mt=0;function wt(a){a!==I&&a.next===null&&(I===null?C=I=a:I=I.next=a),dt=!0,J||(J=!0,st())}function zt(a,r){if(!Ct&&dt){Ct=!0;do for(var h=!1,d=C;d!==null;){if(a!==0){var v=d.pendingLanes;if(v===0)var E=0;else{var N=d.suspendedLanes,O=d.pingedLanes;E=(1<<31-ni(42|a)+1)-1,E&=v&~(N&~O),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,ut(d,E))}else E=pe,E=us(d,d===le?E:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(E&3)===0||nl(d,E)||(h=!0,ut(d,E));d=d.next}while(h);Ct=!1}}function ue(){Ri()}function Ri(){dt=J=!1;var a=0;Mt!==0&&Z8()&&(a=Mt);for(var r=jn(),h=null,d=C;d!==null;){var v=d.next,E=Ic(d,r);E===0?(d.next=null,h===null?C=v:h.next=v,v===null&&(I=h)):(h=d,(a!==0||(E&3)!==0)&&(dt=!0)),d=v}Je!==0&&Je!==5||zt(a),Mt!==0&&(Mt=0)}function Ic(a,r){for(var h=a.suspendedLanes,d=a.pingedLanes,v=a.expirationTimes,E=a.pendingLanes&-62914561;0<E;){var N=31-ni(E),O=1<<N,W=v[N];W===-1?((O&h)===0||(O&d)!==0)&&(v[N]=Bo(O,r)):W<=r&&(a.expiredLanes|=O),E&=~O}if(r=le,h=pe,h=us(a,a===r?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,h===0||a===r&&(Ve===2||Ve===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Ha(d),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||nl(a,h)){if(r=h&-h,r===a.callbackPriority)return r;switch(d!==null&&Ha(d),Kl(h)){case 2:case 8:h=rn;break;case 32:h=Fi;break;case 268435456:h=ca;break;default:h=Fi}return d=xo.bind(null,a),h=xs(h,d),a.callbackPriority=r,a.callbackNode=h,r}return d!==null&&d!==null&&Ha(d),a.callbackPriority=2,a.callbackNode=null,2}function xo(a,r){if(Je!==0&&Je!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(Dc()&&a.callbackNode!==h)return null;var d=pe;return d=us(a,a===le?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(Se(a,d,r),Ic(a,jn()),a.callbackNode!=null&&a.callbackNode===h?xo.bind(null,a):null)}function ut(a,r){if(Dc())return null;Se(a,r,!0)}function st(){tR(function(){(Xt&6)!==0?xs(Dn,ue):Ri()})}function ft(){if(Mt===0){var a=Al;a===0&&(a=pr,pr<<=1,(pr&261888)===0&&(pr=256)),Mt=a}return Mt}function Nt(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:$a(""+a)}function $t(a,r){var h=r.ownerDocument.createElement("input");return h.name=r.name,h.value=r.value,a.id&&h.setAttribute("form",a.id),r.parentNode.insertBefore(h,r),a=new FormData(a),h.parentNode.removeChild(h),a}function Un(a,r,h,d,v){if(r==="submit"&&h&&h.stateNode===v){var E=Nt((v[ui]||null).action),N=d.submitter;N&&(r=(r=N[ui]||null)?Nt(r.formAction):N.getAttribute("formAction"),r!==null&&(E=r,N=null));var O=new eo("action","action",null,d,v);a.push({event:O,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Mt!==0){var W=N?$t(v,N):new FormData(v);Dp(h,{pending:!0,data:W,method:v.method,action:E},null,W)}}else typeof E=="function"&&(O.preventDefault(),W=N?$t(v,N):new FormData(v),Dp(h,{pending:!0,data:W,method:v.method,action:E},E,W))},currentTarget:v}]})}}for(var ee=0;ee<qh.length;ee++){var Ue=qh[ee],wi=Ue.toLowerCase(),Fe=Ue[0].toUpperCase()+Ue.slice(1);Ea(wi,"on"+Fe)}Ea(td,"onAnimationEnd"),Ea(Hh,"onAnimationIteration"),Ea(tp,"onAnimationStart"),Ea("dblclick","onDoubleClick"),Ea("focusin","onFocus"),Ea("focusout","onBlur"),Ea(q0,"onTransitionRun"),Ea(pv,"onTransitionStart"),Ea(F0,"onTransitionCancel"),Ea(ep,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ka));function qS(a,r){r=(r&4)!==0;for(var h=0;h<a.length;h++){var d=a[h],v=d.event;d=d.listeners;t:{var E=void 0;if(r)for(var N=d.length-1;0<=N;N--){var O=d[N],W=O.instance,ot=O.currentTarget;if(O=O.listener,W!==E&&v.isPropagationStopped())break t;E=O,v.currentTarget=ot;try{E(v)}catch(gt){Fh(gt)}v.currentTarget=null,E=W}else for(N=0;N<d.length;N++){if(O=d[N],W=O.instance,ot=O.currentTarget,O=O.listener,W!==E&&v.isPropagationStopped())break t;E=O,v.currentTarget=ot;try{E(v)}catch(gt){Fh(gt)}v.currentTarget=null,E=W}}}}function ke(a,r){var h=r[cs];h===void 0&&(h=r[cs]=new Set);var d=a+"__bubble";h.has(d)||(FS(r,a,2,!1),h.add(d))}function Cv(a,r,h){var d=0;r&&(d|=4),FS(h,a,d,r)}var j_="_reactListening"+Math.random().toString(36).slice(2);function Rv(a){if(!a[j_]){a[j_]=!0,Ws.forEach(function(h){h!=="selectionchange"&&(bv.has(h)||Cv(h,!1,a),Cv(h,!0,a))});var r=a.nodeType===9?a:a.ownerDocument;r===null||r[j_]||(r[j_]=!0,Cv("selectionchange",!1,r))}}function FS(a,r,h,d){switch(A4(r)){case 2:var v=AR;break;case 8:v=ER;break;default:v=jv}h=v.bind(null,r,h,a),v=void 0,!xh||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),d?v!==void 0?a.addEventListener(r,h,{capture:!0,passive:v}):a.addEventListener(r,h,!0):v!==void 0?a.addEventListener(r,h,{passive:v}):a.addEventListener(r,h,!1)}function wv(a,r,h,d,v){var E=d;if((r&1)===0&&(r&2)===0&&d!==null)t:for(;;){if(d===null)return;var N=d.tag;if(N===3||N===4){var O=d.stateNode.containerInfo;if(O===v)break;if(N===4)for(N=d.return;N!==null;){var W=N.tag;if((W===3||W===4)&&N.stateNode.containerInfo===v)return;N=N.return}for(;O!==null;){if(N=yr(O),N===null)return;if(W=N.tag,W===5||W===6||W===26||W===27){d=E=N;continue t}O=O.parentNode}}d=d.return}wh(function(){var ot=E,gt=Ho(h),St=[];t:{var ct=Aa.get(a);if(ct!==void 0){var pt=eo,Ht=a;switch(a){case"keypress":if(to(h)===0)break t;case"keydown":case"keyup":pt=wr;break;case"focusin":Ht="focus",pt=hl;break;case"focusout":Ht="blur",pt=hl;break;case"beforeblur":case"afterblur":pt=hl;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=Dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=Ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=Vh;break;case td:case Hh:case tp:pt=Ku;break;case ep:pt=ec;break;case"scroll":case"scrollend":pt=Nh;break;case"wheel":pt=Ph;break;case"copy":case"cut":case"paste":pt=Mh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=$u;break;case"toggle":case"beforetoggle":pt=dl}var ie=(r&4)!==0,mn=!ie&&(a==="scroll"||a==="scrollend"),nt=ie?ct!==null?ct+"Capture":null:ct;ie=[];for(var Z=ot,lt;Z!==null;){var yt=Z;if(lt=yt.stateNode,yt=yt.tag,yt!==5&&yt!==26&&yt!==27||lt===null||nt===null||(yt=ms(Z,nt),yt!=null&&ie.push(Kp(Z,yt,lt))),mn)break;Z=Z.return}0<ie.length&&(ct=new pt(ct,Ht,null,h,gt),St.push({event:ct,listeners:ie}))}}if((r&7)===0){t:{if(ct=a==="mouseover"||a==="pointerover",pt=a==="mouseout"||a==="pointerout",ct&&h!==Go&&(Ht=h.relatedTarget||h.fromElement)&&(yr(Ht)||Ht[ma]))break t;if((pt||ct)&&(ct=gt.window===gt?gt:(ct=gt.ownerDocument)?ct.defaultView||ct.parentWindow:window,pt?(Ht=h.relatedTarget||h.toElement,pt=ot,Ht=Ht?yr(Ht):null,Ht!==null&&(mn=l(Ht),ie=Ht.tag,Ht!==mn||ie!==5&&ie!==27&&ie!==6)&&(Ht=null)):(pt=null,Ht=ot),pt!==Ht)){if(ie=Dh,yt="onMouseLeave",nt="onMouseEnter",Z="mouse",(a==="pointerout"||a==="pointerover")&&(ie=$u,yt="onPointerLeave",nt="onPointerEnter",Z="pointer"),mn=pt==null?ct:Jl(pt),lt=Ht==null?ct:Jl(Ht),ct=new ie(yt,Z+"leave",pt,h,gt),ct.target=mn,ct.relatedTarget=lt,yt=null,yr(gt)===ot&&(ie=new ie(nt,Z+"enter",Ht,h,gt),ie.target=lt,ie.relatedTarget=mn,yt=ie),mn=yt,pt&&Ht)e:{for(ie=Q8,nt=pt,Z=Ht,lt=0,yt=nt;yt;yt=ie(yt))lt++;yt=0;for(var Zt=Z;Zt;Zt=ie(Zt))yt++;for(;0<lt-yt;)nt=ie(nt),lt--;for(;0<yt-lt;)Z=ie(Z),yt--;for(;lt--;){if(nt===Z||Z!==null&&nt===Z.alternate){ie=nt;break e}nt=ie(nt),Z=ie(Z)}ie=null}else ie=null;pt!==null&&YS(St,ct,pt,ie,!1),Ht!==null&&mn!==null&&YS(St,mn,Ht,ie,!0)}}t:{if(ct=ot?Jl(ot):window,pt=ct.nodeName&&ct.nodeName.toLowerCase(),pt==="select"||pt==="input"&&ct.type==="file")var Xe=Qm;else if(ps(ct))if(Nr)Xe=j0;else{Xe=Wm;var Qt=z0}else pt=ct.nodeName,!pt||pt.toLowerCase()!=="input"||ct.type!=="checkbox"&&ct.type!=="radio"?ot&&Qu(ot.elementType)&&(Xe=Qm):Xe=B0;if(Xe&&(Xe=Xe(a,ot))){ml(St,Xe,h,gt);break t}Qt&&Qt(a,ct,ot),a==="focusout"&&ot&&ct.type==="number"&&ot.memoizedProps.value!=null&&Ns(ct,"number",ct.value)}switch(Qt=ot?Jl(ot):window,a){case"focusin":(ps(Qt)||Qt.contentEditable==="true")&&(Dr=Qt,Ir=ot,ac=null);break;case"focusout":ac=Ir=Dr=null;break;case"mousedown":$f=!0;break;case"contextmenu":case"mouseup":case"dragend":$f=!1,rc(St,h,gt);break;case"selectionchange":if(H0)break;case"keydown":case"keyup":rc(St,h,gt)}var Ae;if(R)t:{switch(a){case"compositionstart":var ze="onCompositionStart";break t;case"compositionend":ze="onCompositionEnd";break t;case"compositionupdate":ze="onCompositionUpdate";break t}ze=void 0}else ge?qe(a,h)&&(ze="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(ze="onCompositionStart");ze&&(rt&&h.locale!=="ko"&&(ge||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ge&&(Ae=er()):(Ai=gt,qo="value"in Ai?Ai.value:Ai.textContent,ge=!0)),Qt=G_(ot,ze),0<Qt.length&&(ze=new Qo(ze,a,null,h,gt),St.push({event:ze,listeners:Qt}),Ae?ze.data=Ae:(Ae=Qn(h),Ae!==null&&(ze.data=Ae)))),(Ae=P?hi(a,h):si(a,h))&&(ze=G_(ot,"onBeforeInput"),0<ze.length&&(Qt=new Qo("onBeforeInput","beforeinput",null,h,gt),St.push({event:Qt,listeners:ze}),Qt.data=Ae)),Un(St,a,ot,h,gt)}qS(St,r)})}function Kp(a,r,h){return{instance:a,listener:r,currentTarget:h}}function G_(a,r){for(var h=r+"Capture",d=[];a!==null;){var v=a,E=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||E===null||(v=ms(a,h),v!=null&&d.unshift(Kp(a,v,E)),v=ms(a,r),v!=null&&d.push(Kp(a,v,E))),a.tag===3)return d;a=a.return}return[]}function Q8(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function YS(a,r,h,d,v){for(var E=r._reactName,N=[];h!==null&&h!==d;){var O=h,W=O.alternate,ot=O.stateNode;if(O=O.tag,W!==null&&W===d)break;O!==5&&O!==26&&O!==27||ot===null||(W=ot,v?(ot=ms(h,E),ot!=null&&N.unshift(Kp(h,ot,W))):v||(ot=ms(h,E),ot!=null&&N.push(Kp(h,ot,W)))),h=h.return}N.length!==0&&a.push({event:r,listeners:N})}var X8=/\r\n?/g,K8=/\u0000|\uFFFD/g;function QS(a){return(typeof a=="string"?a:""+a).replace(X8,`
`).replace(K8,"")}function XS(a,r){return r=QS(r),QS(a)===r}function dn(a,r,h,d,v,E){switch(h){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||Zs(a,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&Zs(a,""+d);break;case"className":rl(a,"class",d);break;case"tabIndex":rl(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":rl(a,h,d);break;case"style":bh(a,d,E);break;case"data":if(r!=="object"){rl(a,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||h!=="href")){a.removeAttribute(h);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=$a(""+d),a.setAttribute(h,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(r!=="input"&&dn(a,r,"name",v.name,v,null),dn(a,r,"formEncType",v.formEncType,v,null),dn(a,r,"formMethod",v.formMethod,v,null),dn(a,r,"formTarget",v.formTarget,v,null)):(dn(a,r,"encType",v.encType,v,null),dn(a,r,"method",v.method,v,null),dn(a,r,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=$a(""+d),a.setAttribute(h,d);break;case"onClick":d!=null&&(a.onclick=vi);break;case"onScroll":d!=null&&ke("scroll",a);break;case"onScrollEnd":d!=null&&ke("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(h=d.__html,h!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}h=$a(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""+d):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":d===!0?a.setAttribute(h,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,d):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(h,d):a.removeAttribute(h);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(h):a.setAttribute(h,d);break;case"popover":ke("beforetoggle",a),ke("toggle",a),Er(a,"popover",d);break;case"xlinkActuate":Js(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Js(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Js(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Js(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Js(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Js(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Js(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Js(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Js(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Er(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Zf.get(h)||h,Er(a,h,d))}}function xv(a,r,h,d,v,E){switch(h){case"style":bh(a,d,E);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(h=d.__html,h!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"children":typeof d=="string"?Zs(a,d):(typeof d=="number"||typeof d=="bigint")&&Zs(a,""+d);break;case"onScroll":d!=null&&ke("scroll",a);break;case"onScrollEnd":d!=null&&ke("scrollend",a);break;case"onClick":d!=null&&(a.onclick=vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ar.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(v=h.endsWith("Capture"),r=h.slice(2,v?h.length-7:void 0),E=a[ui]||null,E=E!=null?E[h]:null,typeof E=="function"&&a.removeEventListener(r,E,v),typeof d=="function")){typeof E!="function"&&E!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(r,d,v);break t}h in a?a[h]=d:d===!0?a.setAttribute(h,""):Er(a,h,d)}}}function Cs(a,r,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",a),ke("load",a);var d=!1,v=!1,E;for(E in h)if(h.hasOwnProperty(E)){var N=h[E];if(N!=null)switch(E){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:dn(a,r,E,N,h,null)}}v&&dn(a,r,"srcSet",h.srcSet,h,null),d&&dn(a,r,"src",h.src,h,null);return;case"input":ke("invalid",a);var O=E=N=v=null,W=null,ot=null;for(d in h)if(h.hasOwnProperty(d)){var gt=h[d];if(gt!=null)switch(d){case"name":v=gt;break;case"type":N=gt;break;case"checked":W=gt;break;case"defaultChecked":ot=gt;break;case"value":E=gt;break;case"defaultValue":O=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(i(137,r));break;default:dn(a,r,d,gt,h,null)}}ll(a,E,O,W,ot,N,v,!1);return;case"select":ke("invalid",a),d=N=E=null;for(v in h)if(h.hasOwnProperty(v)&&(O=h[v],O!=null))switch(v){case"value":E=O;break;case"defaultValue":N=O;break;case"multiple":d=O;default:dn(a,r,v,O,h,null)}r=E,h=N,a.multiple=!!d,r!=null?Le(a,!!d,r,!1):h!=null&&Le(a,!!d,h,!0);return;case"textarea":ke("invalid",a),E=v=d=null;for(N in h)if(h.hasOwnProperty(N)&&(O=h[N],O!=null))switch(N){case"value":d=O;break;case"defaultValue":v=O;break;case"children":E=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:dn(a,r,N,O,h,null)}Sr(a,d,v,E);return;case"option":for(W in h)h.hasOwnProperty(W)&&(d=h[W],d!=null)&&(W==="selected"?a.selected=d&&typeof d!="function"&&typeof d!="symbol":dn(a,r,W,d,h,null));return;case"dialog":ke("beforetoggle",a),ke("toggle",a),ke("cancel",a),ke("close",a);break;case"iframe":case"object":ke("load",a);break;case"video":case"audio":for(d=0;d<ka.length;d++)ke(ka[d],a);break;case"image":ke("error",a),ke("load",a);break;case"details":ke("toggle",a);break;case"embed":case"source":case"link":ke("error",a),ke("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ot in h)if(h.hasOwnProperty(ot)&&(d=h[ot],d!=null))switch(ot){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:dn(a,r,ot,d,h,null)}return;default:if(Qu(r)){for(gt in h)h.hasOwnProperty(gt)&&(d=h[gt],d!==void 0&&xv(a,r,gt,d,h,void 0));return}}for(O in h)h.hasOwnProperty(O)&&(d=h[O],d!=null&&dn(a,r,O,d,h,null))}function W8(a,r,h,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,E=null,N=null,O=null,W=null,ot=null,gt=null;for(pt in h){var St=h[pt];if(h.hasOwnProperty(pt)&&St!=null)switch(pt){case"checked":break;case"value":break;case"defaultValue":W=St;default:d.hasOwnProperty(pt)||dn(a,r,pt,null,d,St)}}for(var ct in d){var pt=d[ct];if(St=h[ct],d.hasOwnProperty(ct)&&(pt!=null||St!=null))switch(ct){case"type":E=pt;break;case"name":v=pt;break;case"checked":ot=pt;break;case"defaultChecked":gt=pt;break;case"value":N=pt;break;case"defaultValue":O=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(i(137,r));break;default:pt!==St&&dn(a,r,ct,pt,d,St)}}Za(a,N,O,W,ot,gt,E,v);return;case"select":pt=N=O=ct=null;for(E in h)if(W=h[E],h.hasOwnProperty(E)&&W!=null)switch(E){case"value":break;case"multiple":pt=W;default:d.hasOwnProperty(E)||dn(a,r,E,null,d,W)}for(v in d)if(E=d[v],W=h[v],d.hasOwnProperty(v)&&(E!=null||W!=null))switch(v){case"value":ct=E;break;case"defaultValue":O=E;break;case"multiple":N=E;default:E!==W&&dn(a,r,v,E,d,W)}r=O,h=N,d=pt,ct!=null?Le(a,!!h,ct,!1):!!d!=!!h&&(r!=null?Le(a,!!h,r,!0):Le(a,!!h,h?[]:"",!1));return;case"textarea":pt=ct=null;for(O in h)if(v=h[O],h.hasOwnProperty(O)&&v!=null&&!d.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:dn(a,r,O,null,d,v)}for(N in d)if(v=d[N],E=h[N],d.hasOwnProperty(N)&&(v!=null||E!=null))switch(N){case"value":ct=v;break;case"defaultValue":pt=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==E&&dn(a,r,N,v,d,E)}ol(a,ct,pt);return;case"option":for(var Ht in h)ct=h[Ht],h.hasOwnProperty(Ht)&&ct!=null&&!d.hasOwnProperty(Ht)&&(Ht==="selected"?a.selected=!1:dn(a,r,Ht,null,d,ct));for(W in d)ct=d[W],pt=h[W],d.hasOwnProperty(W)&&ct!==pt&&(ct!=null||pt!=null)&&(W==="selected"?a.selected=ct&&typeof ct!="function"&&typeof ct!="symbol":dn(a,r,W,ct,d,pt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ie in h)ct=h[ie],h.hasOwnProperty(ie)&&ct!=null&&!d.hasOwnProperty(ie)&&dn(a,r,ie,null,d,ct);for(ot in d)if(ct=d[ot],pt=h[ot],d.hasOwnProperty(ot)&&ct!==pt&&(ct!=null||pt!=null))switch(ot){case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(i(137,r));break;default:dn(a,r,ot,ct,d,pt)}return;default:if(Qu(r)){for(var mn in h)ct=h[mn],h.hasOwnProperty(mn)&&ct!==void 0&&!d.hasOwnProperty(mn)&&xv(a,r,mn,void 0,d,ct);for(gt in d)ct=d[gt],pt=h[gt],!d.hasOwnProperty(gt)||ct===pt||ct===void 0&&pt===void 0||xv(a,r,gt,ct,d,pt);return}}for(var nt in h)ct=h[nt],h.hasOwnProperty(nt)&&ct!=null&&!d.hasOwnProperty(nt)&&dn(a,r,nt,null,d,ct);for(St in d)ct=d[St],pt=h[St],!d.hasOwnProperty(St)||ct===pt||ct==null&&pt==null||dn(a,r,St,ct,d,pt)}function KS(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function J8(){if(typeof performance.getEntriesByType=="function"){for(var a=0,r=0,h=performance.getEntriesByType("resource"),d=0;d<h.length;d++){var v=h[d],E=v.transferSize,N=v.initiatorType,O=v.duration;if(E&&O&&KS(N)){for(N=0,O=v.responseEnd,d+=1;d<h.length;d++){var W=h[d],ot=W.startTime;if(ot>O)break;var gt=W.transferSize,St=W.initiatorType;gt&&KS(St)&&(W=W.responseEnd,N+=gt*(W<O?1:(O-ot)/(W-ot)))}if(--d,r+=8*(E+N)/(v.duration/1e3),a++,10<a)break}}if(0<a)return r/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Nv=null,Dv=null;function H_(a){return a.nodeType===9?a:a.ownerDocument}function WS(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function JS(a,r){if(a===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&r==="foreignObject"?0:a}function Iv(a,r){return a==="textarea"||a==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ov=null;function Z8(){var a=window.event;return a&&a.type==="popstate"?a===Ov?!1:(Ov=a,!0):(Ov=null,!1)}var ZS=typeof setTimeout=="function"?setTimeout:void 0,$8=typeof clearTimeout=="function"?clearTimeout:void 0,$S=typeof Promise=="function"?Promise:void 0,tR=typeof queueMicrotask=="function"?queueMicrotask:typeof $S<"u"?function(a){return $S.resolve(null).then(a).catch(eR)}:ZS;function eR(a){setTimeout(function(){throw a})}function Oc(a){return a==="head"}function t4(a,r){var h=r,d=0;do{var v=h.nextSibling;if(a.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"||h==="/&"){if(d===0){a.removeChild(v),Fd(r);return}d--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")d++;else if(h==="html")Wp(a.ownerDocument.documentElement);else if(h==="head"){h=a.ownerDocument.head,Wp(h);for(var E=h.firstChild;E;){var N=E.nextSibling,O=E.nodeName;E[Xs]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&E.rel.toLowerCase()==="stylesheet"||h.removeChild(E),E=N}}else h==="body"&&Wp(a.ownerDocument.body);h=v}while(h);Fd(r)}function e4(a,r){var h=a;a=0;do{var d=h.nextSibling;if(h.nodeType===1?r?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(r?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),d&&d.nodeType===8)if(h=d.data,h==="/$"){if(a===0)break;a--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||a++;h=d}while(h)}function Mv(a){var r=a.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var h=r;switch(r=r.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Mv(h),Ja(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function nR(a,r,h,d){for(;a.nodeType===1;){var v=h;if(a.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Xs])switch(r){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(E=a.getAttribute("rel"),E==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(E!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(E=a.getAttribute("src"),(E!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&E&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(r==="input"&&a.type==="hidden"){var E=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===E)return a}else return a;if(a=Wr(a.nextSibling),a===null)break}return null}function iR(a,r,h){if(r==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=Wr(a.nextSibling),a===null))return null;return a}function n4(a,r){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!r||(a=Wr(a.nextSibling),a===null))return null;return a}function Lv(a){return a.data==="$?"||a.data==="$~"}function Vv(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function sR(a,r){var h=a.ownerDocument;if(a.data==="$~")a._reactRetry=r;else if(a.data!=="$?"||h.readyState!=="loading")r();else{var d=function(){r(),h.removeEventListener("DOMContentLoaded",d)};h.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function Wr(a){for(;a!=null;a=a.nextSibling){var r=a.nodeType;if(r===1||r===3)break;if(r===8){if(r=a.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return a}var kv=null;function i4(a){a=a.nextSibling;for(var r=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"||h==="/&"){if(r===0)return Wr(a.nextSibling);r--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||r++}a=a.nextSibling}return null}function s4(a){a=a.previousSibling;for(var r=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(r===0)return a;r--}else h!=="/$"&&h!=="/&"||r++}a=a.previousSibling}return null}function a4(a,r,h){switch(r=H_(h),a){case"html":if(a=r.documentElement,!a)throw Error(i(452));return a;case"head":if(a=r.head,!a)throw Error(i(453));return a;case"body":if(a=r.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function Wp(a){for(var r=a.attributes;r.length;)a.removeAttributeNode(r[0]);Ja(a)}var Jr=new Map,r4=new Set;function q_(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var yu=Tt.d;Tt.d={f:aR,r:rR,D:lR,C:oR,L:uR,m:cR,X:fR,S:hR,M:dR};function aR(){var a=yu.f(),r=lr();return a||r}function rR(a){var r=vr(a);r!==null&&r.tag===5&&r.type==="form"?R_(r):yu.r(a)}var Gd=typeof document>"u"?null:document;function l4(a,r,h){var d=Gd;if(d&&typeof r=="string"&&r){var v=un(r);v='link[rel="'+a+'"][href="'+v+'"]',typeof h=="string"&&(v+='[crossorigin="'+h+'"]'),r4.has(v)||(r4.add(v),a={rel:a,crossOrigin:h,href:r},d.querySelector(v)===null&&(r=d.createElement("link"),Cs(r,"link",a),In(r),d.head.appendChild(r)))}}function lR(a){yu.D(a),l4("dns-prefetch",a,null)}function oR(a,r){yu.C(a,r),l4("preconnect",a,r)}function uR(a,r,h){yu.L(a,r,h);var d=Gd;if(d&&a&&r){var v='link[rel="preload"][as="'+un(r)+'"]';r==="image"&&h&&h.imageSrcSet?(v+='[imagesrcset="'+un(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(v+='[imagesizes="'+un(h.imageSizes)+'"]')):v+='[href="'+un(a)+'"]';var E=v;switch(r){case"style":E=Hd(a);break;case"script":E=qd(a)}Jr.has(E)||(a=S({rel:"preload",href:r==="image"&&h&&h.imageSrcSet?void 0:a,as:r},h),Jr.set(E,a),d.querySelector(v)!==null||r==="style"&&d.querySelector(Jp(E))||r==="script"&&d.querySelector(Zp(E))||(r=d.createElement("link"),Cs(r,"link",a),In(r),d.head.appendChild(r)))}}function cR(a,r){yu.m(a,r);var h=Gd;if(h&&a){var d=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+un(d)+'"][href="'+un(a)+'"]',E=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=qd(a)}if(!Jr.has(E)&&(a=S({rel:"modulepreload",href:a},r),Jr.set(E,a),h.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Zp(E)))return}d=h.createElement("link"),Cs(d,"link",a),In(d),h.head.appendChild(d)}}}function hR(a,r,h){yu.S(a,r,h);var d=Gd;if(d&&a){var v=Ks(d).hoistableStyles,E=Hd(a);r=r||"default";var N=v.get(E);if(!N){var O={loading:0,preload:null};if(N=d.querySelector(Jp(E)))O.loading=5;else{a=S({rel:"stylesheet",href:a,"data-precedence":r},h),(h=Jr.get(E))&&Pv(a,h);var W=N=d.createElement("link");In(W),Cs(W,"link",a),W._p=new Promise(function(ot,gt){W.onload=ot,W.onerror=gt}),W.addEventListener("load",function(){O.loading|=1}),W.addEventListener("error",function(){O.loading|=2}),O.loading|=4,F_(N,r,d)}N={type:"stylesheet",instance:N,count:1,state:O},v.set(E,N)}}}function fR(a,r){yu.X(a,r);var h=Gd;if(h&&a){var d=Ks(h).hoistableScripts,v=qd(a),E=d.get(v);E||(E=h.querySelector(Zp(v)),E||(a=S({src:a,async:!0},r),(r=Jr.get(v))&&Uv(a,r),E=h.createElement("script"),In(E),Cs(E,"link",a),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},d.set(v,E))}}function dR(a,r){yu.M(a,r);var h=Gd;if(h&&a){var d=Ks(h).hoistableScripts,v=qd(a),E=d.get(v);E||(E=h.querySelector(Zp(v)),E||(a=S({src:a,async:!0,type:"module"},r),(r=Jr.get(v))&&Uv(a,r),E=h.createElement("script"),In(E),Cs(E,"link",a),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},d.set(v,E))}}function o4(a,r,h,d){var v=(v=te.current)?q_(v):null;if(!v)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(r=Hd(h.href),h=Ks(v).hoistableStyles,d=h.get(r),d||(d={type:"style",instance:null,count:0,state:null},h.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=Hd(h.href);var E=Ks(v).hoistableStyles,N=E.get(a);if(N||(v=v.ownerDocument||v,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(a,N),(E=v.querySelector(Jp(a)))&&!E._p&&(N.instance=E,N.state.loading=5),Jr.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Jr.set(a,h),E||mR(v,a,h,N.state))),r&&d===null)throw Error(i(528,""));return N}if(r&&d!==null)throw Error(i(529,""));return null;case"script":return r=h.async,h=h.src,typeof h=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=qd(h),h=Ks(v).hoistableScripts,d=h.get(r),d||(d={type:"script",instance:null,count:0,state:null},h.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function Hd(a){return'href="'+un(a)+'"'}function Jp(a){return'link[rel="stylesheet"]['+a+"]"}function u4(a){return S({},a,{"data-precedence":a.precedence,precedence:null})}function mR(a,r,h,d){a.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=a.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Cs(r,"link",h),In(r),a.head.appendChild(r))}function qd(a){return'[src="'+un(a)+'"]'}function Zp(a){return"script[async]"+a}function c4(a,r,h){if(r.count++,r.instance===null)switch(r.type){case"style":var d=a.querySelector('style[data-href~="'+un(h.href)+'"]');if(d)return r.instance=d,In(d),d;var v=S({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),In(d),Cs(d,"style",v),F_(d,h.precedence,a),r.instance=d;case"stylesheet":v=Hd(h.href);var E=a.querySelector(Jp(v));if(E)return r.state.loading|=4,r.instance=E,In(E),E;d=u4(h),(v=Jr.get(v))&&Pv(d,v),E=(a.ownerDocument||a).createElement("link"),In(E);var N=E;return N._p=new Promise(function(O,W){N.onload=O,N.onerror=W}),Cs(E,"link",d),r.state.loading|=4,F_(E,h.precedence,a),r.instance=E;case"script":return E=qd(h.src),(v=a.querySelector(Zp(E)))?(r.instance=v,In(v),v):(d=h,(v=Jr.get(E))&&(d=S({},h),Uv(d,v)),a=a.ownerDocument||a,v=a.createElement("script"),In(v),Cs(v,"link",d),a.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,F_(d,h.precedence,a));return r.instance}function F_(a,r,h){for(var d=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,E=v,N=0;N<d.length;N++){var O=d[N];if(O.dataset.precedence===r)E=O;else if(E!==v)break}E?E.parentNode.insertBefore(a,E.nextSibling):(r=h.nodeType===9?h.head:h,r.insertBefore(a,r.firstChild))}function Pv(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.title==null&&(a.title=r.title)}function Uv(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.integrity==null&&(a.integrity=r.integrity)}var Y_=null;function h4(a,r,h){if(Y_===null){var d=new Map,v=Y_=new Map;v.set(h,d)}else v=Y_,d=v.get(h),d||(d=new Map,v.set(h,d));if(d.has(a))return d;for(d.set(a,null),h=h.getElementsByTagName(a),v=0;v<h.length;v++){var E=h[v];if(!(E[Xs]||E[pn]||a==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var N=E.getAttribute(r)||"";N=a+N;var O=d.get(N);O?O.push(E):d.set(N,[E])}}return d}function f4(a,r,h){a=a.ownerDocument||a,a.head.insertBefore(h,r==="title"?a.querySelector("head > title"):null)}function pR(a,r,h){if(h===1||r.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(a=r.disabled,typeof r.precedence=="string"&&a==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function d4(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function gR(a,r,h,d){if(h.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var v=Hd(d.href),E=r.querySelector(Jp(v));if(E){r=E._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(a.count++,a=Q_.bind(a),r.then(a,a)),h.state.loading|=4,h.instance=E,In(E);return}E=r.ownerDocument||r,d=u4(d),(v=Jr.get(v))&&Pv(d,v),E=E.createElement("link"),In(E);var N=E;N._p=new Promise(function(O,W){N.onload=O,N.onerror=W}),Cs(E,"link",d),h.instance=E}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(h,r),(r=h.state.preload)&&(h.state.loading&3)===0&&(a.count++,h=Q_.bind(a),r.addEventListener("load",h),r.addEventListener("error",h))}}var zv=0;function _R(a,r){return a.stylesheets&&a.count===0&&K_(a,a.stylesheets),0<a.count||0<a.imgCount?function(h){var d=setTimeout(function(){if(a.stylesheets&&K_(a,a.stylesheets),a.unsuspend){var E=a.unsuspend;a.unsuspend=null,E()}},6e4+r);0<a.imgBytes&&zv===0&&(zv=62500*J8());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&K_(a,a.stylesheets),a.unsuspend)){var E=a.unsuspend;a.unsuspend=null,E()}},(a.imgBytes>zv?50:800)+r);return a.unsuspend=h,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function Q_(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)K_(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var X_=null;function K_(a,r){a.stylesheets=null,a.unsuspend!==null&&(a.count++,X_=new Map,r.forEach(yR,a),X_=null,Q_.call(a))}function yR(a,r){if(!(r.state.loading&4)){var h=X_.get(a);if(h)var d=h.get(null);else{h=new Map,X_.set(a,h);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<v.length;E++){var N=v[E];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(h.set(N.dataset.precedence,N),d=N)}d&&h.set(null,d)}v=r.instance,N=v.getAttribute("data-precedence"),E=h.get(N)||d,E===d&&h.set(null,v),h.set(N,v),this.count++,d=Q_.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),E?E.parentNode.insertBefore(v,E.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),r.state.loading|=4}}var $p={$$typeof:Y,Provider:null,Consumer:null,_currentValue:Et,_currentValue2:Et,_threadCount:0};function vR(a,r,h,d,v,E,N,O,W){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gr(0),this.hiddenUpdates=gr(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=E,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function m4(a,r,h,d,v,E,N,O,W,ot,gt,St){return a=new vR(a,r,h,N,W,ot,gt,St,O),r=1,E===!0&&(r|=24),E=On(3,null,null,r),a.current=E,E.stateNode=a,r=ip(),r.refCount++,a.pooledCache=r,r.refCount++,E.memoizedState={element:d,isDehydrated:h,cache:r},Zh(E),a}function p4(a){return a?(a=so,a):so}function g4(a,r,h,d,v,E){v=p4(v),d.context===null?d.context=v:d.pendingContext=v,d=Sl(r),d.payload={element:h},E=E===void 0?null:E,E!==null&&(d.callback=E),h=fo(a,d,r),h!==null&&(ve(h,a,r),mo(h,a,r))}function _4(a,r){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<r?h:r}}function Bv(a,r){_4(a,r),(a=a.alternate)&&_4(a,r)}function y4(a){if(a.tag===13||a.tag===31){var r=_s(a,67108864);r!==null&&ve(r,a,67108864),Bv(a,67108864)}}function v4(a){if(a.tag===13||a.tag===31){var r=oa();r=Xl(r);var h=_s(a,r);h!==null&&ve(h,a,r),Bv(a,r)}}var W_=!0;function AR(a,r,h,d){var v=$.T;$.T=null;var E=Tt.p;try{Tt.p=2,jv(a,r,h,d)}finally{Tt.p=E,$.T=v}}function ER(a,r,h,d){var v=$.T;$.T=null;var E=Tt.p;try{Tt.p=8,jv(a,r,h,d)}finally{Tt.p=E,$.T=v}}function jv(a,r,h,d){if(W_){var v=Gv(d);if(v===null)wv(a,r,d,J_,h),E4(a,d);else if(TR(v,a,r,h,d))d.stopPropagation();else if(E4(a,d),r&4&&-1<SR.indexOf(a)){for(;v!==null;){var E=vr(v);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var N=da(E.pendingLanes);if(N!==0){var O=E;for(O.pendingLanes|=2,O.entangledLanes|=2;N;){var W=1<<31-ni(N);O.entanglements[1]|=W,N&=~W}wt(E),(Xt&6)===0&&(Jn=jn()+500,zt(0))}}break;case 31:case 13:O=_s(E,2),O!==null&&ve(O,E,2),lr(),Bv(E,2)}if(E=Gv(d),E===null&&wv(a,r,d,J_,h),E===v)break;v=E}v!==null&&d.stopPropagation()}else wv(a,r,d,null,h)}}function Gv(a){return a=Ho(a),Hv(a)}var J_=null;function Hv(a){if(J_=null,a=yr(a),a!==null){var r=l(a);if(r===null)a=null;else{var h=r.tag;if(h===13){if(a=c(r),a!==null)return a;a=null}else if(h===31){if(a=f(r),a!==null)return a;a=null}else if(h===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;a=null}else r!==a&&(a=null)}}return J_=a,null}function A4(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zo()){case Dn:return 2;case rn:return 8;case Fi:case os:return 32;case ca:return 268435456;default:return 32}default:return 32}}var qv=!1,Mc=null,Lc=null,Vc=null,tg=new Map,eg=new Map,kc=[],SR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function E4(a,r){switch(a){case"focusin":case"focusout":Mc=null;break;case"dragenter":case"dragleave":Lc=null;break;case"mouseover":case"mouseout":Vc=null;break;case"pointerover":case"pointerout":tg.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":eg.delete(r.pointerId)}}function ng(a,r,h,d,v,E){return a===null||a.nativeEvent!==E?(a={blockedOn:r,domEventName:h,eventSystemFlags:d,nativeEvent:E,targetContainers:[v]},r!==null&&(r=vr(r),r!==null&&y4(r)),a):(a.eventSystemFlags|=d,r=a.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),a)}function TR(a,r,h,d,v){switch(r){case"focusin":return Mc=ng(Mc,a,r,h,d,v),!0;case"dragenter":return Lc=ng(Lc,a,r,h,d,v),!0;case"mouseover":return Vc=ng(Vc,a,r,h,d,v),!0;case"pointerover":var E=v.pointerId;return tg.set(E,ng(tg.get(E)||null,a,r,h,d,v)),!0;case"gotpointercapture":return E=v.pointerId,eg.set(E,ng(eg.get(E)||null,a,r,h,d,v)),!0}return!1}function S4(a){var r=yr(a.target);if(r!==null){var h=l(r);if(h!==null){if(r=h.tag,r===13){if(r=c(h),r!==null){a.blockedOn=r,_r(a.priority,function(){v4(h)});return}}else if(r===31){if(r=f(h),r!==null){a.blockedOn=r,_r(a.priority,function(){v4(h)});return}}else if(r===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Z_(a){if(a.blockedOn!==null)return!1;for(var r=a.targetContainers;0<r.length;){var h=Gv(a.nativeEvent);if(h===null){h=a.nativeEvent;var d=new h.constructor(h.type,h);Go=d,h.target.dispatchEvent(d),Go=null}else return r=vr(h),r!==null&&y4(r),a.blockedOn=h,!1;r.shift()}return!0}function T4(a,r,h){Z_(a)&&h.delete(r)}function bR(){qv=!1,Mc!==null&&Z_(Mc)&&(Mc=null),Lc!==null&&Z_(Lc)&&(Lc=null),Vc!==null&&Z_(Vc)&&(Vc=null),tg.forEach(T4),eg.forEach(T4)}function $_(a,r){a.blockedOn===r&&(a.blockedOn=null,qv||(qv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,bR)))}var ty=null;function b4(a){ty!==a&&(ty=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ty===a&&(ty=null);for(var r=0;r<a.length;r+=3){var h=a[r],d=a[r+1],v=a[r+2];if(typeof d!="function"){if(Hv(d||h)===null)continue;break}var E=vr(h);E!==null&&(a.splice(r,3),r-=3,Dp(E,{pending:!0,data:v,method:h.method,action:d},d,v))}}))}function Fd(a){function r(W){return $_(W,a)}Mc!==null&&$_(Mc,a),Lc!==null&&$_(Lc,a),Vc!==null&&$_(Vc,a),tg.forEach(r),eg.forEach(r);for(var h=0;h<kc.length;h++){var d=kc[h];d.blockedOn===a&&(d.blockedOn=null)}for(;0<kc.length&&(h=kc[0],h.blockedOn===null);)S4(h),h.blockedOn===null&&kc.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(d=0;d<h.length;d+=3){var v=h[d],E=h[d+1],N=v[ui]||null;if(typeof E=="function")N||b4(h);else if(N){var O=null;if(E&&E.hasAttribute("formAction")){if(v=E,N=E[ui]||null)O=N.formAction;else if(Hv(v)!==null)continue}else O=N.action;typeof O=="function"?h[d+1]=O:(h.splice(d,3),d-=3),b4(h)}}}function C4(){function a(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(N){return v=N})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),d||setTimeout(h,20)}function h(){if(!d&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(h,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function Fv(a){this._internalRoot=a}ey.prototype.render=Fv.prototype.render=function(a){var r=this._internalRoot;if(r===null)throw Error(i(409));var h=r.current,d=oa();g4(h,d,a,r,null,null)},ey.prototype.unmount=Fv.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var r=a.containerInfo;g4(a.current,2,null,a,null,null),lr(),r[ma]=null}};function ey(a){this._internalRoot=a}ey.prototype.unstable_scheduleHydration=function(a){if(a){var r=Ka();a={blockedOn:null,target:a,priority:r};for(var h=0;h<kc.length&&r!==0&&r<kc[h].priority;h++);kc.splice(h,0,a),h===0&&S4(a)}};var R4=t.version;if(R4!=="19.2.4")throw Error(i(527,R4,"19.2.4"));Tt.findDOMNode=function(a){var r=a._reactInternals;if(r===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=g(r),a=a!==null?A(a):null,a=a===null?null:a.stateNode,a};var CR={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ny.isDisabled&&ny.supportsFiber)try{Kt=ny.inject(CR),ne=ny}catch{}}return sg.createRoot=function(a,r){if(!s(a))throw Error(i(299));var h=!1,d="",v=M_,E=kp,N=Pp;return r!=null&&(r.unstable_strictMode===!0&&(h=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(E=r.onCaughtError),r.onRecoverableError!==void 0&&(N=r.onRecoverableError)),r=m4(a,1,!1,null,null,h,d,null,v,E,N,C4),a[ma]=r.current,Rv(a),new Fv(r)},sg.hydrateRoot=function(a,r,h){if(!s(a))throw Error(i(299));var d=!1,v="",E=M_,N=kp,O=Pp,W=null;return h!=null&&(h.unstable_strictMode===!0&&(d=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(N=h.onCaughtError),h.onRecoverableError!==void 0&&(O=h.onRecoverableError),h.formState!==void 0&&(W=h.formState)),r=m4(a,1,!0,r,h??null,d,v,W,E,N,O,C4),r.context=p4(null),h=r.current,d=oa(),d=Xl(d),v=Sl(d),v.callback=null,fo(h,v,d),h=d,r.current.lanes=h,il(r,h),wt(r),a[ma]=r.current,Rv(a),new ey(r)},sg.version="19.2.4",sg}var k4;function LR(){if(k4)return Xv.exports;k4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Xv.exports=MR(),Xv.exports}var VR=LR();var P4="popstate";function kR(n={}){function t(i,s){let{pathname:l,search:c,hash:f}=i.location;return z2("",{pathname:l,search:c,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(i,s){return typeof s=="string"?s:qg(s)}return UR(t,e,null,n)}function Yn(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function zl(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function PR(){return Math.random().toString(36).substring(2,10)}function U4(n,t){return{usr:n.state,key:n.key,idx:t}}function z2(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?Nm(t):t,state:e,key:t&&t.key||i||PR()}}function qg({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function Nm(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function UR(n,t,e,i={}){let{window:s=document.defaultView,v5Compat:l=!1}=i,c=s.history,f="POP",m=null,g=A();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function A(){return(c.state||{idx:null}).idx}function S(){f="POP";let V=A(),G=V==null?null:V-g;g=V,m&&m({action:f,location:L.location,delta:G})}function T(V,G){f="PUSH";let B=z2(L.location,V,G);g=A()+1;let Y=U4(B,g),et=L.createHref(B);try{c.pushState(Y,"",et)}catch(at){if(at instanceof DOMException&&at.name==="DataCloneError")throw at;s.location.assign(et)}l&&m&&m({action:f,location:L.location,delta:1})}function x(V,G){f="REPLACE";let B=z2(L.location,V,G);g=A();let Y=U4(B,g),et=L.createHref(B);c.replaceState(Y,"",et),l&&m&&m({action:f,location:L.location,delta:0})}function w(V){return zR(V)}let L={get action(){return f},get location(){return n(s,c)},listen(V){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(P4,S),m=V,()=>{s.removeEventListener(P4,S),m=null}},createHref(V){return t(s,V)},createURL:w,encodeLocation(V){let G=w(V);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:T,replace:x,go(V){return c.go(V)}};return L}function zR(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Yn(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:qg(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function Fb(n,t,e="/"){return BR(n,t,e,!1)}function BR(n,t,e,i){let s=typeof t=="string"?Nm(t):t,l=Iu(s.pathname||"/",e);if(l==null)return null;let c=Yb(n);jR(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let g=ZR(l);f=WR(c[m],g,i)}return f}function Yb(n,t=[],e=[],i="",s=!1){let l=(c,f,m=s,g)=>{let A={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(i)&&m)return;Yn(A.relativePath.startsWith(i),`Absolute route path "${A.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(i.length)}let S=Ru([i,A.relativePath]),T=e.concat(A);c.children&&c.children.length>0&&(Yn(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),Yb(c.children,t,T,S,m)),!(c.path==null&&!c.index)&&t.push({path:S,score:XR(S,c.index),routesMeta:T})};return n.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let m of Qb(c.path))l(c,f,!0,m)}),t}function Qb(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,s=e.endsWith("?"),l=e.replace(/\?$/,"");if(i.length===0)return s?[l,""]:[l];let c=Qb(i.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),s&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function jR(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:KR(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var GR=/^:[\w-]+$/,HR=3,qR=2,FR=1,YR=10,QR=-2,z4=n=>n==="*";function XR(n,t){let e=n.split("/"),i=e.length;return e.some(z4)&&(i+=QR),t&&(i+=qR),e.filter(s=>!z4(s)).reduce((s,l)=>s+(GR.test(l)?HR:l===""?FR:YR),i)}function KR(n,t){return n.length===t.length&&n.slice(0,-1).every((i,s)=>i===t[s])?n[n.length-1]-t[t.length-1]:0}function WR(n,t,e=!1){let{routesMeta:i}=n,s={},l="/",c=[];for(let f=0;f<i.length;++f){let m=i[f],g=f===i.length-1,A=l==="/"?t:t.slice(l.length)||"/",S=Py({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},A),T=m.route;if(!S&&g&&e&&!i[i.length-1].route.index&&(S=Py({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},A)),!S)return null;Object.assign(s,S.params),c.push({params:s,pathname:Ru([l,S.pathname]),pathnameBase:nw(Ru([l,S.pathnameBase])),route:T}),S.pathnameBase!=="/"&&(l=Ru([l,S.pathnameBase]))}return c}function Py(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=JR(n.path,n.caseSensitive,n.end),s=t.match(e);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:i.reduce((g,{paramName:A,isOptional:S},T)=>{if(A==="*"){let w=f[T]||"";c=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const x=f[T];return S&&!x?g[A]=void 0:g[A]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function JR(n,t=!1,e=!0){zl(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function ZR(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return zl(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function Iu(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}var $R=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function tw(n,t="/"){let{pathname:e,search:i="",hash:s=""}=typeof n=="string"?Nm(n):n,l;return e?(e=e.replace(/\/\/+/g,"/"),e.startsWith("/")?l=B4(e.substring(1),"/"):l=B4(e,t)):l=t,{pathname:l,search:iw(i),hash:sw(s)}}function B4(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function Zv(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ew(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function qA(n){let t=ew(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function FA(n,t,e,i=!1){let s;typeof n=="string"?s=Nm(n):(s={...n},Yn(!s.pathname||!s.pathname.includes("?"),Zv("?","pathname","search",s)),Yn(!s.pathname||!s.pathname.includes("#"),Zv("#","pathname","hash",s)),Yn(!s.search||!s.search.includes("#"),Zv("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,f;if(c==null)f=e;else{let S=t.length-1;if(!i&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),S-=1;s.pathname=T.join("/")}f=S>=0?t[S]:"/"}let m=tw(s,f),g=c&&c!=="/"&&c.endsWith("/"),A=(l||c===".")&&e.endsWith("/");return!m.pathname.endsWith("/")&&(g||A)&&(m.pathname+="/"),m}var Ru=n=>n.join("/").replace(/\/\/+/g,"/"),nw=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),iw=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,sw=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,aw=class{constructor(n,t,e,i=!1){this.status=n,this.statusText=t||"",this.internal=i,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function rw(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function lw(n){return n.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Xb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Kb(n,t){let e=n;if(typeof e!="string"||!$R.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let i=e,s=!1;if(Xb)try{let l=new URL(window.location.href),c=e.startsWith("//")?new URL(l.protocol+e):new URL(e),f=Iu(c.pathname,t);c.origin===l.origin&&f!=null?e=f+c.search+c.hash:s=!0}catch{zl(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:s,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Wb=["POST","PUT","PATCH","DELETE"];new Set(Wb);var ow=["GET",...Wb];new Set(ow);var Dm=j.createContext(null);Dm.displayName="DataRouter";var C1=j.createContext(null);C1.displayName="DataRouterState";var uw=j.createContext(!1),Jb=j.createContext({isTransitioning:!1});Jb.displayName="ViewTransition";var cw=j.createContext(new Map);cw.displayName="Fetchers";var hw=j.createContext(null);hw.displayName="Await";var dr=j.createContext(null);dr.displayName="Navigation";var h0=j.createContext(null);h0.displayName="Location";var Gl=j.createContext({outlet:null,matches:[],isDataRoute:!1});Gl.displayName="Route";var YA=j.createContext(null);YA.displayName="RouteError";var Zb="REACT_ROUTER_ERROR",fw="REDIRECT",dw="ROUTE_ERROR_RESPONSE";function mw(n){if(n.startsWith(`${Zb}:${fw}:{`))try{let t=JSON.parse(n.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function pw(n){if(n.startsWith(`${Zb}:${dw}:{`))try{let t=JSON.parse(n.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new aw(t.status,t.statusText,t.data)}catch{}}function gw(n,{relative:t}={}){Yn(Im(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=j.useContext(dr),{hash:s,pathname:l,search:c}=f0(n,{relative:t}),f=l;return e!=="/"&&(f=l==="/"?e:Ru([e,l])),i.createHref({pathname:f,search:c,hash:s})}function Im(){return j.useContext(h0)!=null}function hh(){return Yn(Im(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(h0).location}var $b="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tC(n){j.useContext(dr).static||j.useLayoutEffect(n)}function kf(){let{isDataRoute:n}=j.useContext(Gl);return n?Dw():_w()}function _w(){Yn(Im(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(Dm),{basename:t,navigator:e}=j.useContext(dr),{matches:i}=j.useContext(Gl),{pathname:s}=hh(),l=JSON.stringify(qA(i)),c=j.useRef(!1);return tC(()=>{c.current=!0}),j.useCallback((m,g={})=>{if(zl(c.current,$b),!c.current)return;if(typeof m=="number"){e.go(m);return}let A=FA(m,JSON.parse(l),s,g.relative==="path");n==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:Ru([t,A.pathname])),(g.replace?e.replace:e.push)(A,g.state,g)},[t,e,l,s,n])}j.createContext(null);function yw(){let{matches:n}=j.useContext(Gl),t=n[n.length-1];return t?t.params:{}}function f0(n,{relative:t}={}){let{matches:e}=j.useContext(Gl),{pathname:i}=hh(),s=JSON.stringify(qA(e));return j.useMemo(()=>FA(n,JSON.parse(s),i,t==="path"),[n,s,i,t])}function vw(n,t){return eC(n,t)}function eC(n,t,e,i,s){Yn(Im(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=j.useContext(dr),{matches:c}=j.useContext(Gl),f=c[c.length-1],m=f?f.params:{},g=f?f.pathname:"/",A=f?f.pathnameBase:"/",S=f&&f.route;{let B=S&&S.path||"";iC(g,!S||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let T=hh(),x;if(t){let B=typeof t=="string"?Nm(t):t;Yn(A==="/"||B.pathname?.startsWith(A),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${B.pathname}" was given in the \`location\` prop.`),x=B}else x=T;let w=x.pathname||"/",L=w;if(A!=="/"){let B=A.replace(/^\//,"").split("/");L="/"+w.replace(/^\//,"").split("/").slice(B.length).join("/")}let V=Fb(n,{pathname:L});zl(S||V!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),zl(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=bw(V&&V.map(B=>Object.assign({},B,{params:Object.assign({},m,B.params),pathname:Ru([A,l.encodeLocation?l.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?A:Ru([A,l.encodeLocation?l.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),c,e,i,s);return t&&G?j.createElement(h0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},G):G}function Aw(){let n=Nw(),t=rw(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:l},"ErrorBoundary")," or"," ",j.createElement("code",{style:l},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),e?j.createElement("pre",{style:s},e):null,c)}var Ew=j.createElement(Aw,null),nC=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.onError?this.props.onError(n,t):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const e=pw(n.digest);e&&(n=e)}let t=n!==void 0?j.createElement(Gl.Provider,{value:this.props.routeContext},j.createElement(YA.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?j.createElement(Sw,{error:n},t):t}};nC.contextType=uw;var $v=new WeakMap;function Sw({children:n,error:t}){let{basename:e}=j.useContext(dr);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let i=mw(t.digest);if(i){let s=$v.get(t);if(s)throw s;let l=Kb(i.location,e);if(Xb&&!$v.get(t))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw $v.set(t,c),c}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function Tw({routeContext:n,match:t,children:e}){let i=j.useContext(Dm);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(Gl.Provider,{value:n},e)}function bw(n,t=[],e=null,i=null,s=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let l=n,c=e?.errors;if(c!=null){let A=l.findIndex(S=>S.route.id&&c?.[S.route.id]!==void 0);Yn(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,A+1))}let f=!1,m=-1;if(e)for(let A=0;A<l.length;A++){let S=l[A];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(m=A),S.route.id){let{loaderData:T,errors:x}=e,w=S.route.loader&&!T.hasOwnProperty(S.route.id)&&(!x||x[S.route.id]===void 0);if(S.route.lazy||w){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let g=e&&i?(A,S)=>{i(A,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:lw(e.matches),errorInfo:S})}:void 0;return l.reduceRight((A,S,T)=>{let x,w=!1,L=null,V=null;e&&(x=c&&S.route.id?c[S.route.id]:void 0,L=S.route.errorElement||Ew,f&&(m<0&&T===0?(iC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,V=null):m===T&&(w=!0,V=S.route.hydrateFallbackElement||null)));let G=t.concat(l.slice(0,T+1)),B=()=>{let Y;return x?Y=L:w?Y=V:S.route.Component?Y=j.createElement(S.route.Component,null):S.route.element?Y=S.route.element:Y=A,j.createElement(Tw,{match:S,routeContext:{outlet:A,matches:G,isDataRoute:e!=null},children:Y})};return e&&(S.route.ErrorBoundary||S.route.errorElement||T===0)?j.createElement(nC,{location:e.location,revalidation:e.revalidation,component:L,error:x,children:B(),routeContext:{outlet:null,matches:G,isDataRoute:!0},onError:g}):B()},null)}function QA(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cw(n){let t=j.useContext(Dm);return Yn(t,QA(n)),t}function Rw(n){let t=j.useContext(C1);return Yn(t,QA(n)),t}function ww(n){let t=j.useContext(Gl);return Yn(t,QA(n)),t}function XA(n){let t=ww(n),e=t.matches[t.matches.length-1];return Yn(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function xw(){return XA("useRouteId")}function Nw(){let n=j.useContext(YA),t=Rw("useRouteError"),e=XA("useRouteError");return n!==void 0?n:t.errors?.[e]}function Dw(){let{router:n}=Cw("useNavigate"),t=XA("useNavigate"),e=j.useRef(!1);return tC(()=>{e.current=!0}),j.useCallback(async(s,l={})=>{zl(e.current,$b),e.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:t,...l}))},[n,t])}var j4={};function iC(n,t,e){!t&&!j4[n]&&(j4[n]=!0,zl(!1,e))}j.memo(Iw);function Iw({routes:n,future:t,state:e,onError:i}){return eC(n,void 0,e,i,t)}function sC({to:n,replace:t,state:e,relative:i}){Yn(Im(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=j.useContext(dr);zl(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=j.useContext(Gl),{pathname:c}=hh(),f=kf(),m=FA(n,qA(l),c,i==="path"),g=JSON.stringify(m);return j.useEffect(()=>{f(JSON.parse(g),{replace:t,state:e,relative:i})},[f,g,i,t,e]),null}function Jd(n){Yn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ow({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){Yn(!Im(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),m=j.useMemo(()=>({basename:f,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[f,s,l,c]);typeof e=="string"&&(e=Nm(e));let{pathname:g="/",search:A="",hash:S="",state:T=null,key:x="default"}=e,w=j.useMemo(()=>{let L=Iu(g,f);return L==null?null:{location:{pathname:L,search:A,hash:S,state:T,key:x},navigationType:i}},[f,g,A,S,T,x,i]);return zl(w!=null,`<Router basename="${f}"> is not able to match the URL "${g}${A}${S}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:j.createElement(dr.Provider,{value:m},j.createElement(h0.Provider,{children:t,value:w}))}function Mw({children:n,location:t}){return vw(B2(n),t)}function B2(n,t=[]){let e=[];return j.Children.forEach(n,(i,s)=>{if(!j.isValidElement(i))return;let l=[...t,s];if(i.type===j.Fragment){e.push.apply(e,B2(i.props.children,l));return}Yn(i.type===Jd,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Yn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=B2(i.props.children,l)),e.push(c)}),e}var Ty="get",by="application/x-www-form-urlencoded";function R1(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function Lw(n){return R1(n)&&n.tagName.toLowerCase()==="button"}function Vw(n){return R1(n)&&n.tagName.toLowerCase()==="form"}function kw(n){return R1(n)&&n.tagName.toLowerCase()==="input"}function Pw(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Uw(n,t){return n.button===0&&(!t||t==="_self")&&!Pw(n)}var iy=null;function zw(){if(iy===null)try{new FormData(document.createElement("form"),0),iy=!1}catch{iy=!0}return iy}var Bw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function t2(n){return n!=null&&!Bw.has(n)?(zl(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${by}"`),null):n}function jw(n,t){let e,i,s,l,c;if(Vw(n)){let f=n.getAttribute("action");i=f?Iu(f,t):null,e=n.getAttribute("method")||Ty,s=t2(n.getAttribute("enctype"))||by,l=new FormData(n)}else if(Lw(n)||kw(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?Iu(m,t):null,e=n.getAttribute("formmethod")||f.getAttribute("method")||Ty,s=t2(n.getAttribute("formenctype"))||t2(f.getAttribute("enctype"))||by,l=new FormData(f,n),!zw()){let{name:g,type:A,value:S}=n;if(A==="image"){let T=g?`${g}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else g&&l.append(g,S)}}else{if(R1(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Ty,i=null,s=by,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:i,method:e.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function KA(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Gw(n,t,e,i){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${i}`:s.pathname=`${s.pathname}.${i}`:s.pathname==="/"?s.pathname=`_root.${i}`:t&&Iu(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function Hw(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qw(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Fw(n,t,e){let i=await Promise.all(n.map(async s=>{let l=t.routes[s.route.id];if(l){let c=await Hw(l,e);return c.links?c.links():[]}return[]}));return Kw(i.flat(1).filter(qw).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function G4(n,t,e,i,s,l){let c=(m,g)=>e[g]?m.route.id!==e[g].route.id:!0,f=(m,g)=>e[g].pathname!==m.pathname||e[g].route.path?.endsWith("*")&&e[g].params["*"]!==m.params["*"];return l==="assets"?t.filter((m,g)=>c(m,g)||f(m,g)):l==="data"?t.filter((m,g)=>{let A=i.routes[m.route.id];if(!A||!A.hasLoader)return!1;if(c(m,g)||f(m,g))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function Yw(n,t,{includeHydrateFallback:e}={}){return Qw(n.map(i=>{let s=t.routes[i.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function Qw(n){return[...new Set(n)]}function Xw(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function Kw(n,t){let e=new Set;return new Set(t),n.reduce((i,s)=>{let l=JSON.stringify(Xw(s));return e.has(l)||(e.add(l),i.push({key:l,link:s})),i},[])}function aC(){let n=j.useContext(Dm);return KA(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Ww(){let n=j.useContext(C1);return KA(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var WA=j.createContext(void 0);WA.displayName="FrameworkContext";function rC(){let n=j.useContext(WA);return KA(n,"You must render this element inside a <HydratedRouter> element"),n}function Jw(n,t){let e=j.useContext(WA),[i,s]=j.useState(!1),[l,c]=j.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:g,onMouseLeave:A,onTouchStart:S}=t,T=j.useRef(null);j.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let L=G=>{G.forEach(B=>{c(B.isIntersecting)})},V=new IntersectionObserver(L,{threshold:.5});return T.current&&V.observe(T.current),()=>{V.disconnect()}}},[n]),j.useEffect(()=>{if(i){let L=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(L)}}},[i]);let x=()=>{s(!0)},w=()=>{s(!1),c(!1)};return e?n!=="intent"?[l,T,{}]:[l,T,{onFocus:ag(f,x),onBlur:ag(m,w),onMouseEnter:ag(g,x),onMouseLeave:ag(A,w),onTouchStart:ag(S,x)}]:[!1,T,{}]}function ag(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function Zw({page:n,...t}){let{router:e}=aC(),i=j.useMemo(()=>Fb(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?j.createElement(t7,{page:n,matches:i,...t}):null}function $w(n){let{manifest:t,routeModules:e}=rC(),[i,s]=j.useState([]);return j.useEffect(()=>{let l=!1;return Fw(n,t,e).then(c=>{l||s(c)}),()=>{l=!0}},[n,t,e]),i}function t7({page:n,matches:t,...e}){let i=hh(),{future:s,manifest:l,routeModules:c}=rC(),{basename:f}=aC(),{loaderData:m,matches:g}=Ww(),A=j.useMemo(()=>G4(n,t,g,l,i,"data"),[n,t,g,l,i]),S=j.useMemo(()=>G4(n,t,g,l,i,"assets"),[n,t,g,l,i]),T=j.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let L=new Set,V=!1;if(t.forEach(B=>{let Y=l.routes[B.route.id];!Y||!Y.hasLoader||(!A.some(et=>et.route.id===B.route.id)&&B.route.id in m&&c[B.route.id]?.shouldRevalidate||Y.hasClientLoader?V=!0:L.add(B.route.id))}),L.size===0)return[];let G=Gw(n,f,s.unstable_trailingSlashAwareDataRequests,"data");return V&&L.size>0&&G.searchParams.set("_routes",t.filter(B=>L.has(B.route.id)).map(B=>B.route.id).join(",")),[G.pathname+G.search]},[f,s.unstable_trailingSlashAwareDataRequests,m,i,l,A,t,n,c]),x=j.useMemo(()=>Yw(S,l),[S,l]),w=$w(S);return j.createElement(j.Fragment,null,T.map(L=>j.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...e})),x.map(L=>j.createElement("link",{key:L,rel:"modulepreload",href:L,...e})),w.map(({key:L,link:V})=>j.createElement("link",{key:L,nonce:e.nonce,...V,crossOrigin:V.crossOrigin??e.crossOrigin})))}function e7(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var n7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{n7&&(window.__reactRouterVersion="7.13.0")}catch{}function i7({basename:n,children:t,unstable_useTransitions:e,window:i}){let s=j.useRef();s.current==null&&(s.current=kR({window:i,v5Compat:!0}));let l=s.current,[c,f]=j.useState({action:l.action,location:l.location}),m=j.useCallback(g=>{e===!1?f(g):j.startTransition(()=>f(g))},[e]);return j.useLayoutEffect(()=>l.listen(m),[l,m]),j.createElement(Ow,{basename:n,children:t,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:e})}var lC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JA=j.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:s,reloadDocument:l,replace:c,state:f,target:m,to:g,preventScrollReset:A,viewTransition:S,unstable_defaultShouldRevalidate:T,...x},w){let{basename:L,unstable_useTransitions:V}=j.useContext(dr),G=typeof g=="string"&&lC.test(g),B=Kb(g,L);g=B.to;let Y=gw(g,{relative:s}),[et,at,tt]=Jw(i,x),z=l7(g,{replace:c,state:f,target:m,preventScrollReset:A,relative:s,viewTransition:S,unstable_defaultShouldRevalidate:T,unstable_useTransitions:V});function M(q){t&&t(q),q.defaultPrevented||z(q)}let U=j.createElement("a",{...x,...tt,href:B.absoluteURL||Y,onClick:B.isExternal||l?t:M,ref:e7(w,at),target:m,"data-discover":!G&&e==="render"?"true":void 0});return et&&!G?j.createElement(j.Fragment,null,U,j.createElement(Zw,{page:Y})):U});JA.displayName="Link";var s7=j.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:s=!1,style:l,to:c,viewTransition:f,children:m,...g},A){let S=f0(c,{relative:g.relative}),T=hh(),x=j.useContext(C1),{navigator:w,basename:L}=j.useContext(dr),V=x!=null&&f7(S)&&f===!0,G=w.encodeLocation?w.encodeLocation(S).pathname:S.pathname,B=T.pathname,Y=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;e||(B=B.toLowerCase(),Y=Y?Y.toLowerCase():null,G=G.toLowerCase()),Y&&L&&(Y=Iu(Y,L)||Y);const et=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let at=B===G||!s&&B.startsWith(G)&&B.charAt(et)==="/",tt=Y!=null&&(Y===G||!s&&Y.startsWith(G)&&Y.charAt(G.length)==="/"),z={isActive:at,isPending:tt,isTransitioning:V},M=at?t:void 0,U;typeof i=="function"?U=i(z):U=[i,at?"active":null,tt?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let q=typeof l=="function"?l(z):l;return j.createElement(JA,{...g,"aria-current":M,className:U,ref:A,style:q,to:c,viewTransition:f},typeof m=="function"?m(z):m)});s7.displayName="NavLink";var a7=j.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:s,state:l,method:c=Ty,action:f,onSubmit:m,relative:g,preventScrollReset:A,viewTransition:S,unstable_defaultShouldRevalidate:T,...x},w)=>{let{unstable_useTransitions:L}=j.useContext(dr),V=c7(),G=h7(f,{relative:g}),B=c.toLowerCase()==="get"?"get":"post",Y=typeof f=="string"&&lC.test(f),et=at=>{if(m&&m(at),at.defaultPrevented)return;at.preventDefault();let tt=at.nativeEvent.submitter,z=tt?.getAttribute("formmethod")||c,M=()=>V(tt||at.currentTarget,{fetcherKey:t,method:z,navigate:e,replace:s,state:l,relative:g,preventScrollReset:A,viewTransition:S,unstable_defaultShouldRevalidate:T});L&&e!==!1?j.startTransition(()=>M()):M()};return j.createElement("form",{ref:w,method:B,action:G,onSubmit:i?m:et,...x,"data-discover":!Y&&n==="render"?"true":void 0})});a7.displayName="Form";function r7(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oC(n){let t=j.useContext(Dm);return Yn(t,r7(n)),t}function l7(n,{target:t,replace:e,state:i,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let g=kf(),A=hh(),S=f0(n,{relative:l});return j.useCallback(T=>{if(Uw(T,t)){T.preventDefault();let x=e!==void 0?e:qg(A)===qg(S),w=()=>g(n,{replace:x,state:i,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f});m?j.startTransition(()=>w()):w()}},[A,g,S,e,i,t,n,s,l,c,f,m])}var o7=0,u7=()=>`__${String(++o7)}__`;function c7(){let{router:n}=oC("useSubmit"),{basename:t}=j.useContext(dr),e=xw(),i=n.fetch,s=n.navigate;return j.useCallback(async(l,c={})=>{let{action:f,method:m,encType:g,formData:A,body:S}=jw(l,t);if(c.navigate===!1){let T=c.fetcherKey||u7();await i(T,e,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:A,body:S,formMethod:c.method||m,formEncType:c.encType||g,flushSync:c.flushSync})}else await s(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:A,body:S,formMethod:c.method||m,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:e,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,s,t,e])}function h7(n,{relative:t}={}){let{basename:e}=j.useContext(dr),i=j.useContext(Gl);Yn(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),l={...f0(n||".",{relative:t})},c=hh();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(A=>A==="")){f.delete("index"),m.filter(S=>S).forEach(S=>f.append("index",S));let A=f.toString();l.search=A?`?${A}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:Ru([e,l.pathname])),qg(l)}function f7(n,{relative:t}={}){let e=j.useContext(Jb);Yn(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=oC("useViewTransitionState"),s=f0(n,{relative:t});if(!e.isTransitioning)return!1;let l=Iu(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=Iu(e.nextLocation.pathname,i)||e.nextLocation.pathname;return Py(s.pathname,c)!=null||Py(s.pathname,l)!=null}const d7=()=>{};var H4={};const uC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const kt=function(n,t){if(!n)throw Om(t)},Om=function(n){return new Error("Firebase Database ("+uC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};const cC=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},m7=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[e++];t[i++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[e++],c=n[e++],f=n[e++],m=((s&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[e++],c=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return t.join("")},ZA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,f=c?n[s+1]:0,m=s+2<n.length,g=m?n[s+2]:0,A=l>>2,S=(l&3)<<4|f>>4;let T=(f&15)<<2|g>>6,x=g&63;m||(x=64,c||(T=64)),i.push(e[A],e[S],e[T],e[x])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(cC(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):m7(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const l=e[n.charAt(s++)],f=s<n.length?e[n.charAt(s)]:0;++s;const g=s<n.length?e[n.charAt(s)]:64;++s;const S=s<n.length?e[n.charAt(s)]:64;if(++s,l==null||f==null||g==null||S==null)throw new p7;const T=l<<2|f>>4;if(i.push(T),g!==64){const x=f<<4&240|g>>2;if(i.push(x),S!==64){const w=g<<6&192|S;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class p7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hC=function(n){const t=cC(n);return ZA.encodeByteArray(t,!0)},Uy=function(n){return hC(n).replace(/\./g,"")},zy=function(n){try{return ZA.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function g7(n){return fC(void 0,n)}function fC(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!_7(e)||(n[e]=fC(n[e],t[e]));return n}function _7(n){return n!=="__proto__"}function y7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const v7=()=>y7().__FIREBASE_DEFAULTS__,A7=()=>{if(typeof process>"u"||typeof H4>"u")return;const n=H4.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},E7=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&zy(n[1]);return t&&JSON.parse(t)},w1=()=>{try{return d7()||v7()||A7()||E7()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dC=n=>{var t,e;return(e=(t=w1())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},mC=n=>{const t=dC(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},pC=()=>{var n;return(n=w1())===null||n===void 0?void 0:n.config},gC=n=>{var t;return(t=w1())===null||t===void 0?void 0:t[`_${n}`]};class Su{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}function fh(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $A(n){return(await fetch(n,{credentials:"include"})).ok}function _C(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Uy(JSON.stringify(e)),Uy(JSON.stringify(c)),""].join(".")}const xg={};function S7(){const n={prod:[],emulator:[]};for(const t of Object.keys(xg))xg[t]?n.emulator.push(t):n.prod.push(t);return n}function T7(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let q4=!1;function tE(n,t){if(typeof window>"u"||typeof document>"u"||!fh(window.location.host)||xg[n]===t||xg[n]||q4)return;xg[n]=t;function e(T){return`__firebase__banner__${T}`}const i="__firebase__banner",l=S7().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,x){T.setAttribute("width","24"),T.setAttribute("id",x),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{q4=!0,c()},T}function A(T,x){T.setAttribute("id",x),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function S(){const T=T7(i),x=e("text"),w=document.getElementById(x)||document.createElement("span"),L=e("learnmore"),V=document.getElementById(L)||document.createElement("a"),G=e("preprendIcon"),B=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Y=T.element;f(Y),A(V,L);const et=g();m(B,G),Y.append(B,w,V,et),document.body.appendChild(Y)}l?(w.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function qs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qs())}function b7(){var n;const t=(n=w1())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function C7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function R7(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w7(){const n=qs();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function x7(){return uC.NODE_ADMIN===!0}function N7(){return!b7()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D7(){try{return typeof indexedDB=="object"}catch{return!1}}function I7(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{var l;t(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(e){t(e)}})}const O7="FirebaseError";class zu extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=O7,Object.setPrototypeOf(this,zu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,d0.prototype.create)}}class d0{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,l=this.errors[t],c=l?M7(l,i):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new zu(s,f,i)}}function M7(n,t){return n.replace(L7,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const L7=/\{\$([^}]+)}/g;function Fg(n){return JSON.parse(n)}function es(n){return JSON.stringify(n)}const vC=function(n){let t={},e={},i={},s="";try{const l=n.split(".");t=Fg(zy(l[0])||""),e=Fg(zy(l[1])||""),s=l[2],i=e.d||{},delete e.d}catch{}return{header:t,claims:e,data:i,signature:s}},V7=function(n){const t=vC(n),e=t.claims;return!!e&&typeof e=="object"&&e.hasOwnProperty("iat")},k7=function(n){const t=vC(n).claims;return typeof t=="object"&&t.admin===!0};function Po(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function dm(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}function By(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function jy(n,t,e){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=t.call(e,n[s],s,n));return i}function eh(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const l=n[s],c=t[s];if(F4(l)&&F4(c)){if(!eh(l,c))return!1}else if(l!==c)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function F4(n){return n!==null&&typeof n=="object"}function Mm(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function _g(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,l]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(l)}}),t}function yg(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}class P7{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const i=this.W_;if(typeof t=="string")for(let S=0;S<16;S++)i[S]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let S=0;S<16;S++)i[S]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let S=16;S<80;S++){const T=i[S-3]^i[S-8]^i[S-14]^i[S-16];i[S]=(T<<1|T>>>31)&4294967295}let s=this.chain_[0],l=this.chain_[1],c=this.chain_[2],f=this.chain_[3],m=this.chain_[4],g,A;for(let S=0;S<80;S++){S<40?S<20?(g=f^l&(c^f),A=1518500249):(g=l^c^f,A=1859775393):S<60?(g=l&c|f&(l|c),A=2400959708):(g=l^c^f,A=3395469782);const T=(s<<5|s>>>27)+g+m+A+i[S]&4294967295;m=f,f=c,c=(l<<30|l>>>2)&4294967295,l=s,s=T}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(t,e){if(t==null)return;e===void 0&&(e=t.length);const i=e-this.blockSize;let s=0;const l=this.buf_;let c=this.inbuf_;for(;s<e;){if(c===0)for(;s<=i;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(l[c]=t.charCodeAt(s),++c,++s,c===this.blockSize){this.compress_(l),c=0;break}}else for(;s<e;)if(l[c]=t[s],++c,++s,c===this.blockSize){this.compress_(l),c=0;break}}this.inbuf_=c,this.total_+=e}digest(){const t=[];let e=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=e&255,e/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let l=24;l>=0;l-=8)t[i]=this.chain_[s]>>l&255,++i;return t}}function U7(n,t){const e=new z7(n,t);return e.subscribe.bind(e)}class z7{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");B7(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=e2),s.error===void 0&&(s.error=e2),s.complete===void 0&&(s.complete=e2);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B7(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function e2(){}function mm(n,t){return`${n} failed: ${t} argument `}const j7=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const l=s-55296;i++,kt(i<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(i)-56320;s=65536+(l<<10)+c}s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):s<65536?(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},x1=function(n){let t=0;for(let e=0;e<n.length;e++){const i=n.charCodeAt(e);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,e++):t+=3}return t};function Bn(n){return n&&n._delegate?n._delegate:n}class nh{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Af="[DEFAULT]";class G7{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Su;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t?.identifier),s=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(q7(t))try{this.getOrInitializeService({instanceIdentifier:Af})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:s});i.resolve(l)}catch{}}}}clearInstance(t=Af){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Af){return this.instances.has(t)}getOptions(t=Af){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(s)}return s}onInit(t,e){var i;const s=this.normalizeInstanceIdentifier(e),l=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:H7(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Af){return this.component?this.component.multipleInstances?t:Af:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function H7(n){return n===Af?void 0:n}function q7(n){return n.instantiationMode==="EAGER"}class F7{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new G7(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Pe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pe||(Pe={}));const Y7={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},Q7=Pe.INFO,X7={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},K7=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=X7[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class N1{constructor(t){this.name=t,this._logLevel=Q7,this._logHandler=K7,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Y7[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...t),this._logHandler(this,Pe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...t),this._logHandler(this,Pe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...t),this._logHandler(this,Pe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...t),this._logHandler(this,Pe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...t),this._logHandler(this,Pe.ERROR,...t)}}const W7=(n,t)=>t.some(e=>n instanceof e);let Y4,Q4;function J7(){return Y4||(Y4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z7(){return Q4||(Q4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AC=new WeakMap,j2=new WeakMap,EC=new WeakMap,n2=new WeakMap,nE=new WeakMap;function $7(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{e(Xc(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&AC.set(e,n)}).catch(()=>{}),nE.set(t,n),t}function tx(n){if(j2.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{e(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});j2.set(n,t)}let G2={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return j2.get(n);if(t==="objectStoreNames")return n.objectStoreNames||EC.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Xc(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function ex(n){G2=n(G2)}function nx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(i2(this),t,...e);return EC.set(i,t.sort?t.sort():[t]),Xc(i)}:Z7().includes(n)?function(...t){return n.apply(i2(this),t),Xc(AC.get(this))}:function(...t){return Xc(n.apply(i2(this),t))}}function ix(n){return typeof n=="function"?nx(n):(n instanceof IDBTransaction&&tx(n),W7(n,J7())?new Proxy(n,G2):n)}function Xc(n){if(n instanceof IDBRequest)return $7(n);if(n2.has(n))return n2.get(n);const t=ix(n);return t!==n&&(n2.set(n,t),nE.set(t,n)),t}const i2=n=>nE.get(n);function sx(n,t,{blocked:e,upgrade:i,blocking:s,terminated:l}={}){const c=indexedDB.open(n,t),f=Xc(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Xc(c.result),m.oldVersion,m.newVersion,Xc(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),s&&m.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const ax=["get","getKey","getAll","getAllKeys","count"],rx=["put","add","delete","clear"],s2=new Map;function X4(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(s2.get(t))return s2.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=rx.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||ax.includes(e)))return;const l=async function(c,...f){const m=this.transaction(c,s?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[e](...f),s&&m.done]))[0]};return s2.set(t,l),l}ex(n=>({...n,get:(t,e,i)=>X4(t,e)||n.get(t,e,i),has:(t,e)=>!!X4(t,e)||n.has(t,e)}));class lx{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(ox(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function ox(n){const t=n.getComponent();return t?.type==="VERSION"}const H2="@firebase/app",K4="0.13.2";const Ou=new N1("@firebase/app"),ux="@firebase/app-compat",cx="@firebase/analytics-compat",hx="@firebase/analytics",fx="@firebase/app-check-compat",dx="@firebase/app-check",mx="@firebase/auth",px="@firebase/auth-compat",gx="@firebase/database",_x="@firebase/data-connect",yx="@firebase/database-compat",vx="@firebase/functions",Ax="@firebase/functions-compat",Ex="@firebase/installations",Sx="@firebase/installations-compat",Tx="@firebase/messaging",bx="@firebase/messaging-compat",Cx="@firebase/performance",Rx="@firebase/performance-compat",wx="@firebase/remote-config",xx="@firebase/remote-config-compat",Nx="@firebase/storage",Dx="@firebase/storage-compat",Ix="@firebase/firestore",Ox="@firebase/ai",Mx="@firebase/firestore-compat",Lx="firebase",Vx="11.10.0";const q2="[DEFAULT]",kx={[H2]:"fire-core",[ux]:"fire-core-compat",[hx]:"fire-analytics",[cx]:"fire-analytics-compat",[dx]:"fire-app-check",[fx]:"fire-app-check-compat",[mx]:"fire-auth",[px]:"fire-auth-compat",[gx]:"fire-rtdb",[_x]:"fire-data-connect",[yx]:"fire-rtdb-compat",[vx]:"fire-fn",[Ax]:"fire-fn-compat",[Ex]:"fire-iid",[Sx]:"fire-iid-compat",[Tx]:"fire-fcm",[bx]:"fire-fcm-compat",[Cx]:"fire-perf",[Rx]:"fire-perf-compat",[wx]:"fire-rc",[xx]:"fire-rc-compat",[Nx]:"fire-gcs",[Dx]:"fire-gcs-compat",[Ix]:"fire-fst",[Mx]:"fire-fst-compat",[Ox]:"fire-vertex","fire-js":"fire-js",[Lx]:"fire-js-all"};const Gy=new Map,Px=new Map,F2=new Map;function W4(n,t){try{n.container.addComponent(t)}catch(e){Ou.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Rf(n){const t=n.name;if(F2.has(t))return Ou.debug(`There were multiple attempts to register component ${t}.`),!1;F2.set(t,n);for(const e of Gy.values())W4(e,n);for(const e of Px.values())W4(e,n);return!0}function D1(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function or(n){return n==null?!1:n.settings!==void 0}const Ux={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kc=new d0("app","Firebase",Ux);class zx{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new nh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Kc.create("app-deleted",{appName:this._name})}}const Pf=Vx;function SC(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:q2,automaticDataCollectionEnabled:!0},t),s=i.name;if(typeof s!="string"||!s)throw Kc.create("bad-app-name",{appName:String(s)});if(e||(e=pC()),!e)throw Kc.create("no-options");const l=Gy.get(s);if(l){if(eh(e,l.options)&&eh(i,l.config))return l;throw Kc.create("duplicate-app",{appName:s})}const c=new F7(s);for(const m of F2.values())c.addComponent(m);const f=new zx(e,i,c);return Gy.set(s,f),f}function iE(n=q2){const t=Gy.get(n);if(!t&&n===q2&&pC())return SC();if(!t)throw Kc.create("no-app",{appName:n});return t}function Do(n,t,e){var i;let s=(i=kx[n])!==null&&i!==void 0?i:n;e&&(s+=`-${e}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const f=[`Unable to register library "${s}" with version "${t}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ou.warn(f.join(" "));return}Rf(new nh(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const Bx="firebase-heartbeat-database",jx=1,Yg="firebase-heartbeat-store";let a2=null;function TC(){return a2||(a2=sx(Bx,jx,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Yg)}catch(e){console.warn(e)}}}}).catch(n=>{throw Kc.create("idb-open",{originalErrorMessage:n.message})})),a2}async function Gx(n){try{const e=(await TC()).transaction(Yg),i=await e.objectStore(Yg).get(bC(n));return await e.done,i}catch(t){if(t instanceof zu)Ou.warn(t.message);else{const e=Kc.create("idb-get",{originalErrorMessage:t?.message});Ou.warn(e.message)}}}async function J4(n,t){try{const i=(await TC()).transaction(Yg,"readwrite");await i.objectStore(Yg).put(t,bC(n)),await i.done}catch(e){if(e instanceof zu)Ou.warn(e.message);else{const i=Kc.create("idb-set",{originalErrorMessage:e?.message});Ou.warn(i.message)}}}function bC(n){return`${n.name}!${n.options.appId}`}const Hx=1024,qx=30;class Fx{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Qx(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Z4();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>qx){const c=Xx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ou.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Z4(),{heartbeatsToSend:i,unsentEntries:s}=Yx(this._heartbeatsCache.heartbeats),l=Uy(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ou.warn(e),""}}}function Z4(){return new Date().toISOString().substring(0,10)}function Yx(n,t=Hx){const e=[];let i=n.slice();for(const s of n){const l=e.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),$4(e)>t){l.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),$4(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class Qx{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D7()?I7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Gx(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return J4(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return J4(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function $4(n){return Uy(JSON.stringify({version:2,heartbeats:n})).length}function Xx(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}function Kx(n){Rf(new nh("platform-logger",t=>new lx(t),"PRIVATE")),Rf(new nh("heartbeat",t=>new Fx(t),"PRIVATE")),Do(H2,K4,n),Do(H2,K4,"esm2017"),Do("fire-js","")}Kx("");var Wx="firebase",Jx="11.10.0";Do(Wx,Jx,"app");function sE(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e}function CC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zx=CC,RC=new d0("auth","Firebase",CC());const Hy=new N1("@firebase/auth");function $x(n,...t){Hy.logLevel<=Pe.WARN&&Hy.warn(`Auth (${Pf}): ${n}`,...t)}function Cy(n,...t){Hy.logLevel<=Pe.ERROR&&Hy.error(`Auth (${Pf}): ${n}`,...t)}function Bl(n,...t){throw aE(n,...t)}function Io(n,...t){return aE(n,...t)}function wC(n,t,e){const i=Object.assign(Object.assign({},Zx()),{[t]:e});return new d0("auth","Firebase",i).create(t,{appName:n.name})}function wu(n){return wC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aE(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return RC.create(n,...t)}function ae(n,t,...e){if(!n)throw aE(t,...e)}function Tu(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Cy(t),new Error(t)}function Mu(n,t){n||Tu(t)}function Y2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function tN(){return tT()==="http:"||tT()==="https:"}function tT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function eN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tN()||R7()||"connection"in navigator)?navigator.onLine:!0}function nN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class m0{constructor(t,e){this.shortDelay=t,this.longDelay=e,Mu(e>t,"Short delay should be less than long delay!"),this.isMobile=eE()||yC()}get(){return eN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rE(n,t){Mu(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class xC{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const iN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const sN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aN=new m0(3e4,6e4);function dh(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function mh(n,t,e,i,s={}){return NC(n,s,async()=>{let l={},c={};i&&(t==="GET"?c=i:l={body:JSON.stringify(i)});const f=Mm(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:t,headers:m},l);return C7()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&fh(n.emulatorConfig.host)&&(g.credentials="include"),xC.fetch()(await DC(n,n.config.apiHost,e,f),g)})}async function NC(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},iN),t);try{const s=new lN(n),l=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw sy(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw sy(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw sy(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw sy(n,"user-disabled",c);const A=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw wC(n,A,g);Bl(n,A)}}catch(s){if(s instanceof zu)throw s;Bl(n,"network-request-failed",{message:String(s)})}}async function p0(n,t,e,i,s={}){const l=await mh(n,t,e,i,s);return"mfaPendingCredential"in l&&Bl(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function DC(n,t,e,i){const s=`${t}${e}?${i}`,l=n,c=l.config.emulator?rE(n.config,s):`${n.config.apiScheme}://${s}`;return sN.includes(e)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function rN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Io(this.auth,"network-request-failed")),aN.get())})}}function sy(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const s=Io(n,t,i);return s.customData._tokenResponse=e,s}function eT(n){return n!==void 0&&n.enterprise!==void 0}class oN{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return rN(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uN(n,t){return mh(n,"GET","/v2/recaptchaConfig",dh(n,t))}async function cN(n,t){return mh(n,"POST","/v1/accounts:delete",t)}async function qy(n,t){return mh(n,"POST","/v1/accounts:lookup",t)}function Ng(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function hN(n,t=!1){const e=Bn(n),i=await e.getIdToken(t),s=lE(i);ae(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l?.sign_in_provider;return{claims:s,token:i,authTime:Ng(r2(s.auth_time)),issuedAtTime:Ng(r2(s.iat)),expirationTime:Ng(r2(s.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function r2(n){return Number(n)*1e3}function lE(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Cy("JWT malformed, contained fewer than 3 sections"),null;try{const s=zy(e);return s?JSON.parse(s):(Cy("Failed to decode base64 JWT payload"),null)}catch(s){return Cy("Caught error parsing JWT payload as JSON",s?.toString()),null}}function nT(n){const t=lE(n);return ae(t,"internal-error"),ae(typeof t.exp<"u","internal-error"),ae(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Qg(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof zu&&fN(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function fN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class dN{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Q2{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ng(this.lastLoginAt),this.creationTime=Ng(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Fy(n){var t;const e=n.auth,i=await n.getIdToken(),s=await Qg(n,qy(e,{idToken:i}));ae(s?.users.length,e,"internal-error");const l=s.users[0];n._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?IC(l.providerUserInfo):[],f=pN(n.providerData,c),m=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!f?.length,A=m?g:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Q2(l.createdAt,l.lastLoginAt),isAnonymous:A};Object.assign(n,S)}async function mN(n){const t=Bn(n);await Fy(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function pN(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function IC(n){return n.map(t=>{var{providerId:e}=t,i=sE(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function gN(n,t){const e=await NC(n,{},async()=>{const i=Mm({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await DC(n,s,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&fh(n.emulatorConfig.host)&&(m.credentials="include"),xC.fetch()(c,m)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function _N(n,t){return mh(n,"POST","/v2/accounts:revokeToken",dh(n,t))}class rm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ae(t.idToken,"internal-error"),ae(typeof t.idToken<"u","internal-error"),ae(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):nT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){ae(t.length!==0,"internal-error");const e=nT(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:s,expiresIn:l}=await gN(t,e);this.updateTokensAndExpiration(i,s,Number(l))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:s,expirationTime:l}=e,c=new rm;return i&&(ae(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),s&&(ae(typeof s=="string","internal-error",{appName:t}),c.accessToken=s),l&&(ae(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new rm,this.toJSON())}_performRefresh(){return Tu("not implemented")}}function Uc(n,t){ae(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Ll{constructor(t){var{uid:e,auth:i,stsTokenManager:s}=t,l=sE(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Q2(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const e=await Qg(this,this.stsTokenManager.getToken(this.auth,t));return ae(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return hN(this,t)}reload(){return mN(this)}_assign(t){this!==t&&(ae(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Ll(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Fy(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(wu(this.auth));const t=await this.getIdToken();return await Qg(this,cN(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,s,l,c,f,m,g,A;const S=(i=e.displayName)!==null&&i!==void 0?i:void 0,T=(s=e.email)!==null&&s!==void 0?s:void 0,x=(l=e.phoneNumber)!==null&&l!==void 0?l:void 0,w=(c=e.photoURL)!==null&&c!==void 0?c:void 0,L=(f=e.tenantId)!==null&&f!==void 0?f:void 0,V=(m=e._redirectEventId)!==null&&m!==void 0?m:void 0,G=(g=e.createdAt)!==null&&g!==void 0?g:void 0,B=(A=e.lastLoginAt)!==null&&A!==void 0?A:void 0,{uid:Y,emailVerified:et,isAnonymous:at,providerData:tt,stsTokenManager:z}=e;ae(Y&&z,t,"internal-error");const M=rm.fromJSON(this.name,z);ae(typeof Y=="string",t,"internal-error"),Uc(S,t.name),Uc(T,t.name),ae(typeof et=="boolean",t,"internal-error"),ae(typeof at=="boolean",t,"internal-error"),Uc(x,t.name),Uc(w,t.name),Uc(L,t.name),Uc(V,t.name),Uc(G,t.name),Uc(B,t.name);const U=new Ll({uid:Y,auth:t,email:T,emailVerified:et,displayName:S,isAnonymous:at,photoURL:w,phoneNumber:x,tenantId:L,stsTokenManager:M,createdAt:G,lastLoginAt:B});return tt&&Array.isArray(tt)&&(U.providerData=tt.map(q=>Object.assign({},q))),V&&(U._redirectEventId=V),U}static async _fromIdTokenResponse(t,e,i=!1){const s=new rm;s.updateFromServerResponse(e);const l=new Ll({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Fy(l),l}static async _fromGetAccountInfoResponse(t,e,i){const s=e.users[0];ae(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?IC(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!l?.length,f=new rm;f.updateFromIdToken(i);const m=new Ll({uid:s.localId,auth:t,stsTokenManager:f,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Q2(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!l?.length};return Object.assign(m,g),m}}const iT=new Map;function bu(n){Mu(n instanceof Function,"Expected a class definition");let t=iT.get(n);return t?(Mu(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,iT.set(n,t),t)}class OC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}OC.type="NONE";const sT=OC;function Ry(n,t,e){return`firebase:${n}:${t}:${e}`}class lm{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:s,name:l}=this.auth;this.fullUserKey=Ry(this.userKey,s.apiKey,l),this.fullPersistenceKey=Ry("persistence",s.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await qy(this.auth,{idToken:t}).catch(()=>{});return e?Ll._fromGetAccountInfoResponse(this.auth,e,t):null}return Ll._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new lm(bu(sT),t,i);const s=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||bu(sT);const c=Ry(i,t.config.apiKey,t.name);let f=null;for(const g of e)try{const A=await g._get(c);if(A){let S;if(typeof A=="string"){const T=await qy(t,{idToken:A}).catch(()=>{});if(!T)break;S=await Ll._fromGetAccountInfoResponse(t,T,A)}else S=Ll._fromJSON(t,A);g!==l&&(f=S),l=g;break}}catch{}const m=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new lm(l,t,i):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(e.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new lm(l,t,i))}}function aT(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(MC(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(UC(t))return"Blackberry";if(zC(t))return"Webos";if(LC(t))return"Safari";if((t.includes("chrome/")||VC(t))&&!t.includes("edge/"))return"Chrome";if(PC(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function MC(n=qs()){return/firefox\//i.test(n)}function LC(n=qs()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function VC(n=qs()){return/crios\//i.test(n)}function kC(n=qs()){return/iemobile/i.test(n)}function PC(n=qs()){return/android/i.test(n)}function UC(n=qs()){return/blackberry/i.test(n)}function zC(n=qs()){return/webos/i.test(n)}function oE(n=qs()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yN(n=qs()){var t;return oE(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function vN(){return w7()&&document.documentMode===10}function BC(n=qs()){return oE(n)||PC(n)||zC(n)||UC(n)||/windows phone/i.test(n)||kC(n)}function jC(n,t=[]){let e;switch(n){case"Browser":e=aT(qs());break;case"Worker":e=`${aT(qs())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Pf}/${i}`}class AN{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=l=>new Promise((c,f)=>{try{const m=t(l);c(m)}catch(m){f(m)}});i.onAbort=e,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function EN(n,t={}){return mh(n,"GET","/v2/passwordPolicy",dh(n,t))}const SN=6;class TN{constructor(t){var e,i,s,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=c.minPasswordLength)!==null&&e!==void 0?e:SN,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,s,l,c,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(e=m.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(s=m.containsLowercaseLetter)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}class bN{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rT(this),this.idTokenSubscription=new rT(this),this.beforeStateQueue=new AN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=bu(e)),this._initializationPromise=this.queue(async()=>{var i,s,l;if(!this._deleted&&(this.persistenceManager=await lm.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await qy(this,{idToken:t}),i=await Ll._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(or(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(t);(!c||c===f)&&m?.user&&(s=m.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Fy(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=nN()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(or(this.app))return Promise.reject(wu(this));const e=t?Bn(t):null;return e&&ae(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&ae(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(wu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return or(this.app)?Promise.reject(wu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bu(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await EN(this),e=new TN(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new d0("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await _N(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&bu(t)||this._popupRedirectResolver;ae(e,this,"argument-error"),this.redirectPersistenceManager=await lm.create(this,[bu(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof e=="function"){const m=t.addObserver(e,i,s);return()=>{c=!0,m()}}else{const m=t.addObserver(e);return()=>{c=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=jC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e?.error&&$x(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Uf(n){return Bn(n)}class rT{constructor(t){this.auth=t,this.observer=null,this.addObserver=U7(e=>this.observer=e)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let I1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CN(n){I1=n}function GC(n){return I1.loadJS(n)}function RN(){return I1.recaptchaEnterpriseScript}function wN(){return I1.gapiScript}function xN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class NN{constructor(){this.enterprise=new DN}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class DN{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const IN="recaptcha-enterprise",HC="NO_RECAPTCHA";class ON{constructor(t){this.type=IN,this.auth=Uf(t)}async verify(t="verify",e=!1){async function i(l){if(!e){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{uN(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new oN(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{f(m)})})}function s(l,c,f){const m=window.grecaptcha;eT(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:t}).then(g=>{c(g)}).catch(()=>{c(HC)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NN().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(f=>{if(!e&&eT(window.grecaptcha))s(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=RN();m.length!==0&&(m+=f),GC(m).then(()=>{s(f,l,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function lT(n,t,e,i=!1,s=!1){const l=new ON(n);let c;if(s)c=HC;else try{c=await l.verify(e)}catch{c=await l.verify(e,!0)}const f=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function X2(n,t,e,i,s){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await lT(n,t,e,e==="getOobCode");return i(n,c)}else return i(n,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await lT(n,t,e,e==="getOobCode");return i(n,f)}else return Promise.reject(c)})}function MN(n,t){const e=D1(n,"auth");if(e.isInitialized()){const s=e.getImmediate(),l=e.getOptions();if(eh(l,t??{}))return s;Bl(s,"already-initialized")}return e.initialize({options:t})}function LN(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(bu);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function VN(n,t,e){const i=Uf(n);ae(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,l=qC(t),{host:c,port:f}=kN(t),m=f===null?"":`:${f}`,g={url:`${l}//${c}${m}/`},A=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ae(eh(g,i.config.emulator)&&eh(A,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=A,i.settings.appVerificationDisabledForTesting=!0,fh(c)?($A(`${l}//${c}${m}`),tE("Auth",!0)):PN()}function qC(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function kN(n){const t=qC(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const l=s[1];return{host:l,port:oT(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:oT(c)}}}function oT(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function PN(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class uE{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Tu("not implemented")}_getIdTokenResponse(t){return Tu("not implemented")}_linkToIdToken(t,e){return Tu("not implemented")}_getReauthenticationResolver(t){return Tu("not implemented")}}async function UN(n,t){return mh(n,"POST","/v1/accounts:signUp",t)}async function zN(n,t){return p0(n,"POST","/v1/accounts:signInWithPassword",dh(n,t))}async function BN(n,t){return p0(n,"POST","/v1/accounts:signInWithEmailLink",dh(n,t))}async function jN(n,t){return p0(n,"POST","/v1/accounts:signInWithEmailLink",dh(n,t))}class Xg extends uE{constructor(t,e,i,s=null){super("password",i),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new Xg(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Xg(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return X2(t,e,"signInWithPassword",zN);case"emailLink":return BN(t,{email:this._email,oobCode:this._password});default:Bl(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return X2(t,i,"signUpPassword",UN);case"emailLink":return jN(t,{idToken:e,email:this._email,oobCode:this._password});default:Bl(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function om(n,t){return p0(n,"POST","/v1/accounts:signInWithIdp",dh(n,t))}const GN="http://localhost";class wf extends uE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new wf(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Bl("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s}=e,l=sE(e,["providerId","signInMethod"]);if(!i||!s)return null;const c=new wf(i,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return om(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,om(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,om(t,e)}buildRequest(){const t={requestUri:GN,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Mm(e)}return t}}function HN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qN(n){const t=_g(yg(n)).link,e=t?_g(yg(t)).deep_link_id:null,i=_g(yg(n)).deep_link_id;return(i?_g(yg(i)).link:null)||i||e||t||n}class cE{constructor(t){var e,i,s,l,c,f;const m=_g(yg(t)),g=(e=m.apiKey)!==null&&e!==void 0?e:null,A=(i=m.oobCode)!==null&&i!==void 0?i:null,S=HN((s=m.mode)!==null&&s!==void 0?s:null);ae(g&&A&&S,"argument-error"),this.apiKey=g,this.operation=S,this.code=A,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(t){const e=qN(t);try{return new cE(e)}catch{return null}}}class Lm{constructor(){this.providerId=Lm.PROVIDER_ID}static credential(t,e){return Xg._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=cE.parseLink(e);return ae(i,"argument-error"),Xg._fromEmailAndCode(t,i.code,i.tenantId)}}Lm.PROVIDER_ID="password";Lm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class FC{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class g0 extends FC{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Gc extends g0{constructor(){super("facebook.com")}static credential(t){return wf._fromParams({providerId:Gc.PROVIDER_ID,signInMethod:Gc.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gc.credentialFromTaggedObject(t)}static credentialFromError(t){return Gc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gc.credential(t.oauthAccessToken)}catch{return null}}}Gc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gc.PROVIDER_ID="facebook.com";class Hc extends g0{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return wf._fromParams({providerId:Hc.PROVIDER_ID,signInMethod:Hc.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Hc.credentialFromTaggedObject(t)}static credentialFromError(t){return Hc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Hc.credential(e,i)}catch{return null}}}Hc.GOOGLE_SIGN_IN_METHOD="google.com";Hc.PROVIDER_ID="google.com";class qc extends g0{constructor(){super("github.com")}static credential(t){return wf._fromParams({providerId:qc.PROVIDER_ID,signInMethod:qc.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qc.credentialFromTaggedObject(t)}static credentialFromError(t){return qc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qc.credential(t.oauthAccessToken)}catch{return null}}}qc.GITHUB_SIGN_IN_METHOD="github.com";qc.PROVIDER_ID="github.com";class Fc extends g0{constructor(){super("twitter.com")}static credential(t,e){return wf._fromParams({providerId:Fc.PROVIDER_ID,signInMethod:Fc.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Fc.credentialFromTaggedObject(t)}static credentialFromError(t){return Fc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Fc.credential(e,i)}catch{return null}}}Fc.TWITTER_SIGN_IN_METHOD="twitter.com";Fc.PROVIDER_ID="twitter.com";async function FN(n,t){return p0(n,"POST","/v1/accounts:signUp",dh(n,t))}class xf{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){const l=await Ll._fromIdTokenResponse(t,i,s),c=uT(i);return new xf({user:l,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const s=uT(i);return new xf({user:t,providerId:s,_tokenResponse:i,operationType:e})}}function uT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Yy extends zu{constructor(t,e,i,s){var l;super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Yy.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new Yy(t,e,i,s)}}function YC(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Yy._fromErrorAndOperation(n,l,t,i):l})}async function YN(n,t,e=!1){const i=await Qg(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return xf._forOperation(n,"link",i)}async function QN(n,t,e=!1){const{auth:i}=n;if(or(i.app))return Promise.reject(wu(i));const s="reauthenticate";try{const l=await Qg(n,YC(i,s,t,n),e);ae(l.idToken,i,"internal-error");const c=lE(l.idToken);ae(c,i,"internal-error");const{sub:f}=c;return ae(n.uid===f,i,"user-mismatch"),xf._forOperation(n,s,l)}catch(l){throw l?.code==="auth/user-not-found"&&Bl(i,"user-mismatch"),l}}async function QC(n,t,e=!1){if(or(n.app))return Promise.reject(wu(n));const i="signIn",s=await YC(n,i,t),l=await xf._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(l.user),l}async function XN(n,t){return QC(Uf(n),t)}async function XC(n){const t=Uf(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function KN(n,t,e){if(or(n.app))return Promise.reject(wu(n));const i=Uf(n),c=await X2(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FN).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&XC(n),m}),f=await xf._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(f.user),f}function WN(n,t,e){return or(n.app)?Promise.reject(wu(n)):XN(Bn(n),Lm.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&XC(n),i})}function JN(n,t,e,i){return Bn(n).onIdTokenChanged(t,e,i)}function ZN(n,t,e){return Bn(n).beforeAuthStateChanged(t,e)}function $N(n,t,e,i){return Bn(n).onAuthStateChanged(t,e,i)}function tD(n){return Bn(n).signOut()}const Qy="__sak";class KC{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Qy,"1"),this.storage.removeItem(Qy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const eD=1e3,nD=10;class WC extends KC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BC(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);vN()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,nD):s()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},eD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}WC.type="LOCAL";const iD=WC;class JC extends KC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}JC.type="SESSION";const ZC=JC;function sD(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class O1{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const i=new O1(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:s,data:l}=e.data,c=this.handlersMap[s];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const f=Array.from(c).map(async g=>g(e.origin,l)),m=await sD(f);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:m})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}O1.receivers=[];function hE(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}class aD{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const g=hE("",20);s.port1.start();const A=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(S){const T=S;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(A),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(T.data.response);break;default:clearTimeout(A),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Oo(){return window}function rD(n){Oo().location.href=n}function $C(){return typeof Oo().WorkerGlobalScope<"u"&&typeof Oo().importScripts=="function"}async function lD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oD(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function uD(){return $C()?self:null}const t5="firebaseLocalStorageDb",cD=1,Xy="firebaseLocalStorage",e5="fbase_key";class _0{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function M1(n,t){return n.transaction([Xy],t?"readwrite":"readonly").objectStore(Xy)}function hD(){const n=indexedDB.deleteDatabase(t5);return new _0(n).toPromise()}function K2(){const n=indexedDB.open(t5,cD);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Xy,{keyPath:e5})}catch(s){e(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Xy)?t(i):(i.close(),await hD(),t(await K2()))})})}async function cT(n,t,e){const i=M1(n,!0).put({[e5]:t,value:e});return new _0(i).toPromise()}async function fD(n,t){const e=M1(n,!1).get(t),i=await new _0(e).toPromise();return i===void 0?null:i.value}function hT(n,t){const e=M1(n,!0).delete(t);return new _0(e).toPromise()}const dD=800,mD=3;class n5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await K2(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>mD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $C()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=O1._getInstance(uD()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await lD(),!this.activeServiceWorker)return;this.sender=new aD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||oD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await K2();return await cT(t,Qy,"1"),await hT(t,Qy),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>cT(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>fD(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>hT(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const l=M1(s,!1).getAll();return new _0(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:l}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}n5.type="LOCAL";const pD=n5;new m0(3e4,6e4);function gD(n,t){return t?bu(t):(ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class fE extends uE{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return om(t,this._buildIdpRequest())}_linkToIdToken(t,e){return om(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return om(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function _D(n){return QC(n.auth,new fE(n),n.bypassAuthState)}function yD(n){const{auth:t,user:e}=n;return ae(e,t,"internal-error"),QN(e,new fE(n),n.bypassAuthState)}async function vD(n){const{auth:t,user:e}=n;return ae(e,t,"internal-error"),YN(e,new fE(n),n.bypassAuthState)}class i5{constructor(t,e,i,s,l=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:s,tenantId:l,error:c,type:f}=t;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:e,sessionId:i,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return _D;case"linkViaPopup":case"linkViaRedirect":return vD;case"reauthViaPopup":case"reauthViaRedirect":return yD;default:Bl(this.auth,"internal-error")}}resolve(t){Mu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Mu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const AD=new m0(2e3,1e4);class nm extends i5{constructor(t,e,i,s,l){super(t,e,s,l),this.provider=i,this.authWindow=null,this.pollId=null,nm.currentPopupAction&&nm.currentPopupAction.cancel(),nm.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ae(t,this.auth,"internal-error"),t}async onExecution(){Mu(this.filter.length===1,"Popup operations only handle one event");const t=hE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Io(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Io(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nm.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Io(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,AD.get())};t()}}nm.currentPopupAction=null;const ED="pendingRedirect",wy=new Map;class SD extends i5{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=wy.get(this.auth._key());if(!t){try{const i=await TD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}wy.set(this.auth._key(),t)}return this.bypassAuthState||wy.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TD(n,t){const e=RD(t),i=CD(n);if(!await i._isAvailable())return!1;const s=await i._get(e)==="true";return await i._remove(e),s}function bD(n,t){wy.set(n._key(),t)}function CD(n){return bu(n._redirectPersistence)}function RD(n){return Ry(ED,n.config.apiKey,n.name)}async function wD(n,t,e=!1){if(or(n.app))return Promise.reject(wu(n));const i=Uf(n),s=gD(i,t),c=await new SD(i,s,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}const xD=600*1e3;class ND{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!DD(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!s5(t)){const s=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(Io(this.auth,s))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=xD&&this.cachedEventUids.clear(),this.cachedEventUids.has(fT(t))}saveEventToCache(t){this.cachedEventUids.add(fT(t)),this.lastProcessedEventTime=Date.now()}}function fT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function s5({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function DD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return s5(n);default:return!1}}async function ID(n,t={}){return mh(n,"GET","/v1/projects",t)}const OD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MD=/^https?/;async function LD(n){if(n.config.emulator)return;const{authorizedDomains:t}=await ID(n);for(const e of t)try{if(VD(e))return}catch{}Bl(n,"unauthorized-domain")}function VD(n){const t=Y2(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!MD.test(e))return!1;if(OD.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const kD=new m0(3e4,6e4);function dT(){const n=Oo().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function PD(n){return new Promise((t,e)=>{var i,s,l;function c(){dT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{dT(),e(Io(n,"network-request-failed"))},timeout:kD.get()})}if(!((s=(i=Oo().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((l=Oo().gapi)===null||l===void 0)&&l.load)c();else{const f=xN("iframefcb");return Oo()[f]=()=>{gapi.load?c():e(Io(n,"network-request-failed"))},GC(`${wN()}?onload=${f}`).catch(m=>e(m))}}).catch(t=>{throw xy=null,t})}let xy=null;function UD(n){return xy=xy||PD(n),xy}const zD=new m0(5e3,15e3),BD="__/auth/iframe",jD="emulator/auth/iframe",GD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qD(n){const t=n.config;ae(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?rE(t,jD):`https://${n.config.authDomain}/${BD}`,i={apiKey:t.apiKey,appName:n.name,v:Pf},s=HD.get(n.config.apiHost);s&&(i.eid=s);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${e}?${Mm(i).slice(1)}`}async function FD(n){const t=await UD(n),e=Oo().gapi;return ae(e,n,"internal-error"),t.open({where:document.body,url:qD(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GD,dontclear:!0},i=>new Promise(async(s,l)=>{await i.restyle({setHideOnLeave:!1});const c=Io(n,"network-request-failed"),f=Oo().setTimeout(()=>{l(c)},zD.get());function m(){Oo().clearTimeout(f),s(i)}i.ping(m).then(m,()=>{l(c)})}))}const YD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QD=500,XD=600,KD="_blank",WD="http://localhost";class mT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JD(n,t,e,i=QD,s=XD){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m=Object.assign(Object.assign({},YD),{width:i.toString(),height:s.toString(),top:l,left:c}),g=qs().toLowerCase();e&&(f=VC(g)?KD:e),MC(g)&&(t=t||WD,m.scrollbars="yes");const A=Object.entries(m).reduce((T,[x,w])=>`${T}${x}=${w},`,"");if(yN(g)&&f!=="_self")return ZD(t||"",f),new mT(null);const S=window.open(t||"",f,A);ae(S,n,"popup-blocked");try{S.focus()}catch{}return new mT(S)}function ZD(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}const $D="__/auth/handler",tI="emulator/auth/handler",eI=encodeURIComponent("fac");async function pT(n,t,e,i,s,l){ae(n.config.authDomain,n,"auth-domain-config-required"),ae(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:Pf,eventId:s};if(t instanceof FC){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",By(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,S]of Object.entries({}))c[A]=S}if(t instanceof g0){const A=t.getScopes().filter(S=>S!=="");A.length>0&&(c.scopes=A.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const A of Object.keys(f))f[A]===void 0&&delete f[A];const m=await n._getAppCheckToken(),g=m?`#${eI}=${encodeURIComponent(m)}`:"";return`${nI(n)}?${Mm(f).slice(1)}${g}`}function nI({config:n}){return n.emulator?rE(n,tI):`https://${n.authDomain}/${$D}`}const l2="webStorageSupport";class iI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZC,this._completeRedirectFn=wD,this._overrideRedirectResult=bD}async _openPopup(t,e,i,s){var l;Mu((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await pT(t,e,i,Y2(),s);return JD(t,c,hE())}async _openRedirect(t,e,i,s){await this._originValidation(t);const l=await pT(t,e,i,Y2(),s);return rD(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:l}=this.eventManagers[e];return s?Promise.resolve(s):(Mu(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await FD(t),i=new ND(t);return e.register("authEvent",s=>(ae(s?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(l2,{type:l2},s=>{var l;const c=(l=s?.[0])===null||l===void 0?void 0:l[l2];c!==void 0&&e(!!c),Bl(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=LD(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return BC()||LC()||oE()}}const sI=iI;var gT="@firebase/auth",_T="1.10.8";class aI{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function rI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lI(n){Rf(new nh("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;ae(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jC(n)},g=new bN(i,s,l,m);return LN(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Rf(new nh("auth-internal",t=>{const e=Uf(t.getProvider("auth").getImmediate());return(i=>new aI(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Do(gT,_T,rI(n)),Do(gT,_T,"esm2017")}const oI=300,uI=gC("authIdTokenMaxAge")||oI;let yT=null;const cI=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>uI)return;const s=e?.token;yT!==s&&(yT=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function hI(n=iE()){const t=D1(n,"auth");if(t.isInitialized())return t.getImmediate();const e=MN(n,{popupRedirectResolver:sI,persistence:[pD,iD,ZC]}),i=gC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=cI(l.toString());ZN(e,c,()=>c(e.currentUser)),JN(e,f=>c(f))}}const s=dC("auth");return s&&VN(e,`http://${s}`),e}function fI(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}CN({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{const l=Io("internal-error");l.customData=s,e(l)},i.type="text/javascript",i.charset="UTF-8",fI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lI("Browser");var vT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Wc,a5;(function(){var n;function t(z,M){function U(){}U.prototype=M.prototype,z.D=M.prototype,z.prototype=new U,z.prototype.constructor=z,z.C=function(q,X,Q){for(var H=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)H[Ft-2]=arguments[Ft];return M.prototype[X].apply(q,H)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(z,M,U){U||(U=0);var q=Array(16);if(typeof M=="string")for(var X=0;16>X;++X)q[X]=M.charCodeAt(U++)|M.charCodeAt(U++)<<8|M.charCodeAt(U++)<<16|M.charCodeAt(U++)<<24;else for(X=0;16>X;++X)q[X]=M[U++]|M[U++]<<8|M[U++]<<16|M[U++]<<24;M=z.g[0],U=z.g[1],X=z.g[2];var Q=z.g[3],H=M+(Q^U&(X^Q))+q[0]+3614090360&4294967295;M=U+(H<<7&4294967295|H>>>25),H=Q+(X^M&(U^X))+q[1]+3905402710&4294967295,Q=M+(H<<12&4294967295|H>>>20),H=X+(U^Q&(M^U))+q[2]+606105819&4294967295,X=Q+(H<<17&4294967295|H>>>15),H=U+(M^X&(Q^M))+q[3]+3250441966&4294967295,U=X+(H<<22&4294967295|H>>>10),H=M+(Q^U&(X^Q))+q[4]+4118548399&4294967295,M=U+(H<<7&4294967295|H>>>25),H=Q+(X^M&(U^X))+q[5]+1200080426&4294967295,Q=M+(H<<12&4294967295|H>>>20),H=X+(U^Q&(M^U))+q[6]+2821735955&4294967295,X=Q+(H<<17&4294967295|H>>>15),H=U+(M^X&(Q^M))+q[7]+4249261313&4294967295,U=X+(H<<22&4294967295|H>>>10),H=M+(Q^U&(X^Q))+q[8]+1770035416&4294967295,M=U+(H<<7&4294967295|H>>>25),H=Q+(X^M&(U^X))+q[9]+2336552879&4294967295,Q=M+(H<<12&4294967295|H>>>20),H=X+(U^Q&(M^U))+q[10]+4294925233&4294967295,X=Q+(H<<17&4294967295|H>>>15),H=U+(M^X&(Q^M))+q[11]+2304563134&4294967295,U=X+(H<<22&4294967295|H>>>10),H=M+(Q^U&(X^Q))+q[12]+1804603682&4294967295,M=U+(H<<7&4294967295|H>>>25),H=Q+(X^M&(U^X))+q[13]+4254626195&4294967295,Q=M+(H<<12&4294967295|H>>>20),H=X+(U^Q&(M^U))+q[14]+2792965006&4294967295,X=Q+(H<<17&4294967295|H>>>15),H=U+(M^X&(Q^M))+q[15]+1236535329&4294967295,U=X+(H<<22&4294967295|H>>>10),H=M+(X^Q&(U^X))+q[1]+4129170786&4294967295,M=U+(H<<5&4294967295|H>>>27),H=Q+(U^X&(M^U))+q[6]+3225465664&4294967295,Q=M+(H<<9&4294967295|H>>>23),H=X+(M^U&(Q^M))+q[11]+643717713&4294967295,X=Q+(H<<14&4294967295|H>>>18),H=U+(Q^M&(X^Q))+q[0]+3921069994&4294967295,U=X+(H<<20&4294967295|H>>>12),H=M+(X^Q&(U^X))+q[5]+3593408605&4294967295,M=U+(H<<5&4294967295|H>>>27),H=Q+(U^X&(M^U))+q[10]+38016083&4294967295,Q=M+(H<<9&4294967295|H>>>23),H=X+(M^U&(Q^M))+q[15]+3634488961&4294967295,X=Q+(H<<14&4294967295|H>>>18),H=U+(Q^M&(X^Q))+q[4]+3889429448&4294967295,U=X+(H<<20&4294967295|H>>>12),H=M+(X^Q&(U^X))+q[9]+568446438&4294967295,M=U+(H<<5&4294967295|H>>>27),H=Q+(U^X&(M^U))+q[14]+3275163606&4294967295,Q=M+(H<<9&4294967295|H>>>23),H=X+(M^U&(Q^M))+q[3]+4107603335&4294967295,X=Q+(H<<14&4294967295|H>>>18),H=U+(Q^M&(X^Q))+q[8]+1163531501&4294967295,U=X+(H<<20&4294967295|H>>>12),H=M+(X^Q&(U^X))+q[13]+2850285829&4294967295,M=U+(H<<5&4294967295|H>>>27),H=Q+(U^X&(M^U))+q[2]+4243563512&4294967295,Q=M+(H<<9&4294967295|H>>>23),H=X+(M^U&(Q^M))+q[7]+1735328473&4294967295,X=Q+(H<<14&4294967295|H>>>18),H=U+(Q^M&(X^Q))+q[12]+2368359562&4294967295,U=X+(H<<20&4294967295|H>>>12),H=M+(U^X^Q)+q[5]+4294588738&4294967295,M=U+(H<<4&4294967295|H>>>28),H=Q+(M^U^X)+q[8]+2272392833&4294967295,Q=M+(H<<11&4294967295|H>>>21),H=X+(Q^M^U)+q[11]+1839030562&4294967295,X=Q+(H<<16&4294967295|H>>>16),H=U+(X^Q^M)+q[14]+4259657740&4294967295,U=X+(H<<23&4294967295|H>>>9),H=M+(U^X^Q)+q[1]+2763975236&4294967295,M=U+(H<<4&4294967295|H>>>28),H=Q+(M^U^X)+q[4]+1272893353&4294967295,Q=M+(H<<11&4294967295|H>>>21),H=X+(Q^M^U)+q[7]+4139469664&4294967295,X=Q+(H<<16&4294967295|H>>>16),H=U+(X^Q^M)+q[10]+3200236656&4294967295,U=X+(H<<23&4294967295|H>>>9),H=M+(U^X^Q)+q[13]+681279174&4294967295,M=U+(H<<4&4294967295|H>>>28),H=Q+(M^U^X)+q[0]+3936430074&4294967295,Q=M+(H<<11&4294967295|H>>>21),H=X+(Q^M^U)+q[3]+3572445317&4294967295,X=Q+(H<<16&4294967295|H>>>16),H=U+(X^Q^M)+q[6]+76029189&4294967295,U=X+(H<<23&4294967295|H>>>9),H=M+(U^X^Q)+q[9]+3654602809&4294967295,M=U+(H<<4&4294967295|H>>>28),H=Q+(M^U^X)+q[12]+3873151461&4294967295,Q=M+(H<<11&4294967295|H>>>21),H=X+(Q^M^U)+q[15]+530742520&4294967295,X=Q+(H<<16&4294967295|H>>>16),H=U+(X^Q^M)+q[2]+3299628645&4294967295,U=X+(H<<23&4294967295|H>>>9),H=M+(X^(U|~Q))+q[0]+4096336452&4294967295,M=U+(H<<6&4294967295|H>>>26),H=Q+(U^(M|~X))+q[7]+1126891415&4294967295,Q=M+(H<<10&4294967295|H>>>22),H=X+(M^(Q|~U))+q[14]+2878612391&4294967295,X=Q+(H<<15&4294967295|H>>>17),H=U+(Q^(X|~M))+q[5]+4237533241&4294967295,U=X+(H<<21&4294967295|H>>>11),H=M+(X^(U|~Q))+q[12]+1700485571&4294967295,M=U+(H<<6&4294967295|H>>>26),H=Q+(U^(M|~X))+q[3]+2399980690&4294967295,Q=M+(H<<10&4294967295|H>>>22),H=X+(M^(Q|~U))+q[10]+4293915773&4294967295,X=Q+(H<<15&4294967295|H>>>17),H=U+(Q^(X|~M))+q[1]+2240044497&4294967295,U=X+(H<<21&4294967295|H>>>11),H=M+(X^(U|~Q))+q[8]+1873313359&4294967295,M=U+(H<<6&4294967295|H>>>26),H=Q+(U^(M|~X))+q[15]+4264355552&4294967295,Q=M+(H<<10&4294967295|H>>>22),H=X+(M^(Q|~U))+q[6]+2734768916&4294967295,X=Q+(H<<15&4294967295|H>>>17),H=U+(Q^(X|~M))+q[13]+1309151649&4294967295,U=X+(H<<21&4294967295|H>>>11),H=M+(X^(U|~Q))+q[4]+4149444226&4294967295,M=U+(H<<6&4294967295|H>>>26),H=Q+(U^(M|~X))+q[11]+3174756917&4294967295,Q=M+(H<<10&4294967295|H>>>22),H=X+(M^(Q|~U))+q[2]+718787259&4294967295,X=Q+(H<<15&4294967295|H>>>17),H=U+(Q^(X|~M))+q[9]+3951481745&4294967295,z.g[0]=z.g[0]+M&4294967295,z.g[1]=z.g[1]+(X+(H<<21&4294967295|H>>>11))&4294967295,z.g[2]=z.g[2]+X&4294967295,z.g[3]=z.g[3]+Q&4294967295}i.prototype.u=function(z,M){M===void 0&&(M=z.length);for(var U=M-this.blockSize,q=this.B,X=this.h,Q=0;Q<M;){if(X==0)for(;Q<=U;)s(this,z,Q),Q+=this.blockSize;if(typeof z=="string"){for(;Q<M;)if(q[X++]=z.charCodeAt(Q++),X==this.blockSize){s(this,q),X=0;break}}else for(;Q<M;)if(q[X++]=z[Q++],X==this.blockSize){s(this,q),X=0;break}}this.h=X,this.o+=M},i.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var M=1;M<z.length-8;++M)z[M]=0;var U=8*this.o;for(M=z.length-8;M<z.length;++M)z[M]=U&255,U/=256;for(this.u(z),z=Array(16),M=U=0;4>M;++M)for(var q=0;32>q;q+=8)z[U++]=this.g[M]>>>q&255;return z};function l(z,M){var U=f;return Object.prototype.hasOwnProperty.call(U,z)?U[z]:U[z]=M(z)}function c(z,M){this.h=M;for(var U=[],q=!0,X=z.length-1;0<=X;X--){var Q=z[X]|0;q&&Q==M||(U[X]=Q,q=!1)}this.g=U}var f={};function m(z){return-128<=z&&128>z?l(z,function(M){return new c([M|0],0>M?-1:0)}):new c([z|0],0>z?-1:0)}function g(z){if(isNaN(z)||!isFinite(z))return S;if(0>z)return V(g(-z));for(var M=[],U=1,q=0;z>=U;q++)M[q]=z/U|0,U*=4294967296;return new c(M,0)}function A(z,M){if(z.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(z.charAt(0)=="-")return V(A(z.substring(1),M));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var U=g(Math.pow(M,8)),q=S,X=0;X<z.length;X+=8){var Q=Math.min(8,z.length-X),H=parseInt(z.substring(X,X+Q),M);8>Q?(Q=g(Math.pow(M,Q)),q=q.j(Q).add(g(H))):(q=q.j(U),q=q.add(g(H)))}return q}var S=m(0),T=m(1),x=m(16777216);n=c.prototype,n.m=function(){if(L(this))return-V(this).m();for(var z=0,M=1,U=0;U<this.g.length;U++){var q=this.i(U);z+=(0<=q?q:4294967296+q)*M,M*=4294967296}return z},n.toString=function(z){if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(w(this))return"0";if(L(this))return"-"+V(this).toString(z);for(var M=g(Math.pow(z,6)),U=this,q="";;){var X=et(U,M).g;U=G(U,X.j(M));var Q=((0<U.g.length?U.g[0]:U.h)>>>0).toString(z);if(U=X,w(U))return Q+q;for(;6>Q.length;)Q="0"+Q;q=Q+q}},n.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h};function w(z){if(z.h!=0)return!1;for(var M=0;M<z.g.length;M++)if(z.g[M]!=0)return!1;return!0}function L(z){return z.h==-1}n.l=function(z){return z=G(this,z),L(z)?-1:w(z)?0:1};function V(z){for(var M=z.g.length,U=[],q=0;q<M;q++)U[q]=~z.g[q];return new c(U,~z.h).add(T)}n.abs=function(){return L(this)?V(this):this},n.add=function(z){for(var M=Math.max(this.g.length,z.g.length),U=[],q=0,X=0;X<=M;X++){var Q=q+(this.i(X)&65535)+(z.i(X)&65535),H=(Q>>>16)+(this.i(X)>>>16)+(z.i(X)>>>16);q=H>>>16,Q&=65535,H&=65535,U[X]=H<<16|Q}return new c(U,U[U.length-1]&-2147483648?-1:0)};function G(z,M){return z.add(V(M))}n.j=function(z){if(w(this)||w(z))return S;if(L(this))return L(z)?V(this).j(V(z)):V(V(this).j(z));if(L(z))return V(this.j(V(z)));if(0>this.l(x)&&0>z.l(x))return g(this.m()*z.m());for(var M=this.g.length+z.g.length,U=[],q=0;q<2*M;q++)U[q]=0;for(q=0;q<this.g.length;q++)for(var X=0;X<z.g.length;X++){var Q=this.i(q)>>>16,H=this.i(q)&65535,Ft=z.i(X)>>>16,Pt=z.i(X)&65535;U[2*q+2*X]+=H*Pt,B(U,2*q+2*X),U[2*q+2*X+1]+=Q*Pt,B(U,2*q+2*X+1),U[2*q+2*X+1]+=H*Ft,B(U,2*q+2*X+1),U[2*q+2*X+2]+=Q*Ft,B(U,2*q+2*X+2)}for(q=0;q<M;q++)U[q]=U[2*q+1]<<16|U[2*q];for(q=M;q<2*M;q++)U[q]=0;return new c(U,0)};function B(z,M){for(;(z[M]&65535)!=z[M];)z[M+1]+=z[M]>>>16,z[M]&=65535,M++}function Y(z,M){this.g=z,this.h=M}function et(z,M){if(w(M))throw Error("division by zero");if(w(z))return new Y(S,S);if(L(z))return M=et(V(z),M),new Y(V(M.g),V(M.h));if(L(M))return M=et(z,V(M)),new Y(V(M.g),M.h);if(30<z.g.length){if(L(z)||L(M))throw Error("slowDivide_ only works with positive integers.");for(var U=T,q=M;0>=q.l(z);)U=at(U),q=at(q);var X=tt(U,1),Q=tt(q,1);for(q=tt(q,2),U=tt(U,2);!w(q);){var H=Q.add(q);0>=H.l(z)&&(X=X.add(U),Q=H),q=tt(q,1),U=tt(U,1)}return M=G(z,X.j(M)),new Y(X,M)}for(X=S;0<=z.l(M);){for(U=Math.max(1,Math.floor(z.m()/M.m())),q=Math.ceil(Math.log(U)/Math.LN2),q=48>=q?1:Math.pow(2,q-48),Q=g(U),H=Q.j(M);L(H)||0<H.l(z);)U-=q,Q=g(U),H=Q.j(M);w(Q)&&(Q=T),X=X.add(Q),z=G(z,H)}return new Y(X,z)}n.A=function(z){return et(this,z).h},n.and=function(z){for(var M=Math.max(this.g.length,z.g.length),U=[],q=0;q<M;q++)U[q]=this.i(q)&z.i(q);return new c(U,this.h&z.h)},n.or=function(z){for(var M=Math.max(this.g.length,z.g.length),U=[],q=0;q<M;q++)U[q]=this.i(q)|z.i(q);return new c(U,this.h|z.h)},n.xor=function(z){for(var M=Math.max(this.g.length,z.g.length),U=[],q=0;q<M;q++)U[q]=this.i(q)^z.i(q);return new c(U,this.h^z.h)};function at(z){for(var M=z.g.length+1,U=[],q=0;q<M;q++)U[q]=z.i(q)<<1|z.i(q-1)>>>31;return new c(U,z.h)}function tt(z,M){var U=M>>5;M%=32;for(var q=z.g.length-U,X=[],Q=0;Q<q;Q++)X[Q]=0<M?z.i(Q+U)>>>M|z.i(Q+U+1)<<32-M:z.i(Q+U);return new c(X,z.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,a5=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=A,Wc=c}).apply(typeof vT<"u"?vT:typeof self<"u"?self:typeof window<"u"?window:{});var ay=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var r5,vg,l5,Ny,W2,o5,u5,c5;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,R,D){return _==Array.prototype||_==Object.prototype||(_[R]=D.value),_};function e(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof ay=="object"&&ay];for(var R=0;R<_.length;++R){var D=_[R];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var i=e(this);function s(_,R){if(R)t:{var D=i;_=_.split(".");for(var P=0;P<_.length-1;P++){var rt=_[P];if(!(rt in D))break t;D=D[rt]}_=_[_.length-1],P=D[_],R=R(P),R!=P&&R!=null&&t(D,_,{configurable:!0,writable:!0,value:R})}}function l(_,R){_ instanceof String&&(_+="");var D=0,P=!1,rt={next:function(){if(!P&&D<_.length){var mt=D++;return{value:R(mt,_[mt]),done:!1}}return P=!0,{done:!0,value:void 0}}};return rt[Symbol.iterator]=function(){return rt},rt}s("Array.prototype.values",function(_){return _||function(){return l(this,function(R,D){return D})}});var c=c||{},f=this||self;function m(_){var R=typeof _;return R=R!="object"?R:_?Array.isArray(_)?"array":R:"null",R=="array"||R=="object"&&typeof _.length=="number"}function g(_){var R=typeof _;return R=="object"&&_!=null||R=="function"}function A(_,R,D){return _.call.apply(_.bind,arguments)}function S(_,R,D){if(!_)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var rt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(rt,P),_.apply(R,rt)}}return function(){return _.apply(R,arguments)}}function T(_,R,D){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:S,T.apply(null,arguments)}function x(_,R){var D=Array.prototype.slice.call(arguments,1);return function(){var P=D.slice();return P.push.apply(P,arguments),_.apply(this,P)}}function w(_,R){function D(){}D.prototype=R.prototype,_.aa=R.prototype,_.prototype=new D,_.prototype.constructor=_,_.Qb=function(P,rt,mt){for(var It=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)It[qe-2]=arguments[qe];return R.prototype[rt].apply(P,It)}}function L(_){const R=_.length;if(0<R){const D=Array(R);for(let P=0;P<R;P++)D[P]=_[P];return D}return[]}function V(_,R){for(let D=1;D<arguments.length;D++){const P=arguments[D];if(m(P)){const rt=_.length||0,mt=P.length||0;_.length=rt+mt;for(let It=0;It<mt;It++)_[rt+It]=P[It]}else _.push(P)}}class G{constructor(R,D){this.i=R,this.j=D,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function B(_){return/^[\s\xa0]*$/.test(_)}function Y(){var _=f.navigator;return _&&(_=_.userAgent)?_:""}function et(_){return et[" "](_),_}et[" "]=function(){};var at=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function tt(_,R,D){for(const P in _)R.call(D,_[P],P,_)}function z(_,R){for(const D in _)R.call(void 0,_[D],D,_)}function M(_){const R={};for(const D in _)R[D]=_[D];return R}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(_,R){let D,P;for(let rt=1;rt<arguments.length;rt++){P=arguments[rt];for(D in P)_[D]=P[D];for(let mt=0;mt<U.length;mt++)D=U[mt],Object.prototype.hasOwnProperty.call(P,D)&&(_[D]=P[D])}}function X(_){var R=1;_=_.split(":");const D=[];for(;0<R&&_.length;)D.push(_.shift()),R--;return _.length&&D.push(_.join(":")),D}function Q(_){f.setTimeout(()=>{throw _},0)}function H(){var _=Ut;let R=null;return _.g&&(R=_.g,_.g=_.g.next,_.g||(_.h=null),R.next=null),R}class Ft{constructor(){this.h=this.g=null}add(R,D){const P=Pt.get();P.set(R,D),this.h?this.h.next=P:this.g=P,this.h=P}}var Pt=new G(()=>new $,_=>_.reset());class ${constructor(){this.next=this.g=this.h=null}set(R,D){this.h=R,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let Tt,Et=!1,Ut=new Ft,qt=()=>{const _=f.Promise.resolve(void 0);Tt=()=>{_.then(K)}};var K=()=>{for(var _;_=H();){try{_.h.call(_.g)}catch(D){Q(D)}var R=Pt;R.j(_),100>R.h&&(R.h++,_.next=R.g,R.g=_)}Et=!1};function ht(){this.s=this.s,this.C=this.C}ht.prototype.s=!1,ht.prototype.ma=function(){this.s||(this.s=!0,this.N())},ht.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _t(_,R){this.type=_,this.g=this.target=R,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var jt=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var _=!1,R=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const D=()=>{};f.addEventListener("test",D,R),f.removeEventListener("test",D,R)}catch{}return _})();function Yt(_,R){if(_t.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var D=this.type=_.type,P=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=R,R=_.relatedTarget){if(at){t:{try{et(R.nodeName);var rt=!0;break t}catch{}rt=!1}rt||(R=null)}}else D=="mouseover"?R=_.fromElement:D=="mouseout"&&(R=_.toElement);this.relatedTarget=R,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:te[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&Yt.aa.h.call(this)}}w(Yt,_t);var te={2:"touch",3:"pen",4:"mouse"};Yt.prototype.h=function(){Yt.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Rt="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function Oe(_,R,D,P,rt){this.listener=_,this.proxy=null,this.src=R,this.type=D,this.capture=!!P,this.ha=rt,this.key=++Ge,this.da=this.fa=!1}function as(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ua(_){this.src=_,this.g={},this.h=0}ua.prototype.add=function(_,R,D,P,rt){var mt=_.toString();_=this.g[mt],_||(_=this.g[mt]=[],this.h++);var It=ws(_,R,P,rt);return-1<It?(R=_[It],D||(R.fa=!1)):(R=new Oe(R,this.src,mt,!!P,rt),R.fa=D,_.push(R)),R};function Li(_,R){var D=R.type;if(D in _.g){var P=_.g[D],rt=Array.prototype.indexOf.call(P,R,void 0),mt;(mt=0<=rt)&&Array.prototype.splice.call(P,rt,1),mt&&(as(R),_.g[D].length==0&&(delete _.g[D],_.h--))}}function ws(_,R,D,P){for(var rt=0;rt<_.length;++rt){var mt=_[rt];if(!mt.da&&mt.listener==R&&mt.capture==!!D&&mt.ha==P)return rt}return-1}var rs="closure_lm_"+(1e6*Math.random()|0),Ys={};function ls(_,R,D,P,rt){if(Array.isArray(R)){for(var mt=0;mt<R.length;mt++)ls(_,R[mt],D,P,rt);return null}return D=zo(D),_&&_[Rt]?_.K(R,D,g(P)?!!P.capture:!1,rt):Qs(_,R,D,!1,P,rt)}function Qs(_,R,D,P,rt,mt){if(!R)throw Error("Invalid event type");var It=g(rt)?!!rt.capture:!!rt,qe=Nn(_);if(qe||(_[rs]=qe=new ua(_)),D=qe.add(R,D,P,It,mt),D.proxy)return D;if(P=Yl(),D.proxy=P,P.src=_,P.listener=D,_.addEventListener)jt||(rt=It),rt===void 0&&(rt=!1),_.addEventListener(R.toString(),P,rt);else if(_.attachEvent)_.attachEvent(Ha(R.toString()),P);else if(_.addListener&&_.removeListener)_.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Yl(){function _(D){return R.call(_.src,_.listener,D)}const R=qa;return _}function mr(_,R,D,P,rt){if(Array.isArray(R))for(var mt=0;mt<R.length;mt++)mr(_,R[mt],D,P,rt);else P=g(P)?!!P.capture:!!P,D=zo(D),_&&_[Rt]?(_=_.i,R=String(R).toString(),R in _.g&&(mt=_.g[R],D=ws(mt,D,P,rt),-1<D&&(as(mt[D]),Array.prototype.splice.call(mt,D,1),mt.length==0&&(delete _.g[R],_.h--)))):_&&(_=Nn(_))&&(R=_.g[R.toString()],_=-1,R&&(_=ws(R,D,P,rt)),(D=-1<_?R[_]:null)&&xs(D))}function xs(_){if(typeof _!="number"&&_&&!_.da){var R=_.src;if(R&&R[Rt])Li(R.i,_);else{var D=_.type,P=_.proxy;R.removeEventListener?R.removeEventListener(D,P,_.capture):R.detachEvent?R.detachEvent(Ha(D),P):R.addListener&&R.removeListener&&R.removeListener(P),(D=Nn(R))?(Li(D,_),D.h==0&&(D.src=null,R[rs]=null)):as(_)}}}function Ha(_){return _ in Ys?Ys[_]:Ys[_]="on"+_}function qa(_,R){if(_.da)_=!0;else{R=new Yt(R,this);var D=_.listener,P=_.ha||_.src;_.fa&&xs(_),_=D.call(P,R)}return _}function Nn(_){return _=_[rs],_ instanceof ua?_:null}var jn="__closure_events_fn_"+(1e9*Math.random()>>>0);function zo(_){return typeof _=="function"?_:(_[jn]||(_[jn]=function(R){return _.handleEvent(R)}),_[jn])}function Dn(){ht.call(this),this.i=new ua(this),this.M=this,this.F=null}w(Dn,ht),Dn.prototype[Rt]=!0,Dn.prototype.removeEventListener=function(_,R,D,P){mr(this,_,R,D,P)};function rn(_,R){var D,P=_.F;if(P)for(D=[];P;P=P.F)D.push(P);if(_=_.M,P=R.type||R,typeof R=="string")R=new _t(R,_);else if(R instanceof _t)R.target=R.target||_;else{var rt=R;R=new _t(P,_),q(R,rt)}if(rt=!0,D)for(var mt=D.length-1;0<=mt;mt--){var It=R.g=D[mt];rt=Fi(It,P,!0,R)&&rt}if(It=R.g=_,rt=Fi(It,P,!0,R)&&rt,rt=Fi(It,P,!1,R)&&rt,D)for(mt=0;mt<D.length;mt++)It=R.g=D[mt],rt=Fi(It,P,!1,R)&&rt}Dn.prototype.N=function(){if(Dn.aa.N.call(this),this.i){var _=this.i,R;for(R in _.g){for(var D=_.g[R],P=0;P<D.length;P++)as(D[P]);delete _.g[R],_.h--}}this.F=null},Dn.prototype.K=function(_,R,D,P){return this.i.add(String(_),R,!1,D,P)},Dn.prototype.L=function(_,R,D,P){return this.i.add(String(_),R,!0,D,P)};function Fi(_,R,D,P){if(R=_.i.g[String(R)],!R)return!0;R=R.concat();for(var rt=!0,mt=0;mt<R.length;++mt){var It=R[mt];if(It&&!It.da&&It.capture==D){var qe=It.listener,Qn=It.ha||It.src;It.fa&&Li(_.i,It),rt=qe.call(Qn,P)!==!1&&rt}}return rt&&!P.defaultPrevented}function os(_,R,D){if(typeof _=="function")D&&(_=T(_,D));else if(_&&typeof _.handleEvent=="function")_=T(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(R)?-1:f.setTimeout(_,R||0)}function ca(_){_.g=os(()=>{_.g=null,_.i&&(_.i=!1,ca(_))},_.l);const R=_.h;_.h=null,_.m.apply(null,R)}class vt extends ht{constructor(R,D){super(),this.m=R,this.l=D,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:ca(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lt(_){ht.call(this),this.h=_,this.g={}}w(Lt,ht);var Kt=[];function ne(_){tt(_.g,function(R,D){this.g.hasOwnProperty(D)&&xs(R)},_),_.g={}}Lt.prototype.N=function(){Lt.aa.N.call(this),ne(this)},Lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Me=f.JSON.stringify,ni=f.JSON.parse,Fa=class{stringify(_){return f.JSON.stringify(_,void 0)}parse(_){return f.JSON.parse(_,void 0)}};function ha(){}ha.prototype.h=null;function Ql(_){return _.h||(_.h=_.i())}function pr(){}var fa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ya(){_t.call(this,"d")}w(Ya,_t);function da(){_t.call(this,"c")}w(da,_t);var us={},nl=null;function Bo(){return nl=nl||new Dn}us.La="serverreachability";function Qa(_){_t.call(this,us.La,_)}w(Qa,_t);function gr(_){const R=Bo();rn(R,new Qa(R))}us.STAT_EVENT="statevent";function il(_,R){_t.call(this,us.STAT_EVENT,_),this.stat=R}w(il,_t);function ii(_){const R=Bo();rn(R,new il(R,_))}us.Ma="timingevent";function sl(_,R){_t.call(this,us.Ma,_),this.size=R}w(sl,_t);function Xa(_,R){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){_()},R)}function al(){this.g=!0}al.prototype.xa=function(){this.g=!1};function Xl(_,R,D,P,rt,mt){_.info(function(){if(_.g)if(mt)for(var It="",qe=mt.split("&"),Qn=0;Qn<qe.length;Qn++){var ge=qe[Qn].split("=");if(1<ge.length){var hi=ge[0];ge=ge[1];var si=hi.split("_");It=2<=si.length&&si[1]=="type"?It+(hi+"="+ge+"&"):It+(hi+"=redacted&")}}else It=null;else It=mt;return"XMLHTTP REQ ("+P+") [attempt "+rt+"]: "+R+`
`+D+`
`+It})}function Kl(_,R,D,P,rt,mt,It){_.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+rt+"]: "+R+`
`+D+`
`+mt+" "+It})}function Ka(_,R,D,P){_.info(function(){return"XMLHTTP TEXT ("+R+"): "+Wa(_,D)+(P?" "+P:"")})}function _r(_,R){_.info(function(){return"TIMEOUT: "+R})}al.prototype.info=function(){};function Wa(_,R){if(!_.g)return R;if(!R)return null;try{var D=JSON.parse(R);if(D){for(_=0;_<D.length;_++)if(Array.isArray(D[_])){var P=D[_];if(!(2>P.length)){var rt=P[1];if(Array.isArray(rt)&&!(1>rt.length)){var mt=rt[0];if(mt!="noop"&&mt!="stop"&&mt!="close")for(var It=1;It<rt.length;It++)rt[It]=""}}}}return Me(D)}catch{return R}}var pn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ui={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ma;function cs(){}w(cs,ha),cs.prototype.g=function(){return new XMLHttpRequest},cs.prototype.i=function(){return{}},ma=new cs;function Vi(_,R,D,P){this.j=_,this.i=R,this.l=D,this.R=P||1,this.U=new Lt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wl}function Wl(){this.i=null,this.g="",this.h=!1}var jo={},Xs={};function Ja(_,R,D){_.L=1,_.v=ol(un(R)),_.m=D,_.P=!0,yr(_,null)}function yr(_,R){_.F=Date.now(),Ks(_),_.A=un(_.v);var D=_.A,P=_.R;Array.isArray(P)||(P=[String(P)]),Tr(D.i,"t",P),_.C=0,D=_.j.J,_.h=new Wl,_.g=Vh(_.j,D?R:null,!_.m),0<_.O&&(_.M=new vt(T(_.Y,_,_.g),_.O)),R=_.U,D=_.g,P=_.ca;var rt="readystatechange";Array.isArray(rt)||(rt&&(Kt[0]=rt.toString()),rt=Kt);for(var mt=0;mt<rt.length;mt++){var It=ls(D,rt[mt],P||R.handleEvent,!1,R.h||R);if(!It)break;R.g[It.key]=It}R=_.H?M(_.H):{},_.m?(_.u||(_.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,R)):(_.u="GET",_.g.ea(_.A,_.u,null,R)),gr(),Xl(_.i,_.u,_.A,_.l,_.R,_.m)}Vi.prototype.ca=function(_){_=_.target;const R=this.M;R&&Qi(_)==3?R.j():this.Y(_)},Vi.prototype.Y=function(_){try{if(_==this.g)t:{const si=Qi(this.g);var R=this.g.Ba();const xr=this.g.Z();if(!(3>si)&&(si!=3||this.g&&(this.h.h||this.g.oa()||cl(this.g)))){this.J||si!=4||R==7||(R==8||0>=xr?gr(3):gr(2)),Ws(this);var D=this.g.Z();this.X=D;e:if(vr(this)){var P=cl(this.g);_="";var rt=P.length,mt=Qi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yi(this),Ar(this);var It="";break e}this.h.i=new f.TextDecoder}for(R=0;R<rt;R++)this.h.h=!0,_+=this.h.i.decode(P[R],{stream:!(mt&&R==rt-1)});P.length=0,this.h.g+=_,this.C=0,It=this.h.g}else It=this.g.oa();if(this.o=D==200,Kl(this.i,this.u,this.A,this.l,this.R,si,D),this.o){if(this.T&&!this.K){e:{if(this.g){var qe,Qn=this.g;if((qe=Qn.g?Qn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(qe)){var ge=qe;break e}}ge=null}if(D=ge)Ka(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ki(this,D);else{this.o=!1,this.s=3,ii(12),Yi(this),Ar(this);break t}}if(this.P){D=!0;let ps;for(;!this.J&&this.C<It.length;)if(ps=Jl(this,It),ps==Xs){si==4&&(this.s=4,ii(14),D=!1),Ka(this.i,this.l,null,"[Incomplete Response]");break}else if(ps==jo){this.s=4,ii(15),Ka(this.i,this.l,It,"[Invalid Chunk]"),D=!1;break}else Ka(this.i,this.l,ps,null),ki(this,ps);if(vr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),si!=4||It.length!=0||this.h.h||(this.s=1,ii(16),D=!1),this.o=this.o&&D,!D)Ka(this.i,this.l,It,"[Invalid Chunked Response]"),Yi(this),Ar(this);else if(0<It.length&&!this.W){this.W=!0;var hi=this.j;hi.g==this&&hi.ba&&!hi.M&&(hi.j.info("Great, no buffering proxy detected. Bytes received: "+It.length),Ju(hi),hi.M=!0,ii(11))}}else Ka(this.i,this.l,It,null),ki(this,It);si==4&&Yi(this),this.o&&!this.J&&(si==4?Lh(this.j,this):(this.o=!1,Ks(this)))}else Dh(this.g),D==400&&0<It.indexOf("Unknown SID")?(this.s=3,ii(12)):(this.s=0,ii(13)),Yi(this),Ar(this)}}}catch{}};function vr(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function Jl(_,R){var D=_.C,P=R.indexOf(`
`,D);return P==-1?Xs:(D=Number(R.substring(D,P)),isNaN(D)?jo:(P+=1,P+D>R.length?Xs:(R=R.slice(P,P+D),_.C=P+D,R)))}Vi.prototype.cancel=function(){this.J=!0,Yi(this)};function Ks(_){_.S=Date.now()+_.I,In(_,_.I)}function In(_,R){if(_.B!=null)throw Error("WatchDog timer not null");_.B=Xa(T(_.ba,_),R)}function Ws(_){_.B&&(f.clearTimeout(_.B),_.B=null)}Vi.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(_r(this.i,this.A),this.L!=2&&(gr(),ii(17)),Yi(this),this.s=2,Ar(this)):In(this,this.S-_)};function Ar(_){_.j.G==0||_.J||Lh(_.j,_)}function Yi(_){Ws(_);var R=_.M;R&&typeof R.ma=="function"&&R.ma(),_.M=null,ne(_.U),_.g&&(R=_.g,_.g=null,R.abort(),R.ma())}function ki(_,R){try{var D=_.j;if(D.G!=0&&(D.g==_||Er(D.h,_))){if(!_.K&&Er(D.h,_)&&D.G==3){try{var P=D.Da.g.parse(R)}catch{P=null}if(Array.isArray(P)&&P.length==3){var rt=P;if(rt[0]==0){t:if(!D.u){if(D.g)if(D.g.F+3e3<_.F)fl(D),hl(D);else break t;Wu(D),ii(18)}}else D.za=rt[1],0<D.za-D.T&&37500>rt[2]&&D.F&&D.v==0&&!D.C&&(D.C=Xa(T(D.Za,D),6e3));if(1>=qu(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else _a(D,11)}else if((_.K||D.g==_)&&fl(D),!B(R))for(rt=D.Da.g.parse(R),R=0;R<rt.length;R++){let ge=rt[R];if(D.T=ge[0],ge=ge[1],D.G==2)if(ge[0]=="c"){D.K=ge[1],D.ia=ge[2];const hi=ge[3];hi!=null&&(D.la=hi,D.j.info("VER="+D.la));const si=ge[4];si!=null&&(D.Aa=si,D.j.info("SVER="+D.Aa));const xr=ge[5];xr!=null&&typeof xr=="number"&&0<xr&&(P=1.5*xr,D.L=P,D.j.info("backChannelRequestTimeoutMs_="+P)),P=D;const ps=_.g;if(ps){const ml=ps.g?ps.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ml){var mt=P.h;mt.g||ml.indexOf("spdy")==-1&&ml.indexOf("quic")==-1&&ml.indexOf("h2")==-1||(mt.j=mt.l,mt.g=new Set,mt.h&&(rl(mt,mt.h),mt.h=null))}if(P.D){const ya=ps.g?ps.g.getResponseHeader("X-HTTP-Session-Id"):null;ya&&(P.ya=ya,Le(P.I,P.D,ya))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-_.F,D.j.info("Handshake RTT: "+D.R+"ms")),P=D;var It=_;if(P.qa=tc(P,P.J?P.ia:null,P.W),It.K){Js(P.h,It);var qe=It,Qn=P.L;Qn&&(qe.I=Qn),qe.B&&(Ws(qe),Ks(qe)),P.g=It}else Xo(P);0<D.i.length&&Ku(D)}else ge[0]!="stop"&&ge[0]!="close"||_a(D,7);else D.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?_a(D,7):Yo(D):ge[0]!="noop"&&D.l&&D.l.ta(ge),D.v=0)}}gr(4)}catch{}}var hs=class{constructor(_,R){this.g=_,this.map=R}};function Zl(_){this.l=_||10,f.PerformanceNavigationTiming?(_=f.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ln(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function qu(_){return _.h?1:_.g?_.g.size:0}function Er(_,R){return _.h?_.h==R:_.g?_.g.has(R):!1}function rl(_,R){_.g?_.g.add(R):_.h=R}function Js(_,R){_.h&&_.h==R?_.h=null:_.g&&_.g.has(R)&&_.g.delete(R)}Zl.prototype.cancel=function(){if(this.i=fs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function fs(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let R=_.i;for(const D of _.g.values())R=R.concat(D.D);return R}return L(_.i)}function Fu(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(m(_)){for(var R=[],D=_.length,P=0;P<D;P++)R.push(_[P]);return R}R=[],D=0;for(P in _)R[D++]=_[P];return R}function Th(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(m(_)||typeof _=="string"){var R=[];_=_.length;for(var D=0;D<_;D++)R.push(D);return R}R=[],D=0;for(const P in _)R[D++]=P;return R}}}function $l(_,R){if(_.forEach&&typeof _.forEach=="function")_.forEach(R,void 0);else if(m(_)||typeof _=="string")Array.prototype.forEach.call(_,R,void 0);else for(var D=Th(_),P=Fu(_),rt=P.length,mt=0;mt<rt;mt++)R.call(void 0,P[mt],D&&D[mt],_)}var ci=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function on(_,R){if(_){_=_.split("&");for(var D=0;D<_.length;D++){var P=_[D].indexOf("="),rt=null;if(0<=P){var mt=_[D].substring(0,P);rt=_[D].substring(P+1)}else mt=_[D];R(mt,rt?decodeURIComponent(rt.replace(/\+/g," ")):"")}}}function pa(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof pa){this.h=_.h,Za(this,_.j),this.o=_.o,this.g=_.g,ll(this,_.s),this.l=_.l;var R=_.i,D=new $a;D.i=R.i,R.g&&(D.g=new Map(R.g),D.h=R.h),Ns(this,D),this.m=_.m}else _&&(R=String(_).match(ci))?(this.h=!1,Za(this,R[1]||"",!0),this.o=Sr(R[2]||""),this.g=Sr(R[3]||"",!0),ll(this,R[4]),this.l=Sr(R[5]||"",!0),Ns(this,R[6]||"",!0),this.m=Sr(R[7]||"")):(this.h=!1,this.i=new $a(null,this.h))}pa.prototype.toString=function(){var _=[],R=this.j;R&&_.push(Zs(R,Yu,!0),":");var D=this.g;return(D||R=="file")&&(_.push("//"),(R=this.o)&&_.push(Zs(R,Yu,!0),"@"),_.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&_.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&_.push("/"),_.push(Zs(D,D.charAt(0)=="/"?Qu:bh,!0))),(D=this.i.toString())&&_.push("?",D),(D=this.m)&&_.push("#",Zs(D,Ch)),_.join("")};function un(_){return new pa(_)}function Za(_,R,D){_.j=D?Sr(R,!0):R,_.j&&(_.j=_.j.replace(/:$/,""))}function ll(_,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);_.s=R}else _.s=null}function Ns(_,R,D){R instanceof $a?(_.i=R,Rh(_.i,_.h)):(D||(R=Zs(R,Zf)),_.i=new $a(R,_.h))}function Le(_,R,D){_.i.set(R,D)}function ol(_){return Le(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function Sr(_,R){return _?R?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Zs(_,R,D){return typeof _=="string"?(_=encodeURI(_).replace(R,Jf),D&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Jf(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var Yu=/[#\/\?@]/g,bh=/[#\?:]/g,Qu=/[#\?]/g,Zf=/[#\?@]/g,Ch=/#/g;function $a(_,R){this.h=this.g=null,this.i=_||null,this.j=!!R}function vi(_){_.g||(_.g=new Map,_.h=0,_.i&&on(_.i,function(R,D){_.add(decodeURIComponent(R.replace(/\+/g," ")),D)}))}n=$a.prototype,n.add=function(_,R){vi(this),this.i=null,_=ds(this,_);var D=this.g.get(_);return D||this.g.set(_,D=[]),D.push(R),this.h+=1,this};function Go(_,R){vi(_),R=ds(_,R),_.g.has(R)&&(_.i=null,_.h-=_.g.get(R).length,_.g.delete(R))}function Ho(_,R){return vi(_),R=ds(_,R),_.g.has(R)}n.forEach=function(_,R){vi(this),this.g.forEach(function(D,P){D.forEach(function(rt){_.call(R,rt,P,this)},this)},this)},n.na=function(){vi(this);const _=Array.from(this.g.values()),R=Array.from(this.g.keys()),D=[];for(let P=0;P<R.length;P++){const rt=_[P];for(let mt=0;mt<rt.length;mt++)D.push(R[P])}return D},n.V=function(_){vi(this);let R=[];if(typeof _=="string")Ho(this,_)&&(R=R.concat(this.g.get(ds(this,_))));else{_=Array.from(this.g.values());for(let D=0;D<_.length;D++)R=R.concat(_[D])}return R},n.set=function(_,R){return vi(this),this.i=null,_=ds(this,_),Ho(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[R]),this.h+=1,this},n.get=function(_,R){return _?(_=this.V(_),0<_.length?String(_[0]):R):R};function Tr(_,R,D){Go(_,R),0<D.length&&(_.i=null,_.g.set(ds(_,R),L(D)),_.h+=D.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],R=Array.from(this.g.keys());for(var D=0;D<R.length;D++){var P=R[D];const mt=encodeURIComponent(String(P)),It=this.V(P);for(P=0;P<It.length;P++){var rt=mt;It[P]!==""&&(rt+="="+encodeURIComponent(String(It[P]))),_.push(rt)}}return this.i=_.join("&")};function ds(_,R){return R=String(R),_.j&&(R=R.toLowerCase()),R}function Rh(_,R){R&&!_.j&&(vi(_),_.i=null,_.g.forEach(function(D,P){var rt=P.toLowerCase();P!=rt&&(Go(this,P),Tr(this,rt,D))},_)),_.j=R}function Xu(_,R){const D=new al;if(f.Image){const P=new Image;P.onload=x(ms,D,"TestLoadImage: loaded",!0,R,P),P.onerror=x(ms,D,"TestLoadImage: error",!1,R,P),P.onabort=x(ms,D,"TestLoadImage: abort",!1,R,P),P.ontimeout=x(ms,D,"TestLoadImage: timeout",!1,R,P),f.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=_}else R(!1)}function wh(_,R){const D=new al,P=new AbortController,rt=setTimeout(()=>{P.abort(),ms(D,"TestPingServer: timeout",!1,R)},1e4);fetch(_,{signal:P.signal}).then(mt=>{clearTimeout(rt),mt.ok?ms(D,"TestPingServer: ok",!0,R):ms(D,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(rt),ms(D,"TestPingServer: error",!1,R)})}function ms(_,R,D,P,rt){try{rt&&(rt.onload=null,rt.onerror=null,rt.onabort=null,rt.ontimeout=null),P(D)}catch{}}function ga(){this.g=new Fa}function xh(_,R,D){const P=D||"";try{$l(_,function(rt,mt){let It=rt;g(rt)&&(It=Me(rt)),R.push(P+mt+"="+encodeURIComponent(It))})}catch(rt){throw R.push(P+"type="+encodeURIComponent("_badmap")),rt}}function tr(_){this.l=_.Ub||null,this.j=_.eb||!1}w(tr,ha),tr.prototype.g=function(){return new Ai(this.l,this.j)},tr.prototype.i=(function(_){return function(){return _}})({});function Ai(_,R){Dn.call(this),this.D=_,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ai,Dn),n=Ai.prototype,n.open=function(_,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=R,this.readyState=1,er(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(R.body=_),(this.D||f).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},n.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,er(this)),this.g&&(this.readyState=3,er(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qo(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function qo(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}n.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var R=_.value?_.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!_.done}))&&(this.response=this.responseText+=R)}_.done?$s(this):er(this),this.readyState==3&&qo(this)}},n.Ra=function(_){this.g&&(this.response=this.responseText=_,$s(this))},n.Qa=function(_){this.g&&(this.response=_,$s(this))},n.ga=function(){this.g&&$s(this)};function $s(_){_.readyState=4,_.l=null,_.j=null,_.v=null,er(_)}n.setRequestHeader=function(_,R){this.u.append(_,R)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],R=this.h.entries();for(var D=R.next();!D.done;)D=D.value,_.push(D[0]+": "+D[1]),D=R.next();return _.join(`\r
`)};function er(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function to(_){let R="";return tt(_,function(D,P){R+=P,R+=":",R+=D,R+=`\r
`}),R}function br(_,R,D){t:{for(P in D){var P=!1;break t}P=!0}P||(D=to(D),typeof _=="string"?D!=null&&encodeURIComponent(String(D)):Le(_,R,D))}function gn(_){Dn.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(gn,Dn);var Pi=/^https?$/i,Cr=["POST","PUT"];n=gn.prototype,n.Ha=function(_){this.J=_},n.ea=function(_,R,D,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);R=R?R.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ma.g(),this.v=this.o?Ql(this.o):Ql(ma),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(R,String(_),!0),this.B=!1}catch(mt){eo(this,mt);return}if(_=D||"",D=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var rt in P)D.set(rt,P[rt]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const mt of P.keys())D.set(mt,P.get(mt));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(D.keys()).find(mt=>mt.toLowerCase()=="content-type"),rt=f.FormData&&_ instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Cr,R,void 0))||P||rt||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[mt,It]of D)this.g.setRequestHeader(mt,It);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fo(this),this.u=!0,this.g.send(_),this.u=!1}catch(mt){eo(this,mt)}};function eo(_,R){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=R,_.m=5,ul(_),Rr(_)}function ul(_){_.A||(_.A=!0,rn(_,"complete"),rn(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,rn(this,"complete"),rn(this,"abort"),Rr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rr(this,!0)),gn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Nh(this):this.bb())},n.bb=function(){Nh(this)};function Nh(_){if(_.h&&typeof c<"u"&&(!_.v[1]||Qi(_)!=4||_.Z()!=2)){if(_.u&&Qi(_)==4)os(_.Ea,0,_);else if(rn(_,"readystatechange"),Qi(_)==4){_.h=!1;try{const It=_.Z();t:switch(It){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break t;default:R=!1}var D;if(!(D=R)){var P;if(P=It===0){var rt=String(_.D).match(ci)[1]||null;!rt&&f.self&&f.self.location&&(rt=f.self.location.protocol.slice(0,-1)),P=!Pi.test(rt?rt.toLowerCase():"")}D=P}if(D)rn(_,"complete"),rn(_,"success");else{_.m=6;try{var mt=2<Qi(_)?_.g.statusText:""}catch{mt=""}_.l=mt+" ["+_.Z()+"]",ul(_)}}finally{Rr(_)}}}}function Rr(_,R){if(_.g){Fo(_);const D=_.g,P=_.v[0]?()=>{}:null;_.g=null,_.v=null,R||rn(_,"ready");try{D.onreadystatechange=P}catch{}}}function Fo(_){_.I&&(f.clearTimeout(_.I),_.I=null)}n.isActive=function(){return!!this.g};function Qi(_){return _.g?_.g.readyState:0}n.Z=function(){try{return 2<Qi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(_){if(this.g){var R=this.g.responseText;return _&&R.indexOf(_)==0&&(R=R.substring(_.length)),ni(R)}};function cl(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function Dh(_){const R={};_=(_.g&&2<=Qi(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<_.length;P++){if(B(_[P]))continue;var D=X(_[P]);const rt=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const mt=R[rt]||[];R[rt]=mt,mt.push(D)}z(R,function(P){return P.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function no(_,R,D){return D&&D.internalChannelParams&&D.internalChannelParams[_]||R}function Ih(_){this.Aa=0,this.i=[],this.j=new al,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=no("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=no("baseRetryDelayMs",5e3,_),this.cb=no("retryDelaySeedMs",1e4,_),this.Wa=no("forwardChannelMaxRetries",2,_),this.wa=no("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new Zl(_&&_.concurrentRequestLimit),this.Da=new ga,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ih.prototype,n.la=8,n.G=1,n.connect=function(_,R,D,P){ii(0),this.W=_,this.H=R||{},D&&P!==void 0&&(this.H.OSID=D,this.H.OAID=P),this.F=this.X,this.I=tc(this,null,this.W),Ku(this)};function Yo(_){if(Oh(_),_.G==3){var R=_.U++,D=un(_.I);if(Le(D,"SID",_.K),Le(D,"RID",R),Le(D,"TYPE","terminate"),nr(_,D),R=new Vi(_,_.j,R),R.L=2,R.v=ol(un(D)),D=!1,f.navigator&&f.navigator.sendBeacon)try{D=f.navigator.sendBeacon(R.v.toString(),"")}catch{}!D&&f.Image&&(new Image().src=R.v,D=!0),D||(R.g=Vh(R.j,null),R.g.ea(R.v)),R.F=Date.now(),Ks(R)}$u(_)}function hl(_){_.g&&(Ju(_),_.g.cancel(),_.g=null)}function Oh(_){hl(_),_.u&&(f.clearTimeout(_.u),_.u=null),fl(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&f.clearTimeout(_.s),_.s=null)}function Ku(_){if(!ln(_.h)&&!_.s){_.s=!0;var R=_.Ga;Tt||qt(),Et||(Tt(),Et=!0),Ut.add(R,_),_.B=0}}function Ym(_,R){return qu(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=R.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=Xa(T(_.Ga,_,R),wr(_,_.B)),_.B++,!0)}n.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const rt=new Vi(this,this.j,_);let mt=this.o;if(this.S&&(mt?(mt=M(mt),q(mt,this.S)):mt=this.S),this.m!==null||this.O||(rt.H=mt,mt=null),this.P)t:{for(var R=0,D=0;D<this.i.length;D++){e:{var P=this.i[D];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break e}P=void 0}if(P===void 0)break;if(R+=P,4096<R){R=D;break t}if(R===4096||D===this.i.length-1){R=D+1;break t}}R=1e3}else R=1e3;R=Qo(this,rt,R),D=un(this.I),Le(D,"RID",_),Le(D,"CVER",22),this.D&&Le(D,"X-HTTP-Session-Id",this.D),nr(this,D),mt&&(this.O?R="headers="+encodeURIComponent(String(to(mt)))+"&"+R:this.m&&br(D,this.m,mt)),rl(this.h,rt),this.Ua&&Le(D,"TYPE","init"),this.P?(Le(D,"$req",R),Le(D,"SID","null"),rt.T=!0,Ja(rt,D,null)):Ja(rt,D,R),this.G=2}}else this.G==3&&(_?Mh(this,_):this.i.length==0||ln(this.h)||Mh(this))};function Mh(_,R){var D;R?D=R.l:D=_.U++;const P=un(_.I);Le(P,"SID",_.K),Le(P,"RID",D),Le(P,"AID",_.T),nr(_,P),_.m&&_.o&&br(P,_.m,_.o),D=new Vi(_,_.j,D,_.B+1),_.m===null&&(D.H=_.o),R&&(_.i=R.D.concat(_.i)),R=Qo(_,D,1e3),D.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),rl(_.h,D),Ja(D,P,R)}function nr(_,R){_.H&&tt(_.H,function(D,P){Le(R,P,D)}),_.l&&$l({},function(D,P){Le(R,P,D)})}function Qo(_,R,D){D=Math.min(_.i.length,D);var P=_.l?T(_.l.Na,_.l,_):null;t:{var rt=_.i;let mt=-1;for(;;){const It=["count="+D];mt==-1?0<D?(mt=rt[0].g,It.push("ofs="+mt)):mt=0:It.push("ofs="+mt);let qe=!0;for(let Qn=0;Qn<D;Qn++){let ge=rt[Qn].g;const hi=rt[Qn].map;if(ge-=mt,0>ge)mt=Math.max(0,rt[Qn].g-100),qe=!1;else try{xh(hi,It,"req"+ge+"_")}catch{P&&P(hi)}}if(qe){P=It.join("&");break t}}}return _=_.i.splice(0,D),R.D=_,P}function Xo(_){if(!_.g&&!_.u){_.Y=1;var R=_.Fa;Tt||qt(),Et||(Tt(),Et=!0),Ut.add(R,_),_.v=0}}function Wu(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=Xa(T(_.Fa,_),wr(_,_.v)),_.v++,!0)}n.Fa=function(){if(this.u=null,Zu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=Xa(T(this.ab,this),_)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ii(10),hl(this),Zu(this))};function Ju(_){_.A!=null&&(f.clearTimeout(_.A),_.A=null)}function Zu(_){_.g=new Vi(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var R=un(_.qa);Le(R,"RID","rpc"),Le(R,"SID",_.K),Le(R,"AID",_.T),Le(R,"CI",_.F?"0":"1"),!_.F&&_.ja&&Le(R,"TO",_.ja),Le(R,"TYPE","xmlhttp"),nr(_,R),_.m&&_.o&&br(R,_.m,_.o),_.L&&(_.g.I=_.L);var D=_.g;_=_.ia,D.L=1,D.v=ol(un(R)),D.m=null,D.P=!0,yr(D,_)}n.Za=function(){this.C!=null&&(this.C=null,hl(this),Wu(this),ii(19))};function fl(_){_.C!=null&&(f.clearTimeout(_.C),_.C=null)}function Lh(_,R){var D=null;if(_.g==R){fl(_),Ju(_),_.g=null;var P=2}else if(Er(_.h,R))D=R.D,Js(_.h,R),P=1;else return;if(_.G!=0){if(R.o)if(P==1){D=R.m?R.m.length:0,R=Date.now()-R.F;var rt=_.B;P=Bo(),rn(P,new sl(P,D)),Ku(_)}else Xo(_);else if(rt=R.s,rt==3||rt==0&&0<R.X||!(P==1&&Ym(_,R)||P==2&&Wu(_)))switch(D&&0<D.length&&(R=_.h,R.i=R.i.concat(D)),rt){case 1:_a(_,5);break;case 4:_a(_,10);break;case 3:_a(_,6);break;default:_a(_,2)}}}function wr(_,R){let D=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(D*=2),D*R}function _a(_,R){if(_.j.info("Error code "+R),R==2){var D=T(_.fb,_),P=_.Xa;const rt=!P;P=new pa(P||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Za(P,"https"),ol(P),rt?Xu(P.toString(),D):wh(P.toString(),D)}else ii(2);_.G=0,_.l&&_.l.sa(R),$u(_),Oh(_)}n.fb=function(_){_?(this.j.info("Successfully pinged google.com"),ii(2)):(this.j.info("Failed to ping google.com"),ii(1))};function $u(_){if(_.G=0,_.ka=[],_.l){const R=fs(_.h);(R.length!=0||_.i.length!=0)&&(V(_.ka,R),V(_.ka,_.i),_.h.i.length=0,L(_.i),_.i.length=0),_.l.ra()}}function tc(_,R,D){var P=D instanceof pa?un(D):new pa(D);if(P.g!="")R&&(P.g=R+"."+P.g),ll(P,P.s);else{var rt=f.location;P=rt.protocol,R=R?R+"."+rt.hostname:rt.hostname,rt=+rt.port;var mt=new pa(null);P&&Za(mt,P),R&&(mt.g=R),rt&&ll(mt,rt),D&&(mt.l=D),P=mt}return D=_.D,R=_.ya,D&&R&&Le(P,D,R),Le(P,"VER",_.la),nr(_,P),P}function Vh(_,R,D){if(R&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return R=_.Ca&&!_.pa?new gn(new tr({eb:D})):new gn(_.pa),R.Ha(_.J),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function kh(){}n=kh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ec(){}ec.prototype.g=function(_,R){return new Qe(_,R)};function Qe(_,R){Dn.call(this),this.g=new Ih(R),this.l=_,this.h=R&&R.messageUrlParams||null,_=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(_?_["X-WebChannel-Content-Type"]=R.messageContentType:_={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(_?_["X-WebChannel-Client-Profile"]=R.va:_={"X-WebChannel-Client-Profile":R.va}),this.g.S=_,(_=R&&R.Sb)&&!B(_)&&(this.g.m=_),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!B(R)&&(this.g.D=R,_=this.h,_!==null&&R in _&&(_=this.h,R in _&&delete _[R])),this.j=new dl(this)}w(Qe,Dn),Qe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qe.prototype.close=function(){Yo(this.g)},Qe.prototype.o=function(_){var R=this.g;if(typeof _=="string"){var D={};D.__data__=_,_=D}else this.u&&(D={},D.__data__=Me(_),_=D);R.i.push(new hs(R.Ya++,_)),R.G==3&&Ku(R)},Qe.prototype.N=function(){this.g.l=null,delete this.j,Yo(this.g),delete this.g,Qe.aa.N.call(this)};function Ph(_){Ya.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var R=_.__sm__;if(R){t:{for(const D in R){_=D;break t}_=void 0}(this.i=_)&&(_=this.i,R=R!==null&&_ in R?R[_]:void 0),this.data=R}else this.data=_}w(Ph,Ya);function Uh(){da.call(this),this.status=1}w(Uh,da);function dl(_){this.g=_}w(dl,kh),dl.prototype.ua=function(){rn(this.g,"a")},dl.prototype.ta=function(_){rn(this.g,new Ph(_))},dl.prototype.sa=function(_){rn(this.g,new Uh)},dl.prototype.ra=function(){rn(this.g,"b")},ec.prototype.createWebChannel=ec.prototype.g,Qe.prototype.send=Qe.prototype.o,Qe.prototype.open=Qe.prototype.m,Qe.prototype.close=Qe.prototype.close,c5=function(){return new ec},u5=function(){return Bo()},o5=us,W2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pn.NO_ERROR=0,pn.TIMEOUT=8,pn.HTTP_ERROR=6,Ny=pn,ui.COMPLETE="complete",l5=ui,pr.EventType=fa,fa.OPEN="a",fa.CLOSE="b",fa.ERROR="c",fa.MESSAGE="d",Dn.prototype.listen=Dn.prototype.K,vg=pr,gn.prototype.listenOnce=gn.prototype.L,gn.prototype.getLastError=gn.prototype.Ka,gn.prototype.getLastErrorCode=gn.prototype.Ba,gn.prototype.getStatus=gn.prototype.Z,gn.prototype.getResponseJson=gn.prototype.Oa,gn.prototype.getResponseText=gn.prototype.oa,gn.prototype.send=gn.prototype.ea,gn.prototype.setWithCredentials=gn.prototype.Ha,r5=gn}).apply(typeof ay<"u"?ay:typeof self<"u"?self:typeof window<"u"?window:{});const AT="@firebase/firestore",ET="4.8.0";class js{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}js.UNAUTHENTICATED=new js(null),js.GOOGLE_CREDENTIALS=new js("google-credentials-uid"),js.FIRST_PARTY=new js("first-party-uid"),js.MOCK_USER=new js("mock-user");let Vm="11.10.0";const Nf=new N1("@firebase/firestore");function Zd(){return Nf.logLevel}function Gt(n,...t){if(Nf.logLevel<=Pe.DEBUG){const e=t.map(dE);Nf.debug(`Firestore (${Vm}): ${n}`,...e)}}function Lu(n,...t){if(Nf.logLevel<=Pe.ERROR){const e=t.map(dE);Nf.error(`Firestore (${Vm}): ${n}`,...e)}}function Vu(n,...t){if(Nf.logLevel<=Pe.WARN){const e=t.map(dE);Nf.warn(`Firestore (${Vm}): ${n}`,...e)}}function dE(n){if(typeof n=="string")return n;try{return(function(e){return JSON.stringify(e)})(n)}catch{return n}}function re(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,h5(n,i,e)}function h5(n,t,e){let i=`FIRESTORE (${Vm}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Lu(i),new Error(i)}function sn(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||h5(t,s,i)}function me(n,t){return n}const At={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bt extends zu{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xu{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class f5{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class d5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(js.UNAUTHENTICATED)))}shutdown(){}}class dI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class mI{constructor(t){this.t=t,this.currentUser=js.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){sn(this.o===void 0,42304);let i=this.i;const s=m=>this.i!==i?(i=this.i,e(m)):Promise.resolve();let l=new xu;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new xu,t.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const m=l;t.enqueueRetryable((async()=>{await m.promise,await s(this.currentUser)}))},f=m=>{Gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new xu)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(Gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(sn(typeof i.accessToken=="string",31837,{l:i}),new f5(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return sn(t===null||typeof t=="string",2055,{h:t}),new js(t)}}class pI{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=js.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gI{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new pI(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(js.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ST{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _I{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,or(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){sn(this.o===void 0,3512);const i=l=>{l.error!=null&&Gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Gt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable((()=>i(l)))};const s=l=>{Gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ST(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(sn(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new ST(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function yI(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}function m5(){return new TextEncoder}class L1{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=yI(40);for(let l=0;l<s.length;++l)i.length<20&&s[l]<e&&(i+=t.charAt(s[l]%62))}return i}}function Re(n,t){return n<t?-1:n>t?1:0}function J2(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),s=t.codePointAt(e);if(i!==s){if(i<128&&s<128)return Re(i,s);{const l=m5(),c=vI(l.encode(TT(n,e)),l.encode(TT(t,e)));return c!==0?c:Re(i,s)}}e+=i>65535?2:1}return Re(n.length,t.length)}function TT(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function vI(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Re(n[e],t[e]);return Re(n.length,t.length)}function pm(n,t,e){return n.length===t.length&&n.every(((i,s)=>e(i,t[s])))}const bT="__name__";class No{constructor(t,e,i){e===void 0?e=0:e>t.length&&re(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&re(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return No.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof No?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const l=No.compareSegments(t.get(s),e.get(s));if(l!==0)return l}return Re(t.length,e.length)}static compareSegments(t,e){const i=No.isNumericId(t),s=No.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?No.extractNumericId(t).compare(No.extractNumericId(e)):J2(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Wc.fromString(t.substring(4,t.length-2))}}class vn extends No{construct(t,e,i){return new vn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Bt(At.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((s=>s.length>0)))}return new vn(e)}static emptyPath(){return new vn([])}}const AI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ns extends No{construct(t,e,i){return new ns(t,e,i)}static isValidIdentifier(t){return AI.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ns.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bT}static keyField(){return new ns([bT])}static fromServerFormat(t){const e=[];let i="",s=0;const l=()=>{if(i.length===0)throw new Bt(At.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;s<t.length;){const f=t[s];if(f==="\\"){if(s+1===t.length)throw new Bt(At.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Bt(At.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(i+=f,s++):(l(),s++)}if(l(),c)throw new Bt(At.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ns(e)}static emptyPath(){return new ns([])}}class Wt{constructor(t){this.path=t}static fromPath(t){return new Wt(vn.fromString(t))}static fromName(t){return new Wt(vn.fromString(t).popFirst(5))}static empty(){return new Wt(vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&vn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return vn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Wt(new vn(t.slice()))}}function mE(n,t,e){if(!e)throw new Bt(At.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function p5(n,t,e,i){if(t===!0&&i===!0)throw new Bt(At.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function CT(n){if(!Wt.isDocumentKey(n))throw new Bt(At.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RT(n){if(Wt.isDocumentKey(n))throw new Bt(At.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function g5(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function V1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":re(12329,{type:typeof n})}function Hs(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Bt(At.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=V1(n);throw new Bt(At.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function Ii(n,t){const e={typeString:n};return t&&(e.value=t),e}function y0(n,t){if(!g5(n))throw new Bt(At.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const s=t[i].typeString,l="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(s&&typeof c!==s){e=`JSON field '${i}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){e=`Expected '${i}' field to equal '${l.value}'`;break}}if(e)throw new Bt(At.INVALID_ARGUMENT,e);return!0}const wT=-62135596800,xT=1e6;class wn{static now(){return wn.fromMillis(Date.now())}static fromDate(t){return wn.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*xT);return new wn(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Bt(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Bt(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<wT)throw new Bt(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Bt(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xT}_compareTo(t){return this.seconds===t.seconds?Re(this.nanoseconds,t.nanoseconds):Re(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(y0(t,wn._jsonSchema))return new wn(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-wT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wn._jsonSchemaVersion="firestore/timestamp/1.0",wn._jsonSchema={type:Ii("string",wn._jsonSchemaVersion),seconds:Ii("number"),nanoseconds:Ii("number")};class ce{static fromTimestamp(t){return new ce(t)}static min(){return new ce(new wn(0,0))}static max(){return new ce(new wn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Kg=-1;function EI(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(i===1e9?new wn(e+1,0):new wn(e,i));return new ih(s,Wt.empty(),t)}function SI(n){return new ih(n.readTime,n.key,Kg)}class ih{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new ih(ce.min(),Wt.empty(),Kg)}static max(){return new ih(ce.max(),Wt.empty(),Kg)}}function TI(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Wt.comparator(n.documentKey,t.documentKey),e!==0?e:Re(n.largestBatchId,t.largestBatchId))}const bI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function km(n){if(n.code!==At.FAILED_PRECONDITION||n.message!==bI)throw n;Gt("LocalStore","Unexpectedly lost primary lease")}class bt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new bt(((i,s)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(i,s)},this.catchCallback=l=>{this.wrapFailure(e,l).next(i,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof bt?e:bt.resolve(e)}catch(e){return bt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):bt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):bt.reject(e)}static resolve(t){return new bt(((e,i)=>{e(t)}))}static reject(t){return new bt(((e,i)=>{i(t)}))}static waitFor(t){return new bt(((e,i)=>{let s=0,l=0,c=!1;t.forEach((f=>{++s,f.next((()=>{++l,c&&l===s&&e()}),(m=>i(m)))})),c=!0,l===s&&e()}))}static or(t){let e=bt.resolve(!1);for(const i of t)e=e.next((s=>s?bt.resolve(s):i()));return e}static forEach(t,e){const i=[];return t.forEach(((s,l)=>{i.push(e.call(this,s,l))})),this.waitFor(i)}static mapArray(t,e){return new bt(((i,s)=>{const l=t.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;e(t[g]).next((A=>{c[g]=A,++f,f===l&&i(c)}),(A=>s(A)))}}))}static doWhile(t,e){return new bt(((i,s)=>{const l=()=>{t()===!0?e().next((()=>{l()}),s):i()};l()}))}}function RI(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Pm(n){return n.name==="IndexedDbTransactionError"}class k1{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this._e(i),this.ae=i=>e.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}k1.ue=-1;const pE=-1;function P1(n){return n==null}function Ky(n){return n===0&&1/n==-1/0}function wI(n){return typeof n=="number"&&Number.isInteger(n)&&!Ky(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const _5="";function xI(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=NT(t)),t=NI(n.get(e),t);return NT(t)}function NI(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const l=n.charAt(s);switch(l){case"\0":e+="";break;case _5:e+="";break;default:e+=l}}return e}function NT(n){return n+_5+""}function DT(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ph(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function y5(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}let Mi=class Z2{constructor(t,e){this.comparator=t,this.root=e||Jc.EMPTY}insert(t,e){return new Z2(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Jc.BLACK,null,null))}remove(t){return new Z2(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Jc.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ry(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ry(this.root,t,this.comparator,!1)}getReverseIterator(){return new ry(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ry(this.root,t,this.comparator,!0)}},ry=class{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,e&&s&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Jc=class Au{constructor(t,e,i,s,l){this.key=t,this.value=e,this.color=i??Au.RED,this.left=s??Au.EMPTY,this.right=l??Au.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,l){return new Au(t??this.key,e??this.value,i??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const l=i(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,e,i),null):l===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Au.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return Au.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Au.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Au.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw re(27949);return t+(this.isRed()?0:1)}};Jc.EMPTY=null,Jc.RED=!0,Jc.BLACK=!1;Jc.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(t,e,i,s,l){return this}insert(t,e,i){return new Jc(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hi{constructor(t){this.comparator=t,this.data=new Mi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new IT(this.data.getIterator())}getIteratorFrom(t){return new IT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof Hi)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,l=i.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Hi(this.comparator);return e.data=t,e}}class IT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class hr{constructor(t){this.fields=t,t.sort(ns.comparator)}static empty(){return new hr([])}unionWith(t){let e=new Hi(ns.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new hr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return pm(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}class v5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class is{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new v5("Invalid base64 string: "+l):l}})(t);return new is(e)}static fromUint8Array(t){const e=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(t);return new is(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Re(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}is.EMPTY_BYTE_STRING=new is("");const DI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sh(n){if(sn(!!n,39018),typeof n=="string"){let t=0;const e=DI.exec(n);if(sn(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:_i(n.seconds),nanos:_i(n.nanos)}}function _i(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ah(n){return typeof n=="string"?is.fromBase64String(n):is.fromUint8Array(n)}const A5="server_timestamp",E5="__type__",S5="__previous_value__",T5="__local_write_time__";function gE(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[E5])===null||e===void 0?void 0:e.stringValue)===A5}function U1(n){const t=n.mapValue.fields[S5];return gE(t)?U1(t):t}function Wg(n){const t=sh(n.mapValue.fields[T5].timestampValue);return new wn(t.seconds,t.nanos)}class II{constructor(t,e,i,s,l,c,f,m,g,A){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=A}}const Wy="(default)";class gm{constructor(t,e){this.projectId=t,this.database=e||Wy}static empty(){return new gm("","")}get isDefaultDatabase(){return this.database===Wy}isEqual(t){return t instanceof gm&&t.projectId===this.projectId&&t.database===this.database}}const b5="__type__",OI="__max__",ly={mapValue:{}},C5="__vector__",Jy="value";function rh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gE(n)?4:LI(n)?9007199254740991:MI(n)?10:11:re(28295,{value:n})}function Vo(n,t){if(n===t)return!0;const e=rh(n);if(e!==rh(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Wg(n).isEqual(Wg(t));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=sh(s.timestampValue),f=sh(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(s,l){return ah(s.bytesValue).isEqual(ah(l.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(s,l){return _i(s.geoPointValue.latitude)===_i(l.geoPointValue.latitude)&&_i(s.geoPointValue.longitude)===_i(l.geoPointValue.longitude)})(n,t);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return _i(s.integerValue)===_i(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=_i(s.doubleValue),f=_i(l.doubleValue);return c===f?Ky(c)===Ky(f):isNaN(c)&&isNaN(f)}return!1})(n,t);case 9:return pm(n.arrayValue.values||[],t.arrayValue.values||[],Vo);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},f=l.mapValue.fields||{};if(DT(c)!==DT(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Vo(c[m],f[m])))return!1;return!0})(n,t);default:return re(52216,{left:n})}}function Jg(n,t){return(n.values||[]).find((e=>Vo(e,t)))!==void 0}function _m(n,t){if(n===t)return 0;const e=rh(n),i=rh(t);if(e!==i)return Re(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Re(n.booleanValue,t.booleanValue);case 2:return(function(l,c){const f=_i(l.integerValue||l.doubleValue),m=_i(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,t);case 3:return OT(n.timestampValue,t.timestampValue);case 4:return OT(Wg(n),Wg(t));case 5:return J2(n.stringValue,t.stringValue);case 6:return(function(l,c){const f=ah(l),m=ah(c);return f.compareTo(m)})(n.bytesValue,t.bytesValue);case 7:return(function(l,c){const f=l.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const A=Re(f[g],m[g]);if(A!==0)return A}return Re(f.length,m.length)})(n.referenceValue,t.referenceValue);case 8:return(function(l,c){const f=Re(_i(l.latitude),_i(c.latitude));return f!==0?f:Re(_i(l.longitude),_i(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return MT(n.arrayValue,t.arrayValue);case 10:return(function(l,c){var f,m,g,A;const S=l.fields||{},T=c.fields||{},x=(f=S[Jy])===null||f===void 0?void 0:f.arrayValue,w=(m=T[Jy])===null||m===void 0?void 0:m.arrayValue,L=Re(((g=x?.values)===null||g===void 0?void 0:g.length)||0,((A=w?.values)===null||A===void 0?void 0:A.length)||0);return L!==0?L:MT(x,w)})(n.mapValue,t.mapValue);case 11:return(function(l,c){if(l===ly.mapValue&&c===ly.mapValue)return 0;if(l===ly.mapValue)return 1;if(c===ly.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=c.fields||{},A=Object.keys(g);m.sort(),A.sort();for(let S=0;S<m.length&&S<A.length;++S){const T=J2(m[S],A[S]);if(T!==0)return T;const x=_m(f[m[S]],g[A[S]]);if(x!==0)return x}return Re(m.length,A.length)})(n.mapValue,t.mapValue);default:throw re(23264,{le:e})}}function OT(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Re(n,t);const e=sh(n),i=sh(t),s=Re(e.seconds,i.seconds);return s!==0?s:Re(e.nanos,i.nanos)}function MT(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const l=_m(e[s],i[s]);if(l)return l}return Re(e.length,i.length)}function ym(n){return $2(n)}function $2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const i=sh(e);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return ah(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return Wt.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let i="[",s=!0;for(const l of e.values||[])s?s=!1:i+=",",i+=$2(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(e){const i=Object.keys(e.fields||{}).sort();let s="{",l=!0;for(const c of i)l?l=!1:s+=",",s+=`${c}:${$2(e.fields[c])}`;return s+"}"})(n.mapValue):re(61005,{value:n})}function Dy(n){switch(rh(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=U1(n);return t?16+Dy(t):16;case 5:return 2*n.stringValue.length;case 6:return ah(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,l)=>s+Dy(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return ph(i.fields,((l,c)=>{s+=l.length+Dy(c)})),s})(n.mapValue);default:throw re(13486,{value:n})}}function LT(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function tA(n){return!!n&&"integerValue"in n}function _E(n){return!!n&&"arrayValue"in n}function VT(n){return!!n&&"nullValue"in n}function kT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Iy(n){return!!n&&"mapValue"in n}function MI(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[b5])===null||e===void 0?void 0:e.stringValue)===C5}function Dg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return ph(n.mapValue.fields,((e,i)=>t.mapValue.fields[e]=Dg(i))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Dg(n.arrayValue.values[e]);return t}return Object.assign({},n)}function LI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===OI}class za{constructor(t){this.value=t}static empty(){return new za({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Iy(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Dg(e)}setAll(t){let e=ns.emptyPath(),i={},s=[];t.forEach(((c,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,i,s),i={},s=[],e=f.popLast()}c?i[f.lastSegment()]=Dg(c):s.push(f.lastSegment())}));const l=this.getFieldsMap(e);this.applyChanges(l,i,s)}delete(t){const e=this.field(t.popLast());Iy(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Vo(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];Iy(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){ph(e,((s,l)=>t[s]=l));for(const s of i)delete t[s]}clone(){return new za(Dg(this.value))}}function R5(n){const t=[];return ph(n.fields,((e,i)=>{const s=new ns([e]);if(Iy(i)){const l=R5(i.mapValue).fields;if(l.length===0)t.push(s);else for(const c of l)t.push(s.child(c))}else t.push(s)})),new hr(t)}class Gs{constructor(t,e,i,s,l,c,f){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(t){return new Gs(t,0,ce.min(),ce.min(),ce.min(),za.empty(),0)}static newFoundDocument(t,e,i,s){return new Gs(t,1,e,ce.min(),i,s,0)}static newNoDocument(t,e){return new Gs(t,2,e,ce.min(),ce.min(),za.empty(),0)}static newUnknownDocument(t,e){return new Gs(t,3,e,ce.min(),ce.min(),za.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=za.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=za.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Gs&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Gs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zy{constructor(t,e){this.position=t,this.inclusive=e}}function PT(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const l=t[s],c=n.position[s];if(l.field.isKeyField()?i=Wt.comparator(Wt.fromName(c.referenceValue),e.key):i=_m(c,e.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function UT(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Vo(n.position[e],t.position[e]))return!1;return!0}class $y{constructor(t,e="asc"){this.field=t,this.dir=e}}function VI(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class w5{}class Di extends w5{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new PI(t,e,i):e==="array-contains"?new BI(t,i):e==="in"?new jI(t,i):e==="not-in"?new GI(t,i):e==="array-contains-any"?new HI(t,i):new Di(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new UI(t,i):new zI(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(_m(e,this.value)):e!==null&&rh(this.value)===rh(e)&&this.matchesComparison(_m(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jl extends w5{constructor(t,e){super(),this.filters=t,this.op=e,this.he=null}static create(t,e){return new jl(t,e)}matches(t){return x5(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function x5(n){return n.op==="and"}function N5(n){return kI(n)&&x5(n)}function kI(n){for(const t of n.filters)if(t instanceof jl)return!1;return!0}function eA(n){if(n instanceof Di)return n.field.canonicalString()+n.op.toString()+ym(n.value);if(N5(n))return n.filters.map((t=>eA(t))).join(",");{const t=n.filters.map((e=>eA(e))).join(",");return`${n.op}(${t})`}}function D5(n,t){return n instanceof Di?(function(i,s){return s instanceof Di&&i.op===s.op&&i.field.isEqual(s.field)&&Vo(i.value,s.value)})(n,t):n instanceof jl?(function(i,s){return s instanceof jl&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((l,c,f)=>l&&D5(c,s.filters[f])),!0):!1})(n,t):void re(19439)}function I5(n){return n instanceof Di?(function(e){return`${e.field.canonicalString()} ${e.op} ${ym(e.value)}`})(n):n instanceof jl?(function(e){return e.op.toString()+" {"+e.getFilters().map(I5).join(" ,")+"}"})(n):"Filter"}class PI extends Di{constructor(t,e,i){super(t,e,i),this.key=Wt.fromName(i.referenceValue)}matches(t){const e=Wt.comparator(t.key,this.key);return this.matchesComparison(e)}}class UI extends Di{constructor(t,e){super(t,"in",e),this.keys=O5("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class zI extends Di{constructor(t,e){super(t,"not-in",e),this.keys=O5("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function O5(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map((i=>Wt.fromName(i.referenceValue)))}class BI extends Di{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return _E(e)&&Jg(e.arrayValue,this.value)}}class jI extends Di{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Jg(this.value.arrayValue,e)}}class GI extends Di{constructor(t,e){super(t,"not-in",e)}matches(t){if(Jg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Jg(this.value.arrayValue,e)}}class HI extends Di{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!_E(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>Jg(this.value.arrayValue,i)))}}class qI{constructor(t,e=null,i=[],s=[],l=null,c=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=l,this.startAt=c,this.endAt=f,this.Pe=null}}function zT(n,t=null,e=[],i=[],s=null,l=null,c=null){return new qI(n,t,e,i,s,l,c)}function yE(n){const t=me(n);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>eA(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),P1(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>ym(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>ym(i))).join(",")),t.Pe=e}return t.Pe}function vE(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!VI(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!D5(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!UT(n.startAt,t.startAt)&&UT(n.endAt,t.endAt)}function nA(n){return Wt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Um{constructor(t,e=null,i=[],s=[],l=null,c="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function FI(n,t,e,i,s,l,c,f){return new Um(n,t,e,i,s,l,c,f)}function z1(n){return new Um(n)}function BT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function M5(n){return n.collectionGroup!==null}function Ig(n){const t=me(n);if(t.Te===null){t.Te=[];const e=new Set;for(const l of t.explicitOrderBy)t.Te.push(l),e.add(l.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Hi(ns.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(t).forEach((l=>{e.has(l.canonicalString())||l.isKeyField()||t.Te.push(new $y(l,i))})),e.has(ns.keyField().canonicalString())||t.Te.push(new $y(ns.keyField(),i))}return t.Te}function Mo(n){const t=me(n);return t.Ie||(t.Ie=YI(t,Ig(n))),t.Ie}function YI(n,t){if(n.limitType==="F")return zT(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new $y(s.field,l)}));const e=n.endAt?new Zy(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Zy(n.startAt.position,n.startAt.inclusive):null;return zT(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function iA(n,t){const e=n.filters.concat([t]);return new Um(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function sA(n,t,e){return new Um(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function B1(n,t){return vE(Mo(n),Mo(t))&&n.limitType===t.limitType}function L5(n){return`${yE(Mo(n))}|lt:${n.limitType}`}function $d(n){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((s=>I5(s))).join(", ")}]`),P1(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((s=>ym(s))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((s=>ym(s))).join(",")),`Target(${i})`})(Mo(n))}; limitType=${n.limitType})`}function j1(n,t){return t.isFoundDocument()&&(function(i,s){const l=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Wt.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,t)&&(function(i,s){for(const l of Ig(i))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,t)&&(function(i,s){for(const l of i.filters)if(!l.matches(s))return!1;return!0})(n,t)&&(function(i,s){return!(i.startAt&&!(function(c,f,m){const g=PT(c,f,m);return c.inclusive?g<=0:g<0})(i.startAt,Ig(i),s)||i.endAt&&!(function(c,f,m){const g=PT(c,f,m);return c.inclusive?g>=0:g>0})(i.endAt,Ig(i),s))})(n,t)}function QI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function V5(n){return(t,e)=>{let i=!1;for(const s of Ig(n)){const l=XI(s,t,e);if(l!==0)return l;i=i||s.field.isKeyField()}return 0}}function XI(n,t,e){const i=n.field.isKeyField()?Wt.comparator(t.key,e.key):(function(l,c,f){const m=c.data.field(l),g=f.data.field(l);return m!==null&&g!==null?_m(m,g):re(42886)})(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return re(19790,{direction:n.dir})}}class zf{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,l]of i)if(this.equalsFn(s,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return void(s[l]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){ph(this.inner,((e,i)=>{for(const[s,l]of i)t(s,l)}))}isEmpty(){return y5(this.inner)}size(){return this.innerSize}}const KI=new Mi(Wt.comparator);function ku(){return KI}const k5=new Mi(Wt.comparator);function Ag(...n){let t=k5;for(const e of n)t=t.insert(e.key,e);return t}function P5(n){let t=k5;return n.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function Sf(){return Og()}function U5(){return Og()}function Og(){return new zf((n=>n.toString()),((n,t)=>n.isEqual(t)))}const WI=new Mi(Wt.comparator),JI=new Hi(Wt.comparator);function Be(...n){let t=JI;for(const e of n)t=t.add(e);return t}const ZI=new Hi(Re);function $I(){return ZI}function AE(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ky(t)?"-0":t}}function z5(n){return{integerValue:""+n}}function tO(n,t){return wI(t)?z5(t):AE(n,t)}class G1{constructor(){this._=void 0}}function eO(n,t,e){return n instanceof Zg?(function(s,l){const c={fields:{[E5]:{stringValue:A5},[T5]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&gE(l)&&(l=U1(l)),l&&(c.fields[S5]=l),{mapValue:c}})(e,t):n instanceof $g?j5(n,t):n instanceof t0?G5(n,t):(function(s,l){const c=B5(s,l),f=jT(c)+jT(s.Ee);return tA(c)&&tA(s.Ee)?z5(f):AE(s.serializer,f)})(n,t)}function nO(n,t,e){return n instanceof $g?j5(n,t):n instanceof t0?G5(n,t):e}function B5(n,t){return n instanceof t1?(function(i){return tA(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(t)?t:{integerValue:0}:null}class Zg extends G1{}class $g extends G1{constructor(t){super(),this.elements=t}}function j5(n,t){const e=H5(t);for(const i of n.elements)e.some((s=>Vo(s,i)))||e.push(i);return{arrayValue:{values:e}}}class t0 extends G1{constructor(t){super(),this.elements=t}}function G5(n,t){let e=H5(t);for(const i of n.elements)e=e.filter((s=>!Vo(s,i)));return{arrayValue:{values:e}}}class t1 extends G1{constructor(t,e){super(),this.serializer=t,this.Ee=e}}function jT(n){return _i(n.integerValue||n.doubleValue)}function H5(n){return _E(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class iO{constructor(t,e){this.field=t,this.transform=e}}function sO(n,t){return n.field.isEqual(t.field)&&(function(i,s){return i instanceof $g&&s instanceof $g||i instanceof t0&&s instanceof t0?pm(i.elements,s.elements,Vo):i instanceof t1&&s instanceof t1?Vo(i.Ee,s.Ee):i instanceof Zg&&s instanceof Zg})(n.transform,t.transform)}class aO{constructor(t,e){this.version=t,this.transformResults=e}}class tl{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new tl}static exists(t){return new tl(void 0,t)}static updateTime(t){return new tl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Oy(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class H1{}function q5(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new EE(n.key,tl.none()):new v0(n.key,n.data,tl.none());{const e=n.data,i=za.empty();let s=new Hi(ns.comparator);for(let l of t.fields)if(!s.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?i.delete(l):i.set(l,c),s=s.add(l)}return new gh(n.key,i,new hr(s.toArray()),tl.none())}}function rO(n,t,e){n instanceof v0?(function(s,l,c){const f=s.value.clone(),m=HT(s.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,t,e):n instanceof gh?(function(s,l,c){if(!Oy(s.precondition,l))return void l.convertToUnknownDocument(c.version);const f=HT(s.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(F5(s)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,t,e):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function Mg(n,t,e,i){return n instanceof v0?(function(l,c,f,m){if(!Oy(l.precondition,c))return f;const g=l.value.clone(),A=qT(l.fieldTransforms,m,c);return g.setAll(A),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,t,e,i):n instanceof gh?(function(l,c,f,m){if(!Oy(l.precondition,c))return f;const g=qT(l.fieldTransforms,m,c),A=c.data;return A.setAll(F5(l)),A.setAll(g),c.convertToFoundDocument(c.version,A).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((S=>S.field)))})(n,t,e,i):(function(l,c,f){return Oy(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,t,e)}function lO(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),l=B5(i.transform,s||null);l!=null&&(e===null&&(e=za.empty()),e.set(i.field,l))}return e||null}function GT(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&pm(i,s,((l,c)=>sO(l,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class v0 extends H1{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class gh extends H1{constructor(t,e,i,s,l=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function F5(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}})),t}function HT(n,t,e){const i=new Map;sn(n.length===e.length,32656,{Ae:e.length,Re:n.length});for(let s=0;s<e.length;s++){const l=n[s],c=l.transform,f=t.data.field(l.field);i.set(l.field,nO(c,f,e[s]))}return i}function qT(n,t,e){const i=new Map;for(const s of n){const l=s.transform,c=e.data.field(s.field);i.set(s.field,eO(l,c,t))}return i}class EE extends H1{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oO extends H1{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class uO{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(t.key)&&rO(l,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Mg(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Mg(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=U5();return this.mutations.forEach((s=>{const l=t.get(s.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=e.has(s.key)?null:f;const m=q5(c,f);m!==null&&i.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(ce.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Be())}isEqual(t){return this.batchId===t.batchId&&pm(this.mutations,t.mutations,((e,i)=>GT(e,i)))&&pm(this.baseMutations,t.baseMutations,((e,i)=>GT(e,i)))}}class SE{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){sn(t.mutations.length===i.length,58842,{Ve:t.mutations.length,me:i.length});let s=(function(){return WI})();const l=t.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,i[c].version);return new SE(t,e,i,s)}}class cO{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class hO{constructor(t,e){this.count=t,this.unchangedNames=e}}var xi,Ye;function fO(n){switch(n){case At.OK:return re(64938);case At.CANCELLED:case At.UNKNOWN:case At.DEADLINE_EXCEEDED:case At.RESOURCE_EXHAUSTED:case At.INTERNAL:case At.UNAVAILABLE:case At.UNAUTHENTICATED:return!1;case At.INVALID_ARGUMENT:case At.NOT_FOUND:case At.ALREADY_EXISTS:case At.PERMISSION_DENIED:case At.FAILED_PRECONDITION:case At.ABORTED:case At.OUT_OF_RANGE:case At.UNIMPLEMENTED:case At.DATA_LOSS:return!0;default:return re(15467,{code:n})}}function Y5(n){if(n===void 0)return Lu("GRPC error has no .code"),At.UNKNOWN;switch(n){case xi.OK:return At.OK;case xi.CANCELLED:return At.CANCELLED;case xi.UNKNOWN:return At.UNKNOWN;case xi.DEADLINE_EXCEEDED:return At.DEADLINE_EXCEEDED;case xi.RESOURCE_EXHAUSTED:return At.RESOURCE_EXHAUSTED;case xi.INTERNAL:return At.INTERNAL;case xi.UNAVAILABLE:return At.UNAVAILABLE;case xi.UNAUTHENTICATED:return At.UNAUTHENTICATED;case xi.INVALID_ARGUMENT:return At.INVALID_ARGUMENT;case xi.NOT_FOUND:return At.NOT_FOUND;case xi.ALREADY_EXISTS:return At.ALREADY_EXISTS;case xi.PERMISSION_DENIED:return At.PERMISSION_DENIED;case xi.FAILED_PRECONDITION:return At.FAILED_PRECONDITION;case xi.ABORTED:return At.ABORTED;case xi.OUT_OF_RANGE:return At.OUT_OF_RANGE;case xi.UNIMPLEMENTED:return At.UNIMPLEMENTED;case xi.DATA_LOSS:return At.DATA_LOSS;default:return re(39323,{code:n})}}(Ye=xi||(xi={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";const dO=new Wc([4294967295,4294967295],0);function FT(n){const t=m5().encode(n),e=new a5;return e.update(t),new Uint8Array(e.digest())}function YT(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Wc([e,i],0),new Wc([s,l],0)]}class TE{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Eg(`Invalid padding: ${e}`);if(i<0)throw new Eg(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Eg(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Eg(`Invalid padding when bitmap length is 0: ${e}`);this.fe=8*t.length-e,this.ge=Wc.fromNumber(this.fe)}pe(t,e,i){let s=t.add(e.multiply(Wc.fromNumber(i)));return s.compare(dO)===1&&(s=new Wc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const e=FT(t),[i,s]=YT(e);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,s,l);if(!this.ye(c))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new TE(l,s,e);return i.forEach((f=>c.insert(f))),c}insert(t){if(this.fe===0)return;const e=FT(t),[i,s]=YT(e);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,s,l);this.we(c)}}we(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Eg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class q1{constructor(t,e,i,s,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,A0.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new q1(ce.min(),s,new Mi(Re),ku(),Be())}}class A0{constructor(t,e,i,s,l){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new A0(i,e,Be(),Be(),Be())}}class My{constructor(t,e,i,s){this.Se=t,this.removedTargetIds=e,this.key=i,this.be=s}}class Q5{constructor(t,e){this.targetId=t,this.De=e}}class X5{constructor(t,e,i=is.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class QT{constructor(){this.ve=0,this.Ce=XT(),this.Fe=is.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Be(),e=Be(),i=Be();return this.Ce.forEach(((s,l)=>{switch(l){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:re(38017,{changeType:l})}})),new A0(this.Fe,this.Me,t,e,i)}ke(){this.xe=!1,this.Ce=XT()}qe(t,e){this.xe=!0,this.Ce=this.Ce.insert(t,e)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,sn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class mO{constructor(t){this.We=t,this.Ge=new Map,this.ze=ku(),this.je=oy(),this.Je=oy(),this.He=new Mi(Re)}Ye(t){for(const e of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(e,t.be):this.Xe(e,t.key,t.be);for(const e of t.removedTargetIds)this.Xe(e,t.key,t.be)}et(t){this.forEachTarget(t,(e=>{const i=this.tt(e);switch(t.state){case 0:this.nt(e)&&i.Be(t.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(t.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(e);break;case 3:this.nt(e)&&(i.Ke(),i.Be(t.resumeToken));break;case 4:this.nt(e)&&(this.rt(e),i.Be(t.resumeToken));break;default:re(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ge.forEach(((i,s)=>{this.nt(s)&&e(s)}))}it(t){const e=t.targetId,i=t.De.count,s=this.st(e);if(s){const l=s.target;if(nA(l))if(i===0){const c=new Wt(l.path);this.Xe(e,c,Gs.newNoDocument(c,ce.min()))}else sn(i===1,20013,{expectedCount:i});else{const c=this.ot(e);if(c!==i){const f=this._t(t),m=f?this.ut(f,t,c):1;if(m!==0){this.rt(e);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(e,g)}}}}}_t(t){const e=t.De.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:l=0}=e;let c,f;try{c=ah(i).toUint8Array()}catch(m){if(m instanceof v5)return Vu("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new TE(c,s,l)}catch(m){return Vu(m instanceof Eg?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.fe===0?null:f}ut(t,e,i){return e.De.count===i-this.ht(t,e.targetId)?0:2}ht(t,e){const i=this.We.getRemoteKeysForTarget(e);let s=0;return i.forEach((l=>{const c=this.We.lt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(f)||(this.Xe(e,l,null),s++)})),s}Pt(t){const e=new Map;this.Ge.forEach(((l,c)=>{const f=this.st(c);if(f){if(l.current&&nA(f.target)){const m=new Wt(f.target.path);this.Tt(m).has(c)||this.It(c,m)||this.Xe(c,m,Gs.newNoDocument(m,t))}l.Ne&&(e.set(c,l.Le()),l.ke())}}));let i=Be();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.st(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(t)));const s=new q1(t,e,this.He,this.ze,i);return this.ze=ku(),this.je=oy(),this.Je=oy(),this.He=new Mi(Re),s}Ze(t,e){if(!this.nt(t))return;const i=this.It(t,e.key)?2:0;this.tt(t).qe(e.key,i),this.ze=this.ze.insert(e.key,e),this.je=this.je.insert(e.key,this.Tt(e.key).add(t)),this.Je=this.Je.insert(e.key,this.dt(e.key).add(t))}Xe(t,e,i){if(!this.nt(t))return;const s=this.tt(t);this.It(t,e)?s.qe(e,1):s.Qe(e),this.Je=this.Je.insert(e,this.dt(e).delete(t)),this.Je=this.Je.insert(e,this.dt(e).add(t)),i&&(this.ze=this.ze.insert(e,i))}removeTarget(t){this.Ge.delete(t)}ot(t){const e=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let e=this.Ge.get(t);return e||(e=new QT,this.Ge.set(t,e)),e}dt(t){let e=this.Je.get(t);return e||(e=new Hi(Re),this.Je=this.Je.insert(t,e)),e}Tt(t){let e=this.je.get(t);return e||(e=new Hi(Re),this.je=this.je.insert(t,e)),e}nt(t){const e=this.st(t)!==null;return e||Gt("WatchChangeAggregator","Detected inactive target",t),e}st(t){const e=this.Ge.get(t);return e&&e.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new QT),this.We.getRemoteKeysForTarget(t).forEach((e=>{this.Xe(t,e,null)}))}It(t,e){return this.We.getRemoteKeysForTarget(t).has(e)}}function oy(){return new Mi(Wt.comparator)}function XT(){return new Mi(Wt.comparator)}const pO={asc:"ASCENDING",desc:"DESCENDING"},gO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_O={and:"AND",or:"OR"};class yO{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function aA(n,t){return n.useProto3Json||P1(t)?t:{value:t}}function e1(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function K5(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function vO(n,t){return e1(n,t.toTimestamp())}function Lo(n){return sn(!!n,49232),ce.fromTimestamp((function(e){const i=sh(e);return new wn(i.seconds,i.nanos)})(n))}function bE(n,t){return rA(n,t).canonicalString()}function rA(n,t){const e=(function(s){return new vn(["projects",s.projectId,"databases",s.database])})(n).child("documents");return t===void 0?e:e.child(t)}function W5(n){const t=vn.fromString(n);return sn(e6(t),10190,{key:t.toString()}),t}function lA(n,t){return bE(n.databaseId,t.path)}function o2(n,t){const e=W5(t);if(e.get(1)!==n.databaseId.projectId)throw new Bt(At.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Bt(At.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Wt(Z5(e))}function J5(n,t){return bE(n.databaseId,t)}function AO(n){const t=W5(n);return t.length===4?vn.emptyPath():Z5(t)}function oA(n){return new vn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Z5(n){return sn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function KT(n,t,e){return{name:lA(n,t),fields:e.value.mapValue.fields}}function EO(n,t){let e;if("targetChange"in t){t.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:re(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],l=(function(g,A){return g.useProto3Json?(sn(A===void 0||typeof A=="string",58123),is.fromBase64String(A||"")):(sn(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),is.fromUint8Array(A||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,f=c&&(function(g){const A=g.code===void 0?At.UNKNOWN:Y5(g.code);return new Bt(A,g.message||"")})(c);e=new X5(i,s,l,f||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=o2(n,i.document.name),l=Lo(i.document.updateTime),c=i.document.createTime?Lo(i.document.createTime):ce.min(),f=new za({mapValue:{fields:i.document.fields}}),m=Gs.newFoundDocument(s,l,c,f),g=i.targetIds||[],A=i.removedTargetIds||[];e=new My(g,A,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=o2(n,i.document),l=i.readTime?Lo(i.readTime):ce.min(),c=Gs.newNoDocument(s,l),f=i.removedTargetIds||[];e=new My([],f,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=o2(n,i.document),l=i.removedTargetIds||[];e=new My([],l,s,null)}else{if(!("filter"in t))return re(11601,{At:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:l}=i,c=new hO(s,l),f=i.targetId;e=new Q5(f,c)}}return e}function SO(n,t){let e;if(t instanceof v0)e={update:KT(n,t.key,t.value)};else if(t instanceof EE)e={delete:lA(n,t.key)};else if(t instanceof gh)e={update:KT(n,t.key,t.data),updateMask:IO(t.fieldMask)};else{if(!(t instanceof oO))return re(16599,{Rt:t.type});e={verify:lA(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(l,c){const f=c.transform;if(f instanceof Zg)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof $g)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof t0)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof t1)return{fieldPath:c.field.canonicalString(),increment:f.Ee};throw re(20930,{transform:c.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:vO(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:re(27497)})(n,t.precondition)),e}function TO(n,t){return n&&n.length>0?(sn(t!==void 0,14353),n.map((e=>(function(s,l){let c=s.updateTime?Lo(s.updateTime):Lo(l);return c.isEqual(ce.min())&&(c=Lo(l)),new aO(c,s.transformResults||[])})(e,t)))):[]}function bO(n,t){return{documents:[J5(n,t.path)]}}function CO(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=J5(n,s);const l=(function(g){if(g.length!==0)return t6(jl.create(g,"and"))})(t.filters);l&&(e.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((A=>(function(T){return{field:tm(T.field),direction:xO(T.dir)}})(A)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const f=aA(n,t.limit);return f!==null&&(e.structuredQuery.limit=f),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{Vt:e,parent:s}}function RO(n){let t=AO(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){sn(i===1,65062);const A=e.from[0];A.allDescendants?s=A.collectionId:t=t.child(A.collectionId)}let l=[];e.where&&(l=(function(S){const T=$5(S);return T instanceof jl&&N5(T)?T.getFilters():[T]})(e.where));let c=[];e.orderBy&&(c=(function(S){return S.map((T=>(function(w){return new $y(em(w.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(T)))})(e.orderBy));let f=null;e.limit&&(f=(function(S){let T;return T=typeof S=="object"?S.value:S,P1(T)?null:T})(e.limit));let m=null;e.startAt&&(m=(function(S){const T=!!S.before,x=S.values||[];return new Zy(x,T)})(e.startAt));let g=null;return e.endAt&&(g=(function(S){const T=!S.before,x=S.values||[];return new Zy(x,T)})(e.endAt)),FI(t,s,c,l,f,"F",m,g)}function wO(n,t){const e=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:s})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function $5(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=em(e.unaryFilter.field);return Di.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=em(e.unaryFilter.field);return Di.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=em(e.unaryFilter.field);return Di.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=em(e.unaryFilter.field);return Di.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}})(n):n.fieldFilter!==void 0?(function(e){return Di.create(em(e.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return jl.create(e.compositeFilter.filters.map((i=>$5(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re(1026)}})(e.compositeFilter.op))})(n):re(30097,{filter:n})}function xO(n){return pO[n]}function NO(n){return gO[n]}function DO(n){return _O[n]}function tm(n){return{fieldPath:n.canonicalString()}}function em(n){return ns.fromServerFormat(n.fieldPath)}function t6(n){return n instanceof Di?(function(e){if(e.op==="=="){if(kT(e.value))return{unaryFilter:{field:tm(e.field),op:"IS_NAN"}};if(VT(e.value))return{unaryFilter:{field:tm(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(kT(e.value))return{unaryFilter:{field:tm(e.field),op:"IS_NOT_NAN"}};if(VT(e.value))return{unaryFilter:{field:tm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tm(e.field),op:NO(e.op),value:e.value}}})(n):n instanceof jl?(function(e){const i=e.getFilters().map((s=>t6(s)));return i.length===1?i[0]:{compositeFilter:{op:DO(e.op),filters:i}}})(n):re(54877,{filter:n})}function IO(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function e6(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Qc{constructor(t,e,i,s,l=ce.min(),c=ce.min(),f=is.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(t){return new Qc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Qc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Qc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Qc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class OO{constructor(t){this.gt=t}}function MO(n){const t=RO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sA(t,t.limit,"L"):t}class LO{constructor(){this.Dn=new VO}addToCollectionParentIndex(t,e){return this.Dn.add(e),bt.resolve()}getCollectionParents(t,e){return bt.resolve(this.Dn.getEntries(e))}addFieldIndex(t,e){return bt.resolve()}deleteFieldIndex(t,e){return bt.resolve()}deleteAllFieldIndexes(t){return bt.resolve()}createTargetIndexes(t,e){return bt.resolve()}getDocumentsMatchingTarget(t,e){return bt.resolve(null)}getIndexType(t,e){return bt.resolve(0)}getFieldIndexes(t,e){return bt.resolve([])}getNextCollectionGroupToUpdate(t){return bt.resolve(null)}getMinOffset(t,e){return bt.resolve(ih.min())}getMinOffsetFromCollectionGroup(t,e){return bt.resolve(ih.min())}updateCollectionGroup(t,e,i){return bt.resolve()}updateIndexEntries(t,e){return bt.resolve()}}class VO{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new Hi(vn.comparator),l=!s.has(i);return this.index[e]=s.add(i),l}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Hi(vn.comparator)).toArray()}}const WT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},n6=41943040;class Ua{static withCacheSize(t){return new Ua(t,Ua.DEFAULT_COLLECTION_PERCENTILE,Ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}Ua.DEFAULT_COLLECTION_PERCENTILE=10,Ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ua.DEFAULT=new Ua(n6,Ua.DEFAULT_COLLECTION_PERCENTILE,Ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ua.DISABLED=new Ua(-1,0,0);class vm{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new vm(0)}static ur(){return new vm(-1)}}const JT="LruGarbageCollector",kO=1048576;function ZT([n,t],[e,i]){const s=Re(n,e);return s===0?Re(t,i):s}class PO{constructor(t){this.Tr=t,this.buffer=new Hi(ZT),this.Ir=0}dr(){return++this.Ir}Er(t){const e=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();ZT(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class UO{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){Gt(JT,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Pm(e)?Gt(JT,"Ignoring IndexedDB error during garbage collection: ",e):await km(e)}await this.Rr(3e5)}))}}class zO{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.mr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return bt.resolve(k1.ue);const i=new PO(e);return this.Vr.forEachTarget(t,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.gr(t,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Gt("LruGarbageCollector","Garbage collection skipped; disabled"),bt.resolve(WT)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(Gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WT):this.pr(t,e)))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,e){let i,s,l,c,f,m,g;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(Gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),s=this.params.maximumSequenceNumbersToCollect):s=S,c=Date.now(),this.nthSequenceNumber(t,s)))).next((S=>(i=S,f=Date.now(),this.removeTargets(t,i,e)))).next((S=>(l=S,m=Date.now(),this.removeOrphanedDocuments(t,i)))).next((S=>(g=Date.now(),Zd()<=Pe.DEBUG&&Gt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-A}ms
	Determined least recently used ${s} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${S} documents in `+(g-m)+`ms
Total Duration: ${g-A}ms`),bt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:S}))))}}function BO(n,t){return new zO(n,t)}class jO{constructor(){this.changes=new zf((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Gs.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?bt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class GO{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class HO{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(i=s,this.remoteDocumentCache.getEntry(t,e)))).next((s=>(i!==null&&Mg(i.mutation,s,hr.empty(),wn.now()),s)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,Be()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=Be()){const s=Sf();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,i).next((l=>{let c=Ag();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const i=Sf();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,Be())))}populateOverlays(t,e,i){const s=[];return i.forEach((l=>{e.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(t,s).next((l=>{l.forEach(((c,f)=>{e.set(c,f)}))}))}computeViews(t,e,i,s){let l=ku();const c=Og(),f=(function(){return Og()})();return e.forEach(((m,g)=>{const A=i.get(g.key);s.has(g.key)&&(A===void 0||A.mutation instanceof gh)?l=l.insert(g.key,g):A!==void 0?(c.set(g.key,A.mutation.getFieldMask()),Mg(A.mutation,g,A.mutation.getFieldMask(),wn.now())):c.set(g.key,hr.empty())})),this.recalculateAndSaveOverlays(t,l).next((m=>(m.forEach(((g,A)=>c.set(g,A))),e.forEach(((g,A)=>{var S;return f.set(g,new GO(A,(S=c.get(g))!==null&&S!==void 0?S:null))})),f)))}recalculateAndSaveOverlays(t,e){const i=Og();let s=new Mi(((c,f)=>c-f)),l=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=e.get(m);if(g===null)return;let A=i.get(m)||hr.empty();A=f.applyToLocalView(g,A),i.set(m,A);const S=(s.get(f.batchId)||Be()).add(m);s=s.insert(f.batchId,S)}))})).next((()=>{const c=[],f=s.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,A=m.value,S=U5();A.forEach((T=>{if(!l.has(T)){const x=q5(e.get(T),i.get(T));x!==null&&S.set(T,x),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(t,g,S))}return bt.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,s){return(function(c){return Wt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):M5(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-l.size):bt.resolve(Sf());let f=Kg,m=l;return c.next((g=>bt.forEach(g,((A,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),l.get(A)?bt.resolve():this.remoteDocumentCache.getEntry(t,A).next((T=>{m=m.insert(A,T)}))))).next((()=>this.populateOverlays(t,g,l))).next((()=>this.computeViews(t,m,g,Be()))).next((A=>({batchId:f,changes:P5(A)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Wt(e)).next((i=>{let s=Ag();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const l=e.collectionGroup;let c=Ag();return this.indexManager.getCollectionParents(t,l).next((f=>bt.forEach(f,(m=>{const g=(function(S,T){return new Um(T,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(e,m.child(l));return this.getDocumentsMatchingCollectionQuery(t,g,i,s).next((A=>{A.forEach(((S,T)=>{c=c.insert(S,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,i,s){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,l,s)))).next((c=>{l.forEach(((m,g)=>{const A=g.getKey();c.get(A)===null&&(c=c.insert(A,Gs.newInvalidDocument(A)))}));let f=Ag();return c.forEach(((m,g)=>{const A=l.get(m);A!==void 0&&Mg(A.mutation,g,hr.empty(),wn.now()),j1(e,g)&&(f=f.insert(m,g))})),f}))}}class qO{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,e){return bt.resolve(this.Br.get(e))}saveBundleMetadata(t,e){return this.Br.set(e.id,(function(s){return{id:s.id,version:s.version,createTime:Lo(s.createTime)}})(e)),bt.resolve()}getNamedQuery(t,e){return bt.resolve(this.Lr.get(e))}saveNamedQuery(t,e){return this.Lr.set(e.name,(function(s){return{name:s.name,query:MO(s.bundledQuery),readTime:Lo(s.readTime)}})(e)),bt.resolve()}}class FO{constructor(){this.overlays=new Mi(Wt.comparator),this.kr=new Map}getOverlay(t,e){return bt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Sf();return bt.forEach(e,(s=>this.getOverlay(t,s).next((l=>{l!==null&&i.set(s,l)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((s,l)=>{this.wt(t,e,l)})),bt.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),bt.resolve()}getOverlaysForCollection(t,e,i){const s=Sf(),l=e.length+1,c=new Wt(e.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>i&&s.set(m.getKey(),m)}return bt.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let l=new Mi(((g,A)=>g-A));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let A=l.get(g.largestBatchId);A===null&&(A=Sf(),l=l.insert(g.largestBatchId,A)),A.set(g.getKey(),g)}}const f=Sf(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,A)=>f.set(g,A))),!(f.size()>=s)););return bt.resolve(f)}wt(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new cO(e,i));let l=this.kr.get(e);l===void 0&&(l=Be(),this.kr.set(e,l)),this.kr.set(e,l.add(i.key))}}class YO{constructor(){this.sessionToken=is.EMPTY_BYTE_STRING}getSessionToken(t){return bt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,bt.resolve()}}class CE{constructor(){this.qr=new Hi($i.Qr),this.$r=new Hi($i.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,e){const i=new $i(t,e);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Wr(new $i(t,e))}Gr(t,e){t.forEach((i=>this.removeReference(i,e)))}zr(t){const e=new Wt(new vn([])),i=new $i(e,t),s=new $i(e,t+1),l=[];return this.$r.forEachInRange([i,s],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((t=>this.Wr(t)))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const e=new Wt(new vn([])),i=new $i(e,t),s=new $i(e,t+1);let l=Be();return this.$r.forEachInRange([i,s],(c=>{l=l.add(c.key)})),l}containsKey(t){const e=new $i(t,0),i=this.qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class $i{constructor(t,e){this.key=t,this.Hr=e}static Qr(t,e){return Wt.comparator(t.key,e.key)||Re(t.Hr,e.Hr)}static Ur(t,e){return Re(t.Hr,e.Hr)||Wt.comparator(t.key,e.key)}}class QO{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.er=1,this.Yr=new Hi($i.Qr)}checkEmpty(t){return bt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new uO(l,e,i,s);this.mutationQueue.push(c);for(const f of s)this.Yr=this.Yr.add(new $i(f.key,l)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return bt.resolve(c)}lookupMutationBatch(t,e){return bt.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.Xr(i),l=s<0?0:s;return bt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return bt.resolve(this.mutationQueue.length===0?pE:this.er-1)}getAllMutationBatches(t){return bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new $i(e,0),s=new $i(e,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,s],(c=>{const f=this.Zr(c.Hr);l.push(f)})),bt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Hi(Re);return e.forEach((s=>{const l=new $i(s,0),c=new $i(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(f=>{i=i.add(f.Hr)}))})),bt.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let l=i;Wt.isDocumentKey(l)||(l=l.child(""));const c=new $i(new Wt(l),0);let f=new Hi(Re);return this.Yr.forEachWhile((m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===s&&(f=f.add(m.Hr)),!0)}),c),bt.resolve(this.ei(f))}ei(t){const e=[];return t.forEach((i=>{const s=this.Zr(i);s!==null&&e.push(s)})),e}removeMutationBatch(t,e){sn(this.ti(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return bt.forEach(e.mutations,(s=>{const l=new $i(s.key,e.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Yr=i}))}rr(t){}containsKey(t,e){const i=new $i(e,0),s=this.Yr.firstAfterOrEqual(i);return bt.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,bt.resolve()}ti(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class XO{constructor(t){this.ni=t,this.docs=(function(){return new Mi(Wt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),l=s?s.size:0,c=this.ni(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return bt.resolve(i?i.document.mutableCopy():Gs.newInvalidDocument(e))}getEntries(t,e){let i=ku();return e.forEach((s=>{const l=this.docs.get(s);i=i.insert(s,l?l.document.mutableCopy():Gs.newInvalidDocument(s))})),bt.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let l=ku();const c=e.path,f=new Wt(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:A}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||TI(SI(A),i)<=0||(s.has(A.key)||j1(e,A))&&(l=l.insert(A.key,A.mutableCopy()))}return bt.resolve(l)}getAllFromCollectionGroup(t,e,i,s){re(9500)}ri(t,e){return bt.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new KO(this)}getSize(t){return bt.resolve(this.size)}}class KO extends jO{constructor(t){super(),this.Or=t}applyChanges(t){const e=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?e.push(this.Or.addEntry(t,s)):this.Or.removeEntry(i)})),bt.waitFor(e)}getFromCache(t,e){return this.Or.getEntry(t,e)}getAllFromCache(t,e){return this.Or.getEntries(t,e)}}class WO{constructor(t){this.persistence=t,this.ii=new zf((e=>yE(e)),vE),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.si=0,this.oi=new CE,this.targetCount=0,this._i=vm.ar()}forEachTarget(t,e){return this.ii.forEach(((i,s)=>e(s))),bt.resolve()}getLastRemoteSnapshotVersion(t){return bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return bt.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),bt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.si&&(this.si=e),bt.resolve()}hr(t){this.ii.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this._i=new vm(e),this.highestTargetId=e),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,e){return this.hr(e),this.targetCount+=1,bt.resolve()}updateTargetData(t,e){return this.hr(e),bt.resolve()}removeTargetData(t,e){return this.ii.delete(e.target),this.oi.zr(e.targetId),this.targetCount-=1,bt.resolve()}removeTargets(t,e,i){let s=0;const l=[];return this.ii.forEach(((c,f)=>{f.sequenceNumber<=e&&i.get(f.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(t,f.targetId)),s++)})),bt.waitFor(l).next((()=>s))}getTargetCount(t){return bt.resolve(this.targetCount)}getTargetData(t,e){const i=this.ii.get(e)||null;return bt.resolve(i)}addMatchingKeys(t,e,i){return this.oi.Kr(e,i),bt.resolve()}removeMatchingKeys(t,e,i){this.oi.Gr(e,i);const s=this.persistence.referenceDelegate,l=[];return s&&e.forEach((c=>{l.push(s.markPotentiallyOrphaned(t,c))})),bt.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.oi.zr(e),bt.resolve()}getMatchingKeysForTargetId(t,e){const i=this.oi.Jr(e);return bt.resolve(i)}containsKey(t,e){return bt.resolve(this.oi.containsKey(e))}}class i6{constructor(t,e){this.ai={},this.overlays={},this.ui=new k1(0),this.ci=!1,this.ci=!0,this.li=new YO,this.referenceDelegate=t(this),this.hi=new WO(this),this.indexManager=new LO,this.remoteDocumentCache=(function(s){return new XO(s)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new OO(e),this.Ti=new qO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new FO,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ai[t.toKey()];return i||(i=new QO(e,this.referenceDelegate),this.ai[t.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,e,i){Gt("MemoryPersistence","Starting transaction:",t);const s=new JO(this.ui.next());return this.referenceDelegate.Ii(),i(s).next((l=>this.referenceDelegate.di(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(t,e){return bt.or(Object.values(this.ai).map((i=>()=>i.containsKey(t,e))))}}class JO extends CI{constructor(t){super(),this.currentSequenceNumber=t}}class RE{constructor(t){this.persistence=t,this.Ai=new CE,this.Ri=null}static Vi(t){return new RE(t)}get mi(){if(this.Ri)return this.Ri;throw re(60996)}addReference(t,e,i){return this.Ai.addReference(i,e),this.mi.delete(i.toString()),bt.resolve()}removeReference(t,e,i){return this.Ai.removeReference(i,e),this.mi.add(i.toString()),bt.resolve()}markPotentiallyOrphaned(t,e){return this.mi.add(e.toString()),bt.resolve()}removeTarget(t,e){this.Ai.zr(e.targetId).forEach((s=>this.mi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((s=>{s.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(t,e)))}Ii(){this.Ri=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bt.forEach(this.mi,(i=>{const s=Wt.fromPath(i);return this.fi(t,s).next((l=>{l||e.removeEntry(s,ce.min())}))})).next((()=>(this.Ri=null,e.apply(t))))}updateLimboDocument(t,e){return this.fi(t,e).next((i=>{i?this.mi.delete(e.toString()):this.mi.add(e.toString())}))}Pi(t){return 0}fi(t,e){return bt.or([()=>bt.resolve(this.Ai.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class n1{constructor(t,e){this.persistence=t,this.gi=new zf((i=>xI(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=BO(this,e)}static Vi(t,e){return new n1(t,e)}Ii(){}di(t){return bt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}mr(t){const e=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((s=>i+s))))}yr(t){let e=0;return this.gr(t,(i=>{e++})).next((()=>e))}gr(t,e){return bt.forEach(this.gi,((i,s)=>this.Sr(t,i,s).next((l=>l?bt.resolve():e(s)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ri(t,(c=>this.Sr(t,c,e).next((f=>{f||(i++,l.removeEntry(c,ce.min()))})))).next((()=>l.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.gi.set(e,t.currentSequenceNumber),bt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),bt.resolve()}removeReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),bt.resolve()}updateLimboDocument(t,e){return this.gi.set(e,t.currentSequenceNumber),bt.resolve()}Pi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Dy(t.data.value)),e}Sr(t,e,i){return bt.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.gi.get(e);return bt.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class wE{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Is=i,this.ds=s}static Es(t,e){let i=Be(),s=Be();for(const l of e.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new wE(t,e.fromCache,i,s)}}class ZO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class $O{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return N7()?8:RI(qs())>0?6:4})()}initialize(t,e){this.gs=t,this.indexManager=e,this.As=!0}getDocumentsMatchingQuery(t,e,i,s){const l={result:null};return this.ps(t,e).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(t,e,s,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new ZO;return this.ws(t,e,c).next((f=>{if(l.result=f,this.Rs)return this.Ss(t,e,c,f.size)}))})).next((()=>l.result))}Ss(t,e,i,s){return i.documentReadCount<this.Vs?(Zd()<=Pe.DEBUG&&Gt("QueryEngine","SDK will not create cache indexes for query:",$d(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),bt.resolve()):(Zd()<=Pe.DEBUG&&Gt("QueryEngine","Query:",$d(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(Zd()<=Pe.DEBUG&&Gt("QueryEngine","The SDK decides to create cache indexes for query:",$d(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Mo(e))):bt.resolve())}ps(t,e){if(BT(e))return bt.resolve(null);let i=Mo(e);return this.indexManager.getIndexType(t,i).next((s=>s===0?null:(e.limit!==null&&s===1&&(e=sA(e,null,"F"),i=Mo(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((l=>{const c=Be(...l);return this.gs.getDocuments(t,c).next((f=>this.indexManager.getMinOffset(t,i).next((m=>{const g=this.bs(e,f);return this.Ds(e,g,c,m.readTime)?this.ps(t,sA(e,null,"F")):this.vs(t,g,e,m)}))))})))))}ys(t,e,i,s){return BT(e)||s.isEqual(ce.min())?bt.resolve(null):this.gs.getDocuments(t,i).next((l=>{const c=this.bs(e,l);return this.Ds(e,c,i,s)?bt.resolve(null):(Zd()<=Pe.DEBUG&&Gt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$d(e)),this.vs(t,c,e,EI(s,Kg)).next((f=>f)))}))}bs(t,e){let i=new Hi(V5(t));return e.forEach(((s,l)=>{j1(t,l)&&(i=i.add(l))})),i}Ds(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ws(t,e,i){return Zd()<=Pe.DEBUG&&Gt("QueryEngine","Using full collection scan to execute query:",$d(e)),this.gs.getDocumentsMatchingQuery(t,e,ih.min(),i)}vs(t,e,i,s){return this.gs.getDocumentsMatchingQuery(t,i,s).next((l=>(e.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const xE="LocalStore",tM=3e8;class eM{constructor(t,e,i,s){this.persistence=t,this.Cs=e,this.serializer=s,this.Fs=new Mi(Re),this.Ms=new zf((l=>yE(l)),vE),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(i)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new HO(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Fs)))}}function nM(n,t,e,i){return new eM(n,t,e,i)}async function s6(n,t){const e=me(n);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next((l=>(s=l,e.Ns(t),e.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],f=[];let m=Be();for(const g of s){c.push(g.batchId);for(const A of g.mutations)m=m.add(A.key)}for(const g of l){f.push(g.batchId);for(const A of g.mutations)m=m.add(A.key)}return e.localDocuments.getDocuments(i,m).next((g=>({Bs:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function iM(n,t){const e=me(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=t.batch.keys(),l=e.Os.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,A){const S=g.batch,T=S.keys();let x=bt.resolve();return T.forEach((w=>{x=x.next((()=>A.getEntry(m,w))).next((L=>{const V=g.docVersions.get(w);sn(V!==null,48541),L.version.compareTo(V)<0&&(S.applyToRemoteDocument(L,g),L.isValidDocument()&&(L.setReadTime(g.commitVersion),A.addEntry(L)))}))})),x.next((()=>f.mutationQueue.removeMutationBatch(m,S)))})(e,i,t,l).next((()=>l.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=Be();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(t)))).next((()=>e.localDocuments.getDocuments(i,s)))}))}function a6(n){const t=me(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.hi.getLastRemoteSnapshotVersion(e)))}function sM(n,t){const e=me(n),i=t.snapshotVersion;let s=e.Fs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=e.Os.newChangeBuffer({trackRemovals:!0});s=e.Fs;const f=[];t.targetChanges.forEach(((A,S)=>{const T=s.get(S);if(!T)return;f.push(e.hi.removeMatchingKeys(l,A.removedDocuments,S).next((()=>e.hi.addMatchingKeys(l,A.addedDocuments,S))));let x=T.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(S)!==null?x=x.withResumeToken(is.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):A.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(A.resumeToken,i)),s=s.insert(S,x),(function(L,V,G){return L.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=tM?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(T,x,A)&&f.push(e.hi.updateTargetData(l,x))}));let m=ku(),g=Be();if(t.documentUpdates.forEach((A=>{t.resolvedLimboDocuments.has(A)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(l,A))})),f.push(aM(l,c,t.documentUpdates).next((A=>{m=A.Ls,g=A.ks}))),!i.isEqual(ce.min())){const A=e.hi.getLastRemoteSnapshotVersion(l).next((S=>e.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(A)}return bt.waitFor(f).next((()=>c.apply(l))).next((()=>e.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(e.Fs=s,l)))}function aM(n,t,e){let i=Be(),s=Be();return e.forEach((l=>i=i.add(l))),t.getEntries(n,i).next((l=>{let c=ku();return e.forEach(((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(f)),m.isNoDocument()&&m.version.isEqual(ce.min())?(t.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(m),c=c.insert(f,m)):Gt(xE,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{Ls:c,ks:s}}))}function rM(n,t){const e=me(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=pE),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function lM(n,t){const e=me(n);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return e.hi.getTargetData(i,t).next((l=>l?(s=l,bt.resolve(s)):e.hi.allocateTargetId(i).next((c=>(s=new Qc(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.hi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=e.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Fs=e.Fs.insert(i.targetId,i),e.Ms.set(t,i.targetId)),i}))}async function uA(n,t,e){const i=me(n),s=i.Fs.get(t),l=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Pm(c))throw c;Gt(xE,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Fs=i.Fs.remove(t),i.Ms.delete(s.target)}function $T(n,t,e){const i=me(n);let s=ce.min(),l=Be();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,A){const S=me(m),T=S.Ms.get(A);return T!==void 0?bt.resolve(S.Fs.get(T)):S.hi.getTargetData(g,A)})(i,c,Mo(t)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,t,e?s:ce.min(),e?l:Be()))).next((f=>(oM(i,QI(t),f),{documents:f,qs:l})))))}function oM(n,t,e){let i=n.xs.get(t)||ce.min();e.forEach(((s,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.xs.set(t,i)}class t3{constructor(){this.activeTargetIds=$I()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class uM{constructor(){this.Fo=new t3,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,e,i){this.Mo[t]=e}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new t3,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class cM{xo(t){}shutdown(){}}const e3="ConnectivityMonitor";class n3{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Gt(e3,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){Gt(e3,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let uy=null;function cA(){return uy===null?uy=(function(){return 268435456+Math.round(2147483648*Math.random())})():uy++,"0x"+uy.toString(16)}const u2="RestConnection",hM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fM{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=e+"://"+t.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===Wy?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(t,e,i,s,l){const c=cA(),f=this.Go(t,e.toUriEncodedString());Gt(u2,`Sending RPC '${t}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,s,l);const{host:g}=new URL(f),A=fh(g);return this.jo(t,f,m,i,A).then((S=>(Gt(u2,`Received RPC '${t}' ${c}: `,S),S)),(S=>{throw Vu(u2,`RPC '${t}' ${c} failed with error: `,S,"url: ",f,"request:",i),S}))}Jo(t,e,i,s,l,c){return this.Wo(t,e,i,s,l)}zo(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vm})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((s,l)=>t[l]=s)),i&&i.headers.forEach(((s,l)=>t[l]=s))}Go(t,e){const i=hM[t];return`${this.$o}/v1/${e}:${i}`}terminate(){}}class dM{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}const Bs="WebChannelConnection";class mM extends fM{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,e,i,s,l){const c=cA();return new Promise(((f,m)=>{const g=new r5;g.setWithCredentials(!0),g.listenOnce(l5.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Ny.NO_ERROR:const S=g.getResponseJson();Gt(Bs,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(S)),f(S);break;case Ny.TIMEOUT:Gt(Bs,`RPC '${t}' ${c} timed out`),m(new Bt(At.DEADLINE_EXCEEDED,"Request time out"));break;case Ny.HTTP_ERROR:const T=g.getStatus();if(Gt(Bs,`RPC '${t}' ${c} failed with status:`,T,"response text:",g.getResponseText()),T>0){let x=g.getResponseJson();Array.isArray(x)&&(x=x[0]);const w=x?.error;if(w&&w.status&&w.message){const L=(function(G){const B=G.toLowerCase().replace(/_/g,"-");return Object.values(At).indexOf(B)>=0?B:At.UNKNOWN})(w.status);m(new Bt(L,w.message))}else m(new Bt(At.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Bt(At.UNAVAILABLE,"Connection failed."));break;default:re(9055,{c_:t,streamId:c,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{Gt(Bs,`RPC '${t}' ${c} completed.`)}}));const A=JSON.stringify(s);Gt(Bs,`RPC '${t}' ${c} sending request:`,s),g.send(e,"POST",A,i,15)}))}P_(t,e,i){const s=cA(),l=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=c5(),f=u5(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,e,i),m.encodeInitMessageHeaders=!0;const A=l.join("");Gt(Bs,`Creating RPC '${t}' stream ${s}: ${A}`,m);const S=c.createWebChannel(A,m);this.T_(S);let T=!1,x=!1;const w=new dM({Ho:V=>{x?Gt(Bs,`Not sending because RPC '${t}' stream ${s} is closed:`,V):(T||(Gt(Bs,`Opening RPC '${t}' stream ${s} transport.`),S.open(),T=!0),Gt(Bs,`RPC '${t}' stream ${s} sending:`,V),S.send(V))},Yo:()=>S.close()}),L=(V,G,B)=>{V.listen(G,(Y=>{try{B(Y)}catch(et){setTimeout((()=>{throw et}),0)}}))};return L(S,vg.EventType.OPEN,(()=>{x||(Gt(Bs,`RPC '${t}' stream ${s} transport opened.`),w.s_())})),L(S,vg.EventType.CLOSE,(()=>{x||(x=!0,Gt(Bs,`RPC '${t}' stream ${s} transport closed`),w.__(),this.I_(S))})),L(S,vg.EventType.ERROR,(V=>{x||(x=!0,Vu(Bs,`RPC '${t}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),w.__(new Bt(At.UNAVAILABLE,"The operation could not be completed")))})),L(S,vg.EventType.MESSAGE,(V=>{var G;if(!x){const B=V.data[0];sn(!!B,16349);const Y=B,et=Y?.error||((G=Y[0])===null||G===void 0?void 0:G.error);if(et){Gt(Bs,`RPC '${t}' stream ${s} received error:`,et);const at=et.status;let tt=(function(U){const q=xi[U];if(q!==void 0)return Y5(q)})(at),z=et.message;tt===void 0&&(tt=At.INTERNAL,z="Unknown error status: "+at+" with message "+et.message),x=!0,w.__(new Bt(tt,z)),S.close()}else Gt(Bs,`RPC '${t}' stream ${s} received:`,B),w.a_(B)}})),L(f,o5.STAT_EVENT,(V=>{V.stat===W2.PROXY?Gt(Bs,`RPC '${t}' stream ${s} detected buffering proxy`):V.stat===W2.NOPROXY&&Gt(Bs,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{w.o_()}),0),w}terminate(){this.u_.forEach((t=>t.close())),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter((e=>e===t))}}function c2(){return typeof document<"u"?document:null}function F1(n){return new yO(n,!0)}class r6{constructor(t,e,i=1e3,s=1.5,l=6e4){this.Fi=t,this.timerId=e,this.d_=i,this.E_=s,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,e-i);s>0&&Gt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),t()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const i3="PersistentStream";class l6{constructor(t,e,i,s,l,c,f,m){this.Fi=t,this.w_=i,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new r6(t,e)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():e&&e.code===At.RESOURCE_EXHAUSTED?(Lu(e.toString()),Lu("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):e&&e.code===At.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(e)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),e=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.b_===e&&this.W_(i,s)}),(i=>{t((()=>{const s=new Bt(At.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)}))}))}W_(t,e){const i=this.K_(this.b_);this.stream=this.z_(t,e),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{i((()=>this.G_(s)))})),this.stream.onMessage((s=>{i((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(t){return Gt(i3,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return e=>{this.Fi.enqueueAndForget((()=>this.b_===t?e():(Gt(i3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pM extends l6{constructor(t,e,i,s,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,c),this.serializer=l}z_(t,e){return this.connection.P_("Listen",t,e)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const e=EO(this.serializer,t),i=(function(l){if(!("targetChange"in l))return ce.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ce.min():c.readTime?Lo(c.readTime):ce.min()})(t);return this.listener.J_(e,i)}H_(t){const e={};e.database=oA(this.serializer),e.addTarget=(function(l,c){let f;const m=c.target;if(f=nA(m)?{documents:bO(l,m)}:{query:CO(l,m).Vt},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=K5(l,c.resumeToken);const g=aA(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(ce.min())>0){f.readTime=e1(l,c.snapshotVersion.toTimestamp());const g=aA(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,t);const i=wO(this.serializer,t);i&&(e.labels=i),this.k_(e)}Y_(t){const e={};e.database=oA(this.serializer),e.removeTarget=t,this.k_(e)}}class gM extends l6{constructor(t,e,i,s,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,e){return this.connection.P_("Write",t,e)}j_(t){return sn(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,sn(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){sn(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const e=TO(t.writeResults,t.commitTime),i=Lo(t.commitTime);return this.listener.ta(i,e)}na(){const t={};t.database=oA(this.serializer),this.k_(t)}X_(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>SO(this.serializer,i)))};this.k_(e)}}class _M{}class yM extends _M{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Bt(At.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(t,rA(e,i),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===At.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Bt(At.UNKNOWN,l.toString())}))}Jo(t,e,i,s,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Jo(t,rA(e,i),s,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===At.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Bt(At.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class vM{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Lu(e),this._a=!1):Gt("OnlineStateTracker",e)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}const Df="RemoteStore";class AM{constructor(t,e,i,s,l){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{i.enqueueAndForget((async()=>{Bf(this)&&(Gt(Df,"Restarting streams for network reachability change."),await(async function(m){const g=me(m);g.Ia.add(4),await E0(g),g.Aa.set("Unknown"),g.Ia.delete(4),await Y1(g)})(this))}))})),this.Aa=new vM(i,s)}}async function Y1(n){if(Bf(n))for(const t of n.da)await t(!0)}async function E0(n){for(const t of n.da)await t(!1)}function o6(n,t){const e=me(n);e.Ta.has(t.targetId)||(e.Ta.set(t.targetId,t),OE(e)?IE(e):zm(e).x_()&&DE(e,t))}function NE(n,t){const e=me(n),i=zm(e);e.Ta.delete(t),i.x_()&&u6(e,t),e.Ta.size===0&&(i.x_()?i.B_():Bf(e)&&e.Aa.set("Unknown"))}function DE(n,t){if(n.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ce.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}zm(n).H_(t)}function u6(n,t){n.Ra.$e(t),zm(n).Y_(t)}function IE(n){n.Ra=new mO({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.Ta.get(t)||null,lt:()=>n.datastore.serializer.databaseId}),zm(n).start(),n.Aa.aa()}function OE(n){return Bf(n)&&!zm(n).M_()&&n.Ta.size>0}function Bf(n){return me(n).Ia.size===0}function c6(n){n.Ra=void 0}async function EM(n){n.Aa.set("Online")}async function SM(n){n.Ta.forEach(((t,e)=>{DE(n,t)}))}async function TM(n,t){c6(n),OE(n)?(n.Aa.la(t),IE(n)):n.Aa.set("Unknown")}async function bM(n,t,e){if(n.Aa.set("Online"),t instanceof X5&&t.state===2&&t.cause)try{await(async function(s,l){const c=l.cause;for(const f of l.targetIds)s.Ta.has(f)&&(await s.remoteSyncer.rejectListen(f,c),s.Ta.delete(f),s.Ra.removeTarget(f))})(n,t)}catch(i){Gt(Df,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await i1(n,i)}else if(t instanceof My?n.Ra.Ye(t):t instanceof Q5?n.Ra.it(t):n.Ra.et(t),!e.isEqual(ce.min()))try{const i=await a6(n.localStore);e.compareTo(i)>=0&&await(function(l,c){const f=l.Ra.Pt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const A=l.Ta.get(g);A&&l.Ta.set(g,A.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const A=l.Ta.get(m);if(!A)return;l.Ta.set(m,A.withResumeToken(is.EMPTY_BYTE_STRING,A.snapshotVersion)),u6(l,m);const S=new Qc(A.target,m,g,A.sequenceNumber);DE(l,S)})),l.remoteSyncer.applyRemoteEvent(f)})(n,e)}catch(i){Gt(Df,"Failed to raise snapshot:",i),await i1(n,i)}}async function i1(n,t,e){if(!Pm(t))throw t;n.Ia.add(1),await E0(n),n.Aa.set("Offline"),e||(e=()=>a6(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Gt(Df,"Retrying IndexedDB access"),await e(),n.Ia.delete(1),await Y1(n)}))}function h6(n,t){return t().catch((e=>i1(n,e,t)))}async function Q1(n){const t=me(n),e=lh(t);let i=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:pE;for(;CM(t);)try{const s=await rM(t.localStore,i);if(s===null){t.Pa.length===0&&e.B_();break}i=s.batchId,RM(t,s)}catch(s){await i1(t,s)}f6(t)&&d6(t)}function CM(n){return Bf(n)&&n.Pa.length<10}function RM(n,t){n.Pa.push(t);const e=lh(n);e.x_()&&e.Z_&&e.X_(t.mutations)}function f6(n){return Bf(n)&&!lh(n).M_()&&n.Pa.length>0}function d6(n){lh(n).start()}async function wM(n){lh(n).na()}async function xM(n){const t=lh(n);for(const e of n.Pa)t.X_(e.mutations)}async function NM(n,t,e){const i=n.Pa.shift(),s=SE.from(i,t,e);await h6(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Q1(n)}async function DM(n,t){t&&lh(n).Z_&&await(async function(i,s){if((function(c){return fO(c)&&c!==At.ABORTED})(s.code)){const l=i.Pa.shift();lh(i).N_(),await h6(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Q1(i)}})(n,t),f6(n)&&d6(n)}async function s3(n,t){const e=me(n);e.asyncQueue.verifyOperationInProgress(),Gt(Df,"RemoteStore received new credentials");const i=Bf(e);e.Ia.add(3),await E0(e),i&&e.Aa.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ia.delete(3),await Y1(e)}async function IM(n,t){const e=me(n);t?(e.Ia.delete(2),await Y1(e)):t||(e.Ia.add(2),await E0(e),e.Aa.set("Unknown"))}function zm(n){return n.Va||(n.Va=(function(e,i,s){const l=me(e);return l.ia(),new pM(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:EM.bind(null,n),e_:SM.bind(null,n),n_:TM.bind(null,n),J_:bM.bind(null,n)}),n.da.push((async t=>{t?(n.Va.N_(),OE(n)?IE(n):n.Aa.set("Unknown")):(await n.Va.stop(),c6(n))}))),n.Va}function lh(n){return n.ma||(n.ma=(function(e,i,s){const l=me(e);return l.ia(),new gM(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:wM.bind(null,n),n_:DM.bind(null,n),ea:xM.bind(null,n),ta:NM.bind(null,n)}),n.da.push((async t=>{t?(n.ma.N_(),await Q1(n)):(await n.ma.stop(),n.Pa.length>0&&(Gt(Df,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}class ME{constructor(t,e,i,s,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=l,this.deferred=new xu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,l){const c=Date.now()+i,f=new ME(t,e,c,s,l);return f.start(i),f}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Bt(At.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function LE(n,t){if(Lu("AsyncQueue",`${t}: ${n}`),Pm(n))return new Bt(At.UNAVAILABLE,`${t}: ${n}`);throw n}class um{static emptySet(t){return new um(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||Wt.comparator(e.key,i.key):(e,i)=>Wt.comparator(e.key,i.key),this.keyedMap=Ag(),this.sortedSet=new Mi(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof um)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,l=i.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new um;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class a3{constructor(){this.fa=new Mi(Wt.comparator)}track(t){const e=t.doc.key,i=this.fa.get(e);i?t.type!==0&&i.type===3?this.fa=this.fa.insert(e,t):t.type===3&&i.type!==1?this.fa=this.fa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.fa=this.fa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.fa=this.fa.remove(e):t.type===1&&i.type===2?this.fa=this.fa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):re(63341,{At:t,ga:i}):this.fa=this.fa.insert(e,t)}pa(){const t=[];return this.fa.inorderTraversal(((e,i)=>{t.push(i)})),t}}class Am{constructor(t,e,i,s,l,c,f,m,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,s,l){const c=[];return e.forEach((f=>{c.push({type:0,doc:f})})),new Am(t,e,um.emptySet(e),c,i,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&B1(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}class OM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((t=>t.ba()))}}class MM{constructor(){this.queries=r3(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(e,i){const s=me(e),l=s.queries;s.queries=r3(),l.forEach(((c,f)=>{for(const m of f.wa)m.onError(i)}))})(this,new Bt(At.ABORTED,"Firestore shutting down"))}}function r3(){return new zf((n=>L5(n)),B1)}async function VE(n,t){const e=me(n);let i=3;const s=t.query;let l=e.queries.get(s);l?!l.Sa()&&t.ba()&&(i=2):(l=new OM,i=t.ba()?0:1);try{switch(i){case 0:l.ya=await e.onListen(s,!0);break;case 1:l.ya=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(c){const f=LE(c,`Initialization of query '${$d(t.query)}' failed`);return void t.onError(f)}e.queries.set(s,l),l.wa.push(t),t.va(e.onlineState),l.ya&&t.Ca(l.ya)&&PE(e)}async function kE(n,t){const e=me(n),i=t.query;let s=3;const l=e.queries.get(i);if(l){const c=l.wa.indexOf(t);c>=0&&(l.wa.splice(c,1),l.wa.length===0?s=t.ba()?0:1:!l.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function LM(n,t){const e=me(n);let i=!1;for(const s of t){const l=s.query,c=e.queries.get(l);if(c){for(const f of c.wa)f.Ca(s)&&(i=!0);c.ya=s}}i&&PE(e)}function VM(n,t,e){const i=me(n),s=i.queries.get(t);if(s)for(const l of s.wa)l.onError(e);i.queries.delete(t)}function PE(n){n.Da.forEach((t=>{t.next()}))}var hA,l3;(l3=hA||(hA={})).Fa="default",l3.Cache="cache";class UE{constructor(t,e,i){this.query=t,this.Ma=e,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Am(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),e=!0):this.Ba(t,this.onlineState)&&(this.La(t),e=!0),this.Oa=t,e}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let e=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),e=!0),e}Ba(t,e){if(!t.fromCache||!this.ba())return!0;const i=e!=="Offline";return(!this.options.ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const e=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}La(t){t=Am.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==hA.Cache}}class m6{constructor(t){this.key=t}}class p6{constructor(t){this.key=t}}class kM{constructor(t,e){this.query=t,this.Ha=e,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Be(),this.mutatedKeys=Be(),this.Xa=V5(t),this.eu=new um(this.Xa)}get tu(){return this.Ha}nu(t,e){const i=e?e.ru:new a3,s=e?e.eu:this.eu;let l=e?e.mutatedKeys:this.mutatedKeys,c=s,f=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((A,S)=>{const T=s.get(A),x=j1(this.query,S)?S:null,w=!!T&&this.mutatedKeys.has(T.key),L=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let V=!1;T&&x?T.data.isEqual(x.data)?w!==L&&(i.track({type:3,doc:x}),V=!0):this.iu(T,x)||(i.track({type:2,doc:x}),V=!0,(m&&this.Xa(x,m)>0||g&&this.Xa(x,g)<0)&&(f=!0)):!T&&x?(i.track({type:0,doc:x}),V=!0):T&&!x&&(i.track({type:1,doc:T}),V=!0,(m||g)&&(f=!0)),V&&(x?(c=c.add(x),l=L?l.add(A):l.delete(A)):(c=c.delete(A),l=l.delete(A)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const A=this.query.limitType==="F"?c.last():c.first();c=c.delete(A.key),l=l.delete(A.key),i.track({type:1,doc:A})}return{eu:c,ru:i,Ds:f,mutatedKeys:l}}iu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const l=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const c=t.ru.pa();c.sort(((A,S)=>(function(x,w){const L=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{At:V})}};return L(x)-L(w)})(A.type,S.type)||this.Xa(A.doc,S.doc))),this.su(i),s=s!=null&&s;const f=e&&!s?this.ou():[],m=this.Za.size===0&&this.current&&!s?1:0,g=m!==this.Ya;return this.Ya=m,c.length!==0||g?{snapshot:new Am(this.query,t.eu,l,c,t.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new a3,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach((e=>this.Ha=this.Ha.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ha=this.Ha.delete(e))),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Be(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const e=[];return t.forEach((i=>{this.Za.has(i)||e.push(new p6(i))})),this.Za.forEach((i=>{t.has(i)||e.push(new m6(i))})),e}uu(t){this.Ha=t.qs,this.Za=Be();const e=this.nu(t.documents);return this.applyChanges(e,!0)}cu(){return Am.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const zE="SyncEngine";class PM{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class UM{constructor(t){this.key=t,this.lu=!1}}class zM{constructor(t,e,i,s,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new zf((f=>L5(f)),B1),this.Tu=new Map,this.Iu=new Set,this.du=new Mi(Wt.comparator),this.Eu=new Map,this.Au=new CE,this.Ru={},this.Vu=new Map,this.mu=vm.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function BM(n,t,e=!0){const i=E6(n);let s;const l=i.Pu.get(t);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.cu()):s=await g6(i,t,e,!0),s}async function jM(n,t){const e=E6(n);await g6(e,t,!0,!1)}async function g6(n,t,e,i){const s=await lM(n.localStore,Mo(t)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,e);let f;return i&&(f=await GM(n,t,l,c==="current",s.resumeToken)),n.isPrimaryClient&&e&&o6(n.remoteStore,s),f}async function GM(n,t,e,i,s){n.gu=(S,T,x)=>(async function(L,V,G,B){let Y=V.view.nu(G);Y.Ds&&(Y=await $T(L.localStore,V.query,!1).then((({documents:z})=>V.view.nu(z,Y))));const et=B&&B.targetChanges.get(V.targetId),at=B&&B.targetMismatches.get(V.targetId)!=null,tt=V.view.applyChanges(Y,L.isPrimaryClient,et,at);return u3(L,V.targetId,tt._u),tt.snapshot})(n,S,T,x);const l=await $T(n.localStore,t,!0),c=new kM(t,l.qs),f=c.nu(l.documents),m=A0.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),g=c.applyChanges(f,n.isPrimaryClient,m);u3(n,e,g._u);const A=new PM(t,e,c);return n.Pu.set(t,A),n.Tu.has(e)?n.Tu.get(e).push(t):n.Tu.set(e,[t]),g.snapshot}async function HM(n,t,e){const i=me(n),s=i.Pu.get(t),l=i.Tu.get(s.targetId);if(l.length>1)return i.Tu.set(s.targetId,l.filter((c=>!B1(c,t)))),void i.Pu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await uA(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),e&&NE(i.remoteStore,s.targetId),fA(i,s.targetId)})).catch(km)):(fA(i,s.targetId),await uA(i.localStore,s.targetId,!0))}async function qM(n,t){const e=me(n),i=e.Pu.get(t),s=e.Tu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),NE(e.remoteStore,i.targetId))}async function FM(n,t,e){const i=ZM(n);try{const s=await(function(c,f){const m=me(c),g=wn.now(),A=f.reduce(((x,w)=>x.add(w.key)),Be());let S,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let w=ku(),L=Be();return m.Os.getEntries(x,A).next((V=>{w=V,w.forEach(((G,B)=>{B.isValidDocument()||(L=L.add(G))}))})).next((()=>m.localDocuments.getOverlayedDocuments(x,w))).next((V=>{S=V;const G=[];for(const B of f){const Y=lO(B,S.get(B.key).overlayedDocument);Y!=null&&G.push(new gh(B.key,Y,R5(Y.value.mapValue),tl.exists(!0)))}return m.mutationQueue.addMutationBatch(x,g,G,f)})).next((V=>{T=V;const G=V.applyToLocalDocumentSet(S,L);return m.documentOverlayCache.saveOverlays(x,V.batchId,G)}))})).then((()=>({batchId:T.batchId,changes:P5(S)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),(function(c,f,m){let g=c.Ru[c.currentUser.toKey()];g||(g=new Mi(Re)),g=g.insert(f,m),c.Ru[c.currentUser.toKey()]=g})(i,s.batchId,e),await S0(i,s.changes),await Q1(i.remoteStore)}catch(s){const l=LE(s,"Failed to persist write");e.reject(l)}}async function _6(n,t){const e=me(n);try{const i=await sM(e.localStore,t);t.targetChanges.forEach(((s,l)=>{const c=e.Eu.get(l);c&&(sn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.lu=!0:s.modifiedDocuments.size>0?sn(c.lu,14607):s.removedDocuments.size>0&&(sn(c.lu,42227),c.lu=!1))})),await S0(e,i,t)}catch(i){await km(i)}}function o3(n,t,e){const i=me(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.Pu.forEach(((l,c)=>{const f=c.view.va(t);f.snapshot&&s.push(f.snapshot)})),(function(c,f){const m=me(c);m.onlineState=f;let g=!1;m.queries.forEach(((A,S)=>{for(const T of S.wa)T.va(f)&&(g=!0)})),g&&PE(m)})(i.eventManager,t),s.length&&i.hu.J_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function YM(n,t,e){const i=me(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Eu.get(t),l=s&&s.key;if(l){let c=new Mi(Wt.comparator);c=c.insert(l,Gs.newNoDocument(l,ce.min()));const f=Be().add(l),m=new q1(ce.min(),new Map,new Mi(Re),c,f);await _6(i,m),i.du=i.du.remove(l),i.Eu.delete(t),BE(i)}else await uA(i.localStore,t,!1).then((()=>fA(i,t,e))).catch(km)}async function QM(n,t){const e=me(n),i=t.batch.batchId;try{const s=await iM(e.localStore,t);v6(e,i,null),y6(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await S0(e,s)}catch(s){await km(s)}}async function XM(n,t,e){const i=me(n);try{const s=await(function(c,f){const m=me(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let A;return m.mutationQueue.lookupMutationBatch(g,f).next((S=>(sn(S!==null,37113),A=S.keys(),m.mutationQueue.removeMutationBatch(g,S)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,A,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,A))).next((()=>m.localDocuments.getDocuments(g,A)))}))})(i.localStore,t);v6(i,t,e),y6(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await S0(i,s)}catch(s){await km(s)}}function y6(n,t){(n.Vu.get(t)||[]).forEach((e=>{e.resolve()})),n.Vu.delete(t)}function v6(n,t,e){const i=me(n);let s=i.Ru[i.currentUser.toKey()];if(s){const l=s.get(t);l&&(e?l.reject(e):l.resolve(),s=s.remove(t)),i.Ru[i.currentUser.toKey()]=s}}function fA(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Tu.get(t))n.Pu.delete(i),e&&n.hu.pu(i,e);n.Tu.delete(t),n.isPrimaryClient&&n.Au.zr(t).forEach((i=>{n.Au.containsKey(i)||A6(n,i)}))}function A6(n,t){n.Iu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(NE(n.remoteStore,e),n.du=n.du.remove(t),n.Eu.delete(e),BE(n))}function u3(n,t,e){for(const i of e)i instanceof m6?(n.Au.addReference(i.key,t),KM(n,i)):i instanceof p6?(Gt(zE,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,t),n.Au.containsKey(i.key)||A6(n,i.key)):re(19791,{yu:i})}function KM(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Iu.has(i)||(Gt(zE,"New document in limbo: "+e),n.Iu.add(i),BE(n))}function BE(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Iu.values().next().value;n.Iu.delete(t);const e=new Wt(vn.fromString(t)),i=n.mu.next();n.Eu.set(i,new UM(e)),n.du=n.du.insert(e,i),o6(n.remoteStore,new Qc(Mo(z1(e.path)),i,"TargetPurposeLimboResolution",k1.ue))}}async function S0(n,t,e){const i=me(n),s=[],l=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach(((f,m)=>{c.push(i.gu(m,t,e).then((g=>{var A;if((g||e)&&i.isPrimaryClient){const S=g?!g.fromCache:(A=e?.targetChanges.get(m.targetId))===null||A===void 0?void 0:A.current;i.sharedClientState.updateQueryState(m.targetId,S?"current":"not-current")}if(g){s.push(g);const S=wE.Es(m.targetId,g);l.push(S)}})))})),await Promise.all(c),i.hu.J_(s),await(async function(m,g){const A=me(m);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>bt.forEach(g,(T=>bt.forEach(T.Is,(x=>A.persistence.referenceDelegate.addReference(S,T.targetId,x))).next((()=>bt.forEach(T.ds,(x=>A.persistence.referenceDelegate.removeReference(S,T.targetId,x)))))))))}catch(S){if(!Pm(S))throw S;Gt(xE,"Failed to update sequence numbers: "+S)}for(const S of g){const T=S.targetId;if(!S.fromCache){const x=A.Fs.get(T),w=x.snapshotVersion,L=x.withLastLimboFreeSnapshotVersion(w);A.Fs=A.Fs.insert(T,L)}}})(i.localStore,l))}async function WM(n,t){const e=me(n);if(!e.currentUser.isEqual(t)){Gt(zE,"User change. New user:",t.toKey());const i=await s6(e.localStore,t);e.currentUser=t,(function(l,c){l.Vu.forEach((f=>{f.forEach((m=>{m.reject(new Bt(At.CANCELLED,c))}))})),l.Vu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await S0(e,i.Bs)}}function JM(n,t){const e=me(n),i=e.Eu.get(t);if(i&&i.lu)return Be().add(i.key);{let s=Be();const l=e.Tu.get(t);if(!l)return s;for(const c of l){const f=e.Pu.get(c);s=s.unionWith(f.view.tu)}return s}}function E6(n){const t=me(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=_6.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=JM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=YM.bind(null,t),t.hu.J_=LM.bind(null,t.eventManager),t.hu.pu=VM.bind(null,t.eventManager),t}function ZM(n){const t=me(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=QM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=XM.bind(null,t),t}class s1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=F1(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,e){return null}Fu(t,e){return null}vu(t){return nM(this.persistence,new $O,t.initialUser,this.serializer)}Du(t){return new i6(RE.Vi,this.serializer)}bu(t){return new uM}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}s1.provider={build:()=>new s1};class $M extends s1{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,e){sn(this.persistence.referenceDelegate instanceof n1,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new UO(i,t.asyncQueue,e)}Du(t){const e=this.cacheSizeBytes!==void 0?Ua.withCacheSize(this.cacheSizeBytes):Ua.DEFAULT;return new i6((i=>n1.Vi(i,e)),this.serializer)}}class dA{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>o3(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=WM.bind(null,this.syncEngine),await IM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new MM})()}createDatastore(t){const e=F1(t.databaseInfo.databaseId),i=(function(l){return new mM(l)})(t.databaseInfo);return(function(l,c,f,m){return new yM(l,c,f,m)})(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,s,l,c,f){return new AM(i,s,l,c,f)})(this.localStore,this.datastore,t.asyncQueue,(e=>o3(this.syncEngine,e,0)),(function(){return n3.C()?new n3:new cM})())}createSyncEngine(t,e){return(function(s,l,c,f,m,g,A){const S=new zM(s,l,c,f,m,g);return A&&(S.fu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(s){const l=me(s);Gt(Df,"RemoteStore shutting down."),l.Ia.add(5),await E0(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}dA.provider={build:()=>new dA};class jE{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):Lu("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const oh="FirestoreClient";class tL{constructor(t,e,i,s,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=s,this.user=js.UNAUTHENTICATED,this.clientId=L1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Gt(oh,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Gt(oh,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new xu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=LE(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function h2(n,t){n.asyncQueue.verifyOperationInProgress(),Gt(oh,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await s6(t.localStore,s),i=s)})),t.persistence.setDatabaseDeletedListener((()=>{Vu("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{Gt("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{Vu("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),n._offlineComponents=t}async function c3(n,t){n.asyncQueue.verifyOperationInProgress();const e=await eL(n);Gt(oh,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((i=>s3(t.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>s3(t.remoteStore,s))),n._onlineComponents=t}async function eL(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Gt(oh,"Using user provided OfflineComponentProvider");try{await h2(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(s){return s.name==="FirebaseError"?s.code===At.FAILED_PRECONDITION||s.code===At.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(e))throw e;Vu("Error using user provided cache. Falling back to memory cache: "+e),await h2(n,new s1)}}else Gt(oh,"Using default OfflineComponentProvider"),await h2(n,new $M(void 0));return n._offlineComponents}async function S6(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Gt(oh,"Using user provided OnlineComponentProvider"),await c3(n,n._uninitializedComponentsProvider._online)):(Gt(oh,"Using default OnlineComponentProvider"),await c3(n,new dA))),n._onlineComponents}function nL(n){return S6(n).then((t=>t.syncEngine))}async function a1(n){const t=await S6(n),e=t.eventManager;return e.onListen=BM.bind(null,t.syncEngine),e.onUnlisten=HM.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=jM.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=qM.bind(null,t.syncEngine),e}function iL(n,t,e={}){const i=new xu;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,g){const A=new jE({next:T=>{A.Ou(),c.enqueueAndForget((()=>kE(l,S)));const x=T.docs.has(f);!x&&T.fromCache?g.reject(new Bt(At.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&T.fromCache&&m&&m.source==="server"?g.reject(new Bt(At.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),S=new UE(z1(f.path),A,{includeMetadataChanges:!0,ka:!0});return VE(l,S)})(await a1(n),n.asyncQueue,t,e,i))),i.promise}function sL(n,t,e={}){const i=new xu;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,g){const A=new jE({next:T=>{A.Ou(),c.enqueueAndForget((()=>kE(l,S))),T.fromCache&&m.source==="server"?g.reject(new Bt(At.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),S=new UE(f,A,{includeMetadataChanges:!0,ka:!0});return VE(l,S)})(await a1(n),n.asyncQueue,t,e,i))),i.promise}function T6(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}const h3=new Map;const b6="firestore.googleapis.com",f3=!0;class d3{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Bt(At.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=b6,this.ssl=f3}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:f3;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=n6;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<kO)throw new Bt(At.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}p5("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=T6((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Bt(At.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Bt(At.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Bt(At.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class T0{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Bt(At.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Bt(At.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d3(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new d5;switch(i.type){case"firstParty":return new gI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Bt(At.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=h3.get(e);i&&(Gt("ComponentProvider","Removing Datastore"),h3.delete(e),i.terminate())})(this),Promise.resolve()}}function C6(n,t,e,i={}){var s;n=Hs(n,T0);const l=fh(t),c=n._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),m=`${t}:${e}`;l&&($A(`https://${m}`),tE("Firestore",!0)),c.host!==b6&&c.host!==m&&Vu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:i});if(!eh(g,f)&&(n._setSettings(g),i.mockUserToken)){let A,S;if(typeof i.mockUserToken=="string")A=i.mockUserToken,S=js.MOCK_USER;else{A=_C(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Bt(At.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new js(T)}n._authCredentials=new dI(new f5(A,S))}}class Bu{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Bu(this.firestore,t,this._query)}}class $n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new $n(this.firestore,t,this._key)}toJSON(){return{type:$n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(y0(e,$n._jsonSchema))return new $n(t,i||null,new Wt(vn.fromString(e.referencePath)))}}$n._jsonSchemaVersion="firestore/documentReference/1.0",$n._jsonSchema={type:Ii("string",$n._jsonSchemaVersion),referencePath:Ii("string")};class Nu extends Bu{constructor(t,e,i){super(t,e,z1(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new $n(this.firestore,null,new Wt(t))}withConverter(t){return new Nu(this.firestore,t,this._path)}}function Bm(n,t,...e){if(n=Bn(n),mE("collection","path",t),n instanceof T0){const i=vn.fromString(t,...e);return RT(i),new Nu(n,null,i)}{if(!(n instanceof $n||n instanceof Nu))throw new Bt(At.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(vn.fromString(t,...e));return RT(i),new Nu(n.firestore,null,i)}}function GE(n,t){if(n=Hs(n,T0),mE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Bt(At.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bu(n,null,(function(i){return new Um(vn.emptyPath(),i)})(t))}function jf(n,t,...e){if(n=Bn(n),arguments.length===1&&(t=L1.newId()),mE("doc","path",t),n instanceof T0){const i=vn.fromString(t,...e);return CT(i),new $n(n,null,new Wt(i))}{if(!(n instanceof $n||n instanceof Nu))throw new Bt(At.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(vn.fromString(t,...e));return CT(i),new $n(n.firestore,n instanceof Nu?n.converter:null,new Wt(i))}}const m3="AsyncQueue";class p3{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new r6(this,"async_queue_retry"),this.oc=()=>{const i=c2();i&&Gt(m3,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=t;const e=c2();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=c2();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise((()=>{}));const e=new xu;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Zu.push(t),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Pm(t))throw t;Gt(m3,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(t){const e=this._c.then((()=>(this.nc=!0,t().catch((i=>{throw this.tc=i,this.nc=!1,Lu("INTERNAL UNHANDLED ERROR: ",g3(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=e,e}enqueueAfterDelay(t,e,i){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const s=ME.createAndSchedule(this,t,e,i,(l=>this.lc(l)));return this.ec.push(s),s}ac(){this.tc&&re(47125,{hc:g3(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then((()=>{this.ec.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.ec)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Pc()}))}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function g3(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}function _3(n){return(function(e,i){if(typeof e!="object"||e===null)return!1;const s=e;for(const l of i)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}class ko extends T0{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new p3,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new p3(t),this._firestoreClient=void 0,await t}}}function R6(n,t){const e=typeof n=="object"?n:iE(),i=typeof n=="string"?n:Wy,s=D1(e,"firestore").getImmediate({identifier:i});if(!s._initialized){const l=mC("firestore");l&&C6(s,...l)}return s}function b0(n){if(n._terminated)throw new Bt(At.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||aL(n),n._firestoreClient}function aL(n){var t,e,i;const s=n._freezeSettings(),l=(function(f,m,g,A){return new II(f,m,g,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,T6(A.experimentalLongPollingOptions),A.useFetchStreams,A.isUsingEmulator)})(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((e=s.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new tL(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(f){const m=f?._online.build();return{_offline:f?._offline.build(m),_online:m}})(n._componentsProvider))}class ur{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ur(is.fromBase64String(t))}catch(e){throw new Bt(At.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ur(is.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(y0(t,ur._jsonSchema))return ur.fromBase64String(t.bytes)}}ur._jsonSchemaVersion="firestore/bytes/1.0",ur._jsonSchema={type:Ii("string",ur._jsonSchemaVersion),bytes:Ii("string")};class C0{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Bt(At.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ns(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class R0{constructor(t){this._methodName=t}}class kl{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Bt(At.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Bt(At.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Re(this._lat,t._lat)||Re(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kl._jsonSchemaVersion}}static fromJSON(t){if(y0(t,kl._jsonSchema))return new kl(t.latitude,t.longitude)}}kl._jsonSchemaVersion="firestore/geoPoint/1.0",kl._jsonSchema={type:Ii("string",kl._jsonSchemaVersion),latitude:Ii("number"),longitude:Ii("number")};class Pl{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,s){if(i.length!==s.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==s[l])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Pl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(y0(t,Pl._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Pl(t.vectorValues);throw new Bt(At.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pl._jsonSchemaVersion="firestore/vectorValue/1.0",Pl._jsonSchema={type:Ii("string",Pl._jsonSchemaVersion),vectorValues:Ii("object")};const rL=/^__.*__$/;class lL{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new gh(t,this.data,this.fieldMask,e,this.fieldTransforms):new v0(t,this.data,e,this.fieldTransforms)}}class w6{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new gh(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function x6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ec:n})}}class HE{constructor(t,e,i,s,l,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new HE(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.Rc({path:i,mc:!1});return s.fc(t),s}gc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return r1(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(x6(this.Ec)&&rL.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class oL{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||F1(t)}Dc(t,e,i,s=!1){return new HE({Ec:t,methodName:e,bc:i,path:ns.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function X1(n){const t=n._freezeSettings(),e=F1(n._databaseId);return new oL(n._databaseId,!!t.ignoreUndefinedProperties,e)}function N6(n,t,e,i,s,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,t,e,s);FE("Data must be an object, but it was:",c,i);const f=D6(i,c);let m,g;if(l.merge)m=new hr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const A=[];for(const S of l.mergeFields){const T=mA(t,S,e);if(!c.contains(T))throw new Bt(At.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);O6(A,T)||A.push(T)}m=new hr(A),g=c.fieldTransforms.filter((S=>m.covers(S.field)))}else m=null,g=c.fieldTransforms;return new lL(new za(f),m,g)}class K1 extends R0{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof K1}}class qE extends R0{_toFieldTransform(t){return new iO(t.path,new Zg)}isEqual(t){return t instanceof qE}}function uL(n,t,e,i){const s=n.Dc(1,t,e);FE("Data must be an object, but it was:",s,i);const l=[],c=za.empty();ph(i,((m,g)=>{const A=YE(t,m,e);g=Bn(g);const S=s.gc(A);if(g instanceof K1)l.push(A);else{const T=w0(g,S);T!=null&&(l.push(A),c.set(A,T))}}));const f=new hr(l);return new w6(c,f,s.fieldTransforms)}function cL(n,t,e,i,s,l){const c=n.Dc(1,t,e),f=[mA(t,i,e)],m=[s];if(l.length%2!=0)throw new Bt(At.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)f.push(mA(t,l[T])),m.push(l[T+1]);const g=[],A=za.empty();for(let T=f.length-1;T>=0;--T)if(!O6(g,f[T])){const x=f[T];let w=m[T];w=Bn(w);const L=c.gc(x);if(w instanceof K1)g.push(x);else{const V=w0(w,L);V!=null&&(g.push(x),A.set(x,V))}}const S=new hr(g);return new w6(A,S,c.fieldTransforms)}function hL(n,t,e,i=!1){return w0(e,n.Dc(i?4:3,t))}function w0(n,t){if(I6(n=Bn(n)))return FE("Unsupported field value:",t,n),D6(n,t);if(n instanceof R0)return(function(i,s){if(!x6(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return(function(i,s){const l=[];let c=0;for(const f of i){let m=w0(f,s.yc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,t)}return(function(i,s){if((i=Bn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return tO(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=wn.fromDate(i);return{timestampValue:e1(s.serializer,l)}}if(i instanceof wn){const l=new wn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:e1(s.serializer,l)}}if(i instanceof kl)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ur)return{bytesValue:K5(s.serializer,i._byteString)};if(i instanceof $n){const l=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw s.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:bE(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Pl)return(function(c,f){return{mapValue:{fields:{[b5]:{stringValue:C5},[Jy]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw f.wc("VectorValues must only contain numeric values.");return AE(f.serializer,g)}))}}}}}})(i,s);throw s.wc(`Unsupported field value: ${V1(i)}`)})(n,t)}function D6(n,t){const e={};return y5(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ph(n,((i,s)=>{const l=w0(s,t.Vc(i));l!=null&&(e[i]=l)})),{mapValue:{fields:e}}}function I6(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wn||n instanceof kl||n instanceof ur||n instanceof $n||n instanceof R0||n instanceof Pl)}function FE(n,t,e){if(!I6(e)||!g5(e)){const i=V1(e);throw i==="an object"?t.wc(n+" a custom object"):t.wc(n+" "+i)}}function mA(n,t,e){if((t=Bn(t))instanceof C0)return t._internalPath;if(typeof t=="string")return YE(n,t);throw r1("Field path arguments must be of type string or ",n,!1,void 0,e)}const fL=new RegExp("[~\\*/\\[\\]]");function YE(n,t,e){if(t.search(fL)>=0)throw r1(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new C0(...t.split("."))._internalPath}catch{throw r1(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function r1(n,t,e,i,s){const l=i&&!i.isEmpty(),c=s!==void 0;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${s}`),m+=")"),new Bt(At.INVALID_ARGUMENT,f+n+m)}function O6(n,t){return n.some((e=>e.isEqual(t)))}class M6{constructor(t,e,i,s,l){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new dL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(QE("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class dL extends M6{data(){return super.data()}}function QE(n,t){return typeof t=="string"?YE(n,t):t instanceof C0?t._internalPath:t._delegate._internalPath}function L6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Bt(At.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class XE{}class V6 extends XE{}function l1(n,t,...e){let i=[];t instanceof XE&&i.push(t),i=i.concat(e),(function(l){const c=l.filter((m=>m instanceof W1)).length,f=l.filter((m=>m instanceof x0)).length;if(c>1||c>0&&f>0)throw new Bt(At.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class x0 extends V6{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new x0(t,e,i)}_apply(t){const e=this._parse(t);return k6(t._query,e),new Bu(t.firestore,t.converter,iA(t._query,e))}_parse(t){const e=X1(t.firestore);return(function(l,c,f,m,g,A,S){let T;if(g.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new Bt(At.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){v3(S,A);const w=[];for(const L of S)w.push(y3(m,l,L));T={arrayValue:{values:w}}}else T=y3(m,l,S)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||v3(S,A),T=hL(f,c,S,A==="in"||A==="not-in");return Di.create(g,A,T)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function e0(n,t,e){const i=t,s=QE("where",n);return x0._create(s,i,e)}class W1 extends XE{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new W1(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:jl.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(s,l){let c=s;const f=l.getFlattenedFilters();for(const m of f)k6(c,m),c=iA(c,m)})(t._query,e),new Bu(t.firestore,t.converter,iA(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function y3(n,t,e){if(typeof(e=Bn(e))=="string"){if(e==="")throw new Bt(At.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!M5(t)&&e.indexOf("/")!==-1)throw new Bt(At.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(vn.fromString(e));if(!Wt.isDocumentKey(i))throw new Bt(At.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return LT(n,new Wt(i))}if(e instanceof $n)return LT(n,e._key);throw new Bt(At.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${V1(e)}.`)}function v3(n,t){if(!Array.isArray(n)||n.length===0)throw new Bt(At.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function k6(n,t){const e=(function(s,l){for(const c of s)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new Bt(At.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Bt(At.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class P6{convertValue(t,e="none"){switch(rh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _i(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ah(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw re(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return ph(t,((s,l)=>{i[s]=this.convertValue(l,e)})),i}convertVectorValue(t){var e,i,s;const l=(s=(i=(e=t.fields)===null||e===void 0?void 0:e[Jy].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map((c=>_i(c.doubleValue)));return new Pl(l)}convertGeoPoint(t){return new kl(_i(t.latitude),_i(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=U1(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Wg(t));default:return null}}convertTimestamp(t){const e=sh(t);return new wn(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=vn.fromString(t);sn(e6(i),9688,{name:t});const s=new gm(i.get(1),i.get(3)),l=new Wt(i.popFirst(5));return s.isEqual(e)||Lu(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}function U6(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class im{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Zc extends M6{constructor(t,e,i,s,l,c){super(t,e,i,s,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Lg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(QE("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Bt(At.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Zc._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Zc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zc._jsonSchema={type:Ii("string",Zc._jsonSchemaVersion),bundleSource:Ii("string","DocumentSnapshot"),bundleName:Ii("string"),bundle:Ii("string")};class Lg extends Zc{data(t={}){return super.data(t)}}class $c{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new im(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new Lg(this._firestore,this._userDataWriter,i.key,i,new im(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Bt(At.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((f=>{const m=new Lg(s._firestore,s._userDataWriter,f.doc.key,f.doc,new im(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new Lg(s._firestore,s._userDataWriter,f.doc.key,f.doc,new im(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,A=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),A=c.indexOf(f.doc.key)),{type:mL(f.type),doc:m,oldIndex:g,newIndex:A}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Bt(At.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=$c._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=L1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(e.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function mL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:n})}}function J1(n){n=Hs(n,$n);const t=Hs(n.firestore,ko);return iL(b0(t),n._key).then((e=>z6(t,n,e)))}$c._jsonSchemaVersion="firestore/querySnapshot/1.0",$c._jsonSchema={type:Ii("string",$c._jsonSchemaVersion),bundleSource:Ii("string","QuerySnapshot"),bundleName:Ii("string"),bundle:Ii("string")};class KE extends P6{constructor(t){super(),this.firestore=t}convertBytes(t){return new ur(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new $n(this.firestore,null,e)}}function WE(n){n=Hs(n,Bu);const t=Hs(n.firestore,ko),e=b0(t),i=new KE(t);return L6(n._query),sL(e,n._query).then((s=>new $c(t,i,n,s)))}function Z1(n,t,e){n=Hs(n,$n);const i=Hs(n.firestore,ko),s=U6(n.converter,t);return N0(i,[N6(X1(i),"setDoc",n._key,s,n.converter!==null,e).toMutation(n._key,tl.none())])}function Gf(n,t,e,...i){n=Hs(n,$n);const s=Hs(n.firestore,ko),l=X1(s);let c;return c=typeof(t=Bn(t))=="string"||t instanceof C0?cL(l,"updateDoc",n._key,t,e,i):uL(l,"updateDoc",n._key,t),N0(s,[c.toMutation(n._key,tl.exists(!0))])}function JE(n){return N0(Hs(n.firestore,ko),[new EE(n._key,tl.none())])}function Ol(n,t){const e=Hs(n.firestore,ko),i=jf(n),s=U6(n.converter,t);return N0(e,[N6(X1(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,tl.exists(!1))]).then((()=>i))}function n0(n,...t){var e,i,s;n=Bn(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof t[c]!="object"||_3(t[c])||(l=t[c++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(_3(t[c])){const S=t[c];t[c]=(e=S.next)===null||e===void 0?void 0:e.bind(S),t[c+1]=(i=S.error)===null||i===void 0?void 0:i.bind(S),t[c+2]=(s=S.complete)===null||s===void 0?void 0:s.bind(S)}let m,g,A;if(n instanceof $n)g=Hs(n.firestore,ko),A=z1(n._key.path),m={next:S=>{t[c]&&t[c](z6(g,n,S))},error:t[c+1],complete:t[c+2]};else{const S=Hs(n,Bu);g=Hs(S.firestore,ko),A=S._query;const T=new KE(g);m={next:x=>{t[c]&&t[c](new $c(g,T,S,x))},error:t[c+1],complete:t[c+2]},L6(n._query)}return(function(T,x,w,L){const V=new jE(L),G=new UE(x,V,w);return T.asyncQueue.enqueueAndForget((async()=>VE(await a1(T),G))),()=>{V.Ou(),T.asyncQueue.enqueueAndForget((async()=>kE(await a1(T),G)))}})(b0(g),A,f,m)}function N0(n,t){return(function(i,s){const l=new xu;return i.asyncQueue.enqueueAndForget((async()=>FM(await nL(i),s,l))),l.promise})(b0(n),t)}function z6(n,t,e){const i=e.docs.get(t._key),s=new KE(n);return new Zc(n,s,t._key,i,new im(e.hasPendingWrites,e.fromCache),t.converter)}function Oi(){return new qE("serverTimestamp")}(function(t,e=!0){(function(s){Vm=s})(Pf),Rf(new nh("firestore",((i,{instanceIdentifier:s,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new ko(new mI(i.getProvider("auth-internal")),new _I(c,i.getProvider("app-check-internal")),(function(g,A){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Bt(At.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gm(g.options.projectId,A)})(c,s),c);return l=Object.assign({useFetchStreams:e},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Do(AT,ET,t),Do(AT,ET,"esm2017")})();const pL=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:P6,Bytes:ur,CollectionReference:Nu,DocumentReference:$n,DocumentSnapshot:Zc,FieldPath:C0,FieldValue:R0,Firestore:ko,FirestoreError:Bt,GeoPoint:kl,Query:Bu,QueryCompositeFilterConstraint:W1,QueryConstraint:V6,QueryDocumentSnapshot:Lg,QueryFieldFilterConstraint:x0,QuerySnapshot:$c,SnapshotMetadata:im,Timestamp:wn,VectorValue:Pl,_AutoId:L1,_ByteString:is,_DatabaseId:gm,_DocumentKey:Wt,_EmptyAuthCredentialsProvider:d5,_FieldPath:ns,_cast:Hs,_logWarn:Vu,_validateIsNotUsedTogether:p5,addDoc:Ol,collection:Bm,collectionGroup:GE,connectFirestoreEmulator:C6,deleteDoc:JE,doc:jf,ensureFirestoreConfigured:b0,executeWrite:N0,getDoc:J1,getDocs:WE,getFirestore:R6,onSnapshot:n0,query:l1,serverTimestamp:Oi,setDoc:Z1,updateDoc:Gf,where:e0},Symbol.toStringTag,{value:"Module"}));var A3={};const E3="@firebase/database",S3="1.0.20";let B6="";function gL(n){B6=n}class _L{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),es(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:Fg(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class yL{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return Po(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const j6=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new _L(t)}}catch{}return new yL},Tf=j6("localStorage"),vL=j6("sessionStorage");const cm=new N1("@firebase/database"),AL=(function(){let n=1;return function(){return n++}})(),G6=function(n){const t=j7(n),e=new P7;e.update(t);const i=e.digest();return ZA.encodeByteArray(i)},D0=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=D0.apply(null,i):typeof i=="object"?t+=es(i):t+=i,t+=" "}return t};let Vg=null,T3=!0;const EL=function(n,t){kt(!0,"Can't turn on custom loggers persistently."),cm.logLevel=Pe.VERBOSE,Vg=cm.log.bind(cm)},Rs=function(...n){if(T3===!0&&(T3=!1,Vg===null&&vL.get("logging_enabled")===!0&&EL()),Vg){const t=D0.apply(null,n);Vg(t)}},I0=function(n){return function(...t){Rs(n,...t)}},pA=function(...n){const t="FIREBASE INTERNAL ERROR: "+D0(...n);cm.error(t)},Pu=function(...n){const t=`FIREBASE FATAL ERROR: ${D0(...n)}`;throw cm.error(t),new Error(t)},Ga=function(...n){const t="FIREBASE WARNING: "+D0(...n);cm.warn(t)},SL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ga("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},$1=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},TL=function(n){if(document.readyState==="complete")n();else{let t=!1;const e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},Em="[MIN_NAME]",If="[MAX_NAME]",Hf=function(n,t){if(n===t)return 0;if(n===Em||t===If)return-1;if(t===Em||n===If)return 1;{const e=b3(n),i=b3(t);return e!==null?i!==null?e-i===0?n.length-t.length:e-i:-1:i!==null?1:n<t?-1:1}},bL=function(n,t){return n===t?0:n<t?-1:1},rg=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+es(t))},ZE=function(n){if(typeof n!="object"||n===null)return es(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)i!==0&&(e+=","),e+=es(t[i]),e+=":",e+=ZE(n[t[i]]);return e+="}",e},H6=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let s=0;s<e;s+=t)s+t>e?i.push(n.substring(s,e)):i.push(n.substring(s,s+t));return i};function Fs(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const q6=function(n){kt(!$1(n),"Invalid JSON number");const t=11,e=52,i=(1<<t-1)-1;let s,l,c,f,m;n===0?(l=0,c=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),i),l=f+i,c=Math.round(n*Math.pow(2,e-f)-Math.pow(2,e))):(l=0,c=Math.round(n/Math.pow(2,1-i-e))));const g=[];for(m=e;m;m-=1)g.push(c%2?1:0),c=Math.floor(c/2);for(m=t;m;m-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(s?1:0),g.reverse();const A=g.join("");let S="";for(m=0;m<64;m+=8){let T=parseInt(A.substr(m,8),2).toString(16);T.length===1&&(T="0"+T),S=S+T}return S.toLowerCase()},CL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},RL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function wL(n,t){let e="Unknown Error";n==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?e="Client doesn't have permission to access the desired data.":n==="unavailable"&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}const xL=new RegExp("^-?(0*)\\d{1,10}$"),NL=-2147483648,DL=2147483647,b3=function(n){if(xL.test(n)){const t=Number(n);if(t>=NL&&t<=DL)return t}return null},jm=function(n){try{n()}catch(t){setTimeout(()=>{const e=t.stack||"";throw Ga("Exception was thrown by user callback.",e),t},Math.floor(0))}},IL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},kg=function(n,t){const e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};class OL{constructor(t,e){this.appCheckProvider=e,this.appName=t.name,or(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Ga(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ML{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(Rs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ga(t)}}class Ly{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Ly.OWNER="owner";const $E="5",F6="v",Y6="s",Q6="r",X6="f",K6=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,W6="ls",J6="p",gA="ac",Z6="websocket",$6="long_polling";class t9{constructor(t,e,i,s,l=!1,c="",f=!1,m=!1,g=null){this.secure=e,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=l,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Tf.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Tf.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function LL(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function e9(n,t,e){kt(typeof t=="string","typeof type must == string"),kt(typeof e=="object","typeof params must == object");let i;if(t===Z6)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===$6)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);LL(n)&&(e.ns=n.namespace);const s=[];return Fs(e,(l,c)=>{s.push(l+"="+c)}),i+s.join("&")}class VL{constructor(){this.counters_={}}incrementCounter(t,e=1){Po(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return g7(this.counters_)}}const f2={},d2={};function tS(n){const t=n.toString();return f2[t]||(f2[t]=new VL),f2[t]}function kL(n,t){const e=n.toString();return d2[e]||(d2[e]=t()),d2[e]}class PL{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&jm(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const C3="start",UL="close",zL="pLPCommand",BL="pRTLPCB",n9="id",i9="pw",s9="ser",jL="cb",GL="seg",HL="ts",qL="d",FL="dframe",a9=1870,r9=30,YL=a9-r9,QL=25e3,XL=3e4;class sm{constructor(t,e,i,s,l,c,f){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=I0(t),this.stats_=tS(e),this.urlFn=m=>(this.appCheckToken&&(m[gA]=this.appCheckToken),e9(e,$6,m))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new PL(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(XL)),TL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new eS((...l)=>{const[c,f,m,g,A]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===C3)this.id=f,this.password=m;else if(c===UL)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...l)=>{const[c,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const i={};i[C3]="t",i[s9]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[jL]=this.scriptTagHolder.uniqueCallbackIdentifier),i[F6]=$E,this.transportSessionId&&(i[Y6]=this.transportSessionId),this.lastSessionId&&(i[W6]=this.lastSessionId),this.applicationId&&(i[J6]=this.applicationId),this.appCheckToken&&(i[gA]=this.appCheckToken),typeof location<"u"&&location.hostname&&K6.test(location.hostname)&&(i[Q6]=X6);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){sm.forceAllow_=!0}static forceDisallow(){sm.forceDisallow_=!0}static isAvailable(){return sm.forceAllow_?!0:!sm.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!CL()&&!RL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=es(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=hC(e),s=H6(i,YL);for(let l=0;l<s.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[l]),this.curSegmentNum++}addDisconnectPingFrame(t,e){this.myDisconnFrame=document.createElement("iframe");const i={};i[FL]="t",i[n9]=t,i[i9]=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=es(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class eS{constructor(t,e,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=AL(),window[zL+this.uniqueCallbackIdentifier]=t,window[BL+this.uniqueCallbackIdentifier]=e,this.myIFrame=eS.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){Rs("frame writing exception"),f.stack&&Rs(f.stack),Rs(f)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Rs("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[n9]=this.myID,t[i9]=this.myPW,t[s9]=this.currentSerial;let e=this.urlFn(t),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+r9+i.length<=a9;){const c=this.pendingSegs.shift();i=i+"&"+GL+s+"="+c.seg+"&"+HL+s+"="+c.ts+"&"+qL+s+"="+c.d,s++}return e=e+i,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},s=setTimeout(i,Math.floor(QL)),l=()=>{clearTimeout(s),i()};this.addTag(t,l)}addTag(t,e){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Rs("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}const KL=16384,WL=45e3;let o1=null;typeof MozWebSocket<"u"?o1=MozWebSocket:typeof WebSocket<"u"&&(o1=WebSocket);class Ml{constructor(t,e,i,s,l,c,f){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=I0(this.connId),this.stats_=tS(e),this.connURL=Ml.connectionURL_(e,c,f,s,i),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,i,s,l){const c={};return c[F6]=$E,typeof location<"u"&&location.hostname&&K6.test(location.hostname)&&(c[Q6]=X6),e&&(c[Y6]=e),i&&(c[W6]=i),s&&(c[gA]=s),l&&(c[J6]=l),e9(t,Z6,c)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tf.set("previous_websocket_failure",!0);try{let i;x7(),this.mySock=new o1(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ml.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(e);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&o1!==null&&!Ml.forceDisallow_}static previouslyFailed(){return Tf.isInMemoryStorage||Tf.get("previous_websocket_failure")===!0}markConnectionHealthy(){Tf.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const i=Fg(e);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(kt(this.frames===null,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(e);else{const i=this.extractFrameCount_(e);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const e=es(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=H6(e,KL);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WL))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ml.responsesRequiredToBeHealthy=2;Ml.healthyTimeout=3e4;class i0{static get ALL_TRANSPORTS(){return[sm,Ml]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const e=Ml&&Ml.isAvailable();let i=e&&!Ml.previouslyFailed();if(t.webSocketOnly&&(e||Ga("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ml];else{const s=this.transports_=[];for(const l of i0.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);i0.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}i0.globalTransportInitialized_=!1;const JL=6e4,ZL=5e3,$L=10*1024,tV=100*1024,m2="t",R3="d",eV="s",w3="r",nV="e",x3="o",N3="a",D3="n",I3="p",iV="h";class sV{constructor(t,e,i,s,l,c,f,m,g,A){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=l,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=I0("c:"+this.id+":"),this.transportManager_=new i0(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=kg(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>tV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$L?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(m2 in t){const e=t[m2];e===N3?this.upgradeIfSecondaryHealthy_():e===w3?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===x3&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=rg("t",t),i=rg("d",t);if(e==="c")this.onSecondaryControl_(i);else if(e==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:I3,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:N3,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:D3,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=rg("t",t),i=rg("d",t);e==="c"?this.onControl_(i):e==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=rg(m2,t);if(R3 in t){const i=t[R3];if(e===iV){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(e===D3){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===eV?this.onConnectionShutdown_(i):e===w3?this.onReset_(i):e===nV?pA("Server Error: "+i):e===x3?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):pA("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),$E!==i&&Ga("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),kg(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(JL))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):kg(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(ZL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:I3,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class l9{put(t,e,i,s){}merge(t,e,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class o9{constructor(t){this.allowedEvents_=t,this.listeners_={},kt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const s=this.getInitialEvent(t);s&&e.apply(i,s)}off(t,e,i){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let l=0;l<s.length;l++)if(s[l].callback===e&&(!i||i===s[l].context)){s.splice(l,1);return}}validateEventType_(t){kt(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class u1 extends o9{static getInstance(){return new u1}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!eE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return kt(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const O3=32,M3=768;let an=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function tn(){return new an("")}function we(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function uh(n){return n.pieces_.length-n.pieceNum_}function yn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new an(n.pieces_,t)}function nS(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function aV(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function s0(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function u9(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new an(t,0)}function yi(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof an)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&e.push(i[s])}return new an(e,0)}function De(n){return n.pieceNum_>=n.pieces_.length}function Ba(n,t){const e=we(n),i=we(t);if(e===null)return t;if(e===i)return Ba(yn(n),yn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function rV(n,t){const e=s0(n,0),i=s0(t,0);for(let s=0;s<e.length&&s<i.length;s++){const l=Hf(e[s],i[s]);if(l!==0)return l}return e.length===i.length?0:e.length<i.length?-1:1}function iS(n,t){if(uh(n)!==uh(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function $r(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(uh(n)>uh(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class lV{constructor(t,e){this.errorPrefix_=e,this.parts_=s0(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=x1(this.parts_[i]);c9(this)}}function oV(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=x1(t),c9(n)}function uV(n){const t=n.parts_.pop();n.byteLength_-=x1(t),n.parts_.length>0&&(n.byteLength_-=1)}function c9(n){if(n.byteLength_>M3)throw new Error(n.errorPrefix_+"has a key path longer than "+M3+" bytes ("+n.byteLength_+").");if(n.parts_.length>O3)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+O3+") or object contains a cycle "+Ef(n))}function Ef(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}class sS extends o9{static getInstance(){return new sS}constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(t){return kt(t==="visible","Unknown event type: "+t),[this.visible_]}}const lg=1e3,cV=300*1e3,L3=30*1e3,hV=1.3,fV=3e4,dV="server_kill",V3=3;class Du extends l9{constructor(t,e,i,s,l,c,f,m){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=c,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=Du.nextPersistentConnectionId_++,this.log_=I0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lg,this.maxReconnectDelay_=cV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sS.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&u1.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,i){const s=++this.requestNumber_,l={r:s,a:t,b:e};this.log_(es(l)),kt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const e=new Su,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:c=>{const f=c.d;c.s==="ok"?e.resolve(f):e.reject(f)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),e.promise}listen(t,e,i,s){this.initConnection_();const l=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+l),this.listens.has(c)||this.listens.set(c,new Map),kt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),kt(!this.listens.get(c).has(l),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:e,query:t,tag:i};this.listens.get(c).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(i)})}sendListen_(t){const e=t.query,i=e._path.toString(),s=e._queryIdentifier;this.log_("Listen on "+i+" for "+s);const l={p:i},c="q";t.tag&&(l.q=e._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest(c,l,f=>{const m=f.d,g=f.s;Du.warnOnListenWarnings_(m,e),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",f),g!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(g,m))})}static warnOnListenWarnings_(t,e){if(t&&typeof t=="object"&&Po(t,"w")){const i=dm(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+e._queryParams.getIndex().toString()+'"',l=e._path.toString();Ga(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||k7(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=L3)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=V7(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(e,i,s=>{const l=s.s,c=s.d||"error";this.authToken_===t&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const e=t.s,i=t.d||"error";e==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,i)})}unlisten(t,e){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),kt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,e)}sendUnlisten_(t,e,i,s){this.log_("Unlisten on "+t+" for "+e);const l={p:t},c="n";s&&(l.q=i,l.t=s),this.sendRequest(c,l)}onDisconnectPut(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:i})}onDisconnectMerge(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:i})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,i,s){const l={p:e,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(t,e,i,s){this.putInternal("p",t,e,i,s)}merge(t,e,i,s){this.putInternal("m",t,e,i,s)}putInternal(t,e,i,s,l){this.initConnection_();const c={p:e,d:i};l!==void 0&&(c.h=l),this.outstandingPuts_.push({action:t,request:c,onComplete:s}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,i,l=>{this.log_(e+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+es(t));const e=t.r,i=this.requestCBHash_[e];i&&(delete this.requestCBHash_[e],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),t==="d"?this.onDataUpdate_(e.p,e.d,!1,e.t):t==="m"?this.onDataUpdate_(e.p,e.d,!0,e.t):t==="c"?this.onListenRevoked_(e.p,e.q):t==="ac"?this.onAuthRevoked_(e.s,e.d):t==="apc"?this.onAppCheckRevoked_(e.s,e.d):t==="sd"?this.onSecurityDebugPacket_(e):pA("Unrecognized action received from server: "+es(t)+`
Are you using the latest client?`)}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){kt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lg,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=lg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>fV&&(this.reconnectDelay_=lg),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*hV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Du.nextConnectionId_++,l=this.lastSessionId;let c=!1,f=null;const m=function(){f?f.close():(c=!0,i())},g=function(S){kt(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(S)};this.realtime_={close:m,sendRequest:g};const A=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[S,T]=await Promise.all([this.authTokenProvider_.getToken(A),this.appCheckTokenProvider_.getToken(A)]);c?Rs("getToken() completed but was canceled"):(Rs("getToken() completed. Creating connection."),this.authToken_=S&&S.accessToken,this.appCheckToken_=T&&T.token,f=new sV(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,i,x=>{Ga(x+" ("+this.repoInfo_.toString()+")"),this.interrupt(dV)},l))}catch(S){this.log_("Failed to get token: "+S),c||(this.repoInfo_.nodeAdmin&&Ga(S),m())}}}interrupt(t){Rs("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Rs("Resuming connection for reason: "+t),delete this.interruptReasons_[t],By(this.interruptReasons_)&&(this.reconnectDelay_=lg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let i;e?i=e.map(l=>ZE(l)).join("$"):i="default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,e){const i=new an(t).toString();let s;if(this.listens.has(i)){const l=this.listens.get(i);s=l.get(e),l.delete(e),l.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,e){Rs("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=V3&&(this.reconnectDelay_=L3,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){Rs("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=V3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";t["sdk."+e+"."+B6.replace(/\./g,"-")]=1,eE()?t["framework.cordova"]=1:yC()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=u1.getInstance().currentlyOnline();return By(this.interruptReasons_)&&t}}Du.nextPersistentConnectionId_=0;Du.nextConnectionId_=0;class Ie{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Ie(t,e)}}class tv{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new Ie(Em,t),s=new Ie(Em,e);return this.compare(i,s)!==0}minPost(){return Ie.MIN}}let cy;class h9 extends tv{static get __EMPTY_NODE(){return cy}static set __EMPTY_NODE(t){cy=t}compare(t,e){return Hf(t.name,e.name)}isDefinedOn(t){throw Om("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Ie.MIN}maxPost(){return new Ie(If,cy)}makePost(t,e){return kt(typeof t=="string","KeyIndex indexValue must always be a string."),new Ie(t,cy)}toString(){return".key"}}const hm=new h9;class hy{constructor(t,e,i,s,l=null){this.isReverse_=s,this.resultGenerator_=l,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=e?i(t.key,e):1,s&&(c*=-1),c<0)this.isReverse_?t=t.left:t=t.right;else if(c===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class ts{constructor(t,e,i,s,l){this.key=t,this.value=e,this.color=i??ts.RED,this.left=s??ja.EMPTY_NODE,this.right=l??ja.EMPTY_NODE}copy(t,e,i,s,l){return new ts(t??this.key,e??this.value,i??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const l=i(t,s.key);return l<0?s=s.copy(null,null,null,s.left.insert(t,e,i),null):l===0?s=s.copy(null,e,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ja.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let i,s;if(i=this,e(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),e(t,i.key)===0){if(i.right.isEmpty())return ja.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}ts.RED=!0;ts.BLACK=!1;class mV{copy(t,e,i,s,l){return this}insert(t,e,i){return new ts(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ja{constructor(t,e=ja.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new ja(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,ts.BLACK,null,null))}remove(t){return new ja(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ts.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),e===0)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,s=null;for(;!i.isEmpty();)if(e=this.comparator_(t,i.key),e===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else e<0?i=i.left:e>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new hy(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new hy(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new hy(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new hy(this.root_,null,this.comparator_,!0,t)}}ja.EMPTY_NODE=new mV;function pV(n,t){return Hf(n.name,t.name)}function aS(n,t){return Hf(n,t)}let _A;function gV(n){_A=n}const f9=function(n){return typeof n=="number"?"number:"+q6(n):"string:"+n},d9=function(n){if(n.isLeafNode()){const t=n.val();kt(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Po(t,".sv"),"Priority must be a string or number.")}else kt(n===_A||n.isEmpty(),"priority of unexpected type.");kt(n===_A||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let k3;class Zi{static set __childrenNodeConstructor(t){k3=t}static get __childrenNodeConstructor(){return k3}constructor(t,e=Zi.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,kt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),d9(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Zi(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Zi.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return De(t)?this:we(t)===".priority"?this.priorityNode_:Zi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return t===".priority"?this.updatePriority(e):e.isEmpty()&&t!==".priority"?this:Zi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const i=we(t);return i===null?e:e.isEmpty()&&i!==".priority"?this:(kt(i!==".priority"||uh(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Zi.__childrenNodeConstructor.EMPTY_NODE.updateChild(yn(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+f9(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",e==="number"?t+=q6(this.value_):t+=this.value_,this.lazyHash_=G6(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Zi.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Zi.__childrenNodeConstructor?-1:(kt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,i=typeof this.value_,s=Zi.VALUE_TYPE_ORDER.indexOf(e),l=Zi.VALUE_TYPE_ORDER.indexOf(i);return kt(s>=0,"Unknown leaf type: "+e),kt(l>=0,"Unknown leaf type: "+i),s===l?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}else return!1}}Zi.VALUE_TYPE_ORDER=["object","boolean","number","string"];let m9,p9;function _V(n){m9=n}function yV(n){p9=n}class vV extends tv{compare(t,e){const i=t.node.getPriority(),s=e.node.getPriority(),l=i.compareTo(s);return l===0?Hf(t.name,e.name):l}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Ie.MIN}maxPost(){return new Ie(If,new Zi("[PRIORITY-POST]",p9))}makePost(t,e){const i=m9(t);return new Ie(e,new Zi("[PRIORITY-POST]",i))}toString(){return".priority"}}const ti=new vV;const AV=Math.log(2);class EV{constructor(t){const e=l=>parseInt(Math.log(l)/AV,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;const s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const c1=function(n,t,e,i){n.sort(t);const s=function(m,g){const A=g-m;let S,T;if(A===0)return null;if(A===1)return S=n[m],T=e?e(S):S,new ts(T,S.node,ts.BLACK,null,null);{const x=parseInt(A/2,10)+m,w=s(m,x),L=s(x+1,g);return S=n[x],T=e?e(S):S,new ts(T,S.node,ts.BLACK,w,L)}},l=function(m){let g=null,A=null,S=n.length;const T=function(w,L){const V=S-w,G=S;S-=w;const B=s(V+1,G),Y=n[V],et=e?e(Y):Y;x(new ts(et,Y.node,L,null,B))},x=function(w){g?(g.left=w,g=w):(A=w,g=w)};for(let w=0;w<m.count;++w){const L=m.nextBitIsOne(),V=Math.pow(2,m.count-(w+1));L?T(V,ts.BLACK):(T(V,ts.BLACK),T(V,ts.RED))}return A},c=new EV(n.length),f=l(c);return new ja(i||t,f)};let p2;const Yd={};class Cu{static get Default(){return kt(Yd&&ti,"ChildrenNode.ts has not been loaded"),p2=p2||new Cu({".priority":Yd},{".priority":ti}),p2}constructor(t,e){this.indexes_=t,this.indexSet_=e}get(t){const e=dm(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof ja?e:null}hasIndex(t){return Po(this.indexSet_,t.toString())}addIndex(t,e){kt(t!==hm,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const l=e.getIterator(Ie.Wrap);let c=l.getNext();for(;c;)s=s||t.isDefinedOn(c.node),i.push(c),c=l.getNext();let f;s?f=c1(i,t.getCompare()):f=Yd;const m=t.toString(),g=Object.assign({},this.indexSet_);g[m]=t;const A=Object.assign({},this.indexes_);return A[m]=f,new Cu(A,g)}addToIndexes(t,e){const i=jy(this.indexes_,(s,l)=>{const c=dm(this.indexSet_,l);if(kt(c,"Missing index implementation for "+l),s===Yd)if(c.isDefinedOn(t.node)){const f=[],m=e.getIterator(Ie.Wrap);let g=m.getNext();for(;g;)g.name!==t.name&&f.push(g),g=m.getNext();return f.push(t),c1(f,c.getCompare())}else return Yd;else{const f=e.get(t.name);let m=s;return f&&(m=m.remove(new Ie(t.name,f))),m.insert(t,t.node)}});return new Cu(i,this.indexSet_)}removeFromIndexes(t,e){const i=jy(this.indexes_,s=>{if(s===Yd)return s;{const l=e.get(t.name);return l?s.remove(new Ie(t.name,l)):s}});return new Cu(i,this.indexSet_)}}let og;class oe{static get EMPTY_NODE(){return og||(og=new oe(new ja(aS),null,Cu.Default))}constructor(t,e,i){this.children_=t,this.priorityNode_=e,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&d9(this.priorityNode_),this.children_.isEmpty()&&kt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||og}updatePriority(t){return this.children_.isEmpty()?this:new oe(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const e=this.children_.get(t);return e===null?og:e}}getChild(t){const e=we(t);return e===null?this:this.getImmediateChild(e).getChild(yn(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,e){if(kt(e,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(e);{const i=new Ie(t,e);let s,l;e.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,e),l=this.indexMap_.addToIndexes(i,this.children_));const c=s.isEmpty()?og:this.priorityNode_;return new oe(s,c,l)}}updateChild(t,e){const i=we(t);if(i===null)return e;{kt(we(t)!==".priority"||uh(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(yn(t),e);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let i=0,s=0,l=!0;if(this.forEachChild(ti,(c,f)=>{e[c]=f.val(t),i++,l&&oe.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):l=!1}),!t&&l&&s<2*i){const c=[];for(const f in e)c[f]=e[f];return c}else return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+f9(this.getPriority().val())+":"),this.forEachChild(ti,(e,i)=>{const s=i.hash();s!==""&&(t+=":"+e+":"+s)}),this.lazyHash_=t===""?"":G6(t)}return this.lazyHash_}getPredecessorChildName(t,e,i){const s=this.resolveIndex_(i);if(s){const l=s.getPredecessorKey(new Ie(t,e));return l?l.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const i=e.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new Ie(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const i=e.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new Ie(e,this.children_.get(e)):null}forEachChild(t,e){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>e(s.name,s.node)):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Ie.Wrap);let l=s.peek();for(;l!=null&&e.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Ie.Wrap);let l=s.peek();for(;l!=null&&e.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===O0?-1:0}withIndex(t){if(t===hm||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new oe(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===hm||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority()))if(this.children_.count()===e.children_.count()){const i=this.getIterator(ti),s=e.getIterator(ti);let l=i.getNext(),c=s.getNext();for(;l&&c;){if(l.name!==c.name||!l.node.equals(c.node))return!1;l=i.getNext(),c=s.getNext()}return l===null&&c===null}else return!1;else return!1}}resolveIndex_(t){return t===hm?null:this.indexMap_.get(t.toString())}}oe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class SV extends oe{constructor(){super(new ja(aS),oe.EMPTY_NODE,Cu.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return oe.EMPTY_NODE}isEmpty(){return!1}}const O0=new SV;Object.defineProperties(Ie,{MIN:{value:new Ie(Em,oe.EMPTY_NODE)},MAX:{value:new Ie(If,O0)}});h9.__EMPTY_NODE=oe.EMPTY_NODE;Zi.__childrenNodeConstructor=oe;gV(O0);yV(O0);const TV=!0;function Ni(n,t=null){if(n===null)return oe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),kt(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const e=n;return new Zi(e,Ni(t))}if(!(n instanceof Array)&&TV){const e=[];let i=!1;if(Fs(n,(c,f)=>{if(c.substring(0,1)!=="."){const m=Ni(f);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),e.push(new Ie(c,m)))}}),e.length===0)return oe.EMPTY_NODE;const l=c1(e,pV,c=>c.name,aS);if(i){const c=c1(e,ti.getCompare());return new oe(l,Ni(t),new Cu({".priority":c},{".priority":ti}))}else return new oe(l,Ni(t),Cu.Default)}else{let e=oe.EMPTY_NODE;return Fs(n,(i,s)=>{if(Po(n,i)&&i.substring(0,1)!=="."){const l=Ni(s);(l.isLeafNode()||!l.isEmpty())&&(e=e.updateImmediateChild(i,l))}}),e.updatePriority(Ni(t))}}_V(Ni);class bV extends tv{constructor(t){super(),this.indexPath_=t,kt(!De(t)&&we(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),s=this.extractChild(e.node),l=i.compareTo(s);return l===0?Hf(t.name,e.name):l}makePost(t,e){const i=Ni(t),s=oe.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ie(e,s)}maxPost(){const t=oe.EMPTY_NODE.updateChild(this.indexPath_,O0);return new Ie(If,t)}toString(){return s0(this.indexPath_,0).join("/")}}class CV extends tv{compare(t,e){const i=t.node.compareTo(e.node);return i===0?Hf(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Ie.MIN}maxPost(){return Ie.MAX}makePost(t,e){const i=Ni(t);return new Ie(e,i)}toString(){return".value"}}const RV=new CV;function g9(n){return{type:"value",snapshotNode:n}}function Sm(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function a0(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function r0(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function wV(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}class rS{constructor(t){this.index_=t}updateChild(t,e,i,s,l,c){kt(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=t.getImmediateChild(e);return f.getChild(s).equals(i.getChild(s))&&f.isEmpty()===i.isEmpty()||(c!=null&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(a0(e,f)):kt(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(Sm(e,i)):c.trackChildChange(r0(e,i,f))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return i!=null&&(t.isLeafNode()||t.forEachChild(ti,(s,l)=>{e.hasChild(s)||i.trackChildChange(a0(s,l))}),e.isLeafNode()||e.forEachChild(ti,(s,l)=>{if(t.hasChild(s)){const c=t.getImmediateChild(s);c.equals(l)||i.trackChildChange(r0(s,l,c))}else i.trackChildChange(Sm(s,l))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?oe.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class l0{constructor(t){this.indexedFilter_=new rS(t.getIndex()),this.index_=t.getIndex(),this.startPost_=l0.getStartPost_(t),this.endPost_=l0.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,s,l,c){return this.matches(new Ie(e,i))||(i=oe.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,s,l,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=oe.EMPTY_NODE);let s=e.withIndex(this.index_);s=s.updatePriority(oe.EMPTY_NODE);const l=this;return e.forEachChild(ti,(c,f)=>{l.matches(new Ie(c,f))||(s=s.updateImmediateChild(c,oe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}}class xV{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new l0(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,s,l,c){return this.rangedFilter_.matches(new Ie(e,i))||(i=oe.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,s,l,c):this.fullLimitUpdateChild_(t,e,i,l,c)}updateFullNode(t,e,i){let s;if(e.isLeafNode()||e.isEmpty())s=oe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){s=oe.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;l.hasNext()&&c<this.limit_;){const f=l.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))s=s.updateImmediateChild(f.name,f.node),c++;else break;else continue}}else{s=e.withIndex(this.index_),s=s.updatePriority(oe.EMPTY_NODE);let l;this.reverse_?l=s.getReverseIterator(this.index_):l=s.getIterator(this.index_);let c=0;for(;l.hasNext();){const f=l.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:s=s.updateImmediateChild(f.name,oe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,s,l){let c;if(this.reverse_){const S=this.index_.getCompare();c=(T,x)=>S(x,T)}else c=this.index_.getCompare();const f=t;kt(f.numChildren()===this.limit_,"");const m=new Ie(e,i),g=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),A=this.rangedFilter_.matches(m);if(f.hasChild(e)){const S=f.getImmediateChild(e);let T=s.getChildAfterChild(this.index_,g,this.reverse_);for(;T!=null&&(T.name===e||f.hasChild(T.name));)T=s.getChildAfterChild(this.index_,T,this.reverse_);const x=T==null?1:c(T,m);if(A&&!i.isEmpty()&&x>=0)return l?.trackChildChange(r0(e,i,S)),f.updateImmediateChild(e,i);{l?.trackChildChange(a0(e,S));const L=f.updateImmediateChild(e,oe.EMPTY_NODE);return T!=null&&this.rangedFilter_.matches(T)?(l?.trackChildChange(Sm(T.name,T.node)),L.updateImmediateChild(T.name,T.node)):L}}else return i.isEmpty()?t:A&&c(g,m)>=0?(l!=null&&(l.trackChildChange(a0(g.name,g.node)),l.trackChildChange(Sm(e,i))),f.updateImmediateChild(e,i).updateImmediateChild(g.name,oe.EMPTY_NODE)):t}}class lS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ti}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return kt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return kt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Em}hasEnd(){return this.endSet_}getIndexEndValue(){return kt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return kt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:If}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return kt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ti}copy(){const t=new lS;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function NV(n){return n.loadsAllData()?new rS(n.getIndex()):n.hasLimit()?new xV(n):new l0(n)}function P3(n){const t={};if(n.isDefault())return t;let e;if(n.index_===ti?e="$priority":n.index_===RV?e="$value":n.index_===hm?e="$key":(kt(n.index_ instanceof bV,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=es(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=es(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+es(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=es(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+es(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function U3(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==ti&&(t.i=n.index_.toString()),t}class h1 extends l9{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(kt(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,e,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=I0("p:rest:"),this.listens_={}}listen(t,e,i,s){const l=t._path.toString();this.log_("Listen called for "+l+" "+t._queryIdentifier);const c=h1.getListenId_(t,i),f={};this.listens_[c]=f;const m=P3(t._queryParams);this.restRequest_(l+".json",m,(g,A)=>{let S=A;if(g===404&&(S=null,g=null),g===null&&this.onDataUpdate_(l,S,!1,i),dm(this.listens_,c)===f){let T;g?g===401?T="permission_denied":T="rest_error:"+g:T="ok",s(T,null)}})}unlisten(t,e){const i=h1.getListenId_(t,e);delete this.listens_[i]}get(t){const e=P3(t._queryParams),i=t._path.toString(),s=new Su;return this.restRequest_(i+".json",e,(l,c)=>{let f=c;l===404&&(f=null,l=null),l===null?(this.onDataUpdate_(i,f,!1,null),s.resolve(f)):s.reject(new Error(f))}),s.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,l])=>{s&&s.accessToken&&(e.auth=s.accessToken),l&&l.token&&(e.ac=l.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Mm(e);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(i&&f.readyState===4){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=Fg(f.responseText)}catch{Ga("Failed to parse JSON response for "+c+": "+f.responseText)}i(null,m)}else f.status!==401&&f.status!==404&&Ga("Got unsuccessful REST response for "+c+" Status: "+f.status),i(f.status);i=null}},f.open("GET",c,!0),f.send()})}}class DV{constructor(){this.rootNode_=oe.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function f1(){return{value:null,children:new Map}}function Gm(n,t,e){if(De(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{const i=we(t);n.children.has(i)||n.children.set(i,f1());const s=n.children.get(i);t=yn(t),Gm(s,t,e)}}function yA(n,t){if(De(t))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(ti,(i,s)=>{Gm(n,new an(i),s)}),yA(n,t)}}else if(n.children.size>0){const e=we(t);return t=yn(t),n.children.has(e)&&yA(n.children.get(e),t)&&n.children.delete(e),n.children.size===0}else return!0}function vA(n,t,e){n.value!==null?e(t,n.value):IV(n,(i,s)=>{const l=new an(t.toString()+"/"+i);vA(s,l,e)})}function IV(n,t){n.children.forEach((e,i)=>{t(i,e)})}class OV{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Fs(this.last_,(i,s)=>{e[i]=e[i]-s}),this.last_=t,e}}const z3=10*1e3,MV=30*1e3,LV=300*1e3;class VV{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new OV(t);const i=z3+(MV-z3)*Math.random();kg(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Fs(t,(s,l)=>{l>0&&Po(this.statsToReport_,s)&&(e[s]=l,i=!0)}),i&&this.server_.reportStats(e),kg(this.reportStats_.bind(this),Math.floor(Math.random()*2*LV))}}var Vl;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Vl||(Vl={}));function _9(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function oS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function uS(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class d1{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Vl.ACK_USER_WRITE,this.source=_9()}operationForChild(t){if(De(this.path)){if(this.affectedTree.value!=null)return kt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new an(t));return new d1(tn(),e,this.revert)}}else return kt(we(this.path)===t,"operationForChild called for unrelated child."),new d1(yn(this.path),this.affectedTree,this.revert)}}class o0{constructor(t,e){this.source=t,this.path=e,this.type=Vl.LISTEN_COMPLETE}operationForChild(t){return De(this.path)?new o0(this.source,tn()):new o0(this.source,yn(this.path))}}class Of{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Vl.OVERWRITE}operationForChild(t){return De(this.path)?new Of(this.source,tn(),this.snap.getImmediateChild(t)):new Of(this.source,yn(this.path),this.snap)}}class u0{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Vl.MERGE}operationForChild(t){if(De(this.path)){const e=this.children.subtree(new an(t));return e.isEmpty()?null:e.value?new Of(this.source,tn(),e.value):new u0(this.source,tn(),e)}else return kt(we(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new u0(this.source,yn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Mf{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(De(t))return this.isFullyInitialized()&&!this.filtered_;const e=we(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class kV{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function PV(n,t,e,i){const s=[],l=[];return t.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&l.push(wV(c.childName,c.snapshotNode))}),ug(n,s,"child_removed",t,i,e),ug(n,s,"child_added",t,i,e),ug(n,s,"child_moved",l,i,e),ug(n,s,"child_changed",t,i,e),ug(n,s,"value",t,i,e),s}function ug(n,t,e,i,s,l){const c=i.filter(f=>f.type===e);c.sort((f,m)=>zV(n,f,m)),c.forEach(f=>{const m=UV(n,f,l);s.forEach(g=>{g.respondsTo(f.type)&&t.push(g.createEvent(m,n.query_))})})}function UV(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function zV(n,t,e){if(t.childName==null||e.childName==null)throw Om("Should only compare child_ events.");const i=new Ie(t.childName,t.snapshotNode),s=new Ie(e.childName,e.snapshotNode);return n.index_.compare(i,s)}function ev(n,t){return{eventCache:n,serverCache:t}}function Pg(n,t,e,i){return ev(new Mf(t,e,i),n.serverCache)}function y9(n,t,e,i){return ev(n.eventCache,new Mf(t,e,i))}function AA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Lf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let g2;const BV=()=>(g2||(g2=new ja(bL)),g2);class zn{static fromObject(t){let e=new zn(null);return Fs(t,(i,s)=>{e=e.set(new an(i),s)}),e}constructor(t,e=BV()){this.value=t,this.children=e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:tn(),value:this.value};if(De(t))return null;{const i=we(t),s=this.children.get(i);if(s!==null){const l=s.findRootMostMatchingPathAndValue(yn(t),e);return l!=null?{path:yi(new an(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(De(t))return this;{const e=we(t),i=this.children.get(e);return i!==null?i.subtree(yn(t)):new zn(null)}}set(t,e){if(De(t))return new zn(e,this.children);{const i=we(t),l=(this.children.get(i)||new zn(null)).set(yn(t),e),c=this.children.insert(i,l);return new zn(this.value,c)}}remove(t){if(De(t))return this.children.isEmpty()?new zn(null):new zn(null,this.children);{const e=we(t),i=this.children.get(e);if(i){const s=i.remove(yn(t));let l;return s.isEmpty()?l=this.children.remove(e):l=this.children.insert(e,s),this.value===null&&l.isEmpty()?new zn(null):new zn(this.value,l)}else return this}}get(t){if(De(t))return this.value;{const e=we(t),i=this.children.get(e);return i?i.get(yn(t)):null}}setTree(t,e){if(De(t))return e;{const i=we(t),l=(this.children.get(i)||new zn(null)).setTree(yn(t),e);let c;return l.isEmpty()?c=this.children.remove(i):c=this.children.insert(i,l),new zn(this.value,c)}}fold(t){return this.fold_(tn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((s,l)=>{i[s]=l.fold_(yi(t,s),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,tn(),e)}findOnPath_(t,e,i){const s=this.value?i(e,this.value):!1;if(s)return s;if(De(t))return null;{const l=we(t),c=this.children.get(l);return c?c.findOnPath_(yn(t),yi(e,l),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,tn(),e)}foreachOnPath_(t,e,i){if(De(t))return this;{this.value&&i(e,this.value);const s=we(t),l=this.children.get(s);return l?l.foreachOnPath_(yn(t),yi(e,s),i):new zn(null)}}foreach(t){this.foreach_(tn(),t)}foreach_(t,e){this.children.inorderTraversal((i,s)=>{s.foreach_(yi(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Ul{constructor(t){this.writeTree_=t}static empty(){return new Ul(new zn(null))}}function Ug(n,t,e){if(De(t))return new Ul(new zn(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(i!=null){const s=i.path;let l=i.value;const c=Ba(s,t);return l=l.updateChild(c,e),new Ul(n.writeTree_.set(s,l))}else{const s=new zn(e),l=n.writeTree_.setTree(t,s);return new Ul(l)}}}function B3(n,t,e){let i=n;return Fs(e,(s,l)=>{i=Ug(i,yi(t,s),l)}),i}function j3(n,t){if(De(t))return Ul.empty();{const e=n.writeTree_.setTree(t,new zn(null));return new Ul(e)}}function EA(n,t){return qf(n,t)!=null}function qf(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(Ba(e.path,t)):null}function G3(n){const t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(ti,(i,s)=>{t.push(new Ie(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&t.push(new Ie(i,s.value))}),t}function th(n,t){if(De(t))return n;{const e=qf(n,t);return e!=null?new Ul(new zn(e)):new Ul(n.writeTree_.subtree(t))}}function SA(n){return n.writeTree_.isEmpty()}function Tm(n,t){return v9(tn(),n.writeTree_,t)}function v9(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((s,l)=>{s===".priority"?(kt(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):e=v9(yi(n,s),l,e)}),!e.getChild(n).isEmpty()&&i!==null&&(e=e.updateChild(yi(n,".priority"),i)),e}}function cS(n,t){return T9(t,n)}function jV(n,t,e,i,s){kt(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:s}),s&&(n.visibleWrites=Ug(n.visibleWrites,t,e)),n.lastWriteId=i}function GV(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}function HV(n,t){const e=n.allWrites.findIndex(f=>f.writeId===t);kt(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let s=i.visible,l=!1,c=n.allWrites.length-1;for(;s&&c>=0;){const f=n.allWrites[c];f.visible&&(c>=e&&qV(f,i.path)?s=!1:$r(i.path,f.path)&&(l=!0)),c--}if(s){if(l)return FV(n),!0;if(i.snap)n.visibleWrites=j3(n.visibleWrites,i.path);else{const f=i.children;Fs(f,m=>{n.visibleWrites=j3(n.visibleWrites,yi(i.path,m))})}return!0}else return!1}function qV(n,t){if(n.snap)return $r(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&$r(yi(n.path,e),t))return!0;return!1}function FV(n){n.visibleWrites=A9(n.allWrites,YV,tn()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function YV(n){return n.visible}function A9(n,t,e){let i=Ul.empty();for(let s=0;s<n.length;++s){const l=n[s];if(t(l)){const c=l.path;let f;if(l.snap)$r(e,c)?(f=Ba(e,c),i=Ug(i,f,l.snap)):$r(c,e)&&(f=Ba(c,e),i=Ug(i,tn(),l.snap.getChild(f)));else if(l.children){if($r(e,c))f=Ba(e,c),i=B3(i,f,l.children);else if($r(c,e))if(f=Ba(c,e),De(f))i=B3(i,tn(),l.children);else{const m=dm(l.children,we(f));if(m){const g=m.getChild(yn(f));i=Ug(i,tn(),g)}}}else throw Om("WriteRecord should have .snap or .children")}}return i}function E9(n,t,e,i,s){if(!i&&!s){const l=qf(n.visibleWrites,t);if(l!=null)return l;{const c=th(n.visibleWrites,t);if(SA(c))return e;if(e==null&&!EA(c,tn()))return null;{const f=e||oe.EMPTY_NODE;return Tm(c,f)}}}else{const l=th(n.visibleWrites,t);if(!s&&SA(l))return e;if(!s&&e==null&&!EA(l,tn()))return null;{const c=function(g){return(g.visible||s)&&(!i||!~i.indexOf(g.writeId))&&($r(g.path,t)||$r(t,g.path))},f=A9(n.allWrites,c,t),m=e||oe.EMPTY_NODE;return Tm(f,m)}}}function QV(n,t,e){let i=oe.EMPTY_NODE;const s=qf(n.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(ti,(l,c)=>{i=i.updateImmediateChild(l,c)}),i;if(e){const l=th(n.visibleWrites,t);return e.forEachChild(ti,(c,f)=>{const m=Tm(th(l,new an(c)),f);i=i.updateImmediateChild(c,m)}),G3(l).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}else{const l=th(n.visibleWrites,t);return G3(l).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}}function XV(n,t,e,i,s){kt(i||s,"Either existingEventSnap or existingServerSnap must exist");const l=yi(t,e);if(EA(n.visibleWrites,l))return null;{const c=th(n.visibleWrites,l);return SA(c)?s.getChild(e):Tm(c,s.getChild(e))}}function KV(n,t,e,i){const s=yi(t,e),l=qf(n.visibleWrites,s);if(l!=null)return l;if(i.isCompleteForChild(e)){const c=th(n.visibleWrites,s);return Tm(c,i.getNode().getImmediateChild(e))}else return null}function WV(n,t){return qf(n.visibleWrites,t)}function JV(n,t,e,i,s,l,c){let f;const m=th(n.visibleWrites,t),g=qf(m,tn());if(g!=null)f=g;else if(e!=null)f=Tm(m,e);else return[];if(f=f.withIndex(c),!f.isEmpty()&&!f.isLeafNode()){const A=[],S=c.getCompare(),T=l?f.getReverseIteratorFrom(i,c):f.getIteratorFrom(i,c);let x=T.getNext();for(;x&&A.length<s;)S(x,i)!==0&&A.push(x),x=T.getNext();return A}else return[]}function ZV(){return{visibleWrites:Ul.empty(),allWrites:[],lastWriteId:-1}}function m1(n,t,e,i){return E9(n.writeTree,n.treePath,t,e,i)}function hS(n,t){return QV(n.writeTree,n.treePath,t)}function H3(n,t,e,i){return XV(n.writeTree,n.treePath,t,e,i)}function p1(n,t){return WV(n.writeTree,yi(n.treePath,t))}function $V(n,t,e,i,s,l){return JV(n.writeTree,n.treePath,t,e,i,s,l)}function fS(n,t,e){return KV(n.writeTree,n.treePath,t,e)}function S9(n,t){return T9(yi(n.treePath,t),n.writeTree)}function T9(n,t){return{treePath:n,writeTree:t}}class tk{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;kt(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),kt(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const l=s.type;if(e==="child_added"&&l==="child_removed")this.changeMap.set(i,r0(i,t.snapshotNode,s.snapshotNode));else if(e==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(e==="child_removed"&&l==="child_changed")this.changeMap.set(i,a0(i,s.oldSnap));else if(e==="child_changed"&&l==="child_added")this.changeMap.set(i,Sm(i,t.snapshotNode));else if(e==="child_changed"&&l==="child_changed")this.changeMap.set(i,r0(i,t.snapshotNode,s.oldSnap));else throw Om("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}class ek{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}}const b9=new ek;class dS{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=this.optCompleteServerCache_!=null?new Mf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fS(this.writes_,t,i)}}getChildAfterChild(t,e,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Lf(this.viewCache_),l=$V(this.writes_,s,e,1,i,t);return l.length===0?null:l[0]}}function nk(n){return{filter:n}}function ik(n,t){kt(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),kt(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function sk(n,t,e,i,s){const l=new tk;let c,f;if(e.type===Vl.OVERWRITE){const g=e;g.source.fromUser?c=TA(n,t,g.path,g.snap,i,s,l):(kt(g.source.fromServer,"Unknown source."),f=g.source.tagged||t.serverCache.isFiltered()&&!De(g.path),c=g1(n,t,g.path,g.snap,i,s,f,l))}else if(e.type===Vl.MERGE){const g=e;g.source.fromUser?c=rk(n,t,g.path,g.children,i,s,l):(kt(g.source.fromServer,"Unknown source."),f=g.source.tagged||t.serverCache.isFiltered(),c=bA(n,t,g.path,g.children,i,s,f,l))}else if(e.type===Vl.ACK_USER_WRITE){const g=e;g.revert?c=uk(n,t,g.path,i,s,l):c=lk(n,t,g.path,g.affectedTree,i,s,l)}else if(e.type===Vl.LISTEN_COMPLETE)c=ok(n,t,e.path,i,l);else throw Om("Unknown operation type: "+e.type);const m=l.getChanges();return ak(t,c,m),{viewCache:c,changes:m}}function ak(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=AA(n);(e.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&e.push(g9(AA(t)))}}function C9(n,t,e,i,s,l){const c=t.eventCache;if(p1(i,e)!=null)return t;{let f,m;if(De(e))if(kt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const g=Lf(t),A=g instanceof oe?g:oe.EMPTY_NODE,S=hS(i,A);f=n.filter.updateFullNode(t.eventCache.getNode(),S,l)}else{const g=m1(i,Lf(t));f=n.filter.updateFullNode(t.eventCache.getNode(),g,l)}else{const g=we(e);if(g===".priority"){kt(uh(e)===1,"Can't have a priority with additional path components");const A=c.getNode();m=t.serverCache.getNode();const S=H3(i,e,A,m);S!=null?f=n.filter.updatePriority(A,S):f=c.getNode()}else{const A=yn(e);let S;if(c.isCompleteForChild(g)){m=t.serverCache.getNode();const T=H3(i,e,c.getNode(),m);T!=null?S=c.getNode().getImmediateChild(g).updateChild(A,T):S=c.getNode().getImmediateChild(g)}else S=fS(i,g,t.serverCache);S!=null?f=n.filter.updateChild(c.getNode(),g,S,A,s,l):f=c.getNode()}}return Pg(t,f,c.isFullyInitialized()||De(e),n.filter.filtersNodes())}}function g1(n,t,e,i,s,l,c,f){const m=t.serverCache;let g;const A=c?n.filter:n.filter.getIndexedFilter();if(De(e))g=A.updateFullNode(m.getNode(),i,null);else if(A.filtersNodes()&&!m.isFiltered()){const x=m.getNode().updateChild(e,i);g=A.updateFullNode(m.getNode(),x,null)}else{const x=we(e);if(!m.isCompleteForPath(e)&&uh(e)>1)return t;const w=yn(e),V=m.getNode().getImmediateChild(x).updateChild(w,i);x===".priority"?g=A.updatePriority(m.getNode(),V):g=A.updateChild(m.getNode(),x,V,w,b9,null)}const S=y9(t,g,m.isFullyInitialized()||De(e),A.filtersNodes()),T=new dS(s,S,l);return C9(n,S,e,s,T,f)}function TA(n,t,e,i,s,l,c){const f=t.eventCache;let m,g;const A=new dS(s,t,l);if(De(e))g=n.filter.updateFullNode(t.eventCache.getNode(),i,c),m=Pg(t,g,!0,n.filter.filtersNodes());else{const S=we(e);if(S===".priority")g=n.filter.updatePriority(t.eventCache.getNode(),i),m=Pg(t,g,f.isFullyInitialized(),f.isFiltered());else{const T=yn(e),x=f.getNode().getImmediateChild(S);let w;if(De(T))w=i;else{const L=A.getCompleteChild(S);L!=null?nS(T)===".priority"&&L.getChild(u9(T)).isEmpty()?w=L:w=L.updateChild(T,i):w=oe.EMPTY_NODE}if(x.equals(w))m=t;else{const L=n.filter.updateChild(f.getNode(),S,w,T,A,c);m=Pg(t,L,f.isFullyInitialized(),n.filter.filtersNodes())}}}return m}function q3(n,t){return n.eventCache.isCompleteForChild(t)}function rk(n,t,e,i,s,l,c){let f=t;return i.foreach((m,g)=>{const A=yi(e,m);q3(t,we(A))&&(f=TA(n,f,A,g,s,l,c))}),i.foreach((m,g)=>{const A=yi(e,m);q3(t,we(A))||(f=TA(n,f,A,g,s,l,c))}),f}function F3(n,t,e){return e.foreach((i,s)=>{t=t.updateChild(i,s)}),t}function bA(n,t,e,i,s,l,c,f){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let m=t,g;De(e)?g=i:g=new zn(null).setTree(e,i);const A=t.serverCache.getNode();return g.children.inorderTraversal((S,T)=>{if(A.hasChild(S)){const x=t.serverCache.getNode().getImmediateChild(S),w=F3(n,x,T);m=g1(n,m,new an(S),w,s,l,c,f)}}),g.children.inorderTraversal((S,T)=>{const x=!t.serverCache.isCompleteForChild(S)&&T.value===null;if(!A.hasChild(S)&&!x){const w=t.serverCache.getNode().getImmediateChild(S),L=F3(n,w,T);m=g1(n,m,new an(S),L,s,l,c,f)}}),m}function lk(n,t,e,i,s,l,c){if(p1(s,e)!=null)return t;const f=t.serverCache.isFiltered(),m=t.serverCache;if(i.value!=null){if(De(e)&&m.isFullyInitialized()||m.isCompleteForPath(e))return g1(n,t,e,m.getNode().getChild(e),s,l,f,c);if(De(e)){let g=new zn(null);return m.getNode().forEachChild(hm,(A,S)=>{g=g.set(new an(A),S)}),bA(n,t,e,g,s,l,f,c)}else return t}else{let g=new zn(null);return i.foreach((A,S)=>{const T=yi(e,A);m.isCompleteForPath(T)&&(g=g.set(A,m.getNode().getChild(T)))}),bA(n,t,e,g,s,l,f,c)}}function ok(n,t,e,i,s){const l=t.serverCache,c=y9(t,l.getNode(),l.isFullyInitialized()||De(e),l.isFiltered());return C9(n,c,e,i,b9,s)}function uk(n,t,e,i,s,l){let c;if(p1(i,e)!=null)return t;{const f=new dS(i,t,s),m=t.eventCache.getNode();let g;if(De(e)||we(e)===".priority"){let A;if(t.serverCache.isFullyInitialized())A=m1(i,Lf(t));else{const S=t.serverCache.getNode();kt(S instanceof oe,"serverChildren would be complete if leaf node"),A=hS(i,S)}A=A,g=n.filter.updateFullNode(m,A,l)}else{const A=we(e);let S=fS(i,A,t.serverCache);S==null&&t.serverCache.isCompleteForChild(A)&&(S=m.getImmediateChild(A)),S!=null?g=n.filter.updateChild(m,A,S,yn(e),f,l):t.eventCache.getNode().hasChild(A)?g=n.filter.updateChild(m,A,oe.EMPTY_NODE,yn(e),f,l):g=m,g.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=m1(i,Lf(t)),c.isLeafNode()&&(g=n.filter.updateFullNode(g,c,l)))}return c=t.serverCache.isFullyInitialized()||p1(i,tn())!=null,Pg(t,g,c,n.filter.filtersNodes())}}class ck{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new rS(i.getIndex()),l=NV(i);this.processor_=nk(l);const c=e.serverCache,f=e.eventCache,m=s.updateFullNode(oe.EMPTY_NODE,c.getNode(),null),g=l.updateFullNode(oe.EMPTY_NODE,f.getNode(),null),A=new Mf(m,c.isFullyInitialized(),s.filtersNodes()),S=new Mf(g,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=ev(S,A),this.eventGenerator_=new kV(this.query_)}get query(){return this.query_}}function hk(n){return n.viewCache_.serverCache.getNode()}function fk(n,t){const e=Lf(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!De(t)&&!e.getImmediateChild(we(t)).isEmpty())?e.getChild(t):null}function Y3(n){return n.eventRegistrations_.length===0}function dk(n,t){n.eventRegistrations_.push(t)}function Q3(n,t,e){const i=[];if(e){kt(t==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(l=>{const c=l.createCancelEvent(e,s);c&&i.push(c)})}if(t){let s=[];for(let l=0;l<n.eventRegistrations_.length;++l){const c=n.eventRegistrations_[l];if(!c.matches(t))s.push(c);else if(t.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(l+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function X3(n,t,e,i){t.type===Vl.MERGE&&t.source.queryId!==null&&(kt(Lf(n.viewCache_),"We should always have a full cache before handling merges"),kt(AA(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,l=sk(n.processor_,s,t,e,i);return ik(n.processor_,l.viewCache),kt(l.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,R9(n,l.changes,l.viewCache.eventCache.getNode(),null)}function mk(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(ti,(l,c)=>{i.push(Sm(l,c))}),e.isFullyInitialized()&&i.push(g9(e.getNode())),R9(n,i,e.getNode(),t)}function R9(n,t,e,i){const s=i?[i]:n.eventRegistrations_;return PV(n.eventGenerator_,t,e,s)}let _1;class pk{constructor(){this.views=new Map}}function gk(n){kt(!_1,"__referenceConstructor has already been defined"),_1=n}function _k(){return kt(_1,"Reference.ts has not been loaded"),_1}function yk(n){return n.views.size===0}function mS(n,t,e,i){const s=t.source.queryId;if(s!==null){const l=n.views.get(s);return kt(l!=null,"SyncTree gave us an op for an invalid query."),X3(l,t,e,i)}else{let l=[];for(const c of n.views.values())l=l.concat(X3(c,t,e,i));return l}}function vk(n,t,e,i,s){const l=t._queryIdentifier,c=n.views.get(l);if(!c){let f=m1(e,s?i:null),m=!1;f?m=!0:i instanceof oe?(f=hS(e,i),m=!1):(f=oe.EMPTY_NODE,m=!1);const g=ev(new Mf(f,m,!1),new Mf(i,s,!1));return new ck(t,g)}return c}function Ak(n,t,e,i,s,l){const c=vk(n,t,i,s,l);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),dk(c,e),mk(c,e)}function Ek(n,t,e,i){const s=t._queryIdentifier,l=[];let c=[];const f=ch(n);if(s==="default")for(const[m,g]of n.views.entries())c=c.concat(Q3(g,e,i)),Y3(g)&&(n.views.delete(m),g.query._queryParams.loadsAllData()||l.push(g.query));else{const m=n.views.get(s);m&&(c=c.concat(Q3(m,e,i)),Y3(m)&&(n.views.delete(s),m.query._queryParams.loadsAllData()||l.push(m.query)))}return f&&!ch(n)&&l.push(new(_k())(t._repo,t._path)),{removed:l,events:c}}function w9(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function fm(n,t){let e=null;for(const i of n.views.values())e=e||fk(i,t);return e}function x9(n,t){if(t._queryParams.loadsAllData())return nv(n);{const i=t._queryIdentifier;return n.views.get(i)}}function N9(n,t){return x9(n,t)!=null}function ch(n){return nv(n)!=null}function nv(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let y1;function Sk(n){kt(!y1,"__referenceConstructor has already been defined"),y1=n}function Tk(){return kt(y1,"Reference.ts has not been loaded"),y1}let bk=1;class K3{constructor(t){this.listenProvider_=t,this.syncPointTree_=new zn(null),this.pendingWriteTree_=ZV(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function D9(n,t,e,i,s){return jV(n.pendingWriteTree_,t,e,i,s),s?M0(n,new Of(_9(),t,e)):[]}function bf(n,t,e=!1){const i=GV(n.pendingWriteTree_,t);if(HV(n.pendingWriteTree_,t)){let l=new zn(null);return i.snap!=null?l=l.set(tn(),!0):Fs(i.children,c=>{l=l.set(new an(c),!0)}),M0(n,new d1(i.path,l,e))}else return[]}function iv(n,t,e){return M0(n,new Of(oS(),t,e))}function Ck(n,t,e){const i=zn.fromObject(e);return M0(n,new u0(oS(),t,i))}function Rk(n,t){return M0(n,new o0(oS(),t))}function wk(n,t,e){const i=gS(n,e);if(i){const s=_S(i),l=s.path,c=s.queryId,f=Ba(l,t),m=new o0(uS(c),f);return yS(n,l,m)}else return[]}function CA(n,t,e,i,s=!1){const l=t._path,c=n.syncPointTree_.get(l);let f=[];if(c&&(t._queryIdentifier==="default"||N9(c,t))){const m=Ek(c,t,e,i);yk(c)&&(n.syncPointTree_=n.syncPointTree_.remove(l));const g=m.removed;if(f=m.events,!s){const A=g.findIndex(T=>T._queryParams.loadsAllData())!==-1,S=n.syncPointTree_.findOnPath(l,(T,x)=>ch(x));if(A&&!S){const T=n.syncPointTree_.subtree(l);if(!T.isEmpty()){const x=Dk(T);for(let w=0;w<x.length;++w){const L=x[w],V=L.query,G=M9(n,L);n.listenProvider_.startListening(zg(V),v1(n,V),G.hashFn,G.onComplete)}}}!S&&g.length>0&&!i&&(A?n.listenProvider_.stopListening(zg(t),null):g.forEach(T=>{const x=n.queryToTagMap.get(sv(T));n.listenProvider_.stopListening(zg(T),x)}))}Ik(n,g)}return f}function xk(n,t,e,i){const s=gS(n,i);if(s!=null){const l=_S(s),c=l.path,f=l.queryId,m=Ba(c,t),g=new Of(uS(f),m,e);return yS(n,c,g)}else return[]}function Nk(n,t,e,i){const s=gS(n,i);if(s){const l=_S(s),c=l.path,f=l.queryId,m=Ba(c,t),g=zn.fromObject(e),A=new u0(uS(f),m,g);return yS(n,c,A)}else return[]}function W3(n,t,e,i=!1){const s=t._path;let l=null,c=!1;n.syncPointTree_.foreachOnPath(s,(T,x)=>{const w=Ba(T,s);l=l||fm(x,w),c=c||ch(x)});let f=n.syncPointTree_.get(s);f?(c=c||ch(f),l=l||fm(f,tn())):(f=new pk,n.syncPointTree_=n.syncPointTree_.set(s,f));let m;l!=null?m=!0:(m=!1,l=oe.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((x,w)=>{const L=fm(w,tn());L&&(l=l.updateImmediateChild(x,L))}));const g=N9(f,t);if(!g&&!t._queryParams.loadsAllData()){const T=sv(t);kt(!n.queryToTagMap.has(T),"View does not exist, but we have a tag");const x=Ok();n.queryToTagMap.set(T,x),n.tagToQueryMap.set(x,T)}const A=cS(n.pendingWriteTree_,s);let S=Ak(f,t,e,A,l,m);if(!g&&!c&&!i){const T=x9(f,t);S=S.concat(Mk(n,t,T))}return S}function pS(n,t,e){const s=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(t,(c,f)=>{const m=Ba(c,t),g=fm(f,m);if(g)return g});return E9(s,t,l,e,!0)}function M0(n,t){return I9(t,n.syncPointTree_,null,cS(n.pendingWriteTree_,tn()))}function I9(n,t,e,i){if(De(n.path))return O9(n,t,e,i);{const s=t.get(tn());e==null&&s!=null&&(e=fm(s,tn()));let l=[];const c=we(n.path),f=n.operationForChild(c),m=t.children.get(c);if(m&&f){const g=e?e.getImmediateChild(c):null,A=S9(i,c);l=l.concat(I9(f,m,g,A))}return s&&(l=l.concat(mS(s,n,i,e))),l}}function O9(n,t,e,i){const s=t.get(tn());e==null&&s!=null&&(e=fm(s,tn()));let l=[];return t.children.inorderTraversal((c,f)=>{const m=e?e.getImmediateChild(c):null,g=S9(i,c),A=n.operationForChild(c);A&&(l=l.concat(O9(A,f,m,g)))}),s&&(l=l.concat(mS(s,n,i,e))),l}function M9(n,t){const e=t.query,i=v1(n,e);return{hashFn:()=>(hk(t)||oe.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?wk(n,e._path,i):Rk(n,e._path);{const l=wL(s,e);return CA(n,e,null,l)}}}}function v1(n,t){const e=sv(t);return n.queryToTagMap.get(e)}function sv(n){return n._path.toString()+"$"+n._queryIdentifier}function gS(n,t){return n.tagToQueryMap.get(t)}function _S(n){const t=n.indexOf("$");return kt(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new an(n.substr(0,t))}}function yS(n,t,e){const i=n.syncPointTree_.get(t);kt(i,"Missing sync point for query tag that we're tracking");const s=cS(n.pendingWriteTree_,t);return mS(i,e,s,null)}function Dk(n){return n.fold((t,e,i)=>{if(e&&ch(e))return[nv(e)];{let s=[];return e&&(s=w9(e)),Fs(i,(l,c)=>{s=s.concat(c)}),s}})}function zg(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(Tk())(n._repo,n._path):n}function Ik(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const s=sv(i),l=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(l)}}}function Ok(){return bk++}function Mk(n,t,e){const i=t._path,s=v1(n,t),l=M9(n,e),c=n.listenProvider_.startListening(zg(t),s,l.hashFn,l.onComplete),f=n.syncPointTree_.subtree(i);if(s)kt(!ch(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((g,A,S)=>{if(!De(g)&&A&&ch(A))return[nv(A).query];{let T=[];return A&&(T=T.concat(w9(A).map(x=>x.query))),Fs(S,(x,w)=>{T=T.concat(w)}),T}});for(let g=0;g<m.length;++g){const A=m[g];n.listenProvider_.stopListening(zg(A),v1(n,A))}}return c}class vS{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new vS(e)}node(){return this.node_}}class AS{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=yi(this.path_,t);return new AS(this.syncTree_,e)}node(){return pS(this.syncTree_,this.path_)}}const Lk=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},J3=function(n,t,e){if(!n||typeof n!="object")return n;if(kt(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Vk(n[".sv"],t,e);if(typeof n[".sv"]=="object")return kk(n[".sv"],t);kt(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Vk=function(n,t,e){if(n==="timestamp")return e.timestamp;kt(!1,"Unexpected server value: "+n)},kk=function(n,t,e){n.hasOwnProperty("increment")||kt(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&kt(!1,"Unexpected increment value: "+i);const s=t.node();if(kt(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const c=s.getValue();return typeof c!="number"?i:c+i},Pk=function(n,t,e,i){return ES(t,new AS(e,n),i)},L9=function(n,t,e){return ES(n,new vS(t),e)};function ES(n,t,e){const i=n.getPriority().val(),s=J3(i,t.getImmediateChild(".priority"),e);let l;if(n.isLeafNode()){const c=n,f=J3(c.getValue(),t,e);return f!==c.getValue()||s!==c.getPriority().val()?new Zi(f,Ni(s)):n}else{const c=n;return l=c,s!==c.getPriority().val()&&(l=l.updatePriority(new Zi(s))),c.forEachChild(ti,(f,m)=>{const g=ES(m,t.getImmediateChild(f),e);g!==m&&(l=l.updateImmediateChild(f,g))}),l}}class SS{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function TS(n,t){let e=t instanceof an?t:new an(t),i=n,s=we(e);for(;s!==null;){const l=dm(i.node.children,s)||{children:{},childCount:0};i=new SS(s,i,l),e=yn(e),s=we(e)}return i}function Hm(n){return n.node.value}function V9(n,t){n.node.value=t,RA(n)}function k9(n){return n.node.childCount>0}function Uk(n){return Hm(n)===void 0&&!k9(n)}function av(n,t){Fs(n.node.children,(e,i)=>{t(new SS(e,n,i))})}function P9(n,t,e,i){e&&t(n),av(n,s=>{P9(s,t,!0)})}function zk(n,t,e){let i=n.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function L0(n){return new an(n.parent===null?n.name:L0(n.parent)+"/"+n.name)}function RA(n){n.parent!==null&&Bk(n.parent,n.name,n)}function Bk(n,t,e){const i=Uk(e),s=Po(n.node.children,t);i&&s?(delete n.node.children[t],n.node.childCount--,RA(n)):!i&&!s&&(n.node.children[t]=e.node,n.node.childCount++,RA(n))}const jk=/[\[\].#$\/\u0000-\u001F\u007F]/,Gk=/[\[\].#$\u0000-\u001F\u007F]/,_2=10*1024*1024,bS=function(n){return typeof n=="string"&&n.length!==0&&!jk.test(n)},U9=function(n){return typeof n=="string"&&n.length!==0&&!Gk.test(n)},Hk=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),U9(n)},z9=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!$1(n)||n&&typeof n=="object"&&Po(n,".sv")},wA=function(n,t,e,i){rv(mm(n,"value"),t,e)},rv=function(n,t,e){const i=e instanceof an?new lV(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+Ef(i));if(typeof t=="function")throw new Error(n+"contains a function "+Ef(i)+" with contents = "+t.toString());if($1(t))throw new Error(n+"contains "+t.toString()+" "+Ef(i));if(typeof t=="string"&&t.length>_2/3&&x1(t)>_2)throw new Error(n+"contains a string greater than "+_2+" utf8 bytes "+Ef(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,l=!1;if(Fs(t,(c,f)=>{if(c===".value")s=!0;else if(c!==".priority"&&c!==".sv"&&(l=!0,!bS(c)))throw new Error(n+" contains an invalid key ("+c+") "+Ef(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);oV(i,c),rv(n,f,i),uV(i)}),s&&l)throw new Error(n+' contains ".value" child '+Ef(i)+" in addition to actual children.")}},qk=function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const l=s0(i);for(let c=0;c<l.length;c++)if(!(l[c]===".priority"&&c===l.length-1)){if(!bS(l[c]))throw new Error(n+"contains an invalid key ("+l[c]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(rV);let s=null;for(e=0;e<t.length;e++){if(i=t[e],s!==null&&$r(s,i))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}},Fk=function(n,t,e,i){const s=mm(n,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(s+" must be an object containing the children to replace.");const l=[];Fs(t,(c,f)=>{const m=new an(c);if(rv(s,f,yi(e,m)),nS(m)===".priority"&&!z9(f))throw new Error(s+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),qk(s,l)},Yk=function(n,t,e){if($1(t))throw new Error(mm(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!z9(t))throw new Error(mm(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},B9=function(n,t,e,i){if(!U9(e))throw new Error(mm(n,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Qk=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),B9(n,t,e)},Sg=function(n,t){if(we(t)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Xk=function(n,t){const e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!bS(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!Hk(e))throw new Error(mm(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class Kk{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function CS(n,t){let e=null;for(let i=0;i<t.length;i++){const s=t[i],l=s.getPath();e!==null&&!iS(l,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:l}),e.events.push(s)}e&&n.eventLists_.push(e)}function j9(n,t,e){CS(n,e),G9(n,i=>iS(i,t))}function Uu(n,t,e){CS(n,e),G9(n,i=>$r(i,t)||$r(t,i))}function G9(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];if(s){const l=s.path;t(l)?(Wk(n.eventLists_[i]),n.eventLists_[i]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function Wk(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(e!==null){n.events[t]=null;const i=e.getEventRunner();Vg&&Rs("event: "+e.toString()),jm(i)}}}const Jk="repo_interrupt",Zk=25;class $k{constructor(t,e,i,s){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kk,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=f1(),this.transactionQueueTree_=new SS,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tP(n,t,e){if(n.stats_=tS(n.repoInfo_),n.forceRestClient_||IL())n.server_=new h1(n.repoInfo_,(i,s,l,c)=>{Z3(n,i,s,l,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>$3(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{es(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Du(n.repoInfo_,t,(i,s,l,c)=>{Z3(n,i,s,l,c)},i=>{$3(n,i)},i=>{nP(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=kL(n.repoInfo_,()=>new VV(n.stats_,n.server_)),n.infoData_=new DV,n.infoSyncTree_=new K3({startListening:(i,s,l,c)=>{let f=[];const m=n.infoData_.getNode(i._path);return m.isEmpty()||(f=iv(n.infoSyncTree_,i._path,m),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),wS(n,"connected",!1),n.serverSyncTree_=new K3({startListening:(i,s,l,c)=>(n.server_.listen(i,l,s,(f,m)=>{const g=c(f,m);Uu(n.eventQueue_,i._path,g)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function eP(n){const e=n.infoData_.getNode(new an(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function RS(n){return Lk({timestamp:eP(n)})}function Z3(n,t,e,i,s){n.dataUpdateCount++;const l=new an(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(s)if(i){const m=jy(e,g=>Ni(g));c=Nk(n.serverSyncTree_,l,m,s)}else{const m=Ni(e);c=xk(n.serverSyncTree_,l,m,s)}else if(i){const m=jy(e,g=>Ni(g));c=Ck(n.serverSyncTree_,l,m)}else{const m=Ni(e);c=iv(n.serverSyncTree_,l,m)}let f=l;c.length>0&&(f=lv(n,l)),Uu(n.eventQueue_,f,c)}function $3(n,t){wS(n,"connected",t),t===!1&&sP(n)}function nP(n,t){Fs(t,(e,i)=>{wS(n,e,i)})}function wS(n,t,e){const i=new an("/.info/"+t),s=Ni(e);n.infoData_.updateSnapshot(i,s);const l=iv(n.infoSyncTree_,i,s);Uu(n.eventQueue_,i,l)}function H9(n){return n.nextWriteId_++}function iP(n,t,e,i,s){xS(n,"set",{path:t.toString(),value:e,priority:i});const l=RS(n),c=Ni(e,i),f=pS(n.serverSyncTree_,t),m=L9(c,f,l),g=H9(n),A=D9(n.serverSyncTree_,t,m,g,!0);CS(n.eventQueue_,A),n.server_.put(t.toString(),c.val(!0),(T,x)=>{const w=T==="ok";w||Ga("set at "+t+" failed: "+T);const L=bf(n.serverSyncTree_,g,!w);Uu(n.eventQueue_,t,L),bm(n,s,T,x)});const S=X9(n,t);lv(n,S),Uu(n.eventQueue_,S,[])}function sP(n){xS(n,"onDisconnectEvents");const t=RS(n),e=f1();vA(n.onDisconnect_,tn(),(s,l)=>{const c=Pk(s,l,n.serverSyncTree_,t);Gm(e,s,c)});let i=[];vA(e,tn(),(s,l)=>{i=i.concat(iv(n.serverSyncTree_,s,l));const c=X9(n,s);lv(n,c)}),n.onDisconnect_=f1(),Uu(n.eventQueue_,tn(),i)}function aP(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,s)=>{i==="ok"&&yA(n.onDisconnect_,t),bm(n,e,i,s)})}function tb(n,t,e,i){const s=Ni(e);n.server_.onDisconnectPut(t.toString(),s.val(!0),(l,c)=>{l==="ok"&&Gm(n.onDisconnect_,t,s),bm(n,i,l,c)})}function rP(n,t,e,i,s){const l=Ni(e,i);n.server_.onDisconnectPut(t.toString(),l.val(!0),(c,f)=>{c==="ok"&&Gm(n.onDisconnect_,t,l),bm(n,s,c,f)})}function lP(n,t,e,i){if(By(e)){Rs("onDisconnect().update() called with empty data.  Don't do anything."),bm(n,i,"ok",void 0);return}n.server_.onDisconnectMerge(t.toString(),e,(s,l)=>{s==="ok"&&Fs(e,(c,f)=>{const m=Ni(f);Gm(n.onDisconnect_,yi(t,c),m)}),bm(n,i,s,l)})}function oP(n,t,e){let i;we(t._path)===".info"?i=W3(n.infoSyncTree_,t,e):i=W3(n.serverSyncTree_,t,e),j9(n.eventQueue_,t._path,i)}function uP(n,t,e){let i;we(t._path)===".info"?i=CA(n.infoSyncTree_,t,e):i=CA(n.serverSyncTree_,t,e),j9(n.eventQueue_,t._path,i)}function cP(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Jk)}function xS(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Rs(e,...t)}function bm(n,t,e,i){t&&jm(()=>{if(e==="ok")t(null);else{const s=(e||"error").toUpperCase();let l=s;i&&(l+=": "+i);const c=new Error(l);c.code=s,t(c)}})}function q9(n,t,e){return pS(n.serverSyncTree_,t,e)||oe.EMPTY_NODE}function NS(n,t=n.transactionQueueTree_){if(t||ov(n,t),Hm(t)){const e=Y9(n,t);kt(e.length>0,"Sending zero length transaction queue"),e.every(s=>s.status===0)&&hP(n,L0(t),e)}else k9(t)&&av(t,e=>{NS(n,e)})}function hP(n,t,e){const i=e.map(g=>g.currentWriteId),s=q9(n,t,i);let l=s;const c=s.hash();for(let g=0;g<e.length;g++){const A=e[g];kt(A.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const S=Ba(t,A.path);l=l.updateChild(S,A.currentOutputSnapshotRaw)}const f=l.val(!0),m=t;n.server_.put(m.toString(),f,g=>{xS(n,"transaction put response",{path:m.toString(),status:g});let A=[];if(g==="ok"){const S=[];for(let T=0;T<e.length;T++)e[T].status=2,A=A.concat(bf(n.serverSyncTree_,e[T].currentWriteId)),e[T].onComplete&&S.push(()=>e[T].onComplete(null,!0,e[T].currentOutputSnapshotResolved)),e[T].unwatcher();ov(n,TS(n.transactionQueueTree_,t)),NS(n,n.transactionQueueTree_),Uu(n.eventQueue_,t,A);for(let T=0;T<S.length;T++)jm(S[T])}else{if(g==="datastale")for(let S=0;S<e.length;S++)e[S].status===3?e[S].status=4:e[S].status=0;else{Ga("transaction at "+m.toString()+" failed: "+g);for(let S=0;S<e.length;S++)e[S].status=4,e[S].abortReason=g}lv(n,t)}},c)}function lv(n,t){const e=F9(n,t),i=L0(e),s=Y9(n,e);return fP(n,s,i),i}function fP(n,t,e){if(t.length===0)return;const i=[];let s=[];const c=t.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<t.length;f++){const m=t[f],g=Ba(e,m.path);let A=!1,S;if(kt(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)A=!0,S=m.abortReason,s=s.concat(bf(n.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=Zk)A=!0,S="maxretry",s=s.concat(bf(n.serverSyncTree_,m.currentWriteId,!0));else{const T=q9(n,m.path,c);m.currentInputSnapshot=T;const x=t[f].update(T.val());if(x!==void 0){rv("transaction failed: Data returned ",x,m.path);let w=Ni(x);typeof x=="object"&&x!=null&&Po(x,".priority")||(w=w.updatePriority(T.getPriority()));const V=m.currentWriteId,G=RS(n),B=L9(w,T,G);m.currentOutputSnapshotRaw=w,m.currentOutputSnapshotResolved=B,m.currentWriteId=H9(n),c.splice(c.indexOf(V),1),s=s.concat(D9(n.serverSyncTree_,m.path,B,m.currentWriteId,m.applyLocally)),s=s.concat(bf(n.serverSyncTree_,V,!0))}else A=!0,S="nodata",s=s.concat(bf(n.serverSyncTree_,m.currentWriteId,!0))}Uu(n.eventQueue_,e,s),s=[],A&&(t[f].status=2,(function(T){setTimeout(T,Math.floor(0))})(t[f].unwatcher),t[f].onComplete&&(S==="nodata"?i.push(()=>t[f].onComplete(null,!1,t[f].currentInputSnapshot)):i.push(()=>t[f].onComplete(new Error(S),!1,null))))}ov(n,n.transactionQueueTree_);for(let f=0;f<i.length;f++)jm(i[f]);NS(n,n.transactionQueueTree_)}function F9(n,t){let e,i=n.transactionQueueTree_;for(e=we(t);e!==null&&Hm(i)===void 0;)i=TS(i,e),t=yn(t),e=we(t);return i}function Y9(n,t){const e=[];return Q9(n,t,e),e.sort((i,s)=>i.order-s.order),e}function Q9(n,t,e){const i=Hm(t);if(i)for(let s=0;s<i.length;s++)e.push(i[s]);av(t,s=>{Q9(n,s,e)})}function ov(n,t){const e=Hm(t);if(e){let i=0;for(let s=0;s<e.length;s++)e[s].status!==2&&(e[i]=e[s],i++);e.length=i,V9(t,e.length>0?e:void 0)}av(t,i=>{ov(n,i)})}function X9(n,t){const e=L0(F9(n,t)),i=TS(n.transactionQueueTree_,t);return zk(i,s=>{y2(n,s)}),y2(n,i),P9(i,s=>{y2(n,s)}),e}function y2(n,t){const e=Hm(t);if(e){const i=[];let s=[],l=-1;for(let c=0;c<e.length;c++)e[c].status===3||(e[c].status===1?(kt(l===c-1,"All SENT items should be at beginning of queue."),l=c,e[c].status=3,e[c].abortReason="set"):(kt(e[c].status===0,"Unexpected transaction status in abort"),e[c].unwatcher(),s=s.concat(bf(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));l===-1?V9(t,void 0):e.length=l+1,Uu(n.eventQueue_,L0(t),s);for(let c=0;c<i.length;c++)jm(i[c])}}function dP(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let s=e[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function mP(n){const t={};n.charAt(0)==="?"&&(n=n.substring(1));for(const e of n.split("&")){if(e.length===0)continue;const i=e.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ga(`Invalid query segment '${e}' in query '${n}'`)}return t}const eb=function(n,t){const e=pP(n),i=e.namespace;e.domain==="firebase.com"&&Pu(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&e.domain!=="localhost"&&Pu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||SL();const s=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new t9(e.host,e.secure,i,s,t,"",i!==e.subdomain),path:new an(e.pathString)}},pP=function(n){let t="",e="",i="",s="",l="",c=!0,f="https",m=443;if(typeof n=="string"){let g=n.indexOf("//");g>=0&&(f=n.substring(0,g-1),n=n.substring(g+2));let A=n.indexOf("/");A===-1&&(A=n.length);let S=n.indexOf("?");S===-1&&(S=n.length),t=n.substring(0,Math.min(A,S)),A<S&&(s=dP(n.substring(A,S)));const T=mP(n.substring(Math.min(n.length,S)));g=t.indexOf(":"),g>=0?(c=f==="https"||f==="wss",m=parseInt(t.substring(g+1),10)):g=t.length;const x=t.slice(0,g);if(x.toLowerCase()==="localhost")e="localhost";else if(x.split(".").length<=2)e=x;else{const w=t.indexOf(".");i=t.substring(0,w).toLowerCase(),e=t.substring(w+1),l=i}"ns"in T&&(l=T.ns)}return{host:t,port:m,domain:e,subdomain:i,secure:c,scheme:f,pathString:s,namespace:l}};class gP{constructor(t,e,i,s){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=s}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+es(this.snapshot.exportVal())}}class _P{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class yP{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return kt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class vP{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new Su;return aP(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Sg("OnDisconnect.remove",this._path);const t=new Su;return tb(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Sg("OnDisconnect.set",this._path),wA("OnDisconnect.set",t,this._path);const e=new Su;return tb(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Sg("OnDisconnect.setWithPriority",this._path),wA("OnDisconnect.setWithPriority",t,this._path),Yk("OnDisconnect.setWithPriority",e);const i=new Su;return rP(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){Sg("OnDisconnect.update",this._path),Fk("OnDisconnect.update",t,this._path);const e=new Su;return lP(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class DS{constructor(t,e,i,s){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=s}get key(){return De(this._path)?null:nS(this._path)}get ref(){return new _h(this._repo,this._path)}get _queryIdentifier(){const t=U3(this._queryParams),e=ZE(t);return e==="{}"?"default":e}get _queryObject(){return U3(this._queryParams)}isEqual(t){if(t=Bn(t),!(t instanceof DS))return!1;const e=this._repo===t._repo,i=iS(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return e&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+aV(this._path)}}class _h extends DS{constructor(t,e){super(t,e,new lS,!1)}get parent(){const t=u9(this._path);return t===null?null:new _h(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class A1{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new an(t),i=xA(this.ref,t);return new A1(this._node.getChild(e),i,ti)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>t(new A1(s,xA(this.ref,i),ti)))}hasChild(t){const e=new an(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Cm(n,t){return n=Bn(n),n._checkNotDeleted("ref"),t!==void 0?xA(n._root,t):n._root}function xA(n,t){return n=Bn(n),we(n._path)===null?Qk("child","path",t):B9("child","path",t),new _h(n._repo,yi(n._path,t))}function nb(n){return n=Bn(n),new vP(n._repo,n._path)}function NA(n,t){n=Bn(n),Sg("set",n._path),wA("set",t,n._path);const e=new Su;return iP(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}class IS{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){const i=e._queryParams.getIndex();return new gP("value",this,new A1(t.snapshotNode,new _h(e._repo,e._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new _P(this,t,e):null}matches(t){return t instanceof IS?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function AP(n,t,e,i,s){const l=new yP(e,void 0),c=new IS(l);return oP(n._repo,n,c),()=>uP(n._repo,n,c)}function K9(n,t,e,i){return AP(n,"value",t)}gk(_h);Sk(_h);const EP="FIREBASE_DATABASE_EMULATOR_HOST",DA={};let SP=!1;function TP(n,t,e,i){const s=t.lastIndexOf(":"),l=t.substring(0,s),c=fh(l);n.repoInfo_=new t9(t,c,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,e),i&&(n.authTokenProvider_=i)}function bP(n,t,e,i,s){let l=i||n.options.databaseURL;l===void 0&&(n.options.projectId||Pu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Rs("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=eb(l,s),f=c.repoInfo,m;typeof process<"u"&&A3&&(m=A3[EP]),m?(l=`http://${m}?ns=${f.namespace}`,c=eb(l,s),f=c.repoInfo):c.repoInfo.secure;const g=new ML(n.name,n.options,t);Xk("Invalid Firebase Database URL",c),De(c.path)||Pu("Database URL must point to the root of a Firebase Database (not including a child path).");const A=RP(f,n,g,new OL(n,e));return new wP(A,n)}function CP(n,t){const e=DA[t];(!e||e[n.key]!==n)&&Pu(`Database ${t}(${n.repoInfo_}) has already been deleted.`),cP(n),delete e[n.key]}function RP(n,t,e,i){let s=DA[t.name];s||(s={},DA[t.name]=s);let l=s[n.toURLString()];return l&&Pu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new $k(n,SP,e,i),s[n.toURLString()]=l,l}class wP{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(tP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _h(this._repo,tn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(CP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Pu("Cannot call "+t+" on a deleted database.")}}function xP(n=iE(),t){const e=D1(n,"database").getImmediate({identifier:t});if(!e._instanceStarted){const i=mC("database");i&&NP(e,...i)}return e}function NP(n,t,e,i={}){n=Bn(n),n._checkNotDeleted("useEmulator");const s=`${t}:${e}`,l=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&eh(i,l.repoInfo_.emulatorOptions))return;Pu("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(l.repoInfo_.nodeAdmin)i.mockUserToken&&Pu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Ly(Ly.OWNER);else if(i.mockUserToken){const f=typeof i.mockUserToken=="string"?i.mockUserToken:_C(i.mockUserToken,n.app.options.projectId);c=new Ly(f)}fh(t)&&($A(t),tE("Database",!0)),TP(l,s,i,c)}function DP(n){gL(Pf),Rf(new nh("database",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),l=t.getProvider("app-check-internal");return bP(i,s,l,e)},"PUBLIC").setMultipleInstances(!0)),Do(E3,S3,n),Do(E3,S3,"esm2017")}Du.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};Du.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};DP();const IP={apiKey:"AIzaSyBRoQv-CjY6LEEY2rAyX6Gp9PD0Q5vZZCA",authDomain:"vellum-6f172.firebaseapp.com",projectId:"vellum-6f172",storageBucket:"vellum-6f172.firebasestorage.app",messagingSenderId:"865208426663",appId:"1:865208426663:web:196559740c44bb241bfb82",databaseURL:"https://vellum-6f172-default-rtdb.firebaseio.com"};let yf,v2,A2,E2;function OP(){return typeof yf<"u"?{app:yf,auth:v2,db:A2,rtdb:E2}:(yf=SC(IP),v2=hI(yf),A2=R6(yf),E2=xP(yf),{app:yf,auth:v2,db:A2,rtdb:E2})}const{app:gH,auth:ss,db:el,rtdb:Rm}=OP();async function MP(n,t){return WN(ss,n,t)}async function LP(n,t){return KN(ss,n,t)}async function VP(){return tD(ss)}function kP(n){return $N(ss,n)}const W9=j.createContext(null);function PP({children:n}){const[t,e]=j.useState(null),[i,s]=j.useState(!0);return j.useEffect(()=>kP(c=>{e(c),s(!1)}),[]),k.jsx(W9.Provider,{value:{user:t,loading:i},children:n})}function OS(){const n=j.useContext(W9);if(!n)throw new Error("useAuth must be used within AuthProvider");return n}function UP(){const n=kf();function t(){document.getElementById("about")?.scrollIntoView({behavior:"smooth"})}return k.jsxs("div",{className:"landing-page",children:[k.jsxs("nav",{className:"landing-nav",children:[k.jsx("span",{className:"landing-logo",children:"Vellum"}),k.jsxs("div",{className:"landing-nav-actions",children:[k.jsx("button",{type:"button",className:"landing-nav-btn",onClick:t,children:"About"}),k.jsx("button",{type:"button",className:"landing-nav-btn",onClick:()=>n("/login"),children:"Login"}),k.jsx("button",{type:"button",className:"landing-nav-btn landing-nav-btn-primary",onClick:()=>n("/login"),children:"Sign Up"})]})]}),k.jsxs("main",{className:"landing-main",children:[k.jsxs("section",{className:"landing-hero",children:[k.jsx("h1",{className:"landing-hero-title",children:"From rough ideas to real plans."}),k.jsx("button",{type:"button",className:"landing-hero-cta",onClick:()=>n("/login"),children:"Get Started"}),k.jsx("p",{className:"landing-hero-subtext",children:"Canvas-first planning with a clean, collaborative experience."})]}),k.jsxs("section",{id:"about",className:"landing-about",children:[k.jsx("h2",{className:"landing-about-title",children:"About"}),k.jsx("p",{className:"landing-about-content",children:"Under construction"})]})]})]})}function zP(){const n=kf(),[t,e]=j.useState(""),[i,s]=j.useState(""),[l,c]=j.useState(!1),[f,m]=j.useState(null),[g,A]=j.useState(!1);async function S(T){T.preventDefault(),m(null),A(!0);try{l?await LP(t,i):await MP(t,i),n("/dashboard",{replace:!0})}catch(x){const w=x instanceof Error?x.message:"Something went wrong";w.includes("password")?m("Incorrect password"):w.includes("email")||w.includes("user")?m("Invalid email or user not found"):m(w)}finally{A(!1)}}return k.jsx("div",{className:"login-page",children:k.jsxs("div",{className:"login-card",children:[k.jsx("h1",{children:"CollabBoard"}),k.jsx("p",{className:"login-subtitle",children:"Real-time collaborative whiteboard"}),k.jsxs("form",{onSubmit:S,className:"login-form",children:[k.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:T=>e(T.target.value),required:!0,autoComplete:"email"}),k.jsx("input",{type:"password",placeholder:"Password",value:i,onChange:T=>s(T.target.value),required:!0,autoComplete:l?"new-password":"current-password"}),f&&k.jsx("p",{className:"login-error",children:f}),k.jsx("button",{type:"submit",disabled:g,children:g?"Please wait":l?"Create account":"Sign in"})]}),k.jsx("button",{type:"button",className:"login-toggle",onClick:()=>{c(T=>!T),m(null)},children:l?"Already have an account? Sign in":"Need an account? Sign up"})]})})}const BP="modulepreload",jP=function(n){return"/"+n},ib={},GP=function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){let g=function(A){return Promise.all(A.map(S=>Promise.resolve(S).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var c=g;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=f?.nonce||f?.getAttribute("nonce");s=g(e.map(A=>{if(A=jP(A),A in ib)return;ib[A]=!0;const S=A.endsWith(".css"),T=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${T}`))return;const x=document.createElement("link");if(x.rel=S?"stylesheet":BP,S||(x.as="script"),x.crossOrigin="",x.href=A,m&&x.setAttribute("nonce",m),document.head.appendChild(x),S)return new Promise((w,L)=>{x.addEventListener("load",w),x.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${A}`)))})}))}function l(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return s.then(f=>{for(const m of f||[])m.status==="rejected"&&l(m.reason);return t().catch(l)})},V0="boards",MS="members";function J9(){return Bm(el,V0)}function uv(n){return jf(el,V0,n)}function HP(n){return Bm(el,V0,n,MS)}function LS(n,t){return jf(el,V0,n,MS,t)}async function qP(n){const t=ss.currentUser;if(!t)throw new Error("Not authenticated");const e={name:n||"Untitled Board",ownerId:t.uid,createdAt:Oi(),updatedAt:Oi()},i=await Ol(J9(),e);return console.log("[board] createBoard saved to Firestore:",{boardId:i.id,name:n,ownerId:t.uid}),await Z1(LS(i.id,t.uid),{userId:t.uid,email:t.email??"",displayName:t.displayName??null,role:"edit",addedAt:Oi()}),i.id}async function qm(n){const t=await J1(uv(n));if(!t.exists())return null;const e=t.data();return{id:t.id,...e}}async function FP(n,t){await Gf(uv(n),{...t,updatedAt:Oi()})}async function YP(n){const t=ss.currentUser;if(!t)throw new Error("Not authenticated");const e=await qm(n);if(!e||e.ownerId!==t.uid)throw new Error("Only the board owner can delete it");await JE(uv(n))}function sb(n){return[...n].sort((t,e)=>{const i=t.updatedAt?.toMillis?.()??0;return(e.updatedAt?.toMillis?.()??0)-i})}function QP(n){const t=ss.currentUser;if(!t)return n({owned:[],shared:[]}),()=>{};let e=[],i=[];const s=()=>{const f=new Set(e.map(g=>g.id)),m=i.filter(g=>!f.has(g.id));n({owned:sb(e),shared:sb(m)})},l=n0(l1(J9(),e0("ownerId","==",t.uid)),f=>{e=f.docs.map(m=>{const g=m.data();return{id:m.id,...g}}),s()},f=>{console.error("[board] subscribeToBoardsForUser (owned):",f),e=[],s()});let c=()=>{};try{c=n0(l1(GE(el,MS),e0("userId","==",t.uid)),async f=>{const m=new Set;f.docs.forEach(S=>{const T=S.ref.path.split("/"),x=T.indexOf(V0);x>=0&&T[x+1]&&m.add(T[x+1])});const g=[...m],A=[];for(const S of g){const T=await qm(S);T&&T.ownerId!==t.uid&&A.push(T)}i=A,s()},f=>{console.warn("[board] subscribeToBoardsForUser (shared) failed, showing owned only:",f.message),i=[],s()})}catch(f){console.warn("[board] subscribeToBoardsForUser (shared) setup failed:",f)}return()=>{l(),c()}}async function ab(n){return(await WE(HP(n))).docs.map(e=>{const i=e.data();return{...i,addedAt:i.addedAt}})}async function XP(n,t,e,i,s){const l=ss.currentUser?.uid;l&&t!==l&&await Gf(uv(n),{updatedAt:Oi()}),await Z1(LS(n,t),{userId:t,email:e,displayName:i,role:s,addedAt:Oi()})}async function Z9(n){const t=ss.currentUser;if(!t)return null;const e=await qm(n);if(!e)return null;if(e.ownerId===t.uid)return"owner";const i=await J1(LS(n,t.uid));return i.exists()?i.data().role??null:null}async function KP(n){const t=await Z9(n);return t==="owner"||t==="edit"}const VS="invites";function WP(n){return Bm(el,"boards",n,VS)}function $9(n,t){return jf(el,"boards",n,VS,t)}async function JP(n){const t=ss.currentUser;if(!t)throw new Error("Not authenticated");const e=await qm(n.boardId);if(!e||e.ownerId!==t.uid)throw new Error("Only the board owner can send invites");const s={email:n.email.trim().toLowerCase(),role:n.role,invitedBy:t.uid,invitedByName:t.displayName??null,status:"pending",createdAt:Oi(),updatedAt:Oi()};return(await Ol(WP(n.boardId),s)).id}async function ZP(n){const t=n.trim().toLowerCase();return(await WE(l1(GE(el,VS),e0("email","==",t),e0("status","==","pending")))).docs.map(i=>{const s=i.data(),l=i.ref.parent.parent?.id??"";return{id:i.id,boardId:l,...s}})}function t8(){const n=ss.currentUser;if(!n)return null;if(n.email)return n.email.trim().toLowerCase();const t=n.providerData?.[0];return t?.email?t.email.trim().toLowerCase():null}async function fy(){const n=t8();if(!n)return[];try{return await ZP(n)}catch(t){return console.error("[invites] getMyPendingInvites failed:",t),[]}}async function $P(n,t){const e=ss.currentUser;if(!e)throw new Error("Not authenticated");const i=$9(n,t),s=await J1(i);if(!s.exists())throw new Error("Invite not found");const l=s.data();if(l.status!=="pending")throw new Error("Invite already used");const c=t8();if(!c||l.email!==c)throw new Error("This invite was sent to a different email");try{await XP(n,e.uid,e.email??"",e.displayName??null,l.role)}catch(f){throw console.error("[invites] addBoardMember failed:",f),new Error("Failed to join board. You may already be a member.")}try{await Gf(i,{status:"accepted",updatedAt:Oi()})}catch(f){throw console.error("[invites] updateDoc invite failed:",f),new Error("Failed to update invite. You have been added to the board.")}}async function tU(n,t){const e=$9(n,t);await Gf(e,{status:"rejected",updatedAt:Oi()})}function eU({ownedBoards:n,sharedBoards:t,currentUserId:e,onOpen:i,onShare:s,onDelete:l}){const c=[...n.map(f=>({...f,isOwner:!0})),...t.map(f=>({...f,isOwner:!1}))].sort((f,m)=>{const g=f.updatedAt?.toMillis?.()??0;return(m.updatedAt?.toMillis?.()??0)-g});return c.length===0?k.jsx("div",{className:"board-list-empty",children:k.jsx("p",{children:"No boards yet. Create one to get started."})}):k.jsxs("div",{className:"board-list-section",children:[k.jsx("h2",{className:"board-list-heading",children:"Your Boards"}),k.jsx("div",{className:"board-grid",children:c.map(f=>k.jsx(nU,{board:f,isOwner:f.isOwner,currentUserId:e,onOpen:i,onShare:s,onDelete:l},f.id))})]})}function nU({board:n,isOwner:t,currentUserId:e,onOpen:i,onShare:s,onDelete:l}){const c=n.ownerId===e;return k.jsxs("article",{className:"board-card",children:[k.jsxs("button",{type:"button",className:"board-card-main",onClick:()=>i(n.id),children:[k.jsx("h3",{className:"board-card-name",children:n.name||"Untitled Board"}),k.jsxs("span",{className:"board-card-meta",children:["Updated ",iU(n.updatedAt)]})]}),k.jsxs("div",{className:"board-card-actions",children:[t&&k.jsx("button",{type:"button",className:"board-card-share",onClick:f=>{f.stopPropagation(),s(n.id)},title:"Share board",children:"Share"}),c&&k.jsx("button",{type:"button",className:"board-card-delete",onClick:f=>{f.stopPropagation(),l(n.id)},title:"Delete board",children:"Delete"})]})]})}function iU(n){if(!n?.toMillis)return"";const t=new Date(n.toMillis()),i=new Date().getTime()-t.getTime();return i<6e4?"just now":i<36e5?`${Math.floor(i/6e4)}m ago`:i<864e5?`${Math.floor(i/36e5)}h ago`:t.toLocaleDateString()}function sU({onClose:n,onCreate:t}){const[e,i]=j.useState(""),[s,l]=j.useState(!1),[c,f]=j.useState(null),m=j.useRef(null);j.useEffect(()=>{m.current?.focus()},[]);async function g(A){A.preventDefault();const S=e.trim();if(!S){f("Please enter a board name");return}f(null),l(!0);try{await t(S),n()}catch(T){f(T instanceof Error?T.message:"Failed to create board")}finally{l(!1)}}return k.jsx("div",{className:"modal-overlay",onClick:n,children:k.jsxs("div",{className:"modal create-board-modal",onClick:A=>A.stopPropagation(),children:[k.jsxs("div",{className:"modal-header",children:[k.jsx("h2",{children:"Create New Board"}),k.jsx("button",{type:"button",className:"modal-close",onClick:n,"aria-label":"Close",children:""})]}),k.jsxs("form",{onSubmit:g,className:"create-board-form",children:[k.jsx("label",{htmlFor:"board-name",children:"Board name"}),k.jsx("input",{ref:m,id:"board-name",type:"text",placeholder:"Enter board name",value:e,onChange:A=>i(A.target.value),disabled:s,autoComplete:"off"}),c&&k.jsx("p",{className:"create-board-error",children:c}),k.jsxs("div",{className:"create-board-actions",children:[k.jsx("button",{type:"button",className:"btn-secondary",onClick:n,children:"Cancel"}),k.jsx("button",{type:"submit",className:"btn-primary",disabled:s,children:s?"Creating":"Create"})]})]})]})})}function e8({boardId:n,onClose:t}){const[e,i]=j.useState("email"),[s,l]=j.useState(""),[c,f]=j.useState("edit"),[m,g]=j.useState([]),[A,S]=j.useState(!1),[T,x]=j.useState(null),[w,L]=j.useState(null),[V,G]=j.useState(!1),B=typeof window<"u"?`${window.location.origin}/board/${n}`:"";j.useEffect(()=>{ab(n).then(g)},[n]);async function Y(at){at.preventDefault(),x(null),L(null),S(!0);try{await JP({boardId:n,email:s.trim(),role:c}),L(`Invite sent to ${s.trim()}`),l(""),ab(n).then(g)}catch(tt){x(tt instanceof Error?tt.message:"Failed to send invite")}finally{S(!1)}}async function et(){try{await navigator.clipboard.writeText(B),G(!0),setTimeout(()=>G(!1),2e3)}catch{x("Failed to copy link")}}return k.jsx("div",{className:"modal-overlay",onClick:t,children:k.jsxs("div",{className:"modal invite-modal",onClick:at=>at.stopPropagation(),children:[k.jsxs("div",{className:"modal-header",children:[k.jsx("h2",{children:"Share board"}),k.jsx("button",{type:"button",className:"modal-close",onClick:t,"aria-label":"Close",children:""})]}),k.jsxs("div",{className:"invite-tabs",children:[k.jsx("button",{type:"button",className:`invite-tab ${e==="email"?"active":""}`,onClick:()=>i("email"),children:"Invite by Email"}),k.jsx("button",{type:"button",className:`invite-tab ${e==="link"?"active":""}`,onClick:()=>i("link"),children:"Share Link"})]}),e==="email"&&k.jsxs("form",{onSubmit:Y,className:"invite-form",children:[k.jsxs("div",{className:"invite-form-row",children:[k.jsx("input",{type:"email",placeholder:"Email address",value:s,onChange:at=>l(at.target.value),required:!0}),k.jsxs("select",{value:c,onChange:at=>f(at.target.value),children:[k.jsx("option",{value:"edit",children:"Can Edit"}),k.jsx("option",{value:"view",children:"Can View"})]}),k.jsx("button",{type:"submit",disabled:A,children:A?"Sending":"Send invite"})]}),T&&k.jsx("p",{className:"invite-error",children:T}),w&&k.jsx("p",{className:"invite-success",children:w})]}),e==="link"&&k.jsxs("div",{className:"invite-link-section",children:[k.jsx("p",{className:"invite-link-hint",children:"Anyone with the link can access this board."}),k.jsxs("div",{className:"invite-link-row",children:[k.jsx("input",{type:"text",readOnly:!0,value:B,className:"invite-link-input"}),k.jsx("button",{type:"button",className:"invite-copy-btn",onClick:et,children:V?"Copied!":"Copy link"})]})]}),k.jsxs("div",{className:"invite-members",children:[k.jsx("h3",{children:"Board members"}),m.length===0?k.jsx("p",{className:"invite-muted",children:"Only you so far. Send an invite to add others."}):k.jsx("ul",{className:"members-list",children:m.map(at=>k.jsxs("li",{className:"members-list-item",children:[k.jsx("span",{className:"member-email",children:at.email}),k.jsx("span",{className:"member-role",children:at.role})]},at.userId))})]})]})})}function aU({invites:n,onAccept:t,onReject:e,onRefresh:i}){const[s,l]=j.useState(!1),[c,f]=j.useState(null),[m,g]=j.useState(null),A=j.useRef(null),S=kf();j.useEffect(()=>{s&&i()},[s,i]),j.useEffect(()=>{function w(L){A.current&&!A.current.contains(L.target)&&l(!1)}if(s)return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[s]);async function T(w){f(null),g(w.id);try{await $P(w.boardId,w.id),t(w.boardId),l(!1),S(`/board/${w.boardId}`)}catch(L){f(L instanceof Error?L.message:"Failed to accept invite"),t()}finally{g(null)}}async function x(w){f(null);try{await tU(w.boardId,w.id),e()}catch(L){f(L instanceof Error?L.message:"Failed to decline invite"),e()}}return k.jsxs("div",{className:"notifications-dropdown",ref:A,children:[k.jsxs("button",{type:"button",className:"notifications-trigger",onClick:()=>l(w=>!w),title:"Notifications","aria-expanded":s,"aria-haspopup":"true",children:["Notifications",n.length>0&&k.jsx("span",{className:"notifications-badge",children:n.length})]}),s&&k.jsxs("div",{className:"notifications-panel",children:[k.jsx("div",{className:"notifications-header",children:k.jsx("h3",{children:"Pending invites"})}),k.jsxs("div",{className:"notifications-content",children:[c&&k.jsx("p",{className:"notifications-error",children:c}),n.length===0?k.jsx("p",{className:"notifications-empty",children:"No pending invites."}):k.jsx("ul",{className:"notifications-list",children:n.map(w=>k.jsxs("li",{className:"notifications-item",children:[k.jsxs("div",{className:"notifications-item-info",children:[k.jsx("strong",{children:w.invitedByName||w.invitedBy}),k.jsxs("span",{children:["invited you to a board (",w.role," access)"]})]}),k.jsxs("div",{className:"notifications-item-actions",children:[k.jsx("button",{type:"button",className:"notifications-btn-accept",onClick:()=>T(w),disabled:m===w.id,children:m===w.id?"Accepting":"Accept"}),k.jsx("button",{type:"button",className:"notifications-btn-reject",onClick:()=>x(w),children:"Decline"})]})]},`${w.boardId}-${w.id}`))})]})]})]})}function rU(){const[n,t]=j.useState(!1),e=j.useRef(null);j.useEffect(()=>{function s(l){e.current&&!e.current.contains(l.target)&&t(!1)}if(n)return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[n]);const i=[{label:"Update Username",comingSoon:!0},{label:"Update Password",comingSoon:!0},{label:"Update Title/Bio",comingSoon:!0}];return k.jsxs("div",{className:"account-dropdown",ref:e,children:[k.jsx("button",{type:"button",className:"account-trigger",onClick:()=>t(s=>!s),title:"Account","aria-expanded":n,"aria-haspopup":"true",children:"Account"}),n&&k.jsx("div",{className:"account-panel",children:k.jsx("ul",{className:"account-menu",children:i.map(s=>k.jsx("li",{children:k.jsxs("button",{type:"button",className:"account-menu-item",disabled:s.comingSoon,title:s.comingSoon?"Coming soon":void 0,children:[s.label,s.comingSoon&&k.jsx("span",{className:"account-coming-soon",children:"Coming soon"})]})},s.label))})})]})}function lU({expanded:n,onToggle:t,onCreateBoard:e,onDashboardClick:i}){return k.jsxs("aside",{className:`dashboard-sidebar ${n?"dashboard-sidebar-expanded":"dashboard-sidebar-collapsed"}`,children:[k.jsx("button",{type:"button",className:"sidebar-toggle",onClick:t,"aria-label":n?"Collapse sidebar":"Expand sidebar",children:k.jsx("span",{className:"sidebar-toggle-icon","aria-hidden":!0,children:n?"":""})}),n&&k.jsxs("nav",{className:"sidebar-nav",children:[k.jsx("button",{type:"button",className:"sidebar-btn sidebar-btn-primary",onClick:e,children:"Create Board"}),k.jsx("button",{type:"button",className:"sidebar-btn",onClick:i,children:"Dashboard"})]})]})}function oU(){const{user:n}=OS(),t=kf(),e=j.useRef(null),[i,s]=j.useState({owned:[],shared:[]}),[l,c]=j.useState([]),[f,m]=j.useState(!0),[g,A]=j.useState(null),[S,T]=j.useState(!1),[x,w]=j.useState(!0);j.useEffect(()=>{if(!n?.uid){m(!1),s({owned:[],shared:[]}),c([]);return}m(!0);const at=QP(z=>{s(z),m(!1)});let tt=!1;return fy().then(z=>{tt||c(z)}),()=>{tt=!0,at()}},[n?.uid,n?.email]);async function L(at){const tt=await qP(at);t(`/board/${tt}`)}async function V(at){t(`/board/${at}`)}async function G(at){if(fy().then(c),at){const tt=await qm(at);tt&&s(z=>z.owned.some(U=>U.id===at)||z.shared.some(U=>U.id===at)?z:{...z,shared:[tt,...z.shared]})}}function B(){e.current?.scrollIntoView({behavior:"smooth"})}async function Y(at){if(confirm("Delete this board? This cannot be undone."))try{await YP(at)}catch(tt){console.error("Failed to delete board:",tt),alert(tt instanceof Error?tt.message:"Failed to delete board")}}const et=n?.displayName||n?.email||"User";return k.jsxs("div",{className:"dashboard",children:[k.jsxs("header",{className:"dashboard-topnav",children:[k.jsx("span",{className:"dashboard-brand",children:"Vellum"}),k.jsxs("div",{className:"dashboard-topnav-actions",children:[k.jsx("span",{className:"dashboard-user",children:et}),k.jsx(aU,{invites:l,onAccept:G,onReject:()=>fy().then(c),onRefresh:()=>fy().then(c)}),k.jsx(rU,{}),k.jsx("button",{type:"button",className:"dashboard-logout",onClick:()=>VP(),children:"Log Out"})]})]}),k.jsx(lU,{expanded:x,onToggle:()=>w(at=>!at),onCreateBoard:()=>T(!0),onDashboardClick:B}),k.jsxs("main",{className:"dashboard-main",style:{marginLeft:x?200:48},children:[k.jsxs("section",{className:"dashboard-ai-placeholder",children:[k.jsx("h2",{className:"dashboard-ai-title",children:"Need help drafting a template?"}),k.jsx("p",{className:"dashboard-ai-subtext",children:"Under construction  come back for an AI template and feature generator"})]}),k.jsx("section",{className:"dashboard-template-section",children:k.jsxs("div",{className:"dashboard-template-row",children:[k.jsxs("button",{type:"button",className:"dashboard-template-blank",onClick:()=>T(!0),children:[k.jsx("span",{className:"dashboard-template-blank-icon",children:"+"}),k.jsx("span",{className:"dashboard-template-blank-text",children:"Start from Scratch"})]}),k.jsxs("div",{className:"dashboard-template-recent",children:[k.jsx("h3",{className:"dashboard-template-recent-title",children:"Recently Used Templates"}),k.jsx("p",{className:"dashboard-template-recent-message",children:!f&&(i.owned.length>0||i.shared.length>0)?"Templates coming soon  we're building AI-powered templates for you":"No templates yet  create your first board to get started!"})]})]})}),k.jsx("section",{ref:e,className:"dashboard-boards",children:f?k.jsx("p",{className:"dashboard-loading",children:"Loading boards"}):k.jsx(eU,{ownedBoards:i.owned,sharedBoards:i.shared,currentUserId:n?.uid??"",onOpen:V,onShare:A,onDelete:Y})})]}),S&&k.jsx(sU,{onClose:()=>T(!1),onCreate:L}),g&&k.jsx(e8,{boardId:g,onClose:()=>A(null)})]})}const E1={fontFamily:"Inter, system-ui, sans-serif",fontSize:14,fontColor:"#1a1a1a",bold:!1,italic:!1,underline:!1,textAlign:"left"},n8="objects";function zc(n){return Bm(el,"boards",n,n8)}function kS(n,t){return jf(el,"boards",n,n8,t)}function uU(n,t){const e={objectId:n,type:t.type,createdBy:t.createdBy,createdAt:t.createdAt,updatedAt:t.updatedAt};if(t.type==="sticky")return{...e,type:"sticky",position:t.position,dimensions:t.dimensions,content:t.content??"",fillColor:t.fillColor??"#fef08a",textStyle:t.textStyle??E1};if(t.type==="rectangle")return{...e,type:"rectangle",position:t.position,dimensions:t.dimensions,fillColor:t.fillColor??"transparent"};if(t.type==="circle")return{...e,type:"circle",position:t.position,dimensions:t.dimensions,fillColor:t.fillColor??"transparent"};if(t.type==="triangle")return{...e,type:"triangle",position:t.position,dimensions:t.dimensions,fillColor:t.fillColor??"transparent"};if(t.type==="line")return{...e,type:"line",start:t.start,end:t.end,strokeColor:t.strokeColor??"#000",strokeWidth:t.strokeWidth??2};if(t.type==="text")return{...e,type:"text",position:t.position,dimensions:t.dimensions,content:t.content??"",textStyle:t.textStyle??E1};if(t.type==="emoji")return{...e,type:"emoji",position:t.position,emoji:t.emoji??"",fontSize:t.fontSize??32};throw new Error(`Unknown object type: ${t.type}`)}async function S2(n,t){const e=ss.currentUser;if(!e)throw new Error("Not authenticated");const i={type:t.type,createdBy:e.uid,createdAt:Oi(),updatedAt:Oi()};if(t.type==="sticky"){const s={...i,position:t.position,dimensions:t.dimensions??{width:200,height:200},content:t.content??"",fillColor:t.fillColor??"#fef08a",textStyle:{...E1,...t.textStyle}};return(await Ol(zc(n),s)).id}if(t.type==="rectangle"){const s={...i,position:t.position,dimensions:t.dimensions??{width:150,height:100}};return(await Ol(zc(n),s)).id}if(t.type==="circle"){const s={...i,position:t.position,dimensions:t.dimensions??{width:100,height:100}};return(await Ol(zc(n),s)).id}if(t.type==="triangle"){const s={...i,position:t.position,dimensions:t.dimensions??{width:100,height:80}};return(await Ol(zc(n),s)).id}if(t.type==="line"){const s={...i,start:t.start,end:t.end,strokeColor:t.strokeColor??"#000",strokeWidth:t.strokeWidth??2};return(await Ol(zc(n),s)).id}if(t.type==="text"){const s={...i,position:t.position,dimensions:t.dimensions??{width:200,height:40},content:t.content??"Text",textStyle:{...E1,...t.textStyle}};return(await Ol(zc(n),s)).id}if(t.type==="emoji"){const s={...i,position:t.position,emoji:t.emoji??"",fontSize:t.fontSize??32};return(await Ol(zc(n),s)).id}throw new Error(`Unsupported type: ${t.type}`)}async function Qd(n,t,e){await Gf(kS(n,t),{...e,updatedAt:Oi()})}async function T2(n,t){await JE(kS(n,t))}function cU(n){const{objectId:t,...e}=n;return e}async function hU(n,t,e){const i=ss.currentUser;if(!i)throw new Error("Not authenticated");const s={...e,createdBy:e.createdBy??i.uid,createdAt:e.createdAt??Oi(),updatedAt:Oi()};await Z1(kS(n,t),s)}function fU(n,t){return n0(zc(n),e=>{const i={};e.docs.forEach(s=>{try{const l=uU(s.id,s.data());i[s.id]=l}catch{console.warn("[objects] skip unknown type:",s.data()?.type)}}),t(i)})}function i8(n){return Bm(el,"boards",n,"comments")}async function dU(n,t,e){const i=ss.currentUser;if(!i)throw new Error("Not authenticated");const s={position:t,authorId:i.uid,authorName:i.displayName??null,text:e,replies:[],createdAt:Oi(),updatedAt:Oi()};return(await Ol(i8(n),s)).id}async function mU(n,t,e){const i=ss.currentUser;if(!i)throw new Error("Not authenticated");const s=jf(el,"boards",n,"comments",t),l={authorId:i.uid,authorName:i.displayName??null,text:e,timestamp:Oi()},m=(await GP(async()=>{const{getDoc:g}=await Promise.resolve().then(()=>pL);return{getDoc:g}},[]).then(({getDoc:g})=>g(s))).data()?.replies??[];await Gf(s,{replies:[...m,l],updatedAt:Oi()})}function pU(n,t){return n0(i8(n),e=>{const i=e.docs.map(s=>{const l=s.data();return{id:s.id,boardId:n,position:l.position,authorId:l.authorId,authorName:l.authorName,text:l.text,replies:l.replies??[],createdAt:l.createdAt,updatedAt:l.updatedAt}});t(i)})}const rb=33,lb=["#ef4444","#f97316","#eab308","#22c55e","#14b8a6","#3b82f6","#8b5cf6","#ec4899"];function IA(n){let t=0;for(let i=0;i<n.length;i++)t=(t<<5)-t+n.charCodeAt(i);const e=Math.abs(t)%lb.length;return lb[e]}async function gU(n){const t=ss.currentUser;if(!t)return;const e=Cm(Rm,`presence/${n}/${t.uid}`),i=Cm(Rm,`cursors/${n}/${t.uid}`),s={userId:t.uid,displayName:t.displayName??null,email:t.email??"",color:IA(t.uid),joinedAt:Date.now()};await NA(e,s),nb(e).remove(),nb(i).remove()}let b2=0,Xd=null,C2=null;function ob(n,t,e){const i=ss.currentUser;if(!i){console.log("[presence] updateCursor skipped: no user");return}const s=Date.now();if(s-b2<rb){Xd={x:t,y:e},C2||(C2=setTimeout(()=>{if(Xd){b2=Date.now();const f=Cm(Rm,`cursors/${n}/${i.uid}`),m={x:Xd.x,y:Xd.y,displayName:i.displayName??i.email??null,color:IA(i.uid)};console.log("[presence] Sending cursor update (throttled flush)",n,i.uid,m),NA(f,m),Xd=null}C2=null},rb));return}b2=s,Xd=null;const l=Cm(Rm,`cursors/${n}/${i.uid}`),c={x:t,y:e,displayName:i.displayName??i.email??null,color:IA(i.uid)};console.log("[presence] Sending cursor update",n,i.uid,c),NA(l,c)}function _U(n,t){const e=Cm(Rm,`presence/${n}`);return K9(e,i=>{const s=i.val(),l=[];if(s&&typeof s=="object")for(const[c,f]of Object.entries(s)){const m=f;m&&typeof m=="object"&&l.push({userId:c,displayName:m.displayName??null,email:m.email??"",color:m.color??"#888",joinedAt:m.joinedAt??0})}t(l)})}function yU(n,t){const e=Cm(Rm,`cursors/${n}`);return console.log("[presence] subscribeToCursors: listening to path",`cursors/${n}`),K9(e,i=>{const s=i.val();console.log("[presence] Received cursor data",n,"raw:",s);const l=[];if(s&&typeof s=="object")for(const[c,f]of Object.entries(s)){const m=f;m&&typeof m=="object"&&typeof m.x=="number"&&typeof m.y=="number"?l.push({userId:c,x:m.x,y:m.y,displayName:m.displayName??null,color:m.color??"#888"}):console.log("[presence] Skipped cursor entry (invalid)",c,f)}console.log("[presence] Parsed cursors:",l.length,l),t(l)})}const vU=Math.PI/180;function AU(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Cf=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Vt={_global:Cf,version:"10.2.0",isBrowser:AU(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return Vt.angleDeg?n*vU:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Vt.DD.isDragging},isTransforming(){var n,t;return(t=(n=Vt.Transformer)===null||n===void 0?void 0:n.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!Vt.DD.node},releaseCanvasOnDestroy:!0,document:Cf.document,_injectGlobal(n){typeof Cf.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Cf.Konva=n}},ei=n=>{Vt[n.prototype.getClassName()]=n};Vt._injectGlobal(Vt);const EU=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,ub=()=>{if(typeof document>"u")throw new Error(EU)};class cr{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new cr(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.m[0]*e+this.m[2]*i,l=this.m[1]*e+this.m[3]*i,c=this.m[0]*-i+this.m[2]*e,f=this.m[1]*-i+this.m[3]*e;return this.m[0]=s,this.m[1]=l,this.m[2]=c,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){const i=this.m[0]+this.m[2]*e,s=this.m[1]+this.m[3]*e,l=this.m[2]+this.m[0]*t,c=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=s,this.m[2]=l,this.m[3]=c,this}multiply(t){const e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],s=this.m[0]*t.m[2]+this.m[2]*t.m[3],l=this.m[1]*t.m[2]+this.m[3]*t.m[3],c=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],f=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=l,this.m[4]=c,this.m[5]=f,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,s=-this.m[2]*t,l=this.m[0]*t,c=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=l,this.m[4]=c,this.m[5]=f,this}getMatrix(){return this.m}decompose(){const t=this.m[0],e=this.m[1],i=this.m[2],s=this.m[3],l=this.m[4],c=this.m[5],f=t*s-e*i,m={x:l,y:c,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||e!=0){const g=Math.sqrt(t*t+e*e);m.rotation=e>0?Math.acos(t/g):-Math.acos(t/g),m.scaleX=g,m.scaleY=f/g,m.skewX=(t*i+e*s)/f,m.skewY=0}else if(i!=0||s!=0){const g=Math.sqrt(i*i+s*s);m.rotation=Math.PI/2-(s>0?Math.acos(-i/g):-Math.acos(i/g)),m.scaleX=f/g,m.scaleY=g,m.skewX=0,m.skewY=(t*i+e*s)/f}return m.rotation=it._getRotation(m.rotation),m}}const SU="[object Array]",TU="[object Number]",bU="[object String]",CU="[object Boolean]",RU=Math.PI/180,wU=180/Math.PI,cg="#",xU="",NU="0",DU="Konva warning: ",cb="Konva error: ",IU="rgb(",R2={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},OU=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let dy=[],hg=null;const MU=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(n){setTimeout(n,16)},it={_isElement(n){return!!(n&&n.nodeType==1)},_isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)},_isPlainObject(n){return!!n&&n.constructor===Object},_isArray(n){return Object.prototype.toString.call(n)===SU},_isNumber(n){return Object.prototype.toString.call(n)===TU&&!isNaN(n)&&isFinite(n)},_isString(n){return Object.prototype.toString.call(n)===bU},_isBoolean(n){return Object.prototype.toString.call(n)===CU},isObject(n){return n instanceof Object},isValidSelector(n){if(typeof n!="string")return!1;const t=n[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(n){return n===0||n>0?1:-1},requestAnimFrame(n){dy.push(n),dy.length===1&&MU(function(){const t=dy;dy=[],t.forEach(function(e){e()})})},createCanvasElement(){ub();const n=document.createElement("canvas");try{n.style=n.style||{}}catch{}return n},createImageElement(){return ub(),document.createElement("img")},_isInDocument(n){for(;n=n.parentNode;)if(n==document)return!0;return!1},_urlToImage(n,t){const e=it.createImageElement();e.onload=function(){t(e)},e.src=n},_rgbToHex(n,t,e){return((1<<24)+(n<<16)+(t<<8)+e).toString(16).slice(1)},_hexToRgb(n){n=n.replace(cg,xU);const t=parseInt(n,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let n=(Math.random()*16777215<<0).toString(16);for(;n.length<6;)n=NU+n;return cg+n},isCanvasFarblingActive(){if(hg!==null)return hg;if(typeof document>"u")return hg=!1,!1;const n=this.createCanvasElement();n.width=10,n.height=10;const t=n.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,10,10),t.fillStyle="#282828",t.fillRect(0,0,10,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=0;s<100;s++)if(e[s*4]!==40||e[s*4+1]!==40||e[s*4+2]!==40||e[s*4+3]!==255){i=!0;break}return hg=i,this.releaseCanvas(n),hg},getHitColor(){const n=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(n):n},getHitColorKey(n,t,e){return this.isCanvasFarblingActive()&&(n=Math.round(n/5)*5,t=Math.round(t/5)*5,e=Math.round(e/5)*5),cg+this._rgbToHex(n,t,e)},getSnappedHexColor(n){const t=this._hexToRgb(n);return cg+this._rgbToHex(Math.round(t.r/5)*5,Math.round(t.g/5)*5,Math.round(t.b/5)*5)},getRGB(n){let t;return n in R2?(t=R2[n],{r:t[0],g:t[1],b:t[2]}):n[0]===cg?this._hexToRgb(n.substring(1)):n.substr(0,4)===IU?(t=OU.exec(n.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(n){return n=n||"black",it._namedColorToRBA(n)||it._hex3ColorToRGBA(n)||it._hex4ColorToRGBA(n)||it._hex6ColorToRGBA(n)||it._hex8ColorToRGBA(n)||it._rgbColorToRGBA(n)||it._rgbaColorToRGBA(n)||it._hslColorToRGBA(n)},_namedColorToRBA(n){const t=R2[n.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(n){if(n.indexOf("rgb(")===0){n=n.match(/rgb\(([^)]+)\)/)[1];const t=n.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(n){if(n.indexOf("rgba(")===0){n=n.match(/rgba\(([^)]+)\)/)[1];const t=n.split(/ *, */).map((e,i)=>e.slice(-1)==="%"?i===3?parseInt(e)/100:parseInt(e)/100*255:Number(e));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(n){if(n[0]==="#"&&n.length===9)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:parseInt(n.slice(7,9),16)/255}},_hex6ColorToRGBA(n){if(n[0]==="#"&&n.length===7)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:1}},_hex4ColorToRGBA(n){if(n[0]==="#"&&n.length===5)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:parseInt(n[4]+n[4],16)/255}},_hex3ColorToRGBA(n){if(n[0]==="#"&&n.length===4)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:1}},_hslColorToRGBA(n){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(n)){const[t,...e]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n),i=Number(e[0])/360,s=Number(e[1])/100,l=Number(e[2])/100;let c,f,m;if(s===0)return m=l*255,{r:Math.round(m),g:Math.round(m),b:Math.round(m),a:1};l<.5?c=l*(1+s):c=l+s-l*s;const g=2*l-c,A=[0,0,0];for(let S=0;S<3;S++)f=i+1/3*-(S-1),f<0&&f++,f>1&&f--,6*f<1?m=g+(c-g)*6*f:2*f<1?m=c:3*f<2?m=g+(c-g)*(2/3-f)*6:m=g,A[S]=m*255;return{r:Math.round(A[0]),g:Math.round(A[1]),b:Math.round(A[2]),a:1}}},haveIntersection(n,t){return!(t.x>n.x+n.width||t.x+t.width<n.x||t.y>n.y+n.height||t.y+t.height<n.y)},cloneObject(n){const t={};for(const e in n)this._isPlainObject(n[e])?t[e]=this.cloneObject(n[e]):this._isArray(n[e])?t[e]=this.cloneArray(n[e]):t[e]=n[e];return t},cloneArray(n){return n.slice(0)},degToRad(n){return n*RU},radToDeg(n){return n*wU},_degToRad(n){return it.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),it.degToRad(n)},_radToDeg(n){return it.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),it.radToDeg(n)},_getRotation(n){return Vt.angleDeg?it.radToDeg(n):n},_capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)},throw(n){throw new Error(cb+n)},error(n){console.error(cb+n)},warn(n){Vt.showWarnings&&console.warn(DU+n)},each(n,t){for(const e in n)t(e,n[e])},_inRange(n,t,e){return t<=n&&n<e},_getProjectionToSegment(n,t,e,i,s,l){let c,f,m;const g=(n-e)*(n-e)+(t-i)*(t-i);if(g==0)c=n,f=t,m=(s-e)*(s-e)+(l-i)*(l-i);else{const A=((s-n)*(e-n)+(l-t)*(i-t))/g;A<0?(c=n,f=t,m=(n-s)*(n-s)+(t-l)*(t-l)):A>1?(c=e,f=i,m=(e-s)*(e-s)+(i-l)*(i-l)):(c=n+A*(e-n),f=t+A*(i-t),m=(c-s)*(c-s)+(f-l)*(f-l))}return[c,f,m]},_getProjectionToLine(n,t,e){const i=it.cloneObject(n);let s=Number.MAX_VALUE;return t.forEach(function(l,c){if(!e&&c===t.length-1)return;const f=t[(c+1)%t.length],m=it._getProjectionToSegment(l.x,l.y,f.x,f.y,n.x,n.y),g=m[0],A=m[1],S=m[2];S<s&&(i.x=g,i.y=A,s=S)}),i},_prepareArrayForTween(n,t,e){const i=[],s=[];if(n.length>t.length){const c=t;t=n,n=c}for(let c=0;c<n.length;c+=2)i.push({x:n[c],y:n[c+1]});for(let c=0;c<t.length;c+=2)s.push({x:t[c],y:t[c+1]});const l=[];return s.forEach(function(c){const f=it._getProjectionToLine(c,i,e);l.push(f.x),l.push(f.y)}),l},_prepareToStringify(n){let t;n.visitedByCircularReferenceRemoval=!0;for(const e in n)if(n.hasOwnProperty(e)&&n[e]&&typeof n[e]=="object"){if(t=Object.getOwnPropertyDescriptor(n,e),n[e].visitedByCircularReferenceRemoval||it._isElement(n[e]))if(t.configurable)delete n[e];else return null;else if(it._prepareToStringify(n[e])===null)if(t.configurable)delete n[e];else return null}return delete n.visitedByCircularReferenceRemoval,n},_assign(n,t){for(const e in t)n[e]=t[e];return n},_getFirstPointerId(n){return n.touches?n.changedTouches[0].identifier:n.pointerId||999},releaseCanvas(...n){Vt.releaseCanvasOnDestroy&&n.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(n,t,e,i){let s=t<0?t:0,l=e<0?e:0;t=Math.abs(t),e=Math.abs(e);let c=0,f=0,m=0,g=0;typeof i=="number"?c=f=m=g=Math.min(i,t/2,e/2):(c=Math.min(i[0]||0,t/2,e/2),f=Math.min(i[1]||0,t/2,e/2),g=Math.min(i[2]||0,t/2,e/2),m=Math.min(i[3]||0,t/2,e/2)),n.moveTo(s+c,l),n.lineTo(s+t-f,l),n.arc(s+t-f,l+f,f,Math.PI*3/2,0,!1),n.lineTo(s+t,l+e-g),n.arc(s+t-g,l+e-g,g,0,Math.PI/2,!1),n.lineTo(s+m,l+e),n.arc(s+m,l+e-m,m,Math.PI/2,Math.PI,!1),n.lineTo(s,l+c),n.arc(s+c,l+c,c,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(n,t,e,i,s){i=Math.abs(i);for(let l=0;l<e;l++){const c=t[(l-1+e)%e],f=t[l],m=t[(l+1)%e],g={x:f.x-c.x,y:f.y-c.y},A={x:m.x-f.x,y:m.y-f.y},S=Math.hypot(g.x,g.y),T=Math.hypot(A.x,A.y);let x;typeof s=="number"?x=s:x=l<s.length?s[l]:0,x=i*Math.cos(Math.PI/e)*Math.min(1,x/i*2);const L={x:g.x/S,y:g.y/S},V={x:A.x/T,y:A.y/T},G={x:f.x-L.x*x,y:f.y-L.y*x},B={x:f.x+V.x*x,y:f.y+V.y*x};l===0?n.moveTo(G.x,G.y):n.lineTo(G.x,G.y),n.arcTo(f.x,f.y,B.x,B.y,x)}}};function LU(n){const t=[],e=n.length,i=it;for(let s=0;s<e;s++){let l=n[s];i._isNumber(l)?l=Math.round(l*1e3)/1e3:i._isString(l)||(l=l+""),t.push(l)}return t}const hb=",",VU="(",kU=")",PU="([",UU="])",zU=";",BU="()",jU="=",fb=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],GU=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],HU=100;let my=null;function db(){if(my!==null)return my;try{const t=it.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(my=!1,!1)}catch{return my=!1,!1}}class cv{constructor(t){this.canvas=t,Vt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){let i=this.traceArr,s=i.length,l="",c,f,m,g;for(c=0;c<s;c++)f=i[c],m=f.method,m?(g=f.args,l+=m,t?l+=BU:it._isArray(g[0])?l+=PU+g.join(hb)+UU:(e&&(g=g.map(A=>typeof A=="number"?Math.floor(A):A)),l+=VU+g.join(hb)+kU)):(l+=f.property,t||(l+=jU+f.val)),l+=zU;return l}clearTrace(){this.traceArr=[]}_trace(t){let e=this.traceArr,i;e.push(t),i=e.length,i>=HU&&e.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){const e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}_applyOpacity(t){const e=t.getAbsoluteOpacity();e!==1&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){const e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}_applyMiterLimit(t){const e=t.attrs.miterLimit;e!=null&&this.setAttr("miterLimit",e)}setAttr(t,e){this._context[t]=e}arc(t,e,i,s,l,c){this._context.arc(t,e,i,s,l,c)}arcTo(t,e,i,s,l){this._context.arcTo(t,e,i,s,l)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,i,s,l,c){this._context.bezierCurveTo(t,e,i,s,l,c)}clearRect(t,e,i,s){this._context.clearRect(t,e,i,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,e){const i=arguments;if(i.length===2)return this._context.createImageData(t,e);if(i.length===1)return this._context.createImageData(t)}createLinearGradient(t,e,i,s){return this._context.createLinearGradient(t,e,i,s)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,i,s,l,c){return this._context.createRadialGradient(t,e,i,s,l,c)}drawImage(t,e,i,s,l,c,f,m,g){const A=arguments,S=this._context;A.length===3?S.drawImage(t,e,i):A.length===5?S.drawImage(t,e,i,s,l):A.length===9&&S.drawImage(t,e,i,s,l,c,f,m,g)}ellipse(t,e,i,s,l,c,f,m){this._context.ellipse(t,e,i,s,l,c,f,m)}isPointInPath(t,e,i,s){return i?this._context.isPointInPath(i,t,e,s):this._context.isPointInPath(t,e,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,e,i,s){this._context.fillRect(t,e,i,s)}strokeRect(t,e,i,s){this._context.strokeRect(t,e,i,s)}fillText(t,e,i,s){s?this._context.fillText(t,e,i,s):this._context.fillText(t,e,i)}measureText(t){return this._context.measureText(t)}getImageData(t,e,i,s){return this._context.getImageData(t,e,i,s)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,i,s){this._context.rect(t,e,i,s)}roundRect(t,e,i,s,l){this._context.roundRect(t,e,i,s,l)}putImageData(t,e,i){this._context.putImageData(t,e,i)}quadraticCurveTo(t,e,i,s){this._context.quadraticCurveTo(t,e,i,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,i,s,l,c){this._context.setTransform(t,e,i,s,l,c)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,i,s){this._context.strokeText(t,e,i,s)}transform(t,e,i,s,l,c){this._context.transform(t,e,i,s,l,c)}translate(t,e){this._context.translate(t,e)}_enableTrace(){let t=this,e=fb.length,i=this.setAttr,s,l;const c=function(f){let m=t[f],g;t[f]=function(){return l=LU(Array.prototype.slice.call(arguments,0)),g=m.apply(t,arguments),t._trace({method:f,args:l}),g}};for(s=0;s<e;s++)c(fb[s]);t.setAttr=function(){i.apply(t,arguments);const f=arguments[0];let m=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(m=m/this.canvas.getPixelRatio()),t._trace({property:f,val:m})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;!e||e==="source-over"||this.setAttr("globalCompositeOperation",e)}}GU.forEach(function(n){Object.defineProperty(cv.prototype,n,{get(){return this._context[n]},set(t){this._context[n]=t}})});class qU extends cv{constructor(t,{willReadFrequently:e=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(t){const e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){const e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){const e=t.fill(),i=t.getFillPriority();if(e&&i==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&i==="pattern"){this._fillPattern(t);return}const l=t.getFillLinearGradientColorStops();if(l&&i==="linear-gradient"){this._fillLinearGradient(t);return}const c=t.getFillRadialGradientColorStops();if(c&&i==="radial-gradient"){this._fillRadialGradient(t);return}e?this._fillColor(t):s?this._fillPattern(t):l?this._fillLinearGradient(t):c&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const e=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),l=this.createLinearGradient(e.x,e.y,i.x,i.y);if(s){for(let c=0;c<s.length;c+=2)l.addColorStop(s[c],s[c+1]);this.setAttr("strokeStyle",l)}}_stroke(t){const e=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();const l=this.getCanvas().getPixelRatio();this.setTransform(l,0,0,l,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var e,i,s;const l=(e=t.getShadowRGBA())!==null&&e!==void 0?e:"black",c=(i=t.getShadowBlur())!==null&&i!==void 0?i:5,f=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},m=t.getAbsoluteScale(),g=this.canvas.getPixelRatio(),A=m.x*g,S=m.y*g;this.setAttr("shadowColor",l),this.setAttr("shadowBlur",c*Math.min(Math.abs(A),Math.abs(S))),this.setAttr("shadowOffsetX",f.x*A),this.setAttr("shadowOffsetY",f.y*S)}}class FU extends cv{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const e=t.getStrokeScaleEnabled();if(!e){this.save();const l=this.getCanvas().getPixelRatio();this.setTransform(l,0,0,l,0,0)}this._applyLineCap(t);const i=t.hitStrokeWidth(),s=i==="auto"?t.strokeWidth():i;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}let py;function YU(){if(py)return py;const n=it.createCanvasElement(),t=n.getContext("2d");return py=(function(){const e=Vt._global.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return e/i})(),it.releaseCanvas(n),py}class PS{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(t||{}).pixelRatio||Vt.pixelRatio||YU();this.pixelRatio=i,this._canvas=it.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch{try{return this._canvas.toDataURL()}catch(s){return it.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Yc extends PS{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new qU(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}class US extends PS{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new FU(this),this.setSize(t.width,t.height)}}const $e={get isDragging(){let n=!1;return $e._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return $e._dragElements.forEach(t=>{n=t.node}),n},_dragElements:new Map,_drag(n){const t=[];$e._dragElements.forEach((e,i)=>{const{node:s}=e,l=s.getStage();l.setPointersPositions(n),e.pointerId===void 0&&(e.pointerId=it._getFirstPointerId(n));const c=l._changedPointerPositions.find(f=>f.id===e.pointerId);if(c){if(e.dragStatus!=="dragging"){const f=s.dragDistance();if(Math.max(Math.abs(c.x-e.startPointerPos.x),Math.abs(c.y-e.startPointerPos.y))<f||(s.startDrag({evt:n}),!s.isDragging()))return}s._setDragPosition(n,e),t.push(s)}}),t.forEach(e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:n},!0)})},_endDragBefore(n){const t=[];$e._dragElements.forEach(e=>{const{node:i}=e,s=i.getStage();if(n&&s.setPointersPositions(n),!s._changedPointerPositions.find(f=>f.id===e.pointerId))return;(e.dragStatus==="dragging"||e.dragStatus==="stopped")&&($e.justDragged=!0,Vt._mouseListenClick=!1,Vt._touchListenClick=!1,Vt._pointerListenClick=!1,e.dragStatus="stopped");const c=e.node.getLayer()||e.node instanceof Vt.Stage&&e.node;c&&t.indexOf(c)===-1&&t.push(c)}),t.forEach(e=>{e.draw()})},_endDragAfter(n){$e._dragElements.forEach((t,e)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:n},!0),t.dragStatus!=="dragging"&&$e._dragElements.delete(e)})}};Vt.isBrowser&&(window.addEventListener("mouseup",$e._endDragBefore,!0),window.addEventListener("touchend",$e._endDragBefore,!0),window.addEventListener("touchcancel",$e._endDragBefore,!0),window.addEventListener("mousemove",$e._drag),window.addEventListener("touchmove",$e._drag),window.addEventListener("mouseup",$e._endDragAfter,!1),window.addEventListener("touchend",$e._endDragAfter,!1),window.addEventListener("touchcancel",$e._endDragAfter,!1));function yh(n){return it._isString(n)?'"'+n+'"':Object.prototype.toString.call(n)==="[object Number]"||it._isBoolean(n)?n:Object.prototype.toString.call(n)}function s8(n){return n>255?255:n<0?0:Math.round(n)}function Ot(){if(Vt.isUnminified)return function(n,t){return it._isNumber(n)||it.warn(yh(n)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),n}}function hv(n){if(Vt.isUnminified)return function(t,e){let i=it._isNumber(t),s=it._isArray(t)&&t.length==n;return!i&&!s&&it.warn(yh(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or Array<number>('+n+")"),t}}function zS(){if(Vt.isUnminified)return function(n,t){return it._isNumber(n)||n==="auto"||it.warn(yh(n)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),n}}function Ff(){if(Vt.isUnminified)return function(n,t){return it._isString(n)||it.warn(yh(n)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),n}}function a8(){if(Vt.isUnminified)return function(n,t){const e=it._isString(n),i=Object.prototype.toString.call(n)==="[object CanvasGradient]"||n&&n.addColorStop;return e||i||it.warn(yh(n)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),n}}function QU(){if(Vt.isUnminified)return function(n,t){const e=Int8Array?Object.getPrototypeOf(Int8Array):null;return e&&n instanceof e||(it._isArray(n)?n.forEach(function(i){it._isNumber(i)||it.warn('"'+t+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):it.warn(yh(n)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),n}}function Hl(){if(Vt.isUnminified)return function(n,t){return n===!0||n===!1||it.warn(yh(n)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),n}}function XU(n){if(Vt.isUnminified)return function(t,e){return t==null||it.isObject(t)||it.warn(yh(t)+' is a not valid value for "'+e+'" attribute. The value should be an object with properties '+n),t}}const fg="get",dg="set",F={addGetterSetter(n,t,e,i,s){F.addGetter(n,t,e),F.addSetter(n,t,i,s),F.addOverloadedGetterSetter(n,t)},addGetter(n,t,e){const i=fg+it._capitalize(t);n.prototype[i]=n.prototype[i]||function(){const s=this.attrs[t];return s===void 0?e:s}},addSetter(n,t,e,i){const s=dg+it._capitalize(t);n.prototype[s]||F.overWriteSetter(n,t,e,i)},overWriteSetter(n,t,e,i){const s=dg+it._capitalize(t);n.prototype[s]=function(l){return e&&l!==void 0&&l!==null&&(l=e.call(this,l,t)),this._setAttr(t,l),i&&i.call(this),this}},addComponentsGetterSetter(n,t,e,i,s){const l=e.length,c=it._capitalize,f=fg+c(t),m=dg+c(t);n.prototype[f]=function(){const A={};for(let S=0;S<l;S++){const T=e[S];A[T]=this.getAttr(t+c(T))}return A};const g=XU(e);n.prototype[m]=function(A){const S=this.attrs[t];i&&(A=i.call(this,A,t)),g&&g.call(this,A,t);for(const T in A)A.hasOwnProperty(T)&&this._setAttr(t+c(T),A[T]);return A||e.forEach(T=>{this._setAttr(t+c(T),void 0)}),this._fireChangeEvent(t,S,A),s&&s.call(this),this},F.addOverloadedGetterSetter(n,t)},addOverloadedGetterSetter(n,t){const e=it._capitalize(t),i=dg+e,s=fg+e;n.prototype[t]=function(){return arguments.length?(this[i](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(n,t,e,i){it.error("Adding deprecated "+t);const s=fg+it._capitalize(t),l=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[s]=function(){it.error(l);const c=this.attrs[t];return c===void 0?e:c},F.addSetter(n,t,i,function(){it.error(l)}),F.addOverloadedGetterSetter(n,t)},backCompat(n,t){it.each(t,function(e,i){const s=n.prototype[i],l=fg+it._capitalize(e),c=dg+it._capitalize(e);function f(){s.apply(this,arguments),it.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}n.prototype[e]=f,n.prototype[l]=f,n.prototype[c]=f})},afterSetFilter(){this._filterUpToDate=!1}};function KU(n){const t=/(\w+)\(([^)]+)\)/g;let e;for(;(e=t.exec(n))!==null;){const[,i,s]=e;switch(i){case"blur":{const l=parseFloat(s.replace("px",""));return function(c){this.blurRadius(l*.5);const f=Vt.Filters;f&&f.Blur&&f.Blur.call(this,c)}}case"brightness":{const l=s.includes("%")?parseFloat(s)/100:parseFloat(s);return function(c){this.brightness(l);const f=Vt.Filters;f&&f.Brightness&&f.Brightness.call(this,c)}}case"contrast":{const l=parseFloat(s);return function(c){const f=100*(Math.sqrt(l)-1);this.contrast(f);const m=Vt.Filters;m&&m.Contrast&&m.Contrast.call(this,c)}}case"grayscale":return function(l){const c=Vt.Filters;c&&c.Grayscale&&c.Grayscale.call(this,l)};case"sepia":return function(l){const c=Vt.Filters;c&&c.Sepia&&c.Sepia.call(this,l)};case"invert":return function(l){const c=Vt.Filters;c&&c.Invert&&c.Invert.call(this,l)};default:it.warn(`CSS filter "${i}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const Vy="absoluteOpacity",mb="allEventListeners",Eu="absoluteTransform",pb="absoluteScale",vf="canvas",WU="Change",JU="children",ZU="konva",OA="listening",$U="mouseenter",tz="mouseleave",ez="pointerenter",nz="pointerleave",iz="touchenter",sz="touchleave",gb="set",_b="Shape",ky=" ",yb="stage",Bc="transform",az="Stage",MA="visible",rz=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(ky);let lz=1;class Dt{constructor(t){this._id=lz++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Bc||t===Eu)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,e){let i=this._cache.get(t);return(i===void 0||(t===Bc||t===Eu)&&i.dirty===!0)&&(i=e.call(this),this._cache.set(t,i)),i}_calculate(t,e,i){if(!this._attachedDepsListeners.get(t)){const s=e.map(l=>l+"Change.konva").join(ky);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(vf)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Eu&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(vf)){const{scene:t,filter:e,hit:i}=this._cache.get(vf);it.releaseCanvas(t._canvas,e._canvas,i._canvas),this._cache.delete(vf)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const e=t||{};let i={};(e.x===void 0||e.y===void 0||e.width===void 0||e.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(e.width||i.width),l=Math.ceil(e.height||i.height),c=e.pixelRatio,f=e.x===void 0?Math.floor(i.x):e.x,m=e.y===void 0?Math.floor(i.y):e.y,g=e.offset||0,A=e.drawBorder||!1,S=e.hitCanvasPixelRatio||1;if(!s||!l){it.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const T=Math.abs(Math.round(i.x)-f)>.5?1:0,x=Math.abs(Math.round(i.y)-m)>.5?1:0;s+=g*2+T,l+=g*2+x,f-=g,m-=g;const w=new Yc({pixelRatio:c,width:s,height:l}),L=new Yc({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),V=new US({pixelRatio:S,width:s,height:l}),G=w.getContext(),B=V.getContext(),Y=new Yc({width:w.width/w.pixelRatio+Math.abs(f),height:w.height/w.pixelRatio+Math.abs(m),pixelRatio:w.pixelRatio}),et=Y.getContext();return V.isCache=!0,w.isCache=!0,this._cache.delete(vf),this._filterUpToDate=!1,e.imageSmoothingEnabled===!1&&(w.getContext()._context.imageSmoothingEnabled=!1,L.getContext()._context.imageSmoothingEnabled=!1),G.save(),B.save(),et.save(),G.translate(-f,-m),B.translate(-f,-m),et.translate(-f,-m),Y.x=f,Y.y=m,this._isUnderCache=!0,this._clearSelfAndDescendantCache(Vy),this._clearSelfAndDescendantCache(pb),this.drawScene(w,this,Y),this.drawHit(V,this),this._isUnderCache=!1,G.restore(),B.restore(),A&&(G.save(),G.beginPath(),G.rect(0,0,s,l),G.closePath(),G.setAttr("strokeStyle","red"),G.setAttr("lineWidth",5),G.stroke(),G.restore()),it.releaseCanvas(Y._canvas),this._cache.set(vf,{scene:w,filter:L,hit:V,x:f,y:m}),this._requestDraw(),this}isCached(){return this._cache.has(vf)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let s=1/0,l=1/0,c=-1/0,f=-1/0;const m=this.getAbsoluteTransform(e);return i.forEach(function(g){const A=m.point(g);s===void 0&&(s=c=A.x,l=f=A.y),s=Math.min(s,A.x),l=Math.min(l,A.y),c=Math.max(c,A.x),f=Math.max(f,A.y)}),{x:s,y:l,width:c-s,height:f-l}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);const i=this._getCachedSceneCanvas(),s=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/s,i.height/s),t.restore()}_drawCachedHitCanvas(t){const e=this._getCanvasCache(),i=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),e=this._getCanvasCache(),i=e.scene,s=e.filter,l=s.getContext(),c,f,m,g;if(!t||t.length===0)return i;if(this._filterUpToDate)return s;let A=!0;for(let T=0;T<t.length;T++)if(typeof t[T]=="string"&&db(),typeof t[T]!="string"||!db()){A=!1;break}const S=i.pixelRatio;if(s.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),A){const T=t.join(" ");return l.save(),l.setAttr("filter",T),l.drawImage(i._canvas,0,0,i.getWidth()/S,i.getHeight()/S),l.restore(),this._filterUpToDate=!0,s}try{for(c=t.length,l.clear(),l.drawImage(i._canvas,0,0,i.getWidth()/S,i.getHeight()/S),f=l.getImageData(0,0,s.getWidth(),s.getHeight()),m=0;m<c;m++)g=t[m],typeof g=="string"&&(g=KU(g)),g.call(this,f),l.putImageData(f,0,0)}catch(T){it.error("Unable to apply filter. "+T.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,s}on(t,e){if(this._cache&&this._cache.delete(mb),arguments.length===3)return this._delegate.apply(this,arguments);const i=t.split(ky);for(let s=0;s<i.length;s++){const c=i[s].split("."),f=c[0],m=c[1]||"";this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:m,handler:e})}return this}off(t,e){let i=(t||"").split(ky),s=i.length,l,c,f,m,g,A;if(this._cache&&this._cache.delete(mb),!t)for(c in this.eventListeners)this._off(c);for(l=0;l<s;l++)if(f=i[l],m=f.split("."),g=m[0],A=m[1],g)this.eventListeners[g]&&this._off(g,A,e);else for(c in this.eventListeners)this._off(c,A,e);return this}dispatchEvent(t){const e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,function(i){e.call(this,i.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,i){const s=this;this.on(t,function(l){const c=l.target.findAncestors(e,!0,s);for(let f=0;f<c.length;f++)l=it.cloneObject(l),l.currentTarget=c[f],i.call(c[f],l)})}remove(){return this.isDragging()&&this.stopDrag(),$e._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Eu),this._clearSelfAndDescendantCache(Vy),this._clearSelfAndDescendantCache(pb),this._clearSelfAndDescendantCache(yb),this._clearSelfAndDescendantCache(MA),this._clearSelfAndDescendantCache(OA)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const e="get"+it._capitalize(t);return it._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){let t=this.getParent(),e=[];for(;t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let e,i;if(!t)return this;for(e in t)e!==JU&&(i=gb+it._capitalize(e),it._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]))}),this}isListening(){return this._getCache(OA,this._isListening)}_isListening(t){if(!this.listening())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isListening(t):!0}isVisible(){return this._getCache(MA,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isVisible(t):!0}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);const i=this.getLayer();let s=!1;$e._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===i)&&(s=!0)});const l=!e&&!Vt.hitOnDragEnabled&&(s||Vt.isTransforming());return this.isListening()&&this.isVisible()&&!l}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),e=this,i=0,s,l,c,f;function m(A){for(s=[],l=A.length,c=0;c<l;c++)f=A[c],i++,f.nodeType!==_b&&(s=s.concat(f.getChildren().slice())),f._id===e._id&&(c=l);s.length>0&&s[0].getDepth()<=t&&m(s)}const g=this.getStage();return e.nodeType!==az&&g&&m(g.getChildren()),i}getDepth(){let t=0,e=this.parent;for(;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Bc),this._clearSelfAndDescendantCache(Eu)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const e=t.getPointerPosition();if(!e)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(t){let e=!1,i=this.parent;for(;i;){if(i.isCached()){e=!0;break}i=i.parent}e&&!t&&(t=!0);const s=this.getAbsoluteTransform(t).getMatrix(),l=new cr,c=this.offset();return l.m=s.slice(),l.translate(c.x,c.y),l.getTranslation()}setAbsolutePosition(t){const{x:e,y:i,...s}=this._clearTransform();this.attrs.x=e,this.attrs.y=i,this._clearCache(Bc);const l=this._getAbsoluteTransform().copy();return l.invert(),l.translate(t.x,t.y),t={x:this.attrs.x+l.getTranslation().x,y:this.attrs.y+l.getTranslation().y},this._setTransform(s),this.setPosition({x:t.x,y:t.y}),this._clearCache(Bc),this._clearSelfAndDescendantCache(Eu),this}_setTransform(t){let e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let e=t.x,i=t.y,s=this.x(),l=this.y();return e!==void 0&&(s+=e),i!==void 0&&(l+=i),this.setPosition({x:s,y:l}),this}_eachAncestorReverse(t,e){let i=[],s=this.getParent(),l,c;if(!(e&&e._id===this._id)){for(i.unshift(this);s&&(!e||s._id!==e._id);)i.unshift(s),s=s.parent;for(l=i.length,c=0;c<l;c++)t(i[c])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return it.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return it.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return it.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return it.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return it.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&it.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Vy,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),e,i,s,l,c;const f={attrs:{},className:this.getClassName()};for(e in t)i=t[e],c=it.isObject(i)&&!it._isPlainObject(i)&&!it._isArray(i),!c&&(s=typeof this[e]=="function"&&this[e],delete t[e],l=s?s.call(this):null,t[e]=i,l!==i&&(f.attrs[e]=i));return it._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,i){const s=[];e&&this._isMatch(t)&&s.push(this);let l=this.parent;for(;l;){if(l===i)return s;l._isMatch(t)&&s.push(l),l=l.parent}return s}isAncestorOf(t){return!1}findAncestor(t,e,i){return this.findAncestors(t,e,i)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let e=t.replace(/ /g,"").split(","),i=e.length,s,l;for(s=0;s<i;s++)if(l=e[s],it.isValidSelector(l)||(it.warn('Selector "'+l+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),it.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),it.warn("Konva is awesome, right?")),l.charAt(0)==="#"){if(this.id()===l.slice(1))return!0}else if(l.charAt(0)==="."){if(this.hasName(l.slice(1)))return!0}else if(this.className===l||this.nodeType===l)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(yb,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,e={},i){return e.target=e.target||this,i?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Eu,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let e;if(t)return e=new cr,this._eachAncestorReverse(function(i){const s=i.transformsEnabled();s==="all"?e.multiply(i.getTransform()):s==="position"&&e.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},t),e;{e=this._cache.get(Eu)||new cr,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();const i=this.transformsEnabled();if(i==="all")e.multiply(this.getTransform());else if(i==="position"){const s=this.attrs.x||0,l=this.attrs.y||0,c=this.attrs.offsetX||0,f=this.attrs.offsetY||0;e.translate(s-c,l-f)}return e.dirty=!1,e}}getAbsoluteScale(t){let e=this;for(;e;)e._isUnderCache&&(t=e),e=e.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Bc,this._getTransform)}_getTransform(){var t,e;const i=this._cache.get(Bc)||new cr;i.reset();const s=this.x(),l=this.y(),c=Vt.getAngle(this.rotation()),f=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,m=(e=this.attrs.scaleY)!==null&&e!==void 0?e:1,g=this.attrs.skewX||0,A=this.attrs.skewY||0,S=this.attrs.offsetX||0,T=this.attrs.offsetY||0;return(s!==0||l!==0)&&i.translate(s,l),c!==0&&i.rotate(c),(g!==0||A!==0)&&i.skew(g,A),(f!==1||m!==1)&&i.scale(f,m),(S!==0||T!==0)&&i.translate(-1*S,-1*T),i.dirty=!1,i}clone(t){let e=it.cloneObject(this.attrs),i,s,l,c,f;for(i in t)e[i]=t[i];const m=new this.constructor(e);for(i in this.eventListeners)for(s=this.eventListeners[i],l=s.length,c=0;c<l;c++)f=s[c],f.name.indexOf(ZU)<0&&(m.eventListeners[i]||(m.eventListeners[i]=[]),m.eventListeners[i].push(f));return m}_toKonvaCanvas(t){t=t||{};const e=this.getClientRect(),i=this.getStage(),s=t.x!==void 0?t.x:Math.floor(e.x),l=t.y!==void 0?t.y:Math.floor(e.y),c=t.pixelRatio||1,f=new Yc({width:t.width||Math.ceil(e.width)||(i?i.width():0),height:t.height||Math.ceil(e.height)||(i?i.height():0),pixelRatio:c}),m=f.getContext(),g=new Yc({width:f.width/f.pixelRatio+Math.abs(s),height:f.height/f.pixelRatio+Math.abs(l),pixelRatio:f.pixelRatio});return t.imageSmoothingEnabled===!1&&(m._context.imageSmoothingEnabled=!1),m.save(),(s||l)&&m.translate(-1*s,-1*l),this.drawScene(f,void 0,g),m.restore(),f}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const e=t.mimeType||null,i=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(e,i);return t.callback&&t.callback(s),s}toImage(t){return new Promise((e,i)=>{try{const s=t?.callback;s&&delete t.callback,it._urlToImage(this.toDataURL(t),function(l){e(l),s?.(l)})}catch(s){i(s)}})}toBlob(t){return new Promise((e,i)=>{try{const s=t?.callback;s&&delete t.callback,this.toCanvas(t).toBlob(l=>{e(l),s?.(l)},t?.mimeType,t?.quality)}catch(s){i(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Vt.dragDistance}_off(t,e,i){let s=this.eventListeners[t],l,c,f;for(l=0;l<s.length;l++)if(c=s[l].name,f=s[l].handler,(c!=="konva"||e==="konva")&&(!e||c===e)&&(!i||i===f)){if(s.splice(l,1),s.length===0){delete this.eventListeners[t];break}l--}}_fireChangeEvent(t,e,i){this._fire(t+WU,{oldVal:e,newVal:i})}addName(t){if(!this.hasName(t)){const e=this.name(),i=e?e+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const e=this.name();return e?(e||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const e=(this.name()||"").split(/\s/g),i=e.indexOf(t);return i!==-1&&(e.splice(i,1),this.name(e.join(" "))),this}setAttr(t,e){const i=this[gb+it._capitalize(t)];return it._isFunction(i)?i.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(Vt.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,e){const i=this.attrs[t];i===e&&!it.isObject(e)||(e==null?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e),this._requestDraw())}_setComponentAttr(t,e,i){let s;i!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,s,i))}_fireAndBubble(t,e,i){e&&this.nodeType===_b&&(e.target=this);const s=[$U,tz,ez,nz,iz,sz];if(!(s.indexOf(t)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(t,e);const c=s.indexOf(t)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!c&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){var e,i;const{nodeType:s}=this,l=Dt.protoListenerMap.get(s)||{};let c=l?.[t];if(c===void 0){c=[];let f=Object.getPrototypeOf(this);for(;f;){const m=(i=(e=f.eventListeners)===null||e===void 0?void 0:e[t])!==null&&i!==void 0?i:[];c.push(...m),f=Object.getPrototypeOf(f)}l[t]=c,Dt.protoListenerMap.set(s,l)}return c}_fire(t,e){e=e||{},e.currentTarget=this,e.type=t;const i=this._getProtoListeners(t);if(i)for(let l=0;l<i.length;l++)i[l].handler.call(this,e);const s=this.eventListeners[t];if(s)for(let l=0;l<s.length;l++)s[l].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const e=t?t.pointerId:void 0,i=this.getStage(),s=this.getAbsolutePosition();if(!i)return;const l=i._getPointerById(e)||i._changedPointerPositions[0]||s;$e._dragElements.set(this._id,{node:this,startPointerPos:l,offset:{x:l.x-s.x,y:l.y-s.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){$e._dragElements.has(this._id)||this._createDragElement(t);const i=$e._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const i=this.getStage()._getPointerById(e.pointerId);if(!i)return;let s={x:i.x-e.offset.x,y:i.y-e.offset.y};const l=this.dragBoundFunc();if(l!==void 0){const c=l.call(this,s,t);c?s=c:it.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(t){const e=$e._dragElements.get(this._id);e&&(e.dragStatus="stopped"),$e._endDragBefore(t),$e._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=$e._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||Vt.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let s=!1;$e._dragElements.forEach(l=>{this.isAncestorOf(l.node)&&(s=!0)}),s||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const e=$e._dragElements.get(this._id),i=e&&e.dragStatus==="dragging",s=e&&e.dragStatus==="ready";i?this.stopDrag():s&&$e._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const i={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return it.haveIntersection(i,this.getClientRect())}static create(t,e){return it._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){let i=Dt.prototype.getClassName.call(t),s=t.children,l,c,f;e&&(t.attrs.container=e),Vt[i]||(it.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const m=Vt[i];if(l=new m(t.attrs),s)for(c=s.length,f=0;f<c;f++)l.add(Dt._createNode(s[f]));return l}}Dt.protoListenerMap=new Map;Dt.prototype.nodeType="Node";Dt.prototype._attrsAffectingSize=[];Dt.prototype.eventListeners={};Dt.prototype.on.call(Dt.prototype,rz,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Bc),this._clearSelfAndDescendantCache(Eu)});Dt.prototype.on.call(Dt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(MA)});Dt.prototype.on.call(Dt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(OA)});Dt.prototype.on.call(Dt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Vy)});const An=F.addGetterSetter;An(Dt,"zIndex");An(Dt,"absolutePosition");An(Dt,"position");An(Dt,"x",0,Ot());An(Dt,"y",0,Ot());An(Dt,"globalCompositeOperation","source-over",Ff());An(Dt,"opacity",1,Ot());An(Dt,"name","",Ff());An(Dt,"id","",Ff());An(Dt,"rotation",0,Ot());F.addComponentsGetterSetter(Dt,"scale",["x","y"]);An(Dt,"scaleX",1,Ot());An(Dt,"scaleY",1,Ot());F.addComponentsGetterSetter(Dt,"skew",["x","y"]);An(Dt,"skewX",0,Ot());An(Dt,"skewY",0,Ot());F.addComponentsGetterSetter(Dt,"offset",["x","y"]);An(Dt,"offsetX",0,Ot());An(Dt,"offsetY",0,Ot());An(Dt,"dragDistance",void 0,Ot());An(Dt,"width",0,Ot());An(Dt,"height",0,Ot());An(Dt,"listening",!0,Hl());An(Dt,"preventDefault",!0,Hl());An(Dt,"filters",void 0,function(n){return this._filterUpToDate=!1,n});An(Dt,"visible",!0,Hl());An(Dt,"transformsEnabled","all",Ff());An(Dt,"size");An(Dt,"dragBoundFunc");An(Dt,"draggable",!1,Hl());F.backCompat(Dt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class fr extends Dt{constructor(){super(...arguments),this.children=[]}getChildren(t){const e=this.children||[];return t?e.filter(t):e}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let i=0;i<t.length;i++)this.add(t[i]);return this}const e=t[0];return e.getParent()?(e.moveTo(this),this):(this._validateAdd(e),e.index=this.getChildren().length,e.parent=this,e._clearCaches(),this.getChildren().push(e),this._fire("add",{child:e}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){const i=[];return this._descendants(s=>{const l=s._isMatch(t);return l&&i.push(s),!!(l&&e)}),i}_descendants(t){let e=!1;const i=this.getChildren();for(const s of i){if(e=t(s),e)return!0;if(s.hasChildren()&&(e=s._descendants(t),e))return!0}return!1}toObject(){const t=Dt.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(e=>{t.children.push(e.toObject())}),t}isAncestorOf(t){let e=t.getParent();for(;e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){const e=Dt.prototype.clone.call(this,t);return this.getChildren().forEach(function(i){e.add(i.clone())}),e}getAllIntersections(t){const e=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(t)&&e.push(i)}),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),!this.isCached()&&((e=this.children)===null||e===void 0||e.forEach(function(i){i._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(e,i){e.index=i}),this._requestDraw()}drawScene(t,e,i){const s=this.getLayer(),l=t||s&&s.getCanvas(),c=l&&l.getContext(),f=this._getCanvasCache(),m=f&&f.scene,g=l&&l.isCache;if(!this.isVisible()&&!g)return this;if(m){c.save();const A=this.getAbsoluteTransform(e).getMatrix();c.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,e,i);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;const i=this.getLayer(),s=t||i&&i.hitCanvas,l=s&&s.getContext(),c=this._getCanvasCache();if(c&&c.hit){l.save();const m=this.getAbsoluteTransform(e).getMatrix();l.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",s,e);return this}_drawChildren(t,e,i,s){var l;const c=e&&e.getContext(),f=this.clipWidth(),m=this.clipHeight(),g=this.clipFunc(),A=typeof f=="number"&&typeof m=="number"||g,S=i===this;if(A){c.save();const x=this.getAbsoluteTransform(i);let w=x.getMatrix();c.transform(w[0],w[1],w[2],w[3],w[4],w[5]),c.beginPath();let L;if(g)L=g.call(this,c,this);else{const V=this.clipX(),G=this.clipY();c.rect(V||0,G||0,f,m)}c.clip.apply(c,L),w=x.copy().invert().getMatrix(),c.transform(w[0],w[1],w[2],w[3],w[4],w[5])}const T=!S&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";T&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(x){x[t](e,i,s)}),T&&c.restore(),A&&c.restore()}getClientRect(t={}){var e;const i=t.skipTransform,s=t.relativeTo;let l,c,f,m,g={x:1/0,y:1/0,width:0,height:0};const A=this;(e=this.children)===null||e===void 0||e.forEach(function(x){if(!x.visible())return;const w=x.getClientRect({relativeTo:A,skipShadow:t.skipShadow,skipStroke:t.skipStroke});w.width===0&&w.height===0||(l===void 0?(l=w.x,c=w.y,f=w.x+w.width,m=w.y+w.height):(l=Math.min(l,w.x),c=Math.min(c,w.y),f=Math.max(f,w.x+w.width),m=Math.max(m,w.y+w.height)))});const S=this.find("Shape");let T=!1;for(let x=0;x<S.length;x++)if(S[x]._isVisible(this)){T=!0;break}return T&&l!==void 0?g={x:l,y:c,width:f-l,height:m-c}:g={x:0,y:0,width:0,height:0},i?g:this._transformedRect(g,s)}}F.addComponentsGetterSetter(fr,"clip",["x","y","width","height"]);F.addGetterSetter(fr,"clipX",void 0,Ot());F.addGetterSetter(fr,"clipY",void 0,Ot());F.addGetterSetter(fr,"clipWidth",void 0,Ot());F.addGetterSetter(fr,"clipHeight",void 0,Ot());F.addGetterSetter(fr,"clipFunc");const c0=new Map,r8=Vt._global.PointerEvent!==void 0;function w2(n){return c0.get(n)}function BS(n){return{evt:n,pointerId:n.pointerId}}function l8(n,t){return c0.get(n)===t}function o8(n,t){Bg(n),t.getStage()&&(c0.set(n,t),r8&&t._fire("gotpointercapture",BS(new PointerEvent("gotpointercapture"))))}function Bg(n,t){const e=c0.get(n);if(!e)return;const i=e.getStage();i&&i.content,c0.delete(n),r8&&e._fire("lostpointercapture",BS(new PointerEvent("lostpointercapture")))}const oz="Stage",uz="string",vb="px",cz="mouseout",u8="mouseleave",c8="mouseover",h8="mouseenter",f8="mousemove",d8="mousedown",m8="mouseup",Tg="pointermove",bg="pointerdown",am="pointerup",Cg="pointercancel",hz="lostpointercapture",gy="pointerout",Rg="pointerleave",_y="pointerover",yy="pointerenter",LA="contextmenu",p8="touchstart",g8="touchend",_8="touchmove",y8="touchcancel",VA="wheel",fz=5,dz=[[h8,"_pointerenter"],[d8,"_pointerdown"],[f8,"_pointermove"],[m8,"_pointerup"],[u8,"_pointerleave"],[p8,"_pointerdown"],[_8,"_pointermove"],[g8,"_pointerup"],[y8,"_pointercancel"],[c8,"_pointerover"],[VA,"_wheel"],[LA,"_contextmenu"],[bg,"_pointerdown"],[Tg,"_pointermove"],[am,"_pointerup"],[Cg,"_pointercancel"],[Rg,"_pointerleave"],[hz,"_lostpointercapture"]],x2={mouse:{[gy]:cz,[Rg]:u8,[_y]:c8,[yy]:h8,[Tg]:f8,[bg]:d8,[am]:m8,[Cg]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[gy]:"touchout",[Rg]:"touchleave",[_y]:"touchover",[yy]:"touchenter",[Tg]:_8,[bg]:p8,[am]:g8,[Cg]:y8,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[gy]:gy,[Rg]:Rg,[_y]:_y,[yy]:yy,[Tg]:Tg,[bg]:bg,[am]:am,[Cg]:Cg,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},wg=n=>n.indexOf("pointer")>=0?"pointer":n.indexOf("touch")>=0?"touch":"mouse",Kd=n=>{const t=wg(n);if(t==="pointer")return Vt.pointerEventsEnabled&&x2.pointer;if(t==="touch")return x2.touch;if(t==="mouse")return x2.mouse};function Ab(n={}){return(n.clipFunc||n.clipWidth||n.clipHeight)&&it.warn("Stage does not support clipping. Please use clip for Layers or Groups."),n}const mz="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",jg=[];let fv=class extends fr{constructor(t){super(Ab(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),jg.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Ab(this.attrs)}),this._checkVisibility()}_validateAdd(t){const e=t.getType()==="Layer",i=t.getType()==="FastLayer";e||i||it.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===uz){let e;if(t.charAt(0)==="."){const i=t.slice(1);t=document.getElementsByClassName(i)[0]}else t.charAt(0)!=="#"?e=t:e=t.slice(1),t=document.getElementById(e);if(!t)throw"Can not find container in document with id "+e}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,e=t.length;for(let i=0;i<e;i++)t[i].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),fr.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&it._isInDocument(t)&&this.container().removeChild(t);const e=jg.indexOf(this);return e>-1&&jg.splice(e,1),it.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(it.warn(mz),null)}_getPointerById(t){return this._pointerPositions.find(e=>e.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const e=new Yc({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=e.getContext()._context,s=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),s.forEach(function(l){if(!l.isVisible())return;const c=l._toKonvaCanvas(t);i.drawImage(c._canvas,t.x,t.y,c.getWidth()/c.getPixelRatio(),c.getHeight()/c.getPixelRatio())}),e}getIntersection(t){if(!t)return null;const e=this.children,i=e.length,s=i-1;for(let l=s;l>=0;l--){const c=e[l].getIntersection(t);if(c)return c}return null}_resizeDOM(){const t=this.width(),e=this.height();this.content&&(this.content.style.width=t+vb,this.content.style.height=e+vb),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach(i=>{i.setSize({width:t,height:e}),i.draw()})}add(t,...e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}super.add(t);const i=this.children.length;return i>fz&&it.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),Vt.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return l8(t,this)}setPointerCapture(t){o8(t,this)}releaseCapture(t){Bg(t)}getLayers(){return this.children}_bindContentEvents(){Vt.isBrowser&&dz.forEach(([t,e])=>{this.content.addEventListener(t,i=>{this[e](i)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const e=Kd(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=Kd(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=Kd(t.type),i=wg(t.type);if(!e)return;this.setPointersPositions(t);const s=this._getTargetShape(i),l=!(Vt.isDragging()||Vt.isTransforming())||Vt.hitOnDragEnabled;s&&l?(s._fireAndBubble(e.pointerout,{evt:t}),s._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):l&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const e=Kd(t.type),i=wg(t.type);if(!e)return;this.setPointersPositions(t);let s=!1;this._changedPointerPositions.forEach(l=>{const c=this.getIntersection(l);if($e.justDragged=!1,Vt["_"+i+"ListenClick"]=!0,!c||!c.isListening()){this[i+"ClickStartShape"]=void 0;return}Vt.capturePointerEventsEnabled&&c.setPointerCapture(l.id),this[i+"ClickStartShape"]=c,c._fireAndBubble(e.pointerdown,{evt:t,pointerId:l.id}),s=!0;const f=t.type.indexOf("touch")>=0;c.preventDefault()&&t.cancelable&&f&&t.preventDefault()}),s||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const e=Kd(t.type),i=wg(t.type);if(!e)return;const s=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(Vt.isDragging()&&$e.node.preventDefault()&&t.cancelable&&s&&t.preventDefault(),this.setPointersPositions(t),!(!(Vt.isDragging()||Vt.isTransforming())||Vt.hitOnDragEnabled))return;const c={};let f=!1;const m=this._getTargetShape(i);this._changedPointerPositions.forEach(g=>{const A=w2(g.id)||this.getIntersection(g),S=g.id,T={evt:t,pointerId:S},x=m!==A;if(x&&m&&(m._fireAndBubble(e.pointerout,{...T},A),m._fireAndBubble(e.pointerleave,{...T},A)),A){if(c[A._id])return;c[A._id]=!0}A&&A.isListening()?(f=!0,x&&(A._fireAndBubble(e.pointerover,{...T},m),A._fireAndBubble(e.pointerenter,{...T},m),this[i+"targetShape"]=A),A._fireAndBubble(e.pointermove,{...T})):m&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:S}),this[i+"targetShape"]=null)}),f||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=Kd(t.type),i=wg(t.type);if(!e)return;this.setPointersPositions(t);const s=this[i+"ClickStartShape"],l=this[i+"ClickEndShape"],c={};let f=!1;this._changedPointerPositions.forEach(m=>{const g=w2(m.id)||this.getIntersection(m);if(g){if(g.releaseCapture(m.id),c[g._id])return;c[g._id]=!0}const A=m.id,S={evt:t,pointerId:A};let T=!1;Vt["_"+i+"InDblClickWindow"]?(T=!0,clearTimeout(this[i+"DblTimeout"])):$e.justDragged||(Vt["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){Vt["_"+i+"InDblClickWindow"]=!1},Vt.dblClickWindow),g&&g.isListening()?(f=!0,this[i+"ClickEndShape"]=g,g._fireAndBubble(e.pointerup,{...S}),Vt["_"+i+"ListenClick"]&&s&&s===g&&(g._fireAndBubble(e.pointerclick,{...S}),T&&l&&l===g&&g._fireAndBubble(e.pointerdblclick,{...S}))):(this[i+"ClickEndShape"]=null,f||(this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),f=!0),Vt["_"+i+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:A}),T&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:A}))}),f||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Vt["_"+i+"ListenClick"]=!1,t.cancelable&&i!=="touch"&&i!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(LA,{evt:t}):this._fire(LA,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(VA,{evt:t}):this._fire(VA,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=w2(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(am,BS(t)),Bg(t.pointerId)}_lostpointercapture(t){Bg(t.pointerId)}setPointersPositions(t){const e=this._getContentPosition();let i=null,s=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,l=>{this._pointerPositions.push({id:l.identifier,x:(l.clientX-e.left)/e.scaleX,y:(l.clientY-e.top)/e.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,l=>{this._changedPointerPositions.push({id:l.identifier,x:(l.clientX-e.left)/e.scaleX,y:(l.clientY-e.top)/e.scaleY})})):(i=(t.clientX-e.left)/e.scaleX,s=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:i,y:s},this._pointerPositions=[{x:i,y:s,id:it._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:s,id:it._getFirstPointerId(t)}])}_setPointerPosition(t){it.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Yc({width:this.width(),height:this.height()}),this.bufferHitCanvas=new US({pixelRatio:1,width:this.width(),height:this.height()}),!Vt.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return it.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}};fv.prototype.nodeType=oz;ei(fv);F.addGetterSetter(fv,"container");Vt.isBrowser&&document.addEventListener("visibilitychange",()=>{jg.forEach(n=>{n.batchDraw()})});const v8="hasShadow",A8="shadowRGBA",E8="patternImage",S8="linearGradient",T8="radialGradient";let vy;function N2(){return vy||(vy=it.createCanvasElement().getContext("2d"),vy)}const Gg={};function pz(n){const t=this.attrs.fillRule;t?n.fill(t):n.fill()}function gz(n){n.stroke()}function _z(n){const t=this.attrs.fillRule;t?n.fill(t):n.fill()}function yz(n){n.stroke()}function vz(){this._clearCache(v8)}function Az(){this._clearCache(A8)}function Ez(){this._clearCache(E8)}function Sz(){this._clearCache(S8)}function Tz(){this._clearCache(T8)}class xt extends Dt{constructor(t){super(t);let e,i=0;for(;e=it.getHitColor(),!(e&&!(e in Gg));)if(i++,i>=1e4){it.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),e=it.getRandomColor();break}this.colorKey=e,Gg[e]=this}getContext(){return it.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return it.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(v8,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(E8,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=N2().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const i=new cr;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(Vt.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=i.getMatrix(),l=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);e.setTransform(l)}return e}}_getLinearGradient(){return this._getCache(S8,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const e=N2(),i=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),l=e.createLinearGradient(i.x,i.y,s.x,s.y);for(let c=0;c<t.length;c+=2)l.addColorStop(t[c],t[c+1]);return l}}_getRadialGradient(){return this._getCache(T8,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const e=N2(),i=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),l=e.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius());for(let c=0;c<t.length;c+=2)l.addColorStop(t[c],t[c+1]);return l}}getShadowRGBA(){return this._getCache(A8,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=it.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const e=this.getStage();if(!e)return!1;const i=e.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return Dt.prototype.destroy.call(this),delete Gg[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!((e=this.attrs.perfectDrawEnabled)!==null&&e!==void 0?e:!0))return!1;const s=t||this.hasFill(),l=this.hasStroke(),c=this.getAbsoluteOpacity()!==1;if(s&&l&&c)return!0;const f=this.hasShadow(),m=this.shadowForStrokeEnabled();return!!(s&&l&&f&&m)}setStrokeHitEnabled(t){it.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let e=!1,i=this.getParent();for(;i;){if(i.isCached()){e=!0;break}i=i.getParent()}const s=t.skipTransform,l=t.relativeTo||e&&this.getStage()||void 0,c=this.getSelfRect(),m=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,g=c.width+m,A=c.height+m,S=!t.skipShadow&&this.hasShadow(),T=S?this.shadowOffsetX():0,x=S?this.shadowOffsetY():0,w=g+Math.abs(T),L=A+Math.abs(x),V=S&&this.shadowBlur()||0,G=w+V*2,B=L+V*2,Y={width:G,height:B,x:-(m/2+V)+Math.min(T,0)+c.x,y:-(m/2+V)+Math.min(x,0)+c.y};return s?Y:this._transformedRect(Y,l)}drawScene(t,e,i){const s=this.getLayer(),l=t||s.getCanvas(),c=l.getContext(),f=this._getCanvasCache(),m=this.getSceneFunc(),g=this.hasShadow();let A;const S=e===this;if(!this.isVisible()&&!S)return this;if(f){c.save();const T=this.getAbsoluteTransform(e).getMatrix();return c.transform(T[0],T[1],T[2],T[3],T[4],T[5]),this._drawCachedSceneCanvas(c),c.restore(),this}if(!m)return this;if(c.save(),this._useBufferCanvas()){A=this.getStage();const T=i||A.bufferCanvas,x=T.getContext();i?(x.save(),x.setTransform(1,0,0,1,0,0),x.clearRect(0,0,T.width,T.height),x.restore()):x.clear(),x.save(),x._applyLineJoin(this),x._applyMiterLimit(this);const w=this.getAbsoluteTransform(e).getMatrix();x.transform(w[0],w[1],w[2],w[3],w[4],w[5]),m.call(this,x,this),x.restore();const L=T.pixelRatio;g&&c._applyShadow(this),S||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c.drawImage(T._canvas,T.x||0,T.y||0,T.width/L,T.height/L)}else{if(c._applyLineJoin(this),c._applyMiterLimit(this),!S){const T=this.getAbsoluteTransform(e).getMatrix();c.transform(T[0],T[1],T[2],T[3],T[4],T[5]),c._applyOpacity(this),c._applyGlobalCompositeOperation(this)}g&&c._applyShadow(this),m.call(this,c,this)}return c.restore(),this}drawHit(t,e,i=!1){if(!this.shouldDrawHit(e,i))return this;const s=this.getLayer(),l=t||s.hitCanvas,c=l&&l.getContext(),f=this.hitFunc()||this.sceneFunc(),m=this._getCanvasCache(),g=m&&m.hit;if(this.colorKey||it.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),g){c.save();const S=this.getAbsoluteTransform(e).getMatrix();return c.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedHitCanvas(c),c.restore(),this}if(!f)return this;if(c.save(),c._applyLineJoin(this),c._applyMiterLimit(this),!(this===e)){const S=this.getAbsoluteTransform(e).getMatrix();c.transform(S[0],S[1],S[2],S[3],S[4],S[5])}return f.call(this,c,this),c.restore(),this}drawHitFromCache(t=0){const e=this._getCanvasCache(),i=this._getCachedSceneCanvas(),s=e.hit,l=s.getContext(),c=s.getWidth(),f=s.getHeight();l.clear(),l.drawImage(i._canvas,0,0,c,f);try{const m=l.getImageData(0,0,c,f),g=m.data,A=g.length,S=it._hexToRgb(this.colorKey);for(let T=0;T<A;T+=4)g[T+3]>t?(g[T]=S.r,g[T+1]=S.g,g[T+2]=S.b,g[T+3]=255):g[T+3]=0;l.putImageData(m,0,0)}catch(m){it.error("Unable to draw hit graph from cached scene canvas. "+m.message)}return this}hasPointerCapture(t){return l8(t,this)}setPointerCapture(t){o8(t,this)}releaseCapture(t){Bg(t)}}xt.prototype._fillFunc=pz;xt.prototype._strokeFunc=gz;xt.prototype._fillFuncHit=_z;xt.prototype._strokeFuncHit=yz;xt.prototype._centroid=!1;xt.prototype.nodeType="Shape";ei(xt);xt.prototype.eventListeners={};xt.prototype.on.call(xt.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",vz);xt.prototype.on.call(xt.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Az);xt.prototype.on.call(xt.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",Ez);xt.prototype.on.call(xt.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Sz);xt.prototype.on.call(xt.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",Tz);F.addGetterSetter(xt,"stroke",void 0,a8());F.addGetterSetter(xt,"strokeWidth",2,Ot());F.addGetterSetter(xt,"fillAfterStrokeEnabled",!1);F.addGetterSetter(xt,"hitStrokeWidth","auto",zS());F.addGetterSetter(xt,"strokeHitEnabled",!0,Hl());F.addGetterSetter(xt,"perfectDrawEnabled",!0,Hl());F.addGetterSetter(xt,"shadowForStrokeEnabled",!0,Hl());F.addGetterSetter(xt,"lineJoin");F.addGetterSetter(xt,"lineCap");F.addGetterSetter(xt,"miterLimit");F.addGetterSetter(xt,"sceneFunc");F.addGetterSetter(xt,"hitFunc");F.addGetterSetter(xt,"dash");F.addGetterSetter(xt,"dashOffset",0,Ot());F.addGetterSetter(xt,"shadowColor",void 0,Ff());F.addGetterSetter(xt,"shadowBlur",0,Ot());F.addGetterSetter(xt,"shadowOpacity",1,Ot());F.addComponentsGetterSetter(xt,"shadowOffset",["x","y"]);F.addGetterSetter(xt,"shadowOffsetX",0,Ot());F.addGetterSetter(xt,"shadowOffsetY",0,Ot());F.addGetterSetter(xt,"fillPatternImage");F.addGetterSetter(xt,"fill",void 0,a8());F.addGetterSetter(xt,"fillPatternX",0,Ot());F.addGetterSetter(xt,"fillPatternY",0,Ot());F.addGetterSetter(xt,"fillLinearGradientColorStops");F.addGetterSetter(xt,"strokeLinearGradientColorStops");F.addGetterSetter(xt,"fillRadialGradientStartRadius",0);F.addGetterSetter(xt,"fillRadialGradientEndRadius",0);F.addGetterSetter(xt,"fillRadialGradientColorStops");F.addGetterSetter(xt,"fillPatternRepeat","repeat");F.addGetterSetter(xt,"fillEnabled",!0);F.addGetterSetter(xt,"strokeEnabled",!0);F.addGetterSetter(xt,"shadowEnabled",!0);F.addGetterSetter(xt,"dashEnabled",!0);F.addGetterSetter(xt,"strokeScaleEnabled",!0);F.addGetterSetter(xt,"fillPriority","color");F.addComponentsGetterSetter(xt,"fillPatternOffset",["x","y"]);F.addGetterSetter(xt,"fillPatternOffsetX",0,Ot());F.addGetterSetter(xt,"fillPatternOffsetY",0,Ot());F.addComponentsGetterSetter(xt,"fillPatternScale",["x","y"]);F.addGetterSetter(xt,"fillPatternScaleX",1,Ot());F.addGetterSetter(xt,"fillPatternScaleY",1,Ot());F.addComponentsGetterSetter(xt,"fillLinearGradientStartPoint",["x","y"]);F.addComponentsGetterSetter(xt,"strokeLinearGradientStartPoint",["x","y"]);F.addGetterSetter(xt,"fillLinearGradientStartPointX",0);F.addGetterSetter(xt,"strokeLinearGradientStartPointX",0);F.addGetterSetter(xt,"fillLinearGradientStartPointY",0);F.addGetterSetter(xt,"strokeLinearGradientStartPointY",0);F.addComponentsGetterSetter(xt,"fillLinearGradientEndPoint",["x","y"]);F.addComponentsGetterSetter(xt,"strokeLinearGradientEndPoint",["x","y"]);F.addGetterSetter(xt,"fillLinearGradientEndPointX",0);F.addGetterSetter(xt,"strokeLinearGradientEndPointX",0);F.addGetterSetter(xt,"fillLinearGradientEndPointY",0);F.addGetterSetter(xt,"strokeLinearGradientEndPointY",0);F.addComponentsGetterSetter(xt,"fillRadialGradientStartPoint",["x","y"]);F.addGetterSetter(xt,"fillRadialGradientStartPointX",0);F.addGetterSetter(xt,"fillRadialGradientStartPointY",0);F.addComponentsGetterSetter(xt,"fillRadialGradientEndPoint",["x","y"]);F.addGetterSetter(xt,"fillRadialGradientEndPointX",0);F.addGetterSetter(xt,"fillRadialGradientEndPointY",0);F.addGetterSetter(xt,"fillPatternRotation",0);F.addGetterSetter(xt,"fillRule",void 0,Ff());F.backCompat(xt,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const bz="beforeDraw",Cz="draw",b8=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Rz=b8.length;let Yf=class extends fr{constructor(t){super(t),this.canvas=new Yc,this.hitCanvas=new US({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Dt.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Dt.prototype.moveUp.call(this))return!1;const e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Dt.prototype.moveDown.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Dt.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return Dt.prototype.remove.call(this),t&&t.parentNode&&it._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&it.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Dt.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){it.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){it.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,it.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let e=1,i=!1;for(;;){for(let s=0;s<Rz;s++){const l=b8[s],c=this._getIntersection({x:t.x+l.x*e,y:t.y+l.y*e}),f=c.shape;if(f)return f;if(i=!!c.antialiased,!c.antialiased)break}if(i)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,s=i[3];if(s===255){const l=it.getHitColorKey(i[0],i[1],i[2]),c=Gg[l];return c?{shape:c}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,e,i){const s=this.getLayer(),l=t||s&&s.getCanvas();return this._fire(bz,{node:this}),this.clearBeforeDraw()&&l.getContext().clear(),fr.prototype.drawScene.call(this,l,e,i),this._fire(Cz,{node:this}),this}drawHit(t,e){const i=this.getLayer(),s=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),fr.prototype.drawHit.call(this,s,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){it.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return it.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return it.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Yf.prototype.nodeType="Layer";ei(Yf);F.addGetterSetter(Yf,"imageSmoothingEnabled",!0);F.addGetterSetter(Yf,"clearBeforeDraw",!0);F.addGetterSetter(Yf,"hitGraphEnabled",!0,Hl());class jS extends Yf{constructor(t){super(t),this.listening(!1),it.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}jS.prototype.nodeType="FastLayer";ei(jS);let wm=class extends fr{_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&it.throw("You may only add groups and shapes to groups.")}};wm.prototype.nodeType="Group";ei(wm);const D2=(function(){return Cf.performance&&Cf.performance.now?function(){return Cf.performance.now()}:function(){return new Date().getTime()}})();class Zr{constructor(t,e){this.id=Zr.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:D2(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){let e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}getLayers(){return this.layers}addLayer(t){const e=this.layers,i=e.length;for(let s=0;s<i;s++)if(e[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const e=Zr.animations,i=e.length;for(let s=0;s<i;s++)if(e[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=D2(),Zr._addAnimation(this),this}stop(){return Zr._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const e=t.id,i=this.animations,s=i.length;for(let l=0;l<s;l++)if(i[l].id===e){this.animations.splice(l,1);break}}static _runFrames(){const t={},e=this.animations;for(let i=0;i<e.length;i++){const s=e[i],l=s.layers,c=s.func;s._updateFrameObject(D2());const f=l.length;let m;if(c?m=c.call(s,s.frame)!==!1:m=!0,!!m)for(let g=0;g<f;g++){const A=l[g];A._id!==void 0&&(t[A._id]=A)}}for(const i in t)t.hasOwnProperty(i)&&t[i].batchDraw()}static _animationLoop(){const t=Zr;t.animations.length?(t._runFrames(),it.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,it.requestAnimFrame(this._animationLoop))}}Zr.animations=[];Zr.animIdCounter=0;Zr.animRunning=!1;const wz={node:1,duration:1,easing:1,onFinish:1,yoyo:1},xz=1,Eb=2,Sb=3,Tb=["fill","stroke","shadowColor"];let Nz=0;class Dz{constructor(t,e,i,s,l,c,f){this.prop=t,this.propFunc=e,this.begin=s,this._pos=s,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=l-this.begin,this.pause()}fire(t){const e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=Eb,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Sb,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===Eb?this.setTime(t):this.state===Sb&&this.setTime(this.duration-t)}pause(){this.state=xz,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Cn{constructor(t){const e=this,i=t.node,s=i._id,l=t.easing||Hg.Linear,c=!!t.yoyo;let f,m;typeof t.duration>"u"?f=.3:t.duration===0?f=.001:f=t.duration,this.node=i,this._id=Nz++;const g=i.getLayer()||(i instanceof Vt.Stage?i.getLayers():null);g||it.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Zr(function(){e.tween.onEnterFrame()},g),this.tween=new Dz(m,function(A){e._tweenFunc(A)},l,0,1,f*1e3,c),this._addListeners(),Cn.attrs[s]||(Cn.attrs[s]={}),Cn.attrs[s][this._id]||(Cn.attrs[s][this._id]={}),Cn.tweens[s]||(Cn.tweens[s]={});for(m in t)wz[m]===void 0&&this._addAttr(m,t[m]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){const i=this.node,s=i._id;let l,c,f,m,g;const A=Cn.tweens[s][t];A&&delete Cn.attrs[s][A][t];let S=i.getAttr(t);if(it._isArray(e))if(l=[],c=Math.max(e.length,S.length),t==="points"&&e.length!==S.length&&(e.length>S.length?(m=S,S=it._prepareArrayForTween(S,e,i.closed())):(f=e,e=it._prepareArrayForTween(e,S,i.closed()))),t.indexOf("fill")===0)for(let T=0;T<c;T++)if(T%2===0)l.push(e[T]-S[T]);else{const x=it.colorToRGBA(S[T]);g=it.colorToRGBA(e[T]),S[T]=x,l.push({r:g.r-x.r,g:g.g-x.g,b:g.b-x.b,a:g.a-x.a})}else for(let T=0;T<c;T++)l.push(e[T]-S[T]);else Tb.indexOf(t)!==-1?(S=it.colorToRGBA(S),g=it.colorToRGBA(e),l={r:g.r-S.r,g:g.g-S.g,b:g.b-S.b,a:g.a-S.a}):l=e-S;Cn.attrs[s][this._id][t]={start:S,diff:l,end:e,trueEnd:f,trueStart:m},Cn.tweens[s][t]=this._id}_tweenFunc(t){const e=this.node,i=Cn.attrs[e._id][this._id];let s,l,c,f,m,g,A,S;for(s in i){if(l=i[s],c=l.start,f=l.diff,S=l.end,it._isArray(c))if(m=[],A=Math.max(c.length,S.length),s.indexOf("fill")===0)for(g=0;g<A;g++)g%2===0?m.push((c[g]||0)+f[g]*t):m.push("rgba("+Math.round(c[g].r+f[g].r*t)+","+Math.round(c[g].g+f[g].g*t)+","+Math.round(c[g].b+f[g].b*t)+","+(c[g].a+f[g].a*t)+")");else for(g=0;g<A;g++)m.push((c[g]||0)+f[g]*t);else Tb.indexOf(s)!==-1?m="rgba("+Math.round(c.r+f.r*t)+","+Math.round(c.g+f.g*t)+","+Math.round(c.b+f.b*t)+","+(c.a+f.a*t)+")":m=c+f*t;e.setAttr(s,m)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,e=Cn.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,e=Cn.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,e=this._id,i=Cn.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const s in i)delete Cn.tweens[t][s];delete Cn.attrs[t][e],Cn.tweens[t]&&(Object.keys(Cn.tweens[t]).length===0&&delete Cn.tweens[t],Object.keys(Cn.attrs[t]).length===0&&delete Cn.attrs[t])}}Cn.attrs={};Cn.tweens={};Dt.prototype.to=function(n){const t=n.onFinish;n.node=this,n.onFinish=function(){this.destroy(),t&&t()},new Cn(n).play()};const Hg={BackEaseIn(n,t,e,i){return e*(n/=i)*n*((1.70158+1)*n-1.70158)+t},BackEaseOut(n,t,e,i){return e*((n=n/i-1)*n*((1.70158+1)*n+1.70158)+1)+t},BackEaseInOut(n,t,e,i){let s=1.70158;return(n/=i/2)<1?e/2*(n*n*(((s*=1.525)+1)*n-s))+t:e/2*((n-=2)*n*(((s*=1.525)+1)*n+s)+2)+t},ElasticEaseIn(n,t,e,i,s,l){let c=0;return n===0?t:(n/=i)===1?t+e:(l||(l=i*.3),!s||s<Math.abs(e)?(s=e,c=l/4):c=l/(2*Math.PI)*Math.asin(e/s),-(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/l))+t)},ElasticEaseOut(n,t,e,i,s,l){let c=0;return n===0?t:(n/=i)===1?t+e:(l||(l=i*.3),!s||s<Math.abs(e)?(s=e,c=l/4):c=l/(2*Math.PI)*Math.asin(e/s),s*Math.pow(2,-10*n)*Math.sin((n*i-c)*(2*Math.PI)/l)+e+t)},ElasticEaseInOut(n,t,e,i,s,l){let c=0;return n===0?t:(n/=i/2)===2?t+e:(l||(l=i*(.3*1.5)),!s||s<Math.abs(e)?(s=e,c=l/4):c=l/(2*Math.PI)*Math.asin(e/s),n<1?-.5*(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/l))+t:s*Math.pow(2,-10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/l)*.5+e+t)},BounceEaseOut(n,t,e,i){return(n/=i)<1/2.75?e*(7.5625*n*n)+t:n<2/2.75?e*(7.5625*(n-=1.5/2.75)*n+.75)+t:n<2.5/2.75?e*(7.5625*(n-=2.25/2.75)*n+.9375)+t:e*(7.5625*(n-=2.625/2.75)*n+.984375)+t},BounceEaseIn(n,t,e,i){return e-Hg.BounceEaseOut(i-n,0,e,i)+t},BounceEaseInOut(n,t,e,i){return n<i/2?Hg.BounceEaseIn(n*2,0,e,i)*.5+t:Hg.BounceEaseOut(n*2-i,0,e,i)*.5+e*.5+t},EaseIn(n,t,e,i){return e*(n/=i)*n+t},EaseOut(n,t,e,i){return-e*(n/=i)*(n-2)+t},EaseInOut(n,t,e,i){return(n/=i/2)<1?e/2*n*n+t:-e/2*(--n*(n-2)-1)+t},StrongEaseIn(n,t,e,i){return e*(n/=i)*n*n*n*n+t},StrongEaseOut(n,t,e,i){return e*((n=n/i-1)*n*n*n*n+1)+t},StrongEaseInOut(n,t,e,i){return(n/=i/2)<1?e/2*n*n*n*n*n+t:e/2*((n-=2)*n*n*n*n+2)+t},Linear(n,t,e,i){return e*n/i+t}},xm=it._assign(Vt,{Util:it,Transform:cr,Node:Dt,Container:fr,Stage:fv,stages:jg,Layer:Yf,FastLayer:jS,Group:wm,DD:$e,Shape:xt,shapes:Gg,Animation:Zr,Tween:Cn,Easings:Hg,Context:cv,Canvas:PS});class ju extends xt{_sceneFunc(t){const e=Vt.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,i),t.arc(0,0,this.innerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),i=this.clockwise(),s=Vt.getAngle(i?360-this.angle():this.angle()),l=Math.cos(Math.min(s,Math.PI)),c=1,f=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),m=Math.sin(Math.min(s,Math.PI/2)),g=l*(l>0?t:e),A=c*e,S=f*(f>0?t:e),T=m*(m>0?e:t);return{x:g,y:i?-1*T:S,width:A-g,height:T-S}}}ju.prototype._centroid=!0;ju.prototype.className="Arc";ju.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];ei(ju);F.addGetterSetter(ju,"innerRadius",0,Ot());F.addGetterSetter(ju,"outerRadius",0,Ot());F.addGetterSetter(ju,"angle",0,Ot());F.addGetterSetter(ju,"clockwise",!1,Hl());function kA(n,t,e,i,s,l,c){const f=Math.sqrt(Math.pow(e-n,2)+Math.pow(i-t,2)),m=Math.sqrt(Math.pow(s-e,2)+Math.pow(l-i,2)),g=c*f/(f+m),A=c*m/(f+m),S=e-g*(s-n),T=i-g*(l-t),x=e+A*(s-n),w=i+A*(l-t);return[S,T,x,w]}function bb(n,t){const e=n.length,i=[];for(let s=2;s<e-2;s+=2){const l=kA(n[s-2],n[s-1],n[s],n[s+1],n[s+2],n[s+3],t);isNaN(l[0])||(i.push(l[0]),i.push(l[1]),i.push(n[s]),i.push(n[s+1]),i.push(l[2]),i.push(l[3]))}return i}function Iz(n){const t=[[n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]]],e=[];for(const i of t){const s=-3*i[0]+9*i[1]-9*i[2]+3*i[3];if(s!==0){const l=6*i[0]-12*i[1]+6*i[2],c=-3*i[0]+3*i[1],f=l*l-4*s*c;if(f>=0){const m=Math.sqrt(f);e.push((-l+m)/(2*s)),e.push((-l-m)/(2*s))}}}return e.filter(i=>i>0&&i<1).flatMap(i=>t.map(s=>{const l=1-i;return l*l*l*s[0]+3*l*l*i*s[1]+3*l*i*i*s[2]+i*i*i*s[3]}))}let Gu=class extends xt{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const e=this.points(),i=e.length,s=this.tension(),l=this.closed(),c=this.bezier();if(!i)return;let f=0;if(t.beginPath(),t.moveTo(e[0],e[1]),s!==0&&i>4){const m=this.getTensionPoints(),g=m.length;for(f=l?0:4,l||t.quadraticCurveTo(m[0],m[1],m[2],m[3]);f<g-2;)t.bezierCurveTo(m[f++],m[f++],m[f++],m[f++],m[f++],m[f++]);l||t.quadraticCurveTo(m[g-2],m[g-1],e[i-2],e[i-1])}else if(c)for(f=2;f<i;)t.bezierCurveTo(e[f++],e[f++],e[f++],e[f++],e[f++],e[f++]);else for(f=2;f<i;f+=2)t.lineTo(e[f],e[f+1]);l?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():bb(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),e=t.length,i=this.tension(),s=kA(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),l=kA(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),c=bb(t,i);return[s[2],s[3]].concat(c).concat([l[0],l[1],t[e-2],t[e-1],l[2],l[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.bezier()?t=[t[0],t[1],...Iz(this.points()),t[t.length-2],t[t.length-1]]:t=this.points();let e=t[0],i=t[0],s=t[1],l=t[1],c,f;for(let m=0;m<t.length/2;m++)c=t[m*2],f=t[m*2+1],e=Math.min(e,c),i=Math.max(i,c),s=Math.min(s,f),l=Math.max(l,f);return{x:e,y:s,width:i-e,height:l-s}}};Gu.prototype.className="Line";Gu.prototype._attrsAffectingSize=["points","bezier","tension"];ei(Gu);F.addGetterSetter(Gu,"closed",!1);F.addGetterSetter(Gu,"bezier",!1);F.addGetterSetter(Gu,"tension",0,Ot());F.addGetterSetter(Gu,"points",[],QU());const Oz=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],Mz=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Lz=[[1],[1,1],[1,2,1],[1,3,3,1]],Cb=(n,t,e)=>{let i,s;const c=e/2;i=0;for(let f=0;f<20;f++)s=c*Oz[20][f]+c,i+=Mz[20][f]*Vz(n,t,s);return c*i},Rb=(n,t,e)=>{e===void 0&&(e=1);const i=n[0]-2*n[1]+n[2],s=t[0]-2*t[1]+t[2],l=2*n[1]-2*n[0],c=2*t[1]-2*t[0],f=4*(i*i+s*s),m=4*(i*l+s*c),g=l*l+c*c;if(f===0)return e*Math.sqrt(Math.pow(n[2]-n[0],2)+Math.pow(t[2]-t[0],2));const A=m/(2*f),S=g/f,T=e+A,x=S-A*A,w=T*T+x>0?Math.sqrt(T*T+x):0,L=A*A+x>0?Math.sqrt(A*A+x):0,V=A+Math.sqrt(A*A+x)!==0?x*Math.log(Math.abs((T+w)/(A+L))):0;return Math.sqrt(f)/2*(T*w-A*L+V)};function Vz(n,t,e){const i=PA(1,e,n),s=PA(1,e,t),l=i*i+s*s;return Math.sqrt(l)}const PA=(n,t,e)=>{const i=e.length-1;let s,l;if(i===0)return 0;if(n===0){l=0;for(let c=0;c<=i;c++)l+=Lz[i][c]*Math.pow(1-t,i-c)*Math.pow(t,c)*e[c];return l}else{s=new Array(i);for(let c=0;c<i;c++)s[c]=i*(e[c+1]-e[c]);return PA(n-1,t,s)}},wb=(n,t,e)=>{let i=1,s=n/t,l=(n-e(s))/t,c=0;for(;i>.001;){const f=e(s+l),m=Math.abs(n-f)/t;if(m<i)i=m,s+=l;else{const g=e(s-l),A=Math.abs(n-g)/t;A<i?(i=A,s-=l):l/=2}if(c++,c>500)break}return s};class Rn extends xt{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Rn.parsePathData(this.data()),this.pathLength=Rn.getPathLength(this.dataArray)}_sceneFunc(t){const e=this.dataArray;t.beginPath();let i=!1;for(let s=0;s<e.length;s++){const l=e[s].command,c=e[s].points;switch(l){case"L":t.lineTo(c[0],c[1]);break;case"M":t.moveTo(c[0],c[1]);break;case"C":t.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":t.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":const f=c[0],m=c[1],g=c[2],A=c[3],S=c[4],T=c[5],x=c[6],w=c[7],L=g>A?g:A,V=g>A?1:g/A,G=g>A?A/g:1;t.translate(f,m),t.rotate(x),t.scale(V,G),t.arc(0,0,L,S,S+T,1-w),t.scale(1/V,1/G),t.rotate(-x),t.translate(-f,-m);break;case"z":i=!0,t.closePath();break}}!i&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(m){if(m.command==="A"){const g=m.points[4],A=m.points[5],S=m.points[4]+A;let T=Math.PI/180;if(Math.abs(g-S)<T&&(T=Math.abs(g-S)),A<0)for(let x=g-T;x>S;x-=T){const w=Rn.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],x,0);t.push(w.x,w.y)}else for(let x=g+T;x<S;x+=T){const w=Rn.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],x,0);t.push(w.x,w.y)}}else if(m.command==="C")for(let g=0;g<=1;g+=.01){const A=Rn.getPointOnCubicBezier(g,m.start.x,m.start.y,m.points[0],m.points[1],m.points[2],m.points[3],m.points[4],m.points[5]);t.push(A.x,A.y)}else t=t.concat(m.points)});let e=t[0],i=t[0],s=t[1],l=t[1],c,f;for(let m=0;m<t.length/2;m++)c=t[m*2],f=t[m*2+1],isNaN(c)||(e=Math.min(e,c),i=Math.max(i,c)),isNaN(f)||(s=Math.min(s,f),l=Math.max(l,f));return{x:e,y:s,width:i-e,height:l-s}}getLength(){return this.pathLength}getPointAtLength(t){return Rn.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,e,i,s){return Math.sqrt((i-t)*(i-t)+(s-e)*(s-e))}static getPathLength(t){let e=0;for(let i=0;i<t.length;++i)e+=t[i].pathLength;return e}static getPointAtLengthOfDataArray(t,e){let i,s=0,l=e.length;if(!l)return null;for(;s<l&&t>e[s].pathLength;)t-=e[s].pathLength,++s;if(s===l)return i=e[s-1].points.slice(-2),{x:i[0],y:i[1]};if(t<.01)return e[s].command==="M"?(i=e[s].points.slice(0,2),{x:i[0],y:i[1]}):{x:e[s].start.x,y:e[s].start.y};const c=e[s],f=c.points;switch(c.command){case"L":return Rn.getPointOnLine(t,c.start.x,c.start.y,f[0],f[1]);case"C":return Rn.getPointOnCubicBezier(wb(t,Rn.getPathLength(e),L=>Cb([c.start.x,f[0],f[2],f[4]],[c.start.y,f[1],f[3],f[5]],L)),c.start.x,c.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return Rn.getPointOnQuadraticBezier(wb(t,Rn.getPathLength(e),L=>Rb([c.start.x,f[0],f[2]],[c.start.y,f[1],f[3]],L)),c.start.x,c.start.y,f[0],f[1],f[2],f[3]);case"A":const m=f[0],g=f[1],A=f[2],S=f[3],T=f[5],x=f[6];let w=f[4];return w+=T*t/c.pathLength,Rn.getPointOnEllipticalArc(m,g,A,S,w,x)}return null}static getPointOnLine(t,e,i,s,l,c,f){c=c??e,f=f??i;const m=this.getLineLength(e,i,s,l);if(m<1e-10)return{x:e,y:i};if(s===e)return{x:c,y:f+(l>i?t:-t)};const g=(l-i)/(s-e),A=Math.sqrt(t*t/(1+g*g))*(s<e?-1:1),S=g*A;if(Math.abs(f-i-g*(c-e))<1e-10)return{x:c+A,y:f+S};const T=((c-e)*(s-e)+(f-i)*(l-i))/(m*m),x=e+T*(s-e),w=i+T*(l-i),L=this.getLineLength(c,f,x,w),V=Math.sqrt(t*t-L*L),G=Math.sqrt(V*V/(1+g*g))*(s<e?-1:1),B=g*G;return{x:x+G,y:w+B}}static getPointOnCubicBezier(t,e,i,s,l,c,f,m,g){function A(V){return V*V*V}function S(V){return 3*V*V*(1-V)}function T(V){return 3*V*(1-V)*(1-V)}function x(V){return(1-V)*(1-V)*(1-V)}const w=m*A(t)+c*S(t)+s*T(t)+e*x(t),L=g*A(t)+f*S(t)+l*T(t)+i*x(t);return{x:w,y:L}}static getPointOnQuadraticBezier(t,e,i,s,l,c,f){function m(x){return x*x}function g(x){return 2*x*(1-x)}function A(x){return(1-x)*(1-x)}const S=c*m(t)+s*g(t)+e*A(t),T=f*m(t)+l*g(t)+i*A(t);return{x:S,y:T}}static getPointOnEllipticalArc(t,e,i,s,l,c){const f=Math.cos(c),m=Math.sin(c),g={x:i*Math.cos(l),y:s*Math.sin(l)};return{x:t+(g.x*f-g.y*m),y:e+(g.x*m+g.y*f)}}static parsePathData(t){if(!t)return[];let e=t;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(let S=0;S<i.length;S++)e=e.replace(new RegExp(i[S],"g"),"|"+i[S]);const s=e.split("|"),l=[],c=[];let f=0,m=0;const g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let A;for(let S=1;S<s.length;S++){let T=s[S],x=T.charAt(0);for(T=T.slice(1),c.length=0;A=g.exec(T);)c.push(A[0]);let w=[],L=x==="A"||x==="a"?0:-1;for(let V=0,G=c.length;V<G;V++){const B=c[V];if(B==="00"){w.push(0,0),L>=0&&(L+=2,L>=7&&(L-=7));continue}if(L>=0){if(L===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(B)){w.push(parseInt(B[0],10)),w.push(parseInt(B[1],10)),w.push(parseFloat(B.slice(2))),L+=3,L>=7&&(L-=7);continue}if(B==="11"||B==="10"||B==="01"){w.push(parseInt(B[0],10)),w.push(parseInt(B[1],10)),L+=2,L>=7&&(L-=7);continue}if(B==="0"||B==="1"){w.push(parseInt(B,10)),L+=1,L>=7&&(L-=7);continue}}else if(L===4){if(/^[01]\d+(?:\.\d+)?$/.test(B)){w.push(parseInt(B[0],10)),w.push(parseFloat(B.slice(1))),L+=2,L>=7&&(L-=7);continue}if(B==="0"||B==="1"){w.push(parseInt(B,10)),L+=1,L>=7&&(L-=7);continue}}const Y=parseFloat(B);isNaN(Y)?w.push(0):w.push(Y),L+=1,L>=7&&(L-=7)}else{const Y=parseFloat(B);isNaN(Y)?w.push(0):w.push(Y)}}for(;w.length>0&&!isNaN(w[0]);){let V="",G=[];const B=f,Y=m;let et,at,tt,z,M,U,q,X,Q,H;switch(x){case"l":f+=w.shift(),m+=w.shift(),V="L",G.push(f,m);break;case"L":f=w.shift(),m=w.shift(),G.push(f,m);break;case"m":const Ft=w.shift(),Pt=w.shift();if(f+=Ft,m+=Pt,V="M",l.length>2&&l[l.length-1].command==="z"){for(let $=l.length-2;$>=0;$--)if(l[$].command==="M"){f=l[$].points[0]+Ft,m=l[$].points[1]+Pt;break}}G.push(f,m),x="l";break;case"M":f=w.shift(),m=w.shift(),V="M",G.push(f,m),x="L";break;case"h":f+=w.shift(),V="L",G.push(f,m);break;case"H":f=w.shift(),V="L",G.push(f,m);break;case"v":m+=w.shift(),V="L",G.push(f,m);break;case"V":m=w.shift(),V="L",G.push(f,m);break;case"C":G.push(w.shift(),w.shift(),w.shift(),w.shift()),f=w.shift(),m=w.shift(),G.push(f,m);break;case"c":G.push(f+w.shift(),m+w.shift(),f+w.shift(),m+w.shift()),f+=w.shift(),m+=w.shift(),V="C",G.push(f,m);break;case"S":at=f,tt=m,et=l[l.length-1],et.command==="C"&&(at=f+(f-et.points[2]),tt=m+(m-et.points[3])),G.push(at,tt,w.shift(),w.shift()),f=w.shift(),m=w.shift(),V="C",G.push(f,m);break;case"s":at=f,tt=m,et=l[l.length-1],et.command==="C"&&(at=f+(f-et.points[2]),tt=m+(m-et.points[3])),G.push(at,tt,f+w.shift(),m+w.shift()),f+=w.shift(),m+=w.shift(),V="C",G.push(f,m);break;case"Q":G.push(w.shift(),w.shift()),f=w.shift(),m=w.shift(),G.push(f,m);break;case"q":G.push(f+w.shift(),m+w.shift()),f+=w.shift(),m+=w.shift(),V="Q",G.push(f,m);break;case"T":at=f,tt=m,et=l[l.length-1],et.command==="Q"&&(at=f+(f-et.points[0]),tt=m+(m-et.points[1])),f=w.shift(),m=w.shift(),V="Q",G.push(at,tt,f,m);break;case"t":at=f,tt=m,et=l[l.length-1],et.command==="Q"&&(at=f+(f-et.points[0]),tt=m+(m-et.points[1])),f+=w.shift(),m+=w.shift(),V="Q",G.push(at,tt,f,m);break;case"A":z=w.shift(),M=w.shift(),U=w.shift(),q=w.shift(),X=w.shift(),Q=f,H=m,f=w.shift(),m=w.shift(),V="A",G=this.convertEndpointToCenterParameterization(Q,H,f,m,q,X,z,M,U);break;case"a":z=w.shift(),M=w.shift(),U=w.shift(),q=w.shift(),X=w.shift(),Q=f,H=m,f+=w.shift(),m+=w.shift(),V="A",G=this.convertEndpointToCenterParameterization(Q,H,f,m,q,X,z,M,U);break}l.push({command:V||x,points:G,start:{x:B,y:Y},pathLength:this.calcLength(B,Y,V||x,G)})}(x==="z"||x==="Z")&&l.push({command:"z",points:[],start:void 0,pathLength:0})}return l}static calcLength(t,e,i,s){let l,c,f,m;const g=Rn;switch(i){case"L":return g.getLineLength(t,e,s[0],s[1]);case"C":return Cb([t,s[0],s[2],s[4]],[e,s[1],s[3],s[5]],1);case"Q":return Rb([t,s[0],s[2]],[e,s[1],s[3]],1);case"A":l=0;const A=s[4],S=s[5],T=s[4]+S;let x=Math.PI/180;if(Math.abs(A-T)<x&&(x=Math.abs(A-T)),c=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],A,0),S<0)for(m=A-x;m>T;m-=x)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),l+=g.getLineLength(c.x,c.y,f.x,f.y),c=f;else for(m=A+x;m<T;m+=x)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),l+=g.getLineLength(c.x,c.y,f.x,f.y),c=f;return f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],T,0),l+=g.getLineLength(c.x,c.y,f.x,f.y),l}return 0}static convertEndpointToCenterParameterization(t,e,i,s,l,c,f,m,g){const A=g*(Math.PI/180),S=Math.cos(A)*(t-i)/2+Math.sin(A)*(e-s)/2,T=-1*Math.sin(A)*(t-i)/2+Math.cos(A)*(e-s)/2,x=S*S/(f*f)+T*T/(m*m);x>1&&(f*=Math.sqrt(x),m*=Math.sqrt(x));let w=Math.sqrt((f*f*(m*m)-f*f*(T*T)-m*m*(S*S))/(f*f*(T*T)+m*m*(S*S)));l===c&&(w*=-1),isNaN(w)&&(w=0);const L=w*f*T/m,V=w*-m*S/f,G=(t+i)/2+Math.cos(A)*L-Math.sin(A)*V,B=(e+s)/2+Math.sin(A)*L+Math.cos(A)*V,Y=function(q){return Math.sqrt(q[0]*q[0]+q[1]*q[1])},et=function(q,X){return(q[0]*X[0]+q[1]*X[1])/(Y(q)*Y(X))},at=function(q,X){return(q[0]*X[1]<q[1]*X[0]?-1:1)*Math.acos(et(q,X))},tt=at([1,0],[(S-L)/f,(T-V)/m]),z=[(S-L)/f,(T-V)/m],M=[(-1*S-L)/f,(-1*T-V)/m];let U=at(z,M);return et(z,M)<=-1&&(U=Math.PI),et(z,M)>=1&&(U=0),c===0&&U>0&&(U=U-2*Math.PI),c===1&&U<0&&(U=U+2*Math.PI),[G,B,f,m,tt,U,A,c]}}Rn.prototype.className="Path";Rn.prototype._attrsAffectingSize=["data"];ei(Rn);F.addGetterSetter(Rn,"data");class Qf extends Gu{_sceneFunc(t){super._sceneFunc(t);const e=Math.PI*2,i=this.points();let s=i;const l=this.tension()!==0&&i.length>4;l&&(s=this.getTensionPoints());const c=this.pointerLength(),f=i.length;let m,g;if(l){const T=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],i[f-2],i[f-1]],x=Rn.calcLength(s[s.length-4],s[s.length-3],"C",T),w=Rn.getPointOnQuadraticBezier(Math.min(1,1-c/x),T[0],T[1],T[2],T[3],T[4],T[5]);m=i[f-2]-w.x,g=i[f-1]-w.y}else m=i[f-2]-i[f-4],g=i[f-1]-i[f-3];const A=(Math.atan2(g,m)+e)%e,S=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[f-2],i[f-1]),t.rotate(A),t.moveTo(0,0),t.lineTo(-c,S/2),t.lineTo(-c,-S/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),l?(m=(s[0]+s[2])/2-i[0],g=(s[1]+s[3])/2-i[1]):(m=i[2]-i[0],g=i[3]-i[1]),t.rotate((Math.atan2(-g,-m)+e)%e),t.moveTo(0,0),t.lineTo(-c,S/2),t.lineTo(-c,-S/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x,y:t.y-e,width:t.width,height:t.height+e*2}}}Qf.prototype.className="Arrow";ei(Qf);F.addGetterSetter(Qf,"pointerLength",10,Ot());F.addGetterSetter(Qf,"pointerWidth",10,Ot());F.addGetterSetter(Qf,"pointerAtBeginning",!1);F.addGetterSetter(Qf,"pointerAtEnding",!0);let Fm=class extends xt{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}};Fm.prototype._centroid=!0;Fm.prototype.className="Circle";Fm.prototype._attrsAffectingSize=["radius"];ei(Fm);F.addGetterSetter(Fm,"radius",0,Ot());let vh=class extends xt{_sceneFunc(t){const e=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}};vh.prototype.className="Ellipse";vh.prototype._centroid=!0;vh.prototype._attrsAffectingSize=["radiusX","radiusY"];ei(vh);F.addComponentsGetterSetter(vh,"radius",["x","y"]);F.addGetterSetter(vh,"radiusX",0,Ot());F.addGetterSetter(vh,"radiusY",0,Ot());let ql=class C8 extends xt{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",e=>{this._removeImageLoad(e.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),e=this.hasShadow();return t&&e?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),i=this.getHeight(),s=this.cornerRadius(),l=this.attrs.image;let c;if(l){const f=this.attrs.cropWidth,m=this.attrs.cropHeight;f&&m?c=[l,this.cropX(),this.cropY(),f,m,0,0,e,i]:c=[l,0,0,e,i]}(this.hasFill()||this.hasStroke()||s)&&(t.beginPath(),s?it.drawRoundedRectPath(t,e,i,s):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)),l&&(s&&t.clip(),t.drawImage.apply(t,c))}_hitFunc(t){const e=this.width(),i=this.height(),s=this.cornerRadius();t.beginPath(),s?it.drawRoundedRectPath(t,e,i,s):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e,i;return(i=(t=this.attrs.width)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.width)!==null&&i!==void 0?i:0}getHeight(){var t,e,i;return(i=(t=this.attrs.height)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.height)!==null&&i!==void 0?i:0}static fromURL(t,e,i=null){const s=it.createImageElement();s.onload=function(){const l=new C8({image:s});e(l)},s.onerror=i,s.crossOrigin="Anonymous",s.src=t}};ql.prototype.className="Image";ql.prototype._attrsAffectingSize=["image"];ei(ql);F.addGetterSetter(ql,"cornerRadius",0,hv(4));F.addGetterSetter(ql,"image");F.addComponentsGetterSetter(ql,"crop",["x","y","width","height"]);F.addGetterSetter(ql,"cropX",0,Ot());F.addGetterSetter(ql,"cropY",0,Ot());F.addGetterSetter(ql,"cropWidth",0,Ot());F.addGetterSetter(ql,"cropHeight",0,Ot());const R8=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],kz="Change.konva",Pz="none",UA="up",zA="right",BA="down",jA="left",Uz=R8.length;class GS extends wm{constructor(t){super(t),this.on("add.konva",function(e){this._addListeners(e.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let e=this,i;const s=function(){e._sync()};for(i=0;i<Uz;i++)t.on(R8[i]+kz,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),e=this.getTag(),i,s,l,c,f,m,g;if(t&&e){switch(i=t.width(),s=t.height(),l=e.pointerDirection(),c=e.pointerWidth(),g=e.pointerHeight(),f=0,m=0,l){case UA:f=i/2,m=-1*g;break;case zA:f=i+c,m=s/2;break;case BA:f=i/2,m=s+g;break;case jA:f=-1*c,m=s/2;break}e.setAttrs({x:-1*f,y:-1*m,width:i,height:s}),t.setAttrs({x:-1*f,y:-1*m})}}}GS.prototype.className="Label";ei(GS);class Xf extends xt{_sceneFunc(t){const e=this.width(),i=this.height(),s=this.pointerDirection(),l=this.pointerWidth(),c=this.pointerHeight(),f=this.cornerRadius();let m=0,g=0,A=0,S=0;typeof f=="number"?m=g=A=S=Math.min(f,e/2,i/2):(m=Math.min(f[0]||0,e/2,i/2),g=Math.min(f[1]||0,e/2,i/2),S=Math.min(f[2]||0,e/2,i/2),A=Math.min(f[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(m,0),s===UA&&(t.lineTo((e-l)/2,0),t.lineTo(e/2,-1*c),t.lineTo((e+l)/2,0)),t.lineTo(e-g,0),t.arc(e-g,g,g,Math.PI*3/2,0,!1),s===zA&&(t.lineTo(e,(i-c)/2),t.lineTo(e+l,i/2),t.lineTo(e,(i+c)/2)),t.lineTo(e,i-S),t.arc(e-S,i-S,S,0,Math.PI/2,!1),s===BA&&(t.lineTo((e+l)/2,i),t.lineTo(e/2,i+c),t.lineTo((e-l)/2,i)),t.lineTo(A,i),t.arc(A,i-A,A,Math.PI/2,Math.PI,!1),s===jA&&(t.lineTo(0,(i+c)/2),t.lineTo(-1*l,i/2),t.lineTo(0,(i-c)/2)),t.lineTo(0,m),t.arc(m,m,m,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,e=0,i=this.pointerWidth(),s=this.pointerHeight(),l=this.pointerDirection(),c=this.width(),f=this.height();return l===UA?(e-=s,f+=s):l===BA?f+=s:l===jA?(t-=i*1.5,c+=i):l===zA&&(c+=i*1.5),{x:t,y:e,width:c,height:f}}}Xf.prototype.className="Tag";ei(Xf);F.addGetterSetter(Xf,"pointerDirection",Pz);F.addGetterSetter(Xf,"pointerWidth",0,Ot());F.addGetterSetter(Xf,"pointerHeight",0,Ot());F.addGetterSetter(Xf,"cornerRadius",0,hv(4));let k0=class extends xt{_sceneFunc(t){const e=this.cornerRadius(),i=this.width(),s=this.height();t.beginPath(),e?it.drawRoundedRectPath(t,i,s,e):t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)}};k0.prototype.className="Rect";ei(k0);F.addGetterSetter(k0,"cornerRadius",0,hv(4));class Ah extends xt{_sceneFunc(t){const e=this._getPoints(),i=this.radius(),s=this.sides(),l=this.cornerRadius();if(t.beginPath(),l)it.drawRoundedPolygonPath(t,e,s,i,l);else{t.moveTo(e[0].x,e[0].y);for(let c=1;c<e.length;c++)t.lineTo(e[c].x,e[c].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,i=[];for(let s=0;s<t;s++)i.push({x:e*Math.sin(s*2*Math.PI/t),y:-1*e*Math.cos(s*2*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();let e=t[0].x,i=t[0].x,s=t[0].y,l=t[0].y;return t.forEach(c=>{e=Math.min(e,c.x),i=Math.max(i,c.x),s=Math.min(s,c.y),l=Math.max(l,c.y)}),{x:e,y:s,width:i-e,height:l-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Ah.prototype.className="RegularPolygon";Ah.prototype._centroid=!0;Ah.prototype._attrsAffectingSize=["radius"];ei(Ah);F.addGetterSetter(Ah,"radius",0,Ot());F.addGetterSetter(Ah,"sides",0,Ot());F.addGetterSetter(Ah,"cornerRadius",0,hv(4));const xb=Math.PI*2;class Kf extends xt{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,xb,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),xb,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Kf.prototype.className="Ring";Kf.prototype._centroid=!0;Kf.prototype._attrsAffectingSize=["innerRadius","outerRadius"];ei(Kf);F.addGetterSetter(Kf,"innerRadius",0,Ot());F.addGetterSetter(Kf,"outerRadius",0,Ot());class Uo extends xt{constructor(t){super(t),this._updated=!0,this.anim=new Zr(()=>{const e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const e=this.animation(),i=this.frameIndex(),s=i*4,l=this.animations()[e],c=this.frameOffsets(),f=l[s+0],m=l[s+1],g=l[s+2],A=l[s+3],S=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,g,A),t.closePath(),t.fillStrokeShape(this)),S)if(c){const T=c[e],x=i*2;t.drawImage(S,f,m,g,A,T[x+0],T[x+1],g,A)}else t.drawImage(S,f,m,g,A,0,0,g,A)}_hitFunc(t){const e=this.animation(),i=this.frameIndex(),s=i*4,l=this.animations()[e],c=this.frameOffsets(),f=l[s+2],m=l[s+3];if(t.beginPath(),c){const g=c[e],A=i*2;t.rect(g[A+0],g[A+1],f,m)}else t.rect(0,0,f,m);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),e=this.animation(),i=this.animations(),s=i[e],l=s.length/4;t<l-1?this.frameIndex(t+1):this.frameIndex(0)}}Uo.prototype.className="Sprite";ei(Uo);F.addGetterSetter(Uo,"animation");F.addGetterSetter(Uo,"animations");F.addGetterSetter(Uo,"frameOffsets");F.addGetterSetter(Uo,"image");F.addGetterSetter(Uo,"frameIndex",0,Ot());F.addGetterSetter(Uo,"frameRate",17,Ot());F.backCompat(Uo,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Eh extends xt{_sceneFunc(t){const e=this.innerRadius(),i=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(let l=1;l<s*2;l++){const c=l%2===0?i:e,f=c*Math.sin(l*Math.PI/s),m=-1*c*Math.cos(l*Math.PI/s);t.lineTo(f,m)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Eh.prototype.className="Star";Eh.prototype._centroid=!0;Eh.prototype._attrsAffectingSize=["innerRadius","outerRadius"];ei(Eh);F.addGetterSetter(Eh,"numPoints",5,Ot());F.addGetterSetter(Eh,"innerRadius",0,Ot());F.addGetterSetter(Eh,"outerRadius",0,Ot());function jc(n){return[...n].reduce((t,e,i,s)=>{if(new RegExp("\\p{Emoji}","u").test(e)){const l=s[i+1];l&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(l)?(t.push(e+l),s[i+1]=""):t.push(e)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(e+(s[i+1]||""))?t.push(e+s[i+1]):i>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(e)?t[t.length-1]+=e:e&&t.push(e);return t},[])}const Wd="auto",zz="center",w8="inherit",mg="justify",Bz="Change.konva",jz="2d",Nb="-",x8="left",Gz="text",Hz="Text",qz="top",Fz="bottom",Db="middle",N8="normal",Yz="px ",Ay=" ",Qz="right",Ib="rtl",Xz="word",Kz="char",Ob="none",I2="",D8=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Wz=D8.length;function Jz(n){return n.split(",").map(t=>{t=t.trim();const e=t.indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!i&&(t=`"${t}"`),t}).join(", ")}let Ey;function O2(){return Ey||(Ey=it.createCanvasElement().getContext(jz),Ey)}function Zz(n){n.fillText(this._partialText,this._partialTextX,this._partialTextY)}function $z(n){n.setAttr("miterLimit",2),n.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function tB(n){return n=n||{},!n.fillLinearGradientColorStops&&!n.fillRadialGradientColorStops&&!n.fillPatternImage&&(n.fill=n.fill||"black"),n}let xn=class extends xt{constructor(t){super(tB(t)),this._partialTextX=0,this._partialTextY=0;for(let e=0;e<Wz;e++)this.on(D8[e]+Bz,this._setTextData);this._setTextData()}_sceneFunc(t){var e,i;const s=this.textArr,l=s.length;if(!this.text())return;let c=this.padding(),f=this.fontSize(),m=this.lineHeight()*f,g=this.verticalAlign(),A=this.direction(),S=0,T=this.align(),x=this.getWidth(),w=this.letterSpacing(),L=this.charRenderFunc(),V=this.fill(),G=this.textDecoration(),B=this.underlineOffset(),Y=G.indexOf("underline")!==-1,et=G.indexOf("line-through")!==-1,at;A=A===w8?t.direction:A;let tt=m/2,z=Db;if(!Vt.legacyTextRendering){const M=this.measureSize("M");z="alphabetic";const U=(e=M.fontBoundingBoxAscent)!==null&&e!==void 0?e:M.actualBoundingBoxAscent,q=(i=M.fontBoundingBoxDescent)!==null&&i!==void 0?i:M.actualBoundingBoxDescent;tt=(U-q)/2+m/2}for(A===Ib&&t.setAttr("direction",A),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",z),t.setAttr("textAlign",x8),g===Db?S=(this.getHeight()-l*m-c*2)/2:g===Fz&&(S=this.getHeight()-l*m-c*2),t.translate(c,S+c),at=0;at<l;at++){let M=0,U=0;const q=s[at],X=q.text,Q=q.width,H=q.lastInParagraph;if(t.save(),T===Qz?M+=x-Q-c*2:T===zz&&(M+=(x-Q-c*2)/2),Y){t.save(),t.beginPath();const Pt=B??(Vt.legacyTextRendering?Math.round(f/2):Math.round(f/4)),$=M,Tt=tt+U+Pt;t.moveTo($,Tt);const Et=T===mg&&!H?x-c*2:Q;t.lineTo($+Math.round(Et),Tt),t.lineWidth=f/15;const Ut=this._getLinearGradient();t.strokeStyle=Ut||V,t.stroke(),t.restore()}const Ft=M;if(A!==Ib&&(w!==0||T===mg||L)){const Pt=X.split(" ").length-1,$=jc(X);for(let Tt=0;Tt<$.length;Tt++){const Et=$[Tt];if(Et===" "&&!H&&T===mg&&(M+=(x-c*2-Q)/Pt),this._partialTextX=M,this._partialTextY=tt+U,this._partialText=Et,L){t.save();const qt=s.slice(0,at).reduce((ht,_t)=>ht+jc(_t.text).length,0),K=Tt+qt;L({char:Et,index:K,x:M,y:tt+U,lineIndex:at,column:Tt,isLastInLine:H,width:this.measureSize(Et).width,context:t})}t.fillStrokeShape(this),L&&t.restore(),M+=this.measureSize(Et).width+w}}else w!==0&&t.setAttr("letterSpacing",`${w}px`),this._partialTextX=M,this._partialTextY=tt+U,this._partialText=X,t.fillStrokeShape(this);if(et){t.save(),t.beginPath();const Pt=Vt.legacyTextRendering?0:-Math.round(f/4),$=Ft;t.moveTo($,tt+U+Pt);const Tt=T===mg&&!H?x-c*2:Q;t.lineTo($+Math.round(Tt),tt+U+Pt),t.lineWidth=f/15;const Et=this._getLinearGradient();t.strokeStyle=Et||V,t.stroke(),t.restore()}t.restore(),l>1&&(tt+=m)}}_hitFunc(t){const e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}setText(t){const e=it._isString(t)?t:t==null?"":t+"";return this._setAttr(Gz,e),this}getWidth(){return this.attrs.width===Wd||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Wd||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return it.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,i,s,l,c,f,m,g,A,S,T;let x=O2(),w=this.fontSize(),L;x.save(),x.font=this._getContextFont(),L=x.measureText(t),x.restore();const V=w/100;return{actualBoundingBoxAscent:(e=L.actualBoundingBoxAscent)!==null&&e!==void 0?e:71.58203125*V,actualBoundingBoxDescent:(i=L.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(s=L.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*V,actualBoundingBoxRight:(l=L.actualBoundingBoxRight)!==null&&l!==void 0?l:75.732421875*V,alphabeticBaseline:(c=L.alphabeticBaseline)!==null&&c!==void 0?c:0,emHeightAscent:(f=L.emHeightAscent)!==null&&f!==void 0?f:100*V,emHeightDescent:(m=L.emHeightDescent)!==null&&m!==void 0?m:-20*V,fontBoundingBoxAscent:(g=L.fontBoundingBoxAscent)!==null&&g!==void 0?g:91*V,fontBoundingBoxDescent:(A=L.fontBoundingBoxDescent)!==null&&A!==void 0?A:21*V,hangingBaseline:(S=L.hangingBaseline)!==null&&S!==void 0?S:72.80000305175781*V,ideographicBaseline:(T=L.ideographicBaseline)!==null&&T!==void 0?T:-21*V,width:L.width,height:w}}_getContextFont(){return this.fontStyle()+Ay+this.fontVariant()+Ay+(this.fontSize()+Yz)+Jz(this.fontFamily())}_addTextLine(t){this.align()===mg&&(t=t.trim());const i=this._getTextWidth(t);return this.textArr.push({text:t,width:i,lastInParagraph:!1})}_getTextWidth(t){const e=this.letterSpacing(),i=t.length;return O2().measureText(t).width+e*i}_setTextData(){let t=this.text().split(`
`),e=+this.fontSize(),i=0,s=this.lineHeight()*e,l=this.attrs.width,c=this.attrs.height,f=l!==Wd&&l!==void 0,m=c!==Wd&&c!==void 0,g=this.padding(),A=l-g*2,S=c-g*2,T=0,x=this.wrap(),w=x!==Ob,L=x!==Kz&&w,V=this.ellipsis();this.textArr=[],O2().font=this._getContextFont();const G=V?this._getTextWidth(I2):0;for(let B=0,Y=t.length;B<Y;++B){let et=t[B],at=this._getTextWidth(et);if(f&&at>A)for(;et.length>0;){let tt=0,z=jc(et).length,M="",U=0;for(;tt<z;){const q=tt+z>>>1,X=jc(et),Q=X.slice(0,q+1).join(""),H=this._getTextWidth(Q);(V&&m&&T+s>S?H+G:H)<=A?(tt=q+1,M=Q,U=H):z=q}if(M){if(L){const Q=jc(et),H=jc(M),Ft=Q[H.length],Pt=Ft===Ay||Ft===Nb;let $;if(Pt&&U<=A)$=H.length;else{const Tt=H.lastIndexOf(Ay),Et=H.lastIndexOf(Nb);$=Math.max(Tt,Et)+1}$>0&&(tt=$,M=Q.slice(0,tt).join(""),U=this._getTextWidth(M))}if(M=M.trimRight(),this._addTextLine(M),i=Math.max(i,U),T+=s,this._shouldHandleEllipsis(T)){this._tryToAddEllipsisToLastLine();break}if(et=jc(et).slice(tt).join("").trimLeft(),et.length>0&&(at=this._getTextWidth(et),at<=A)){this._addTextLine(et),T+=s,i=Math.max(i,at);break}}else break}else this._addTextLine(et),T+=s,i=Math.max(i,at),this._shouldHandleEllipsis(T)&&B<Y-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),m&&T+s>S)break}this.textHeight=e,this.textWidth=i}_shouldHandleEllipsis(t){const e=+this.fontSize(),i=this.lineHeight()*e,s=this.attrs.height,l=s!==Wd&&s!==void 0,c=this.padding(),f=s-c*2;return!(this.wrap()!==Ob)||l&&t+i>f}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,e=t!==Wd&&t!==void 0,i=this.padding(),s=t-i*2,l=this.ellipsis(),c=this.textArr[this.textArr.length-1];!c||!l||(e&&(this._getTextWidth(c.text+I2)<s||(c.text=c.text.slice(0,c.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+I2))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,e=this.hasShadow();return t&&e?!0:super._useBufferCanvas()}};xn.prototype._fillFunc=Zz;xn.prototype._strokeFunc=$z;xn.prototype.className=Hz;xn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];ei(xn);F.overWriteSetter(xn,"width",zS());F.overWriteSetter(xn,"height",zS());F.addGetterSetter(xn,"direction",w8);F.addGetterSetter(xn,"fontFamily","Arial");F.addGetterSetter(xn,"fontSize",12,Ot());F.addGetterSetter(xn,"fontStyle",N8);F.addGetterSetter(xn,"fontVariant",N8);F.addGetterSetter(xn,"padding",0,Ot());F.addGetterSetter(xn,"align",x8);F.addGetterSetter(xn,"verticalAlign",qz);F.addGetterSetter(xn,"lineHeight",1,Ot());F.addGetterSetter(xn,"wrap",Xz);F.addGetterSetter(xn,"ellipsis",!1,Hl());F.addGetterSetter(xn,"letterSpacing",0,Ot());F.addGetterSetter(xn,"text","",Ff());F.addGetterSetter(xn,"textDecoration","");F.addGetterSetter(xn,"underlineOffset",void 0,Ot());F.addGetterSetter(xn,"charRenderFunc",void 0);const eB="",I8="normal";function O8(n){n.fillText(this.partialText,0,0)}function M8(n){n.strokeText(this.partialText,0,0)}class qi extends xt{constructor(t){super(t),this.dummyCanvas=it.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Rn.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const e=this.pathLength;return t>e?null:Rn.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=Rn.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const e=this.textDecoration(),i=this.fill(),s=this.fontSize(),l=this.glyphInfo,c=e.indexOf("underline")!==-1,f=e.indexOf("line-through")!==-1;c&&t.beginPath();for(let m=0;m<l.length;m++){t.save();const g=l[m].p0;t.translate(g.x,g.y),t.rotate(l[m].rotation),this.partialText=l[m].text,t.fillStrokeShape(this),c&&(m===0&&t.moveTo(0,s/2+1),t.lineTo(l[m].width,s/2+1)),t.restore()}if(c&&(t.strokeStyle=i,t.lineWidth=s/20,t.stroke()),f){t.beginPath();for(let m=0;m<l.length;m++){t.save();const g=l[m].p0;t.translate(g.x,g.y),t.rotate(l[m].rotation),m===0&&t.moveTo(0,0),t.lineTo(l[m].width,0),t.restore()}t.strokeStyle=i,t.lineWidth=s/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();const e=this.glyphInfo;if(e.length>=1){const i=e[0].p0;t.moveTo(i.x,i.y)}for(let i=0;i<e.length;i++){const s=e[i].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return it.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return xn.prototype.setText.call(this,t)}_getContextFont(){return xn.prototype._getContextFont.call(this)}_getTextSize(t){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const s=i.measureText(t);return i.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=jc(this.text()),e=[];let i=0;for(let S=0;S<t.length;S++)e.push({char:t[S],width:this._getTextSize(t[S]).width}),i+=e[S].width;const{height:s}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=s,this.glyphInfo=[],!this.attrs.data)return null;const l=this.letterSpacing(),c=this.align(),f=this.kerningFunc(),m=Math.max(this.textWidth+((this.attrs.text||"").length-1)*l,0);let g=0;c==="center"&&(g=Math.max(0,this.pathLength/2-m/2)),c==="right"&&(g=Math.max(0,this.pathLength-m));let A=g;for(let S=0;S<e.length;S++){const T=this._getPointAtLength(A);if(!T)return;const x=e[S].char;let w=e[S].width+l;if(x===" "&&c==="justify"){const et=this.text().split(" ").length-1;w+=(this.pathLength-m)/et}const L=this._getPointAtLength(A+w);if(!L)return;const V=Rn.getLineLength(T.x,T.y,L.x,L.y);let G=0;if(f)try{G=f(e[S-1].char,x)*this.fontSize()}catch{G=0}T.x+=G,L.x+=G,this.textWidth+=G;const B=Rn.getPointOnLine(G+V/2,T.x,T.y,L.x,L.y),Y=Math.atan2(L.y-T.y,L.x-T.x);this.glyphInfo.push({transposeX:B.x,transposeY:B.y,text:t[S],rotation:Y,p0:T,p1:L,width:V}),A+=w}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(g){t.push(g.p0.x),t.push(g.p0.y),t.push(g.p1.x),t.push(g.p1.y)});let e=t[0]||0,i=t[0]||0,s=t[1]||0,l=t[1]||0,c,f;for(let g=0;g<t.length/2;g++)c=t[g*2],f=t[g*2+1],e=Math.min(e,c),i=Math.max(i,c),s=Math.min(s,f),l=Math.max(l,f);const m=this.fontSize();return{x:e-m/2,y:s-m/2,width:i-e+m,height:l-s+m}}destroy(){return it.releaseCanvas(this.dummyCanvas),super.destroy()}}qi.prototype._fillFunc=O8;qi.prototype._strokeFunc=M8;qi.prototype._fillFuncHit=O8;qi.prototype._strokeFuncHit=M8;qi.prototype.className="TextPath";qi.prototype._attrsAffectingSize=["text","fontSize","data"];ei(qi);F.addGetterSetter(qi,"data");F.addGetterSetter(qi,"fontFamily","Arial");F.addGetterSetter(qi,"fontSize",12,Ot());F.addGetterSetter(qi,"fontStyle",I8);F.addGetterSetter(qi,"align","left");F.addGetterSetter(qi,"letterSpacing",0,Ot());F.addGetterSetter(qi,"textBaseline","middle");F.addGetterSetter(qi,"fontVariant",I8);F.addGetterSetter(qi,"text",eB);F.addGetterSetter(qi,"textDecoration","");F.addGetterSetter(qi,"kerningFunc",void 0);const L8="tr-konva",nB=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(n=>n+`.${L8}`).join(" "),Mb="nodesRect",iB=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],sB={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},aB="ontouchstart"in Vt._global;function rB(n,t,e){if(n==="rotater")return e;t+=it.degToRad(sB[n]||0);const i=(it.radToDeg(t)%360+360)%360;return it._inRange(i,315+22.5,360)||it._inRange(i,0,22.5)?"ns-resize":it._inRange(i,45-22.5,45+22.5)?"nesw-resize":it._inRange(i,90-22.5,90+22.5)?"ew-resize":it._inRange(i,135-22.5,135+22.5)?"nwse-resize":it._inRange(i,180-22.5,180+22.5)?"ns-resize":it._inRange(i,225-22.5,225+22.5)?"nesw-resize":it._inRange(i,270-22.5,270+22.5)?"ew-resize":it._inRange(i,315-22.5,315+22.5)?"nwse-resize":(it.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const S1=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function lB(n){return{x:n.x+n.width/2*Math.cos(n.rotation)+n.height/2*Math.sin(-n.rotation),y:n.y+n.height/2*Math.cos(n.rotation)+n.width/2*Math.sin(n.rotation)}}function V8(n,t,e){const i=e.x+(n.x-e.x)*Math.cos(t)-(n.y-e.y)*Math.sin(t),s=e.y+(n.x-e.x)*Math.sin(t)+(n.y-e.y)*Math.cos(t);return{...n,rotation:n.rotation+t,x:i,y:s}}function oB(n,t){const e=lB(n);return V8(n,t,e)}function uB(n,t,e){let i=t;for(let s=0;s<n.length;s++){const l=Vt.getAngle(n[s]),c=Math.abs(l-t)%(Math.PI*2);Math.min(c,Math.PI*2-c)<e&&(i=l)}return i}let GA=0;class je extends wm{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(nB,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return it.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return L8+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(s=>s.isAncestorOf(this)?(it.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const l=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const c=s._attrsAffectingSize.map(f=>f+"Change."+this._getEventNamespace()).join(" ");s.on(c,l)}s.on(iB.map(c=>c+`.${this._getEventNamespace()}`).join(" "),l),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,l),this._proxyDrag(s)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,i=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(i,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!e)return;const s=t.getAbsolutePosition(),l=s.x-e.x,c=s.y-e.y;this.nodes().forEach(f=>{if(f===t||f.isDragging())return;const m=f.getAbsolutePosition();f.setAbsolutePosition({x:m.x+l,y:m.y+c}),f.startDrag(i)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Mb),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Mb,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),i){const s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=t.getAbsoluteScale(i),c=t.getAbsolutePosition(i),f=s.x*l.x-t.offsetX()*l.x,m=s.y*l.y-t.offsetY()*l.y,g=(Vt.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),A={x:c.x+f*Math.cos(g)+m*Math.sin(-g),y:c.y+m*Math.cos(g)+f*Math.sin(g),width:s.width*l.x,height:s.height*l.y,rotation:g};return V8(A,-Vt.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const e=[];this.nodes().map(g=>{const A=g.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),S=[{x:A.x,y:A.y},{x:A.x+A.width,y:A.y},{x:A.x+A.width,y:A.y+A.height},{x:A.x,y:A.y+A.height}],T=g.getAbsoluteTransform();S.forEach(function(x){const w=T.point(x);e.push(w)})});const i=new cr;i.rotate(-Vt.getAngle(this.rotation()));let s=1/0,l=1/0,c=-1/0,f=-1/0;e.forEach(function(g){const A=i.point(g);s===void 0&&(s=c=A.x,l=f=A.y),s=Math.min(s,A.x),l=Math.min(l,A.y),c=Math.max(c,A.x),f=Math.max(f,A.y)}),i.invert();const m=i.point({x:s,y:l});return{x:m.x,y:m.y,width:c-s,height:f-l,rotation:Vt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),S1.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const e=new k0({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:aB?10:"auto"}),i=this;e.on("mousedown touchstart",function(s){i._handleMouseDown(s)}),e.on("dragstart",s=>{e.stopDrag(),s.cancelBubble=!0}),e.on("dragend",s=>{s.cancelBubble=!0}),e.on("mouseenter",()=>{const s=Vt.getAngle(this.rotation()),l=this.rotateAnchorCursor(),c=rB(t,s,l);e.getStage().content&&(e.getStage().content.style.cursor=c),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){const t=new xt({name:"back",width:0,height:0,sceneFunc(e,i){const s=i.getParent(),l=s.padding(),c=i.width(),f=i.height();if(e.beginPath(),e.rect(-l,-l,c+l*2,f+l*2),s.rotateEnabled()&&s.rotateLineVisible()){const m=s.rotateAnchorAngle(),g=s.rotateAnchorOffset(),A=it.degToRad(m),S=Math.sin(A),T=-Math.cos(A),x=c/2,w=f/2;let L=1/0;T<0?L=Math.min(L,-w/T):T>0&&(L=Math.min(L,(f-w)/T)),S<0?L=Math.min(L,-x/S):S>0&&(L=Math.min(L,(c-x)/S));const V=x+S*L,G=w+T*L,B=it._sign(f),Y=V+S*g*B,et=G+T*g*B;e.moveTo(V,G),e.lineTo(Y,et)}e.fillStrokeShape(i)},hitFunc:(e,i)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();e.beginPath(),e.rect(-s,-s,i.width()+s*2,i.height()+s*2),e.fillStrokeShape(i)}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const e=this._getNodeRect(),i=e.width,s=e.height,l=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));this.sin=Math.abs(s/l),this.cos=Math.abs(i/l),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const c=t.target.getAbsolutePosition(),f=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-c.x,y:f.y-c.y},GA++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(m=>{m._fire("transformstart",{evt:t.evt,target:m})})}_handleMouseMove(t){let e,i,s;const l=this.findOne("."+this._movingAnchorName),c=l.getStage();c.setPointersPositions(t);const f=c.getPointerPosition();let m={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const g=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(m=this.anchorDragBoundFunc()(g,m,t)),l.setAbsolutePosition(m);const A=l.getAbsolutePosition();if(g.x===A.x&&g.y===A.y)return;if(this._movingAnchorName==="rotater"){const B=this._getNodeRect();e=l.x()-B.width/2,i=-l.y()+B.height/2;const Y=Vt.getAngle(this.rotateAnchorAngle());let et=Math.atan2(-i,e)+Math.PI/2-Y;B.height<0&&(et-=Math.PI);const tt=Vt.getAngle(this.rotation())+et,z=Vt.getAngle(this.rotationSnapTolerance()),U=uB(this.rotationSnaps(),tt,z)-B.rotation,q=oB(B,U);this._fitNodesInto(q,t);return}const S=this.shiftBehavior();let T;S==="inverted"?T=this.keepRatio()&&!t.shiftKey:S==="none"?T=this.keepRatio():T=this.keepRatio()||t.shiftKey;let x=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(T){const B=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(B.x-l.x(),2)+Math.pow(B.y-l.y(),2));const Y=this.findOne(".top-left").x()>B.x?-1:1,et=this.findOne(".top-left").y()>B.y?-1:1;e=s*this.cos*Y,i=s*this.sin*et,this.findOne(".top-left").x(B.x-e),this.findOne(".top-left").y(B.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(l.y());else if(this._movingAnchorName==="top-right"){if(T){const B=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(l.x()-B.x,2)+Math.pow(B.y-l.y(),2));const Y=this.findOne(".top-right").x()<B.x?-1:1,et=this.findOne(".top-right").y()>B.y?-1:1;e=s*this.cos*Y,i=s*this.sin*et,this.findOne(".top-right").x(B.x+e),this.findOne(".top-right").y(B.y-i)}var w=l.position();this.findOne(".top-left").y(w.y),this.findOne(".bottom-right").x(w.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(l.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(l.x());else if(this._movingAnchorName==="bottom-left"){if(T){const B=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(B.x-l.x(),2)+Math.pow(l.y()-B.y,2));const Y=B.x<l.x()?-1:1,et=l.y()<B.y?-1:1;e=s*this.cos*Y,i=s*this.sin*et,l.x(B.x-e),l.y(B.y+i)}w=l.position(),this.findOne(".top-left").x(w.x),this.findOne(".bottom-right").y(w.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(l.y());else if(this._movingAnchorName==="bottom-right"){if(T){const B=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(l.x()-B.x,2)+Math.pow(l.y()-B.y,2));const Y=this.findOne(".bottom-right").x()<B.x?-1:1,et=this.findOne(".bottom-right").y()<B.y?-1:1;e=s*this.cos*Y,i=s*this.sin*et,this.findOne(".bottom-right").x(B.x+e),this.findOne(".bottom-right").y(B.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(x=this.centeredScaling()||t.altKey,x){const B=this.findOne(".top-left"),Y=this.findOne(".bottom-right"),et=B.x(),at=B.y(),tt=this.getWidth()-Y.x(),z=this.getHeight()-Y.y();Y.move({x:-et,y:-at}),B.move({x:tt,y:z})}const L=this.findOne(".top-left").getAbsolutePosition();e=L.x,i=L.y;const V=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),G=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:i,width:V,height:G,rotation:Vt.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var e;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();GA--,this._fire("transformend",{evt:t,target:i}),(e=this.getLayer())===null||e===void 0||e.batchDraw(),i&&this._nodes.forEach(s=>{var l;s._fire("transformend",{evt:t,target:s}),(l=s.getLayer())===null||l===void 0||l.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,e){const i=this._getNodeRect(),s=1;if(it._inRange(t.width,-this.padding()*2-s,s)){this.update();return}if(it._inRange(t.height,-this.padding()*2-s,s)){this.update();return}const l=new cr;if(l.rotate(Vt.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const T=l.point({x:-this.padding()*2,y:0});t.x+=T.x,t.y+=T.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const T=l.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const T=l.point({x:0,y:-this.padding()*2});t.x+=T.x,t.y+=T.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const T=l.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const T=this.boundBoxFunc()(i,t);T?t=T:it.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,f=new cr;f.translate(i.x,i.y),f.rotate(i.rotation),f.scale(i.width/c,i.height/c);const m=new cr,g=t.width/c,A=t.height/c;this.flipEnabled()===!1?(m.translate(t.x,t.y),m.rotate(t.rotation),m.translate(t.width<0?t.width:0,t.height<0?t.height:0),m.scale(Math.abs(g),Math.abs(A))):(m.translate(t.x,t.y),m.rotate(t.rotation),m.scale(g,A));const S=m.multiply(f.invert());this._nodes.forEach(T=>{var x;if(!T.getStage())return;const w=T.getParent().getAbsoluteTransform(),L=T.getTransform().copy();L.translate(T.offsetX(),T.offsetY());const V=new cr;V.multiply(w.copy().invert()).multiply(S).multiply(w).multiply(L);const G=V.decompose();T.setAttrs(G),(x=T.getLayer())===null||x===void 0||x.batchDraw()}),this.rotation(it._getRotation(t.rotation)),this._nodes.forEach(T=>{this._fire("transform",{evt:e,target:T}),T._fire("transform",{evt:e,target:T})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t;const e=this._getNodeRect();this.rotation(it._getRotation(e.rotation));const i=e.width,s=e.height,l=this.enabledAnchors(),c=this.resizeEnabled(),f=this.padding(),m=this.anchorSize(),g=this.find("._anchor");g.forEach(tt=>{tt.setAttrs({width:m,height:m,offsetX:m/2,offsetY:m/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:m/2+f,offsetY:m/2+f,visible:c&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:m/2+f,visible:c&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:m/2-f,offsetY:m/2+f,visible:c&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:m/2+f,visible:c&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:s/2,offsetX:m/2-f,visible:c&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:m/2+f,offsetY:m/2-f,visible:c&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:s,offsetY:m/2-f,visible:c&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:s,offsetX:m/2-f,offsetY:m/2-f,visible:c&&l.indexOf("bottom-right")>=0});const A=this.rotateAnchorAngle(),S=this.rotateAnchorOffset(),T=it.degToRad(A),x=Math.sin(T),w=-Math.cos(T),L=i/2,V=s/2;let G=1/0;w<0?G=Math.min(G,-V/w):w>0&&(G=Math.min(G,(s-V)/w)),x<0?G=Math.min(G,-L/x):x>0&&(G=Math.min(G,(i-L)/x));const B=L+x*G,Y=V+w*G,et=it._sign(s);this._batchChangeChild(".rotater",{x:B+x*S*et,y:Y+w*S*et-f*w,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(tt=>tt.draggable()),x:0,y:0});const at=this.anchorStyleFunc();at&&g.forEach(tt=>{at(tt)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),wm.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Dt.prototype.toObject.call(this)}clone(t){return Dt.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}je.isTransforming=()=>GA>0;function cB(n){return n instanceof Array||it.warn("enabledAnchors value should be an array"),n instanceof Array&&n.forEach(function(t){S1.indexOf(t)===-1&&it.warn("Unknown anchor name: "+t+". Available names are: "+S1.join(", "))}),n||[]}je.prototype.className="Transformer";ei(je);F.addGetterSetter(je,"enabledAnchors",S1,cB);F.addGetterSetter(je,"flipEnabled",!0,Hl());F.addGetterSetter(je,"resizeEnabled",!0);F.addGetterSetter(je,"anchorSize",10,Ot());F.addGetterSetter(je,"rotateEnabled",!0);F.addGetterSetter(je,"rotateLineVisible",!0);F.addGetterSetter(je,"rotationSnaps",[]);F.addGetterSetter(je,"rotateAnchorOffset",50,Ot());F.addGetterSetter(je,"rotateAnchorAngle",0,Ot());F.addGetterSetter(je,"rotateAnchorCursor","crosshair");F.addGetterSetter(je,"rotationSnapTolerance",5,Ot());F.addGetterSetter(je,"borderEnabled",!0);F.addGetterSetter(je,"anchorStroke","rgb(0, 161, 255)");F.addGetterSetter(je,"anchorStrokeWidth",1,Ot());F.addGetterSetter(je,"anchorFill","white");F.addGetterSetter(je,"anchorCornerRadius",0,Ot());F.addGetterSetter(je,"borderStroke","rgb(0, 161, 255)");F.addGetterSetter(je,"borderStrokeWidth",1,Ot());F.addGetterSetter(je,"borderDash");F.addGetterSetter(je,"keepRatio",!0);F.addGetterSetter(je,"shiftBehavior","default");F.addGetterSetter(je,"centeredScaling",!1);F.addGetterSetter(je,"ignoreStroke",!1);F.addGetterSetter(je,"padding",0,Ot());F.addGetterSetter(je,"nodes");F.addGetterSetter(je,"node");F.addGetterSetter(je,"boundBoxFunc");F.addGetterSetter(je,"anchorDragBoundFunc");F.addGetterSetter(je,"anchorStyleFunc");F.addGetterSetter(je,"shouldOverdrawWholeArea",!1);F.addGetterSetter(je,"useSingleNodeRotation",!0);F.backCompat(je,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Hu extends xt{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,Vt.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Hu.prototype.className="Wedge";Hu.prototype._centroid=!0;Hu.prototype._attrsAffectingSize=["radius"];ei(Hu);F.addGetterSetter(Hu,"radius",0,Ot());F.addGetterSetter(Hu,"angle",0,Ot());F.addGetterSetter(Hu,"clockwise",!1);F.backCompat(Hu,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function Lb(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const hB=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],fB=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function dB(n,t){const e=n.data,i=n.width,s=n.height;let l,c,f,m,g,A,S,T,x,w,L,V,G,B,Y,et,at,tt,z,M;const U=t+t+1,q=i-1,X=s-1,Q=t+1,H=Q*(Q+1)/2,Ft=new Lb,Pt=hB[t],$=fB[t];let Tt=null,Et=Ft,Ut=null,qt=null;for(let K=1;K<U;K++)Et=Et.next=new Lb,K===Q&&(Tt=Et);Et.next=Ft,f=c=0;for(let K=0;K<s;K++){V=G=B=Y=m=g=A=S=0,T=Q*(et=e[c]),x=Q*(at=e[c+1]),w=Q*(tt=e[c+2]),L=Q*(z=e[c+3]),m+=H*et,g+=H*at,A+=H*tt,S+=H*z,Et=Ft;for(let ht=0;ht<Q;ht++)Et.r=et,Et.g=at,Et.b=tt,Et.a=z,Et=Et.next;for(let ht=1;ht<Q;ht++)l=c+((q<ht?q:ht)<<2),m+=(Et.r=et=e[l])*(M=Q-ht),g+=(Et.g=at=e[l+1])*M,A+=(Et.b=tt=e[l+2])*M,S+=(Et.a=z=e[l+3])*M,V+=et,G+=at,B+=tt,Y+=z,Et=Et.next;Ut=Ft,qt=Tt;for(let ht=0;ht<i;ht++)e[c+3]=z=S*Pt>>$,z!==0?(z=255/z,e[c]=(m*Pt>>$)*z,e[c+1]=(g*Pt>>$)*z,e[c+2]=(A*Pt>>$)*z):e[c]=e[c+1]=e[c+2]=0,m-=T,g-=x,A-=w,S-=L,T-=Ut.r,x-=Ut.g,w-=Ut.b,L-=Ut.a,l=f+((l=ht+t+1)<q?l:q)<<2,V+=Ut.r=e[l],G+=Ut.g=e[l+1],B+=Ut.b=e[l+2],Y+=Ut.a=e[l+3],m+=V,g+=G,A+=B,S+=Y,Ut=Ut.next,T+=et=qt.r,x+=at=qt.g,w+=tt=qt.b,L+=z=qt.a,V-=et,G-=at,B-=tt,Y-=z,qt=qt.next,c+=4;f+=i}for(let K=0;K<i;K++){G=B=Y=V=g=A=S=m=0,c=K<<2,T=Q*(et=e[c]),x=Q*(at=e[c+1]),w=Q*(tt=e[c+2]),L=Q*(z=e[c+3]),m+=H*et,g+=H*at,A+=H*tt,S+=H*z,Et=Ft;for(let _t=0;_t<Q;_t++)Et.r=et,Et.g=at,Et.b=tt,Et.a=z,Et=Et.next;let ht=i;for(let _t=1;_t<=t;_t++)c=ht+K<<2,m+=(Et.r=et=e[c])*(M=Q-_t),g+=(Et.g=at=e[c+1])*M,A+=(Et.b=tt=e[c+2])*M,S+=(Et.a=z=e[c+3])*M,V+=et,G+=at,B+=tt,Y+=z,Et=Et.next,_t<X&&(ht+=i);c=K,Ut=Ft,qt=Tt;for(let _t=0;_t<s;_t++)l=c<<2,e[l+3]=z=S*Pt>>$,z>0?(z=255/z,e[l]=(m*Pt>>$)*z,e[l+1]=(g*Pt>>$)*z,e[l+2]=(A*Pt>>$)*z):e[l]=e[l+1]=e[l+2]=0,m-=T,g-=x,A-=w,S-=L,T-=Ut.r,x-=Ut.g,w-=Ut.b,L-=Ut.a,l=K+((l=_t+Q)<X?l:X)*i<<2,m+=V+=Ut.r=e[l],g+=G+=Ut.g=e[l+1],A+=B+=Ut.b=e[l+2],S+=Y+=Ut.a=e[l+3],Ut=Ut.next,T+=et=qt.r,x+=at=qt.g,w+=tt=qt.b,L+=z=qt.a,V-=et,G-=at,B-=tt,Y-=z,qt=qt.next,c+=i}}const mB=function(t){const e=Math.round(this.blurRadius());e>0&&dB(t,e)};F.addGetterSetter(Dt,"blurRadius",0,Ot(),F.afterSetFilter);const pB=function(n){const t=this.brightness()*255,e=n.data,i=e.length;for(let s=0;s<i;s+=4)e[s]+=t,e[s+1]+=t,e[s+2]+=t};F.addGetterSetter(Dt,"brightness",0,Ot(),F.afterSetFilter);const gB=function(n){const t=this.brightness(),e=n.data,i=e.length;for(let s=0;s<i;s+=4)e[s]=Math.min(255,e[s]*t),e[s+1]=Math.min(255,e[s+1]*t),e[s+2]=Math.min(255,e[s+2]*t)},_B=function(n){const t=Math.pow((this.contrast()+100)/100,2),e=n.data,i=e.length;let s=150,l=150,c=150;for(let f=0;f<i;f+=4)s=e[f],l=e[f+1],c=e[f+2],s/=255,s-=.5,s*=t,s+=.5,s*=255,l/=255,l-=.5,l*=t,l+=.5,l*=255,c/=255,c-=.5,c*=t,c+=.5,c*=255,s=s<0?0:s>255?255:s,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,e[f]=s,e[f+1]=l,e[f+2]=c};F.addGetterSetter(Dt,"contrast",0,Ot(),F.afterSetFilter);const yB=function(n){var t,e,i,s,l,c,f,m,g;const A=n.data,S=n.width,T=n.height,x=Math.min(1,Math.max(0,(e=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&e!==void 0?e:.5)),w=Math.min(1,Math.max(0,(s=(i=this.embossWhiteLevel)===null||i===void 0?void 0:i.call(this))!==null&&s!==void 0?s:.5)),V=(f={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(c=(l=this.embossDirection)===null||l===void 0?void 0:l.call(this))!==null&&c!==void 0?c:"top-left"])!==null&&f!==void 0?f:315,G=!!((g=(m=this.embossBlend)===null||m===void 0?void 0:m.call(this))!==null&&g!==void 0&&g),B=x*10,Y=w*255,et=V*Math.PI/180,at=Math.cos(et),tt=Math.sin(et),z=128/1020*B,M=new Uint8ClampedArray(A),U=new Float32Array(S*T);for(let Ft=0,Pt=0;Pt<A.length;Pt+=4,Ft++)U[Ft]=.2126*M[Pt]+.7152*M[Pt+1]+.0722*M[Pt+2];const q=[-1,0,1,-2,0,2,-1,0,1],X=[-1,-2,-1,0,0,0,1,2,1],Q=[-S-1,-S,-S+1,-1,0,1,S-1,S,S+1],H=Ft=>Ft<0?0:Ft>255?255:Ft;for(let Ft=1;Ft<T-1;Ft++)for(let Pt=1;Pt<S-1;Pt++){const $=Ft*S+Pt;let Tt=0,Et=0;Tt+=U[$+Q[0]]*q[0],Et+=U[$+Q[0]]*X[0],Tt+=U[$+Q[1]]*q[1],Et+=U[$+Q[1]]*X[1],Tt+=U[$+Q[2]]*q[2],Et+=U[$+Q[2]]*X[2],Tt+=U[$+Q[3]]*q[3],Et+=U[$+Q[3]]*X[3],Tt+=U[$+Q[5]]*q[5],Et+=U[$+Q[5]]*X[5],Tt+=U[$+Q[6]]*q[6],Et+=U[$+Q[6]]*X[6],Tt+=U[$+Q[7]]*q[7],Et+=U[$+Q[7]]*X[7],Tt+=U[$+Q[8]]*q[8],Et+=U[$+Q[8]]*X[8];const Ut=at*Tt+tt*Et,qt=H(Y+Ut*z),K=$*4;if(G){const ht=qt-Y;A[K]=H(M[K]+ht),A[K+1]=H(M[K+1]+ht),A[K+2]=H(M[K+2]+ht),A[K+3]=M[K+3]}else A[K]=A[K+1]=A[K+2]=qt,A[K+3]=M[K+3]}for(let Ft=0;Ft<S;Ft++){let Pt=Ft*4,$=((T-1)*S+Ft)*4;A[Pt]=M[Pt],A[Pt+1]=M[Pt+1],A[Pt+2]=M[Pt+2],A[Pt+3]=M[Pt+3],A[$]=M[$],A[$+1]=M[$+1],A[$+2]=M[$+2],A[$+3]=M[$+3]}for(let Ft=1;Ft<T-1;Ft++){let Pt=Ft*S*4,$=(Ft*S+(S-1))*4;A[Pt]=M[Pt],A[Pt+1]=M[Pt+1],A[Pt+2]=M[Pt+2],A[Pt+3]=M[Pt+3],A[$]=M[$],A[$+1]=M[$+1],A[$+2]=M[$+2],A[$+3]=M[$+3]}return n};F.addGetterSetter(Dt,"embossStrength",.5,Ot(),F.afterSetFilter);F.addGetterSetter(Dt,"embossWhiteLevel",.5,Ot(),F.afterSetFilter);F.addGetterSetter(Dt,"embossDirection","top-left",void 0,F.afterSetFilter);F.addGetterSetter(Dt,"embossBlend",!1,void 0,F.afterSetFilter);function M2(n,t,e,i,s){const l=e-t,c=s-i;if(l===0)return i+c/2;if(c===0)return i;let f=(n-t)/l;return f=c*f+i,f}const vB=function(n){const t=n.data,e=t.length;let i=t[0],s=i,l,c=t[1],f=c,m,g=t[2],A=g,S;const T=this.enhance();if(T===0)return;for(let Y=0;Y<e;Y+=4)l=t[Y+0],l<i?i=l:l>s&&(s=l),m=t[Y+1],m<c?c=m:m>f&&(f=m),S=t[Y+2],S<g?g=S:S>A&&(A=S);s===i&&(s=255,i=0),f===c&&(f=255,c=0),A===g&&(A=255,g=0);let x,w,L,V,G,B;if(T>0)x=s+T*(255-s),w=i-T*(i-0),L=f+T*(255-f),V=c-T*(c-0),G=A+T*(255-A),B=g-T*(g-0);else{const Y=(s+i)*.5;x=s+T*(s-Y),w=i+T*(i-Y);const et=(f+c)*.5;L=f+T*(f-et),V=c+T*(c-et);const at=(A+g)*.5;G=A+T*(A-at),B=g+T*(g-at)}for(let Y=0;Y<e;Y+=4)t[Y+0]=M2(t[Y+0],i,s,w,x),t[Y+1]=M2(t[Y+1],c,f,V,L),t[Y+2]=M2(t[Y+2],g,A,B,G)};F.addGetterSetter(Dt,"enhance",0,Ot(),F.afterSetFilter);const AB=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4){const s=.34*t[i]+.5*t[i+1]+.16*t[i+2];t[i]=s,t[i+1]=s,t[i+2]=s}};F.addGetterSetter(Dt,"hue",0,Ot(),F.afterSetFilter);F.addGetterSetter(Dt,"saturation",0,Ot(),F.afterSetFilter);F.addGetterSetter(Dt,"luminance",0,Ot(),F.afterSetFilter);const EB=function(n){const t=n.data,e=t.length,i=1,s=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,f=i*s*Math.cos(l*Math.PI/180),m=i*s*Math.sin(l*Math.PI/180),g=.299*i+.701*f+.167*m,A=.587*i-.587*f+.33*m,S=.114*i-.114*f-.497*m,T=.299*i-.299*f-.328*m,x=.587*i+.413*f+.035*m,w=.114*i-.114*f+.293*m,L=.299*i-.3*f+1.25*m,V=.587*i-.586*f-1.05*m,G=.114*i+.886*f-.2*m;let B,Y,et,at;for(let tt=0;tt<e;tt+=4)B=t[tt+0],Y=t[tt+1],et=t[tt+2],at=t[tt+3],t[tt+0]=g*B+A*Y+S*et+c,t[tt+1]=T*B+x*Y+w*et+c,t[tt+2]=L*B+V*Y+G*et+c,t[tt+3]=at},SB=function(n){const t=n.data,e=t.length,i=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=i*s*Math.cos(l*Math.PI/180),f=i*s*Math.sin(l*Math.PI/180),m=.299*i+.701*c+.167*f,g=.587*i-.587*c+.33*f,A=.114*i-.114*c-.497*f,S=.299*i-.299*c-.328*f,T=.587*i+.413*c+.035*f,x=.114*i-.114*c+.293*f,w=.299*i-.3*c+1.25*f,L=.587*i-.586*c-1.05*f,V=.114*i+.886*c-.2*f;for(let G=0;G<e;G+=4){const B=t[G+0],Y=t[G+1],et=t[G+2],at=t[G+3];t[G+0]=m*B+g*Y+A*et,t[G+1]=S*B+T*Y+x*et,t[G+2]=w*B+L*Y+V*et,t[G+3]=at}};F.addGetterSetter(Dt,"hue",0,Ot(),F.afterSetFilter);F.addGetterSetter(Dt,"saturation",0,Ot(),F.afterSetFilter);F.addGetterSetter(Dt,"value",0,Ot(),F.afterSetFilter);const TB=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]},bB=function(n,t,e){const i=n.data,s=t.data,l=n.width,c=n.height,f=e.polarCenterX||l/2,m=e.polarCenterY||c/2;let g=Math.sqrt(f*f+m*m),A=l-f,S=c-m;const T=Math.sqrt(A*A+S*S);g=T>g?T:g;const x=c,w=l,L=360/w*Math.PI/180;for(let V=0;V<w;V+=1){const G=Math.sin(V*L),B=Math.cos(V*L);for(let Y=0;Y<x;Y+=1){A=Math.floor(f+g*Y/x*B),S=Math.floor(m+g*Y/x*G);let et=(S*l+A)*4;const at=i[et+0],tt=i[et+1],z=i[et+2],M=i[et+3];et=(V+Y*l)*4,s[et+0]=at,s[et+1]=tt,s[et+2]=z,s[et+3]=M}}},CB=function(n,t,e){const i=n.data,s=t.data,l=n.width,c=n.height,f=e.polarCenterX||l/2,m=e.polarCenterY||c/2;let g=Math.sqrt(f*f+m*m),A=l-f,S=c-m;const T=Math.sqrt(A*A+S*S);g=T>g?T:g;const x=c,w=l,L=0;let V,G;for(A=0;A<l;A+=1)for(S=0;S<c;S+=1){const B=A-f,Y=S-m,et=Math.sqrt(B*B+Y*Y)*x/g;let at=(Math.atan2(Y,B)*180/Math.PI+360+L)%360;at=at*w/360,V=Math.floor(at),G=Math.floor(et);let tt=(G*l+V)*4;const z=i[tt+0],M=i[tt+1],U=i[tt+2],q=i[tt+3];tt=(S*l+A)*4,s[tt+0]=z,s[tt+1]=M,s[tt+2]=U,s[tt+3]=q}},RB=function(n){const t=n.width,e=n.height;let i,s,l,c,f,m,g,A,S,T,x=Math.round(this.kaleidoscopePower());const w=Math.round(this.kaleidoscopeAngle()),L=Math.floor(t*(w%360)/360);if(x<1)return;const V=it.createCanvasElement();V.width=t,V.height=e;const G=V.getContext("2d").getImageData(0,0,t,e);it.releaseCanvas(V),bB(n,G,{polarCenterX:t/2,polarCenterY:e/2});let B=t/Math.pow(2,x);for(;B<=8;)B=B*2,x-=1;B=Math.ceil(B);let Y=B,et=0,at=Y,tt=1;for(L+B>t&&(et=Y,at=0,tt=-1),s=0;s<e;s+=1)for(i=et;i!==at;i+=tt)l=Math.round(i+L)%t,S=(t*s+l)*4,f=G.data[S+0],m=G.data[S+1],g=G.data[S+2],A=G.data[S+3],T=(t*s+i)*4,G.data[T+0]=f,G.data[T+1]=m,G.data[T+2]=g,G.data[T+3]=A;for(s=0;s<e;s+=1)for(Y=Math.floor(B),c=0;c<x;c+=1){for(i=0;i<Y+1;i+=1)S=(t*s+i)*4,f=G.data[S+0],m=G.data[S+1],g=G.data[S+2],A=G.data[S+3],T=(t*s+Y*2-i-1)*4,G.data[T+0]=f,G.data[T+1]=m,G.data[T+2]=g,G.data[T+3]=A;Y*=2}CB(G,n,{})};F.addGetterSetter(Dt,"kaleidoscopePower",2,Ot(),F.afterSetFilter);F.addGetterSetter(Dt,"kaleidoscopeAngle",0,Ot(),F.afterSetFilter);function Sy(n,t,e){let i=(e*n.width+t)*4;const s=[];return s.push(n.data[i++],n.data[i++],n.data[i++],n.data[i++]),s}function pg(n,t){return Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2)+Math.pow(n[2]-t[2],2))}function wB(n){const t=[0,0,0];for(let e=0;e<n.length;e++)t[0]+=n[e][0],t[1]+=n[e][1],t[2]+=n[e][2];return t[0]/=n.length,t[1]/=n.length,t[2]/=n.length,t}function xB(n,t){const e=Sy(n,0,0),i=Sy(n,n.width-1,0),s=Sy(n,0,n.height-1),l=Sy(n,n.width-1,n.height-1),c=t||10;if(pg(e,i)<c&&pg(i,l)<c&&pg(l,s)<c&&pg(s,e)<c){const f=wB([i,e,l,s]),m=[];for(let g=0;g<n.width*n.height;g++){const A=pg(f,[n.data[g*4],n.data[g*4+1],n.data[g*4+2]]);m[g]=A<c?0:255}return m}}function NB(n,t){for(let e=0;e<n.width*n.height;e++)n.data[4*e+3]=t[e]}function DB(n,t,e){const i=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(i.length)),l=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let A=0;for(let S=0;S<s;S++)for(let T=0;T<s;T++){const x=f+S-l,w=m+T-l;if(x>=0&&x<e&&w>=0&&w<t){const L=x*t+w,V=i[S*s+T];A+=n[L]*V}}c[g]=A===2040?255:0}return c}function IB(n,t,e){const i=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(i.length)),l=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let A=0;for(let S=0;S<s;S++)for(let T=0;T<s;T++){const x=f+S-l,w=m+T-l;if(x>=0&&x<e&&w>=0&&w<t){const L=x*t+w,V=i[S*s+T];A+=n[L]*V}}c[g]=A>=1020?255:0}return c}function OB(n,t,e){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(i.length)),l=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let A=0;for(let S=0;S<s;S++)for(let T=0;T<s;T++){const x=f+S-l,w=m+T-l;if(x>=0&&x<e&&w>=0&&w<t){const L=x*t+w,V=i[S*s+T];A+=n[L]*V}}c[g]=A}return c}const MB=function(n){const t=this.threshold();let e=xB(n,t);return e&&(e=DB(e,n.width,n.height),e=IB(e,n.width,n.height),e=OB(e,n.width,n.height),NB(n,e)),n};F.addGetterSetter(Dt,"threshold",0,Ot(),F.afterSetFilter);const LB=function(n){const t=this.noise()*255,e=n.data,i=e.length,s=t/2;for(let l=0;l<i;l+=4)e[l+0]+=s-2*s*Math.random(),e[l+1]+=s-2*s*Math.random(),e[l+2]+=s-2*s*Math.random()};F.addGetterSetter(Dt,"noise",.2,Ot(),F.afterSetFilter);const VB=function(n){let t=Math.ceil(this.pixelSize()),e=n.width,i=n.height,s=Math.ceil(e/t),l=Math.ceil(i/t),c=n.data;if(t<=0){it.error("pixelSize value can not be <= 0");return}for(let f=0;f<s;f+=1)for(let m=0;m<l;m+=1){let g=0,A=0,S=0,T=0;const x=f*t,w=x+t,L=m*t,V=L+t;let G=0;for(let B=x;B<w;B+=1)if(!(B>=e))for(let Y=L;Y<V;Y+=1){if(Y>=i)continue;const et=(e*Y+B)*4;g+=c[et+0],A+=c[et+1],S+=c[et+2],T+=c[et+3],G+=1}g=g/G,A=A/G,S=S/G,T=T/G;for(let B=x;B<w;B+=1)if(!(B>=e))for(let Y=L;Y<V;Y+=1){if(Y>=i)continue;const et=(e*Y+B)*4;c[et+0]=g,c[et+1]=A,c[et+2]=S,c[et+3]=T}}};F.addGetterSetter(Dt,"pixelSize",8,Ot(),F.afterSetFilter);const kB=function(n){const t=Math.round(this.levels()*254)+1,e=n.data,i=e.length,s=255/t;for(let l=0;l<i;l+=1)e[l]=Math.floor(e[l]/s)*s};F.addGetterSetter(Dt,"levels",.5,Ot(),F.afterSetFilter);const PB=function(n){const t=n.data,e=t.length,i=this.red(),s=this.green(),l=this.blue();for(let c=0;c<e;c+=4){const f=(.34*t[c]+.5*t[c+1]+.16*t[c+2])/255;t[c]=f*i,t[c+1]=f*s,t[c+2]=f*l,t[c+3]=t[c+3]}};F.addGetterSetter(Dt,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});F.addGetterSetter(Dt,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});F.addGetterSetter(Dt,"blue",0,s8,F.afterSetFilter);const UB=function(n){const t=n.data,e=t.length,i=this.red(),s=this.green(),l=this.blue(),c=this.alpha();for(let f=0;f<e;f+=4){const m=1-c;t[f]=i*c+t[f]*m,t[f+1]=s*c+t[f+1]*m,t[f+2]=l*c+t[f+2]*m}};F.addGetterSetter(Dt,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});F.addGetterSetter(Dt,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});F.addGetterSetter(Dt,"blue",0,s8,F.afterSetFilter);F.addGetterSetter(Dt,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n});const zB=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4){const s=t[i+0],l=t[i+1],c=t[i+2];t[i+0]=Math.min(255,s*.393+l*.769+c*.189),t[i+1]=Math.min(255,s*.349+l*.686+c*.168),t[i+2]=Math.min(255,s*.272+l*.534+c*.131)}},BB=function(n){const e=n.data;for(let i=0;i<e.length;i+=4){const s=e[i],l=e[i+1],c=e[i+2];.2126*s+.7152*l+.0722*c>=128&&(e[i]=255-s,e[i+1]=255-l,e[i+2]=255-c)}return n},jB=function(n){const t=this.threshold()*255,e=n.data,i=e.length;for(let s=0;s<i;s+=1)e[s]=e[s]<t?0:255};F.addGetterSetter(Dt,"threshold",.5,Ot(),F.afterSetFilter);xm.Util._assign(xm,{Arc:ju,Arrow:Qf,Circle:Fm,Ellipse:vh,Image:ql,Label:GS,Tag:Xf,Line:Gu,Path:Rn,Rect:k0,RegularPolygon:Ah,Ring:Kf,Sprite:Uo,Star:Eh,Text:xn,TextPath:qi,Transformer:je,Wedge:Hu,Filters:{Blur:mB,Brightness:gB,Brighten:pB,Contrast:_B,Emboss:yB,Enhance:vB,Grayscale:AB,HSL:EB,HSV:SB,Invert:TB,Kaleidoscope:RB,Mask:MB,Noise:LB,Pixelate:VB,Posterize:kB,RGB:PB,RGBA:UB,Sepia:zB,Solarize:BB,Threshold:jB}});var L2={exports:{}},V2={exports:{}};var Vb;function GB(){return Vb||(Vb=1,(function(n){n.exports=function(t){function e(o,u,p,y){return new ip(o,u,p,y)}function i(){}function s(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(o){var u=o,p=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(p=u.return),o=u.return;while(o)}return u.tag===3?p:null}function c(o){if(l(o)!==o)throw Error(s(188))}function f(o){var u=o.alternate;if(!u){if(u=l(o),u===null)throw Error(s(188));return u!==o?null:o}for(var p=o,y=u;;){var b=p.return;if(b===null)break;var C=b.alternate;if(C===null){if(y=b.return,y!==null){p=y;continue}break}if(b.child===C.child){for(C=b.child;C;){if(C===p)return c(b),o;if(C===y)return c(b),u;C=C.sibling}throw Error(s(188))}if(p.return!==y.return)p=b,y=C;else{for(var I=!1,J=b.child;J;){if(J===p){I=!0,p=b,y=C;break}if(J===y){I=!0,y=b,p=C;break}J=J.sibling}if(!I){for(J=C.child;J;){if(J===p){I=!0,p=C,y=b;break}if(J===y){I=!0,y=C,p=b;break}J=J.sibling}if(!I)throw Error(s(189))}}if(p.alternate!==y)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?o:u}function m(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=m(o),u!==null)return u;o=o.sibling}return null}function g(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(o.tag!==4&&(u=g(o),u!==null))return u;o=o.sibling}return null}function A(o){return o===null||typeof o!="object"?null:(o=Sl&&o[Sl]||o["@@iterator"],typeof o=="function"?o:null)}function S(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===fo?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case eu:return"Fragment";case iu:return"Profiler";case nu:return"StrictMode";case md:return"Suspense";case El:return"SuspenseList";case Zh:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case tu:return"Portal";case Ca:return o.displayName||"Context";case Jh:return(o._context.displayName||"Context")+".Consumer";case pc:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case pd:return u=o.displayName||null,u!==null?u:S(o.type)||"Memo";case ys:u=o._payload,o=o._init;try{return S(o(u))}catch{}}return null}function T(o){return{current:o}}function x(o){0>ou||(o.current=xd[ou],xd[ou]=null,ou--)}function w(o,u){ou++,xd[ou]=o.current,o.current=u}function L(o){return o>>>=0,o===0?32:31-(Nd(o)/k_|0)|0}function V(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function G(o,u,p){var y=o.pendingLanes;if(y===0)return 0;var b=0,C=o.suspendedLanes,I=o.pingedLanes;o=o.warmLanes;var J=y&134217727;return J!==0?(y=J&~C,y!==0?b=V(y):(I&=J,I!==0?b=V(I):p||(p=J&~o,p!==0&&(b=V(p))))):(J=y&~C,J!==0?b=V(J):I!==0?b=V(I):p||(p=y&~o,p!==0&&(b=V(p)))),b===0?0:u!==0&&u!==b&&(u&C)===0&&(C=b&-b,p=u&-u,C>=p||C===32&&(p&4194048)!==0)?u:b}function B(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function Y(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function et(){var o=Sc;return Sc<<=1,(Sc&62914560)===0&&(Sc=4194304),o}function at(o){for(var u=[],p=0;31>p;p++)u.push(o);return u}function tt(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function z(o,u,p,y,b,C){var I=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var J=o.entanglements,dt=o.expirationTimes,Ct=o.hiddenUpdates;for(p=I&~p;0<p;){var Mt=31-Vs(p),wt=1<<Mt;J[Mt]=0,dt[Mt]=-1;var zt=Ct[Mt];if(zt!==null)for(Ct[Mt]=null,Mt=0;Mt<zt.length;Mt++){var ue=zt[Mt];ue!==null&&(ue.lane&=-536870913)}p&=~wt}y!==0&&M(o,y,0),C!==0&&b===0&&o.tag!==0&&(o.suspendedLanes|=C&~(I&~u))}function M(o,u,p){o.pendingLanes|=u,o.suspendedLanes&=~u;var y=31-Vs(u);o.entangledLanes|=u,o.entanglements[y]=o.entanglements[y]|1073741824|p&261930}function U(o,u){var p=o.entangledLanes|=u;for(o=o.entanglements;p;){var y=31-Vs(p),b=1<<y;b&u|o[y]&u&&(o[y]|=u),p&=~b}}function q(o,u){var p=u&-u;return p=(p&42)!==0?1:X(p),(p&(o.suspendedLanes|u))!==0?0:p}function X(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Q(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function H(o){if(typeof Gp=="function"&&z_(o),ks&&typeof ks.setStrictMode=="function")try{ks.setStrictMode(cu,o)}catch{}}function Ft(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}function Pt(o){if(Vd===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);Vd=u&&u[1]||"",Gr=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vd+o+Gr}function $(o,u){if(!o||of)return"";of=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(ue){var zt=ue}Reflect.construct(o,[],wt)}else{try{wt.call()}catch(ue){zt=ue}o.call(wt.prototype)}}else{try{throw Error()}catch(ue){zt=ue}(wt=o())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(ue){if(ue&&zt&&typeof ue.stack=="string")return[ue.stack,zt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=y.DetermineComponentFrameRoot(),I=C[0],J=C[1];if(I&&J){var dt=I.split(`
`),Ct=J.split(`
`);for(b=y=0;y<dt.length&&!dt[y].includes("DetermineComponentFrameRoot");)y++;for(;b<Ct.length&&!Ct[b].includes("DetermineComponentFrameRoot");)b++;if(y===dt.length||b===Ct.length)for(y=dt.length-1,b=Ct.length-1;1<=y&&0<=b&&dt[y]!==Ct[b];)b--;for(;1<=y&&0<=b;y--,b--)if(dt[y]!==Ct[b]){if(y!==1||b!==1)do if(y--,b--,0>b||dt[y]!==Ct[b]){var Mt=`
`+dt[y].replace(" at new "," at ");return o.displayName&&Mt.includes("<anonymous>")&&(Mt=Mt.replace("<anonymous>",o.displayName)),Mt}while(1<=y&&0<=b);break}}}finally{of=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?Pt(p):""}function Tt(o,u){switch(o.tag){case 26:case 27:case 5:return Pt(o.type);case 16:return Pt("Lazy");case 13:return o.child!==u&&u!==null?Pt("Suspense Fallback"):Pt("Suspense");case 19:return Pt("SuspenseList");case 0:case 15:return $(o.type,!1);case 11:return $(o.type.render,!1);case 1:return $(o.type,!0);case 31:return Pt("Activity");default:return""}}function Et(o){try{var u="",p=null;do u+=Tt(o,p),p=o,o=o.return;while(o);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function Ut(o,u){if(typeof o=="object"&&o!==null){var p=Hp.get(o);return p!==void 0?p:(u={value:o,source:u,stack:Et(u)},Hp.set(o,u),u)}return{value:o,source:u,stack:Et(u)}}function qt(o,u){Cl[Hr++]=uf,Cl[Hr++]=nn,nn=o,uf=u}function K(o,u,p){xa[sa++]=Ui,xa[sa++]=sr,xa[sa++]=Na,Na=o;var y=Ui;o=sr;var b=32-Vs(y)-1;y&=~(1<<b),p+=1;var C=32-Vs(u)+b;if(30<C){var I=b-b%5;C=(y&(1<<I)-1).toString(32),y>>=I,b-=I,Ui=1<<32-Vs(u)+b|p<<b|y,sr=C+o}else Ui=1<<C|p<<b|y,sr=o}function ht(o){o.return!==null&&(qt(o,1),K(o,1,0))}function _t(o){for(;o===nn;)nn=Cl[--Hr],Cl[Hr]=null,uf=Cl[--Hr],Cl[Hr]=null;for(;o===Na;)Na=xa[--sa],xa[sa]=null,sr=xa[--sa],xa[sa]=null,Ui=xa[--sa],xa[sa]=null}function jt(o,u){xa[sa++]=Ui,xa[sa++]=sr,xa[sa++]=Na,Ui=u.id,sr=u.overflow,Na=o}function Yt(o,u){w(zi,u),w(Rl,o),w(bi,null),o=Z0(u),x(bi),w(bi,o)}function te(){x(bi),x(Rl),x(zi)}function Rt(o){o.memoizedState!==null&&w(cf,o);var u=bi.current,p=yc(u,o.type);u!==p&&(w(Rl,o),w(bi,p))}function Ge(o){Rl.current===o&&(x(bi),x(Rl)),cf.current===o&&(x(cf),Xn?ru._currentValue=au:ru._currentValue2=au)}function Oe(o){var u=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ys(Ut(u,o)),kd}function as(o,u){if(!Sn)throw Error(s(175));b_(o.stateNode,o.type,o.memoizedProps,u,o)||Oe(o,!0)}function ua(o){for(mi=o.return;mi;)switch(mi.tag){case 5:case 31:case 13:As=!1;return;case 27:case 3:As=!0;return;default:mi=mi.return}}function Li(o){if(!Sn||o!==mi)return!1;if(!be)return ua(o),be=!0,!1;var u=o.tag;if(di?u!==3&&u!==27&&(u!==5||Ec(o.type)&&!vs(o.type,o.memoizedProps))&&Tn&&Oe(o):u!==3&&(u!==5||Ec(o.type)&&!vs(o.type,o.memoizedProps))&&Tn&&Oe(o),ua(o),u===13){if(!Sn)throw Error(s(316));if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));Tn=Ip(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));Tn=R_(o)}else Tn=di&&u===27?g_(o.type,Tn):mi?p_(o.stateNode):null;return!0}function ws(){Sn&&(Tn=mi=null,be=!1)}function rs(){var o=qr;return o!==null&&(Us===null?Us=o:Us.push.apply(Us,o),qr=null),o}function Ys(o){qr===null?qr=[o]:qr.push(o)}function ls(o,u,p){Xn?(w(Da,u._currentValue),u._currentValue=p):(w(Da,u._currentValue2),u._currentValue2=p)}function Qs(o){var u=Da.current;Xn?o._currentValue=u:o._currentValue2=u,x(Da)}function Yl(o,u,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),o===p)break;o=o.return}}function mr(o,u,p,y){var b=o.child;for(b!==null&&(b.return=o);b!==null;){var C=b.dependencies;if(C!==null){var I=b.child;C=C.firstContext;t:for(;C!==null;){var J=C;C=b;for(var dt=0;dt<u.length;dt++)if(J.context===u[dt]){C.lanes|=p,J=C.alternate,J!==null&&(J.lanes|=p),Yl(C.return,p,o),y||(I=null);break t}C=J.next}}else if(b.tag===18){if(I=b.return,I===null)throw Error(s(341));I.lanes|=p,C=I.alternate,C!==null&&(C.lanes|=p),Yl(I,p,o),I=null}else I=b.child;if(I!==null)I.return=b;else for(I=b;I!==null;){if(I===o){I=null;break}if(b=I.sibling,b!==null){b.return=I.return,I=b;break}I=I.return}b=I}}function xs(o,u,p,y){o=null;for(var b=u,C=!1;b!==null;){if(!C){if((b.flags&524288)!==0)C=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var I=b.alternate;if(I===null)throw Error(s(387));if(I=I.memoizedProps,I!==null){var J=b.type;Wn(b.pendingProps.value,I.value)||(o!==null?o.push(J):o=[J])}}else if(b===cf.current){if(I=b.alternate,I===null)throw Error(s(387));I.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(o!==null?o.push(ru):o=[ru])}b=b.return}o!==null&&mr(u,o,p,y),u.flags|=262144}function Ha(o){for(o=o.firstContext;o!==null;){var u=o.context;if(!Wn(Xn?u._currentValue:u._currentValue2,o.memoizedValue))return!0;o=o.next}return!1}function qa(o){fn=o,ar=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Nn(o){return zo(fn,o)}function jn(o,u){return fn===null&&qa(o),zo(o,u)}function zo(o,u){var p=Xn?u._currentValue:u._currentValue2;if(u={context:u,memoizedValue:p,next:null},ar===null){if(o===null)throw Error(s(308));ar=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else ar=ar.next=u;return p}function Dn(){return{controller:new B_,data:new Map,refCount:0}}function rn(o){o.refCount--,o.refCount===0&&Ci(Tv,function(){o.controller.abort()})}function Fi(){}function os(o){o!==We&&o.next===null&&(We===null?hf=We=o:We=We.next=o),Ia=!0,Wi||(Wi=!0,ni())}function ca(o,u){if(!Pd&&Ia){Pd=!0;do for(var p=!1,y=hf;y!==null;){if(o!==0){var b=y.pendingLanes;if(b===0)var C=0;else{var I=y.suspendedLanes,J=y.pingedLanes;C=(1<<31-Vs(42|o)+1)-1,C&=b&~(I&~J),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(p=!0,Me(y,C))}else C=Ce,C=G(y,y===ve?C:0,y.cancelPendingCommit!==null||y.timeoutHandle!==Ls),(C&3)===0||B(y,C)||(p=!0,Me(y,C));y=y.next}while(p);Pd=!1}}function vt(){Lt()}function Lt(){Ia=Wi=!1;var o=0;yo!==0&&su()&&(o=yo);for(var u=Ki(),p=null,y=hf;y!==null;){var b=y.next,C=Kt(y,u);C===0?(y.next=null,p===null?hf=b:p.next=b,b===null&&(We=p)):(p=y,(o!==0||(C&3)!==0)&&(Ia=!0)),y=b}oi!==0&&oi!==5||ca(o),yo!==0&&(yo=0)}function Kt(o,u){for(var p=o.suspendedLanes,y=o.pingedLanes,b=o.expirationTimes,C=o.pendingLanes&-62914561;0<C;){var I=31-Vs(C),J=1<<I,dt=b[I];dt===-1?((J&p)===0||(J&y)!==0)&&(b[I]=Y(J,u)):dt<=u&&(o.expiredLanes|=J),C&=~J}if(u=ve,p=Ce,p=G(o,o===u?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==Ls),y=o.callbackNode,p===0||o===u&&(Ze===2||Ze===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&Id(y),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||B(o,p)){if(u=p&-p,u===o.callbackPriority)return u;switch(y!==null&&Id(y),Q(p)){case 2:case 8:p=U_;break;case 32:p=lf;break;case 268435456:p=Md;break;default:p=lf}return y=ne.bind(null,o),p=rf(p,y),o.callbackPriority=u,o.callbackNode=p,u}return y!==null&&y!==null&&Id(y),o.callbackPriority=2,o.callbackNode=null,2}function ne(o,u){if(oi!==0&&oi!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if(zr()&&o.callbackNode!==p)return null;var y=Ce;return y=G(o,o===ve?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==Ls),y===0?null:(ir(o,y,u),Kt(o,Ki()),o.callbackNode!=null&&o.callbackNode===p?ne.bind(null,o):null)}function Me(o,u){if(zr())return null;ir(o,u,!0)}function ni(){pp?gp(function(){(Ee&6)!==0?rf(Od,vt):Lt()}):rf(Od,vt)}function Fa(){if(yo===0){var o=wl;o===0&&(o=Dd,Dd<<=1,(Dd&261888)===0&&(Dd=256)),yo=o}return yo}function ha(o,u){if(Tc===null){var p=Tc=[];qp=0,wl=Fa(),pi={status:"pending",value:void 0,then:function(y){p.push(y)}}}return qp++,u.then(Ql,Ql),u}function Ql(){if(--qp===0&&Tc!==null){pi!==null&&(pi.status="fulfilled");var o=Tc;Tc=null,wl=0,pi=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function pr(o,u){var p=[],y={status:"pending",value:null,reason:null,then:function(b){p.push(b)}};return o.then(function(){y.status="fulfilled",y.value=u;for(var b=0;b<p.length;b++)(0,p[b])(u)},function(b){for(y.status="rejected",y.reason=b,b=0;b<p.length;b++)(0,p[b])(void 0)}),y}function fa(){var o=vo.current;return o!==null?o:ve.pooledCache}function Ya(o,u){u===null?w(vo,vo.current):w(vo,u.pool)}function da(){var o=fa();return o===null?null:{parent:Xn?bn._currentValue:bn._currentValue2,pool:o}}function us(o,u){if(Wn(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var p=Object.keys(o),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var b=p[y];if(!Sv.call(u,b)||!Wn(o[b],u[b]))return!1}return!0}function nl(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Bo(o,u,p){switch(p=o[p],p===void 0?o.push(u):p!==u&&(u.then(Fi,Fi),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,il(o),o;default:if(typeof u.status=="string")u.then(Fi,Fi);else{if(o=ve,o!==null&&100<o.shellSuspendCounter)throw Error(s(482));o=u,o.status="pending",o.then(function(y){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=y}},function(y){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,il(o),o}throw Es=u,gi}}function Qa(o){try{var u=o._init;return u(o._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Es=p,gi):p}}function gr(){if(Es===null)throw Error(s(459));var o=Es;return Es=null,o}function il(o){if(o===gi||o===Ma)throw Error(s(483))}function ii(o){var u=hu;return hu+=1,Ao===null&&(Ao=[]),Bo(Ao,o,u)}function sl(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Xa(o,u){throw u.$$typeof===$o?Error(s(525)):(o=Object.prototype.toString.call(u),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function al(o){function u(ut,st){if(o){var ft=ut.deletions;ft===null?(ut.deletions=[st],ut.flags|=16):ft.push(st)}}function p(ut,st){if(!o)return null;for(;st!==null;)u(ut,st),st=st.sibling;return null}function y(ut){for(var st=new Map;ut!==null;)ut.key!==null?st.set(ut.key,ut):st.set(ut.index,ut),ut=ut.sibling;return st}function b(ut,st){return ut=na(ut,st),ut.index=0,ut.sibling=null,ut}function C(ut,st,ft){return ut.index=ft,o?(ft=ut.alternate,ft!==null?(ft=ft.index,ft<st?(ut.flags|=67108866,st):ft):(ut.flags|=67108866,st)):(ut.flags|=1048576,st)}function I(ut){return o&&ut.alternate===null&&(ut.flags|=67108866),ut}function J(ut,st,ft,Nt){return st===null||st.tag!==6?(st=sp(ft,ut.mode,Nt),st.return=ut,st):(st=b(st,ft),st.return=ut,st)}function dt(ut,st,ft,Nt){var $t=ft.type;return $t===eu?Mt(ut,st,ft.props.children,Nt,ft.key):st!==null&&(st.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===ys&&Qa($t)===st.type)?(st=b(st,ft.props),sl(st,ft),st.return=ut,st):(st=Al(ft.type,ft.key,ft.props,null,ut.mode,Nt),sl(st,ft),st.return=ut,st)}function Ct(ut,st,ft,Nt){return st===null||st.tag!==4||st.stateNode.containerInfo!==ft.containerInfo||st.stateNode.implementation!==ft.implementation?(st=rp(ft,ut.mode,Nt),st.return=ut,st):(st=b(st,ft.children||[]),st.return=ut,st)}function Mt(ut,st,ft,Nt,$t){return st===null||st.tag!==7?(st=ba(ft,ut.mode,Nt,$t),st.return=ut,st):(st=b(st,ft),st.return=ut,st)}function wt(ut,st,ft){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return st=sp(""+st,ut.mode,ft),st.return=ut,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case Br:return ft=Al(st.type,st.key,st.props,null,ut.mode,ft),sl(ft,st),ft.return=ut,ft;case tu:return st=rp(st,ut.mode,ft),st.return=ut,st;case ys:return st=Qa(st),wt(ut,st,ft)}if(mo(st)||A(st))return st=ba(st,ut.mode,ft,null),st.return=ut,st;if(typeof st.then=="function")return wt(ut,ii(st),ft);if(st.$$typeof===Ca)return wt(ut,jn(ut,st),ft);Xa(ut,st)}return null}function zt(ut,st,ft,Nt){var $t=st!==null?st.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return $t!==null?null:J(ut,st,""+ft,Nt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case Br:return ft.key===$t?dt(ut,st,ft,Nt):null;case tu:return ft.key===$t?Ct(ut,st,ft,Nt):null;case ys:return ft=Qa(ft),zt(ut,st,ft,Nt)}if(mo(ft)||A(ft))return $t!==null?null:Mt(ut,st,ft,Nt,null);if(typeof ft.then=="function")return zt(ut,st,ii(ft),Nt);if(ft.$$typeof===Ca)return zt(ut,st,jn(ut,ft),Nt);Xa(ut,ft)}return null}function ue(ut,st,ft,Nt,$t){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint")return ut=ut.get(ft)||null,J(st,ut,""+Nt,$t);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case Br:return ut=ut.get(Nt.key===null?ft:Nt.key)||null,dt(st,ut,Nt,$t);case tu:return ut=ut.get(Nt.key===null?ft:Nt.key)||null,Ct(st,ut,Nt,$t);case ys:return Nt=Qa(Nt),ue(ut,st,ft,Nt,$t)}if(mo(Nt)||A(Nt))return ut=ut.get(ft)||null,Mt(st,ut,Nt,$t,null);if(typeof Nt.then=="function")return ue(ut,st,ft,ii(Nt),$t);if(Nt.$$typeof===Ca)return ue(ut,st,ft,jn(st,Nt),$t);Xa(st,Nt)}return null}function Ri(ut,st,ft,Nt){for(var $t=null,Un=null,ee=st,Ue=st=0,wi=null;ee!==null&&Ue<ft.length;Ue++){ee.index>Ue?(wi=ee,ee=null):wi=ee.sibling;var Fe=zt(ut,ee,ft[Ue],Nt);if(Fe===null){ee===null&&(ee=wi);break}o&&ee&&Fe.alternate===null&&u(ut,ee),st=C(Fe,st,Ue),Un===null?$t=Fe:Un.sibling=Fe,Un=Fe,ee=wi}if(Ue===ft.length)return p(ut,ee),be&&qt(ut,Ue),$t;if(ee===null){for(;Ue<ft.length;Ue++)ee=wt(ut,ft[Ue],Nt),ee!==null&&(st=C(ee,st,Ue),Un===null?$t=ee:Un.sibling=ee,Un=ee);return be&&qt(ut,Ue),$t}for(ee=y(ee);Ue<ft.length;Ue++)wi=ue(ee,ut,Ue,ft[Ue],Nt),wi!==null&&(o&&wi.alternate!==null&&ee.delete(wi.key===null?Ue:wi.key),st=C(wi,st,Ue),Un===null?$t=wi:Un.sibling=wi,Un=wi);return o&&ee.forEach(function(ka){return u(ut,ka)}),be&&qt(ut,Ue),$t}function Ic(ut,st,ft,Nt){if(ft==null)throw Error(s(151));for(var $t=null,Un=null,ee=st,Ue=st=0,wi=null,Fe=ft.next();ee!==null&&!Fe.done;Ue++,Fe=ft.next()){ee.index>Ue?(wi=ee,ee=null):wi=ee.sibling;var ka=zt(ut,ee,Fe.value,Nt);if(ka===null){ee===null&&(ee=wi);break}o&&ee&&ka.alternate===null&&u(ut,ee),st=C(ka,st,Ue),Un===null?$t=ka:Un.sibling=ka,Un=ka,ee=wi}if(Fe.done)return p(ut,ee),be&&qt(ut,Ue),$t;if(ee===null){for(;!Fe.done;Ue++,Fe=ft.next())Fe=wt(ut,Fe.value,Nt),Fe!==null&&(st=C(Fe,st,Ue),Un===null?$t=Fe:Un.sibling=Fe,Un=Fe);return be&&qt(ut,Ue),$t}for(ee=y(ee);!Fe.done;Ue++,Fe=ft.next())Fe=ue(ee,ut,Ue,Fe.value,Nt),Fe!==null&&(o&&Fe.alternate!==null&&ee.delete(Fe.key===null?Ue:Fe.key),st=C(Fe,st,Ue),Un===null?$t=Fe:Un.sibling=Fe,Un=Fe);return o&&ee.forEach(function(bv){return u(ut,bv)}),be&&qt(ut,Ue),$t}function xo(ut,st,ft,Nt){if(typeof ft=="object"&&ft!==null&&ft.type===eu&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case Br:t:{for(var $t=ft.key;st!==null;){if(st.key===$t){if($t=ft.type,$t===eu){if(st.tag===7){p(ut,st.sibling),Nt=b(st,ft.props.children),Nt.return=ut,ut=Nt;break t}}else if(st.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===ys&&Qa($t)===st.type){p(ut,st.sibling),Nt=b(st,ft.props),sl(Nt,ft),Nt.return=ut,ut=Nt;break t}p(ut,st);break}else u(ut,st);st=st.sibling}ft.type===eu?(Nt=ba(ft.props.children,ut.mode,Nt,ft.key),Nt.return=ut,ut=Nt):(Nt=Al(ft.type,ft.key,ft.props,null,ut.mode,Nt),sl(Nt,ft),Nt.return=ut,ut=Nt)}return I(ut);case tu:t:{for($t=ft.key;st!==null;){if(st.key===$t)if(st.tag===4&&st.stateNode.containerInfo===ft.containerInfo&&st.stateNode.implementation===ft.implementation){p(ut,st.sibling),Nt=b(st,ft.children||[]),Nt.return=ut,ut=Nt;break t}else{p(ut,st);break}else u(ut,st);st=st.sibling}Nt=rp(ft,ut.mode,Nt),Nt.return=ut,ut=Nt}return I(ut);case ys:return ft=Qa(ft),xo(ut,st,ft,Nt)}if(mo(ft))return Ri(ut,st,ft,Nt);if(A(ft)){if($t=A(ft),typeof $t!="function")throw Error(s(150));return ft=$t.call(ft),Ic(ut,st,ft,Nt)}if(typeof ft.then=="function")return xo(ut,st,ii(ft),Nt);if(ft.$$typeof===Ca)return xo(ut,st,jn(ut,ft),Nt);Xa(ut,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint"?(ft=""+ft,st!==null&&st.tag===6?(p(ut,st.sibling),Nt=b(st,ft),Nt.return=ut,ut=Nt):(p(ut,st),Nt=sp(ft,ut.mode,Nt),Nt.return=ut,ut=Nt),I(ut)):p(ut,st)}return function(ut,st,ft,Nt){try{hu=0;var $t=xo(ut,st,ft,Nt);return Ao=null,$t}catch(ee){if(ee===gi||ee===Ma)throw ee;var Un=e(29,ee,null,ut.mode);return Un.lanes=Nt,Un.return=ut,Un}}}function Xl(){for(var o=Yr,u=fu=Yr=0;u<o;){var p=ji[u];ji[u++]=null;var y=ji[u];ji[u++]=null;var b=ji[u];ji[u++]=null;var C=ji[u];if(ji[u++]=null,y!==null&&b!==null){var I=y.pending;I===null?b.next=b:(b.next=I.next,I.next=b),y.pending=b}C!==0&&Wa(p,b,C)}}function Kl(o,u,p,y){ji[Yr++]=o,ji[Yr++]=u,ji[Yr++]=p,ji[Yr++]=y,fu|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function Ka(o,u,p,y){return Kl(o,u,p,y),pn(o)}function _r(o,u){return Kl(o,null,null,u),pn(o)}function Wa(o,u,p){o.lanes|=p;var y=o.alternate;y!==null&&(y.lanes|=p);for(var b=!1,C=o.return;C!==null;)C.childLanes|=p,y=C.alternate,y!==null&&(y.childLanes|=p),C.tag===22&&(o=C.stateNode,o===null||o._visibility&1||(b=!0)),o=C,C=C.return;return o.tag===3?(C=o.stateNode,b&&u!==null&&(b=31-Vs(p),o=C.hiddenUpdates,y=o[b],y===null?o[b]=[u]:y.push(u),u.lane=p|536870912),C):null}function pn(o){if(50<He)throw He=0,_f=null,Error(s(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}function ui(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ma(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function cs(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Vi(o,u,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(Ee&2)!==0){var b=y.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),y.pending=u,u=pn(o),Wa(o,null,p),u}return Kl(o,y,u,p),pn(o)}function Wl(o,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var y=u.lanes;y&=o.pendingLanes,p|=y,u.lanes=p,U(o,p)}}function jo(o,u){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var b=null,C=null;if(p=p.firstBaseUpdate,p!==null){do{var I={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};C===null?b=C=I:C=C.next=I,p=p.next}while(p!==null);C===null?b=C=u:C=C.next=u}else b=C=u;p={baseState:y.baseState,firstBaseUpdate:b,lastBaseUpdate:C,shared:y.shared,callbacks:y.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=u:o.next=u,p.lastBaseUpdate=u}function Xs(){if(zd){var o=pi;if(o!==null)throw o}}function Ja(o,u,p,y){zd=!1;var b=o.updateQueue;aa=!1;var C=b.firstBaseUpdate,I=b.lastBaseUpdate,J=b.shared.pending;if(J!==null){b.shared.pending=null;var dt=J,Ct=dt.next;dt.next=null,I===null?C=Ct:I.next=Ct,I=dt;var Mt=o.alternate;Mt!==null&&(Mt=Mt.updateQueue,J=Mt.lastBaseUpdate,J!==I&&(J===null?Mt.firstBaseUpdate=Ct:J.next=Ct,Mt.lastBaseUpdate=dt))}if(C!==null){var wt=b.baseState;I=0,Mt=Ct=dt=null,J=C;do{var zt=J.lane&-536870913,ue=zt!==J.lane;if(ue?(Ce&zt)===zt:(y&zt)===zt){zt!==0&&zt===wl&&(zd=!0),Mt!==null&&(Mt=Mt.next={lane:0,tag:J.tag,payload:J.payload,callback:null,next:null});t:{var Ri=o,Ic=J;zt=u;var xo=p;switch(Ic.tag){case 1:if(Ri=Ic.payload,typeof Ri=="function"){wt=Ri.call(xo,wt,zt);break t}wt=Ri;break t;case 3:Ri.flags=Ri.flags&-65537|128;case 0:if(Ri=Ic.payload,zt=typeof Ri=="function"?Ri.call(xo,wt,zt):Ri,zt==null)break t;wt=dd({},wt,zt);break t;case 2:aa=!0}}zt=J.callback,zt!==null&&(o.flags|=64,ue&&(o.flags|=8192),ue=b.callbacks,ue===null?b.callbacks=[zt]:ue.push(zt))}else ue={lane:zt,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Mt===null?(Ct=Mt=ue,dt=wt):Mt=Mt.next=ue,I|=zt;if(J=J.next,J===null){if(J=b.shared.pending,J===null)break;ue=J,J=ue.next,ue.next=null,b.lastBaseUpdate=ue,b.shared.pending=null}}while(!0);Mt===null&&(dt=wt),b.baseState=dt,b.firstBaseUpdate=Ct,b.lastBaseUpdate=Mt,C===null&&(b.shared.lanes=0),Nl|=I,o.lanes=I,o.memoizedState=wt}}function yr(o,u){if(typeof o!="function")throw Error(s(191,o));o.call(u)}function vr(o,u){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)yr(p[o],u)}function Jl(o,u){o=Xr,w(Eo,o),w(du,u),Xr=o|u.baseLanes}function Ks(){w(Eo,Xr),w(du,du.current)}function In(){Xr=Eo.current,x(du),x(Eo)}function Ws(o){var u=o.alternate;w(Hn,Hn.current&1),w(Ps,o),Ss===null&&(u===null||du.current!==null||u.memoizedState!==null)&&(Ss=o)}function Ar(o){w(Hn,Hn.current),w(Ps,o),Ss===null&&(Ss=o)}function Yi(o){o.tag===22?(w(Hn,Hn.current),w(Ps,o),Ss===null&&(Ss=o)):ki()}function ki(){w(Hn,Hn.current),w(Ps,Ps.current)}function hs(o){x(Ps),Ss===o&&(Ss=null),x(Hn)}function Zl(o){for(var u=o;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||go(p)||Ed(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function ln(){throw Error(s(321))}function qu(o,u){if(u===null)return!1;for(var p=0;p<u.length&&p<o.length;p++)if(!Wn(o[p],u[p]))return!1;return!0}function Er(o,u,p,y,b,C){return xl=C,fe=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Jt.H=o===null||o.memoizedState===null?Vn:Qr,Ve=!1,C=p(y,b),Ve=!1,pe&&(C=Js(u,p,y,b)),rl(o),C}function rl(o){Jt.H=ra;var u=Xt!==null&&Xt.next!==null;if(xl=0,le=Xt=fe=null,ye=!1,La=0,rr=null,u)throw Error(s(300));o===null||_n||(o=o.dependencies,o!==null&&Ha(o)&&(_n=!0))}function Js(o,u,p,y){fe=o;var b=0;do{if(pe&&(rr=null),La=0,pe=!1,25<=b)throw Error(s(301));if(b+=1,le=Xt=null,o.updateQueue!=null){var C=o.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}Jt.H=So,C=u(p,y)}while(pe);return C}function fs(){var o=Jt.H,u=o.useState()[0];return u=typeof u.then=="function"?un(u):u,o=o.useState()[0],(Xt!==null?Xt.memoizedState:null)!==o&&(fe.flags|=1024),u}function Fu(){var o=Ji!==0;return Ji=0,o}function Th(o,u,p){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~p}function $l(o){if(ye){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}ye=!1}xl=0,le=Xt=fe=null,pe=!1,La=Ji=0,rr=null}function ci(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return le===null?fe.memoizedState=le=o:le=le.next=o,le}function on(){if(Xt===null){var o=fe.alternate;o=o!==null?o.memoizedState:null}else o=Xt.next;var u=le===null?fe.memoizedState:le.next;if(u!==null)le=u,Xt=o;else{if(o===null)throw fe.alternate===null?Error(s(467)):Error(s(310));Xt=o,o={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},le===null?fe.memoizedState=le=o:le=le.next=o}return le}function pa(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function un(o){var u=La;return La+=1,rr===null&&(rr=[]),o=Bo(rr,o,u),u=fe,(le===null?u.memoizedState:le.next)===null&&(u=u.alternate,Jt.H=u===null||u.memoizedState===null?Vn:Qr),o}function Za(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return un(o);if(o.$$typeof===Ca)return Nn(o)}throw Error(s(438,String(o)))}function ll(o){var u=null,p=fe.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var y=fe.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=pa(),fe.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(o),y=0;y<o;y++)p[y]=op;return u.index++,p}function Ns(o,u){return typeof u=="function"?u(o):u}function Le(o){var u=on();return ol(u,Xt,o)}function ol(o,u,p){var y=o.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=p;var b=o.baseQueue,C=y.pending;if(C!==null){if(b!==null){var I=b.next;b.next=C.next,C.next=I}u.baseQueue=b=C,y.pending=null}if(C=o.baseState,b===null)o.memoizedState=C;else{u=b.next;var J=I=null,dt=null,Ct=u,Mt=!1;do{var wt=Ct.lane&-536870913;if(wt!==Ct.lane?(Ce&wt)===wt:(xl&wt)===wt){var zt=Ct.revertLane;if(zt===0)dt!==null&&(dt=dt.next={lane:0,revertLane:0,gesture:null,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null}),wt===wl&&(Mt=!0);else if((xl&zt)===zt){Ct=Ct.next,zt===wl&&(Mt=!0);continue}else wt={lane:0,revertLane:Ct.revertLane,gesture:null,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},dt===null?(J=dt=wt,I=C):dt=dt.next=wt,fe.lanes|=zt,Nl|=zt;wt=Ct.action,Ve&&p(C,wt),C=Ct.hasEagerState?Ct.eagerState:p(C,wt)}else zt={lane:wt,revertLane:Ct.revertLane,gesture:Ct.gesture,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},dt===null?(J=dt=zt,I=C):dt=dt.next=zt,fe.lanes|=wt,Nl|=wt;Ct=Ct.next}while(Ct!==null&&Ct!==u);if(dt===null?I=C:dt.next=J,!Wn(C,o.memoizedState)&&(_n=!0,Mt&&(p=pi,p!==null)))throw p;o.memoizedState=C,o.baseState=I,o.baseQueue=dt,y.lastRenderedState=C}return b===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function Sr(o){var u=on(),p=u.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=o;var y=p.dispatch,b=p.pending,C=u.memoizedState;if(b!==null){p.pending=null;var I=b=b.next;do C=o(C,I.action),I=I.next;while(I!==b);Wn(C,u.memoizedState)||(_n=!0),u.memoizedState=C,u.baseQueue===null&&(u.baseState=C),p.lastRenderedState=C}return[C,y]}function Zs(o,u,p){var y=fe,b=on(),C=be;if(C){if(p===void 0)throw Error(s(407));p=p()}else p=u();var I=!Wn((Xt||b).memoizedState,p);if(I&&(b.memoizedState=p,_n=!0),b=b.queue,br(bh.bind(null,y,b,o),[o]),b.getSnapshot!==u||I||le!==null&&le.memoizedState.tag&1){if(y.flags|=2048,Ai(9,{destroy:void 0},Yu.bind(null,y,b,p,u),null),ve===null)throw Error(s(349));C||(xl&127)!==0||Jf(y,u,p)}return p}function Jf(o,u,p){o.flags|=16384,o={getSnapshot:u,value:p},u=fe.updateQueue,u===null?(u=pa(),fe.updateQueue=u,u.stores=[o]):(p=u.stores,p===null?u.stores=[o]:p.push(o))}function Yu(o,u,p,y){u.value=p,u.getSnapshot=y,Qu(u)&&Zf(o)}function bh(o,u,p){return p(function(){Qu(u)&&Zf(o)})}function Qu(o){var u=o.getSnapshot;o=o.value;try{var p=u();return!Wn(o,p)}catch{return!0}}function Zf(o){var u=_r(o,2);u!==null&&Mn(u,o,2)}function Ch(o){var u=ci();if(typeof o=="function"){var p=o;if(o=p(),Ve){H(!0);try{p()}finally{H(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:o},u}function $a(o,u,p,y){return o.baseState=p,ol(o,Xt,typeof y=="function"?y:Ns)}function vi(o,u,p,y,b){if(Xo(o))throw Error(s(485));if(o=u.action,o!==null){var C={payload:b,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){C.listeners.push(I)}};Jt.T!==null?p(!0):C.isTransition=!1,y(C),p=u.pending,p===null?(C.next=u.pending=C,Go(u,C)):(C.next=p.next,u.pending=p.next=C)}}function Go(o,u){var p=u.action,y=u.payload,b=o.state;if(u.isTransition){var C=Jt.T,I={};Jt.T=I;try{var J=p(b,y),dt=Jt.S;dt!==null&&dt(I,J),Ho(o,u,J)}catch(Ct){ds(o,u,Ct)}finally{C!==null&&I.types!==null&&(C.types=I.types),Jt.T=C}}else try{C=p(b,y),Ho(o,u,C)}catch(Ct){ds(o,u,Ct)}}function Ho(o,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Tr(o,u,y)},function(y){return ds(o,u,y)}):Tr(o,u,p)}function Tr(o,u,p){u.status="fulfilled",u.value=p,Rh(u),o.state=p,u=o.pending,u!==null&&(p=u.next,p===u?o.pending=null:(p=p.next,u.next=p,Go(o,p)))}function ds(o,u,p){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=p,Rh(u),u=u.next;while(u!==y)}o.action=null}function Rh(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function Xu(o,u){return u}function wh(o,u){if(be){var p=ve.formState;if(p!==null){t:{var y=fe;if(be){if(Tn){var b=m_(Tn,As);if(b){Tn=p_(b),y=wp(b);break t}}Oe(y)}y=!1}y&&(u=p[0])}}p=ci(),p.memoizedState=p.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xu,lastRenderedState:u},p.queue=y,p=Mh.bind(null,fe,y),y.dispatch=p,y=Ch(!1);var C=Qo.bind(null,fe,!1,y.queue);return y=ci(),b={state:u,dispatch:null,action:o,pending:null},y.queue=b,p=vi.bind(null,fe,b,C,p),b.dispatch=p,y.memoizedState=o,[u,p,!1]}function ms(o){var u=on();return ga(u,Xt,o)}function ga(o,u,p){if(u=ol(o,u,Xu)[0],o=Le(Ns)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=un(u)}catch(I){throw I===gi?Ma:I}else y=u;u=on();var b=u.queue,C=b.dispatch;return p!==u.memoizedState&&(fe.flags|=2048,Ai(9,{destroy:void 0},xh.bind(null,b,p),null)),[y,C,o]}function xh(o,u){o.action=u}function tr(o){var u=on(),p=Xt;if(p!==null)return ga(u,p,o);on(),u=u.memoizedState,p=on();var y=p.queue.dispatch;return p.memoizedState=o,[u,y,!1]}function Ai(o,u,p,y){return o={tag:o,create:p,deps:y,inst:u,next:null},u=fe.updateQueue,u===null&&(u=pa(),fe.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,u.lastEffect=o),o}function qo(){return on().memoizedState}function $s(o,u,p,y){var b=ci();fe.flags|=o,b.memoizedState=Ai(1|u,{destroy:void 0},p,y===void 0?null:y)}function er(o,u,p,y){var b=on();y=y===void 0?null:y;var C=b.memoizedState.inst;Xt!==null&&y!==null&&qu(y,Xt.memoizedState.deps)?b.memoizedState=Ai(u,C,p,y):(fe.flags|=o,b.memoizedState=Ai(1|u,C,p,y))}function to(o,u){$s(8390656,8,o,u)}function br(o,u){er(2048,8,o,u)}function gn(o){fe.flags|=4;var u=fe.updateQueue;if(u===null)u=pa(),fe.updateQueue=u,u.events=[o];else{var p=u.events;p===null?u.events=[o]:p.push(o)}}function Pi(o){var u=on().memoizedState;return gn({ref:u,nextImpl:o}),function(){if((Ee&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}function Cr(o,u){return er(4,2,o,u)}function eo(o,u){return er(4,4,o,u)}function ul(o,u){if(typeof u=="function"){o=o();var p=u(o);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function Nh(o,u,p){p=p!=null?p.concat([o]):null,er(4,4,ul.bind(null,u,o),p)}function Rr(){}function Fo(o,u){var p=on();u=u===void 0?null:u;var y=p.memoizedState;return u!==null&&qu(u,y[1])?y[0]:(p.memoizedState=[o,u],o)}function Qi(o,u){var p=on();u=u===void 0?null:u;var y=p.memoizedState;if(u!==null&&qu(u,y[1]))return y[0];if(y=o(),Ve){H(!0);try{o()}finally{H(!1)}}return p.memoizedState=[y,u],y}function cl(o,u,p){return p===void 0||(xl&1073741824)!==0&&(Ce&261930)===0?o.memoizedState=u:(o.memoizedState=p,o=_l(),fe.lanes|=o,Nl|=o,p)}function Dh(o,u,p,y){return Wn(p,u)?p:du.current!==null?(o=cl(o,p,y),Wn(o,u)||(_n=!0),o):(xl&42)===0||(xl&1073741824)!==0&&(Ce&261930)===0?(_n=!0,o.memoizedState=p):(o=_l(),fe.lanes|=o,Nl|=o,u)}function no(o,u,p,y,b){var C=Ra();Te(C!==0&&8>C?C:8);var I=Jt.T,J={};Jt.T=J,Qo(o,!1,u,p);try{var dt=b(),Ct=Jt.S;if(Ct!==null&&Ct(J,dt),dt!==null&&typeof dt=="object"&&typeof dt.then=="function"){var Mt=pr(dt,y);nr(o,u,Mt,En(o))}else nr(o,u,y,En(o))}catch(wt){nr(o,u,{then:function(){},status:"rejected",reason:wt},En())}finally{Te(C),I!==null&&J.types!==null&&(I.types=J.types),Jt.T=I}}function Ih(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:au,baseState:au,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:au},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:p},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function Yo(){return Nn(ru)}function hl(){return on().memoizedState}function Oh(){return on().memoizedState}function Ku(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var p=En();o=cs(p);var y=Vi(u,o,p);y!==null&&(Mn(y,u,p),Wl(y,u,p)),u={cache:Dn()},o.payload=u;return}u=u.return}}function Ym(o,u,p){var y=En();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Xo(o)?Wu(u,p):(p=Ka(o,u,p,y),p!==null&&(Mn(p,o,y),Ju(p,u,y)))}function Mh(o,u,p){var y=En();nr(o,u,p,y)}function nr(o,u,p,y){var b={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Xo(o))Wu(u,b);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=u.lastRenderedReducer,C!==null))try{var I=u.lastRenderedState,J=C(I,p);if(b.hasEagerState=!0,b.eagerState=J,Wn(J,I))return Kl(o,u,b,0),ve===null&&Xl(),!1}catch{}if(p=Ka(o,u,b,y),p!==null)return Mn(p,o,y),Ju(p,u,y),!0}return!1}function Qo(o,u,p,y){if(y={lane:2,revertLane:Fa(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Xo(o)){if(u)throw Error(s(479))}else u=Ka(o,p,y,2),u!==null&&Mn(u,o,2)}function Xo(o){var u=o.alternate;return o===fe||u!==null&&u===fe}function Wu(o,u){pe=ye=!0;var p=o.pending;p===null?u.next=u:(u.next=p.next,p.next=u),o.pending=u}function Ju(o,u,p){if((p&4194048)!==0){var y=u.lanes;y&=o.pendingLanes,p|=y,u.lanes=p,U(o,p)}}function Zu(o,u,p,y){u=o.memoizedState,p=p(y,u),p=p==null?u:dd({},u,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}function fl(o,u,p,y,b,C,I){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,C,I):u.prototype&&u.prototype.isPureReactComponent?!us(p,y)||!us(b,C):!0}function Lh(o,u,p,y){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==o&&ff.enqueueReplaceState(u,u.state,null)}function wr(o,u){var p=u;if("ref"in u){p={};for(var y in u)y!=="ref"&&(p[y]=u[y])}if(o=o.defaultProps){p===u&&(p=dd({},p));for(var b in o)p[b]===void 0&&(p[b]=o[b])}return p}function _a(o,u){try{var p=o.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function $u(o,u,p){try{var y=o.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function tc(o,u,p){return p=cs(p),p.tag=3,p.payload={element:null},p.callback=function(){_a(o,u)},p}function Vh(o){return o=cs(o),o.tag=3,o}function kh(o,u,p,y){var b=p.type.getDerivedStateFromError;if(typeof b=="function"){var C=y.value;o.payload=function(){return b(C)},o.callback=function(){$u(u,p,y)}}var I=p.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(o.callback=function(){$u(u,p,y),typeof b!="function"&&(Dl===null?Dl=new Set([this]):Dl.add(this));var J=y.stack;this.componentDidCatch(y.value,{componentStack:J!==null?J:""})})}function ec(o,u,p,y,b){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=p.alternate,u!==null&&xs(u,p,b,!0),p=Ps.current,p!==null){switch(p.tag){case 31:case 13:return Ss===null?hc():p.alternate===null&&Pn===0&&(Pn=3),p.flags&=-257,p.flags|=65536,p.lanes=b,y===Fr?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([y]):u.add(y),mc(o,y,b)),!1;case 22:return p.flags|=65536,y===Fr?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([y]):p.add(y)),mc(o,y,b)),!1}throw Error(s(435,p.tag))}return mc(o,y,b),hc(),!1}if(be)return u=Ps.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,y!==kd&&(o=Error(s(422),{cause:y}),Ys(Ut(o,p)))):(y!==kd&&(u=Error(s(423),{cause:y}),Ys(Ut(u,p))),o=o.current.alternate,o.flags|=65536,b&=-b,o.lanes|=b,y=Ut(y,p),b=tc(o.stateNode,y,b),jo(o,b),Pn!==4&&(Pn=2)),!1;var C=Error(s(520),{cause:y});if(C=Ut(C,p),mf===null?mf=[C]:mf.push(C),Pn!==4&&(Pn=2),u===null)return!0;y=Ut(y,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,o=b&-b,p.lanes|=o,o=tc(p.stateNode,y,o),jo(p,o),!1;case 1:if(u=p.type,C=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Dl===null||!Dl.has(C))))return p.flags|=65536,b&=-b,p.lanes|=b,b=Vh(b),kh(b,o,p,y),jo(p,b),!1}p=p.return}while(p!==null);return!1}function Qe(o,u,p,y){u.child=o===null?Fp(u,null,p,y):Bi(u,o.child,p,y)}function Ph(o,u,p,y,b){p=p.render;var C=u.ref;if("ref"in y){var I={};for(var J in y)J!=="ref"&&(I[J]=y[J])}else I=y;return qa(u),y=Er(o,u,p,I,C,b),J=Fu(),o!==null&&!_n?(Th(o,u,b),Nr(o,u,b)):(be&&J&&ht(u),u.flags|=1,Qe(o,u,y,b),u.child)}function Uh(o,u,p,y,b){if(o===null){var C=p.type;return typeof C=="function"&&!Jo(C)&&C.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=C,dl(o,u,C,y,b)):(o=Al(p.type,null,y,u,u.mode,b),o.ref=u.ref,o.return=u,u.child=o)}if(C=o.child,!zh(o,b)){var I=C.memoizedProps;if(p=p.compare,p=p!==null?p:us,p(I,y)&&o.ref===u.ref)return Nr(o,u,b)}return u.flags|=1,o=na(C,y),o.ref=u.ref,o.return=u,u.child=o}function dl(o,u,p,y,b){if(o!==null){var C=o.memoizedProps;if(us(C,y)&&o.ref===u.ref)if(_n=!1,u.pendingProps=y=C,zh(o,b))(o.flags&131072)!==0&&(_n=!0);else return u.lanes=o.lanes,Nr(o,u,b)}return qe(o,u,p,y,b)}function _(o,u,p,y){var b=y.children,C=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((u.flags&128)!==0){if(C=C!==null?C.baseLanes|p:p,o!==null){for(y=u.child=o.child,b=0;y!==null;)b=b|y.lanes|y.childLanes,y=y.sibling;y=b&~C}else y=0,u.child=null;return D(o,u,C,p,y)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Ya(u,C!==null?C.cachePool:null),C!==null?Jl(u,C):Ks(),Yi(u);else return y=u.lanes=536870912,D(o,u,C!==null?C.baseLanes|p:p,p,y)}else C!==null?(Ya(u,C.cachePool),Jl(u,C),ki(),u.memoizedState=null):(o!==null&&Ya(u,null),Ks(),ki());return Qe(o,u,b,p),u.child}function R(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function D(o,u,p,y,b){var C=fa();return C=C===null?null:{parent:Xn?bn._currentValue:bn._currentValue2,pool:C},u.memoizedState={baseLanes:p,cachePool:C},o!==null&&Ya(u,null),Ks(),Yi(u),o!==null&&xs(o,u,y,!0),u.childLanes=b,null}function P(o,u){return u=ya({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function rt(o,u,p){return Bi(u,o.child,null,p),o=P(u,u.pendingProps),o.flags|=2,hs(u),u.memoizedState=null,o}function mt(o,u,p){var y=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(be){if(y.mode==="hidden")return o=P(u,y),u.lanes=536870912,R(null,o);if(Ar(u),(o=Tn)?(o=Np(o,As),o!==null&&(u.memoizedState={dehydrated:o,treeContext:Na!==null?{id:Ui,overflow:sr}:null,retryLane:536870912,hydrationErrors:null},p=ap(o),p.return=u,u.child=p,mi=u,Tn=null)):o=null,o===null)throw Oe(u);return u.lanes=536870912,null}return P(u,y)}var C=o.memoizedState;if(C!==null){var I=C.dehydrated;if(Ar(u),b)if(u.flags&256)u.flags&=-257,u=rt(o,u,p);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(s(558));else if(_n||xs(o,u,p,!1),b=(p&o.childLanes)!==0,_n||b){if(y=ve,y!==null&&(I=q(y,p),I!==0&&I!==C.retryLane))throw C.retryLane=I,_r(o,I),Mn(y,o,I),Ts;hc(),u=rt(o,u,p)}else o=C.treeContext,Sn&&(Tn=v_(I),mi=u,be=!0,qr=null,As=!1,o!==null&&jt(u,o)),u=P(u,y),u.flags|=4096;return u}return o=na(o.child,{mode:y.mode,children:y.children}),o.ref=u.ref,u.child=o,o.return=u,o}function It(o,u){var p=u.ref;if(p===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(s(284));(o===null||o.ref!==p)&&(u.flags|=4194816)}}function qe(o,u,p,y,b){return qa(u),p=Er(o,u,p,y,void 0,b),y=Fu(),o!==null&&!_n?(Th(o,u,b),Nr(o,u,b)):(be&&y&&ht(u),u.flags|=1,Qe(o,u,p,b),u.child)}function Qn(o,u,p,y,b,C){return qa(u),u.updateQueue=null,p=Js(u,y,p,b),rl(o),y=Fu(),o!==null&&!_n?(Th(o,u,C),Nr(o,u,C)):(be&&y&&ht(u),u.flags|=1,Qe(o,u,p,C),u.child)}function ge(o,u,p,y,b){if(qa(u),u.stateNode===null){var C=jr,I=p.contextType;typeof I=="object"&&I!==null&&(C=Nn(I)),C=new p(y,C),u.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=ff,u.stateNode=C,C._reactInternals=u,C=u.stateNode,C.props=y,C.state=u.memoizedState,C.refs={},ui(u),I=p.contextType,C.context=typeof I=="object"&&I!==null?Nn(I):jr,C.state=u.memoizedState,I=p.getDerivedStateFromProps,typeof I=="function"&&(Zu(u,p,I,y),C.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(I=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),I!==C.state&&ff.enqueueReplaceState(C,C.state,null),Ja(u,y,C,b),Xs(),C.state=u.memoizedState),typeof C.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(o===null){C=u.stateNode;var J=u.memoizedProps,dt=wr(p,J);C.props=dt;var Ct=C.context,Mt=p.contextType;I=jr,typeof Mt=="object"&&Mt!==null&&(I=Nn(Mt));var wt=p.getDerivedStateFromProps;Mt=typeof wt=="function"||typeof C.getSnapshotBeforeUpdate=="function",J=u.pendingProps!==J,Mt||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(J||Ct!==I)&&Lh(u,C,y,I),aa=!1;var zt=u.memoizedState;C.state=zt,Ja(u,y,C,b),Xs(),Ct=u.memoizedState,J||zt!==Ct||aa?(typeof wt=="function"&&(Zu(u,p,wt,y),Ct=u.memoizedState),(dt=aa||fl(u,p,dt,y,zt,Ct,I))?(Mt||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(u.flags|=4194308)):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=Ct),C.props=y,C.state=Ct,C.context=I,y=dt):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{C=u.stateNode,ma(o,u),I=u.memoizedProps,Mt=wr(p,I),C.props=Mt,wt=u.pendingProps,zt=C.context,Ct=p.contextType,dt=jr,typeof Ct=="object"&&Ct!==null&&(dt=Nn(Ct)),J=p.getDerivedStateFromProps,(Ct=typeof J=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(I!==wt||zt!==dt)&&Lh(u,C,y,dt),aa=!1,zt=u.memoizedState,C.state=zt,Ja(u,y,C,b),Xs();var ue=u.memoizedState;I!==wt||zt!==ue||aa||o!==null&&o.dependencies!==null&&Ha(o.dependencies)?(typeof J=="function"&&(Zu(u,p,J,y),ue=u.memoizedState),(Mt=aa||fl(u,p,Mt,y,zt,ue,dt)||o!==null&&o.dependencies!==null&&Ha(o.dependencies))?(Ct||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(y,ue,dt),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(y,ue,dt)),typeof C.componentDidUpdate=="function"&&(u.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof C.componentDidUpdate!="function"||I===o.memoizedProps&&zt===o.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||I===o.memoizedProps&&zt===o.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=ue),C.props=y,C.state=ue,C.context=dt,y=Mt):(typeof C.componentDidUpdate!="function"||I===o.memoizedProps&&zt===o.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||I===o.memoizedProps&&zt===o.memoizedState||(u.flags|=1024),y=!1)}return C=y,It(o,u),y=(u.flags&128)!==0,C||y?(C=u.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:C.render(),u.flags|=1,o!==null&&y?(u.child=Bi(u,o.child,null,b),u.child=Bi(u,null,p,b)):Qe(o,u,p,b),u.memoizedState=C.state,o=u.child):o=Nr(o,u,b),o}function hi(o,u,p,y){return ws(),u.flags|=256,Qe(o,u,p,y),u.child}function si(o){return{baseLanes:o,cachePool:da()}}function xr(o,u,p){return o=o!==null?o.childLanes&~p:0,u&&(o|=bs),o}function ps(o,u,p){var y=u.pendingProps,b=!1,C=(u.flags&128)!==0,I;if((I=C)||(I=o!==null&&o.memoizedState===null?!1:(Hn.current&2)!==0),I&&(b=!0,u.flags&=-129),I=(u.flags&32)!==0,u.flags&=-33,o===null){if(be){if(b?Ws(u):ki(),(o=Tn)?(o=T_(o,As),o!==null&&(u.memoizedState={dehydrated:o,treeContext:Na!==null?{id:Ui,overflow:sr}:null,retryLane:536870912,hydrationErrors:null},p=ap(o),p.return=u,u.child=p,mi=u,Tn=null)):o=null,o===null)throw Oe(u);return Ed(o)?u.lanes=32:u.lanes=536870912,null}var J=y.children;return y=y.fallback,b?(ki(),b=u.mode,J=ya({mode:"hidden",children:J},b),y=ba(y,b,p,null),J.return=u,y.return=u,J.sibling=y,u.child=J,y=u.child,y.memoizedState=si(p),y.childLanes=xr(o,I,p),u.memoizedState=mu,R(null,y)):(Ws(u),ml(u,J))}var dt=o.memoizedState;if(dt!==null&&(J=dt.dehydrated,J!==null)){if(C)u.flags&256?(Ws(u),u.flags&=-257,u=Ko(o,u,p)):u.memoizedState!==null?(ki(),u.child=o.child,u.flags|=128,u=null):(ki(),J=y.fallback,b=u.mode,y=ya({mode:"visible",children:y.children},b),J=ba(J,b,p,null),J.flags|=2,y.return=u,J.return=u,y.sibling=J,u.child=y,Bi(u,o.child,null,p),y=u.child,y.memoizedState=si(p),y.childLanes=xr(o,I,p),u.memoizedState=mu,u=R(null,y));else if(Ws(u),Ed(J))I=Sd(J).digest,y=Error(s(419)),y.stack="",y.digest=I,Ys({value:y,source:null,stack:null}),u=Ko(o,u,p);else if(_n||xs(o,u,p,!1),I=(p&o.childLanes)!==0,_n||I){if(I=ve,I!==null&&(y=q(I,p),y!==0&&y!==dt.retryLane))throw dt.retryLane=y,_r(o,y),Mn(I,o,y),Ts;go(J)||hc(),u=Ko(o,u,p)}else go(J)?(u.flags|=192,u.child=o.child,u=null):(o=dt.treeContext,Sn&&(Tn=A_(J),mi=u,be=!0,qr=null,As=!1,o!==null&&jt(u,o)),u=ml(u,y.children),u.flags|=4096);return u}return b?(ki(),J=y.fallback,b=u.mode,dt=o.child,C=dt.sibling,y=na(dt,{mode:"hidden",children:y.children}),y.subtreeFlags=dt.subtreeFlags&65011712,C!==null?J=na(C,J):(J=ba(J,b,p,null),J.flags|=2),J.return=u,y.return=u,y.sibling=J,u.child=y,R(null,y),y=u.child,J=o.child.memoizedState,J===null?J=si(p):(b=J.cachePool,b!==null?(dt=Xn?bn._currentValue:bn._currentValue2,b=b.parent!==dt?{parent:dt,pool:dt}:b):b=da(),J={baseLanes:J.baseLanes|p,cachePool:b}),y.memoizedState=J,y.childLanes=xr(o,I,p),u.memoizedState=mu,R(o.child,y)):(Ws(u),p=o.child,o=p.sibling,p=na(p,{mode:"visible",children:y.children}),p.return=u,p.sibling=null,o!==null&&(I=u.deletions,I===null?(u.deletions=[o],u.flags|=16):I.push(o)),u.child=p,u.memoizedState=null,p)}function ml(o,u){return u=ya({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function ya(o,u){return o=e(22,o,null,u),o.lanes=0,o}function Ko(o,u,p){return Bi(u,o.child,null,p),o=ml(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function U0(o,u,p){o.lanes|=u;var y=o.alternate;y!==null&&(y.lanes|=u),Yl(o.return,u,p)}function nc(o,u,p,y,b,C){var I=o.memoizedState;I===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:b,treeForkCount:C}:(I.isBackwards=u,I.rendering=null,I.renderingStartTime=0,I.last=y,I.tail=p,I.tailMode=b,I.treeForkCount=C)}function Qm(o,u,p){var y=u.pendingProps,b=y.revealOrder,C=y.tail;y=y.children;var I=Hn.current,J=(I&2)!==0;if(J?(I=I&1|2,u.flags|=128):I&=1,w(Hn,I),Qe(o,u,y,p),y=be?uf:0,!J&&o!==null&&(o.flags&128)!==0)t:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&U0(o,p,u);else if(o.tag===19)U0(o,p,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break t;for(;o.sibling===null;){if(o.return===null||o.return===u)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(b){case"forwards":for(p=u.child,b=null;p!==null;)o=p.alternate,o!==null&&Zl(o)===null&&(b=p),p=p.sibling;p=b,p===null?(b=u.child,u.child=null):(b=p.sibling,p.sibling=null),nc(u,!1,b,p,C,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,b=u.child,u.child=null;b!==null;){if(o=b.alternate,o!==null&&Zl(o)===null){u.child=b;break}o=b.sibling,b.sibling=p,p=b,b=o}nc(u,!0,p,null,C,y);break;case"together":nc(u,!1,null,null,void 0,y);break;default:u.memoizedState=null}return u.child}function Nr(o,u,p){if(o!==null&&(u.dependencies=o.dependencies),Nl|=u.lanes,(p&u.childLanes)===0)if(o!==null){if(xs(o,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(s(153));if(u.child!==null){for(o=u.child,p=na(o,o.pendingProps),u.child=p,p.return=u;o.sibling!==null;)o=o.sibling,p=p.sibling=na(o,o.pendingProps),p.return=u;p.sibling=null}return u.child}function zh(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Ha(o)))}function Xm(o,u,p){switch(u.tag){case 3:Yt(u,u.stateNode.containerInfo),ls(u,bn,o.memoizedState.cache),ws();break;case 27:case 5:Rt(u);break;case 4:Yt(u,u.stateNode.containerInfo);break;case 10:ls(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Ar(u),null;break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Ws(u),u.flags|=128,null):(p&u.child.childLanes)!==0?ps(o,u,p):(Ws(u),o=Nr(o,u,p),o!==null?o.sibling:null);Ws(u);break;case 19:var b=(o.flags&128)!==0;if(y=(p&u.childLanes)!==0,y||(xs(o,u,p,!1),y=(p&u.childLanes)!==0),b){if(y)return Qm(o,u,p);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),w(Hn,Hn.current),y)break;return null;case 22:return u.lanes=0,_(o,u,p,u.pendingProps);case 24:ls(u,bn,o.memoizedState.cache)}return Nr(o,u,p)}function Km(o,u,p){if(o!==null)if(o.memoizedProps!==u.pendingProps)_n=!0;else{if(!zh(o,p)&&(u.flags&128)===0)return _n=!1,Xm(o,u,p);_n=(o.flags&131072)!==0}else _n=!1,be&&(u.flags&1048576)!==0&&K(u,uf,u.index);switch(u.lanes=0,u.tag){case 16:t:{var y=u.pendingProps;if(o=Qa(u.elementType),u.type=o,typeof o=="function")Jo(o)?(y=wr(o,y),u.tag=1,u=ge(null,u,o,y,p)):(u.tag=0,u=qe(null,u,o,y,p));else{if(o!=null){var b=o.$$typeof;if(b===pc){u.tag=11,u=Ph(null,u,o,y,p);break t}else if(b===pd){u.tag=14,u=Uh(null,u,o,y,p);break t}}throw u=S(o)||o,Error(s(306,u,""))}}return u;case 0:return qe(o,u,u.type,u.pendingProps,p);case 1:return y=u.type,b=wr(y,u.pendingProps),ge(o,u,y,b,p);case 3:t:{if(Yt(u,u.stateNode.containerInfo),o===null)throw Error(s(387));var C=u.pendingProps;b=u.memoizedState,y=b.element,ma(o,u),Ja(u,C,null,p);var I=u.memoizedState;if(C=I.cache,ls(u,bn,C),C!==b.cache&&mr(u,[bn],p,!0),Xs(),C=I.element,Sn&&b.isDehydrated)if(b={element:C,isDehydrated:!1,cache:I.cache},u.updateQueue.baseState=b,u.memoizedState=b,u.flags&256){u=hi(o,u,C,p);break t}else if(C!==y){y=Ut(Error(s(424)),u),Ys(y),u=hi(o,u,C,p);break t}else for(Sn&&(Tn=y_(u.stateNode.containerInfo),mi=u,be=!0,qr=null,As=!0),p=Fp(u,null,C,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(ws(),C===y){u=Nr(o,u,p);break t}Qe(o,u,C,p)}u=u.child}return u;case 26:if(wa)return It(o,u),o===null?(p=Lp(u.type,null,u.pendingProps,null))?u.memoizedState=p:be||(u.stateNode=Rd(u.type,u.pendingProps,zi.current,u)):u.memoizedState=Lp(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:if(di)return Rt(u),o===null&&di&&be&&(y=u.stateNode=wd(u.type,u.pendingProps,zi.current,bi.current,!1),mi=u,As=!0,Tn=xp(u.type,y,Tn)),Qe(o,u,u.pendingProps.children,p),It(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&be&&(O_(u.type,u.pendingProps,bi.current),(b=y=Tn)&&(y=E_(y,u.type,u.pendingProps,As),y!==null?(u.stateNode=y,mi=u,Tn=__(y),As=!1,b=!0):b=!1),b||Oe(u)),Rt(u),b=u.type,C=u.pendingProps,I=o!==null?o.memoizedProps:null,y=C.children,vs(b,C)?y=null:I!==null&&vs(b,I)&&(u.flags|=32),u.memoizedState!==null&&(b=Er(o,u,fs,null,null,p),Xn?ru._currentValue=b:ru._currentValue2=b),It(o,u),Qe(o,u,y,p),u.child;case 6:return o===null&&be&&(Mp(u.pendingProps,bi.current),(o=p=Tn)&&(p=S_(p,u.pendingProps,As),p!==null?(u.stateNode=p,mi=u,Tn=null,o=!0):o=!1),o||Oe(u)),null;case 13:return ps(o,u,p);case 4:return Yt(u,u.stateNode.containerInfo),y=u.pendingProps,o===null?u.child=Bi(u,null,y,p):Qe(o,u,y,p),u.child;case 11:return Ph(o,u,u.type,u.pendingProps,p);case 7:return Qe(o,u,u.pendingProps,p),u.child;case 8:return Qe(o,u,u.pendingProps.children,p),u.child;case 12:return Qe(o,u,u.pendingProps.children,p),u.child;case 10:return y=u.pendingProps,ls(u,u.type,y.value),Qe(o,u,y.children,p),u.child;case 9:return b=u.type._context,y=u.pendingProps.children,qa(u),b=Nn(b),y=y(b),u.flags|=1,Qe(o,u,y,p),u.child;case 14:return Uh(o,u,u.type,u.pendingProps,p);case 15:return dl(o,u,u.type,u.pendingProps,p);case 19:return Qm(o,u,p);case 31:return mt(o,u,p);case 22:return _(o,u,p,u.pendingProps);case 24:return qa(u),y=Nn(bn),o===null?(b=fa(),b===null&&(b=ve,C=Dn(),b.pooledCache=C,C.refCount++,C!==null&&(b.pooledCacheLanes|=p),b=C),u.memoizedState={parent:y,cache:b},ui(u),ls(u,bn,b)):((o.lanes&p)!==0&&(ma(o,u),Ja(u,null,null,p),Xs()),b=o.memoizedState,C=u.memoizedState,b.parent!==y?(b={parent:y,cache:y},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),ls(u,bn,y)):(y=C.cache,ls(u,bn,y),y!==b.cache&&mr(u,[bn],p,!0))),Qe(o,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(s(156,u.tag))}function va(o){o.flags|=4}function Bh(o){ia&&(o.flags|=8)}function z0(o,u){if(o!==null&&o.child===u.child)return!1;if((u.flags&16)!==0)return!0;for(o=u.child;o!==null;){if((o.flags&8218)!==0||(o.subtreeFlags&8218)!==0)return!0;o=o.sibling}return!1}function Wm(o,u,p,y){if(Ne)for(p=u.child;p!==null;){if(p.tag===5||p.tag===6)tf(o,p.stateNode);else if(!(p.tag===4||di&&p.tag===27)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}else if(ia)for(var b=u.child;b!==null;){if(b.tag===5){var C=b.stateNode;p&&y&&(C=d_(C,b.type,b.memoizedProps)),tf(o,C)}else if(b.tag===6)C=b.stateNode,p&&y&&(C=Rp(C,b.memoizedProps)),tf(o,C);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)C=b.child,C!==null&&(C.return=b),Wm(o,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===u)break;for(;b.sibling===null;){if(b.return===null||b.return===u)return;b=b.return}b.sibling.return=b.return,b=b.sibling}}function B0(o,u,p,y){var b=!1;if(ia)for(var C=u.child;C!==null;){if(C.tag===5){var I=C.stateNode;p&&y&&(I=d_(I,C.type,C.memoizedProps)),bp(o,I)}else if(C.tag===6)I=C.stateNode,p&&y&&(I=Rp(I,C.memoizedProps)),bp(o,I);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)b=C.child,b!==null&&(b.return=C),B0(o,C,!0,!0),b=!0;else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===u)break;for(;C.sibling===null;){if(C.return===null||C.return===u)return b;C=C.return}C.sibling.return=C.return,C=C.sibling}return b}function j0(o,u){if(ia&&z0(o,u)){o=u.stateNode;var p=o.containerInfo,y=Tp();B0(y,u,!1,!1),o.pendingChildren=y,va(u),f_(p,y)}}function Jm(o,u,p,y){if(Ne)o.memoizedProps!==y&&va(u);else if(ia){var b=o.stateNode,C=o.memoizedProps;if((o=z0(o,u))||C!==y){var I=bi.current;C=h_(b,p,C,y,!o,null),C===b?u.stateNode=b:(Bh(u),Ms(C,p,y,I)&&va(u),u.stateNode=C,o&&Wm(C,u,!1,!1))}else u.stateNode=b}}function gs(o,u,p,y,b){if((o.mode&32)!==0&&(p===null?ef(u,y):Ac(u,p,y))){if(o.flags|=16777216,(b&335544128)===b||fp(u,y))if(Ln(o.stateNode,u,y))o.flags|=8192;else if(xe())o.flags|=8192;else throw Es=Fr,Ud}else o.flags&=-16777217}function ic(o,u){if(Up(u)){if(o.flags|=16777216,!zp(u))if(xe())o.flags|=8192;else throw Es=Fr,Ud}else o.flags&=-16777217}function jh(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?et():536870912,o.lanes|=u,Nc|=u)}function sc(o,u){if(!be)switch(o.tailMode){case"hidden":u=o.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function cn(o){var u=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(u)for(var b=o.child;b!==null;)p|=b.lanes|b.childLanes,y|=b.subtreeFlags&65011712,y|=b.flags&65011712,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)p|=b.lanes|b.childLanes,y|=b.subtreeFlags,y|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=y,o.childLanes=p,u}function G0(o,u,p){var y=u.pendingProps;switch(_t(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(u),null;case 1:return cn(u),null;case 3:return p=u.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Qs(bn),te(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(Li(u)?va(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,rs())),j0(o,u),cn(u),null;case 26:if(wa){var b=u.type,C=u.memoizedState;return o===null?(va(u),C!==null?(cn(u),ic(u,C)):(cn(u),gs(u,b,null,y,p))):C?C!==o.memoizedState?(va(u),cn(u),ic(u,C)):(cn(u),u.flags&=-16777217):(C=o.memoizedProps,Ne?C!==y&&va(u):Jm(o,u,b,y),cn(u),gs(u,b,C,y,p)),null}case 27:if(di){if(Ge(u),p=zi.current,b=u.type,o!==null&&u.stateNode!=null)Ne?o.memoizedProps!==y&&va(u):Jm(o,u,b,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return cn(u),null}o=bi.current,Li(u)?as(u,o):(o=wd(b,y,p,o,!0),u.stateNode=o,va(u))}return cn(u),null}case 5:if(Ge(u),b=u.type,o!==null&&u.stateNode!=null)Jm(o,u,b,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return cn(u),null}if(C=bi.current,Li(u))as(u,C),N_(u.stateNode,b,y,C)&&(u.flags|=64);else{var I=cp(b,y,zi.current,C,u);Bh(u),Wm(I,u,!1,!1),u.stateNode=I,Ms(I,b,y,C)&&va(u)}}return cn(u),gs(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,p),null;case 6:if(o&&u.stateNode!=null)p=o.memoizedProps,Ne?p!==y&&va(u):ia&&(p!==y?(o=zi.current,p=bi.current,Bh(u),u.stateNode=Tl(y,o,p,u)):u.stateNode=o.stateNode);else{if(typeof y!="string"&&u.stateNode===null)throw Error(s(166));if(o=zi.current,p=bi.current,Li(u)){if(!Sn)throw Error(s(176));if(o=u.stateNode,p=u.memoizedProps,y=null,b=mi,b!==null)switch(b.tag){case 27:case 5:y=b.memoizedProps}vv(o,p,u,y)||Oe(u,!0)}else Bh(u),u.stateNode=Tl(y,o,p,u)}return cn(u),null;case 31:if(p=u.memoizedState,o===null||o.memoizedState!==null){if(y=Li(u),p!==null){if(o===null){if(!y)throw Error(s(318));if(!Sn)throw Error(s(556));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(557));Dp(o,u)}else ws(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;cn(u),o=!1}else p=rs(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=p),o=!0;if(!o)return u.flags&256?(hs(u),u):(hs(u),null);if((u.flags&128)!==0)throw Error(s(558))}return cn(u),null;case 13:if(y=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(b=Li(u),y!==null&&y.dehydrated!==null){if(o===null){if(!b)throw Error(s(318));if(!Sn)throw Error(s(344));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));C_(b,u)}else ws(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;cn(u),b=!1}else b=rs(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(hs(u),u):(hs(u),null)}return hs(u),(u.flags&128)!==0?(u.lanes=p,u):(p=y!==null,o=o!==null&&o.memoizedState!==null,p&&(y=u.child,b=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(b=y.alternate.memoizedState.cachePool.pool),C=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(C=y.memoizedState.cachePool.pool),C!==b&&(y.flags|=2048)),p!==o&&p&&(u.child.flags|=8192),jh(u,u.updateQueue),cn(u),null);case 4:return te(),j0(o,u),o===null&&en(u.stateNode.containerInfo),cn(u),null;case 10:return Qs(u.type),cn(u),null;case 19:if(x(Hn),y=u.memoizedState,y===null)return cn(u),null;if(b=(u.flags&128)!==0,C=y.rendering,C===null)if(b)sc(y,!1);else{if(Pn!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(C=Zl(o),C!==null){for(u.flags|=128,sc(y,!1),o=C.updateQueue,u.updateQueue=o,jh(u,o),u.subtreeFlags=0,o=p,p=u.child;p!==null;)cd(p,o),p=p.sibling;return w(Hn,Hn.current&1|2),be&&qt(u,y.treeForkCount),u.child}o=o.sibling}y.tail!==null&&Ki()>wo&&(u.flags|=128,b=!0,sc(y,!1),u.lanes=4194304)}else{if(!b)if(o=Zl(C),o!==null){if(u.flags|=128,b=!0,o=o.updateQueue,u.updateQueue=o,jh(u,o),sc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!C.alternate&&!be)return cn(u),null}else 2*Ki()-y.renderingStartTime>wo&&p!==536870912&&(u.flags|=128,b=!0,sc(y,!1),u.lanes=4194304);y.isBackwards?(C.sibling=u.child,u.child=C):(o=y.last,o!==null?o.sibling=C:u.child=C,y.last=C)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Ki(),o.sibling=null,p=Hn.current,w(Hn,b?p&1|2:p&1),be&&qt(u,y.treeForkCount),o):(cn(u),null);case 22:case 23:return hs(u),In(),y=u.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(p&536870912)!==0&&(u.flags&128)===0&&(cn(u),u.subtreeFlags&6&&(u.flags|=8192)):cn(u),p=u.updateQueue,p!==null&&jh(u,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048),o!==null&&x(vo),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Qs(bn),cn(u),null;case 25:return null;case 30:return null}throw Error(s(156,u.tag))}function Zm(o,u){switch(_t(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Qs(bn),te(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Ge(u),null;case 31:if(u.memoizedState!==null){if(hs(u),u.alternate===null)throw Error(s(340));ws()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(hs(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(s(340));ws()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return x(Hn),null;case 4:return te(),null;case 10:return Qs(u.type),null;case 22:case 23:return hs(u),In(),o!==null&&x(vo),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Qs(bn),null;case 25:return null;default:return null}}function H0(o,u){switch(_t(u),u.tag){case 3:Qs(bn),te();break;case 26:case 27:case 5:Ge(u);break;case 4:te();break;case 31:u.memoizedState!==null&&hs(u);break;case 13:hs(u);break;case 19:x(Hn);break;case 10:Qs(u.type);break;case 22:case 23:hs(u),In(),o!==null&&x(vo);break;case 24:Qs(bn)}}function Dr(o,u){try{var p=u.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var b=y.next;p=b;do{if((p.tag&o)===o){y=void 0;var C=p.create,I=p.inst;y=C(),I.destroy=y}p=p.next}while(p!==b)}}catch(J){se(u,u.return,J)}}function Ir(o,u,p){try{var y=u.updateQueue,b=y!==null?y.lastEffect:null;if(b!==null){var C=b.next;y=C;do{if((y.tag&o)===o){var I=y.inst,J=I.destroy;if(J!==void 0){I.destroy=void 0,b=u;var dt=p,Ct=J;try{Ct()}catch(Mt){se(b,dt,Mt)}}}y=y.next}while(y!==C)}}catch(Mt){se(u,u.return,Mt)}}function ac(o){var u=o.updateQueue;if(u!==null){var p=o.stateNode;try{vr(u,p)}catch(y){se(o,o.return,y)}}}function $f(o,u,p){p.props=wr(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(y){se(o,u,y)}}function rc(o,u){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var y=_c(o.stateNode);break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof p=="function"?o.refCleanup=p(y):p.current=y}}catch(b){se(o,u,b)}}function Xi(o,u){var p=o.ref,y=o.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(b){se(o,u,b)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(b){se(o,u,b)}else p.current=null}function Wo(o){var u=o.type,p=o.memoizedProps,y=o.stateNode;try{i_(y,u,p,o)}catch(b){se(o,o.return,b)}}function Gh(o,u,p){try{s_(o.stateNode,o.type,p,u,o)}catch(y){se(o,o.return,y)}}function $m(o){return o.tag===5||o.tag===3||(wa?o.tag===26:!1)||(di?o.tag===27&&lu(o.type):!1)||o.tag===4}function pl(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||$m(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(di&&o.tag===27&&lu(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function td(o,u,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?r_(p,o,u):vp(p,o);else if(y!==4&&(di&&y===27&&lu(o.type)&&(p=o.stateNode,u=null),o=o.child,o!==null))for(td(o,u,p),o=o.sibling;o!==null;)td(o,u,p),o=o.sibling}function Hh(o,u,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?a_(p,o,u):yp(p,o);else if(y!==4&&(di&&y===27&&lu(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(Hh(o,u,p),o=o.sibling;o!==null;)Hh(o,u,p),o=o.sibling}function tp(o,u,p){o=o.containerInfo;try{Cp(o,p)}catch(y){se(u,u.return,y)}}function q0(o){var u=o.stateNode,p=o.memoizedProps;try{ri(o.type,p,u,o)}catch(y){se(o,o.return,y)}}function pv(o,u){for(gd(o.containerInfo),Jn=u;Jn!==null;)if(o=Jn,u=o.child,(o.subtreeFlags&1028)!==0&&u!==null)u.return=o,Jn=u;else for(;Jn!==null;){o=Jn;var p=o.alternate;switch(u=o.flags,o.tag){case 0:if((u&4)!==0&&(u=o.updateQueue,u=u!==null?u.events:null,u!==null))for(var y=0;y<u.length;y++){var b=u[y];b.ref.impl=b.nextImpl}break;case 11:case 15:break;case 1:if((u&1024)!==0&&p!==null){u=void 0,y=o,b=p.memoizedProps,p=p.memoizedState;var C=y.stateNode;try{var I=wr(y.type,b);u=C.getSnapshotBeforeUpdate(I,p),C.__reactInternalSnapshotBeforeUpdate=u}catch(J){se(y,y.return,J)}}break;case 3:(u&1024)!==0&&Ne&&Sp(o.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(s(163))}if(u=o.sibling,u!==null){u.return=o.return,Jn=u;break}Jn=o.return}}function F0(o,u,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:_s(o,p),y&4&&Dr(5,p);break;case 1:if(_s(o,p),y&4)if(o=p.stateNode,u===null)try{o.componentDidMount()}catch(I){se(p,p.return,I)}else{var b=wr(p.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(b,u,o.__reactInternalSnapshotBeforeUpdate)}catch(I){se(p,p.return,I)}}y&64&&ac(p),y&512&&rc(p,p.return);break;case 3:if(_s(o,p),y&64&&(y=p.updateQueue,y!==null)){if(o=null,p.child!==null)switch(p.child.tag){case 27:case 5:o=_c(p.child.stateNode);break;case 1:o=p.child.stateNode}try{vr(y,o)}catch(I){se(p,p.return,I)}}break;case 27:di&&u===null&&y&4&&q0(p);case 26:case 5:if(_s(o,p),u===null){if(y&4)Wo(p);else if(y&64){o=p.type,u=p.memoizedProps,b=p.stateNode;try{w_(b,o,u,p)}catch(I){se(p,p.return,I)}}}y&512&&rc(p,p.return);break;case 12:_s(o,p);break;case 31:_s(o,p),y&4&&Ea(o,p);break;case 13:_s(o,p),y&4&&Fh(o,p),y&64&&(y=p.memoizedState,y!==null&&(y=y.dehydrated,y!==null&&(p=gv.bind(null,p),Td(y,p))));break;case 22:if(y=p.memoizedState!==null||qn,!y){u=u!==null&&u.memoizedState!==null||Fn,b=qn;var C=Fn;qn=y,(Fn=u)&&!C?Ta(o,p,(p.subtreeFlags&8772)!==0):_s(o,p),qn=b,Fn=C}break;case 30:break;default:_s(o,p)}}function ep(o){var u=o.alternate;u!==null&&(o.alternate=null,ep(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&_d(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Aa(o,u,p){for(p=p.child;p!==null;)qh(o,u,p),p=p.sibling}function qh(o,u,p){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(cu,p)}catch{}switch(p.tag){case 26:if(wa){Fn||Xi(p,u),Aa(o,u,p),p.memoizedState?_o(p.memoizedState):p.stateNode&&Pp(p.stateNode);break}case 27:if(di){Fn||Xi(p,u);var y=kn,b=Zn;lu(p.type)&&(kn=p.stateNode,Zn=!1),Aa(o,u,p),Ti(p.stateNode),kn=y,Zn=b;break}case 5:Fn||Xi(p,u);case 6:if(Ne){if(y=kn,b=Zn,kn=null,Aa(o,u,p),kn=y,Zn=b,kn!==null)if(Zn)try{Ap(kn,p.stateNode)}catch(C){se(p,u,C)}else try{l_(kn,p.stateNode)}catch(C){se(p,u,C)}}else Aa(o,u,p);break;case 18:Ne&&kn!==null&&(Zn?bd(kn,p.stateNode):Op(kn,p.stateNode));break;case 4:Ne?(y=kn,b=Zn,kn=p.stateNode.containerInfo,Zn=!0,Aa(o,u,p),kn=y,Zn=b):(ia&&tp(p.stateNode,p,Tp()),Aa(o,u,p));break;case 0:case 11:case 14:case 15:Ir(2,p,u),Fn||Ir(4,p,u),Aa(o,u,p);break;case 1:Fn||(Xi(p,u),y=p.stateNode,typeof y.componentWillUnmount=="function"&&$f(p,u,y)),Aa(o,u,p);break;case 21:Aa(o,u,p);break;case 22:Fn=(y=Fn)||p.memoizedState!==null,Aa(o,u,p),Fn=y;break;default:Aa(o,u,p)}}function Ea(o,u){if(Sn&&u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Av(o)}catch(p){se(u,u.return,p)}}}function Fh(o,u){if(Sn&&u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Ev(o)}catch(p){se(u,u.return,p)}}function Sa(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new Qp),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new Qp),u;default:throw Error(s(435,o.tag))}}function gl(o,u){var p=Sa(o);u.forEach(function(y){if(!p.has(y)){p.add(y);var b=_v.bind(null,o,y);y.then(b,b)}})}function Ei(o,u){var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var b=p[y],C=o,I=u;if(Ne){var J=I;t:for(;J!==null;){switch(J.tag){case 27:if(di){if(lu(J.type)){kn=J.stateNode,Zn=!1;break t}break}case 5:kn=J.stateNode,Zn=!1;break t;case 3:case 4:kn=J.stateNode.containerInfo,Zn=!0;break t}J=J.return}if(kn===null)throw Error(s(160));qh(C,I,b),kn=null,Zn=!1}else qh(C,I,b);C=b.alternate,C!==null&&(C.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Yh(u,o),u=u.sibling}function Yh(o,u){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ei(u,o),Si(o),y&4&&(Ir(3,o,o.return),Dr(3,o),Ir(5,o,o.return));break;case 1:Ei(u,o),Si(o),y&512&&(Fn||p===null||Xi(p,p.return)),y&64&&qn&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:if(wa){var b=Je;if(Ei(u,o),Si(o),y&512&&(Fn||p===null||Xi(p,p.return)),y&4){y=p!==null?p.memoizedState:null;var C=o.memoizedState;p===null?C===null?o.stateNode===null?o.stateNode=M_(b,o.type,o.memoizedProps,o):kp(b,o.type,o.stateNode):o.stateNode=Vp(b,C,o.memoizedProps):y!==C?(y===null?p.stateNode!==null&&Pp(p.stateNode):_o(y),C===null?kp(b,o.type,o.stateNode):Vp(b,C,o.memoizedProps)):C===null&&o.stateNode!==null&&Gh(o,o.memoizedProps,p.memoizedProps)}break}case 27:if(di){Ei(u,o),Si(o),y&512&&(Fn||p===null||Xi(p,p.return)),p!==null&&y&4&&Gh(o,o.memoizedProps,p.memoizedProps);break}case 5:if(Ei(u,o),Si(o),y&512&&(Fn||p===null||Xi(p,p.return)),Ne){if(o.flags&32){b=o.stateNode;try{Ep(b)}catch(wt){se(o,o.return,wt)}}y&4&&o.stateNode!=null&&(b=o.memoizedProps,Gh(o,b,p!==null?p.memoizedProps:b)),y&1024&&(bc=!0)}else ia&&o.alternate!==null&&(o.alternate.stateNode=o.stateNode);break;case 6:if(Ei(u,o),Si(o),y&4&&Ne){if(o.stateNode===null)throw Error(s(162));y=o.memoizedProps,p=p!==null?p.memoizedProps:y,b=o.stateNode;try{n_(b,p,y)}catch(wt){se(o,o.return,wt)}}break;case 3:if(wa?(L_(),b=Je,Je=af(u.containerInfo),Ei(u,o),Je=b):Ei(u,o),Si(o),y&4){if(Ne&&Sn&&p!==null&&p.memoizedState.isDehydrated)try{x_(u.containerInfo)}catch(wt){se(o,o.return,wt)}if(ia){y=u.containerInfo,p=u.pendingChildren;try{Cp(y,p)}catch(wt){se(o,o.return,wt)}}}bc&&(bc=!1,ed(o));break;case 4:wa?(p=Je,Je=af(o.stateNode.containerInfo),Ei(u,o),Si(o),Je=p):(Ei(u,o),Si(o)),y&4&&ia&&tp(o.stateNode,o,o.stateNode.pendingChildren);break;case 12:Ei(u,o),Si(o);break;case 31:Ei(u,o),Si(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,gl(o,y)));break;case 13:Ei(u,o),Si(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(pf=Ki()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,gl(o,y)));break;case 22:b=o.memoizedState!==null;var I=p!==null&&p.memoizedState!==null,J=qn,dt=Fn;if(qn=J||b,Fn=dt||I,Ei(u,o),Fn=dt,qn=J,Si(o),y&8192&&(u=o.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(p===null||I||qn||Fn||io(o)),Ne)){t:if(p=null,Ne)for(u=o;;){if(u.tag===5||wa&&u.tag===26){if(p===null){I=p=u;try{C=I.stateNode,b?yv(C):u_(I.stateNode,I.memoizedProps)}catch(wt){se(I,I.return,wt)}}}else if(u.tag===6){if(p===null){I=u;try{var Ct=I.stateNode;b?o_(Ct):c_(Ct,I.memoizedProps)}catch(wt){se(I,I.return,wt)}}}else if(u.tag===18){if(p===null){I=u;try{var Mt=I.stateNode;b?D_(Mt):I_(I.stateNode)}catch(wt){se(I,I.return,wt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break t;for(;u.sibling===null;){if(u.return===null||u.return===o)break t;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}}y&4&&(y=o.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,gl(o,p))));break;case 19:Ei(u,o),Si(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,gl(o,y)));break;case 30:break;case 21:break;default:Ei(u,o),Si(o)}}function Si(o){var u=o.flags;if(u&2){try{for(var p,y=o.return;y!==null;){if($m(y)){p=y;break}y=y.return}if(Ne){if(p==null)throw Error(s(160));switch(p.tag){case 27:if(di){var b=p.stateNode,C=pl(o);Hh(o,C,b);break}case 5:var I=p.stateNode;p.flags&32&&(Ep(I),p.flags&=-33);var J=pl(o);Hh(o,J,I);break;case 3:case 4:var dt=p.stateNode.containerInfo,Ct=pl(o);td(o,Ct,dt);break;default:throw Error(s(161))}}}catch(Mt){se(o,o.return,Mt)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function ed(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;ed(u),u.tag===5&&u.flags&1024&&mp(u.stateNode),o=o.sibling}}function _s(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)F0(o,u.alternate,u),u=u.sibling}function io(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Ir(4,u,u.return),io(u);break;case 1:Xi(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&$f(u,u.return,p),io(u);break;case 27:di&&Ti(u.stateNode);case 26:case 5:Xi(u,u.return),io(u);break;case 22:u.memoizedState===null&&io(u);break;case 30:io(u);break;default:io(u)}o=o.sibling}}function Ta(o,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,b=o,C=u,I=C.flags;switch(C.tag){case 0:case 11:case 15:Ta(b,C,p),Dr(4,C);break;case 1:if(Ta(b,C,p),y=C,b=y.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Ct){se(y,y.return,Ct)}if(y=C,b=y.updateQueue,b!==null){var J=y.stateNode;try{var dt=b.shared.hiddenCallbacks;if(dt!==null)for(b.shared.hiddenCallbacks=null,b=0;b<dt.length;b++)yr(dt[b],J)}catch(Ct){se(y,y.return,Ct)}}p&&I&64&&ac(C),rc(C,C.return);break;case 27:di&&q0(C);case 26:case 5:Ta(b,C,p),p&&y===null&&I&4&&Wo(C),rc(C,C.return);break;case 12:Ta(b,C,p);break;case 31:Ta(b,C,p),p&&I&4&&Ea(b,C);break;case 13:Ta(b,C,p),p&&I&4&&Fh(b,C);break;case 22:C.memoizedState===null&&Ta(b,C,p),rc(C,C.return);break;case 30:break;default:Ta(b,C,p)}u=u.sibling}}function so(o,u){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&rn(p))}function np(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&rn(o))}function On(o,u,p,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)nd(o,u,p,y),u=u.sibling}function nd(o,u,p,y){var b=u.flags;switch(u.tag){case 0:case 11:case 15:On(o,u,p,y),b&2048&&Dr(9,u);break;case 1:On(o,u,p,y);break;case 3:On(o,u,p,y),b&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&rn(o)));break;case 12:if(b&2048){On(o,u,p,y),o=u.stateNode;try{var C=u.memoizedProps,I=C.id,J=C.onPostCommit;typeof J=="function"&&J(I,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(dt){se(u,u.return,dt)}}else On(o,u,p,y);break;case 31:On(o,u,p,y);break;case 13:On(o,u,p,y);break;case 23:break;case 22:C=u.stateNode,I=u.alternate,u.memoizedState!==null?C._visibility&2?On(o,u,p,y):lc(o,u):C._visibility&2?On(o,u,p,y):(C._visibility|=2,Ds(o,u,p,y,(u.subtreeFlags&10256)!==0||!1)),b&2048&&so(I,u);break;case 24:On(o,u,p,y),b&2048&&np(u.alternate,u);break;default:On(o,u,p,y)}}function Ds(o,u,p,y,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var C=o,I=u,J=p,dt=y,Ct=I.flags;switch(I.tag){case 0:case 11:case 15:Ds(C,I,J,dt,b),Dr(8,I);break;case 23:break;case 22:var Mt=I.stateNode;I.memoizedState!==null?Mt._visibility&2?Ds(C,I,J,dt,b):lc(C,I):(Mt._visibility|=2,Ds(C,I,J,dt,b)),b&&Ct&2048&&so(I.alternate,I);break;case 24:Ds(C,I,J,dt,b),b&&Ct&2048&&np(I.alternate,I);break;default:Ds(C,I,J,dt,b)}u=u.sibling}}function lc(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=o,y=u,b=y.flags;switch(y.tag){case 22:lc(p,y),b&2048&&so(y.alternate,y);break;case 24:lc(p,y),b&2048&&np(y.alternate,y);break;default:lc(p,y)}u=u.sibling}}function Or(o,u,p){if(o.subtreeFlags&la)for(o=o.child;o!==null;)ao(o,u,p),o=o.sibling}function ao(o,u,p){switch(o.tag){case 26:if(Or(o,u,p),o.flags&la)if(o.memoizedState!==null)V_(p,Je,o.memoizedState,o.memoizedProps);else{var y=o.stateNode,b=o.type;o=o.memoizedProps,((u&335544128)===u||fp(b,o))&&yd(p,y,b,o)}break;case 5:Or(o,u,p),o.flags&la&&(y=o.stateNode,b=o.type,o=o.memoizedProps,((u&335544128)===u||fp(b,o))&&yd(p,y,b,o));break;case 3:case 4:wa?(y=Je,Je=af(o.stateNode.containerInfo),Or(o,u,p),Je=y):Or(o,u,p);break;case 22:o.memoizedState===null&&(y=o.alternate,y!==null&&y.memoizedState!==null?(y=la,la=16777216,Or(o,u,p),la=y):Or(o,u,p));break;default:Or(o,u,p)}}function id(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function oc(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];Jn=y,ta(y,o)}id(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)sd(o),o=o.sibling}function sd(o){switch(o.tag){case 0:case 11:case 15:oc(o),o.flags&2048&&Ir(9,o,o.return);break;case 3:oc(o);break;case 12:oc(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Qh(o)):oc(o);break;default:oc(o)}}function Qh(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];Jn=y,ta(y,o)}id(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Ir(8,u,u.return),Qh(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,Qh(u));break;default:Qh(u)}o=o.sibling}}function ta(o,u){for(;Jn!==null;){var p=Jn;switch(p.tag){case 0:case 11:case 15:Ir(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:rn(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Jn=y;else t:for(p=o;Jn!==null;){y=Jn;var b=y.sibling,C=y.return;if(ep(y),y===p){Jn=null;break t}if(b!==null){b.return=C,Jn=b;break t}Jn=C}}}function ro(o){var u=he(o);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if(o=Kn(o),o===null)throw Error(s(362));return o.stateNode.current}function lo(o,u){var p=o.tag;switch(u.$$typeof){case Va:if(o.type===u.value)return!0;break;case Rc:t:{for(u=u.value,o=[o,0],p=0;p<o.length;){var y=o[p++],b=y.tag,C=o[p++],I=u[C];if(b!==5&&b!==26&&b!==27||!po(y)){for(;I!=null&&lo(y,I);)C++,I=u[C];if(C===u.length){u=!0;break t}else for(y=y.child;y!==null;)o.push(y,C),y=y.sibling}}u=!1}return u;case wc:if((p===5||p===26||p===27)&&_p(o.stateNode,u.value))return!0;break;case To:if((p===5||p===6||p===26||p===27)&&(o=nf(o),o!==null&&0<=o.indexOf(u.value)))return!0;break;case df:if((p===5||p===26||p===27)&&(o=o.memoizedProps["data-testname"],typeof o=="string"&&o.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function uc(o){switch(o.$$typeof){case Va:return"<"+(S(o.value)||"Unknown")+">";case Rc:return":has("+(uc(o)||"")+")";case wc:return'[role="'+o.value+'"]';case To:return'"'+o.value+'"';case df:return'[data-testname="'+o.value+'"]';default:throw Error(s(365))}}function cc(o,u){var p=[];o=[o,0];for(var y=0;y<o.length;){var b=o[y++],C=b.tag,I=o[y++],J=u[I];if(C!==5&&C!==26&&C!==27||!po(b)){for(;J!=null&&lo(b,J);)I++,J=u[I];if(I===u.length)p.push(b);else for(b=b.child;b!==null;)o.push(b,I),b=b.sibling}}return p}function Is(o,u){if(!fi)throw Error(s(363));o=ro(o),o=cc(o,u),u=[],o=Array.from(o);for(var p=0;p<o.length;){var y=o[p++],b=y.tag;if(b===5||b===26||b===27)po(y)||u.push(y.stateNode);else for(y=y.child;y!==null;)o.push(y),y=y.sibling}return u}function En(){return(Ee&2)!==0&&Ce!==0?Ce&-Ce:Jt.T!==null?Fa():vc()}function _l(){if(bs===0)if((Ce&536870912)===0||be){var o=uu;uu<<=1,(uu&3932160)===0&&(uu=262144),bs=o}else bs=536870912;return o=Ps.current,o!==null&&(o.flags|=32),bs}function Mn(o,u,p){(o===ve&&(Ze===2||Ze===9)||o.cancelPendingCommit!==null)&&(Gn(o,0),Lr(o,Ce,bs,!1)),tt(o,p),((Ee&2)===0||o!==ve)&&(o===ve&&((Ee&2)===0&&(Ro|=p),Pn===4&&Lr(o,Ce,bs,!1)),os(o))}function ir(o,u,p){if((Ee&6)!==0)throw Error(s(327));var y=!p&&(u&127)===0&&(u&o.expiredLanes)===0||B(o,u),b=y?X0(o,u):Vr(o,u,!0),C=y;do{if(b===0){bo&&!y&&Lr(o,u,0,!1);break}else{if(p=o.current.alternate,C&&!Y0(p)){b=Vr(o,u,!1),C=!1;continue}if(b===2){if(C=u,o.errorRecoveryDisabledLanes&C)var I=0;else I=o.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){u=I;t:{var J=o;b=mf;var dt=Sn&&J.current.memoizedState.isDehydrated;if(dt&&(Gn(J,I).flags|=256),I=Vr(J,I,!1),I!==2){if(Co&&!dt){J.errorRecoveryDisabledLanes|=C,Ro|=C,b=4;break t}C=Us,Us=b,C!==null&&(Us===null?Us=C:Us.push.apply(Us,C))}b=I}if(C=!1,b!==2)continue}}if(b===1){Gn(o,0),Lr(o,u,0,!0);break}t:{switch(y=o,C=b,C){case 0:case 1:throw Error(s(345));case 4:if((u&4194048)!==u)break;case 6:Lr(y,u,bs,!lr);break t;case 2:Us=null;break;case 3:case 5:break;default:throw Error(s(329))}if((u&62914560)===u&&(b=pf+300-Ki(),10<b)){if(Lr(y,u,bs,!lr),G(y,0,!0)!==0)break t;Kr=u,y.timeoutHandle=hp(Mr.bind(null,y,p,Us,gf,Bd,u,bs,Ro,Nc,lr,C,"Throttled",-0,0),b);break t}Mr(y,p,Us,gf,Bd,u,bs,Ro,Nc,lr,C,null,-0,0)}}break}while(!0);os(o)}function Mr(o,u,p,y,b,C,I,J,dt,Ct,Mt,wt,zt,ue){if(o.timeoutHandle=Ls,wt=u.subtreeFlags,wt&8192||(wt&16785408)===16785408){wt=dp(),ao(u,C,wt);var Ri=(C&62914560)===C?pf-Ki():(C&4194048)===C?gu-Ki():0;if(Ri=e_(wt,Ri),Ri!==null){Kr=C,o.cancelPendingCommit=Ri(Pr.bind(null,o,u,C,p,y,b,I,J,dt,Mt,wt,null,zt,ue)),Lr(o,C,I,!Ct);return}}Pr(o,u,C,p,y,b,I,J,dt)}function Y0(o){for(var u=o;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var b=p[y],C=b.getSnapshot;b=b.value;try{if(!Wn(C(),b))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Lr(o,u,p,y){u&=~xc,u&=~Ro,o.suspendedLanes|=u,o.pingedLanes&=~u,y&&(o.warmLanes|=u),y=o.expirationTimes;for(var b=u;0<b;){var C=31-Vs(b),I=1<<C;y[C]=-1,b&=~I}p!==0&&M(o,p,u)}function ad(){return(Ee&6)===0?(ca(0),!1):!0}function rd(){if(Se!==null){if(Ze===0)var o=Se.return;else o=Se,ar=fn=null,$l(o),Ao=null,hu=0,o=Se;for(;o!==null;)H0(o.alternate,o),o=o.return;Se=null}}function Gn(o,u){var p=o.timeoutHandle;p!==Ls&&(o.timeoutHandle=Ls,t_(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),Kr=0,rd(),ve=o,Se=p=na(o.current,null),Ce=u,Ze=0,li=null,lr=!1,bo=B(o,u),Co=!1,Nc=bs=xc=Ro=Nl=Pn=0,Us=mf=null,Bd=!1,(u&8)!==0&&(u|=u&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=u;0<y;){var b=31-Vs(y),C=1<<b;u|=o[b],y&=~C}return Xr=u,Xl(),p}function hn(o,u){fe=null,Jt.H=ra,u===gi||u===Ma?(u=gr(),Ze=3):u===Ud?(u=gr(),Ze=4):Ze=u===Ts?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,li=u,Se===null&&(Pn=1,_a(o,Ut(u,o.current)))}function xe(){var o=Ps.current;return o===null?!0:(Ce&4194048)===Ce?Ss===null:(Ce&62914560)===Ce||(Ce&536870912)!==0?o===Ss:!1}function yl(){var o=Jt.H;return Jt.H=ra,o===null?ra:o}function ea(){var o=Jt.A;return Jt.A=Cc,o}function hc(){Pn=4,lr||(Ce&4194048)!==Ce&&Ps.current!==null||(bo=!0),(Nl&134217727)===0&&(Ro&134217727)===0||ve===null||Lr(ve,Ce,bs,!1)}function Vr(o,u,p){var y=Ee;Ee|=2;var b=yl(),C=ea();(ve!==o||Ce!==u)&&(gf=null,Gn(o,u)),u=!1;var I=Pn;t:do try{if(Ze!==0&&Se!==null){var J=Se,dt=li;switch(Ze){case 8:rd(),I=6;break t;case 3:case 2:case 9:case 6:Ps.current===null&&(u=!0);var Ct=Ze;if(Ze=0,li=null,kr(o,J,dt,Ct),p&&bo){I=0;break t}break;default:Ct=Ze,Ze=0,li=null,kr(o,J,dt,Ct)}}Q0(),I=Pn;break}catch(Mt){hn(o,Mt)}while(!0);return u&&o.shellSuspendCounter++,ar=fn=null,Ee=y,Jt.H=b,Jt.A=C,Se===null&&(ve=null,Ce=0,Xl()),I}function Q0(){for(;Se!==null;)oo(Se)}function X0(o,u){var p=Ee;Ee|=2;var y=yl(),b=ea();ve!==o||Ce!==u?(gf=null,wo=Ki()+500,Gn(o,u)):bo=B(o,u);t:do try{if(Ze!==0&&Se!==null){u=Se;var C=li;e:switch(Ze){case 1:Ze=0,li=null,kr(o,u,C,1);break;case 2:case 9:if(nl(C)){Ze=0,li=null,ld(u);break}u=function(){Ze!==2&&Ze!==9||ve!==o||(Ze=7),os(o)},C.then(u,u);break t;case 3:Ze=7;break t;case 4:Ze=5;break t;case 7:nl(C)?(Ze=0,li=null,ld(u)):(Ze=0,li=null,kr(o,u,C,7));break;case 5:var I=null;switch(Se.tag){case 26:I=Se.memoizedState;case 5:case 27:var J=Se,dt=J.type,Ct=J.pendingProps;if(I?zp(I):Ln(J.stateNode,dt,Ct)){Ze=0,li=null;var Mt=J.sibling;if(Mt!==null)Se=Mt;else{var wt=J.return;wt!==null?(Se=wt,dc(wt)):Se=null}break e}}Ze=0,li=null,kr(o,u,C,5);break;case 6:Ze=0,li=null,kr(o,u,C,6);break;case 8:rd(),Pn=6;break t;default:throw Error(s(462))}}fc();break}catch(zt){hn(o,zt)}while(!0);return ar=fn=null,Jt.H=y,Jt.A=b,Ee=p,Se!==null?0:(ve=null,Ce=0,Xl(),Pn)}function fc(){for(;Se!==null&&!P_();)oo(Se)}function oo(o){var u=Km(o.alternate,o,Xr);o.memoizedProps=o.pendingProps,u===null?dc(o):Se=u}function ld(o){var u=o,p=u.alternate;switch(u.tag){case 15:case 0:u=Qn(p,u,u.pendingProps,u.type,void 0,Ce);break;case 11:u=Qn(p,u,u.pendingProps,u.type.render,u.ref,Ce);break;case 5:$l(u);default:H0(p,u),u=Se=cd(u,Xr),u=Km(p,u,Xr)}o.memoizedProps=o.pendingProps,u===null?dc(o):Se=u}function kr(o,u,p,y){ar=fn=null,$l(u),Ao=null,hu=0;var b=u.return;try{if(ec(o,b,u,p,Ce)){Pn=1,_a(o,Ut(p,o.current)),Se=null;return}}catch(C){if(b!==null)throw Se=b,C;Pn=1,_a(o,Ut(p,o.current)),Se=null;return}u.flags&32768?(be||y===1?o=!0:bo||(Ce&536870912)!==0?o=!1:(lr=o=!0,(y===2||y===9||y===3||y===6)&&(y=Ps.current,y!==null&&y.tag===13&&(y.flags|=16384))),uo(u,o)):dc(u)}function dc(o){var u=o;do{if((u.flags&32768)!==0){uo(u,lr);return}o=u.return;var p=G0(u.alternate,u,Xr);if(p!==null){Se=p;return}if(u=u.sibling,u!==null){Se=u;return}Se=u=o}while(u!==null);Pn===0&&(Pn=5)}function uo(o,u){do{var p=Zm(o.alternate,o);if(p!==null){p.flags&=32767,Se=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(o=o.sibling,o!==null)){Se=o;return}Se=o=p}while(o!==null);Pn=6,Se=null}function Pr(o,u,p,y,b,C,I,J,dt){o.cancelPendingCommit=null;do zr();while(oi!==0);if((Ee&6)!==0)throw Error(s(327));if(u!==null){if(u===o.current)throw Error(s(177));if(C=u.lanes|u.childLanes,C|=fu,z(o,p,C,I,J,dt),o===ve&&(Se=ve=null,Ce=0),_u=u,Il=o,Kr=p,Dc=C,jd=b,Xp=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,ai(lf,function(){return Xh(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=Jt.T,Jt.T=null,b=Ra(),Te(2),I=Ee,Ee|=4;try{pv(o,u,p)}finally{Ee=I,Te(b),Jt.T=y}}oi=1,vl(),Ur(),od()}}function vl(){if(oi===1){oi=0;var o=Il,u=_u,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=Jt.T,Jt.T=null;var y=Ra();Te(2);var b=Ee;Ee|=4;try{Yh(u,o),$0(o.containerInfo)}finally{Ee=b,Te(y),Jt.T=p}}o.current=u,oi=2}}function Ur(){if(oi===2){oi=0;var o=Il,u=_u,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=Jt.T,Jt.T=null;var y=Ra();Te(2);var b=Ee;Ee|=4;try{F0(o,u.alternate,u)}finally{Ee=b,Te(y),Jt.T=p}}oi=3}}function od(){if(oi===4||oi===3){oi=0,jp();var o=Il,u=_u,p=Kr,y=Xp;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?oi=5:(oi=0,_u=Il=null,ud(o,o.pendingLanes));var b=o.pendingLanes;if(b===0&&(Dl=null),Q(p),u=u.stateNode,ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(cu,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=Jt.T,b=Ra(),Te(2),Jt.T=null;try{for(var C=o.onRecoverableError,I=0;I<y.length;I++){var J=y[I];C(J.value,{componentStack:J.stack})}}finally{Jt.T=u,Te(b)}}(Kr&3)!==0&&zr(),os(o),b=o.pendingLanes,(p&261930)!==0&&(b&42)!==0?o===_f?He++:(He=0,_f=o):He=0,Sn&&sf(),ca(0)}}function ud(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,rn(u)))}function zr(){return vl(),Ur(),od(),Xh()}function Xh(){if(oi!==5)return!1;var o=Il,u=Dc;Dc=0;var p=Q(Kr),y=32>p?32:p;p=Jt.T;var b=Ra();try{Te(y),Jt.T=null,y=jd,jd=null;var C=Il,I=Kr;if(oi=0,_u=Il=null,Kr=0,(Ee&6)!==0)throw Error(s(331));var J=Ee;if(Ee|=4,sd(C.current),nd(C,C.current,I,y),Ee=J,ca(0,!1),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(cu,C)}catch{}return!0}finally{Te(b),Jt.T=p,ud(o,u)}}function co(o,u,p){u=Ut(p,u),u=tc(o.stateNode,u,2),o=Vi(o,u,2),o!==null&&(tt(o,2),os(o))}function se(o,u,p){if(o.tag===3)co(o,o,p);else for(;u!==null;){if(u.tag===3){co(u,o,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Dl===null||!Dl.has(y))){o=Ut(p,o),p=Vh(2),y=Vi(u,p,2),y!==null&&(kh(p,y,u,o),tt(y,2),os(y));break}}u=u.return}}function mc(o,u,p){var y=o.pingCache;if(y===null){y=o.pingCache=new oa;var b=new Set;y.set(u,b)}else b=y.get(u),b===void 0&&(b=new Set,y.set(u,b));b.has(p)||(Co=!0,b.add(p),o=K0.bind(null,o,u,p),u.then(o,o))}function K0(o,u,p){var y=o.pingCache;y!==null&&y.delete(u),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,ve===o&&(Ce&p)===p&&(Pn===4||Pn===3&&(Ce&62914560)===Ce&&300>Ki()-pf?(Ee&2)===0&&Gn(o,0):xc|=p,Nc===Ce&&(Nc=0)),os(o)}function W0(o,u){u===0&&(u=et()),o=_r(o,u),o!==null&&(tt(o,u),os(o))}function gv(o){var u=o.memoizedState,p=0;u!==null&&(p=u.retryLane),W0(o,p)}function _v(o,u){var p=0;switch(o.tag){case 31:case 13:var y=o.stateNode,b=o.memoizedState;b!==null&&(p=b.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(s(314))}y!==null&&y.delete(u),W0(o,p)}function ai(o,u){return rf(o,u)}function ip(o,u,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jo(o){return o=o.prototype,!(!o||!o.isReactComponent)}function na(o,u){var p=o.alternate;return p===null?(p=e(o.tag,u,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=u,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,u=o.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function cd(o,u){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,u=p.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function Al(o,u,p,y,b,C){var I=0;if(y=o,typeof o=="function")Jo(o)&&(I=1);else if(typeof o=="string")I=wa&&di?Cd(o,p,bi.current)?26:Bp(o)?27:5:wa?Cd(o,p,bi.current)?26:5:di&&Bp(o)?27:5;else t:switch(o){case Zh:return o=e(31,p,u,b),o.elementType=Zh,o.lanes=C,o;case eu:return ba(p.children,b,C,u);case nu:I=8,b|=24;break;case iu:return o=e(12,p,u,b|2),o.elementType=iu,o.lanes=C,o;case md:return o=e(13,p,u,b),o.elementType=md,o.lanes=C,o;case El:return o=e(19,p,u,b),o.elementType=El,o.lanes=C,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ca:I=10;break t;case Jh:I=9;break t;case pc:I=11;break t;case pd:I=14;break t;case ys:I=16,y=null;break t}I=29,p=Error(s(130,o===null?"null":typeof o,"")),y=null}return u=e(I,p,u,b),u.elementType=o,u.type=y,u.lanes=C,u}function ba(o,u,p,y){return o=e(7,o,y,u),o.lanes=p,o}function sp(o,u,p){return o=e(6,o,null,u),o.lanes=p,o}function ap(o){var u=e(18,null,null,0);return u.stateNode=o,u}function rp(o,u,p){return u=e(4,o.children!==null?o.children:[],o.key,u),u.lanes=p,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}function J0(o,u,p,y,b,C,I,J,dt){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ls,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=at(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=at(0),this.hiddenUpdates=at(null),this.identifierPrefix=y,this.onUncaughtError=b,this.onCaughtError=C,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=dt,this.incompleteTransitions=new Map}function ho(o,u,p,y,b,C,I,J,dt,Ct,Mt,wt){return o=new J0(o,u,p,I,dt,Ct,Mt,wt,J),u=1,C===!0&&(u|=24),C=e(3,null,null,u),o.current=C,C.stateNode=o,u=Dn(),u.refCount++,o.pooledCache=u,u.refCount++,C.memoizedState={element:y,isDehydrated:p,cache:u},ui(C),o}function hd(o){return o?(o=jr,o):jr}function Kh(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=f(u),o=o!==null?m(o):null,o===null?null:_c(o.stateNode)}function lp(o,u,p,y,b,C){b=hd(b),y.context===null?y.context=b:y.pendingContext=b,y=cs(u),y.payload={element:p},C=C===void 0?null:C,C!==null&&(y.callback=C),p=Vi(o,y,u),p!==null&&(Mn(p,o,u),Wl(p,o,u))}function Zo(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<u?p:u}}function Wh(o,u){Zo(o,u),(o=o.alternate)&&Zo(o,u)}var _e={},fd=b1(),Os=HA(),dd=Object.assign,$o=Symbol.for("react.element"),Br=Symbol.for("react.transitional.element"),tu=Symbol.for("react.portal"),eu=Symbol.for("react.fragment"),nu=Symbol.for("react.strict_mode"),iu=Symbol.for("react.profiler"),Jh=Symbol.for("react.consumer"),Ca=Symbol.for("react.context"),pc=Symbol.for("react.forward_ref"),md=Symbol.for("react.suspense"),El=Symbol.for("react.suspense_list"),pd=Symbol.for("react.memo"),ys=Symbol.for("react.lazy"),Zh=Symbol.for("react.activity"),op=Symbol.for("react.memo_cache_sentinel"),Sl=Symbol.iterator,fo=Symbol.for("react.client.reference"),mo=Array.isArray,Jt=fd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,up=t.rendererVersion,$h=t.rendererPackageName,gc=t.extraDevToolsConfig,_c=t.getPublicInstance,Z0=t.getRootHostContext,yc=t.getChildHostContext,gd=t.prepareForCommit,$0=t.resetAfterCommit,cp=t.createInstance;t.cloneMutableInstance;var tf=t.appendInitialChild,Ms=t.finalizeInitialChildren,vs=t.shouldSetTextContent,Tl=t.createTextInstance;t.cloneMutableTextInstance;var hp=t.scheduleTimeout,t_=t.cancelTimeout,Ls=t.noTimeout,Xn=t.isPrimaryRenderer;t.warnsIfNotActing;var Ne=t.supportsMutation,ia=t.supportsPersistence,Sn=t.supportsHydration,he=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var en=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Te=t.setCurrentUpdatePriority,Ra=t.getCurrentUpdatePriority,vc=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var su=t.shouldAttemptEagerTransition,_d=t.detachDeletedInstance;t.requestPostPaintCallback;var ef=t.maySuspendCommit,Ac=t.maySuspendCommitOnUpdate,fp=t.maySuspendCommitInSyncRender,Ln=t.preloadInstance,dp=t.startSuspendingCommit,yd=t.suspendInstance;t.suspendOnActiveViewTransition;var e_=t.waitForCommitToBeReady;t.getSuspendedCommitReason;var au=t.NotPendingTransition,ru=t.HostTransitionContext,mp=t.resetFormInstance;t.bindToConsole;var pp=t.supportsMicrotasks,gp=t.scheduleMicrotask,fi=t.supportsTestSelectors,Kn=t.findFiberRoot,vd=t.getBoundingRect,nf=t.getTextContent,po=t.isHiddenSubtree,_p=t.matchAccessibilityRole,bl=t.setFocusIfFocusable,Ad=t.setupIntersectionObserver,yp=t.appendChild,vp=t.appendChildToContainer,n_=t.commitTextUpdate,i_=t.commitMount,s_=t.commitUpdate,a_=t.insertBefore,r_=t.insertInContainerBefore,l_=t.removeChild,Ap=t.removeChildFromContainer,Ep=t.resetTextContent,yv=t.hideInstance,o_=t.hideTextInstance,u_=t.unhideInstance,c_=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopViewTransition,t.getCurrentGestureOffset,t.createViewTransitionInstance;var Sp=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var h_=t.cloneInstance,Tp=t.createContainerChildSet,bp=t.appendChildToContainerChildSet,f_=t.finalizeContainerChildren,Cp=t.replaceContainerChildren,d_=t.cloneHiddenInstance,Rp=t.cloneHiddenTextInstance,go=t.isSuspenseInstancePending,Ed=t.isSuspenseInstanceFallback,Sd=t.getSuspenseInstanceFallbackErrorDetails,Td=t.registerSuspenseInstanceRetry,m_=t.canHydrateFormStateMarker,wp=t.isFormStateMarkerMatching,p_=t.getNextHydratableSibling,g_=t.getNextHydratableSiblingAfterSingleton,__=t.getFirstHydratableChild,y_=t.getFirstHydratableChildWithinContainer,v_=t.getFirstHydratableChildWithinActivityInstance,A_=t.getFirstHydratableChildWithinSuspenseInstance,xp=t.getFirstHydratableChildWithinSingleton,E_=t.canHydrateInstance,S_=t.canHydrateTextInstance,Np=t.canHydrateActivityInstance,T_=t.canHydrateSuspenseInstance,b_=t.hydrateInstance,vv=t.hydrateTextInstance,Dp=t.hydrateActivityInstance,C_=t.hydrateSuspenseInstance,R_=t.getNextHydratableInstanceAfterActivityInstance,Ip=t.getNextHydratableInstanceAfterSuspenseInstance,w_=t.commitHydratedInstance,x_=t.commitHydratedContainer,Av=t.commitHydratedActivityInstance,Ev=t.commitHydratedSuspenseInstance,N_=t.finalizeHydratedChildren,sf=t.flushHydrationEvents;t.clearActivityBoundary;var Op=t.clearSuspenseBoundary;t.clearActivityBoundaryFromContainer;var bd=t.clearSuspenseBoundaryFromContainer,D_=t.hideDehydratedBoundary,I_=t.unhideDehydratedBoundary,Ec=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var O_=t.validateHydratableInstance,Mp=t.validateHydratableTextInstance,wa=t.supportsResources,Cd=t.isHostHoistableType,af=t.getHoistableRoot,Lp=t.getResource,Vp=t.acquireResource,_o=t.releaseResource,M_=t.hydrateHoistable,kp=t.mountHoistable,Pp=t.unmountHoistable,Rd=t.createHoistableInstance,L_=t.prepareToCommitHoistables,Up=t.mayResourceSuspendCommit,zp=t.preloadResource,V_=t.suspendResource,di=t.supportsSingletons,wd=t.resolveSingletonInstance,ri=t.acquireSingletonInstance,Ti=t.releaseSingletonInstance,Bp=t.isHostSingletonType,lu=t.isSingletonScope,xd=[],ou=-1,jr={},Vs=Math.clz32?Math.clz32:L,Nd=Math.log,k_=Math.LN2,Dd=256,uu=262144,Sc=4194304,rf=Os.unstable_scheduleCallback,Id=Os.unstable_cancelCallback,P_=Os.unstable_shouldYield,jp=Os.unstable_requestPaint,Ki=Os.unstable_now,Od=Os.unstable_ImmediatePriority,U_=Os.unstable_UserBlockingPriority,lf=Os.unstable_NormalPriority,Md=Os.unstable_IdlePriority,Gp=Os.log,z_=Os.unstable_setDisableYieldValue,cu=null,ks=null,Wn=typeof Object.is=="function"?Object.is:Ft,Ld=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Sv=Object.prototype.hasOwnProperty,Vd,Gr,of=!1,Hp=new WeakMap,Cl=[],Hr=0,nn=null,uf=0,xa=[],sa=0,Na=null,Ui=1,sr="",bi=T(null),Rl=T(null),zi=T(null),cf=T(null),mi=null,Tn=null,be=!1,qr=null,As=!1,kd=Error(s(519)),Da=T(null),fn=null,ar=null,B_=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(p,y){o.push(y)}};this.abort=function(){u.aborted=!0,o.forEach(function(p){return p()})}},Ci=Os.unstable_scheduleCallback,Tv=Os.unstable_NormalPriority,bn={$$typeof:Ca,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},hf=null,We=null,Wi=!1,Ia=!1,Pd=!1,yo=0,Tc=null,qp=0,wl=0,pi=null,Oa=Jt.S;Jt.S=function(o,u){gu=Ki(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&ha(o,u),Oa!==null&&Oa(o,u)};var vo=T(null),gi=Error(s(460)),Ud=Error(s(474)),Ma=Error(s(542)),Fr={then:function(){}},Es=null,Ao=null,hu=0,Bi=al(!0),Fp=al(!1),ji=[],Yr=0,fu=0,aa=!1,zd=!1,du=T(null),Eo=T(0),Ps=T(null),Ss=null,Hn=T(0),xl=0,fe=null,Xt=null,le=null,ye=!1,pe=!1,Ve=!1,Ji=0,La=0,rr=null,Yp=0,ra={readContext:Nn,use:Za,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln};ra.useEffectEvent=ln;var Vn={readContext:Nn,use:Za,useCallback:function(o,u){return ci().memoizedState=[o,u===void 0?null:u],o},useContext:Nn,useEffect:to,useImperativeHandle:function(o,u,p){p=p!=null?p.concat([o]):null,$s(4194308,4,ul.bind(null,u,o),p)},useLayoutEffect:function(o,u){return $s(4194308,4,o,u)},useInsertionEffect:function(o,u){$s(4,2,o,u)},useMemo:function(o,u){var p=ci();u=u===void 0?null:u;var y=o();if(Ve){H(!0);try{o()}finally{H(!1)}}return p.memoizedState=[y,u],y},useReducer:function(o,u,p){var y=ci();if(p!==void 0){var b=p(u);if(Ve){H(!0);try{p(u)}finally{H(!1)}}}else b=u;return y.memoizedState=y.baseState=b,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:b},y.queue=o,o=o.dispatch=Ym.bind(null,fe,o),[y.memoizedState,o]},useRef:function(o){var u=ci();return o={current:o},u.memoizedState=o},useState:function(o){o=Ch(o);var u=o.queue,p=Mh.bind(null,fe,u);return u.dispatch=p,[o.memoizedState,p]},useDebugValue:Rr,useDeferredValue:function(o,u){var p=ci();return cl(p,o,u)},useTransition:function(){var o=Ch(!1);return o=no.bind(null,fe,o.queue,!0,!1),ci().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,p){var y=fe,b=ci();if(be){if(p===void 0)throw Error(s(407));p=p()}else{if(p=u(),ve===null)throw Error(s(349));(Ce&127)!==0||Jf(y,u,p)}b.memoizedState=p;var C={value:p,getSnapshot:u};return b.queue=C,to(bh.bind(null,y,C,o),[o]),y.flags|=2048,Ai(9,{destroy:void 0},Yu.bind(null,y,C,p,u),null),p},useId:function(){var o=ci(),u=ve.identifierPrefix;if(be){var p=sr,y=Ui;p=(y&~(1<<32-Vs(y)-1)).toString(32)+p,u="_"+u+"R_"+p,p=Ji++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=Yp++,u="_"+u+"r_"+p.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:Yo,useFormState:wh,useActionState:wh,useOptimistic:function(o){var u=ci();u.memoizedState=u.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Qo.bind(null,fe,!0,p),p.dispatch=u,[o,u]},useMemoCache:ll,useCacheRefresh:function(){return ci().memoizedState=Ku.bind(null,fe)},useEffectEvent:function(o){var u=ci(),p={impl:o};return u.memoizedState=p,function(){if((Ee&2)!==0)throw Error(s(440));return p.impl.apply(void 0,arguments)}}},Qr={readContext:Nn,use:Za,useCallback:Fo,useContext:Nn,useEffect:br,useImperativeHandle:Nh,useInsertionEffect:Cr,useLayoutEffect:eo,useMemo:Qi,useReducer:Le,useRef:qo,useState:function(){return Le(Ns)},useDebugValue:Rr,useDeferredValue:function(o,u){var p=on();return Dh(p,Xt.memoizedState,o,u)},useTransition:function(){var o=Le(Ns)[0],u=on().memoizedState;return[typeof o=="boolean"?o:un(o),u]},useSyncExternalStore:Zs,useId:hl,useHostTransitionStatus:Yo,useFormState:ms,useActionState:ms,useOptimistic:function(o,u){var p=on();return $a(p,Xt,o,u)},useMemoCache:ll,useCacheRefresh:Oh};Qr.useEffectEvent=Pi;var So={readContext:Nn,use:Za,useCallback:Fo,useContext:Nn,useEffect:br,useImperativeHandle:Nh,useInsertionEffect:Cr,useLayoutEffect:eo,useMemo:Qi,useReducer:Sr,useRef:qo,useState:function(){return Sr(Ns)},useDebugValue:Rr,useDeferredValue:function(o,u){var p=on();return Xt===null?cl(p,o,u):Dh(p,Xt.memoizedState,o,u)},useTransition:function(){var o=Sr(Ns)[0],u=on().memoizedState;return[typeof o=="boolean"?o:un(o),u]},useSyncExternalStore:Zs,useId:hl,useHostTransitionStatus:Yo,useFormState:tr,useActionState:tr,useOptimistic:function(o,u){var p=on();return Xt!==null?$a(p,Xt,o,u):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:ll,useCacheRefresh:Oh};So.useEffectEvent=Pi;var ff={enqueueSetState:function(o,u,p){o=o._reactInternals;var y=En(),b=cs(y);b.payload=u,p!=null&&(b.callback=p),u=Vi(o,b,y),u!==null&&(Mn(u,o,y),Wl(u,o,y))},enqueueReplaceState:function(o,u,p){o=o._reactInternals;var y=En(),b=cs(y);b.tag=1,b.payload=u,p!=null&&(b.callback=p),u=Vi(o,b,y),u!==null&&(Mn(u,o,y),Wl(u,o,y))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var p=En(),y=cs(p);y.tag=2,u!=null&&(y.callback=u),u=Vi(o,y,p),u!==null&&(Mn(u,o,p),Wl(u,o,p))}},Ts=Error(s(461)),_n=!1,mu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},qn=!1,Fn=!1,bc=!1,Qp=typeof WeakSet=="function"?WeakSet:Set,Jn=null,kn=null,Zn=!1,Je=null,la=8192,Cc={getCacheForType:function(o){var u=Nn(bn),p=u.data.get(o);return p===void 0&&(p=o(),u.data.set(o,p)),p},cacheSignal:function(){return Nn(bn).controller.signal}},Va=0,Rc=1,wc=2,df=3,To=4;if(typeof Symbol=="function"&&Symbol.for){var pu=Symbol.for;Va=pu("selector.component"),Rc=pu("selector.has_pseudo_class"),wc=pu("selector.role"),df=pu("selector.test_id"),To=pu("selector.text")}var oa=typeof WeakMap=="function"?WeakMap:Map,Ee=0,ve=null,Se=null,Ce=0,Ze=0,li=null,lr=!1,bo=!1,Co=!1,Xr=0,Pn=0,Nl=0,Ro=0,xc=0,bs=0,Nc=0,mf=null,Us=null,Bd=!1,pf=0,gu=0,wo=1/0,gf=null,Dl=null,oi=0,Il=null,_u=null,Kr=0,Dc=0,jd=null,Xp=null,He=0,_f=null;return _e.attemptContinuousHydration=function(o){if(o.tag===13||o.tag===31){var u=_r(o,67108864);u!==null&&Mn(u,o,67108864),Wh(o,67108864)}},_e.attemptHydrationAtCurrentPriority=function(o){if(o.tag===13||o.tag===31){var u=En();u=X(u);var p=_r(o,u);p!==null&&Mn(p,o,u),Wh(o,u)}},_e.attemptSynchronousHydration=function(o){switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var u=V(o.pendingLanes);if(u!==0){for(o.pendingLanes|=2,o.entangledLanes|=2;u;){var p=1<<31-Vs(u);o.entanglements[1]|=p,u&=~p}os(o),(Ee&6)===0&&(wo=Ki()+500,ca(0))}}break;case 31:case 13:u=_r(o,2),u!==null&&Mn(u,o,2),ad(),Wh(o,2)}},_e.batchedUpdates=function(o,u){return o(u)},_e.createComponentSelector=function(o){return{$$typeof:Va,value:o}},_e.createContainer=function(o,u,p,y,b,C,I,J,dt,Ct){return ho(o,u,!1,null,p,y,C,null,I,J,dt,Ct)},_e.createHasPseudoClassSelector=function(o){return{$$typeof:Rc,value:o}},_e.createHydrationContainer=function(o,u,p,y,b,C,I,J,dt,Ct,Mt,wt,zt,ue){return o=ho(p,y,!0,o,b,C,J,ue,dt,Ct,Mt,wt),o.context=hd(null),p=o.current,y=En(),y=X(y),b=cs(y),b.callback=u??null,Vi(p,b,y),u=y,o.current.lanes=u,tt(o,u),os(o),o},_e.createPortal=function(o,u,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tu,key:y==null?null:""+y,children:o,containerInfo:u,implementation:p}},_e.createRoleSelector=function(o){return{$$typeof:wc,value:o}},_e.createTestNameSelector=function(o){return{$$typeof:df,value:o}},_e.createTextSelector=function(o){return{$$typeof:To,value:o}},_e.defaultOnCaughtError=function(o){console.error(o)},_e.defaultOnRecoverableError=function(o){Ld(o)},_e.defaultOnUncaughtError=function(o){Ld(o)},_e.deferredUpdates=function(o){var u=Jt.T,p=Ra();try{return Te(32),Jt.T=null,o()}finally{Te(p),Jt.T=u}},_e.discreteUpdates=function(o,u,p,y,b){var C=Jt.T,I=Ra();try{return Te(2),Jt.T=null,o(u,p,y,b)}finally{Te(I),Jt.T=C,Ee===0&&(wo=Ki()+500)}},_e.findAllNodes=Is,_e.findBoundingRects=function(o,u){if(!fi)throw Error(s(363));u=Is(o,u),o=[];for(var p=0;p<u.length;p++)o.push(vd(u[p]));for(u=o.length-1;0<u;u--){p=o[u];for(var y=p.x,b=y+p.width,C=p.y,I=C+p.height,J=u-1;0<=J;J--)if(u!==J){var dt=o[J],Ct=dt.x,Mt=Ct+dt.width,wt=dt.y,zt=wt+dt.height;if(y>=Ct&&C>=wt&&b<=Mt&&I<=zt){o.splice(u,1);break}else if(y!==Ct||p.width!==dt.width||zt<C||wt>I){if(!(C!==wt||p.height!==dt.height||Mt<y||Ct>b)){Ct>y&&(dt.width+=Ct-y,dt.x=y),Mt<b&&(dt.width=b-Ct),o.splice(u,1);break}}else{wt>C&&(dt.height+=wt-C,dt.y=C),zt<I&&(dt.height=I-wt),o.splice(u,1);break}}}return o},_e.findHostInstance=Kh,_e.findHostInstanceWithNoPortals=function(o){return o=f(o),o=o!==null?g(o):null,o===null?null:_c(o.stateNode)},_e.findHostInstanceWithWarning=function(o){return Kh(o)},_e.flushPassiveEffects=zr,_e.flushSyncFromReconciler=function(o){var u=Ee;Ee|=1;var p=Jt.T,y=Ra();try{if(Te(2),Jt.T=null,o)return o()}finally{Te(y),Jt.T=p,Ee=u,(Ee&6)===0&&ca(0)}},_e.flushSyncWork=ad,_e.focusWithin=function(o,u){if(!fi)throw Error(s(363));for(o=ro(o),u=cc(o,u),u=Array.from(u),o=0;o<u.length;){var p=u[o++],y=p.tag;if(!po(p)){if((y===5||y===26||y===27)&&bl(p.stateNode))return!0;for(p=p.child;p!==null;)u.push(p),p=p.sibling}}return!1},_e.getFindAllNodesFailureDescription=function(o,u){if(!fi)throw Error(s(363));var p=0,y=[];o=[ro(o),0];for(var b=0;b<o.length;){var C=o[b++],I=C.tag,J=o[b++],dt=u[J];if((I!==5&&I!==26&&I!==27||!po(C))&&(lo(C,dt)&&(y.push(uc(dt)),J++,J>p&&(p=J)),J<u.length))for(C=C.child;C!==null;)o.push(C,J),C=C.sibling}if(p<u.length){for(o=[];p<u.length;p++)o.push(uc(u[p]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+o.join(" > ")}return null},_e.getPublicRootInstance=function(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 27:case 5:return _c(o.child.stateNode);default:return o.child.stateNode}},_e.injectIntoDevTools=function(){var o={bundleType:0,version:up,rendererPackageName:$h,currentDispatcherRef:Jt,reconcilerVersion:"19.2.0"};if(gc!==null&&(o.rendererConfig=gc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")o=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)o=!0;else{try{cu=u.inject(o),ks=u}catch{}o=!!u.checkDCE}}return o},_e.isAlreadyRendering=function(){return(Ee&6)!==0},_e.observeVisibleRects=function(o,u,p,y){if(!fi)throw Error(s(363));o=Is(o,u);var b=Ad(o,p,y).disconnect;return{disconnect:function(){b()}}},_e.shouldError=function(){return null},_e.shouldSuspend=function(){return!1},_e.startHostTransition=function(o,u,p,y){if(o.tag!==5)throw Error(s(476));var b=Ih(o).queue;no(o,b,u,au,p===null?i:function(){var C=Ih(o);return C.next===null&&(C=o.alternate.memoizedState),nr(o,C.next.queue,{},En()),p(y)})},_e.updateContainer=function(o,u,p,y){var b=u.current,C=En();return lp(b,C,o,u,p,y),C},_e.updateContainerSync=function(o,u,p,y){return lp(u.current,2,o,u,p,y),2},_e},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(V2)),V2.exports}var kb;function HB(){return kb||(kb=1,L2.exports=GB()),L2.exports}var qB=HB();const FB=qb(qB);var k2={exports:{}},vu={};var Pb;function YB(){return Pb||(Pb=1,vu.ConcurrentRoot=1,vu.ContinuousEventPriority=8,vu.DefaultEventPriority=32,vu.DiscreteEventPriority=2,vu.IdleEventPriority=268435456,vu.LegacyRoot=0,vu.NoEventPriority=0),vu}var Ub;function QB(){return Ub||(Ub=1,k2.exports=YB()),k2.exports}var dv=QB();const zb={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Bb=!1,jb=!1;const T1=".react-konva-event",XB=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,KB=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,WB={};function mv(n,t,e=WB){if(!Bb&&"zIndex"in t&&(console.warn(KB),Bb=!0),!jb&&t.draggable){var i=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;i&&!s&&(console.warn(XB),jb=!0)}for(var l in e)if(!zb[l]){var c=l.slice(0,2)==="on",f=e[l]!==t[l];if(c&&f){var m=l.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),n.off(m,e[l])}var g=!t.hasOwnProperty(l);g&&n.setAttr(l,void 0)}var A=t._useStrictMode,S={},T=!1;const x={};for(var l in t)if(!zb[l]){var c=l.slice(0,2)==="on",w=e[l]!==t[l];if(c&&w){var m=l.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),t[l]&&(x[m]=t[l])}!c&&(t[l]!==e[l]||A&&t[l]!==n.getAttr(l))&&(T=!0,S[l]=t[l])}T&&(n.setAttrs(S),Sh(n));for(var m in x)n.off(m+T1),n.on(m+T1,x[m])}function Sh(n){if(!Vt.autoDrawEnabled){var t=n.getLayer()||n.getStage();t&&t.batchDraw()}}var P2=HA();const k8={},JB={};xm.Node.prototype._applyProps=mv;let P8=dv.DefaultEventPriority;function ZB(n,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}n.add(t),Sh(n)}function $B(n,t,e){let i=xm[n];i||(console.error(`Konva has no node with the type ${n}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${n}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=xm.Group);const s={},l={};for(var c in t)if(c!=="ref"){var f=c.slice(0,2)==="on";f?l[c]=t[c]:s[c]=t[c]}const m=new i(s);return mv(m,l),m}function tj(n,t,e){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${n}"`)}function ej(n,t,e){return!1}function nj(n){return n}function ij(){return null}function sj(){return null}function aj(n,t,e,i){return JB}function rj(){}function lj(n){}function oj(n,t){return!1}function uj(){return k8}function cj(){return k8}const hj=setTimeout,fj=clearTimeout,dj=!0,mj=n=>{n()},pj=-1;function gj(n,t){return!1}const _j=!1,yj=!1,vj=!0,Aj=!1,Ej=!1;function Sj(n,t){t.parent===n?t.moveToTop():n.add(t),Sh(n)}function Tj(n,t){t.parent===n?t.moveToTop():n.add(t),Sh(n)}function U8(n,t,e){t._remove(),n.add(t),t.setZIndex(e.getZIndex()),Sh(n)}function bj(n,t,e){U8(n,t,e)}function Cj(n,t){t.destroy(),t.off(T1),Sh(n)}function Rj(n,t){t.destroy(),t.off(T1),Sh(n)}function wj(n,t,e){console.error(`Text components are not yet supported in ReactKonva. You text is: "${e}"`)}function xj(n,t,e){}function Nj(n,t,e,i){mv(n,i,e)}function Dj(n){n.hide(),Sh(n)}function Ij(n){}function Oj(n,t){(t.visible==null||t.visible)&&n.show()}function Mj(n,t){}function Lj(n){}function Vj(){}function kj(){return null}function Pj(){}function Uj(){}function zj(){return dv.DefaultEventPriority}function Bj(){}function jj(){return null}function Gj(n){P8=n}function Hj(){return P8}function qj(){return dv.DiscreteEventPriority}function Fj(){return!1}function Yj(){}function Qj(){return null}function Xj(){return-1.1}function Kj(){}function Wj(){return!1}function Jj(){return!0}function Zj(){}function $j(){}function tG(){return null}const eG=null,nG=Gi.createContext(null);function iG(){}const sG=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:nG,NotPendingTransition:eG,afterActiveInstanceBlur:Uj,appendChild:Sj,appendChildToContainer:Tj,appendInitialChild:ZB,beforeActiveInstanceBlur:Pj,cancelTimeout:fj,clearContainer:Lj,commitMount:xj,commitTextUpdate:wj,commitUpdate:Nj,createInstance:$B,createTextInstance:tj,detachDeletedInstance:Vj,finalizeInitialChildren:ej,getChildHostContext:cj,getCurrentEventPriority:zj,getCurrentUpdatePriority:Hj,getInstanceFromNode:kj,getInstanceFromScope:jj,getPublicInstance:nj,getRootHostContext:uj,hideInstance:Dj,hideTextInstance:Ij,idlePriority:P2.unstable_IdlePriority,insertBefore:U8,insertInContainerBefore:bj,isPrimaryRenderer:_j,maySuspendCommit:Wj,noTimeout:pj,now:P2.unstable_now,preloadInstance:Jj,prepareForCommit:ij,preparePortalMount:sj,prepareScopeUpdate:Bj,prepareUpdate:aj,removeChild:Cj,removeChildFromContainer:Rj,requestPostPaintCallback:Kj,resetAfterCommit:rj,resetFormInstance:iG,resetTextContent:lj,resolveEventTimeStamp:Xj,resolveEventType:Qj,resolveUpdatePriority:qj,run:P2.unstable_runWithPriority,scheduleMicrotask:mj,scheduleTimeout:hj,setCurrentUpdatePriority:Gj,shouldAttemptEagerTransition:Fj,shouldDeprioritizeSubtree:oj,shouldSetTextContent:gj,startSuspendingCommit:Zj,supportsHydration:Ej,supportsMicrotasks:dj,supportsMutation:vj,supportsPersistence:Aj,suspendInstance:$j,trackSchedulerEvent:Yj,unhideInstance:Oj,unhideTextInstance:Mj,waitForCommitToBeReady:tG,warnsIfNotActing:yj},Symbol.toStringTag,{value:"Module"}));function z8(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=n.child;for(;i;){const s=z8(i,t,e);if(s)return s;i=i.sibling}}function B8(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const HS=B8(j.createContext(null));class j8 extends j.Component{render(){return j.createElement(HS.Provider,{value:this._reactInternals},this.props.children)}}function aG(){const n=j.useContext(HS);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=j.useId();return j.useMemo(()=>{for(const e of[n,n?.alternate]){if(!e)continue;const i=z8(e,!1,s=>{let l=s.memoizedState;for(;l;){if(l.memoizedState===t)return!0;l=l.next}});if(i)return i}},[n,t])}const rG=Symbol.for("react.context"),lG=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===rG;function oG(){const n=aG(),[t]=j.useState(()=>new Map);t.clear();let e=n;for(;e;){const i=e.type;lG(i)&&i!==HS&&!t.has(i)&&t.set(i,j.use(B8(i))),e=e.return}return t}function uG(){const n=oG();return j.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>j.createElement(t,null,j.createElement(e.Provider,{...i,value:n.get(e)})),t=>j.createElement(j8,{...t})),[n])}if(Gi.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function cG(n){const t=Gi.useRef({});return Gi.useLayoutEffect(()=>{t.current=n}),Gi.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const hG=()=>{const n=Gi.useRef(0);return Gi.useMemo(()=>{n.current++},[]),n.current>1},fG=n=>{const t=Gi.useRef(null),e=Gi.useRef(null),i=Gi.useRef(null),s=cG(n),l=uG(),c=Gi.useRef(null),f=A=>{const{forwardedRef:S}=n;S&&(typeof S=="function"?S(A):S.current=A)},m=hG(),g=()=>{f(null),gg.updateContainer(null,i.current,null),e.current?.destroy(),e.current=null};return Gi.useLayoutEffect(()=>(c.current&&(clearTimeout(c.current),c.current=null),e.current?f(e.current):(e.current=new xm.Stage({width:n.width,height:n.height,container:t.current}),f(e.current),i.current=gg.createContainer(e.current,dv.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),gg.updateContainer(Gi.createElement(l,{},n.children),i.current,null,()=>{})),()=>{m?c.current=setTimeout(g,0):g()}),[]),Gi.useLayoutEffect(()=>{f(e.current),mv(e.current,n,s),gg.flushSyncFromReconciler(()=>{gg.updateContainer(Gi.createElement(l,{},n.children),i.current,null)})}),Gi.createElement("div",{ref:t,id:n.id,accessKey:n.accessKey,className:n.className,role:n.role,style:n.style,tabIndex:n.tabIndex,title:n.title})},G8="Layer",Fl="Group",Vf="Rect",H8="Circle",dG="Ellipse",q8="Line",P0="Text",gg=FB(sG),mG=Gi.forwardRef((n,t)=>Gi.createElement(j8,{},Gi.createElement(fG,{...n,forwardedRef:t}))),pG=.001,gG=1e-4,U2="#fafafa",Pa=20,_G="rgba(0, 0, 0, 0.12)",yG=1;function vG({width:n,height:t,viewport:e}){const i=j.useMemo(()=>{const{x:s,y:l,scale:c}=e,f=-s/c-Pa,m=-l/c-Pa,g=(-s+n)/c+Pa,A=(-l+t)/c+Pa,S=Math.floor(f/Pa)*Pa,T=Math.floor(m/Pa)*Pa,x=Math.ceil(g/Pa)*Pa,w=Math.ceil(A/Pa)*Pa,L=[];for(let V=S;V<=x;V+=Pa)for(let G=T;G<=w;G+=Pa)L.push(k.jsx(H8,{x:V,y:G,radius:yG,fill:_G,listening:!1},`${V},${G}`));return L},[n,t,e]);return k.jsx(Fl,{listening:!1,children:i})}function AG({width:n,height:t,viewport:e,onViewportChange:i,onMouseMove:s,onBackgroundClick:l,showGrid:c=!0,children:f,cursorLayer:m}){const g=j.useRef(null),[A,S]=j.useState(!1),T=j.useRef({x:0,y:0,vx:0,vy:0}),x=j.useRef(!1),w=j.useCallback(et=>{et.evt.preventDefault();const at=g.current;if(!at)return;const tt=at.getPointerPosition();if(!tt)return;const z=1-et.evt.deltaY*pG,M=Math.max(gG,e.scale*z),U={x:(tt.x-e.x)/e.scale,y:(tt.y-e.y)/e.scale},q=tt.x-U.x*M,X=tt.y-U.y*M;i({x:q,y:X,scale:M})},[e,i]),L=j.useCallback(et=>{const at=et.target,tt=at.name();if(tt==="background"||tt==="stageFill"||at===at.getStage()){const M=g.current;if(M){const U=M.getPointerPosition();U&&(S(!0),x.current=!1,T.current={x:U.x,y:U.y,vx:e.x,vy:e.y})}}},[e]),V=j.useCallback(et=>{if(!A)return;x.current=!0;const at=g.current;if(!at)return;const tt=at.getPointerPosition();if(!tt)return;const{x:z,y:M,vx:U,vy:q}=T.current,X=tt.x-z,Q=tt.y-M;i({...e,x:U+X,y:q+Q})},[A,e,i]),G=j.useCallback(()=>{A&&(console.log("[canvas] pan end"),S(!1))},[A]),B=j.useCallback(et=>{V(et),s?.(et)},[V,s]),Y=j.useCallback(et=>{if(x.current)return;const at=et.target,tt=at.name();if((tt==="background"||tt==="stageFill"||at===at.getStage())&&l){const M=g.current;if(M){const U=M.getPointerPosition();if(U){const q=(U.x-e.x)/e.scale,X=(U.y-e.y)/e.scale;l({x:q,y:X})}}}},[e,l]);return k.jsxs(mG,{ref:g,width:n,height:t,onWheel:w,onMouseDown:L,onMouseUp:G,onMouseLeave:G,onMouseMove:B,onClick:Y,style:{cursor:A?"grabbing":"grab",background:U2},children:[k.jsxs(G8,{listening:!0,children:[k.jsx(Vf,{x:0,y:0,width:n,height:t,fill:U2,listening:!0,name:"stageFill"}),k.jsxs(Fl,{x:e.x,y:e.y,scaleX:e.scale,scaleY:e.scale,draggable:!1,children:[k.jsx(Vf,{x:-5e3,y:-5e3,width:2e4,height:2e4,fill:U2,listening:!0,name:"background"}),c&&k.jsx(vG,{width:n,height:t,viewport:e}),f]})]}),m]})}function EG(n,t,e){return{x:(n-e.x)/e.scale,y:(t-e.y)/e.scale}}function SG({objects:n,viewport:t,selectedIds:e,isPointerTool:i,onObjectDragEnd:s,onObjectClick:l,onStickyDoubleClick:c,onTextDoubleClick:f,canEdit:m}){const g=Object.values(n).sort((A,S)=>{const T=A.createdAt?.toMillis?.()??0,x=S.createdAt?.toMillis?.()??0;return T-x});return k.jsx(k.Fragment,{children:g.map(A=>A.type==="sticky"?k.jsx(TG,{obj:A,viewport:t,canEdit:m,selected:e.has(A.objectId),isPointerTool:i,onObjectDragEnd:s,onObjectClick:l,onStickyDoubleClick:c},A.objectId):A.type==="rectangle"?k.jsx(bG,{obj:A,viewport:t,canEdit:m,selected:e.has(A.objectId),isPointerTool:i,onObjectDragEnd:s,onObjectClick:l},A.objectId):A.type==="circle"?k.jsx(CG,{obj:A,viewport:t,canEdit:m,selected:e.has(A.objectId),isPointerTool:i,onObjectDragEnd:s,onObjectClick:l},A.objectId):A.type==="triangle"?k.jsx(RG,{obj:A,viewport:t,canEdit:m,selected:e.has(A.objectId),isPointerTool:i,onObjectDragEnd:s,onObjectClick:l},A.objectId):A.type==="line"?k.jsx(wG,{obj:A,viewport:t,canEdit:m,selected:e.has(A.objectId),isPointerTool:i,onObjectDragEnd:s,onObjectClick:l},A.objectId):A.type==="text"?k.jsx(xG,{obj:A,viewport:t,canEdit:m,selected:e.has(A.objectId),isPointerTool:i,onObjectDragEnd:s,onObjectClick:l,onTextDoubleClick:f},A.objectId):A.type==="emoji"?k.jsx(NG,{obj:A,viewport:t,canEdit:m,selected:e.has(A.objectId),isPointerTool:i,onObjectDragEnd:s,onObjectClick:l},A.objectId):null)})}const Wf=(n,t,e,i,s,l)=>({draggable:e&&l,onDragEnd:c=>{const f=c.target,m=f.getAbsolutePosition(),g=EG(m.x,m.y,t);i(n,g.x,g.y),f.position({x:g.x,y:g.y})},onClick:c=>s(n,{ctrlKey:c.evt.ctrlKey})});function TG({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c,onStickyDoubleClick:f}){const{objectId:m,position:g,dimensions:A,content:S,fillColor:T,textStyle:x}=n;return k.jsxs(Fl,{x:g.x,y:g.y,...Wf(m,t,e,l,c,s),onDblClick:e?()=>f(m):void 0,children:[k.jsx(Vf,{width:A.width,height:A.height,fill:T,stroke:i?"#4f46e5":"#d1d5db",strokeWidth:i?3:1,shadowColor:"black",shadowBlur:6,shadowOffset:{x:1,y:2},shadowOpacity:.12}),k.jsx(P0,{x:4,y:4,width:A.width-8,height:A.height-8,text:S||"Double-click to edit",fontSize:x.fontSize,fontFamily:x.fontFamily,fill:x.fontColor,fontStyle:x.bold&&x.italic?"bold italic":x.bold?"bold":x.italic?"italic":"normal",align:x.textAlign,verticalAlign:"top",padding:4,listening:!1})]})}function bG({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c}){const{objectId:f,position:m,dimensions:g}=n;return k.jsx(Fl,{x:m.x,y:m.y,...Wf(f,t,e,l,c,s),children:k.jsx(Vf,{width:g.width,height:g.height,fill:"transparent",stroke:i?"#4f46e5":"black",strokeWidth:i?3:2})})}function CG({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c}){const{objectId:f,position:m,dimensions:g}=n,A=g.width/2,S=g.height/2;return k.jsx(Fl,{x:m.x,y:m.y,...Wf(f,t,e,l,c,s),children:k.jsx(dG,{x:A,y:S,radiusX:A,radiusY:S,fill:"transparent",stroke:i?"#4f46e5":"black",strokeWidth:i?3:2})})}function RG({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c}){const{objectId:f,position:m,dimensions:g}=n,A=[0,g.height,g.width/2,0,g.width,g.height];return k.jsx(Fl,{x:m.x,y:m.y,...Wf(f,t,e,l,c,s),children:k.jsx(q8,{points:A,fill:"transparent",stroke:i?"#4f46e5":"black",strokeWidth:i?3:2,closed:!0})})}function wG({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c}){const{objectId:f,start:m,end:g,strokeColor:A,strokeWidth:S}=n,T=Math.min(m.x,g.x),x=Math.min(m.y,g.y),w=[m.x-T,m.y-x,g.x-T,g.y-x];return k.jsx(Fl,{x:T,y:x,...Wf(f,t,e,l,c,s),children:k.jsx(q8,{points:w,stroke:i?"#4f46e5":A??"#000",strokeWidth:i?3:S??2})})}function xG({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c,onTextDoubleClick:f}){const{objectId:m,position:g,dimensions:A,content:S,textStyle:T}=n;return k.jsxs(Fl,{x:g.x,y:g.y,...Wf(m,t,e,l,c,s),onDblClick:e?()=>f(m):void 0,children:[k.jsx(Vf,{width:A.width,height:A.height,fill:"transparent",stroke:i?"#4f46e5":"#d1d5db",strokeWidth:i?3:1}),k.jsx(P0,{x:4,y:4,width:A.width-8,height:A.height-8,text:S||"Double-click to edit",fontSize:T.fontSize,fontFamily:T.fontFamily,fill:T.fontColor,align:T.textAlign,verticalAlign:"top",padding:4,listening:!1})]})}function NG({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c}){const{objectId:f,position:m,emoji:g,fontSize:A=32}=n;return k.jsxs(Fl,{x:m.x,y:m.y,...Wf(f,t,e,l,c,s),children:[k.jsx(P0,{text:g,fontSize:A,listening:!1}),i&&k.jsx(Vf,{x:-4,y:-4,width:A+8,height:A+8,stroke:"#4f46e5",strokeWidth:2,fill:"transparent",listening:!1})]})}function DG({cursors:n,viewport:t,currentUserId:e}){const i=n.filter(l=>l.userId!==e),s=j.useRef(0);return j.useEffect(()=>{const l=Date.now();l-s.current>1e3&&(s.current=l,console.log("[CursorLayer] total cursors:",n.length,"remote (excluding self):",i.length,"currentUserId:",e,"remote positions:",i.map(c=>({id:c.userId.slice(0,8),x:c.x.toFixed(0),y:c.y.toFixed(0)}))))},[n,i.length,e]),k.jsx(G8,{listening:!1,children:i.map(l=>{const c=t.x+l.x*t.scale,f=t.y+l.y*t.scale;return k.jsxs(Fl,{x:c,y:f,children:[k.jsx(H8,{radius:6,fill:l.color,stroke:"#1a1a1a",strokeWidth:2,listening:!1}),k.jsx(P0,{x:10,y:-6,text:l.displayName||l.userId.slice(0,8),fontSize:12,fontFamily:"Inter, system-ui, sans-serif",fill:"#1a1a1a",listening:!1})]},l.userId)})})}function IG({comments:n,onCommentClick:t}){return k.jsx(k.Fragment,{children:n.map(e=>k.jsxs(Fl,{x:e.position.x,y:e.position.y,onClick:()=>t(e),onTap:()=>t(e),children:[k.jsx(Vf,{x:-24/2,y:-24/2,width:24,height:24,fill:"#4f46e5",cornerRadius:6,shadowColor:"black",shadowBlur:4,shadowOpacity:.2}),k.jsx(P0,{x:-8,y:-6,text:"",fontSize:14,listening:!1})]},e.id))})}const OG="/assets/ai-icon-q1BpoY3z.png",MG="/assets/pointer-icon-IPPLXpJe.png",LG="/assets/formats-icon-kYqTQfys.png",VG="/assets/sticky-icon-x5X3FZKq.png",kG="/assets/templates-icon-CnL5fU05.png",PG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA6/SURBVHic7d1bzGx3XcfhT8sGWqgcgkoVFJFDQQ6BEJBGPAAiES8MwSrxkBiNaDDGGCXeEokHYjSg4ULkoBgjYoIaE+QQKgaxCVgkcpY22krAIoFWWqBQWi+mBKht9+zd7vc/6/09T7Kyb7/zZjLrs9esmSkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAO8dZqwds2FnVo6unVU+sLqgeVN2juufCXQDH0XU3H1dWH67eWV1cvb+6aeGuzRIAp+6bq+dVP1V9++ItANNdXv1Z9cfVxxZv2RQBsL/zqxdWP13dfekSAG7p+upV7V6nP7F2yjbcZfWADTiren7119V3VSfWzgHgVpxo93bsz1VXV5eunXP4XAG4ffetXl398OohAJyS11c/U12zesihEgC37ZuqN1aPXT0EgNPygeqZ1UdXDzlEAuDWPaD6p+rbFu8A4I75j+opuUHw/zl79YADdN/qTTn5AxwHD67+vrr36iGHRgB8rbOqV1aPWj0EgDvNY6tXrB5xaHwK4Gs9v/rV1SMAuNN9R7u3Ad69esihcA/AV9y/+lB1n9VDADgjPl09It8TULkC8NV+r92NIgAcT+e2+7r2N6wecghcAdg5v92douesHgLAGfX56iH5VICbAG/2Czn5A0xwTvWzq0ccAlcAdn+Dj7QrQgCOv8uqhzf8VwRdAajH5OQPMMlDq0euHrGaAKinrh4AwJF72uoBqwmA3a9HATDL+Nd+AVAXrB4AwJEb/9ovAOpbVg8A4Mh96+oBqwmA+rrVAwA4cvdaPWA1HwOsG/N3AJjmpob/J9iJb/jnQAEGG30OHF0/ADCVAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMdGL1APb20eqS1SNY5oHVhatH7OmSds9XZrqw3fMVDt5NGzled6b+AGzCRa1/Du57XHSG/gZsw+ta/xzc9xjNWwAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAKgvrR6wp63sBGa7cfWAPY1/TRUAdd3qAXv6zOoBAHu4dvWAPY1/TRUAdfXqAXvayk5gtq28Vm1l5xkjAOry1QP2dNnqAQB78Jq6EQKgPrB6wJ4+tHoAwB4+uHrAnray84wRAPWO1QP28PnqXatHAOzhndX1q0fs4e2rB6wmAOriDv+u1X+uPrd6BMAePltdsnrESXypetvqEasJgLqqw38ivHb1AIBT8LrVA07i4up/Vo9YTQDs/OnqAbfjs9VfrR4BcAr+ssO+annIr/lHRgDs/EV1xeoRt+Hl+bgKsC2fql61esRtuDL/qaoEwJd9sXrx6hG34rrqd1ePADgNL+4wrwK8qPrC6hGHQAB8xcurf1094hZeVH1s9QiA0/Bf1W+vHnELl1avXj2Cw/SEdh+5u+kAjn+p7nZmHy4bclHrn5P7Hhedob8B23P3dv+xWv2cvKnd1YjHndmHuy2uAHytS6sXrB5RXVP9WC5TAdt2fbvXskP43v1fqd6zegSH7yWtq9Trqx848w+RjXEFgC17Wmuvrr7szD9Ejouzq9e05uT/nCN4fGyPAGDrLmr3GnfUz8c/ydVuTtFZ7e7AP6on6dXV04/kkbFFAoDj4Bnt3uI8qufi77R7LYfT8uzq053ZJ+ml1UOP6gGxSQKA4+JhnfkbA/+3eu5RPSCOtwd0Zt4SuK56Ybs7ZeH2CACOk7tWv9zu5sA7+/n3d9WDju6hMMX3Vm/pzjnxv6RdWMA+BADH0QOrP2j3led39Hn3puq7j3Y+Ez2y+q3q/e3/5Pxc9dbqedV9jn4yGycAOM7uW/18ux/pOZVPC7yv+s3qEUc/efvcHHHHnV89sbqg3WWn86p7trtv4Jrq8uqD1bs6zK/FZBsu6vB/Ye3LfjTftc7pO7d6UruT+kOre7ULhOvavWVwZfXhdq+p/71oI8CRcQUAuFP5bCQADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAx01uoBcETOrh5z83FB9Y3VedVdV446BQ+sLlw9Yk+XVB9dPWJPX6yura6qPly9t3pfdePKUXAUBADH2YnqmdVPVs+o7rd2DhvxyerN1Z/f/O8Na+cAsK9zq1+qrqhucjjuwPGf1S9W5wTAQXt69aHWnzgcx+u4rHpWABycc6qXtv5E4Tjex2uqewTHgHsAOA7Or95QPX71EEa4tPqhdjcOwmYJALbuQdVbq4esHsIol7V7u+nK1UPgdAkAtuzrq7dXj1g9hJE+Uj2l+sTqIXA6fBEQW3Wien1O/qzzsOq11V1WD4HT4YnLVv1Gu8/3w0oPbndz4NsW74BT5i0AtujR1bvbzrf4cbzdUD2h+rfVQ+BUeAuALXpZTv4cjhPV768eAafKFQC25vuqf1g9Am7F97S7KRU2wRUAtubXVg+A2/CC1QPgVLgCwJbcv92vzJ1YPQRuxQ3tfrXRFwSxCa4AsCU/kpM/h+tE9ezVI2BfAoAtefrqAXASnqNshrcA2JJPVN+wegTcjqva/TYFHDwBwFbcr/rk6hGwh/tVn1o9Ak7GWwBsxUNXD4A9+WEqNkEAsBX3WT0A9uS5yiYIALbiHqsHwJ7OWz0A9iEA2IovrB4Ae/r86gGwDwHAVnxm9QDYk+cqmyAA2IorVw+APV2xegDsw8cA2Yqzq2urc1cPgdvx2Xb3ANy0egicjCsAbMWN1aWrR8BJvCsnfzZCALAlF68eACfhp6rZDAHAlvzt6gFwEn+zegDsyz0AbM37qketHgG34r3VY1ePgH25AsDW/OHqAXAbXrp6AJwKVwDYmrtXl1cPWD0EvsoV1cPzhVVsiCsAbM311a+vHgG38IKc/NkYVwDYorOqN1ffv3oIVG+sfnD1CDhVAoCtun/1nur81UMY7arq8dXHVw+BU+UtALbqquq5+eEV1vlc9Zyc/NkoAcCW/WP1E9UNq4cwzherH6/esXoIwGTPaPcLbDc5HEdwXFs9KwAOwhOqy1p/cnAc7+Pfq8cFwEG5d/WKdj8ctPpE4Thex5eqP6ruFQAH68ntfjho9UnDcTyOt1RPCoDNeHL1yuqa1p9EHNs6rm53Nek7g2PK9wAwwTnVhdVTq0dXF7T7/oDzqrst3MV6X2h3U9/H272//952P+l7SbtvnQQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATuL/ANILJbw2b9d5AAAAAElFTkSuQmCC",UG="/assets/shapes-icon-BpiwLWZS.png",zG="/assets/emoji-icon-DGWSzL21.png",BG="/assets/comment-icon-D2tnyNZ6.png",jG="/assets/link-icon-BaLUL97h.png",GG="/assets/redo-icon-B46labgb.png",HG="/assets/undo-icon-i2DOfIDT.png",qG="/assets/pencil-icon-D_gGFYx7.png";function FG({activeTool:n,onToolSelect:t,onEmojiSelect:e,onUndo:i,onRedo:s,canEdit:l}){const[c,f]=j.useState(!1),[m,g]=j.useState(!1),[A,S]=j.useState(!1),[T,x]=j.useState(!1),[w,L]=j.useState(!1),V=j.useRef(null),G=j.useRef(null),B=j.useRef(null),Y=j.useRef(null),et=j.useRef(null);j.useEffect(()=>{function tt(z){V.current?.contains(z.target)||G.current?.contains(z.target)||B.current?.contains(z.target)||Y.current?.contains(z.target)||et.current?.contains(z.target)||(f(!1),g(!1),S(!1),x(!1),L(!1))}return document.addEventListener("mousedown",tt),()=>document.removeEventListener("mousedown",tt)},[]);const at=["rectangle","circle","triangle","line"];return k.jsxs("div",{className:"whiteboard-toolbar",children:[k.jsx("span",{className:"toolbar-icon-wrap",title:"AI Template Generator - Coming Soon",children:k.jsx("button",{type:"button",className:"toolbar-icon-btn disabled",disabled:!0,children:k.jsx("img",{src:OG,alt:"AI",width:20,height:20})})}),k.jsx("button",{type:"button",className:`toolbar-icon-btn ${n==="pointer"?"active":""}`,onClick:()=>t("pointer"),title:"Select",children:k.jsx("img",{src:MG,alt:"Select",width:20,height:20})}),k.jsxs("div",{className:"toolbar-dropdown",ref:V,children:[k.jsx("button",{type:"button",className:"toolbar-icon-btn",onClick:()=>f(tt=>!tt),title:"Formats & Flows",children:k.jsx("img",{src:LG,alt:"Formats & Flows",width:20,height:20})}),c&&k.jsxs("div",{className:"toolbar-dropdown-panel",children:[k.jsx("p",{className:"toolbar-coming-soon",children:"Coming Soon"}),k.jsx("p",{className:"toolbar-dropdown-hint",children:"Doc, Slides, Table, Timeline, Kanban, Flow Chart"})]})]}),k.jsxs("div",{className:"toolbar-dropdown",ref:G,children:[k.jsx("button",{type:"button",className:"toolbar-icon-btn",onClick:()=>g(tt=>!tt),title:"Templates",children:k.jsx("img",{src:kG,alt:"Templates",width:20,height:20})}),m&&k.jsx("div",{className:"toolbar-dropdown-panel",children:k.jsx("p",{className:"toolbar-coming-soon",children:"Templates Coming Soon"})})]}),k.jsx("button",{type:"button",className:`toolbar-icon-btn ${n==="sticky"?"active":""}`,onClick:()=>t("sticky"),disabled:!l,title:"Sticky Note",children:k.jsx("img",{src:VG,alt:"Sticky Note",width:20,height:20})}),k.jsx("button",{type:"button",className:`toolbar-icon-btn ${n==="text"?"active":""}`,onClick:()=>t("text"),disabled:!l,title:"Text Box",children:k.jsx("img",{src:PG,alt:"Text Box",width:20,height:20})}),k.jsxs("div",{className:"toolbar-dropdown",ref:B,children:[k.jsx("button",{type:"button",className:`toolbar-icon-btn ${at.includes(n)?"active":""}`,onClick:()=>S(tt=>!tt),disabled:!l,title:"Shapes",children:k.jsx("img",{src:UG,alt:"Shapes",width:20,height:20})}),A&&k.jsx("div",{className:"toolbar-dropdown-panel",children:at.map(tt=>k.jsx("button",{type:"button",className:"toolbar-dropdown-item",onClick:()=>{t(tt),S(!1)},children:tt.charAt(0).toUpperCase()+tt.slice(1)},tt))})]}),k.jsxs("div",{className:"toolbar-dropdown",ref:Y,children:[k.jsx("button",{type:"button",className:`toolbar-icon-btn ${n==="pen"?"active":""}`,onClick:()=>{x(tt=>!tt),T||t("pen")},disabled:!l,title:"Pen",children:k.jsx("img",{src:qG,alt:"Pen",width:20,height:20})}),T&&k.jsxs("div",{className:"toolbar-dropdown-panel",children:[k.jsx("button",{type:"button",className:"toolbar-dropdown-item",disabled:!0,children:"Pen (Coming Soon)"}),k.jsx("button",{type:"button",className:"toolbar-dropdown-item",disabled:!0,children:"Highlighter (Coming Soon)"}),k.jsx("button",{type:"button",className:"toolbar-dropdown-item",disabled:!0,children:"Eraser (Coming Soon)"}),k.jsx("button",{type:"button",className:"toolbar-dropdown-item",disabled:!0,children:"Lasso (Coming Soon)"})]})]}),k.jsxs("div",{className:"toolbar-dropdown",ref:et,children:[k.jsx("button",{type:"button",className:`toolbar-icon-btn ${n==="emoji"?"active":""}`,onClick:()=>L(tt=>!tt),disabled:!l,title:"Stickers / Emojis",children:k.jsx("img",{src:zG,alt:"Stickers / Emojis",width:20,height:20})}),w&&k.jsxs("div",{className:"toolbar-dropdown-panel toolbar-emoji-panel",children:[k.jsx("p",{className:"toolbar-coming-soon",children:"Emoji Picker Coming Soon"}),k.jsx("div",{className:"toolbar-emoji-preview",children:["","","","",""].map(tt=>k.jsx("button",{type:"button",className:"toolbar-emoji-btn",onClick:()=>{t("emoji"),e?.(tt),L(!1)},title:`Place ${tt}`,children:tt},tt))})]})]}),k.jsx("button",{type:"button",className:`toolbar-icon-btn ${n==="comment"?"active":""}`,onClick:()=>t("comment"),disabled:!l,title:"Comment",children:k.jsx("img",{src:BG,alt:"Comment",width:20,height:20})}),k.jsx("button",{type:"button",className:"toolbar-icon-btn disabled",title:"Link - Coming Soon",disabled:!0,children:k.jsx("img",{src:jG,alt:"Link",width:20,height:20})}),k.jsx("div",{className:"toolbar-divider"}),k.jsx("button",{type:"button",className:"toolbar-icon-btn",title:"Undo (Z)",onClick:()=>i?.(),disabled:!l,children:k.jsx("img",{src:HG,alt:"Undo",width:20,height:20})}),k.jsx("button",{type:"button",className:"toolbar-icon-btn",title:"Redo (Z)",onClick:()=>s?.(),disabled:!l,children:k.jsx("img",{src:GG,alt:"Redo",width:20,height:20})})]})}const YG="/assets/reaction-icon-BOtQgXzF.png",QG="/assets/share-icon-ko8Xib63.png";function XG({boardName:n,onBoardNameChange:t,onShareClick:e,canEdit:i,canShare:s}){const[l,c]=j.useState(!1),[f,m]=j.useState(n),g=j.useRef(null),[A,S]=j.useState(!1),T=j.useRef(null);j.useEffect(()=>{m(n)},[n]),j.useEffect(()=>{l&&g.current?.focus()},[l]),j.useEffect(()=>{function w(L){T.current?.contains(L.target)||S(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const x=["","","","","",""];return k.jsxs(k.Fragment,{children:[k.jsxs("nav",{className:"whiteboard-nav-left",children:[k.jsx(JA,{to:"/dashboard",className:"whiteboard-nav-brand",children:"Vellum"}),k.jsx("div",{className:"whiteboard-nav-board-name",children:l&&i?k.jsx("input",{ref:g,type:"text",value:f,onChange:w=>m(w.target.value),onBlur:()=>{c(!1);const w=f.trim();w&&w!==n&&t?.(w)},onKeyDown:w=>{if(w.key==="Enter"){c(!1);const L=f.trim();L&&L!==n&&t?.(L)}},className:"whiteboard-nav-name-input"}):k.jsx("button",{type:"button",className:"whiteboard-nav-name-btn",onClick:()=>i&&c(!0),children:n||"Untitled Board"})})]}),k.jsxs("nav",{className:"whiteboard-nav-right",children:[k.jsxs("div",{className:"whiteboard-nav-reactions",ref:T,children:[k.jsx("button",{type:"button",className:"whiteboard-nav-btn",onClick:()=>S(w=>!w),title:"Reactions",children:k.jsx("img",{src:YG,alt:"Reactions",width:20,height:20})}),A&&k.jsxs("div",{className:"whiteboard-nav-reactions-panel",children:[k.jsx("p",{className:"whiteboard-nav-reactions-label",children:"Quick reactions"}),k.jsx("div",{className:"whiteboard-nav-reactions-grid",children:x.map(w=>k.jsx("button",{type:"button",className:"whiteboard-nav-emoji-btn",onClick:()=>S(!1),children:w},w))}),k.jsx("p",{className:"whiteboard-nav-coming-soon",children:"Stickers, Timer, Voting - Coming Soon"})]})]}),s&&k.jsxs("button",{type:"button",className:"whiteboard-nav-btn whiteboard-nav-share",onClick:e,title:"Share",children:[k.jsx("img",{src:QG,alt:"",width:20,height:20}),"Share"]})]})]})}const F8=(...n)=>n.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim();const KG=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const WG=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase());const Gb=n=>{const t=WG(n);return t.charAt(0).toUpperCase()+t.slice(1)};var JG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZG=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const $G=j.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:s="",children:l,iconNode:c,...f},m)=>j.createElement("svg",{ref:m,...JG,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:F8("lucide",s),...!l&&!ZG(f)&&{"aria-hidden":"true"},...f},[...c.map(([g,A])=>j.createElement(g,A)),...Array.isArray(l)?l:[l]]));const Y8=(n,t)=>{const e=j.forwardRef(({className:i,...s},l)=>j.createElement($G,{ref:l,iconNode:t,className:F8(`lucide-${KG(Gb(n))}`,`lucide-${n}`,i),...s}));return e.displayName=Gb(n),e};const tH=[["path",{d:"M5 12h14",key:"1ays0h"}]],eH=Y8("minus",tH);const nH=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],iH=Y8("plus",nH),sH="/assets/grid-icon-7S24i3vX.png";function aH({showGrid:n,onGridToggle:t,zoom:e,onZoomIn:i,onZoomOut:s}){const l=Math.round(e*100);return k.jsxs("div",{className:"whiteboard-controls",children:[k.jsx("button",{type:"button",className:`whiteboard-control-btn ${n?"active":""}`,onClick:t,title:n?"Hide grid":"Show grid",children:k.jsx("img",{src:sH,alt:"",width:18,height:18})}),k.jsxs("div",{className:"whiteboard-zoom",children:[k.jsx("button",{type:"button",className:"whiteboard-zoom-btn",onClick:s,title:"Zoom out",disabled:l<=10,children:k.jsx(eH,{size:18})}),k.jsxs("span",{className:"whiteboard-zoom-value",children:[l,"%"]}),k.jsx("button",{type:"button",className:"whiteboard-zoom-btn",onClick:i,title:"Zoom in",disabled:l>=400,children:k.jsx(iH,{size:18})})]})]})}function rH({sticky:n,viewport:t,onSave:e,onCancel:i}){const s=j.useRef(null),l=t.x+n.position.x*t.scale,c=t.y+n.position.y*t.scale,f=n.dimensions.width*t.scale,m=n.dimensions.height*t.scale;return j.useEffect(()=>{s.current?.focus(),s.current?.select()},[]),k.jsx("div",{style:{position:"absolute",left:l,top:c,width:f,height:m,zIndex:1e3,padding:4,boxSizing:"border-box"},children:k.jsx("textarea",{ref:s,defaultValue:n.content,onBlur:g=>e(g.target.value),onKeyDown:g=>{g.key==="Escape"&&i()},style:{width:"100%",height:"100%",padding:8,margin:0,border:"2px solid #4f46e5",borderRadius:4,fontSize:n.textStyle.fontSize,fontFamily:n.textStyle.fontFamily,color:n.textStyle.fontColor,fontWeight:n.textStyle.bold?"bold":"normal",fontStyle:n.textStyle.italic?"italic":"normal",textAlign:n.textStyle.textAlign,resize:"none",outline:"none",background:n.fillColor,boxSizing:"border-box"}})})}function lH({text:n,viewport:t,onSave:e,onCancel:i}){const s=j.useRef(null),l=t.x+n.position.x*t.scale,c=t.y+n.position.y*t.scale,f=n.dimensions.width*t.scale,m=n.dimensions.height*t.scale;return j.useEffect(()=>{s.current?.focus(),s.current?.select()},[]),k.jsx("div",{style:{position:"absolute",left:l,top:c,width:f,height:m,zIndex:1e3,padding:4,boxSizing:"border-box"},children:k.jsx("textarea",{ref:s,defaultValue:n.content,onBlur:g=>e(g.target.value),onKeyDown:g=>{g.key==="Escape"&&i()},style:{width:"100%",height:"100%",padding:8,margin:0,border:"2px solid #4f46e5",borderRadius:4,fontSize:n.textStyle.fontSize,fontFamily:n.textStyle.fontFamily,color:n.textStyle.fontColor,fontWeight:n.textStyle.bold?"bold":"normal",fontStyle:n.textStyle.italic?"italic":"normal",textAlign:n.textStyle.textAlign,resize:"none",outline:"none",background:"transparent",boxSizing:"border-box"}})})}function oH({position:n,onSave:t,onCancel:e}){const[i,s]=j.useState(""),l=j.useRef(null);return j.useEffect(()=>{l.current?.focus()},[]),n?k.jsx("div",{className:"comment-modal-overlay",onClick:c=>c.target===c.currentTarget&&e(),children:k.jsxs("div",{className:"comment-modal",children:[k.jsx("h3",{children:"Add Comment"}),k.jsx("textarea",{ref:l,value:i,onChange:c=>s(c.target.value),placeholder:"Write a comment...",rows:4}),k.jsxs("div",{className:"comment-modal-actions",children:[k.jsx("button",{type:"button",className:"comment-btn-cancel",onClick:e,children:"Cancel"}),k.jsx("button",{type:"button",className:"comment-btn-save",onClick:()=>{const c=i.trim();c&&t(c),e()},disabled:!i.trim(),children:"Save"})]})]})}):null}function uH({comment:n,onReply:t,onClose:e}){const[i,s]=j.useState("");if(!n)return null;const l=()=>{const c=i.trim();c&&(t(c),s(""))};return k.jsx("div",{className:"comment-thread-overlay",onClick:c=>c.target===c.currentTarget&&e(),children:k.jsxs("div",{className:"comment-thread-modal",children:[k.jsxs("div",{className:"comment-thread-header",children:[k.jsx("h3",{children:"Comment"}),k.jsx("button",{type:"button",className:"comment-thread-close",onClick:e,children:""})]}),k.jsxs("div",{className:"comment-thread-main",children:[k.jsx("div",{className:"comment-thread-author",children:n.authorName||"Anonymous"}),k.jsx("p",{className:"comment-thread-text",children:n.text})]}),n.replies.length>0&&k.jsx("div",{className:"comment-thread-replies",children:n.replies.map((c,f)=>k.jsxs("div",{className:"comment-thread-reply",children:[k.jsx("span",{className:"comment-thread-reply-author",children:c.authorName||"Anonymous"}),k.jsx("p",{children:c.text})]},f))}),k.jsxs("div",{className:"comment-thread-input",children:[k.jsx("textarea",{value:i,onChange:c=>s(c.target.value),placeholder:"Write a reply...",rows:2}),k.jsx("button",{type:"button",className:"comment-btn-save",onClick:l,disabled:!i.trim(),children:"Reply"})]})]})})}function cH(){const{boardId:n}=yw(),t=kf(),{user:e}=OS(),i=j.useRef(null),[s,l]=j.useState(null),[c,f]=j.useState(!1),[m,g]=j.useState(!0),[A,S]=j.useState(!1),[T,x]=j.useState({}),[w,L]=j.useState([]),[,V]=j.useState([]),[G,B]=j.useState([]),[Y,et]=j.useState({x:0,y:0,scale:1}),[at,tt]=j.useState("pointer"),[z,M]=j.useState(new Set),[U,q]=j.useState(null),[X,Q]=j.useState(null),[H,Ft]=j.useState(!1),[Pt,$]=j.useState(null),[Tt,Et]=j.useState(null),[Ut,qt]=j.useState(null),[K,ht]=j.useState(()=>{try{const vt=localStorage.getItem("vellum:showGrid");return vt===null?!0:vt==="true"}catch{return!0}}),[_t,jt]=j.useState(()=>({width:typeof window<"u"?window.innerWidth:800,height:typeof window<"u"?window.innerHeight:600})),Yt=j.useRef([]),te=j.useRef([]),Rt=n??"";j.useEffect(()=>{if(!Rt||!e)return;let vt=!1;async function Lt(){try{const Kt=await qm(Rt);if(vt)return;if(!Kt){f(!0),l(null);return}const ne=await Z9(Rt);if(vt)return;if(ne===null){f(!0),l(null);return}l(Kt),f(!1);const Me=await KP(Rt);vt||S(Me)}finally{vt||g(!1)}}return Lt(),()=>{vt=!0}},[Rt,e]),j.useEffect(()=>{!Rt||!e||gU(Rt)},[Rt,e]),j.useEffect(()=>{if(!(!Rt||!e)&&i.current){const vt=(_t.width/2-Y.x)/Y.scale,Lt=(_t.height/2-Y.y)/Y.scale;ob(Rt,vt,Lt)}},[Rt,e,_t,Y]),j.useEffect(()=>Rt?fU(Rt,x):void 0,[Rt]),j.useEffect(()=>Rt?pU(Rt,L):void 0,[Rt]),j.useEffect(()=>Rt?_U(Rt,V):void 0,[Rt]),j.useEffect(()=>Rt?yU(Rt,B):void 0,[Rt]),j.useEffect(()=>{const vt=i.current;if(!vt)return;const Lt=()=>jt({width:window.innerWidth,height:window.innerHeight}),Kt=new ResizeObserver(ne=>{const Me=ne[0]?.contentRect;Me?.width&&Me?.height?jt({width:Me.width,height:Me.height}):Lt()});return Kt.observe(vt),window.addEventListener("resize",Lt),Lt(),()=>{Kt.disconnect(),window.removeEventListener("resize",Lt)}},[]);const Ge=j.useCallback(vt=>{Yt.current=Yt.current.slice(-49).concat(vt),te.current=[]},[]),Oe=j.useCallback(async()=>{const vt=Yt.current.pop();if(!(!vt||!Rt||!A))try{if(vt.type==="create")await T2(Rt,vt.objectId),te.current.push(vt);else if(vt.type==="update")await Qd(Rt,vt.objectId,vt.from),te.current.push({...vt,from:vt.to,to:vt.from});else if(vt.type==="delete"){const Lt=cU(vt.deleted);await hU(Rt,vt.objectId,Lt),te.current.push(vt)}}catch(Lt){console.error("[undo]",Lt),Yt.current.push(vt)}},[Rt,A]),as=j.useCallback(async()=>{const vt=te.current.pop();if(!(!vt||!Rt||!A))try{if(vt.type==="create"){const Lt=await S2(Rt,vt.createInput);Yt.current.push({...vt,objectId:Lt})}else vt.type==="update"?(await Qd(Rt,vt.objectId,vt.to),Yt.current.push({...vt,from:vt.to,to:vt.from})):vt.type==="delete"&&(await T2(Rt,vt.objectId),Yt.current.push(vt))}catch(Lt){console.error("[redo]",Lt),te.current.push(vt)}},[Rt,A,T]);j.useEffect(()=>{const vt=Lt=>{Lt.key==="Escape"&&(tt("pointer"),M(new Set),$(null),Et(null)),(Lt.key==="Delete"||Lt.key==="Backspace")&&z.size>0&&A&&(z.forEach(Kt=>{const ne=T[Kt];ne&&Ge({type:"delete",objectId:Kt,deleted:ne}),T2(Rt,Kt)}),M(new Set)),(Lt.metaKey||Lt.ctrlKey)&&Lt.key==="z"&&(Lt.preventDefault(),Lt.shiftKey?as():Oe())};return window.addEventListener("keydown",vt),()=>window.removeEventListener("keydown",vt)},[Rt,A,z,T,Ge,Oe,as]);const ua=j.useCallback(vt=>{if(!Rt)return;const Lt=vt.target.getStage();if(!Lt?.getPointerPosition)return;const Kt=Lt.getPointerPosition();if(!Kt)return;const ne=(Kt.x-Y.x)/Y.scale,Me=(Kt.y-Y.y)/Y.scale;ob(Rt,ne,Me)},[Rt,Y]),Li=j.useCallback(()=>{const vt=_t.width,Lt=_t.height;return{x:(vt/2-Y.x)/Y.scale,y:(Lt/2-Y.y)/Y.scale}},[_t,Y]),ws=j.useCallback(async(vt,Lt,Kt)=>{if(!Rt||!A)return;const ne=T[vt];if(ne){if(ne.type==="line"){const Me=ne,ni=Math.min(Me.start.x,Me.end.x),Fa=Math.min(Me.start.y,Me.end.y),ha=Lt-ni,Ql=Kt-Fa,pr={start:{x:Me.start.x+ha,y:Me.start.y+Ql},end:{x:Me.end.x+ha,y:Me.end.y+Ql}};Ge({type:"update",objectId:vt,from:{start:Me.start,end:Me.end},to:pr}),await Qd(Rt,vt,pr)}else if("position"in ne){const Me={position:ne.position},ni={position:{x:Lt,y:Kt}};Ge({type:"update",objectId:vt,from:Me,to:ni}),x(Fa=>{const ha=Fa[vt];return!ha||!("position"in ha)?Fa:{...Fa,[vt]:{...ha,position:{x:Lt,y:Kt}}}}),await Qd(Rt,vt,ni)}}},[Rt,A,T,Ge]),rs=j.useCallback((vt,Lt)=>{M(Kt=>{const ne=new Set(Kt);if(Lt.ctrlKey)ne.has(vt)?ne.delete(vt):ne.add(vt);else return new Set([vt]);return ne})},[]),Ys=j.useCallback(async vt=>{if(M(new Set),at==="comment"&&A&&$(vt),(at==="sticky"||at==="rectangle"||at==="circle"||at==="triangle"||at==="line"||at==="text")&&A){const Lt=vt;let Kt=null;if(at==="sticky"?Kt={type:"sticky",position:{x:Lt.x-100,y:Lt.y-100},dimensions:{width:200,height:200},fillColor:"#fef08a"}:at==="rectangle"?Kt={type:"rectangle",position:{x:Lt.x-75,y:Lt.y-50},dimensions:{width:150,height:100}}:at==="circle"?Kt={type:"circle",position:{x:Lt.x-50,y:Lt.y-50},dimensions:{width:100,height:100}}:at==="triangle"?Kt={type:"triangle",position:{x:Lt.x-50,y:Lt.y-40},dimensions:{width:100,height:80}}:at==="line"?Kt={type:"line",start:{x:Lt.x-50,y:Lt.y},end:{x:Lt.x+50,y:Lt.y}}:at==="text"&&(Kt={type:"text",position:{x:Lt.x-100,y:Lt.y-20},dimensions:{width:200,height:40},content:"Text"}),Kt){const ne=await S2(Rt,Kt);Ge({type:"create",objectId:ne,createInput:Kt})}}if(at==="emoji"&&A){const Lt=Ut??"",Kt={type:"emoji",position:{x:vt.x-16,y:vt.y-16},emoji:Lt},ne=await S2(Rt,Kt);Ge({type:"create",objectId:ne,createInput:Kt}),qt(null)}},[Rt,at,A,Ut,Ge]),ls=j.useCallback(vt=>{A&&q(vt)},[A]),Qs=j.useCallback(vt=>{A&&Q(vt)},[A]),Yl=j.useCallback(async(vt,Lt)=>{if(!Rt||!A)return;const Kt=T[vt],ne=Kt&&Kt.type==="sticky"?Kt.content:"";Ge({type:"update",objectId:vt,from:{content:ne},to:{content:Lt}}),await Qd(Rt,vt,{content:Lt}),q(null)},[Rt,A,T,Ge]),mr=j.useCallback(async(vt,Lt)=>{if(!Rt||!A)return;const Kt=T[vt],ne=Kt&&Kt.type==="text"?Kt.content:"";Ge({type:"update",objectId:vt,from:{content:ne},to:{content:Lt}}),await Qd(Rt,vt,{content:Lt}),Q(null)},[Rt,A,T,Ge]),xs=j.useCallback(async vt=>{!Rt||!A||!Pt||(await dU(Rt,Pt,vt),$(null))},[Rt,A,Pt]),Ha=j.useCallback(async vt=>{!Rt||!Tt||(await mU(Rt,Tt.id,vt),Et(null))},[Rt,Tt]),qa=j.useCallback(()=>{const vt=Li(),Lt=Math.min(4,Y.scale*1.2),Kt=_t.width,ne=_t.height;et({x:Kt/2-vt.x*Lt,y:ne/2-vt.y*Lt,scale:Lt})},[Y,_t,Li]),Nn=j.useCallback(()=>{const vt=Li(),Lt=Math.max(.1,Y.scale/1.2),Kt=_t.width,ne=_t.height;et({x:Kt/2-vt.x*Lt,y:ne/2-vt.y*Lt,scale:Lt})},[Y,_t,Li]),jn=j.useCallback(vt=>{tt(vt)},[]),zo=j.useCallback(vt=>{qt(vt)},[]),Dn=j.useCallback(async vt=>{!Rt||!s||s.ownerId!==e?.uid||(await FP(Rt,{name:vt}),l(Lt=>Lt?{...Lt,name:vt}:null))},[Rt,s,e?.uid]);if(!e)return null;if(m)return k.jsx("div",{className:"board-page-loading",children:"Loading board"});if(c)return k.jsxs("div",{className:"board-page-denied",children:[k.jsx("p",{children:"You don't have access to this board."}),k.jsx("button",{type:"button",onClick:()=>t("/dashboard"),children:"Back to Dashboard"})]});if(!s)return null;const rn=U?T[U]:null,Fi=X?T[X]:null,os=rn?.type==="sticky",ca=Fi?.type==="text";return k.jsxs("div",{className:"board-page",children:[k.jsx(XG,{boardName:s.name||"Untitled Board",onBoardNameChange:Dn,onShareClick:()=>Ft(!0),canEdit:A&&s.ownerId===e.uid,canShare:s.ownerId===e.uid}),k.jsxs("div",{ref:i,className:"board-canvas-container",children:[k.jsxs(AG,{width:_t.width,height:_t.height,viewport:Y,onViewportChange:et,onMouseMove:ua,onBackgroundClick:Ys,showGrid:K,cursorLayer:k.jsx(DG,{cursors:G,viewport:Y,currentUserId:e.uid}),children:[k.jsx(SG,{objects:T,viewport:Y,selectedIds:z,isPointerTool:at==="pointer",onObjectDragEnd:ws,onObjectClick:rs,onStickyDoubleClick:ls,onTextDoubleClick:Qs,canEdit:A}),k.jsx(IG,{comments:w,onCommentClick:Et})]}),k.jsx(FG,{activeTool:at,onToolSelect:jn,onEmojiSelect:zo,onUndo:Oe,onRedo:as,canEdit:A}),k.jsx(aH,{showGrid:K,onGridToggle:()=>{ht(vt=>{const Lt=!vt;try{localStorage.setItem("vellum:showGrid",String(Lt))}catch{}return Lt})},zoom:Y.scale,onZoomIn:qa,onZoomOut:Nn}),os&&U&&rn&&k.jsx(rH,{sticky:rn,viewport:Y,onSave:vt=>Yl(U,vt),onCancel:()=>q(null)}),ca&&X&&Fi&&k.jsx(lH,{text:Fi,viewport:Y,onSave:vt=>mr(X,vt),onCancel:()=>Q(null)}),k.jsx(oH,{position:Pt,onSave:xs,onCancel:()=>$(null)}),k.jsx(uH,{comment:Tt,onReply:Ha,onClose:()=>Et(null)}),H&&k.jsx(e8,{boardId:Rt,onClose:()=>Ft(!1)})]})]})}function Hb({children:n}){const{user:t,loading:e}=OS();return e?k.jsx("div",{className:"app-loading",children:"Loading"}):t?k.jsx(k.Fragment,{children:n}):k.jsx(sC,{to:"/login",replace:!0})}function hH(){return k.jsxs(Mw,{children:[k.jsx(Jd,{path:"/",element:k.jsx(UP,{})}),k.jsx(Jd,{path:"/login",element:k.jsx(zP,{})}),k.jsx(Jd,{path:"/dashboard",element:k.jsx(Hb,{children:k.jsx(oU,{})})}),k.jsx(Jd,{path:"/board/:boardId",element:k.jsx(Hb,{children:k.jsx(cH,{})})}),k.jsx(Jd,{path:"*",element:k.jsx(sC,{to:"/",replace:!0})})]})}function fH(){return k.jsx(i7,{children:k.jsx(PP,{children:k.jsx(hH,{})})})}VR.createRoot(document.getElementById("root")).render(k.jsx(j.StrictMode,{children:k.jsx(fH,{})}));
