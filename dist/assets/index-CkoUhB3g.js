(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=e(s);fetch(s.href,l)}})();function Wb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wv={exports:{}},rg={};var I4;function MR(){if(I4)return rg;I4=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var f in s)f!=="key"&&(l[f]=s[f])}else l=s;return s=l.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:l}}return rg.Fragment=t,rg.jsx=e,rg.jsxs=e,rg}var O4;function LR(){return O4||(O4=1,Wv.exports=MR()),Wv.exports}var k=LR(),Jv={exports:{}},me={};var M4;function VR(){if(M4)return me;M4=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function x(K){return K===null||typeof K!="object"?null:(K=T&&K[T]||K["@@iterator"],typeof K=="function"?K:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,L={};function B(K,ft,yt){this.props=K,this.context=ft,this.refs=L,this.updater=yt||w}B.prototype.isReactComponent={},B.prototype.setState=function(K,ft){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ft,"setState")},B.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function j(){}j.prototype=B.prototype;function q(K,ft,yt){this.props=K,this.context=ft,this.refs=L,this.updater=yt||w}var $=q.prototype=new j;$.constructor=q,I($,B.prototype),$.isPureReactComponent=!0;var Z=Array.isArray;function nt(){}var P={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function z(K,ft,yt){var jt=yt.ref;return{$$typeof:n,type:K,key:ft,ref:jt!==void 0?jt:null,props:yt}}function F(K,ft){return z(K.type,ft,K.props)}function X(K){return typeof K=="object"&&K!==null&&K.$$typeof===n}function Q(K){var ft={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(yt){return ft[yt]})}var G=/\/+/g;function Yt(K,ft){return typeof K=="object"&&K!==null&&K.key!=null?Q(""+K.key):ft.toString(36)}function Pt(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(nt,nt):(K.status="pending",K.then(function(ft){K.status==="pending"&&(K.status="fulfilled",K.value=ft)},function(ft){K.status==="pending"&&(K.status="rejected",K.reason=ft)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function et(K,ft,yt,jt,qt){var Wt=typeof K;(Wt==="undefined"||Wt==="boolean")&&(K=null);var ge=!1;if(K===null)ge=!0;else switch(Wt){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(K.$$typeof){case n:case t:ge=!0;break;case A:return ge=K._init,et(ge(K._payload),ft,yt,jt,qt)}}if(ge)return qt=qt(K),ge=jt===""?"."+Yt(K,0):jt,Z(qt)?(yt="",ge!=null&&(yt=ge.replace(G,"$&/")+"/"),et(qt,ft,yt,"",function(as){return as})):qt!=null&&(X(qt)&&(qt=F(qt,yt+(qt.key==null||K&&K.key===qt.key?"":(""+qt.key).replace(G,"$&/")+"/")+ge)),ft.push(qt)),1;ge=0;var wt=jt===""?".":jt+":";if(Z(K))for(var ie=0;ie<K.length;ie++)jt=K[ie],Wt=wt+Yt(jt,ie),ge+=et(jt,ft,yt,Wt,qt);else if(ie=x(K),typeof ie=="function")for(K=ie.call(K),ie=0;!(jt=K.next()).done;)jt=jt.value,Wt=wt+Yt(jt,ie++),ge+=et(jt,ft,yt,Wt,qt);else if(Wt==="object"){if(typeof K.then=="function")return et(Pt(K),ft,yt,jt,qt);throw ft=String(K),Error("Objects are not valid as a React child (found: "+(ft==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ft)+"). If you meant to render a collection of children, use an array instead.")}return ge}function vt(K,ft,yt){if(K==null)return K;var jt=[],qt=0;return et(K,jt,"","",function(Wt){return ft.call(yt,Wt,qt++)}),jt}function St(K){if(K._status===-1){var ft=K._result;ft=ft(),ft.then(function(yt){(K._status===0||K._status===-1)&&(K._status=1,K._result=yt)},function(yt){(K._status===0||K._status===-1)&&(K._status=2,K._result=yt)}),K._status===-1&&(K._status=0,K._result=ft)}if(K._status===1)return K._result.default;throw K._result}var Ut=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ft=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ft))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},Qt={map:vt,forEach:function(K,ft,yt){vt(K,function(){ft.apply(this,arguments)},yt)},count:function(K){var ft=0;return vt(K,function(){ft++}),ft},toArray:function(K){return vt(K,function(ft){return ft})||[]},only:function(K){if(!X(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return me.Activity=E,me.Children=Qt,me.Component=B,me.Fragment=e,me.Profiler=s,me.PureComponent=q,me.StrictMode=i,me.Suspense=m,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,me.__COMPILER_RUNTIME={__proto__:null,c:function(K){return P.H.useMemoCache(K)}},me.cache=function(K){return function(){return K.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(K,ft,yt){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var jt=I({},K.props),qt=K.key;if(ft!=null)for(Wt in ft.key!==void 0&&(qt=""+ft.key),ft)!M.call(ft,Wt)||Wt==="key"||Wt==="__self"||Wt==="__source"||Wt==="ref"&&ft.ref===void 0||(jt[Wt]=ft[Wt]);var Wt=arguments.length-2;if(Wt===1)jt.children=yt;else if(1<Wt){for(var ge=Array(Wt),wt=0;wt<Wt;wt++)ge[wt]=arguments[wt+2];jt.children=ge}return z(K.type,qt,jt)},me.createContext=function(K){return K={$$typeof:c,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:l,_context:K},K},me.createElement=function(K,ft,yt){var jt,qt={},Wt=null;if(ft!=null)for(jt in ft.key!==void 0&&(Wt=""+ft.key),ft)M.call(ft,jt)&&jt!=="key"&&jt!=="__self"&&jt!=="__source"&&(qt[jt]=ft[jt]);var ge=arguments.length-2;if(ge===1)qt.children=yt;else if(1<ge){for(var wt=Array(ge),ie=0;ie<ge;ie++)wt[ie]=arguments[ie+2];qt.children=wt}if(K&&K.defaultProps)for(jt in ge=K.defaultProps,ge)qt[jt]===void 0&&(qt[jt]=ge[jt]);return z(K,Wt,qt)},me.createRef=function(){return{current:null}},me.forwardRef=function(K){return{$$typeof:f,render:K}},me.isValidElement=X,me.lazy=function(K){return{$$typeof:A,_payload:{_status:-1,_result:K},_init:St}},me.memo=function(K,ft){return{$$typeof:g,type:K,compare:ft===void 0?null:ft}},me.startTransition=function(K){var ft=P.T,yt={};P.T=yt;try{var jt=K(),qt=P.S;qt!==null&&qt(yt,jt),typeof jt=="object"&&jt!==null&&typeof jt.then=="function"&&jt.then(nt,Ut)}catch(Wt){Ut(Wt)}finally{ft!==null&&yt.types!==null&&(ft.types=yt.types),P.T=ft}},me.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},me.use=function(K){return P.H.use(K)},me.useActionState=function(K,ft,yt){return P.H.useActionState(K,ft,yt)},me.useCallback=function(K,ft){return P.H.useCallback(K,ft)},me.useContext=function(K){return P.H.useContext(K)},me.useDebugValue=function(){},me.useDeferredValue=function(K,ft){return P.H.useDeferredValue(K,ft)},me.useEffect=function(K,ft){return P.H.useEffect(K,ft)},me.useEffectEvent=function(K){return P.H.useEffectEvent(K)},me.useId=function(){return P.H.useId()},me.useImperativeHandle=function(K,ft,yt){return P.H.useImperativeHandle(K,ft,yt)},me.useInsertionEffect=function(K,ft){return P.H.useInsertionEffect(K,ft)},me.useLayoutEffect=function(K,ft){return P.H.useLayoutEffect(K,ft)},me.useMemo=function(K,ft){return P.H.useMemo(K,ft)},me.useOptimistic=function(K,ft){return P.H.useOptimistic(K,ft)},me.useReducer=function(K,ft,yt){return P.H.useReducer(K,ft,yt)},me.useRef=function(K){return P.H.useRef(K)},me.useState=function(K){return P.H.useState(K)},me.useSyncExternalStore=function(K,ft,yt){return P.H.useSyncExternalStore(K,ft,yt)},me.useTransition=function(){return P.H.useTransition()},me.version="19.2.4",me}var L4;function x1(){return L4||(L4=1,Jv.exports=VR()),Jv.exports}var H=x1();const Gi=Wb(H);var Zv={exports:{}},lg={},$v={exports:{}},t2={};var V4;function kR(){return V4||(V4=1,(function(n){function t(et,vt){var St=et.length;et.push(vt);t:for(;0<St;){var Ut=St-1>>>1,Qt=et[Ut];if(0<s(Qt,vt))et[Ut]=vt,et[St]=Qt,St=Ut;else break t}}function e(et){return et.length===0?null:et[0]}function i(et){if(et.length===0)return null;var vt=et[0],St=et.pop();if(St!==vt){et[0]=St;t:for(var Ut=0,Qt=et.length,K=Qt>>>1;Ut<K;){var ft=2*(Ut+1)-1,yt=et[ft],jt=ft+1,qt=et[jt];if(0>s(yt,St))jt<Qt&&0>s(qt,yt)?(et[Ut]=qt,et[jt]=St,Ut=jt):(et[Ut]=yt,et[ft]=St,Ut=ft);else if(jt<Qt&&0>s(qt,St))et[Ut]=qt,et[jt]=St,Ut=jt;else break t}}return vt}function s(et,vt){var St=et.sortIndex-vt.sortIndex;return St!==0?St:et.id-vt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],g=[],A=1,E=null,T=3,x=!1,w=!1,I=!1,L=!1,B=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function $(et){for(var vt=e(g);vt!==null;){if(vt.callback===null)i(g);else if(vt.startTime<=et)i(g),vt.sortIndex=vt.expirationTime,t(m,vt);else break;vt=e(g)}}function Z(et){if(I=!1,$(et),!w)if(e(m)!==null)w=!0,nt||(nt=!0,Q());else{var vt=e(g);vt!==null&&Pt(Z,vt.startTime-et)}}var nt=!1,P=-1,M=5,z=-1;function F(){return L?!0:!(n.unstable_now()-z<M)}function X(){if(L=!1,nt){var et=n.unstable_now();z=et;var vt=!0;try{t:{w=!1,I&&(I=!1,j(P),P=-1),x=!0;var St=T;try{e:{for($(et),E=e(m);E!==null&&!(E.expirationTime>et&&F());){var Ut=E.callback;if(typeof Ut=="function"){E.callback=null,T=E.priorityLevel;var Qt=Ut(E.expirationTime<=et);if(et=n.unstable_now(),typeof Qt=="function"){E.callback=Qt,$(et),vt=!0;break e}E===e(m)&&i(m),$(et)}else i(m);E=e(m)}if(E!==null)vt=!0;else{var K=e(g);K!==null&&Pt(Z,K.startTime-et),vt=!1}}break t}finally{E=null,T=St,x=!1}vt=void 0}}finally{vt?Q():nt=!1}}}var Q;if(typeof q=="function")Q=function(){q(X)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Yt=G.port2;G.port1.onmessage=X,Q=function(){Yt.postMessage(null)}}else Q=function(){B(X,0)};function Pt(et,vt){P=B(function(){et(n.unstable_now())},vt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(et){et.callback=null},n.unstable_forceFrameRate=function(et){0>et||125<et?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<et?Math.floor(1e3/et):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(et){switch(T){case 1:case 2:case 3:var vt=3;break;default:vt=T}var St=T;T=vt;try{return et()}finally{T=St}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(et,vt){switch(et){case 1:case 2:case 3:case 4:case 5:break;default:et=3}var St=T;T=et;try{return vt()}finally{T=St}},n.unstable_scheduleCallback=function(et,vt,St){var Ut=n.unstable_now();switch(typeof St=="object"&&St!==null?(St=St.delay,St=typeof St=="number"&&0<St?Ut+St:Ut):St=Ut,et){case 1:var Qt=-1;break;case 2:Qt=250;break;case 5:Qt=1073741823;break;case 4:Qt=1e4;break;default:Qt=5e3}return Qt=St+Qt,et={id:A++,callback:vt,priorityLevel:et,startTime:St,expirationTime:Qt,sortIndex:-1},St>Ut?(et.sortIndex=St,t(g,et),e(m)===null&&et===e(g)&&(I?(j(P),P=-1):I=!0,Pt(Z,St-Ut))):(et.sortIndex=Qt,t(m,et),w||x||(w=!0,nt||(nt=!0,Q()))),et},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(et){var vt=T;return function(){var St=T;T=vt;try{return et.apply(this,arguments)}finally{T=St}}}})(t2)),t2}var k4;function XA(){return k4||(k4=1,$v.exports=kR()),$v.exports}var e2={exports:{}},Fs={};var P4;function PR(){if(P4)return Fs;P4=1;var n=x1();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)g+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(m,g,A){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:m,containerInfo:g,implementation:A}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Fs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Fs.createPortal=function(m,g){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(m,g,null,A)},Fs.flushSync=function(m){var g=c.T,A=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=g,i.p=A,i.d.f()}},Fs.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},Fs.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Fs.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var A=g.as,E=f(A,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,x=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;A==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:x}):A==="script"&&i.d.X(m,{crossOrigin:E,integrity:T,fetchPriority:x,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Fs.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var A=f(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},Fs.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var A=g.as,E=f(A,g.crossOrigin);i.d.L(m,A,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Fs.preloadModule=function(m,g){if(typeof m=="string")if(g){var A=f(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},Fs.requestFormReset=function(m){i.d.r(m)},Fs.unstable_batchedUpdates=function(m,g){return m(g)},Fs.useFormState=function(m,g,A){return c.H.useFormState(m,g,A)},Fs.useFormStatus=function(){return c.H.useHostTransitionStatus()},Fs.version="19.2.4",Fs}var U4;function UR(){if(U4)return e2.exports;U4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),e2.exports=PR(),e2.exports}var z4;function zR(){if(z4)return lg;z4=1;var n=XA(),t=x1(),e=UR();function i(a){var r="https://react.dev/errors/"+a;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)r+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function l(a){var r=a,h=a;if(a.alternate)for(;r.return;)r=r.return;else{a=r;do r=a,(r.flags&4098)!==0&&(h=r.return),a=r.return;while(a)}return r.tag===3?h:null}function c(a){if(a.tag===13){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function f(a){if(a.tag===31){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function m(a){if(l(a)!==a)throw Error(i(188))}function g(a){var r=a.alternate;if(!r){if(r=l(a),r===null)throw Error(i(188));return r!==a?null:a}for(var h=a,d=r;;){var v=h.return;if(v===null)break;var S=v.alternate;if(S===null){if(d=v.return,d!==null){h=d;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===h)return m(v),a;if(S===d)return m(v),r;S=S.sibling}throw Error(i(188))}if(h.return!==d.return)h=v,d=S;else{for(var N=!1,V=v.child;V;){if(V===h){N=!0,h=v,d=S;break}if(V===d){N=!0,d=v,h=S;break}V=V.sibling}if(!N){for(V=S.child;V;){if(V===h){N=!0,h=S,d=v;break}if(V===d){N=!0,d=S,h=v;break}V=V.sibling}if(!N)throw Error(i(189))}}if(h.alternate!==d)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?a:r}function A(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a;for(a=a.child;a!==null;){if(r=A(a),r!==null)return r;a=a.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),q=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),nt=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function Q(a){return a===null||typeof a!="object"?null:(a=X&&a[X]||a["@@iterator"],typeof a=="function"?a:null)}var G=Symbol.for("react.client.reference");function Yt(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===G?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case I:return"Fragment";case B:return"Profiler";case L:return"StrictMode";case Z:return"Suspense";case nt:return"SuspenseList";case z:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case q:return a.displayName||"Context";case j:return(a._context.displayName||"Context")+".Consumer";case $:var r=a.render;return a=a.displayName,a||(a=r.displayName||r.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case P:return r=a.displayName||null,r!==null?r:Yt(a.type)||"Memo";case M:r=a._payload,a=a._init;try{return Yt(a(r))}catch{}}return null}var Pt=Array.isArray,et=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,St={pending:!1,data:null,method:null,action:null},Ut=[],Qt=-1;function K(a){return{current:a}}function ft(a){0>Qt||(a.current=Ut[Qt],Ut[Qt]=null,Qt--)}function yt(a,r){Qt++,Ut[Qt]=a.current,a.current=r}var jt=K(null),qt=K(null),Wt=K(null),ge=K(null);function wt(a,r){switch(yt(Wt,r),yt(qt,a),yt(jt,null),r.nodeType){case 9:case 11:a=(a=r.documentElement)&&(a=a.namespaceURI)?t4(a):0;break;default:if(a=r.tagName,r=r.namespaceURI)r=t4(r),a=e4(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ft(jt),yt(jt,a)}function ie(){ft(jt),ft(qt),ft(Wt)}function as(a){a.memoizedState!==null&&yt(ge,a);var r=jt.current,h=e4(r,a.type);r!==h&&(yt(qt,a),yt(jt,h))}function xs(a){qt.current===a&&(ft(jt),ft(qt)),ge.current===a&&(ft(ge),ng._currentValue=St)}var Ns,Vi;function rs(a){if(Ns===void 0)try{throw Error()}catch(h){var r=h.stack.trim().match(/\n( *(at )?)/);Ns=r&&r[1]||"",Vi=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ns+a+Vi}var Zs=!1;function ls(a,r){if(!a||Zs)return"";Zs=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var Tt=function(){throw Error()};if(Object.defineProperty(Tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Tt,[])}catch(gt){var ct=gt}Reflect.construct(a,[],Tt)}else{try{Tt.call()}catch(gt){ct=gt}a.call(Tt.prototype)}}else{try{throw Error()}catch(gt){ct=gt}(Tt=a())&&typeof Tt.catch=="function"&&Tt.catch(function(){})}}catch(gt){if(gt&&ct&&typeof gt.stack=="string")return[gt.stack,ct.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=d.DetermineComponentFrameRoot(),N=S[0],V=S[1];if(N&&V){var W=N.split(`
`),ot=V.split(`
`);for(v=d=0;d<W.length&&!W[d].includes("DetermineComponentFrameRoot");)d++;for(;v<ot.length&&!ot[v].includes("DetermineComponentFrameRoot");)v++;if(d===W.length||v===ot.length)for(d=W.length-1,v=ot.length-1;1<=d&&0<=v&&W[d]!==ot[v];)v--;for(;1<=d&&0<=v;d--,v--)if(W[d]!==ot[v]){if(d!==1||v!==1)do if(d--,v--,0>v||W[d]!==ot[v]){var _t=`
`+W[d].replace(" at new "," at ");return a.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",a.displayName)),_t}while(1<=d&&0<=v);break}}}finally{Zs=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?rs(h):""}function $s(a,r){switch(a.tag){case 26:case 27:case 5:return rs(a.type);case 16:return rs("Lazy");case 13:return a.child!==r&&r!==null?rs("Suspense Fallback"):rs("Suspense");case 19:return rs("SuspenseList");case 0:case 15:return ls(a.type,!1);case 11:return ls(a.type.render,!1);case 1:return ls(a.type,!0);case 31:return rs("Activity");default:return""}}function Ql(a){try{var r="",h=null;do r+=$s(a,h),h=a,a=a.return;while(a);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var gr=Object.prototype.hasOwnProperty,Ds=n.unstable_scheduleCallback,Ya=n.unstable_cancelCallback,Qa=n.unstable_shouldYield,Dn=n.unstable_requestPaint,Hn=n.unstable_now,Bo=n.unstable_getCurrentPriorityLevel,In=n.unstable_ImmediatePriority,Sn=n.unstable_UserBlockingPriority,Is=n.unstable_NormalPriority,os=n.unstable_LowPriority,Os=n.unstable_IdlePriority,Xl=n.log,_r=n.unstable_setDisableYieldValue,Xa=null,ht=null;function Rt(a){if(typeof Xl=="function"&&_r(a),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(Xa,a)}catch{}}var Ht=Math.clz32?Math.clz32:Ms,he=Math.log,Ge=Math.LN2;function Ms(a){return a>>>=0,a===0?32:31-(he(a)/Ge|0)|0}var ta=256,ui=262144,Ls=4194304;function us(a){var r=a&42;if(r!==0)return r;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function cs(a,r,h){var d=a.pendingLanes;if(d===0)return 0;var v=0,S=a.suspendedLanes,N=a.pingedLanes;a=a.warmLanes;var V=d&134217727;return V!==0?(d=V&~S,d!==0?v=us(d):(N&=V,N!==0?v=us(N):h||(h=V&~a,h!==0&&(v=us(h))))):(V=d&~S,V!==0?v=us(V):N!==0?v=us(N):h||(h=d&~a,h!==0&&(v=us(h)))),v===0?0:r!==0&&r!==v&&(r&S)===0&&(S=v&-v,h=r&-r,S>=h||S===32&&(h&4194048)!==0)?r:v}function il(a,r){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&r)===0}function jo(a,r){switch(a){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ka(){var a=Ls;return Ls<<=1,(Ls&62914560)===0&&(Ls=4194304),a}function yr(a){for(var r=[],h=0;31>h;h++)r.push(a);return r}function sl(a,r){a.pendingLanes|=r,r!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ii(a,r,h,d,v,S){var N=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var V=a.entanglements,W=a.expirationTimes,ot=a.hiddenUpdates;for(h=N&~h;0<h;){var _t=31-Ht(h),Tt=1<<_t;V[_t]=0,W[_t]=-1;var ct=ot[_t];if(ct!==null)for(ot[_t]=null,_t=0;_t<ct.length;_t++){var gt=ct[_t];gt!==null&&(gt.lane&=-536870913)}h&=~Tt}d!==0&&al(a,d,0),S!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=S&~(N&~r))}function al(a,r,h){a.pendingLanes|=r,a.suspendedLanes&=~r;var d=31-Ht(r);a.entangledLanes|=r,a.entanglements[d]=a.entanglements[d]|1073741824|h&261930}function Wa(a,r){var h=a.entangledLanes|=r;for(a=a.entanglements;h;){var d=31-Ht(h),v=1<<d;v&r|a[d]&r&&(a[d]|=r),h&=~v}}function rl(a,r){var h=r&-r;return h=(h&42)!==0?1:Kl(h),(h&(a.suspendedLanes|r))!==0?0:h}function Kl(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Wl(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Ja(){var a=vt.p;return a!==0?a:(a=window.event,a===void 0?32:b4(a.type))}function vr(a,r){var h=vt.p;try{return vt.p=a,r()}finally{vt.p=h}}var Za=Math.random().toString(36).slice(2),gn="__reactFiber$"+Za,ci="__reactProps$"+Za,ga="__reactContainer$"+Za,hs="__reactEvents$"+Za,ki="__reactListeners$"+Za,Jl="__reactHandles$"+Za,Ho="__reactResources$"+Za,ea="__reactMarker$"+Za;function $a(a){delete a[gn],delete a[ci],delete a[hs],delete a[ki],delete a[Jl]}function Ar(a){var r=a[gn];if(r)return r;for(var h=a.parentNode;h;){if(r=h[ga]||h[gn]){if(h=r.alternate,r.child!==null||h!==null&&h.child!==null)for(a=o4(a);a!==null;){if(h=a[gn])return h;a=o4(a)}return r}a=h,h=a.parentNode}return null}function Er(a){if(a=a[gn]||a[ga]){var r=a.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return a}return null}function Zl(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a.stateNode;throw Error(i(33))}function na(a){var r=a[Ho];return r||(r=a[Ho]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function On(a){a[ea]=!0}var ia=new Set,Sr={};function Yi(a,r){Pi(a,r),Pi(a+"Capture",r)}function Pi(a,r){for(Sr[a]=r,a=0;a<r.length;a++)ia.add(r[a])}var fs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$l={},ln={};function Yu(a){return gr.call(ln,a)?!0:gr.call($l,a)?!1:fs.test(a)?ln[a]=!0:($l[a]=!0,!1)}function Tr(a,r,h){if(Yu(r))if(h===null)a.removeAttribute(r);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(r);return}}a.setAttribute(r,""+h)}}function ll(a,r,h){if(h===null)a.removeAttribute(r);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(r);return}a.setAttribute(r,""+h)}}function sa(a,r,h,d){if(d===null)a.removeAttribute(h);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(r,h,""+d)}}function ds(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Qu(a){var r=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Rh(a,r,h){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,r);if(!a.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,S=d.set;return Object.defineProperty(a,r,{configurable:!0,get:function(){return v.call(this)},set:function(N){h=""+N,S.call(this,N)}}),Object.defineProperty(a,r,{enumerable:d.enumerable}),{getValue:function(){return h},setValue:function(N){h=""+N},stopTracking:function(){a._valueTracker=null,delete a[r]}}}}function to(a){if(!a._valueTracker){var r=Qu(a)?"checked":"value";a._valueTracker=Rh(a,r,""+a[r])}}function hi(a){if(!a)return!1;var r=a._valueTracker;if(!r)return!0;var h=r.getValue(),d="";return a&&(d=Qu(a)?a.checked?"true":"false":a.value),a=d,a!==h?(r.setValue(a),!0):!1}function on(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var _a=/[\n"\\]/g;function un(a){return a.replace(_a,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function tr(a,r,h,d,v,S,N,V){a.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.type=N:a.removeAttribute("type"),r!=null?N==="number"?(r===0&&a.value===""||a.value!=r)&&(a.value=""+ds(r)):a.value!==""+ds(r)&&(a.value=""+ds(r)):N!=="submit"&&N!=="reset"||a.removeAttribute("value"),r!=null?Vs(a,N,ds(r)):h!=null?Vs(a,N,ds(h)):d!=null&&a.removeAttribute("value"),v==null&&S!=null&&(a.defaultChecked=!!S),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?a.name=""+ds(V):a.removeAttribute("name")}function ol(a,r,h,d,v,S,N,V){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(a.type=S),r!=null||h!=null){if(!(S!=="submit"&&S!=="reset"||r!=null)){to(a);return}h=h!=null?""+ds(h):"",r=r!=null?""+ds(r):h,V||r===a.value||(a.value=r),a.defaultValue=r}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=V?a.checked:!!d,a.defaultChecked=!!d,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(a.name=N),to(a)}function Vs(a,r,h){r==="number"&&on(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function Le(a,r,h,d){if(a=a.options,r){r={};for(var v=0;v<h.length;v++)r["$"+h[v]]=!0;for(h=0;h<a.length;h++)v=r.hasOwnProperty("$"+a[h].value),a[h].selected!==v&&(a[h].selected=v),v&&d&&(a[h].defaultSelected=!0)}else{for(h=""+ds(h),r=null,v=0;v<a.length;v++){if(a[v].value===h){a[v].selected=!0,d&&(a[v].defaultSelected=!0);return}r!==null||a[v].disabled||(r=a[v])}r!==null&&(r.selected=!0)}}function ul(a,r,h){if(r!=null&&(r=""+ds(r),r!==a.value&&(a.value=r),h==null)){a.defaultValue!==r&&(a.defaultValue=r);return}a.defaultValue=h!=null?""+ds(h):""}function br(a,r,h,d){if(r==null){if(d!=null){if(h!=null)throw Error(i(92));if(Pt(d)){if(1<d.length)throw Error(i(93));d=d[0]}h=d}h==null&&(h=""),r=h}h=ds(r),a.defaultValue=h,d=a.textContent,d===h&&d!==""&&d!==null&&(a.value=d),to(a)}function aa(a,r){if(r){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=r;return}}a.textContent=r}var $f=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xu(a,r,h){var d=r.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?d?a.setProperty(r,""):r==="float"?a.cssFloat="":a[r]="":d?a.setProperty(r,h):typeof h!="number"||h===0||$f.has(r)?r==="float"?a.cssFloat=h:a[r]=(""+h).trim():a[r]=h+"px"}function wh(a,r,h){if(r!=null&&typeof r!="object")throw Error(i(62));if(a=a.style,h!=null){for(var d in h)!h.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var v in r)d=r[v],r.hasOwnProperty(v)&&h[v]!==d&&Xu(a,v,d)}else for(var S in r)r.hasOwnProperty(S)&&Xu(a,S,r[S])}function Ku(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var td=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function er(a){return xh.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Ai(){}var Go=null;function qo(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Cr=null,ms=null;function Nh(a){var r=Er(a);if(r&&(a=r.stateNode)){var h=a[ci]||null;t:switch(a=r.stateNode,r.type){case"input":if(tr(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),r=h.name,h.type==="radio"&&r!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+un(""+r)+'"][type="radio"]'),r=0;r<h.length;r++){var d=h[r];if(d!==a&&d.form===a.form){var v=d[ci]||null;if(!v)throw Error(i(90));tr(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<h.length;r++)d=h[r],d.form===a.form&&hi(d)}break t;case"textarea":ul(a,h.value,h.defaultValue);break t;case"select":r=h.value,r!=null&&Le(a,!!h.multiple,r,!1)}}}var Wu=!1;function Dh(a,r,h){if(Wu)return a(r,h);Wu=!0;try{var d=a(r);return d}finally{if(Wu=!1,(Cr!==null||ms!==null)&&(ur(),Cr&&(r=Cr,a=ms,ms=Cr=null,Nh(r),a)))for(r=0;r<a.length;r++)Nh(a[r])}}function ps(a,r){var h=a.stateNode;if(h===null)return null;var d=h[ci]||null;if(d===null)return null;h=d[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break t;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(i(231,r,typeof h));return h}var ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ih=!1;if(ya)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){Ih=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{Ih=!1}var Ei=null,Fo=null,ra=null;function ir(){if(ra)return ra;var a,r=Fo,h=r.length,d,v="value"in Ei?Ei.value:Ei.textContent,S=v.length;for(a=0;a<h&&r[a]===v[a];a++);var N=h-a;for(d=1;d<=N&&r[h-d]===v[S-d];d++);return ra=v.slice(a,1<d?1-d:void 0)}function eo(a){var r=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&r===13&&(a=13)):a=r,a===10&&(a=13),32<=a||a===13?a:0}function Rr(){return!0}function _n(){return!1}function Ui(a){function r(h,d,v,S,N){this._reactName=h,this._targetInst=v,this.type=d,this.nativeEvent=S,this.target=N,this.currentTarget=null;for(var V in a)a.hasOwnProperty(V)&&(h=a[V],this[V]=h?h(S):S[V]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Rr:_n,this.isPropagationStopped=_n,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),r}var wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=Ui(wr),cl=E({},wr,{view:0,detail:0}),Oh=Ui(cl),xr,Yo,Qi,hl=E({},cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dl,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Qi&&(Qi&&a.type==="mousemove"?(xr=a.screenX-Qi.screenX,Yo=a.screenY-Qi.screenY):Yo=xr=0,Qi=a),xr)},movementY:function(a){return"movementY"in a?a.movementY:Yo}}),Mh=Ui(hl),io=E({},hl,{dataTransfer:0}),Lh=Ui(io),Qo=E({},cl,{relatedTarget:0}),fl=Ui(Qo),Vh=E({},wr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ju=Ui(Vh),Km=E({},wr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),kh=Ui(Km),sr=E({},wr,{data:0}),Xo=Ui(sr),Ko={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tc(a){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(a):(a=$u[a])?!!r[a]:!1}function dl(){return tc}var Ph=E({},cl,{key:function(a){if(a.key){var r=Ko[a.key]||a.key;if(r!=="Unidentified")return r}return a.type==="keypress"?(a=eo(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Zu[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dl,charCode:function(a){return a.type==="keypress"?eo(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?eo(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Nr=Ui(Ph),va=E({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ec=Ui(va),nc=E({},cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dl}),Uh=Ui(nc),zh=E({},wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ic=Ui(zh),Qe=E({},hl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Bh=Ui(Qe),jh=E({},wr,{newState:0,oldState:0}),ml=Ui(jh),_=[9,13,27,32],R=ya&&"CompositionEvent"in window,D=null;ya&&"documentMode"in document&&(D=document.documentMode);var U=ya&&"TextEvent"in window&&!D,rt=ya&&(!R||D&&8<D&&11>=D),pt=" ",Ot=!1;function qe(a,r){switch(a){case"keyup":return _.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xn(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ye=!1;function fi(a,r){switch(a){case"compositionend":return Xn(r);case"keypress":return r.which!==32?null:(Ot=!0,pt);case"textInput":return a=r.data,a===pt&&Ot?null:a;default:return null}}function si(a,r){if(ye)return a==="compositionend"||!R&&qe(a,r)?(a=ir(),ra=Fo=Ei=null,ye=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return rt&&r.locale!=="ko"?null:r.data;default:return null}}var Dr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gs(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r==="input"?!!Dr[a.type]:r==="textarea"}function pl(a,r,h,d){Cr?ms?ms.push(d):ms=[d]:Cr=d,r=Y_(r,"onChange"),0<r.length&&(h=new no("onChange","change",null,h,d),a.push({event:h,listeners:r}))}var Aa=null,Wo=null;function H0(a){XS(a,0)}function sc(a){var r=Zl(a);if(hi(r))return a}function Wm(a,r){if(a==="change")return r}var Ir=!1;if(ya){var Hh;if(ya){var Jm="oninput"in document;if(!Jm){var Zm=document.createElement("div");Zm.setAttribute("oninput","return;"),Jm=typeof Zm.oninput=="function"}Hh=Jm}else Hh=!1;Ir=Hh&&(!document.documentMode||9<document.documentMode)}function Ea(){Aa&&(Aa.detachEvent("onpropertychange",Gh),Wo=Aa=null)}function Gh(a){if(a.propertyName==="value"&&sc(Wo)){var r=[];pl(r,Wo,a,qo(a)),Dh(H0,r)}}function G0(a,r,h){a==="focusin"?(Ea(),Aa=r,Wo=h,Aa.attachEvent("onpropertychange",Gh)):a==="focusout"&&Ea()}function $m(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return sc(Wo)}function q0(a,r){if(a==="click")return sc(r)}function F0(a,r){if(a==="input"||a==="change")return sc(r)}function tp(a,r){return a===r&&(a!==0||1/a===1/r)||a!==a&&r!==r}var _s=typeof Object.is=="function"?Object.is:tp;function ac(a,r){if(_s(a,r))return!0;if(typeof a!="object"||a===null||typeof r!="object"||r===null)return!1;var h=Object.keys(a),d=Object.keys(r);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var v=h[d];if(!gr.call(r,v)||!_s(a[v],r[v]))return!1}return!0}function qh(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function rc(a,r){var h=qh(a);a=0;for(var d;h;){if(h.nodeType===3){if(d=a+h.textContent.length,a<=r&&d>=r)return{node:h,offset:r-a};a=d}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=qh(h)}}function cn(a,r){return a&&r?a===r?!0:a&&a.nodeType===3?!1:r&&r.nodeType===3?cn(a,r.parentNode):"contains"in a?a.contains(r):a.compareDocumentPosition?!!(a.compareDocumentPosition(r)&16):!1:!1}function Y0(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var r=on(a.document);r instanceof a.HTMLIFrameElement;){try{var h=typeof r.contentWindow.location.href=="string"}catch{h=!1}if(h)a=r.contentWindow;else break;r=on(a.document)}return r}function ep(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r&&(r==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||r==="textarea"||a.contentEditable==="true")}var Q0=ya&&"documentMode"in document&&11>=document.documentMode,Or=null,Mr=null,lc=null,ed=!1;function oc(a,r,h){var d=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;ed||Or==null||Or!==on(d)||(d=Or,"selectionStart"in d&&ep(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),lc&&ac(lc,d)||(lc=d,d=Y_(Mr,"onSelect"),0<d.length&&(r=new no("onSelect","select",null,r,h),a.push({event:r,listeners:d}),r.target=Or)))}function Xi(a,r){var h={};return h[a.toLowerCase()]=r.toLowerCase(),h["Webkit"+a]="webkit"+r,h["Moz"+a]="moz"+r,h}var Jo={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionrun:Xi("Transition","TransitionRun"),transitionstart:Xi("Transition","TransitionStart"),transitioncancel:Xi("Transition","TransitionCancel"),transitionend:Xi("Transition","TransitionEnd")},Fh={},np={};ya&&(np=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function gl(a){if(Fh[a])return Fh[a];if(!Jo[a])return a;var r=Jo[a],h;for(h in r)if(r.hasOwnProperty(h)&&h in np)return Fh[a]=r[h];return a}var nd=gl("animationend"),Yh=gl("animationiteration"),ip=gl("animationstart"),X0=gl("transitionrun"),vv=gl("transitionstart"),K0=gl("transitioncancel"),sp=gl("transitionend"),Sa=new Map,Qh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qh.push("scrollEnd");function Ta(a,r){Sa.set(a,r),Yi(r,[a])}var Xh=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},ba=[],_l=0,Si=0;function Kh(){for(var a=_l,r=Si=_l=0;r<a;){var h=ba[r];ba[r++]=null;var d=ba[r];ba[r++]=null;var v=ba[r];ba[r++]=null;var S=ba[r];if(ba[r++]=null,d!==null&&v!==null){var N=d.pending;N===null?v.next=v:(v.next=N.next,N.next=v),d.pending=v}S!==0&&so(h,v,S)}}function Ti(a,r,h,d){ba[_l++]=a,ba[_l++]=r,ba[_l++]=h,ba[_l++]=d,Si|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function id(a,r,h,d){return Ti(a,r,h,d),Ca(a)}function ys(a,r){return Ti(a,null,null,r),Ca(a)}function so(a,r,h){a.lanes|=h;var d=a.alternate;d!==null&&(d.lanes|=h);for(var v=!1,S=a.return;S!==null;)S.childLanes|=h,d=S.alternate,d!==null&&(d.childLanes|=h),S.tag===22&&(a=S.stateNode,a===null||a._visibility&1||(v=!0)),a=S,S=S.return;return a.tag===3?(S=a.stateNode,v&&r!==null&&(v=31-Ht(h),a=S.hiddenUpdates,d=a[v],d===null?a[v]=[r]:d.push(r),r.lane=h|536870912),S):null}function Ca(a){if(50<bo)throw bo=0,gu=null,Error(i(185));for(var r=a.return;r!==null;)a=r,r=a.return;return a.tag===3?a.stateNode:null}var ao={};function ap(a,r,h,d){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(a,r,h,d){return new ap(a,r,h,d)}function sd(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ks(a,r){var h=a.alternate;return h===null?(h=Mn(a.tag,r,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=r,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,r=a.dependencies,h.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function uc(a,r){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,r=h.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a}function Lr(a,r,h,d,v,S){var N=0;if(d=a,typeof a=="function")sd(a)&&(N=1);else if(typeof a=="string")N=ER(a,h,jt.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case z:return a=Mn(31,h,r,v),a.elementType=z,a.lanes=S,a;case I:return ro(h.children,v,S,r);case L:N=8,v|=24;break;case B:return a=Mn(12,h,r,v|2),a.elementType=B,a.lanes=S,a;case Z:return a=Mn(13,h,r,v),a.elementType=Z,a.lanes=S,a;case nt:return a=Mn(19,h,r,v),a.elementType=nt,a.lanes=S,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case q:N=10;break t;case j:N=9;break t;case $:N=11;break t;case P:N=14;break t;case M:N=16,d=null;break t}N=29,h=Error(i(130,a===null?"null":typeof a,"")),d=null}return r=Mn(N,h,r,v),r.elementType=a,r.type=d,r.lanes=S,r}function ro(a,r,h,d){return a=Mn(7,a,d,r),a.lanes=h,a}function ad(a,r,h){return a=Mn(6,a,null,r),a.lanes=h,a}function cc(a){var r=Mn(18,null,null,0);return r.stateNode=a,r}function rd(a,r,h){return r=Mn(4,a.children!==null?a.children:[],a.key,r),r.lanes=h,r.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},r}var Wh=new WeakMap;function la(a,r){if(typeof a=="object"&&a!==null){var h=Wh.get(a);return h!==void 0?h:(r={value:a,source:r,stack:Ql(r)},Wh.set(a,r),r)}return{value:a,source:r,stack:Ql(r)}}var lo=[],oo=0,hc=null,fc=0,Ps=[],Tn=0,yl=null,Ln=1,ar="";function Vr(a,r){lo[oo++]=fc,lo[oo++]=hc,hc=a,fc=r}function W0(a,r,h){Ps[Tn++]=Ln,Ps[Tn++]=ar,Ps[Tn++]=yl,yl=a;var d=Ln;a=ar;var v=32-Ht(d)-1;d&=~(1<<v),h+=1;var S=32-Ht(r)+v;if(30<S){var N=v-v%5;S=(d&(1<<N)-1).toString(32),d>>=N,v-=N,Ln=1<<32-Ht(r)+v|h<<v|d,ar=S+a}else Ln=1<<S|h<<v|d,ar=a}function kr(a){a.return!==null&&(Vr(a,1),W0(a,1,0))}function ld(a){for(;a===hc;)hc=lo[--oo],lo[oo]=null,fc=lo[--oo],lo[oo]=null;for(;a===yl;)yl=Ps[--Tn],Ps[Tn]=null,ar=Ps[--Tn],Ps[Tn]=null,Ln=Ps[--Tn],Ps[Tn]=null}function od(a,r){Ps[Tn++]=Ln,Ps[Tn++]=ar,Ps[Tn++]=yl,Ln=r.id,ar=r.overflow,yl=a}var Gn=null,hn=null,De=!1,vl=null,oa=!1,dc=Error(i(519));function Pr(a){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ur(la(r,a)),dc}function J0(a){var r=a.stateNode,h=a.type,d=a.memoizedProps;switch(r[gn]=a,r[ci]=d,h){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(h=0;h<Ua.length;h++)ke(Ua[h],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":ke("invalid",r),ol(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":ke("invalid",r);break;case"textarea":ke("invalid",r),br(r,d.value,d.defaultValue,d.children)}h=d.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||r.textContent===""+h||d.suppressHydrationWarning===!0||ZS(r.textContent,h)?(d.popover!=null&&(ke("beforetoggle",r),ke("toggle",r)),d.onScroll!=null&&ke("scroll",r),d.onScrollEnd!=null&&ke("scrollend",r),d.onClick!=null&&(r.onclick=Ai),r=!0):r=!1,r||Pr(a,!0)}function Z0(a){for(Gn=a.return;Gn;)switch(Gn.tag){case 5:case 31:case 13:oa=!1;return;case 27:case 3:oa=!0;return;default:Gn=Gn.return}}function mc(a){if(a!==Gn)return!1;if(!De)return Z0(a),De=!0,!1;var r=a.tag,h;if((h=r!==3&&r!==27)&&((h=r===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||Vv(a.type,a.memoizedProps)),h=!h),h&&hn&&Pr(a),Z0(a),r===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));hn=l4(a)}else if(r===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));hn=l4(a)}else r===27?(r=hn,Lc(a.type)?(a=Bv,Bv=null,hn=a):hn=r):hn=Gn?Zr(a.stateNode.nextSibling):null;return!0}function uo(){hn=Gn=null,De=!1}function ud(){var a=vl;return a!==null&&(Fn===null?Fn=a:Fn.push.apply(Fn,a),vl=null),a}function Ur(a){vl===null?vl=[a]:vl.push(a)}var pc=K(null),co=null,zr=null;function Al(a,r,h){yt(pc,r._currentValue),r._currentValue=h}function Br(a){a._currentValue=pc.current,ft(pc)}function cd(a,r,h){for(;a!==null;){var d=a.alternate;if((a.childLanes&r)!==r?(a.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),a===h)break;a=a.return}}function hd(a,r,h,d){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var S=v.dependencies;if(S!==null){var N=v.child;S=S.firstContext;t:for(;S!==null;){var V=S;S=v;for(var W=0;W<r.length;W++)if(V.context===r[W]){S.lanes|=h,V=S.alternate,V!==null&&(V.lanes|=h),cd(S.return,h,a),d||(N=null);break t}S=V.next}}else if(v.tag===18){if(N=v.return,N===null)throw Error(i(341));N.lanes|=h,S=N.alternate,S!==null&&(S.lanes|=h),cd(N,h,a),N=null}else N=v.child;if(N!==null)N.return=v;else for(N=v;N!==null;){if(N===a){N=null;break}if(v=N.sibling,v!==null){v.return=N.return,N=v;break}N=N.return}v=N}}function jr(a,r,h,d){a=null;for(var v=r,S=!1;v!==null;){if(!S){if((v.flags&524288)!==0)S=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var N=v.alternate;if(N===null)throw Error(i(387));if(N=N.memoizedProps,N!==null){var V=v.type;_s(v.pendingProps.value,N.value)||(a!==null?a.push(V):a=[V])}}else if(v===ge.current){if(N=v.alternate,N===null)throw Error(i(387));N.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(ng):a=[ng])}v=v.return}a!==null&&hd(r,a,h,d),r.flags|=262144}function Jh(a){for(a=a.firstContext;a!==null;){if(!_s(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function ho(a){co=a,zr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function se(a){return $0(co,a)}function gc(a,r){return co===null&&ho(a),$0(a,r)}function $0(a,r){var h=r._currentValue;if(r={context:r,memoizedValue:h,next:null},zr===null){if(a===null)throw Error(i(308));zr=r,a.dependencies={lanes:0,firstContext:r},a.flags|=524288}else zr=zr.next=r;return h}var t_=typeof AbortController<"u"?AbortController:function(){var a=[],r=this.signal={aborted:!1,addEventListener:function(h,d){a.push(d)}};this.abort=function(){r.aborted=!0,a.forEach(function(h){return h()})}},Av=n.unstable_scheduleCallback,Ev=n.unstable_NormalPriority,ai={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rp(){return{controller:new t_,data:new Map,refCount:0}}function Zo(a){a.refCount--,a.refCount===0&&Av(Ev,function(){a.controller.abort()})}var ua=null,fd=0,El=0,Ra=null;function lp(a,r){if(ua===null){var h=ua=[];fd=0,El=dt(),Ra={status:"pending",value:void 0,then:function(d){h.push(d)}}}return fd++,r.then(op,op),r}function op(){if(--fd===0&&ua!==null){Ra!==null&&(Ra.status="fulfilled");var a=ua;ua=null,El=0,Ra=null;for(var r=0;r<a.length;r++)(0,a[r])()}}function up(a,r){var h=[],d={status:"pending",value:null,reason:null,then:function(v){h.push(v)}};return a.then(function(){d.status="fulfilled",d.value=r;for(var v=0;v<h.length;v++)(0,h[v])(r)},function(v){for(d.status="rejected",d.reason=v,v=0;v<h.length;v++)(0,h[v])(void 0)}),d}var e_=et.S;et.S=function(a,r){Wp=Hn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&lp(a,r),e_!==null&&e_(a,r)};var fo=K(null);function dd(){var a=fo.current;return a!==null?a:le.pooledCache}function Zh(a,r){r===null?yt(fo,fo.current):yt(fo,r.pool)}function cp(){var a=dd();return a===null?null:{parent:ai._currentValue,pool:a}}var $o=Error(i(460)),$h=Error(i(474)),ve=Error(i(542)),md={then:function(){}};function Us(a){return a=a.status,a==="fulfilled"||a==="rejected"}function pd(a,r,h){switch(h=a[h],h===void 0?a.push(r):h!==r&&(r.then(Ai,Ai),r=h),r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,nu(a),a;default:if(typeof r.status=="string")r.then(Ai,Ai);else{if(a=le,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=r,a.status="pending",a.then(function(d){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=d}},function(d){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,nu(a),a}throw Hr=r,$o}}function tu(a){try{var r=a._init;return r(a._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Hr=h,$o):h}}var Hr=null;function eu(){if(Hr===null)throw Error(i(459));var a=Hr;return Hr=null,a}function nu(a){if(a===$o||a===ve)throw Error(i(483))}var iu=null,su=0;function tf(a){var r=su;return su+=1,iu===null&&(iu=[]),pd(iu,a,r)}function wa(a,r){r=r.props.ref,a.ref=r!==void 0?r:null}function _c(a,r){throw r.$$typeof===T?Error(i(525)):(a=Object.prototype.toString.call(r),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":a)))}function gd(a){function r(it,tt){if(a){var lt=it.deletions;lt===null?(it.deletions=[tt],it.flags|=16):lt.push(tt)}}function h(it,tt){if(!a)return null;for(;tt!==null;)r(it,tt),tt=tt.sibling;return null}function d(it){for(var tt=new Map;it!==null;)it.key!==null?tt.set(it.key,it):tt.set(it.index,it),it=it.sibling;return tt}function v(it,tt){return it=ks(it,tt),it.index=0,it.sibling=null,it}function S(it,tt,lt){return it.index=lt,a?(lt=it.alternate,lt!==null?(lt=lt.index,lt<tt?(it.flags|=67108866,tt):lt):(it.flags|=67108866,tt)):(it.flags|=1048576,tt)}function N(it){return a&&it.alternate===null&&(it.flags|=67108866),it}function V(it,tt,lt,At){return tt===null||tt.tag!==6?(tt=ad(lt,it.mode,At),tt.return=it,tt):(tt=v(tt,lt),tt.return=it,tt)}function W(it,tt,lt,At){var $t=lt.type;return $t===I?_t(it,tt,lt.props.children,At,lt.key):tt!==null&&(tt.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===M&&tu($t)===tt.type)?(tt=v(tt,lt.props),wa(tt,lt),tt.return=it,tt):(tt=Lr(lt.type,lt.key,lt.props,null,it.mode,At),wa(tt,lt),tt.return=it,tt)}function ot(it,tt,lt,At){return tt===null||tt.tag!==4||tt.stateNode.containerInfo!==lt.containerInfo||tt.stateNode.implementation!==lt.implementation?(tt=rd(lt,it.mode,At),tt.return=it,tt):(tt=v(tt,lt.children||[]),tt.return=it,tt)}function _t(it,tt,lt,At,$t){return tt===null||tt.tag!==7?(tt=ro(lt,it.mode,At,$t),tt.return=it,tt):(tt=v(tt,lt),tt.return=it,tt)}function Tt(it,tt,lt){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return tt=ad(""+tt,it.mode,lt),tt.return=it,tt;if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case x:return lt=Lr(tt.type,tt.key,tt.props,null,it.mode,lt),wa(lt,tt),lt.return=it,lt;case w:return tt=rd(tt,it.mode,lt),tt.return=it,tt;case M:return tt=tu(tt),Tt(it,tt,lt)}if(Pt(tt)||Q(tt))return tt=ro(tt,it.mode,lt,null),tt.return=it,tt;if(typeof tt.then=="function")return Tt(it,tf(tt),lt);if(tt.$$typeof===q)return Tt(it,gc(it,tt),lt);_c(it,tt)}return null}function ct(it,tt,lt,At){var $t=tt!==null?tt.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return $t!==null?null:V(it,tt,""+lt,At);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case x:return lt.key===$t?W(it,tt,lt,At):null;case w:return lt.key===$t?ot(it,tt,lt,At):null;case M:return lt=tu(lt),ct(it,tt,lt,At)}if(Pt(lt)||Q(lt))return $t!==null?null:_t(it,tt,lt,At,null);if(typeof lt.then=="function")return ct(it,tt,tf(lt),At);if(lt.$$typeof===q)return ct(it,tt,gc(it,lt),At);_c(it,lt)}return null}function gt(it,tt,lt,At,$t){if(typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint")return it=it.get(lt)||null,V(tt,it,""+At,$t);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case x:return it=it.get(At.key===null?lt:At.key)||null,W(tt,it,At,$t);case w:return it=it.get(At.key===null?lt:At.key)||null,ot(tt,it,At,$t);case M:return At=tu(At),gt(it,tt,lt,At,$t)}if(Pt(At)||Q(At))return it=it.get(lt)||null,_t(tt,it,At,$t,null);if(typeof At.then=="function")return gt(it,tt,lt,tf(At),$t);if(At.$$typeof===q)return gt(it,tt,lt,gc(tt,At),$t);_c(tt,At)}return null}function Ft(it,tt,lt,At){for(var $t=null,Xe=null,Xt=tt,Se=tt=0,ze=null;Xt!==null&&Se<lt.length;Se++){Xt.index>Se?(ze=Xt,Xt=null):ze=Xt.sibling;var Ke=ct(it,Xt,lt[Se],At);if(Ke===null){Xt===null&&(Xt=ze);break}a&&Xt&&Ke.alternate===null&&r(it,Xt),tt=S(Ke,tt,Se),Xe===null?$t=Ke:Xe.sibling=Ke,Xe=Ke,Xt=ze}if(Se===lt.length)return h(it,Xt),De&&Vr(it,Se),$t;if(Xt===null){for(;Se<lt.length;Se++)Xt=Tt(it,lt[Se],At),Xt!==null&&(tt=S(Xt,tt,Se),Xe===null?$t=Xt:Xe.sibling=Xt,Xe=Xt);return De&&Vr(it,Se),$t}for(Xt=d(Xt);Se<lt.length;Se++)ze=gt(Xt,it,Se,lt[Se],At),ze!==null&&(a&&ze.alternate!==null&&Xt.delete(ze.key===null?Se:ze.key),tt=S(ze,tt,Se),Xe===null?$t=ze:Xe.sibling=ze,Xe=ze);return a&&Xt.forEach(function(zc){return r(it,zc)}),De&&Vr(it,Se),$t}function ne(it,tt,lt,At){if(lt==null)throw Error(i(151));for(var $t=null,Xe=null,Xt=tt,Se=tt=0,ze=null,Ke=lt.next();Xt!==null&&!Ke.done;Se++,Ke=lt.next()){Xt.index>Se?(ze=Xt,Xt=null):ze=Xt.sibling;var zc=ct(it,Xt,Ke.value,At);if(zc===null){Xt===null&&(Xt=ze);break}a&&Xt&&zc.alternate===null&&r(it,Xt),tt=S(zc,tt,Se),Xe===null?$t=zc:Xe.sibling=zc,Xe=zc,Xt=ze}if(Ke.done)return h(it,Xt),De&&Vr(it,Se),$t;if(Xt===null){for(;!Ke.done;Se++,Ke=lt.next())Ke=Tt(it,Ke.value,At),Ke!==null&&(tt=S(Ke,tt,Se),Xe===null?$t=Ke:Xe.sibling=Ke,Xe=Ke);return De&&Vr(it,Se),$t}for(Xt=d(Xt);!Ke.done;Se++,Ke=lt.next())Ke=gt(Xt,it,Se,Ke.value,At),Ke!==null&&(a&&Ke.alternate!==null&&Xt.delete(Ke.key===null?Se:Ke.key),tt=S(Ke,tt,Se),Xe===null?$t=Ke:Xe.sibling=Ke,Xe=Ke);return a&&Xt.forEach(function(OR){return r(it,OR)}),De&&Vr(it,Se),$t}function mn(it,tt,lt,At){if(typeof lt=="object"&&lt!==null&&lt.type===I&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case x:t:{for(var $t=lt.key;tt!==null;){if(tt.key===$t){if($t=lt.type,$t===I){if(tt.tag===7){h(it,tt.sibling),At=v(tt,lt.props.children),At.return=it,it=At;break t}}else if(tt.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===M&&tu($t)===tt.type){h(it,tt.sibling),At=v(tt,lt.props),wa(At,lt),At.return=it,it=At;break t}h(it,tt);break}else r(it,tt);tt=tt.sibling}lt.type===I?(At=ro(lt.props.children,it.mode,At,lt.key),At.return=it,it=At):(At=Lr(lt.type,lt.key,lt.props,null,it.mode,At),wa(At,lt),At.return=it,it=At)}return N(it);case w:t:{for($t=lt.key;tt!==null;){if(tt.key===$t)if(tt.tag===4&&tt.stateNode.containerInfo===lt.containerInfo&&tt.stateNode.implementation===lt.implementation){h(it,tt.sibling),At=v(tt,lt.children||[]),At.return=it,it=At;break t}else{h(it,tt);break}else r(it,tt);tt=tt.sibling}At=rd(lt,it.mode,At),At.return=it,it=At}return N(it);case M:return lt=tu(lt),mn(it,tt,lt,At)}if(Pt(lt))return Ft(it,tt,lt,At);if(Q(lt)){if($t=Q(lt),typeof $t!="function")throw Error(i(150));return lt=$t.call(lt),ne(it,tt,lt,At)}if(typeof lt.then=="function")return mn(it,tt,tf(lt),At);if(lt.$$typeof===q)return mn(it,tt,gc(it,lt),At);_c(it,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,tt!==null&&tt.tag===6?(h(it,tt.sibling),At=v(tt,lt),At.return=it,it=At):(h(it,tt),At=ad(lt,it.mode,At),At.return=it,it=At),N(it)):h(it,tt)}return function(it,tt,lt,At){try{su=0;var $t=mn(it,tt,lt,At);return iu=null,$t}catch(Xt){if(Xt===$o||Xt===ve)throw Xt;var Xe=Mn(29,Xt,null,it.mode);return Xe.lanes=At,Xe.return=it,Xe}}}var Sl=gd(!0),_d=gd(!1),vs=!1;function ef(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hp(a,r){a=a.updateQueue,r.updateQueue===a&&(r.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Tl(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function mo(a,r,h){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Kt&2)!==0){var v=d.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),d.pending=r,r=Ca(a),so(a,null,h),r}return Ti(a,d,r,h),Ca(a)}function po(a,r,h){if(r=r.updateQueue,r!==null&&(r=r.shared,(h&4194048)!==0)){var d=r.lanes;d&=a.pendingLanes,h|=d,r.lanes=h,Wa(a,h)}}function Zt(a,r){var h=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var v=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var N={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};S===null?v=S=N:S=S.next=N,h=h.next}while(h!==null);S===null?v=S=r:S=S.next=r}else v=S=r;h={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:d.shared,callbacks:d.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=r:a.next=r,h.lastBaseUpdate=r}var fp=!1;function nf(){if(fp){var a=Ra;if(a!==null)throw a}}function yc(a,r,h,d){fp=!1;var v=a.updateQueue;vs=!1;var S=v.firstBaseUpdate,N=v.lastBaseUpdate,V=v.shared.pending;if(V!==null){v.shared.pending=null;var W=V,ot=W.next;W.next=null,N===null?S=ot:N.next=ot,N=W;var _t=a.alternate;_t!==null&&(_t=_t.updateQueue,V=_t.lastBaseUpdate,V!==N&&(V===null?_t.firstBaseUpdate=ot:V.next=ot,_t.lastBaseUpdate=W))}if(S!==null){var Tt=v.baseState;N=0,_t=ot=W=null,V=S;do{var ct=V.lane&-536870913,gt=ct!==V.lane;if(gt?(_e&ct)===ct:(d&ct)===ct){ct!==0&&ct===El&&(fp=!0),_t!==null&&(_t=_t.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});t:{var Ft=a,ne=V;ct=r;var mn=h;switch(ne.tag){case 1:if(Ft=ne.payload,typeof Ft=="function"){Tt=Ft.call(mn,Tt,ct);break t}Tt=Ft;break t;case 3:Ft.flags=Ft.flags&-65537|128;case 0:if(Ft=ne.payload,ct=typeof Ft=="function"?Ft.call(mn,Tt,ct):Ft,ct==null)break t;Tt=E({},Tt,ct);break t;case 2:vs=!0}}ct=V.callback,ct!==null&&(a.flags|=64,gt&&(a.flags|=8192),gt=v.callbacks,gt===null?v.callbacks=[ct]:gt.push(ct))}else gt={lane:ct,tag:V.tag,payload:V.payload,callback:V.callback,next:null},_t===null?(ot=_t=gt,W=Tt):_t=_t.next=gt,N|=ct;if(V=V.next,V===null){if(V=v.shared.pending,V===null)break;gt=V,V=gt.next,gt.next=null,v.lastBaseUpdate=gt,v.shared.pending=null}}while(!0);_t===null&&(W=Tt),v.baseState=W,v.firstBaseUpdate=ot,v.lastBaseUpdate=_t,S===null&&(v.shared.lanes=0),Kr|=N,a.lanes=N,a.memoizedState=Tt}}function vc(a,r){if(typeof a!="function")throw Error(i(191,a));a.call(r)}function n_(a,r){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)vc(h[a],r)}var Ac=K(null),yd=K(0);function i_(a,r){a=da,yt(yd,a),yt(Ac,r),da=a|r.baseLanes}function dp(){yt(yd,da),yt(Ac,Ac.current)}function sf(){da=yd.current,ft(Ac),ft(yd)}var zs=K(null),As=null;function bl(a){var r=a.alternate;yt(Ie,Ie.current&1),yt(zs,a),As===null&&(r===null||Ac.current!==null||r.memoizedState!==null)&&(As=a)}function mp(a){yt(Ie,Ie.current),yt(zs,a),As===null&&(As=a)}function s_(a){a.tag===22?(yt(Ie,Ie.current),yt(zs,a),As===null&&(As=a)):Bs()}function Bs(){yt(Ie,Ie.current),yt(zs,zs.current)}function Kn(a){ft(zs),As===a&&(As=null),ft(Ie)}var Ie=K(0);function ca(a){for(var r=a;r!==null;){if(r.tag===13){var h=r.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Uv(h)||zv(h)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var bn=0,fe=null,en=null,Ce=null,xa=!1,Ec=!1,au=!1,vd=0,af=0,Sc=null,pp=0;function Vn(){throw Error(i(321))}function gp(a,r){if(r===null)return!1;for(var h=0;h<r.length&&h<a.length;h++)if(!_s(a[h],r[h]))return!1;return!0}function Ad(a,r,h,d,v,S){return bn=S,fe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,et.H=a===null||a.memoizedState===null?k_:kp,au=!1,S=h(d,v),au=!1,Ec&&(S=ru(r,h,d,v)),a_(a),S}function a_(a){et.H=Tc;var r=en!==null&&en.next!==null;if(bn=0,Ce=en=fe=null,xa=!1,af=0,Sc=null,r)throw Error(i(300));a===null||ri||(a=a.dependencies,a!==null&&Jh(a)&&(ri=!0))}function ru(a,r,h,d){fe=a;var v=0;do{if(Ec&&(Sc=null),af=0,Ec=!1,25<=v)throw Error(i(301));if(v+=1,Ce=en=null,a.updateQueue!=null){var S=a.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}et.H=Na,S=r(h,d)}while(Ec);return S}function lu(){var a=et.H,r=a.useState()[0];return r=typeof r.then=="function"?rf(r):r,a=a.useState()[0],(en!==null?en.memoizedState:null)!==a&&(fe.flags|=1024),r}function _p(){var a=vd!==0;return vd=0,a}function yp(a,r,h){r.updateQueue=a.updateQueue,r.flags&=-2053,a.lanes&=~h}function vp(a){if(xa){for(a=a.memoizedState;a!==null;){var r=a.queue;r!==null&&(r.pending=null),a=a.next}xa=!1}bn=0,Ce=en=fe=null,Ec=!1,af=vd=0,Sc=null}function di(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?fe.memoizedState=Ce=a:Ce=Ce.next=a,Ce}function Wn(){if(en===null){var a=fe.alternate;a=a!==null?a.memoizedState:null}else a=en.next;var r=Ce===null?fe.memoizedState:Ce.next;if(r!==null)Ce=r,en=a;else{if(a===null)throw fe.alternate===null?Error(i(467)):Error(i(310));en=a,a={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},Ce===null?fe.memoizedState=Ce=a:Ce=Ce.next=a}return Ce}function Ed(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rf(a){var r=af;return af+=1,Sc===null&&(Sc=[]),a=pd(Sc,a,r),r=fe,(Ce===null?r.memoizedState:Ce.next)===null&&(r=r.alternate,et.H=r===null||r.memoizedState===null?k_:kp),a}function go(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return rf(a);if(a.$$typeof===q)return se(a)}throw Error(i(438,String(a)))}function Ap(a){var r=null,h=fe.updateQueue;if(h!==null&&(r=h.memoCache),r==null){var d=fe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),h===null&&(h=Ed(),fe.updateQueue=h),h.memoCache=r,h=r.data[r.index],h===void 0)for(h=r.data[r.index]=Array(a),d=0;d<a;d++)h[d]=F;return r.index++,h}function Cl(a,r){return typeof r=="function"?r(a):r}function Sd(a){var r=Wn();return Ep(r,en,a)}function Ep(a,r,h){var d=a.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=h;var v=a.baseQueue,S=d.pending;if(S!==null){if(v!==null){var N=v.next;v.next=S.next,S.next=N}r.baseQueue=v=S,d.pending=null}if(S=a.baseState,v===null)a.memoizedState=S;else{r=v.next;var V=N=null,W=null,ot=r,_t=!1;do{var Tt=ot.lane&-536870913;if(Tt!==ot.lane?(_e&Tt)===Tt:(bn&Tt)===Tt){var ct=ot.revertLane;if(ct===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null}),Tt===El&&(_t=!0);else if((bn&ct)===ct){ot=ot.next,ct===El&&(_t=!0);continue}else Tt={lane:0,revertLane:ot.revertLane,gesture:null,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},W===null?(V=W=Tt,N=S):W=W.next=Tt,fe.lanes|=ct,Kr|=ct;Tt=ot.action,au&&h(S,Tt),S=ot.hasEagerState?ot.eagerState:h(S,Tt)}else ct={lane:Tt,revertLane:ot.revertLane,gesture:ot.gesture,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},W===null?(V=W=ct,N=S):W=W.next=ct,fe.lanes|=Tt,Kr|=Tt;ot=ot.next}while(ot!==null&&ot!==r);if(W===null?N=S:W.next=V,!_s(S,a.memoizedState)&&(ri=!0,_t&&(h=Ra,h!==null)))throw h;a.memoizedState=S,a.baseState=N,a.baseQueue=W,d.lastRenderedState=S}return v===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function Sp(a){var r=Wn(),h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=a;var d=h.dispatch,v=h.pending,S=r.memoizedState;if(v!==null){h.pending=null;var N=v=v.next;do S=a(S,N.action),N=N.next;while(N!==v);_s(S,r.memoizedState)||(ri=!0),r.memoizedState=S,r.baseQueue===null&&(r.baseState=S),h.lastRenderedState=S}return[S,d]}function r_(a,r,h){var d=fe,v=Wn(),S=De;if(S){if(h===void 0)throw Error(i(407));h=h()}else h=r();var N=!_s((en||v).memoizedState,h);if(N&&(v.memoizedState=h,ri=!0),v=v.queue,Dp(u_.bind(null,d,v,a),[a]),v.getSnapshot!==r||N||Ce!==null&&Ce.memoizedState.tag&1){if(d.flags|=2048,_o(9,{destroy:void 0},o_.bind(null,d,v,h,r),null),le===null)throw Error(i(349));S||(bn&127)!==0||l_(d,r,h)}return h}function l_(a,r,h){a.flags|=16384,a={getSnapshot:r,value:h},r=fe.updateQueue,r===null?(r=Ed(),fe.updateQueue=r,r.stores=[a]):(h=r.stores,h===null?r.stores=[a]:h.push(a))}function o_(a,r,h,d){r.value=h,r.getSnapshot=d,c_(r)&&h_(a)}function u_(a,r,h){return h(function(){c_(r)&&h_(a)})}function c_(a){var r=a.getSnapshot;a=a.value;try{var h=r();return!_s(a,h)}catch{return!0}}function h_(a){var r=ys(a,2);r!==null&&Ee(r,a,2)}function Tp(a){var r=di();if(typeof a=="function"){var h=a;if(a=h(),au){Rt(!0);try{h()}finally{Rt(!1)}}}return r.memoizedState=r.baseState=a,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:a},r}function bp(a,r,h,d){return a.baseState=h,Ep(a,en,typeof d=="function"?d:Cl)}function Sv(a,r,h,d,v){if(Rd(a))throw Error(i(485));if(a=r.action,a!==null){var S={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){S.listeners.push(N)}};et.T!==null?h(!0):S.isTransition=!1,d(S),h=r.pending,h===null?(S.next=r.pending=S,f_(r,S)):(S.next=h.next,r.pending=h.next=S)}}function f_(a,r){var h=r.action,d=r.payload,v=a.state;if(r.isTransition){var S=et.T,N={};et.T=N;try{var V=h(v,d),W=et.S;W!==null&&W(N,V),d_(a,r,V)}catch(ot){Cp(a,r,ot)}finally{S!==null&&N.types!==null&&(S.types=N.types),et.T=S}}else try{S=h(v,d),d_(a,r,S)}catch(ot){Cp(a,r,ot)}}function d_(a,r,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(d){m_(a,r,d)},function(d){return Cp(a,r,d)}):m_(a,r,h)}function m_(a,r,h){r.status="fulfilled",r.value=h,p_(r),a.state=h,r=a.pending,r!==null&&(h=r.next,h===r?a.pending=null:(h=h.next,r.next=h,f_(a,h)))}function Cp(a,r,h){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=h,p_(r),r=r.next;while(r!==d)}a.action=null}function p_(a){a=a.listeners;for(var r=0;r<a.length;r++)(0,a[r])()}function Rp(a,r){return r}function wp(a,r){if(De){var h=le.formState;if(h!==null){t:{var d=fe;if(De){if(hn){e:{for(var v=hn,S=oa;v.nodeType!==8;){if(!S){v=null;break e}if(v=Zr(v.nextSibling),v===null){v=null;break e}}S=v.data,v=S==="F!"||S==="F"?v:null}if(v){hn=Zr(v.nextSibling),d=v.data==="F!";break t}}Pr(d)}d=!1}d&&(r=h[0])}}return h=di(),h.memoizedState=h.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rp,lastRenderedState:r},h.queue=d,h=M_.bind(null,fe,d),d.dispatch=h,d=Tp(!1),S=Vp.bind(null,fe,!1,d.queue),d=di(),v={state:r,dispatch:null,action:a,pending:null},d.queue=v,h=Sv.bind(null,fe,v,S,h),v.dispatch=h,d.memoizedState=a,[r,h,!1]}function g_(a){var r=Wn();return xp(r,en,a)}function xp(a,r,h){if(r=Ep(a,r,Rp)[0],a=Sd(Cl)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=rf(r)}catch(N){throw N===$o?ve:N}else d=r;r=Wn();var v=r.queue,S=v.dispatch;return h!==r.memoizedState&&(fe.flags|=2048,_o(9,{destroy:void 0},__.bind(null,v,h),null)),[d,S,a]}function __(a,r){a.action=r}function Np(a){var r=Wn(),h=en;if(h!==null)return xp(r,h,a);Wn(),r=r.memoizedState,h=Wn();var d=h.queue.dispatch;return h.memoizedState=a,[r,d,!1]}function _o(a,r,h,d){return a={tag:a,create:h,deps:d,inst:r,next:null},r=fe.updateQueue,r===null&&(r=Ed(),fe.updateQueue=r),h=r.lastEffect,h===null?r.lastEffect=a.next=a:(d=h.next,h.next=a,a.next=d,r.lastEffect=a),a}function Td(){return Wn().memoizedState}function bd(a,r,h,d){var v=di();fe.flags|=a,v.memoizedState=_o(1|r,{destroy:void 0},h,d===void 0?null:d)}function Cd(a,r,h,d){var v=Wn();d=d===void 0?null:d;var S=v.memoizedState.inst;en!==null&&d!==null&&gp(d,en.memoizedState.deps)?v.memoizedState=_o(r,S,h,d):(fe.flags|=a,v.memoizedState=_o(1|r,S,h,d))}function y_(a,r){bd(8390656,8,a,r)}function Dp(a,r){Cd(2048,8,a,r)}function v_(a){fe.flags|=4;var r=fe.updateQueue;if(r===null)r=Ed(),fe.updateQueue=r,r.events=[a];else{var h=r.events;h===null?r.events=[a]:h.push(a)}}function A_(a){var r=Wn().memoizedState;return v_({ref:r,nextImpl:a}),function(){if((Kt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function E_(a,r){return Cd(4,2,a,r)}function S_(a,r){return Cd(4,4,a,r)}function T_(a,r){if(typeof r=="function"){a=a();var h=r(a);return function(){typeof h=="function"?h():r(null)}}if(r!=null)return a=a(),r.current=a,function(){r.current=null}}function b_(a,r,h){h=h!=null?h.concat([a]):null,Cd(4,4,T_.bind(null,r,a),h)}function Ip(){}function C_(a,r){var h=Wn();r=r===void 0?null:r;var d=h.memoizedState;return r!==null&&gp(r,d[1])?d[0]:(h.memoizedState=[a,r],a)}function R_(a,r){var h=Wn();r=r===void 0?null:r;var d=h.memoizedState;if(r!==null&&gp(r,d[1]))return d[0];if(d=a(),au){Rt(!0);try{a()}finally{Rt(!1)}}return h.memoizedState=[d,r],d}function Op(a,r,h){return h===void 0||(bn&1073741824)!==0&&(_e&261930)===0?a.memoizedState=r:(a.memoizedState=h,a=Te(),fe.lanes|=a,Kr|=a,h)}function w_(a,r,h,d){return _s(h,r)?h:Ac.current!==null?(a=Op(a,h,d),_s(a,r)||(ri=!0),a):(bn&42)===0||(bn&1073741824)!==0&&(_e&261930)===0?(ri=!0,a.memoizedState=h):(a=Te(),fe.lanes|=a,Kr|=a,r)}function x_(a,r,h,d,v){var S=vt.p;vt.p=S!==0&&8>S?S:8;var N=et.T,V={};et.T=V,Vp(a,!1,r,h);try{var W=v(),ot=et.S;if(ot!==null&&ot(V,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var _t=up(W,d);lf(a,r,_t,pa(a))}else lf(a,r,d,pa(a))}catch(Tt){lf(a,r,{then:function(){},status:"rejected",reason:Tt},pa())}finally{vt.p=S,N!==null&&V.types!==null&&(N.types=V.types),et.T=N}}function Tv(){}function Mp(a,r,h,d){if(a.tag!==5)throw Error(i(476));var v=N_(a).queue;x_(a,v,r,St,h===null?Tv:function(){return D_(a),h(d)})}function N_(a){var r=a.memoizedState;if(r!==null)return r;r={memoizedState:St,baseState:St,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:St},next:null};var h={};return r.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:h},next:null},a.memoizedState=r,a=a.alternate,a!==null&&(a.memoizedState=r),r}function D_(a){var r=N_(a);r.next===null&&(r=a.alternate.memoizedState),lf(a,r.next.queue,{},pa())}function Lp(){return se(ng)}function I_(){return Wn().memoizedState}function O_(){return Wn().memoizedState}function bv(a){for(var r=a.return;r!==null;){switch(r.tag){case 24:case 3:var h=pa();a=Tl(h);var d=mo(r,a,h);d!==null&&(Ee(d,r,h),po(d,r,h)),r={cache:rp()},a.payload=r;return}r=r.return}}function Cv(a,r,h){var d=pa();h={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Rd(a)?L_(r,h):(h=id(a,r,h,d),h!==null&&(Ee(h,a,d),V_(h,r,d)))}function M_(a,r,h){var d=pa();lf(a,r,h,d)}function lf(a,r,h,d){var v={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(Rd(a))L_(r,v);else{var S=a.alternate;if(a.lanes===0&&(S===null||S.lanes===0)&&(S=r.lastRenderedReducer,S!==null))try{var N=r.lastRenderedState,V=S(N,h);if(v.hasEagerState=!0,v.eagerState=V,_s(V,N))return Ti(a,r,v,0),le===null&&Kh(),!1}catch{}if(h=id(a,r,v,d),h!==null)return Ee(h,a,d),V_(h,r,d),!0}return!1}function Vp(a,r,h,d){if(d={lane:2,revertLane:dt(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Rd(a)){if(r)throw Error(i(479))}else r=id(a,h,d,2),r!==null&&Ee(r,a,2)}function Rd(a){var r=a.alternate;return a===fe||r!==null&&r===fe}function L_(a,r){Ec=xa=!0;var h=a.pending;h===null?r.next=r:(r.next=h.next,h.next=r),a.pending=r}function V_(a,r,h){if((h&4194048)!==0){var d=r.lanes;d&=a.pendingLanes,h|=d,r.lanes=h,Wa(a,h)}}var Tc={readContext:se,use:go,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useLayoutEffect:Vn,useInsertionEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useSyncExternalStore:Vn,useId:Vn,useHostTransitionStatus:Vn,useFormState:Vn,useActionState:Vn,useOptimistic:Vn,useMemoCache:Vn,useCacheRefresh:Vn};Tc.useEffectEvent=Vn;var k_={readContext:se,use:go,useCallback:function(a,r){return di().memoizedState=[a,r===void 0?null:r],a},useContext:se,useEffect:y_,useImperativeHandle:function(a,r,h){h=h!=null?h.concat([a]):null,bd(4194308,4,T_.bind(null,r,a),h)},useLayoutEffect:function(a,r){return bd(4194308,4,a,r)},useInsertionEffect:function(a,r){bd(4,2,a,r)},useMemo:function(a,r){var h=di();r=r===void 0?null:r;var d=a();if(au){Rt(!0);try{a()}finally{Rt(!1)}}return h.memoizedState=[d,r],d},useReducer:function(a,r,h){var d=di();if(h!==void 0){var v=h(r);if(au){Rt(!0);try{h(r)}finally{Rt(!1)}}}else v=r;return d.memoizedState=d.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},d.queue=a,a=a.dispatch=Cv.bind(null,fe,a),[d.memoizedState,a]},useRef:function(a){var r=di();return a={current:a},r.memoizedState=a},useState:function(a){a=Tp(a);var r=a.queue,h=M_.bind(null,fe,r);return r.dispatch=h,[a.memoizedState,h]},useDebugValue:Ip,useDeferredValue:function(a,r){var h=di();return Op(h,a,r)},useTransition:function(){var a=Tp(!1);return a=x_.bind(null,fe,a.queue,!0,!1),di().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,r,h){var d=fe,v=di();if(De){if(h===void 0)throw Error(i(407));h=h()}else{if(h=r(),le===null)throw Error(i(349));(_e&127)!==0||l_(d,r,h)}v.memoizedState=h;var S={value:h,getSnapshot:r};return v.queue=S,y_(u_.bind(null,d,S,a),[a]),d.flags|=2048,_o(9,{destroy:void 0},o_.bind(null,d,S,h,r),null),h},useId:function(){var a=di(),r=le.identifierPrefix;if(De){var h=ar,d=Ln;h=(d&~(1<<32-Ht(d)-1)).toString(32)+h,r="_"+r+"R_"+h,h=vd++,0<h&&(r+="H"+h.toString(32)),r+="_"}else h=pp++,r="_"+r+"r_"+h.toString(32)+"_";return a.memoizedState=r},useHostTransitionStatus:Lp,useFormState:wp,useActionState:wp,useOptimistic:function(a){var r=di();r.memoizedState=r.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=h,r=Vp.bind(null,fe,!0,h),h.dispatch=r,[a,r]},useMemoCache:Ap,useCacheRefresh:function(){return di().memoizedState=bv.bind(null,fe)},useEffectEvent:function(a){var r=di(),h={impl:a};return r.memoizedState=h,function(){if((Kt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},kp={readContext:se,use:go,useCallback:C_,useContext:se,useEffect:Dp,useImperativeHandle:b_,useInsertionEffect:E_,useLayoutEffect:S_,useMemo:R_,useReducer:Sd,useRef:Td,useState:function(){return Sd(Cl)},useDebugValue:Ip,useDeferredValue:function(a,r){var h=Wn();return w_(h,en.memoizedState,a,r)},useTransition:function(){var a=Sd(Cl)[0],r=Wn().memoizedState;return[typeof a=="boolean"?a:rf(a),r]},useSyncExternalStore:r_,useId:I_,useHostTransitionStatus:Lp,useFormState:g_,useActionState:g_,useOptimistic:function(a,r){var h=Wn();return bp(h,en,a,r)},useMemoCache:Ap,useCacheRefresh:O_};kp.useEffectEvent=A_;var Na={readContext:se,use:go,useCallback:C_,useContext:se,useEffect:Dp,useImperativeHandle:b_,useInsertionEffect:E_,useLayoutEffect:S_,useMemo:R_,useReducer:Sp,useRef:Td,useState:function(){return Sp(Cl)},useDebugValue:Ip,useDeferredValue:function(a,r){var h=Wn();return en===null?Op(h,a,r):w_(h,en.memoizedState,a,r)},useTransition:function(){var a=Sp(Cl)[0],r=Wn().memoizedState;return[typeof a=="boolean"?a:rf(a),r]},useSyncExternalStore:r_,useId:I_,useHostTransitionStatus:Lp,useFormState:Np,useActionState:Np,useOptimistic:function(a,r){var h=Wn();return en!==null?bp(h,en,a,r):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:Ap,useCacheRefresh:O_};Na.useEffectEvent=A_;function wd(a,r,h,d){r=a.memoizedState,h=h(d,r),h=h==null?r:E({},r,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var of={enqueueSetState:function(a,r,h){a=a._reactInternals;var d=pa(),v=Tl(d);v.payload=r,h!=null&&(v.callback=h),r=mo(a,v,d),r!==null&&(Ee(r,a,d),po(r,a,d))},enqueueReplaceState:function(a,r,h){a=a._reactInternals;var d=pa(),v=Tl(d);v.tag=1,v.payload=r,h!=null&&(v.callback=h),r=mo(a,v,d),r!==null&&(Ee(r,a,d),po(r,a,d))},enqueueForceUpdate:function(a,r){a=a._reactInternals;var h=pa(),d=Tl(h);d.tag=2,r!=null&&(d.callback=r),r=mo(a,d,h),r!==null&&(Ee(r,a,h),po(r,a,h))}};function Pp(a,r,h,d,v,S,N){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,S,N):r.prototype&&r.prototype.isPureReactComponent?!ac(h,d)||!ac(v,S):!0}function Up(a,r,h,d){a=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(h,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(h,d),r.state!==a&&of.enqueueReplaceState(r,r.state,null)}function yo(a,r){var h=r;if("ref"in r){h={};for(var d in r)d!=="ref"&&(h[d]=r[d])}if(a=a.defaultProps){h===r&&(h=E({},h));for(var v in a)h[v]===void 0&&(h[v]=a[v])}return h}function P_(a){Xh(a)}function zp(a){console.error(a)}function Bp(a){Xh(a)}function xd(a,r){try{var h=a.onUncaughtError;h(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function U_(a,r,h){try{var d=a.onCaughtError;d(h.value,{componentStack:h.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function jp(a,r,h){return h=Tl(h),h.tag=3,h.payload={element:null},h.callback=function(){xd(a,r)},h}function Hp(a){return a=Tl(a),a.tag=3,a}function z_(a,r,h,d){var v=h.type.getDerivedStateFromError;if(typeof v=="function"){var S=d.value;a.payload=function(){return v(S)},a.callback=function(){U_(r,h,d)}}var N=h.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(a.callback=function(){U_(r,h,d),typeof v!="function"&&($n===null?$n=new Set([this]):$n.add(this));var V=d.stack;this.componentDidCatch(d.value,{componentStack:V!==null?V:""})})}function mi(a,r,h,d,v){if(h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=h.alternate,r!==null&&jr(r,h,v,!0),h=zs.current,h!==null){switch(h.tag){case 31:case 13:return As===null?Dc():h.alternate===null&&kn===0&&(kn=3),h.flags&=-257,h.flags|=65536,h.lanes=v,d===md?h.flags|=16384:(r=h.updateQueue,r===null?h.updateQueue=new Set([d]):r.add(d),Af(a,d,v)),!1;case 22:return h.flags|=65536,d===md?h.flags|=16384:(r=h.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},h.updateQueue=r):(h=r.retryQueue,h===null?r.retryQueue=new Set([d]):h.add(d)),Af(a,d,v)),!1}throw Error(i(435,h.tag))}return Af(a,d,v),Dc(),!1}if(De)return r=zs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,d!==dc&&(a=Error(i(422),{cause:d}),Ur(la(a,h)))):(d!==dc&&(r=Error(i(423),{cause:d}),Ur(la(r,h))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,d=la(d,h),v=jp(a.stateNode,d,v),Zt(a,v),kn!==4&&(kn=2)),!1;var S=Error(i(520),{cause:d});if(S=la(S,h),pu===null?pu=[S]:pu.push(S),kn!==4&&(kn=2),r===null)return!0;d=la(d,h),h=r;do{switch(h.tag){case 3:return h.flags|=65536,a=v&-v,h.lanes|=a,a=jp(h.stateNode,d,a),Zt(h,a),!1;case 1:if(r=h.type,S=h.stateNode,(h.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&($n===null||!$n.has(S))))return h.flags|=65536,v&=-v,h.lanes|=v,v=Hp(v),z_(v,a,h,d),Zt(h,v),!1}h=h.return}while(h!==null);return!1}var Nd=Error(i(461)),ri=!1;function bi(a,r,h,d){r.child=a===null?_d(r,null,h,d):Sl(r,a.child,h,d)}function Gp(a,r,h,d,v){h=h.render;var S=r.ref;if("ref"in d){var N={};for(var V in d)V!=="ref"&&(N[V]=d[V])}else N=d;return ho(r),d=Ad(a,r,h,N,S,v),V=_p(),a!==null&&!ri?(yp(a,r,v),Jn(a,r,v)):(De&&V&&kr(r),r.flags|=1,bi(a,r,d,v),r.child)}function ou(a,r,h,d,v){if(a===null){var S=h.type;return typeof S=="function"&&!sd(S)&&S.defaultProps===void 0&&h.compare===null?(r.tag=15,r.type=S,Dd(a,r,S,d,v)):(a=Lr(h.type,null,d,r,r.mode,v),a.ref=r.ref,a.return=r,r.child=a)}if(S=a.child,!kd(a,v)){var N=S.memoizedProps;if(h=h.compare,h=h!==null?h:ac,h(N,d)&&a.ref===r.ref)return Jn(a,r,v)}return r.flags|=1,a=ks(S,d),a.ref=r.ref,a.return=r,r.child=a}function Dd(a,r,h,d,v){if(a!==null){var S=a.memoizedProps;if(ac(S,d)&&a.ref===r.ref)if(ri=!1,r.pendingProps=d=S,kd(a,v))(a.flags&131072)!==0&&(ri=!0);else return r.lanes=a.lanes,Jn(a,r,v)}return bc(a,r,h,d,v)}function uu(a,r,h,d){var v=d.children,S=a!==null?a.memoizedState:null;if(a===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(S=S!==null?S.baseLanes|h:h,a!==null){for(d=r.child=a.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~S}else d=0,r.child=null;return js(a,r,S,h,d)}if((h&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},a!==null&&Zh(r,S!==null?S.cachePool:null),S!==null?i_(r,S):dp(),s_(r);else return d=r.lanes=536870912,js(a,r,S!==null?S.baseLanes|h:h,h,d)}else S!==null?(Zh(r,S.cachePool),i_(r,S),Bs(),r.memoizedState=null):(a!==null&&Zh(r,null),dp(),Bs());return bi(a,r,v,h),r.child}function Gr(a,r){return a!==null&&a.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function js(a,r,h,d,v){var S=dd();return S=S===null?null:{parent:ai._currentValue,pool:S},r.memoizedState={baseLanes:h,cachePool:S},a!==null&&Zh(r,null),dp(),s_(r),a!==null&&jr(a,r,d,!0),r.childLanes=v,null}function Id(a,r){return r=Vd({mode:r.mode,children:r.children},a.mode),r.ref=a.ref,a.child=r,r.return=a,r}function B_(a,r,h){return Sl(r,a.child,null,h),a=Id(r,r.pendingProps),a.flags|=2,Kn(r),r.memoizedState=null,a}function Od(a,r,h){var d=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,a===null){if(De){if(d.mode==="hidden")return a=Id(r,d),r.lanes=536870912,Gr(null,a);if(mp(r),(a=hn)?(a=r4(a,oa),a=a!==null&&a.data==="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:yl!==null?{id:Ln,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},h=cc(a),h.return=r,r.child=h,Gn=r,hn=null)):a=null,a===null)throw Pr(r);return r.lanes=536870912,null}return Id(r,d)}var S=a.memoizedState;if(S!==null){var N=S.dehydrated;if(mp(r),v)if(r.flags&256)r.flags&=-257,r=B_(a,r,h);else if(r.memoizedState!==null)r.child=a.child,r.flags|=128,r=null;else throw Error(i(558));else if(ri||jr(a,r,h,!1),v=(h&a.childLanes)!==0,ri||v){if(d=le,d!==null&&(N=rl(d,h),N!==0&&N!==S.retryLane))throw S.retryLane=N,ys(a,N),Ee(d,a,N),Nd;Dc(),r=B_(a,r,h)}else a=S.treeContext,hn=Zr(N.nextSibling),Gn=r,De=!0,vl=null,oa=!1,a!==null&&od(r,a),r=Id(r,d),r.flags|=4096;return r}return a=ks(a.child,{mode:d.mode,children:d.children}),a.ref=r.ref,r.child=a,a.return=r,a}function cu(a,r){var h=r.ref;if(h===null)a!==null&&a.ref!==null&&(r.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(a===null||a.ref!==h)&&(r.flags|=4194816)}}function bc(a,r,h,d,v){return ho(r),h=Ad(a,r,h,d,void 0,v),d=_p(),a!==null&&!ri?(yp(a,r,v),Jn(a,r,v)):(De&&d&&kr(r),r.flags|=1,bi(a,r,h,v),r.child)}function uf(a,r,h,d,v,S){return ho(r),r.updateQueue=null,h=ru(r,d,h,v),a_(a),d=_p(),a!==null&&!ri?(yp(a,r,S),Jn(a,r,S)):(De&&d&&kr(r),r.flags|=1,bi(a,r,h,S),r.child)}function Md(a,r,h,d,v){if(ho(r),r.stateNode===null){var S=ao,N=h.contextType;typeof N=="object"&&N!==null&&(S=se(N)),S=new h(d,S),r.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=of,r.stateNode=S,S._reactInternals=r,S=r.stateNode,S.props=d,S.state=r.memoizedState,S.refs={},ef(r),N=h.contextType,S.context=typeof N=="object"&&N!==null?se(N):ao,S.state=r.memoizedState,N=h.getDerivedStateFromProps,typeof N=="function"&&(wd(r,h,N,d),S.state=r.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(N=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),N!==S.state&&of.enqueueReplaceState(S,S.state,null),yc(r,d,S,v),nf(),S.state=r.memoizedState),typeof S.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(a===null){S=r.stateNode;var V=r.memoizedProps,W=yo(h,V);S.props=W;var ot=S.context,_t=h.contextType;N=ao,typeof _t=="object"&&_t!==null&&(N=se(_t));var Tt=h.getDerivedStateFromProps;_t=typeof Tt=="function"||typeof S.getSnapshotBeforeUpdate=="function",V=r.pendingProps!==V,_t||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(V||ot!==N)&&Up(r,S,d,N),vs=!1;var ct=r.memoizedState;S.state=ct,yc(r,d,S,v),nf(),ot=r.memoizedState,V||ct!==ot||vs?(typeof Tt=="function"&&(wd(r,h,Tt,d),ot=r.memoizedState),(W=vs||Pp(r,h,W,d,ct,ot,N))?(_t||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(r.flags|=4194308)):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=ot),S.props=d,S.state=ot,S.context=N,d=W):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{S=r.stateNode,hp(a,r),N=r.memoizedProps,_t=yo(h,N),S.props=_t,Tt=r.pendingProps,ct=S.context,ot=h.contextType,W=ao,typeof ot=="object"&&ot!==null&&(W=se(ot)),V=h.getDerivedStateFromProps,(ot=typeof V=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==Tt||ct!==W)&&Up(r,S,d,W),vs=!1,ct=r.memoizedState,S.state=ct,yc(r,d,S,v),nf();var gt=r.memoizedState;N!==Tt||ct!==gt||vs||a!==null&&a.dependencies!==null&&Jh(a.dependencies)?(typeof V=="function"&&(wd(r,h,V,d),gt=r.memoizedState),(_t=vs||Pp(r,h,_t,d,ct,gt,W)||a!==null&&a.dependencies!==null&&Jh(a.dependencies))?(ot||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(d,gt,W),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(d,gt,W)),typeof S.componentDidUpdate=="function"&&(r.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof S.componentDidUpdate!="function"||N===a.memoizedProps&&ct===a.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&ct===a.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=gt),S.props=d,S.state=gt,S.context=W,d=_t):(typeof S.componentDidUpdate!="function"||N===a.memoizedProps&&ct===a.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&ct===a.memoizedState||(r.flags|=1024),d=!1)}return S=d,cu(a,r),d=(r.flags&128)!==0,S||d?(S=r.stateNode,h=d&&typeof h.getDerivedStateFromError!="function"?null:S.render(),r.flags|=1,a!==null&&d?(r.child=Sl(r,a.child,null,v),r.child=Sl(r,null,h,v)):bi(a,r,h,v),r.memoizedState=S.state,a=r.child):a=Jn(a,r,v),a}function j_(a,r,h,d){return uo(),r.flags|=256,bi(a,r,h,d),r.child}var qp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ki(a){return{baseLanes:a,cachePool:cp()}}function Ld(a,r,h){return a=a!==null?a.childLanes&~h:0,r&&(a|=bs),a}function H_(a,r,h){var d=r.pendingProps,v=!1,S=(r.flags&128)!==0,N;if((N=S)||(N=a!==null&&a.memoizedState===null?!1:(Ie.current&2)!==0),N&&(v=!0,r.flags&=-129),N=(r.flags&32)!==0,r.flags&=-33,a===null){if(De){if(v?bl(r):Bs(),(a=hn)?(a=r4(a,oa),a=a!==null&&a.data!=="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:yl!==null?{id:Ln,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},h=cc(a),h.return=r,r.child=h,Gn=r,hn=null)):a=null,a===null)throw Pr(r);return zv(a)?r.lanes=32:r.lanes=536870912,null}var V=d.children;return d=d.fallback,v?(Bs(),v=r.mode,V=Vd({mode:"hidden",children:V},v),d=ro(d,v,h,null),V.return=r,d.return=r,V.sibling=d,r.child=V,d=r.child,d.memoizedState=Ki(h),d.childLanes=Ld(a,N,h),r.memoizedState=qp,Gr(null,d)):(bl(r),cf(r,V))}var W=a.memoizedState;if(W!==null&&(V=W.dehydrated,V!==null)){if(S)r.flags&256?(bl(r),r.flags&=-257,r=Fp(a,r,h)):r.memoizedState!==null?(Bs(),r.child=a.child,r.flags|=128,r=null):(Bs(),V=d.fallback,v=r.mode,d=Vd({mode:"visible",children:d.children},v),V=ro(V,v,h,null),V.flags|=2,d.return=r,V.return=r,d.sibling=V,r.child=d,Sl(r,a.child,null,h),d=r.child,d.memoizedState=Ki(h),d.childLanes=Ld(a,N,h),r.memoizedState=qp,r=Gr(null,d));else if(bl(r),zv(V)){if(N=V.nextSibling&&V.nextSibling.dataset,N)var ot=N.dgst;N=ot,d=Error(i(419)),d.stack="",d.digest=N,Ur({value:d,source:null,stack:null}),r=Fp(a,r,h)}else if(ri||jr(a,r,h,!1),N=(h&a.childLanes)!==0,ri||N){if(N=le,N!==null&&(d=rl(N,h),d!==0&&d!==W.retryLane))throw W.retryLane=d,ys(a,d),Ee(N,a,d),Nd;Uv(V)||Dc(),r=Fp(a,r,h)}else Uv(V)?(r.flags|=192,r.child=a.child,r=null):(a=W.treeContext,hn=Zr(V.nextSibling),Gn=r,De=!0,vl=null,oa=!1,a!==null&&od(r,a),r=cf(r,d.children),r.flags|=4096);return r}return v?(Bs(),V=d.fallback,v=r.mode,W=a.child,ot=W.sibling,d=ks(W,{mode:"hidden",children:d.children}),d.subtreeFlags=W.subtreeFlags&65011712,ot!==null?V=ks(ot,V):(V=ro(V,v,h,null),V.flags|=2),V.return=r,d.return=r,d.sibling=V,r.child=d,Gr(null,d),d=r.child,V=a.child.memoizedState,V===null?V=Ki(h):(v=V.cachePool,v!==null?(W=ai._currentValue,v=v.parent!==W?{parent:W,pool:W}:v):v=cp(),V={baseLanes:V.baseLanes|h,cachePool:v}),d.memoizedState=V,d.childLanes=Ld(a,N,h),r.memoizedState=qp,Gr(a.child,d)):(bl(r),h=a.child,a=h.sibling,h=ks(h,{mode:"visible",children:d.children}),h.return=r,h.sibling=null,a!==null&&(N=r.deletions,N===null?(r.deletions=[a],r.flags|=16):N.push(a)),r.child=h,r.memoizedState=null,h)}function cf(a,r){return r=Vd({mode:"visible",children:r},a.mode),r.return=a,a.child=r}function Vd(a,r){return a=Mn(22,a,null,r),a.lanes=0,a}function Fp(a,r,h){return Sl(r,a.child,null,h),a=cf(r,r.pendingProps.children),a.flags|=2,r.memoizedState=null,a}function G_(a,r,h){a.lanes|=r;var d=a.alternate;d!==null&&(d.lanes|=r),cd(a.return,r,h)}function hu(a,r,h,d,v,S){var N=a.memoizedState;N===null?a.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:v,treeForkCount:S}:(N.isBackwards=r,N.rendering=null,N.renderingStartTime=0,N.last=d,N.tail=h,N.tailMode=v,N.treeForkCount=S)}function Hs(a,r,h){var d=r.pendingProps,v=d.revealOrder,S=d.tail;d=d.children;var N=Ie.current,V=(N&2)!==0;if(V?(N=N&1|2,r.flags|=128):N&=1,yt(Ie,N),bi(a,r,d,h),d=De?fc:0,!V&&a!==null&&(a.flags&128)!==0)t:for(a=r.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&G_(a,h,r);else if(a.tag===19)G_(a,h,r);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break t;for(;a.sibling===null;){if(a.return===null||a.return===r)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(h=r.child,v=null;h!==null;)a=h.alternate,a!==null&&ca(a)===null&&(v=h),h=h.sibling;h=v,h===null?(v=r.child,r.child=null):(v=h.sibling,h.sibling=null),hu(r,!1,v,h,S,d);break;case"backwards":case"unstable_legacy-backwards":for(h=null,v=r.child,r.child=null;v!==null;){if(a=v.alternate,a!==null&&ca(a)===null){r.child=v;break}a=v.sibling,v.sibling=h,h=v,v=a}hu(r,!0,h,null,S,d);break;case"together":hu(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function Jn(a,r,h){if(a!==null&&(r.dependencies=a.dependencies),Kr|=r.lanes,(h&r.childLanes)===0)if(a!==null){if(jr(a,r,h,!1),(h&r.childLanes)===0)return null}else return null;if(a!==null&&r.child!==a.child)throw Error(i(153));if(r.child!==null){for(a=r.child,h=ks(a,a.pendingProps),r.child=h,h.return=r;a.sibling!==null;)a=a.sibling,h=h.sibling=ks(a,a.pendingProps),h.return=r;h.sibling=null}return r.child}function kd(a,r){return(a.lanes&r)!==0?!0:(a=a.dependencies,!!(a!==null&&Jh(a)))}function Rv(a,r,h){switch(r.tag){case 3:wt(r,r.stateNode.containerInfo),Al(r,ai,a.memoizedState.cache),uo();break;case 27:case 5:as(r);break;case 4:wt(r,r.stateNode.containerInfo);break;case 10:Al(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,mp(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(bl(r),r.flags|=128,null):(h&r.child.childLanes)!==0?H_(a,r,h):(bl(r),a=Jn(a,r,h),a!==null?a.sibling:null);bl(r);break;case 19:var v=(a.flags&128)!==0;if(d=(h&r.childLanes)!==0,d||(jr(a,r,h,!1),d=(h&r.childLanes)!==0),v){if(d)return Hs(a,r,h);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),yt(Ie,Ie.current),d)break;return null;case 22:return r.lanes=0,uu(a,r,h,r.pendingProps);case 24:Al(r,ai,a.memoizedState.cache)}return Jn(a,r,h)}function Pd(a,r,h){if(a!==null)if(a.memoizedProps!==r.pendingProps)ri=!0;else{if(!kd(a,h)&&(r.flags&128)===0)return ri=!1,Rv(a,r,h);ri=(a.flags&131072)!==0}else ri=!1,De&&(r.flags&1048576)!==0&&W0(r,fc,r.index);switch(r.lanes=0,r.tag){case 16:t:{var d=r.pendingProps;if(a=tu(r.elementType),r.type=a,typeof a=="function")sd(a)?(d=yo(a,d),r.tag=1,r=Md(null,r,a,d,h)):(r.tag=0,r=bc(null,r,a,d,h));else{if(a!=null){var v=a.$$typeof;if(v===$){r.tag=11,r=Gp(null,r,a,d,h);break t}else if(v===P){r.tag=14,r=ou(null,r,a,d,h);break t}}throw r=Yt(a)||a,Error(i(306,r,""))}}return r;case 0:return bc(a,r,r.type,r.pendingProps,h);case 1:return d=r.type,v=yo(d,r.pendingProps),Md(a,r,d,v,h);case 3:t:{if(wt(r,r.stateNode.containerInfo),a===null)throw Error(i(387));d=r.pendingProps;var S=r.memoizedState;v=S.element,hp(a,r),yc(r,d,null,h);var N=r.memoizedState;if(d=N.cache,Al(r,ai,d),d!==S.cache&&hd(r,[ai],h,!0),nf(),d=N.element,S.isDehydrated)if(S={element:d,isDehydrated:!1,cache:N.cache},r.updateQueue.baseState=S,r.memoizedState=S,r.flags&256){r=j_(a,r,d,h);break t}else if(d!==v){v=la(Error(i(424)),r),Ur(v),r=j_(a,r,d,h);break t}else for(a=r.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,hn=Zr(a.firstChild),Gn=r,De=!0,vl=null,oa=!0,h=_d(r,null,d,h),r.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(uo(),d===v){r=Jn(a,r,h);break t}bi(a,r,d,h)}r=r.child}return r;case 26:return cu(a,r),a===null?(h=f4(r.type,null,r.pendingProps,null))?r.memoizedState=h:De||(h=r.type,a=r.pendingProps,d=Q_(Wt.current).createElement(h),d[gn]=r,d[ci]=a,Rs(d,h,a),On(d),r.stateNode=d):r.memoizedState=f4(r.type,a.memoizedProps,r.pendingProps,a.memoizedState),null;case 27:return as(r),a===null&&De&&(d=r.stateNode=u4(r.type,r.pendingProps,Wt.current),Gn=r,oa=!0,v=hn,Lc(r.type)?(Bv=v,hn=Zr(d.firstChild)):hn=v),bi(a,r,r.pendingProps.children,h),cu(a,r),a===null&&(r.flags|=4194304),r.child;case 5:return a===null&&De&&((v=d=hn)&&(d=oR(d,r.type,r.pendingProps,oa),d!==null?(r.stateNode=d,Gn=r,hn=Zr(d.firstChild),oa=!1,v=!0):v=!1),v||Pr(r)),as(r),v=r.type,S=r.pendingProps,N=a!==null?a.memoizedProps:null,d=S.children,Vv(v,S)?d=null:N!==null&&Vv(v,N)&&(r.flags|=32),r.memoizedState!==null&&(v=Ad(a,r,lu,null,null,h),ng._currentValue=v),cu(a,r),bi(a,r,d,h),r.child;case 6:return a===null&&De&&((a=h=hn)&&(h=uR(h,r.pendingProps,oa),h!==null?(r.stateNode=h,Gn=r,hn=null,a=!0):a=!1),a||Pr(r)),null;case 13:return H_(a,r,h);case 4:return wt(r,r.stateNode.containerInfo),d=r.pendingProps,a===null?r.child=Sl(r,null,d,h):bi(a,r,d,h),r.child;case 11:return Gp(a,r,r.type,r.pendingProps,h);case 7:return bi(a,r,r.pendingProps,h),r.child;case 8:return bi(a,r,r.pendingProps.children,h),r.child;case 12:return bi(a,r,r.pendingProps.children,h),r.child;case 10:return d=r.pendingProps,Al(r,r.type,d.value),bi(a,r,d.children,h),r.child;case 9:return v=r.type._context,d=r.pendingProps.children,ho(r),v=se(v),d=d(v),r.flags|=1,bi(a,r,d,h),r.child;case 14:return ou(a,r,r.type,r.pendingProps,h);case 15:return Dd(a,r,r.type,r.pendingProps,h);case 19:return Hs(a,r,h);case 31:return Od(a,r,h);case 22:return uu(a,r,h,r.pendingProps);case 24:return ho(r),d=se(ai),a===null?(v=dd(),v===null&&(v=le,S=rp(),v.pooledCache=S,S.refCount++,S!==null&&(v.pooledCacheLanes|=h),v=S),r.memoizedState={parent:d,cache:v},ef(r),Al(r,ai,v)):((a.lanes&h)!==0&&(hp(a,r),yc(r,null,null,h),nf()),v=a.memoizedState,S=r.memoizedState,v.parent!==d?(v={parent:d,cache:d},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),Al(r,ai,d)):(d=S.cache,Al(r,ai,d),d!==v.cache&&hd(r,[ai],h,!0))),bi(a,r,r.pendingProps.children,h),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function qr(a){a.flags|=4}function hf(a,r,h,d,v){if((r=(a.mode&32)!==0)&&(r=!1),r){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(Un())a.flags|=8192;else throw Hr=md,$h}else a.flags&=-16777217}function Yp(a,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!_4(r))if(Un())a.flags|=8192;else throw Hr=md,$h}function Rl(a,r){r!==null&&(a.flags|=4),a.flags&16384&&(r=a.tag!==22?Ka():536870912,a.lanes|=r,yn|=r)}function Fr(a,r){if(!De)switch(a.tailMode){case"hidden":r=a.tail;for(var h=null;r!==null;)r.alternate!==null&&(h=r),r=r.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?r||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function nn(a){var r=a.alternate!==null&&a.alternate.child===a.child,h=0,d=0;if(r)for(var v=a.child;v!==null;)h|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)h|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=d,a.childLanes=h,r}function ff(a,r,h){var d=r.pendingProps;switch(ld(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(r),null;case 1:return nn(r),null;case 3:return h=r.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Br(ai),ie(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(mc(r)?qr(r):a===null||a.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ud())),nn(r),null;case 26:var v=r.type,S=r.memoizedState;return a===null?(qr(r),S!==null?(nn(r),Yp(r,S)):(nn(r),hf(r,v,null,d,h))):S?S!==a.memoizedState?(qr(r),nn(r),Yp(r,S)):(nn(r),r.flags&=-16777217):(a=a.memoizedProps,a!==d&&qr(r),nn(r),hf(r,v,a,d,h)),null;case 27:if(xs(r),h=Wt.current,v=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&qr(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return nn(r),null}a=jt.current,mc(r)?J0(r):(a=u4(v,d,h),r.stateNode=a,qr(r))}return nn(r),null;case 5:if(xs(r),v=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&qr(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return nn(r),null}if(S=jt.current,mc(r))J0(r);else{var N=Q_(Wt.current);switch(S){case 1:S=N.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:S=N.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":S=N.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":S=N.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":S=N.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof d.is=="string"?N.createElement("select",{is:d.is}):N.createElement("select"),d.multiple?S.multiple=!0:d.size&&(S.size=d.size);break;default:S=typeof d.is=="string"?N.createElement(v,{is:d.is}):N.createElement(v)}}S[gn]=r,S[ci]=d;t:for(N=r.child;N!==null;){if(N.tag===5||N.tag===6)S.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===r)break t;for(;N.sibling===null;){if(N.return===null||N.return===r)break t;N=N.return}N.sibling.return=N.return,N=N.sibling}r.stateNode=S;t:switch(Rs(S,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&qr(r)}}return nn(r),hf(r,r.type,a===null?null:a.memoizedProps,r.pendingProps,h),null;case 6:if(a&&r.stateNode!=null)a.memoizedProps!==d&&qr(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(i(166));if(a=Wt.current,mc(r)){if(a=r.stateNode,h=r.memoizedProps,d=null,v=Gn,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}a[gn]=r,a=!!(a.nodeValue===h||d!==null&&d.suppressHydrationWarning===!0||ZS(a.nodeValue,h)),a||Pr(r,!0)}else a=Q_(a).createTextNode(d),a[gn]=r,r.stateNode=a}return nn(r),null;case 31:if(h=r.memoizedState,a===null||a.memoizedState!==null){if(d=mc(r),h!==null){if(a===null){if(!d)throw Error(i(318));if(a=r.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(557));a[gn]=r}else uo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;nn(r),a=!1}else h=ud(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=h),a=!0;if(!a)return r.flags&256?(Kn(r),r):(Kn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return nn(r),null;case 13:if(d=r.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=mc(r),d!==null&&d.dehydrated!==null){if(a===null){if(!v)throw Error(i(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[gn]=r}else uo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;nn(r),v=!1}else v=ud(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(Kn(r),r):(Kn(r),null)}return Kn(r),(r.flags&128)!==0?(r.lanes=h,r):(h=d!==null,a=a!==null&&a.memoizedState!==null,h&&(d=r.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),S=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(S=d.memoizedState.cachePool.pool),S!==v&&(d.flags|=2048)),h!==a&&h&&(r.child.flags|=8192),Rl(r,r.updateQueue),nn(r),null);case 4:return ie(),a===null&&Dv(r.stateNode.containerInfo),nn(r),null;case 10:return Br(r.type),nn(r),null;case 19:if(ft(Ie),d=r.memoizedState,d===null)return nn(r),null;if(v=(r.flags&128)!==0,S=d.rendering,S===null)if(v)Fr(d,!1);else{if(kn!==0||a!==null&&(a.flags&128)!==0)for(a=r.child;a!==null;){if(S=ca(a),S!==null){for(r.flags|=128,Fr(d,!1),a=S.updateQueue,r.updateQueue=a,Rl(r,a),r.subtreeFlags=0,a=h,h=r.child;h!==null;)uc(h,a),h=h.sibling;return yt(Ie,Ie.current&1|2),De&&Vr(r,d.treeForkCount),r.child}a=a.sibling}d.tail!==null&&Hn()>Zn&&(r.flags|=128,v=!0,Fr(d,!1),r.lanes=4194304)}else{if(!v)if(a=ca(S),a!==null){if(r.flags|=128,v=!0,a=a.updateQueue,r.updateQueue=a,Rl(r,a),Fr(d,!0),d.tail===null&&d.tailMode==="hidden"&&!S.alternate&&!De)return nn(r),null}else 2*Hn()-d.renderingStartTime>Zn&&h!==536870912&&(r.flags|=128,v=!0,Fr(d,!1),r.lanes=4194304);d.isBackwards?(S.sibling=r.child,r.child=S):(a=d.last,a!==null?a.sibling=S:r.child=S,d.last=S)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=Hn(),a.sibling=null,h=Ie.current,yt(Ie,v?h&1|2:h&1),De&&Vr(r,d.treeForkCount),a):(nn(r),null);case 22:case 23:return Kn(r),sf(),d=r.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(h&536870912)!==0&&(r.flags&128)===0&&(nn(r),r.subtreeFlags&6&&(r.flags|=8192)):nn(r),h=r.updateQueue,h!==null&&Rl(r,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==h&&(r.flags|=2048),a!==null&&ft(fo),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),Br(ai),nn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Da(a,r){switch(ld(r),r.tag){case 1:return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 3:return Br(ai),ie(),a=r.flags,(a&65536)!==0&&(a&128)===0?(r.flags=a&-65537|128,r):null;case 26:case 27:case 5:return xs(r),null;case 31:if(r.memoizedState!==null){if(Kn(r),r.alternate===null)throw Error(i(340));uo()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 13:if(Kn(r),a=r.memoizedState,a!==null&&a.dehydrated!==null){if(r.alternate===null)throw Error(i(340));uo()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 19:return ft(Ie),null;case 4:return ie(),null;case 10:return Br(r.type),null;case 22:case 23:return Kn(r),sf(),a!==null&&ft(fo),a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 24:return Br(ai),null;case 25:return null;default:return null}}function ha(a,r){switch(ld(r),r.tag){case 3:Br(ai),ie();break;case 26:case 27:case 5:xs(r);break;case 4:ie();break;case 31:r.memoizedState!==null&&Kn(r);break;case 13:Kn(r);break;case 19:ft(Ie);break;case 10:Br(r.type);break;case 22:case 23:Kn(r),sf(),a!==null&&ft(fo);break;case 24:Br(ai)}}function Ia(a,r){try{var h=r.updateQueue,d=h!==null?h.lastEffect:null;if(d!==null){var v=d.next;h=v;do{if((h.tag&a)===a){d=void 0;var S=h.create,N=h.inst;d=S(),N.destroy=d}h=h.next}while(h!==v)}}catch(V){He(r,r.return,V)}}function zi(a,r,h){try{var d=r.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var S=v.next;d=S;do{if((d.tag&a)===a){var N=d.inst,V=N.destroy;if(V!==void 0){N.destroy=void 0,v=r;var W=h,ot=V;try{ot()}catch(_t){He(v,W,_t)}}}d=d.next}while(d!==S)}}catch(_t){He(r,r.return,_t)}}function rr(a){var r=a.updateQueue;if(r!==null){var h=a.stateNode;try{n_(r,h)}catch(d){He(a,a.return,d)}}}function Ci(a,r,h){h.props=yo(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(d){He(a,r,d)}}function wl(a,r){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof h=="function"?a.refCleanup=h(d):h.current=d}}catch(v){He(a,r,v)}}function Bi(a,r){var h=a.ref,d=a.refCleanup;if(h!==null)if(typeof d=="function")try{d()}catch(v){He(a,r,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(v){He(a,r,v)}else h.current=null}function df(a){var r=a.type,h=a.memoizedProps,d=a.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":h.autoFocus&&d.focus();break t;case"img":h.src?d.src=h.src:h.srcSet&&(d.srcset=h.srcSet)}}catch(v){He(a,a.return,v)}}function pi(a,r,h){try{var d=a.stateNode;nR(d,a.type,h,r),d[ci]=r}catch(v){He(a,a.return,v)}}function Cn(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Lc(a.type)||a.tag===4}function Re(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||Cn(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Lc(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Yr(a,r,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,r):(r=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,r.appendChild(a),h=h._reactRootContainer,h!=null||r.onclick!==null||(r.onclick=Ai));else if(d!==4&&(d===27&&Lc(a.type)&&(h=a.stateNode,r=null),a=a.child,a!==null))for(Yr(a,r,h),a=a.sibling;a!==null;)Yr(a,r,h),a=a.sibling}function Es(a,r,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?h.insertBefore(a,r):h.appendChild(a);else if(d!==4&&(d===27&&Lc(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(Es(a,r,h),a=a.sibling;a!==null;)Es(a,r,h),a=a.sibling}function Ud(a){var r=a.stateNode,h=a.memoizedProps;try{for(var d=a.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);Rs(r,d,h),r[gn]=a,r[ci]=h}catch(S){He(a,a.return,S)}}var Oa=!1,fn=!1,lr=!1,q_=typeof WeakSet=="function"?WeakSet:Set,Ri=null;function wv(a,r){if(a=a.containerInfo,Mv=ty,a=Y0(a),ep(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else t:{h=(h=a.ownerDocument)&&h.defaultView||window;var d=h.getSelection&&h.getSelection();if(d&&d.rangeCount!==0){h=d.anchorNode;var v=d.anchorOffset,S=d.focusNode;d=d.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break t}var N=0,V=-1,W=-1,ot=0,_t=0,Tt=a,ct=null;e:for(;;){for(var gt;Tt!==h||v!==0&&Tt.nodeType!==3||(V=N+v),Tt!==S||d!==0&&Tt.nodeType!==3||(W=N+d),Tt.nodeType===3&&(N+=Tt.nodeValue.length),(gt=Tt.firstChild)!==null;)ct=Tt,Tt=gt;for(;;){if(Tt===a)break e;if(ct===h&&++ot===v&&(V=N),ct===S&&++_t===d&&(W=N),(gt=Tt.nextSibling)!==null)break;Tt=ct,ct=Tt.parentNode}Tt=gt}h=V===-1||W===-1?null:{start:V,end:W}}else h=null}h=h||{start:0,end:0}}else h=null;for(Lv={focusedElem:a,selectionRange:h},ty=!1,Ri=r;Ri!==null;)if(r=Ri,a=r.child,(r.subtreeFlags&1028)!==0&&a!==null)a.return=r,Ri=a;else for(;Ri!==null;){switch(r=Ri,S=r.alternate,a=r.flags,r.tag){case 0:if((a&4)!==0&&(a=r.updateQueue,a=a!==null?a.events:null,a!==null))for(h=0;h<a.length;h++)v=a[h],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&S!==null){a=void 0,h=r,v=S.memoizedProps,S=S.memoizedState,d=h.stateNode;try{var Ft=yo(h.type,v);a=d.getSnapshotBeforeUpdate(Ft,S),d.__reactInternalSnapshotBeforeUpdate=a}catch(ne){He(h,h.return,ne)}}break;case 3:if((a&1024)!==0){if(a=r.stateNode.containerInfo,h=a.nodeType,h===9)Pv(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Pv(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=r.sibling,a!==null){a.return=r.return,Ri=a;break}Ri=r.return}}function Rn(a,r,h){var d=h.flags;switch(h.tag){case 0:case 11:case 15:Va(a,h),d&4&&Ia(5,h);break;case 1:if(Va(a,h),d&4)if(a=h.stateNode,r===null)try{a.componentDidMount()}catch(N){He(h,h.return,N)}else{var v=yo(h.type,r.memoizedProps);r=r.memoizedState;try{a.componentDidUpdate(v,r,a.__reactInternalSnapshotBeforeUpdate)}catch(N){He(h,h.return,N)}}d&64&&rr(h),d&512&&wl(h,h.return);break;case 3:if(Va(a,h),d&64&&(a=h.updateQueue,a!==null)){if(r=null,h.child!==null)switch(h.child.tag){case 27:case 5:r=h.child.stateNode;break;case 1:r=h.child.stateNode}try{n_(a,r)}catch(N){He(h,h.return,N)}}break;case 27:r===null&&d&4&&Ud(h);case 26:case 5:Va(a,h),r===null&&d&4&&df(h),d&512&&wl(h,h.return);break;case 12:Va(a,h);break;case 31:Va(a,h),d&4&&vo(a,h);break;case 13:Va(a,h),d&4&&Cc(a,h),d&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=p.bind(null,h),cR(a,h))));break;case 22:if(d=h.memoizedState!==null||Oa,!d){r=r!==null&&r.memoizedState!==null||fn,v=Oa;var S=fn;Oa=d,(fn=r)&&!S?Ss(a,h,(h.subtreeFlags&8772)!==0):Va(a,h),Oa=v,fn=S}break;case 30:break;default:Va(a,h)}}function mf(a){var r=a.alternate;r!==null&&(a.alternate=null,mf(r)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(r=a.stateNode,r!==null&&$a(r)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var We=null,Wi=!1;function Ma(a,r,h){for(h=h.child;h!==null;)zd(a,r,h),h=h.sibling}function zd(a,r,h){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Xa,h)}catch{}switch(h.tag){case 26:fn||Bi(h,r),Ma(a,r,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:fn||Bi(h,r);var d=We,v=Wi;Lc(h.type)&&(We=h.stateNode,Wi=!1),Ma(a,r,h),$p(h.stateNode),We=d,Wi=v;break;case 5:fn||Bi(h,r);case 6:if(d=We,v=Wi,We=null,Ma(a,r,h),We=d,Wi=v,We!==null)if(Wi)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(h.stateNode)}catch(S){He(h,r,S)}else try{We.removeChild(h.stateNode)}catch(S){He(h,r,S)}break;case 18:We!==null&&(Wi?(a=We,s4(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),Qd(a)):s4(We,h.stateNode));break;case 4:d=We,v=Wi,We=h.stateNode.containerInfo,Wi=!0,Ma(a,r,h),We=d,Wi=v;break;case 0:case 11:case 14:case 15:zi(2,h,r),fn||zi(4,h,r),Ma(a,r,h);break;case 1:fn||(Bi(h,r),d=h.stateNode,typeof d.componentWillUnmount=="function"&&Ci(h,r,d)),Ma(a,r,h);break;case 21:Ma(a,r,h);break;case 22:fn=(d=fn)||h.memoizedState!==null,Ma(a,r,h),fn=d;break;default:Ma(a,r,h)}}function vo(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Qd(a)}catch(h){He(r,r.return,h)}}}function Cc(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Qd(a)}catch(h){He(r,r.return,h)}}function Qp(a){switch(a.tag){case 31:case 13:case 19:var r=a.stateNode;return r===null&&(r=a.stateNode=new q_),r;case 22:return a=a.stateNode,r=a._retryCache,r===null&&(r=a._retryCache=new q_),r;default:throw Error(i(435,a.tag))}}function xl(a,r){var h=Qp(a);r.forEach(function(d){if(!h.has(d)){h.add(d);var v=y.bind(null,a,d);d.then(v,v)}})}function gi(a,r){var h=r.deletions;if(h!==null)for(var d=0;d<h.length;d++){var v=h[d],S=a,N=r,V=N;t:for(;V!==null;){switch(V.tag){case 27:if(Lc(V.type)){We=V.stateNode,Wi=!1;break t}break;case 5:We=V.stateNode,Wi=!1;break t;case 3:case 4:We=V.stateNode.containerInfo,Wi=!0;break t}V=V.return}if(We===null)throw Error(i(160));zd(S,N,v),We=null,Wi=!1,S=v.alternate,S!==null&&(S.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Ao(r,a),r=r.sibling}var La=null;function Ao(a,r){var h=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:gi(r,a),_i(a),d&4&&(zi(3,a,a.return),Ia(3,a),zi(5,a,a.return));break;case 1:gi(r,a),_i(a),d&512&&(fn||h===null||Bi(h,h.return)),d&64&&Oa&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?d:h.concat(d))));break;case 26:var v=La;if(gi(r,a),_i(a),d&512&&(fn||h===null||Bi(h,h.return)),d&4){var S=h!==null?h.memoizedState:null;if(d=a.memoizedState,h===null)if(d===null)if(a.stateNode===null){t:{d=a.type,h=a.memoizedProps,v=v.ownerDocument||v;e:switch(d){case"title":S=v.getElementsByTagName("title")[0],(!S||S[ea]||S[gn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=v.createElement(d),v.head.insertBefore(S,v.querySelector("head > title"))),Rs(S,d,h),S[gn]=a,On(S),d=S;break t;case"link":var N=p4("link","href",v).get(d+(h.href||""));if(N){for(var V=0;V<N.length;V++)if(S=N[V],S.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&S.getAttribute("rel")===(h.rel==null?null:h.rel)&&S.getAttribute("title")===(h.title==null?null:h.title)&&S.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){N.splice(V,1);break e}}S=v.createElement(d),Rs(S,d,h),v.head.appendChild(S);break;case"meta":if(N=p4("meta","content",v).get(d+(h.content||""))){for(V=0;V<N.length;V++)if(S=N[V],S.getAttribute("content")===(h.content==null?null:""+h.content)&&S.getAttribute("name")===(h.name==null?null:h.name)&&S.getAttribute("property")===(h.property==null?null:h.property)&&S.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&S.getAttribute("charset")===(h.charSet==null?null:h.charSet)){N.splice(V,1);break e}}S=v.createElement(d),Rs(S,d,h),v.head.appendChild(S);break;default:throw Error(i(468,d))}S[gn]=a,On(S),d=S}a.stateNode=d}else g4(v,a.type,a.stateNode);else a.stateNode=m4(v,d,a.memoizedProps);else S!==d?(S===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):S.count--,d===null?g4(v,a.type,a.stateNode):m4(v,d,a.memoizedProps)):d===null&&a.stateNode!==null&&pi(a,a.memoizedProps,h.memoizedProps)}break;case 27:gi(r,a),_i(a),d&512&&(fn||h===null||Bi(h,h.return)),h!==null&&d&4&&pi(a,a.memoizedProps,h.memoizedProps);break;case 5:if(gi(r,a),_i(a),d&512&&(fn||h===null||Bi(h,h.return)),a.flags&32){v=a.stateNode;try{aa(v,"")}catch(Ft){He(a,a.return,Ft)}}d&4&&a.stateNode!=null&&(v=a.memoizedProps,pi(a,v,h!==null?h.memoizedProps:v)),d&1024&&(lr=!0);break;case 6:if(gi(r,a),_i(a),d&4){if(a.stateNode===null)throw Error(i(162));d=a.memoizedProps,h=a.stateNode;try{h.nodeValue=d}catch(Ft){He(a,a.return,Ft)}}break;case 3:if(W_=null,v=La,La=X_(r.containerInfo),gi(r,a),La=v,_i(a),d&4&&h!==null&&h.memoizedState.isDehydrated)try{Qd(r.containerInfo)}catch(Ft){He(a,a.return,Ft)}lr&&(lr=!1,Bd(a));break;case 4:d=La,La=X_(a.stateNode.containerInfo),gi(r,a),_i(a),La=d;break;case 12:gi(r,a),_i(a);break;case 31:gi(r,a),_i(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,xl(a,d)));break;case 13:gi(r,a),_i(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Rc=Hn()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,xl(a,d)));break;case 22:v=a.memoizedState!==null;var W=h!==null&&h.memoizedState!==null,ot=Oa,_t=fn;if(Oa=ot||v,fn=_t||W,gi(r,a),fn=_t,Oa=ot,_i(a),d&8192)t:for(r=a.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(h===null||W||Oa||fn||Qr(a)),h=null,r=a;;){if(r.tag===5||r.tag===26){if(h===null){W=h=r;try{if(S=W.stateNode,v)N=S.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{V=W.stateNode;var Tt=W.memoizedProps.style,ct=Tt!=null&&Tt.hasOwnProperty("display")?Tt.display:null;V.style.display=ct==null||typeof ct=="boolean"?"":(""+ct).trim()}}catch(Ft){He(W,W.return,Ft)}}}else if(r.tag===6){if(h===null){W=r;try{W.stateNode.nodeValue=v?"":W.memoizedProps}catch(Ft){He(W,W.return,Ft)}}}else if(r.tag===18){if(h===null){W=r;try{var gt=W.stateNode;v?a4(gt,!0):a4(W.stateNode,!1)}catch(Ft){He(W,W.return,Ft)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===a)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break t;for(;r.sibling===null;){if(r.return===null||r.return===a)break t;h===r&&(h=null),r=r.return}h===r&&(h=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=a.updateQueue,d!==null&&(h=d.retryQueue,h!==null&&(d.retryQueue=null,xl(a,h))));break;case 19:gi(r,a),_i(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,xl(a,d)));break;case 30:break;case 21:break;default:gi(r,a),_i(a)}}function _i(a){var r=a.flags;if(r&2){try{for(var h,d=a.return;d!==null;){if(Cn(d)){h=d;break}d=d.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var v=h.stateNode,S=Re(a);Es(a,S,v);break;case 5:var N=h.stateNode;h.flags&32&&(aa(N,""),h.flags&=-33);var V=Re(a);Es(a,V,N);break;case 3:case 4:var W=h.stateNode.containerInfo,ot=Re(a);Yr(a,ot,W);break;default:throw Error(i(161))}}catch(_t){He(a,a.return,_t)}a.flags&=-3}r&4096&&(a.flags&=-4097)}function Bd(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var r=a;Bd(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),a=a.sibling}}function Va(a,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Rn(a,r.alternate,r),r=r.sibling}function Qr(a){for(a=a.child;a!==null;){var r=a;switch(r.tag){case 0:case 11:case 14:case 15:zi(4,r,r.return),Qr(r);break;case 1:Bi(r,r.return);var h=r.stateNode;typeof h.componentWillUnmount=="function"&&Ci(r,r.return,h),Qr(r);break;case 27:$p(r.stateNode);case 26:case 5:Bi(r,r.return),Qr(r);break;case 22:r.memoizedState===null&&Qr(r);break;case 30:Qr(r);break;default:Qr(r)}a=a.sibling}}function Ss(a,r,h){for(h=h&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,v=a,S=r,N=S.flags;switch(S.tag){case 0:case 11:case 15:Ss(v,S,h),Ia(4,S);break;case 1:if(Ss(v,S,h),d=S,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ot){He(d,d.return,ot)}if(d=S,v=d.updateQueue,v!==null){var V=d.stateNode;try{var W=v.shared.hiddenCallbacks;if(W!==null)for(v.shared.hiddenCallbacks=null,v=0;v<W.length;v++)vc(W[v],V)}catch(ot){He(d,d.return,ot)}}h&&N&64&&rr(S),wl(S,S.return);break;case 27:Ud(S);case 26:case 5:Ss(v,S,h),h&&d===null&&N&4&&df(S),wl(S,S.return);break;case 12:Ss(v,S,h);break;case 31:Ss(v,S,h),h&&N&4&&vo(v,S);break;case 13:Ss(v,S,h),h&&N&4&&Cc(v,S);break;case 22:S.memoizedState===null&&Ss(v,S,h),wl(S,S.return);break;case 30:break;default:Ss(v,S,h)}r=r.sibling}}function Eo(a,r){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&Zo(h))}function fu(a,r){a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&Zo(a))}function ji(a,r,h,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Xp(a,r,h,d),r=r.sibling}function Xp(a,r,h,d){var v=r.flags;switch(r.tag){case 0:case 11:case 15:ji(a,r,h,d),v&2048&&Ia(9,r);break;case 1:ji(a,r,h,d);break;case 3:ji(a,r,h,d),v&2048&&(a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&Zo(a)));break;case 12:if(v&2048){ji(a,r,h,d),a=r.stateNode;try{var S=r.memoizedProps,N=S.id,V=S.onPostCommit;typeof V=="function"&&V(N,r.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(W){He(r,r.return,W)}}else ji(a,r,h,d);break;case 31:ji(a,r,h,d);break;case 13:ji(a,r,h,d);break;case 23:break;case 22:S=r.stateNode,N=r.alternate,r.memoizedState!==null?S._visibility&2?ji(a,r,h,d):Xr(a,r):S._visibility&2?ji(a,r,h,d):(S._visibility|=2,Hi(a,r,h,d,(r.subtreeFlags&10256)!==0||!1)),v&2048&&Eo(N,r);break;case 24:ji(a,r,h,d),v&2048&&fu(r.alternate,r);break;default:ji(a,r,h,d)}}function Hi(a,r,h,d,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var S=a,N=r,V=h,W=d,ot=N.flags;switch(N.tag){case 0:case 11:case 15:Hi(S,N,V,W,v),Ia(8,N);break;case 23:break;case 22:var _t=N.stateNode;N.memoizedState!==null?_t._visibility&2?Hi(S,N,V,W,v):Xr(S,N):(_t._visibility|=2,Hi(S,N,V,W,v)),v&&ot&2048&&Eo(N.alternate,N);break;case 24:Hi(S,N,V,W,v),v&&ot&2048&&fu(N.alternate,N);break;default:Hi(S,N,V,W,v)}r=r.sibling}}function Xr(a,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var h=a,d=r,v=d.flags;switch(d.tag){case 22:Xr(h,d),v&2048&&Eo(d.alternate,d);break;case 24:Xr(h,d),v&2048&&fu(d.alternate,d);break;default:Xr(h,d)}r=r.sibling}}var du=8192;function fa(a,r,h){if(a.subtreeFlags&du)for(a=a.child;a!==null;)jd(a,r,h),a=a.sibling}function jd(a,r,h){switch(a.tag){case 26:fa(a,r,h),a.flags&du&&a.memoizedState!==null&&SR(h,La,a.memoizedState,a.memoizedProps);break;case 5:fa(a,r,h);break;case 3:case 4:var d=La;La=X_(a.stateNode.containerInfo),fa(a,r,h),La=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=du,du=16777216,fa(a,r,h),du=d):fa(a,r,h));break;default:fa(a,r,h)}}function mu(a){var r=a.alternate;if(r!==null&&(a=r.child,a!==null)){r.child=null;do r=a.sibling,a.sibling=null,a=r;while(a!==null)}}function So(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var h=0;h<r.length;h++){var d=r[h];Ri=d,qn(d,a)}mu(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Gs(a),a=a.sibling}function Gs(a){switch(a.tag){case 0:case 11:case 15:So(a),a.flags&2048&&zi(9,a,a.return);break;case 3:So(a);break;case 12:So(a);break;case 22:var r=a.stateNode;a.memoizedState!==null&&r._visibility&2&&(a.return===null||a.return.tag!==13)?(r._visibility&=-3,Ts(a)):So(a);break;default:So(a)}}function Ts(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var h=0;h<r.length;h++){var d=r[h];Ri=d,qn(d,a)}mu(a)}for(a=a.child;a!==null;){switch(r=a,r.tag){case 0:case 11:case 15:zi(8,r,r.return),Ts(r);break;case 22:h=r.stateNode,h._visibility&2&&(h._visibility&=-3,Ts(r));break;default:Ts(r)}a=a.sibling}}function qn(a,r){for(;Ri!==null;){var h=Ri;switch(h.tag){case 0:case 11:case 15:zi(8,h,r);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var d=h.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Zo(h.memoizedState.cache)}if(d=h.child,d!==null)d.return=h,Ri=d;else t:for(h=a;Ri!==null;){d=Ri;var v=d.sibling,S=d.return;if(mf(d),d===h){Ri=null;break t}if(v!==null){v.return=S,Ri=v;break t}Ri=S}}}var Nl={getCacheForType:function(a){var r=se(ai),h=r.data.get(a);return h===void 0&&(h=a(),r.data.set(a,h)),h},cacheSignal:function(){return se(ai).controller.signal}},de=typeof WeakMap=="function"?WeakMap:Map,Kt=0,le=null,Ae=null,_e=0,Ve=0,Ji=null,ka=!1,or=!1,Kp=!1,da=0,kn=0,Kr=0,To=0,pf=0,bs=0,yn=0,pu=null,Fn=null,Yn=!1,Rc=0,Wp=0,Zn=1/0,Pn=null,$n=null,Je=0,ma=null,wc=null,Pa=0,xc=0,Nc=null,gf=null,bo=0,gu=null;function pa(){return(Kt&2)!==0&&_e!==0?_e&-_e:et.T!==null?dt():Ja()}function Te(){if(bs===0)if((_e&536870912)===0||De){var a=ui;ui<<=1,(ui&3932160)===0&&(ui=262144),bs=a}else bs=536870912;return a=zs.current,a!==null&&(a.flags|=32),bs}function Ee(a,r,h){(a===le&&(Ve===2||Ve===9)||a.cancelPendingCommit!==null)&&(Ro(a,0),li(a,_e,bs,!1)),sl(a,h),((Kt&2)===0||a!==le)&&(a===le&&((Kt&2)===0&&(To|=h),kn===4&&li(a,_e,bs,!1)),xt(a))}function be(a,r,h){if((Kt&6)!==0)throw Error(i(327));var d=!h&&(r&127)===0&&(r&a.expiredLanes)===0||il(a,r),v=d?_f(a,r):Cs(a,r,!0),S=d;do{if(v===0){or&&!d&&li(a,r,0,!1);break}else{if(h=a.current.alternate,S&&!Ze(h)){v=Cs(a,r,!1),S=!1;continue}if(v===2){if(S=r,a.errorRecoveryDisabledLanes&S)var N=0;else N=a.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){r=N;t:{var V=a;v=pu;var W=V.current.memoizedState.isDehydrated;if(W&&(Ro(V,N).flags|=256),N=Cs(V,N,!1),N!==2){if(Kp&&!W){V.errorRecoveryDisabledLanes|=S,To|=S,v=4;break t}S=Fn,Fn=v,S!==null&&(Fn===null?Fn=S:Fn.push.apply(Fn,S))}v=N}if(S=!1,v!==2)continue}}if(v===1){Ro(a,0),li(a,r,0,!0);break}t:{switch(d=a,S=v,S){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:li(d,r,bs,!ka);break t;case 2:Fn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(v=Rc+300-Hn(),10<v)){if(li(d,r,bs,!ka),cs(d,0,!0)!==0)break t;Pa=r,d.timeoutHandle=n4(we.bind(null,d,h,Fn,Pn,Yn,r,bs,To,yn,ka,S,"Throttled",-0,0),v);break t}we(d,h,Fn,Pn,Yn,r,bs,To,yn,ka,S,null,-0,0)}}break}while(!0);xt(a)}function we(a,r,h,d,v,S,N,V,W,ot,_t,Tt,ct,gt){if(a.timeoutHandle=-1,Tt=r.subtreeFlags,Tt&8192||(Tt&16785408)===16785408){Tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ai},jd(r,S,Tt);var Ft=(S&62914560)===S?Rc-Hn():(S&4194048)===S?Wp-Hn():0;if(Ft=TR(Tt,Ft),Ft!==null){Pa=S,a.cancelPendingCommit=Ft(Il.bind(null,a,r,S,h,d,v,N,V,W,_t,Tt,null,ct,gt)),li(a,S,N,!ot);return}}Il(a,r,S,h,d,v,N,V,W)}function Ze(a){for(var r=a;;){var h=r.tag;if((h===0||h===11||h===15)&&r.flags&16384&&(h=r.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var d=0;d<h.length;d++){var v=h[d],S=v.getSnapshot;v=v.value;try{if(!_s(S(),v))return!1}catch{return!1}}if(h=r.child,r.subtreeFlags&16384&&h!==null)h.return=r,r=h;else{if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function li(a,r,h,d){r&=~pf,r&=~To,a.suspendedLanes|=r,a.pingedLanes&=~r,d&&(a.warmLanes|=r),d=a.expirationTimes;for(var v=r;0<v;){var S=31-Ht(v),N=1<<S;d[S]=-1,v&=~N}h!==0&&al(a,h,r)}function ur(){return(Kt&6)===0?(zt(0),!1):!0}function Co(){if(Ae!==null){if(Ve===0)var a=Ae.return;else a=Ae,zr=co=null,vp(a),iu=null,su=0,a=Ae;for(;a!==null;)ha(a.alternate,a),a=a.return;Ae=null}}function Ro(a,r){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,aR(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),Pa=0,Co(),le=a,Ae=h=ks(a.current,null),_e=r,Ve=0,Ji=null,ka=!1,or=il(a,r),Kp=!1,yn=bs=pf=To=Kr=kn=0,Fn=pu=null,Yn=!1,(r&8)!==0&&(r|=r&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=r;0<d;){var v=31-Ht(d),S=1<<v;r|=a[v],d&=~S}return da=r,Kh(),h}function Wr(a,r){fe=null,et.H=Tc,r===$o||r===ve?(r=eu(),Ve=3):r===$h?(r=eu(),Ve=4):Ve=r===Nd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ji=r,Ae===null&&(kn=1,xd(a,la(r,a.current)))}function Un(){var a=zs.current;return a===null?!0:(_e&4194048)===_e?As===null:(_e&62914560)===_e||(_e&536870912)!==0?a===As:!1}function Dl(){var a=et.H;return et.H=Tc,a===null?Tc:a}function wo(){var a=et.A;return et.A=Nl,a}function Dc(){kn=4,ka||(_e&4194048)!==_e&&zs.current!==null||(or=!0),(Kr&134217727)===0&&(To&134217727)===0||le===null||li(le,_e,bs,!1)}function Cs(a,r,h){var d=Kt;Kt|=2;var v=Dl(),S=wo();(le!==a||_e!==r)&&(Pn=null,Ro(a,r)),r=!1;var N=kn;t:do try{if(Ve!==0&&Ae!==null){var V=Ae,W=Ji;switch(Ve){case 8:Co(),N=6;break t;case 3:case 2:case 9:case 6:zs.current===null&&(r=!0);var ot=Ve;if(Ve=0,Ji=null,_u(a,V,W,ot),h&&or){N=0;break t}break;default:ot=Ve,Ve=0,Ji=null,_u(a,V,W,ot)}}Ic(),N=kn;break}catch(_t){Wr(a,_t)}while(!0);return r&&a.shellSuspendCounter++,zr=co=null,Kt=d,et.H=v,et.A=S,Ae===null&&(le=null,_e=0,Kh()),N}function Ic(){for(;Ae!==null;)Hd(Ae)}function _f(a,r){var h=Kt;Kt|=2;var d=Dl(),v=wo();le!==a||_e!==r?(Pn=null,Zn=Hn()+500,Ro(a,r)):or=il(a,r);t:do try{if(Ve!==0&&Ae!==null){r=Ae;var S=Ji;e:switch(Ve){case 1:Ve=0,Ji=null,_u(a,r,S,1);break;case 2:case 9:if(Us(S)){Ve=0,Ji=null,yf(r);break}r=function(){Ve!==2&&Ve!==9||le!==a||(Ve=7),xt(a)},S.then(r,r);break t;case 3:Ve=7;break t;case 4:Ve=5;break t;case 7:Us(S)?(Ve=0,Ji=null,yf(r)):(Ve=0,Ji=null,_u(a,r,S,7));break;case 5:var N=null;switch(Ae.tag){case 26:N=Ae.memoizedState;case 5:case 27:var V=Ae;if(N?_4(N):V.stateNode.complete){Ve=0,Ji=null;var W=V.sibling;if(W!==null)Ae=W;else{var ot=V.return;ot!==null?(Ae=ot,xo(ot)):Ae=null}break e}}Ve=0,Ji=null,_u(a,r,S,5);break;case 6:Ve=0,Ji=null,_u(a,r,S,6);break;case 8:Co(),kn=6;break t;default:throw Error(i(462))}}qs();break}catch(_t){Wr(a,_t)}while(!0);return zr=co=null,et.H=d,et.A=v,Kt=h,Ae!==null?0:(le=null,_e=0,Kh(),kn)}function qs(){for(;Ae!==null&&!Qa();)Hd(Ae)}function Hd(a){var r=Pd(a.alternate,a,da);a.memoizedProps=a.pendingProps,r===null?xo(a):Ae=r}function yf(a){var r=a,h=r.alternate;switch(r.tag){case 15:case 0:r=uf(h,r,r.pendingProps,r.type,void 0,_e);break;case 11:r=uf(h,r,r.pendingProps,r.type.render,r.ref,_e);break;case 5:vp(r);default:ha(h,r),r=Ae=uc(r,da),r=Pd(h,r,da)}a.memoizedProps=a.pendingProps,r===null?xo(a):Ae=r}function _u(a,r,h,d){zr=co=null,vp(r),iu=null,su=0;var v=r.return;try{if(mi(a,v,r,h,_e)){kn=1,xd(a,la(h,a.current)),Ae=null;return}}catch(S){if(v!==null)throw Ae=v,S;kn=1,xd(a,la(h,a.current)),Ae=null;return}r.flags&32768?(De||d===1?a=!0:or||(_e&536870912)!==0?a=!1:(ka=a=!0,(d===2||d===9||d===3||d===6)&&(d=zs.current,d!==null&&d.tag===13&&(d.flags|=16384))),vf(r,a)):xo(r)}function xo(a){var r=a;do{if((r.flags&32768)!==0){vf(r,ka);return}a=r.return;var h=ff(r.alternate,r,da);if(h!==null){Ae=h;return}if(r=r.sibling,r!==null){Ae=r;return}Ae=r=a}while(r!==null);kn===0&&(kn=5)}function vf(a,r){do{var h=Da(a.alternate,a);if(h!==null){h.flags&=32767,Ae=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!r&&(a=a.sibling,a!==null)){Ae=a;return}Ae=a=h}while(a!==null);kn=6,Ae=null}function Il(a,r,h,d,v,S,N,V,W){a.cancelPendingCommit=null;do Oc();while(Je!==0);if((Kt&6)!==0)throw Error(i(327));if(r!==null){if(r===a.current)throw Error(i(177));if(S=r.lanes|r.childLanes,S|=Si,ii(a,h,S,N,V,W),a===le&&(Ae=le=null,_e=0),wc=r,ma=a,Pa=h,xc=S,Nc=v,gf=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,b(Is,function(){return Gd(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=et.T,et.T=null,v=vt.p,vt.p=2,N=Kt,Kt|=4;try{wv(a,r,h)}finally{Kt=N,vt.p=v,et.T=d}}Je=1,oi(),Ol(),yu()}}function oi(){if(Je===1){Je=0;var a=ma,r=wc,h=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||h){h=et.T,et.T=null;var d=vt.p;vt.p=2;var v=Kt;Kt|=4;try{Ao(r,a);var S=Lv,N=Y0(a.containerInfo),V=S.focusedElem,W=S.selectionRange;if(N!==V&&V&&V.ownerDocument&&cn(V.ownerDocument.documentElement,V)){if(W!==null&&ep(V)){var ot=W.start,_t=W.end;if(_t===void 0&&(_t=ot),"selectionStart"in V)V.selectionStart=ot,V.selectionEnd=Math.min(_t,V.value.length);else{var Tt=V.ownerDocument||document,ct=Tt&&Tt.defaultView||window;if(ct.getSelection){var gt=ct.getSelection(),Ft=V.textContent.length,ne=Math.min(W.start,Ft),mn=W.end===void 0?ne:Math.min(W.end,Ft);!gt.extend&&ne>mn&&(N=mn,mn=ne,ne=N);var it=rc(V,ne),tt=rc(V,mn);if(it&&tt&&(gt.rangeCount!==1||gt.anchorNode!==it.node||gt.anchorOffset!==it.offset||gt.focusNode!==tt.node||gt.focusOffset!==tt.offset)){var lt=Tt.createRange();lt.setStart(it.node,it.offset),gt.removeAllRanges(),ne>mn?(gt.addRange(lt),gt.extend(tt.node,tt.offset)):(lt.setEnd(tt.node,tt.offset),gt.addRange(lt))}}}}for(Tt=[],gt=V;gt=gt.parentNode;)gt.nodeType===1&&Tt.push({element:gt,left:gt.scrollLeft,top:gt.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<Tt.length;V++){var At=Tt[V];At.element.scrollLeft=At.left,At.element.scrollTop=At.top}}ty=!!Mv,Lv=Mv=null}finally{Kt=v,vt.p=d,et.T=h}}a.current=r,Je=2}}function Ol(){if(Je===2){Je=0;var a=ma,r=wc,h=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||h){h=et.T,et.T=null;var d=vt.p;vt.p=2;var v=Kt;Kt|=4;try{Rn(a,r.alternate,r)}finally{Kt=v,vt.p=d,et.T=h}}Je=3}}function yu(){if(Je===4||Je===3){Je=0,Dn();var a=ma,r=wc,h=Pa,d=gf;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Je=5:(Je=0,wc=ma=null,Jr(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&($n=null),Wl(h),r=r.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Xa,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=et.T,v=vt.p,vt.p=2,et.T=null;try{for(var S=a.onRecoverableError,N=0;N<d.length;N++){var V=d[N];S(V.value,{componentStack:V.stack})}}finally{et.T=r,vt.p=v}}(Pa&3)!==0&&Oc(),xt(a),v=a.pendingLanes,(h&261930)!==0&&(v&42)!==0?a===gu?bo++:(bo=0,gu=a):bo=0,zt(0)}}function Jr(a,r){(a.pooledCacheLanes&=r)===0&&(r=a.pooledCache,r!=null&&(a.pooledCache=null,Zo(r)))}function Oc(){return oi(),Ol(),yu(),Gd()}function Gd(){if(Je!==5)return!1;var a=ma,r=xc;xc=0;var h=Wl(Pa),d=et.T,v=vt.p;try{vt.p=32>h?32:h,et.T=null,h=Nc,Nc=null;var S=ma,N=Pa;if(Je=0,wc=ma=null,Pa=0,(Kt&6)!==0)throw Error(i(331));var V=Kt;if(Kt|=4,Gs(S.current),Xp(S,S.current,N,h),Kt=V,zt(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Xa,S)}catch{}return!0}finally{vt.p=v,et.T=d,Jr(a,r)}}function Jp(a,r,h){r=la(h,r),r=jp(a.stateNode,r,2),a=mo(a,r,2),a!==null&&(sl(a,2),xt(a))}function He(a,r,h){if(a.tag===3)Jp(a,a,h);else for(;r!==null;){if(r.tag===3){Jp(r,a,h);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&($n===null||!$n.has(d))){a=la(h,a),h=Hp(2),d=mo(r,h,2),d!==null&&(z_(h,d,r,a),sl(d,2),xt(d));break}}r=r.return}}function Af(a,r,h){var d=a.pingCache;if(d===null){d=a.pingCache=new de;var v=new Set;d.set(r,v)}else v=d.get(r),v===void 0&&(v=new Set,d.set(r,v));v.has(h)||(Kp=!0,v.add(h),a=o.bind(null,a,r,h),r.then(a,a))}function o(a,r,h){var d=a.pingCache;d!==null&&d.delete(r),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,le===a&&(_e&h)===h&&(kn===4||kn===3&&(_e&62914560)===_e&&300>Hn()-Rc?(Kt&2)===0&&Ro(a,0):pf|=h,yn===_e&&(yn=0)),xt(a)}function u(a,r){r===0&&(r=Ka()),a=ys(a,r),a!==null&&(sl(a,r),xt(a))}function p(a){var r=a.memoizedState,h=0;r!==null&&(h=r.retryLane),u(a,h)}function y(a,r){var h=0;switch(a.tag){case 31:case 13:var d=a.stateNode,v=a.memoizedState;v!==null&&(h=v.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(r),u(a,h)}function b(a,r){return Ds(a,r)}var C=null,O=null,J=!1,mt=!1,Ct=!1,Lt=0;function xt(a){a!==O&&a.next===null&&(O===null?C=O=a:O=O.next=a),mt=!0,J||(J=!0,at())}function zt(a,r){if(!Ct&&mt){Ct=!0;do for(var h=!1,d=C;d!==null;){if(a!==0){var v=d.pendingLanes;if(v===0)var S=0;else{var N=d.suspendedLanes,V=d.pingedLanes;S=(1<<31-Ht(42|a)+1)-1,S&=v&~(N&~V),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(h=!0,ut(d,S))}else S=_e,S=cs(d,d===le?S:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(S&3)===0||il(d,S)||(h=!0,ut(d,S));d=d.next}while(h);Ct=!1}}function ue(){wi()}function wi(){mt=J=!1;var a=0;Lt!==0&&sR()&&(a=Lt);for(var r=Hn(),h=null,d=C;d!==null;){var v=d.next,S=Mc(d,r);S===0?(d.next=null,h===null?C=v:h.next=v,v===null&&(O=h)):(h=d,(a!==0||(S&3)!==0)&&(mt=!0)),d=v}Je!==0&&Je!==5||zt(a),Lt!==0&&(Lt=0)}function Mc(a,r){for(var h=a.suspendedLanes,d=a.pingedLanes,v=a.expirationTimes,S=a.pendingLanes&-62914561;0<S;){var N=31-Ht(S),V=1<<N,W=v[N];W===-1?((V&h)===0||(V&d)!==0)&&(v[N]=jo(V,r)):W<=r&&(a.expiredLanes|=V),S&=~V}if(r=le,h=_e,h=cs(a,a===r?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,h===0||a===r&&(Ve===2||Ve===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Ya(d),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||il(a,h)){if(r=h&-h,r===a.callbackPriority)return r;switch(d!==null&&Ya(d),Wl(h)){case 2:case 8:h=Sn;break;case 32:h=Is;break;case 268435456:h=Os;break;default:h=Is}return d=No.bind(null,a),h=Ds(h,d),a.callbackPriority=r,a.callbackNode=h,r}return d!==null&&d!==null&&Ya(d),a.callbackPriority=2,a.callbackNode=null,2}function No(a,r){if(Je!==0&&Je!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(Oc()&&a.callbackNode!==h)return null;var d=_e;return d=cs(a,a===le?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(be(a,d,r),Mc(a,Hn()),a.callbackNode!=null&&a.callbackNode===h?No.bind(null,a):null)}function ut(a,r){if(Oc())return null;be(a,r,!0)}function at(){rR(function(){(Kt&6)!==0?Ds(In,ue):wi()})}function dt(){if(Lt===0){var a=El;a===0&&(a=ta,ta<<=1,(ta&261888)===0&&(ta=256)),Lt=a}return Lt}function Dt(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:er(""+a)}function te(a,r){var h=r.ownerDocument.createElement("input");return h.name=r.name,h.value=r.value,a.id&&h.setAttribute("form",a.id),r.parentNode.insertBefore(h,r),a=new FormData(a),h.parentNode.removeChild(h),a}function zn(a,r,h,d,v){if(r==="submit"&&h&&h.stateNode===v){var S=Dt((v[ci]||null).action),N=d.submitter;N&&(r=(r=N[ci]||null)?Dt(r.formAction):N.getAttribute("formAction"),r!==null&&(S=r,N=null));var V=new no("action","action",null,d,v);a.push({event:V,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Lt!==0){var W=N?te(v,N):new FormData(v);Mp(h,{pending:!0,data:W,method:v.method,action:S},null,W)}}else typeof S=="function"&&(V.preventDefault(),W=N?te(v,N):new FormData(v),Mp(h,{pending:!0,data:W,method:v.method,action:S},S,W))},currentTarget:v}]})}}for(var ee=0;ee<Qh.length;ee++){var Ue=Qh[ee],xi=Ue.toLowerCase(),Fe=Ue[0].toUpperCase()+Ue.slice(1);Ta(xi,"on"+Fe)}Ta(nd,"onAnimationEnd"),Ta(Yh,"onAnimationIteration"),Ta(ip,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(X0,"onTransitionRun"),Ta(vv,"onTransitionStart"),Ta(K0,"onTransitionCancel"),Ta(sp,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ua));function XS(a,r){r=(r&4)!==0;for(var h=0;h<a.length;h++){var d=a[h],v=d.event;d=d.listeners;t:{var S=void 0;if(r)for(var N=d.length-1;0<=N;N--){var V=d[N],W=V.instance,ot=V.currentTarget;if(V=V.listener,W!==S&&v.isPropagationStopped())break t;S=V,v.currentTarget=ot;try{S(v)}catch(_t){Xh(_t)}v.currentTarget=null,S=W}else for(N=0;N<d.length;N++){if(V=d[N],W=V.instance,ot=V.currentTarget,V=V.listener,W!==S&&v.isPropagationStopped())break t;S=V,v.currentTarget=ot;try{S(v)}catch(_t){Xh(_t)}v.currentTarget=null,S=W}}}}function ke(a,r){var h=r[hs];h===void 0&&(h=r[hs]=new Set);var d=a+"__bubble";h.has(d)||(KS(r,a,2,!1),h.add(d))}function Nv(a,r,h){var d=0;r&&(d|=4),KS(h,a,d,r)}var F_="_reactListening"+Math.random().toString(36).slice(2);function Dv(a){if(!a[F_]){a[F_]=!0,ia.forEach(function(h){h!=="selectionchange"&&(xv.has(h)||Nv(h,!1,a),Nv(h,!0,a))});var r=a.nodeType===9?a:a.ownerDocument;r===null||r[F_]||(r[F_]=!0,Nv("selectionchange",!1,r))}}function KS(a,r,h,d){switch(b4(r)){case 2:var v=RR;break;case 8:v=wR;break;default:v=Fv}h=v.bind(null,r,h,a),v=void 0,!Ih||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),d?v!==void 0?a.addEventListener(r,h,{capture:!0,passive:v}):a.addEventListener(r,h,!0):v!==void 0?a.addEventListener(r,h,{passive:v}):a.addEventListener(r,h,!1)}function Iv(a,r,h,d,v){var S=d;if((r&1)===0&&(r&2)===0&&d!==null)t:for(;;){if(d===null)return;var N=d.tag;if(N===3||N===4){var V=d.stateNode.containerInfo;if(V===v)break;if(N===4)for(N=d.return;N!==null;){var W=N.tag;if((W===3||W===4)&&N.stateNode.containerInfo===v)return;N=N.return}for(;V!==null;){if(N=Ar(V),N===null)return;if(W=N.tag,W===5||W===6||W===26||W===27){d=S=N;continue t}V=V.parentNode}}d=d.return}Dh(function(){var ot=S,_t=qo(h),Tt=[];t:{var ct=Sa.get(a);if(ct!==void 0){var gt=no,Ft=a;switch(a){case"keypress":if(eo(h)===0)break t;case"keydown":case"keyup":gt=Nr;break;case"focusin":Ft="focus",gt=fl;break;case"focusout":Ft="blur",gt=fl;break;case"beforeblur":case"afterblur":gt=fl;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=Mh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=Lh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=Uh;break;case nd:case Yh:case ip:gt=Ju;break;case sp:gt=ic;break;case"scroll":case"scrollend":gt=Oh;break;case"wheel":gt=Bh;break;case"copy":case"cut":case"paste":gt=kh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=ec;break;case"toggle":case"beforetoggle":gt=ml}var ne=(r&4)!==0,mn=!ne&&(a==="scroll"||a==="scrollend"),it=ne?ct!==null?ct+"Capture":null:ct;ne=[];for(var tt=ot,lt;tt!==null;){var At=tt;if(lt=At.stateNode,At=At.tag,At!==5&&At!==26&&At!==27||lt===null||it===null||(At=ps(tt,it),At!=null&&ne.push(Zp(tt,At,lt))),mn)break;tt=tt.return}0<ne.length&&(ct=new gt(ct,Ft,null,h,_t),Tt.push({event:ct,listeners:ne}))}}if((r&7)===0){t:{if(ct=a==="mouseover"||a==="pointerover",gt=a==="mouseout"||a==="pointerout",ct&&h!==Go&&(Ft=h.relatedTarget||h.fromElement)&&(Ar(Ft)||Ft[ga]))break t;if((gt||ct)&&(ct=_t.window===_t?_t:(ct=_t.ownerDocument)?ct.defaultView||ct.parentWindow:window,gt?(Ft=h.relatedTarget||h.toElement,gt=ot,Ft=Ft?Ar(Ft):null,Ft!==null&&(mn=l(Ft),ne=Ft.tag,Ft!==mn||ne!==5&&ne!==27&&ne!==6)&&(Ft=null)):(gt=null,Ft=ot),gt!==Ft)){if(ne=Mh,At="onMouseLeave",it="onMouseEnter",tt="mouse",(a==="pointerout"||a==="pointerover")&&(ne=ec,At="onPointerLeave",it="onPointerEnter",tt="pointer"),mn=gt==null?ct:Zl(gt),lt=Ft==null?ct:Zl(Ft),ct=new ne(At,tt+"leave",gt,h,_t),ct.target=mn,ct.relatedTarget=lt,At=null,Ar(_t)===ot&&(ne=new ne(it,tt+"enter",Ft,h,_t),ne.target=lt,ne.relatedTarget=mn,At=ne),mn=At,gt&&Ft)e:{for(ne=$8,it=gt,tt=Ft,lt=0,At=it;At;At=ne(At))lt++;At=0;for(var $t=tt;$t;$t=ne($t))At++;for(;0<lt-At;)it=ne(it),lt--;for(;0<At-lt;)tt=ne(tt),At--;for(;lt--;){if(it===tt||tt!==null&&it===tt.alternate){ne=it;break e}it=ne(it),tt=ne(tt)}ne=null}else ne=null;gt!==null&&WS(Tt,ct,gt,ne,!1),Ft!==null&&mn!==null&&WS(Tt,mn,Ft,ne,!0)}}t:{if(ct=ot?Zl(ot):window,gt=ct.nodeName&&ct.nodeName.toLowerCase(),gt==="select"||gt==="input"&&ct.type==="file")var Xe=Wm;else if(gs(ct))if(Ir)Xe=F0;else{Xe=$m;var Xt=G0}else gt=ct.nodeName,!gt||gt.toLowerCase()!=="input"||ct.type!=="checkbox"&&ct.type!=="radio"?ot&&Ku(ot.elementType)&&(Xe=Wm):Xe=q0;if(Xe&&(Xe=Xe(a,ot))){pl(Tt,Xe,h,_t);break t}Xt&&Xt(a,ct,ot),a==="focusout"&&ot&&ct.type==="number"&&ot.memoizedProps.value!=null&&Vs(ct,"number",ct.value)}switch(Xt=ot?Zl(ot):window,a){case"focusin":(gs(Xt)||Xt.contentEditable==="true")&&(Or=Xt,Mr=ot,lc=null);break;case"focusout":lc=Mr=Or=null;break;case"mousedown":ed=!0;break;case"contextmenu":case"mouseup":case"dragend":ed=!1,oc(Tt,h,_t);break;case"selectionchange":if(Q0)break;case"keydown":case"keyup":oc(Tt,h,_t)}var Se;if(R)t:{switch(a){case"compositionstart":var ze="onCompositionStart";break t;case"compositionend":ze="onCompositionEnd";break t;case"compositionupdate":ze="onCompositionUpdate";break t}ze=void 0}else ye?qe(a,h)&&(ze="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(ze="onCompositionStart");ze&&(rt&&h.locale!=="ko"&&(ye||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ye&&(Se=ir()):(Ei=_t,Fo="value"in Ei?Ei.value:Ei.textContent,ye=!0)),Xt=Y_(ot,ze),0<Xt.length&&(ze=new Xo(ze,a,null,h,_t),Tt.push({event:ze,listeners:Xt}),Se?ze.data=Se:(Se=Xn(h),Se!==null&&(ze.data=Se)))),(Se=U?fi(a,h):si(a,h))&&(ze=Y_(ot,"onBeforeInput"),0<ze.length&&(Xt=new Xo("onBeforeInput","beforeinput",null,h,_t),Tt.push({event:Xt,listeners:ze}),Xt.data=Se)),zn(Tt,a,ot,h,_t)}XS(Tt,r)})}function Zp(a,r,h){return{instance:a,listener:r,currentTarget:h}}function Y_(a,r){for(var h=r+"Capture",d=[];a!==null;){var v=a,S=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||S===null||(v=ps(a,h),v!=null&&d.unshift(Zp(a,v,S)),v=ps(a,r),v!=null&&d.push(Zp(a,v,S))),a.tag===3)return d;a=a.return}return[]}function $8(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function WS(a,r,h,d,v){for(var S=r._reactName,N=[];h!==null&&h!==d;){var V=h,W=V.alternate,ot=V.stateNode;if(V=V.tag,W!==null&&W===d)break;V!==5&&V!==26&&V!==27||ot===null||(W=ot,v?(ot=ps(h,S),ot!=null&&N.unshift(Zp(h,ot,W))):v||(ot=ps(h,S),ot!=null&&N.push(Zp(h,ot,W)))),h=h.return}N.length!==0&&a.push({event:r,listeners:N})}var tR=/\r\n?/g,eR=/\u0000|\uFFFD/g;function JS(a){return(typeof a=="string"?a:""+a).replace(tR,`
`).replace(eR,"")}function ZS(a,r){return r=JS(r),JS(a)===r}function dn(a,r,h,d,v,S){switch(h){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||aa(a,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&aa(a,""+d);break;case"className":ll(a,"class",d);break;case"tabIndex":ll(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ll(a,h,d);break;case"style":wh(a,d,S);break;case"data":if(r!=="object"){ll(a,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||h!=="href")){a.removeAttribute(h);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=er(""+d),a.setAttribute(h,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(h==="formAction"?(r!=="input"&&dn(a,r,"name",v.name,v,null),dn(a,r,"formEncType",v.formEncType,v,null),dn(a,r,"formMethod",v.formMethod,v,null),dn(a,r,"formTarget",v.formTarget,v,null)):(dn(a,r,"encType",v.encType,v,null),dn(a,r,"method",v.method,v,null),dn(a,r,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=er(""+d),a.setAttribute(h,d);break;case"onClick":d!=null&&(a.onclick=Ai);break;case"onScroll":d!=null&&ke("scroll",a);break;case"onScrollEnd":d!=null&&ke("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(h=d.__html,h!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}h=er(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""+d):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":d===!0?a.setAttribute(h,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,d):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(h,d):a.removeAttribute(h);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(h):a.setAttribute(h,d);break;case"popover":ke("beforetoggle",a),ke("toggle",a),Tr(a,"popover",d);break;case"xlinkActuate":sa(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":sa(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":sa(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":sa(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":sa(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":sa(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":sa(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":sa(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":sa(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Tr(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=td.get(h)||h,Tr(a,h,d))}}function Ov(a,r,h,d,v,S){switch(h){case"style":wh(a,d,S);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(h=d.__html,h!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"children":typeof d=="string"?aa(a,d):(typeof d=="number"||typeof d=="bigint")&&aa(a,""+d);break;case"onScroll":d!=null&&ke("scroll",a);break;case"onScrollEnd":d!=null&&ke("scrollend",a);break;case"onClick":d!=null&&(a.onclick=Ai);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sr.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(v=h.endsWith("Capture"),r=h.slice(2,v?h.length-7:void 0),S=a[ci]||null,S=S!=null?S[h]:null,typeof S=="function"&&a.removeEventListener(r,S,v),typeof d=="function")){typeof S!="function"&&S!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(r,d,v);break t}h in a?a[h]=d:d===!0?a.setAttribute(h,""):Tr(a,h,d)}}}function Rs(a,r,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",a),ke("load",a);var d=!1,v=!1,S;for(S in h)if(h.hasOwnProperty(S)){var N=h[S];if(N!=null)switch(S){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:dn(a,r,S,N,h,null)}}v&&dn(a,r,"srcSet",h.srcSet,h,null),d&&dn(a,r,"src",h.src,h,null);return;case"input":ke("invalid",a);var V=S=N=v=null,W=null,ot=null;for(d in h)if(h.hasOwnProperty(d)){var _t=h[d];if(_t!=null)switch(d){case"name":v=_t;break;case"type":N=_t;break;case"checked":W=_t;break;case"defaultChecked":ot=_t;break;case"value":S=_t;break;case"defaultValue":V=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(i(137,r));break;default:dn(a,r,d,_t,h,null)}}ol(a,S,V,W,ot,N,v,!1);return;case"select":ke("invalid",a),d=N=S=null;for(v in h)if(h.hasOwnProperty(v)&&(V=h[v],V!=null))switch(v){case"value":S=V;break;case"defaultValue":N=V;break;case"multiple":d=V;default:dn(a,r,v,V,h,null)}r=S,h=N,a.multiple=!!d,r!=null?Le(a,!!d,r,!1):h!=null&&Le(a,!!d,h,!0);return;case"textarea":ke("invalid",a),S=v=d=null;for(N in h)if(h.hasOwnProperty(N)&&(V=h[N],V!=null))switch(N){case"value":d=V;break;case"defaultValue":v=V;break;case"children":S=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(91));break;default:dn(a,r,N,V,h,null)}br(a,d,v,S);return;case"option":for(W in h)h.hasOwnProperty(W)&&(d=h[W],d!=null)&&(W==="selected"?a.selected=d&&typeof d!="function"&&typeof d!="symbol":dn(a,r,W,d,h,null));return;case"dialog":ke("beforetoggle",a),ke("toggle",a),ke("cancel",a),ke("close",a);break;case"iframe":case"object":ke("load",a);break;case"video":case"audio":for(d=0;d<Ua.length;d++)ke(Ua[d],a);break;case"image":ke("error",a),ke("load",a);break;case"details":ke("toggle",a);break;case"embed":case"source":case"link":ke("error",a),ke("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ot in h)if(h.hasOwnProperty(ot)&&(d=h[ot],d!=null))switch(ot){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:dn(a,r,ot,d,h,null)}return;default:if(Ku(r)){for(_t in h)h.hasOwnProperty(_t)&&(d=h[_t],d!==void 0&&Ov(a,r,_t,d,h,void 0));return}}for(V in h)h.hasOwnProperty(V)&&(d=h[V],d!=null&&dn(a,r,V,d,h,null))}function nR(a,r,h,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,S=null,N=null,V=null,W=null,ot=null,_t=null;for(gt in h){var Tt=h[gt];if(h.hasOwnProperty(gt)&&Tt!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":W=Tt;default:d.hasOwnProperty(gt)||dn(a,r,gt,null,d,Tt)}}for(var ct in d){var gt=d[ct];if(Tt=h[ct],d.hasOwnProperty(ct)&&(gt!=null||Tt!=null))switch(ct){case"type":S=gt;break;case"name":v=gt;break;case"checked":ot=gt;break;case"defaultChecked":_t=gt;break;case"value":N=gt;break;case"defaultValue":V=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(i(137,r));break;default:gt!==Tt&&dn(a,r,ct,gt,d,Tt)}}tr(a,N,V,W,ot,_t,S,v);return;case"select":gt=N=V=ct=null;for(S in h)if(W=h[S],h.hasOwnProperty(S)&&W!=null)switch(S){case"value":break;case"multiple":gt=W;default:d.hasOwnProperty(S)||dn(a,r,S,null,d,W)}for(v in d)if(S=d[v],W=h[v],d.hasOwnProperty(v)&&(S!=null||W!=null))switch(v){case"value":ct=S;break;case"defaultValue":V=S;break;case"multiple":N=S;default:S!==W&&dn(a,r,v,S,d,W)}r=V,h=N,d=gt,ct!=null?Le(a,!!h,ct,!1):!!d!=!!h&&(r!=null?Le(a,!!h,r,!0):Le(a,!!h,h?[]:"",!1));return;case"textarea":gt=ct=null;for(V in h)if(v=h[V],h.hasOwnProperty(V)&&v!=null&&!d.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:dn(a,r,V,null,d,v)}for(N in d)if(v=d[N],S=h[N],d.hasOwnProperty(N)&&(v!=null||S!=null))switch(N){case"value":ct=v;break;case"defaultValue":gt=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==S&&dn(a,r,N,v,d,S)}ul(a,ct,gt);return;case"option":for(var Ft in h)ct=h[Ft],h.hasOwnProperty(Ft)&&ct!=null&&!d.hasOwnProperty(Ft)&&(Ft==="selected"?a.selected=!1:dn(a,r,Ft,null,d,ct));for(W in d)ct=d[W],gt=h[W],d.hasOwnProperty(W)&&ct!==gt&&(ct!=null||gt!=null)&&(W==="selected"?a.selected=ct&&typeof ct!="function"&&typeof ct!="symbol":dn(a,r,W,ct,d,gt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ne in h)ct=h[ne],h.hasOwnProperty(ne)&&ct!=null&&!d.hasOwnProperty(ne)&&dn(a,r,ne,null,d,ct);for(ot in d)if(ct=d[ot],gt=h[ot],d.hasOwnProperty(ot)&&ct!==gt&&(ct!=null||gt!=null))switch(ot){case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(i(137,r));break;default:dn(a,r,ot,ct,d,gt)}return;default:if(Ku(r)){for(var mn in h)ct=h[mn],h.hasOwnProperty(mn)&&ct!==void 0&&!d.hasOwnProperty(mn)&&Ov(a,r,mn,void 0,d,ct);for(_t in d)ct=d[_t],gt=h[_t],!d.hasOwnProperty(_t)||ct===gt||ct===void 0&&gt===void 0||Ov(a,r,_t,ct,d,gt);return}}for(var it in h)ct=h[it],h.hasOwnProperty(it)&&ct!=null&&!d.hasOwnProperty(it)&&dn(a,r,it,null,d,ct);for(Tt in d)ct=d[Tt],gt=h[Tt],!d.hasOwnProperty(Tt)||ct===gt||ct==null&&gt==null||dn(a,r,Tt,ct,d,gt)}function $S(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function iR(){if(typeof performance.getEntriesByType=="function"){for(var a=0,r=0,h=performance.getEntriesByType("resource"),d=0;d<h.length;d++){var v=h[d],S=v.transferSize,N=v.initiatorType,V=v.duration;if(S&&V&&$S(N)){for(N=0,V=v.responseEnd,d+=1;d<h.length;d++){var W=h[d],ot=W.startTime;if(ot>V)break;var _t=W.transferSize,Tt=W.initiatorType;_t&&$S(Tt)&&(W=W.responseEnd,N+=_t*(W<V?1:(V-ot)/(W-ot)))}if(--d,r+=8*(S+N)/(v.duration/1e3),a++,10<a)break}}if(0<a)return r/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Mv=null,Lv=null;function Q_(a){return a.nodeType===9?a:a.ownerDocument}function t4(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function e4(a,r){if(a===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&r==="foreignObject"?0:a}function Vv(a,r){return a==="textarea"||a==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var kv=null;function sR(){var a=window.event;return a&&a.type==="popstate"?a===kv?!1:(kv=a,!0):(kv=null,!1)}var n4=typeof setTimeout=="function"?setTimeout:void 0,aR=typeof clearTimeout=="function"?clearTimeout:void 0,i4=typeof Promise=="function"?Promise:void 0,rR=typeof queueMicrotask=="function"?queueMicrotask:typeof i4<"u"?function(a){return i4.resolve(null).then(a).catch(lR)}:n4;function lR(a){setTimeout(function(){throw a})}function Lc(a){return a==="head"}function s4(a,r){var h=r,d=0;do{var v=h.nextSibling;if(a.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"||h==="/&"){if(d===0){a.removeChild(v),Qd(r);return}d--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")d++;else if(h==="html")$p(a.ownerDocument.documentElement);else if(h==="head"){h=a.ownerDocument.head,$p(h);for(var S=h.firstChild;S;){var N=S.nextSibling,V=S.nodeName;S[ea]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&S.rel.toLowerCase()==="stylesheet"||h.removeChild(S),S=N}}else h==="body"&&$p(a.ownerDocument.body);h=v}while(h);Qd(r)}function a4(a,r){var h=a;a=0;do{var d=h.nextSibling;if(h.nodeType===1?r?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(r?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),d&&d.nodeType===8)if(h=d.data,h==="/$"){if(a===0)break;a--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||a++;h=d}while(h)}function Pv(a){var r=a.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var h=r;switch(r=r.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Pv(h),$a(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function oR(a,r,h,d){for(;a.nodeType===1;){var v=h;if(a.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[ea])switch(r){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(S=a.getAttribute("rel"),S==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(S!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(S=a.getAttribute("src"),(S!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&S&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(r==="input"&&a.type==="hidden"){var S=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===S)return a}else return a;if(a=Zr(a.nextSibling),a===null)break}return null}function uR(a,r,h){if(r==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=Zr(a.nextSibling),a===null))return null;return a}function r4(a,r){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!r||(a=Zr(a.nextSibling),a===null))return null;return a}function Uv(a){return a.data==="$?"||a.data==="$~"}function zv(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function cR(a,r){var h=a.ownerDocument;if(a.data==="$~")a._reactRetry=r;else if(a.data!=="$?"||h.readyState!=="loading")r();else{var d=function(){r(),h.removeEventListener("DOMContentLoaded",d)};h.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function Zr(a){for(;a!=null;a=a.nextSibling){var r=a.nodeType;if(r===1||r===3)break;if(r===8){if(r=a.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return a}var Bv=null;function l4(a){a=a.nextSibling;for(var r=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"||h==="/&"){if(r===0)return Zr(a.nextSibling);r--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||r++}a=a.nextSibling}return null}function o4(a){a=a.previousSibling;for(var r=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(r===0)return a;r--}else h!=="/$"&&h!=="/&"||r++}a=a.previousSibling}return null}function u4(a,r,h){switch(r=Q_(h),a){case"html":if(a=r.documentElement,!a)throw Error(i(452));return a;case"head":if(a=r.head,!a)throw Error(i(453));return a;case"body":if(a=r.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function $p(a){for(var r=a.attributes;r.length;)a.removeAttributeNode(r[0]);$a(a)}var $r=new Map,c4=new Set;function X_(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var vu=vt.d;vt.d={f:hR,r:fR,D:dR,C:mR,L:pR,m:gR,X:yR,S:_R,M:vR};function hR(){var a=vu.f(),r=ur();return a||r}function fR(a){var r=Er(a);r!==null&&r.tag===5&&r.type==="form"?D_(r):vu.r(a)}var qd=typeof document>"u"?null:document;function h4(a,r,h){var d=qd;if(d&&typeof r=="string"&&r){var v=un(r);v='link[rel="'+a+'"][href="'+v+'"]',typeof h=="string"&&(v+='[crossorigin="'+h+'"]'),c4.has(v)||(c4.add(v),a={rel:a,crossOrigin:h,href:r},d.querySelector(v)===null&&(r=d.createElement("link"),Rs(r,"link",a),On(r),d.head.appendChild(r)))}}function dR(a){vu.D(a),h4("dns-prefetch",a,null)}function mR(a,r){vu.C(a,r),h4("preconnect",a,r)}function pR(a,r,h){vu.L(a,r,h);var d=qd;if(d&&a&&r){var v='link[rel="preload"][as="'+un(r)+'"]';r==="image"&&h&&h.imageSrcSet?(v+='[imagesrcset="'+un(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(v+='[imagesizes="'+un(h.imageSizes)+'"]')):v+='[href="'+un(a)+'"]';var S=v;switch(r){case"style":S=Fd(a);break;case"script":S=Yd(a)}$r.has(S)||(a=E({rel:"preload",href:r==="image"&&h&&h.imageSrcSet?void 0:a,as:r},h),$r.set(S,a),d.querySelector(v)!==null||r==="style"&&d.querySelector(tg(S))||r==="script"&&d.querySelector(eg(S))||(r=d.createElement("link"),Rs(r,"link",a),On(r),d.head.appendChild(r)))}}function gR(a,r){vu.m(a,r);var h=qd;if(h&&a){var d=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+un(d)+'"][href="'+un(a)+'"]',S=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Yd(a)}if(!$r.has(S)&&(a=E({rel:"modulepreload",href:a},r),$r.set(S,a),h.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(eg(S)))return}d=h.createElement("link"),Rs(d,"link",a),On(d),h.head.appendChild(d)}}}function _R(a,r,h){vu.S(a,r,h);var d=qd;if(d&&a){var v=na(d).hoistableStyles,S=Fd(a);r=r||"default";var N=v.get(S);if(!N){var V={loading:0,preload:null};if(N=d.querySelector(tg(S)))V.loading=5;else{a=E({rel:"stylesheet",href:a,"data-precedence":r},h),(h=$r.get(S))&&jv(a,h);var W=N=d.createElement("link");On(W),Rs(W,"link",a),W._p=new Promise(function(ot,_t){W.onload=ot,W.onerror=_t}),W.addEventListener("load",function(){V.loading|=1}),W.addEventListener("error",function(){V.loading|=2}),V.loading|=4,K_(N,r,d)}N={type:"stylesheet",instance:N,count:1,state:V},v.set(S,N)}}}function yR(a,r){vu.X(a,r);var h=qd;if(h&&a){var d=na(h).hoistableScripts,v=Yd(a),S=d.get(v);S||(S=h.querySelector(eg(v)),S||(a=E({src:a,async:!0},r),(r=$r.get(v))&&Hv(a,r),S=h.createElement("script"),On(S),Rs(S,"link",a),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},d.set(v,S))}}function vR(a,r){vu.M(a,r);var h=qd;if(h&&a){var d=na(h).hoistableScripts,v=Yd(a),S=d.get(v);S||(S=h.querySelector(eg(v)),S||(a=E({src:a,async:!0,type:"module"},r),(r=$r.get(v))&&Hv(a,r),S=h.createElement("script"),On(S),Rs(S,"link",a),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},d.set(v,S))}}function f4(a,r,h,d){var v=(v=Wt.current)?X_(v):null;if(!v)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(r=Fd(h.href),h=na(v).hoistableStyles,d=h.get(r),d||(d={type:"style",instance:null,count:0,state:null},h.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=Fd(h.href);var S=na(v).hoistableStyles,N=S.get(a);if(N||(v=v.ownerDocument||v,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(a,N),(S=v.querySelector(tg(a)))&&!S._p&&(N.instance=S,N.state.loading=5),$r.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},$r.set(a,h),S||AR(v,a,h,N.state))),r&&d===null)throw Error(i(528,""));return N}if(r&&d!==null)throw Error(i(529,""));return null;case"script":return r=h.async,h=h.src,typeof h=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Yd(h),h=na(v).hoistableScripts,d=h.get(r),d||(d={type:"script",instance:null,count:0,state:null},h.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function Fd(a){return'href="'+un(a)+'"'}function tg(a){return'link[rel="stylesheet"]['+a+"]"}function d4(a){return E({},a,{"data-precedence":a.precedence,precedence:null})}function AR(a,r,h,d){a.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=a.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Rs(r,"link",h),On(r),a.head.appendChild(r))}function Yd(a){return'[src="'+un(a)+'"]'}function eg(a){return"script[async]"+a}function m4(a,r,h){if(r.count++,r.instance===null)switch(r.type){case"style":var d=a.querySelector('style[data-href~="'+un(h.href)+'"]');if(d)return r.instance=d,On(d),d;var v=E({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),On(d),Rs(d,"style",v),K_(d,h.precedence,a),r.instance=d;case"stylesheet":v=Fd(h.href);var S=a.querySelector(tg(v));if(S)return r.state.loading|=4,r.instance=S,On(S),S;d=d4(h),(v=$r.get(v))&&jv(d,v),S=(a.ownerDocument||a).createElement("link"),On(S);var N=S;return N._p=new Promise(function(V,W){N.onload=V,N.onerror=W}),Rs(S,"link",d),r.state.loading|=4,K_(S,h.precedence,a),r.instance=S;case"script":return S=Yd(h.src),(v=a.querySelector(eg(S)))?(r.instance=v,On(v),v):(d=h,(v=$r.get(S))&&(d=E({},h),Hv(d,v)),a=a.ownerDocument||a,v=a.createElement("script"),On(v),Rs(v,"link",d),a.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,K_(d,h.precedence,a));return r.instance}function K_(a,r,h){for(var d=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,S=v,N=0;N<d.length;N++){var V=d[N];if(V.dataset.precedence===r)S=V;else if(S!==v)break}S?S.parentNode.insertBefore(a,S.nextSibling):(r=h.nodeType===9?h.head:h,r.insertBefore(a,r.firstChild))}function jv(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.title==null&&(a.title=r.title)}function Hv(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.integrity==null&&(a.integrity=r.integrity)}var W_=null;function p4(a,r,h){if(W_===null){var d=new Map,v=W_=new Map;v.set(h,d)}else v=W_,d=v.get(h),d||(d=new Map,v.set(h,d));if(d.has(a))return d;for(d.set(a,null),h=h.getElementsByTagName(a),v=0;v<h.length;v++){var S=h[v];if(!(S[ea]||S[gn]||a==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var N=S.getAttribute(r)||"";N=a+N;var V=d.get(N);V?V.push(S):d.set(N,[S])}}return d}function g4(a,r,h){a=a.ownerDocument||a,a.head.insertBefore(h,r==="title"?a.querySelector("head > title"):null)}function ER(a,r,h){if(h===1||r.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(a=r.disabled,typeof r.precedence=="string"&&a==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function _4(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function SR(a,r,h,d){if(h.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var v=Fd(d.href),S=r.querySelector(tg(v));if(S){r=S._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(a.count++,a=J_.bind(a),r.then(a,a)),h.state.loading|=4,h.instance=S,On(S);return}S=r.ownerDocument||r,d=d4(d),(v=$r.get(v))&&jv(d,v),S=S.createElement("link"),On(S);var N=S;N._p=new Promise(function(V,W){N.onload=V,N.onerror=W}),Rs(S,"link",d),h.instance=S}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(h,r),(r=h.state.preload)&&(h.state.loading&3)===0&&(a.count++,h=J_.bind(a),r.addEventListener("load",h),r.addEventListener("error",h))}}var Gv=0;function TR(a,r){return a.stylesheets&&a.count===0&&$_(a,a.stylesheets),0<a.count||0<a.imgCount?function(h){var d=setTimeout(function(){if(a.stylesheets&&$_(a,a.stylesheets),a.unsuspend){var S=a.unsuspend;a.unsuspend=null,S()}},6e4+r);0<a.imgBytes&&Gv===0&&(Gv=62500*iR());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&$_(a,a.stylesheets),a.unsuspend)){var S=a.unsuspend;a.unsuspend=null,S()}},(a.imgBytes>Gv?50:800)+r);return a.unsuspend=h,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function J_(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$_(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Z_=null;function $_(a,r){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Z_=new Map,r.forEach(bR,a),Z_=null,J_.call(a))}function bR(a,r){if(!(r.state.loading&4)){var h=Z_.get(a);if(h)var d=h.get(null);else{h=new Map,Z_.set(a,h);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<v.length;S++){var N=v[S];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(h.set(N.dataset.precedence,N),d=N)}d&&h.set(null,d)}v=r.instance,N=v.getAttribute("data-precedence"),S=h.get(N)||d,S===d&&h.set(null,v),h.set(N,v),this.count++,d=J_.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),S?S.parentNode.insertBefore(v,S.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),r.state.loading|=4}}var ng={$$typeof:q,Provider:null,Consumer:null,_currentValue:St,_currentValue2:St,_threadCount:0};function CR(a,r,h,d,v,S,N,V,W){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yr(0),this.hiddenUpdates=yr(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=S,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function y4(a,r,h,d,v,S,N,V,W,ot,_t,Tt){return a=new CR(a,r,h,N,W,ot,_t,Tt,V),r=1,S===!0&&(r|=24),S=Mn(3,null,null,r),a.current=S,S.stateNode=a,r=rp(),r.refCount++,a.pooledCache=r,r.refCount++,S.memoizedState={element:d,isDehydrated:h,cache:r},ef(S),a}function v4(a){return a?(a=ao,a):ao}function A4(a,r,h,d,v,S){v=v4(v),d.context===null?d.context=v:d.pendingContext=v,d=Tl(r),d.payload={element:h},S=S===void 0?null:S,S!==null&&(d.callback=S),h=mo(a,d,r),h!==null&&(Ee(h,a,r),po(h,a,r))}function E4(a,r){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<r?h:r}}function qv(a,r){E4(a,r),(a=a.alternate)&&E4(a,r)}function S4(a){if(a.tag===13||a.tag===31){var r=ys(a,67108864);r!==null&&Ee(r,a,67108864),qv(a,67108864)}}function T4(a){if(a.tag===13||a.tag===31){var r=pa();r=Kl(r);var h=ys(a,r);h!==null&&Ee(h,a,r),qv(a,r)}}var ty=!0;function RR(a,r,h,d){var v=et.T;et.T=null;var S=vt.p;try{vt.p=2,Fv(a,r,h,d)}finally{vt.p=S,et.T=v}}function wR(a,r,h,d){var v=et.T;et.T=null;var S=vt.p;try{vt.p=8,Fv(a,r,h,d)}finally{vt.p=S,et.T=v}}function Fv(a,r,h,d){if(ty){var v=Yv(d);if(v===null)Iv(a,r,d,ey,h),C4(a,d);else if(NR(v,a,r,h,d))d.stopPropagation();else if(C4(a,d),r&4&&-1<xR.indexOf(a)){for(;v!==null;){var S=Er(v);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var N=us(S.pendingLanes);if(N!==0){var V=S;for(V.pendingLanes|=2,V.entangledLanes|=2;N;){var W=1<<31-Ht(N);V.entanglements[1]|=W,N&=~W}xt(S),(Kt&6)===0&&(Zn=Hn()+500,zt(0))}}break;case 31:case 13:V=ys(S,2),V!==null&&Ee(V,S,2),ur(),qv(S,2)}if(S=Yv(d),S===null&&Iv(a,r,d,ey,h),S===v)break;v=S}v!==null&&d.stopPropagation()}else Iv(a,r,d,null,h)}}function Yv(a){return a=qo(a),Qv(a)}var ey=null;function Qv(a){if(ey=null,a=Ar(a),a!==null){var r=l(a);if(r===null)a=null;else{var h=r.tag;if(h===13){if(a=c(r),a!==null)return a;a=null}else if(h===31){if(a=f(r),a!==null)return a;a=null}else if(h===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;a=null}else r!==a&&(a=null)}}return ey=a,null}function b4(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bo()){case In:return 2;case Sn:return 8;case Is:case os:return 32;case Os:return 268435456;default:return 32}default:return 32}}var Xv=!1,Vc=null,kc=null,Pc=null,ig=new Map,sg=new Map,Uc=[],xR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function C4(a,r){switch(a){case"focusin":case"focusout":Vc=null;break;case"dragenter":case"dragleave":kc=null;break;case"mouseover":case"mouseout":Pc=null;break;case"pointerover":case"pointerout":ig.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":sg.delete(r.pointerId)}}function ag(a,r,h,d,v,S){return a===null||a.nativeEvent!==S?(a={blockedOn:r,domEventName:h,eventSystemFlags:d,nativeEvent:S,targetContainers:[v]},r!==null&&(r=Er(r),r!==null&&S4(r)),a):(a.eventSystemFlags|=d,r=a.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),a)}function NR(a,r,h,d,v){switch(r){case"focusin":return Vc=ag(Vc,a,r,h,d,v),!0;case"dragenter":return kc=ag(kc,a,r,h,d,v),!0;case"mouseover":return Pc=ag(Pc,a,r,h,d,v),!0;case"pointerover":var S=v.pointerId;return ig.set(S,ag(ig.get(S)||null,a,r,h,d,v)),!0;case"gotpointercapture":return S=v.pointerId,sg.set(S,ag(sg.get(S)||null,a,r,h,d,v)),!0}return!1}function R4(a){var r=Ar(a.target);if(r!==null){var h=l(r);if(h!==null){if(r=h.tag,r===13){if(r=c(h),r!==null){a.blockedOn=r,vr(a.priority,function(){T4(h)});return}}else if(r===31){if(r=f(h),r!==null){a.blockedOn=r,vr(a.priority,function(){T4(h)});return}}else if(r===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function ny(a){if(a.blockedOn!==null)return!1;for(var r=a.targetContainers;0<r.length;){var h=Yv(a.nativeEvent);if(h===null){h=a.nativeEvent;var d=new h.constructor(h.type,h);Go=d,h.target.dispatchEvent(d),Go=null}else return r=Er(h),r!==null&&S4(r),a.blockedOn=h,!1;r.shift()}return!0}function w4(a,r,h){ny(a)&&h.delete(r)}function DR(){Xv=!1,Vc!==null&&ny(Vc)&&(Vc=null),kc!==null&&ny(kc)&&(kc=null),Pc!==null&&ny(Pc)&&(Pc=null),ig.forEach(w4),sg.forEach(w4)}function iy(a,r){a.blockedOn===r&&(a.blockedOn=null,Xv||(Xv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,DR)))}var sy=null;function x4(a){sy!==a&&(sy=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){sy===a&&(sy=null);for(var r=0;r<a.length;r+=3){var h=a[r],d=a[r+1],v=a[r+2];if(typeof d!="function"){if(Qv(d||h)===null)continue;break}var S=Er(h);S!==null&&(a.splice(r,3),r-=3,Mp(S,{pending:!0,data:v,method:h.method,action:d},d,v))}}))}function Qd(a){function r(W){return iy(W,a)}Vc!==null&&iy(Vc,a),kc!==null&&iy(kc,a),Pc!==null&&iy(Pc,a),ig.forEach(r),sg.forEach(r);for(var h=0;h<Uc.length;h++){var d=Uc[h];d.blockedOn===a&&(d.blockedOn=null)}for(;0<Uc.length&&(h=Uc[0],h.blockedOn===null);)R4(h),h.blockedOn===null&&Uc.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(d=0;d<h.length;d+=3){var v=h[d],S=h[d+1],N=v[ci]||null;if(typeof S=="function")N||x4(h);else if(N){var V=null;if(S&&S.hasAttribute("formAction")){if(v=S,N=S[ci]||null)V=N.formAction;else if(Qv(v)!==null)continue}else V=N.action;typeof V=="function"?h[d+1]=V:(h.splice(d,3),d-=3),x4(h)}}}function N4(){function a(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(N){return v=N})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),d||setTimeout(h,20)}function h(){if(!d&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(h,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function Kv(a){this._internalRoot=a}ay.prototype.render=Kv.prototype.render=function(a){var r=this._internalRoot;if(r===null)throw Error(i(409));var h=r.current,d=pa();A4(h,d,a,r,null,null)},ay.prototype.unmount=Kv.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var r=a.containerInfo;A4(a.current,2,null,a,null,null),ur(),r[ga]=null}};function ay(a){this._internalRoot=a}ay.prototype.unstable_scheduleHydration=function(a){if(a){var r=Ja();a={blockedOn:null,target:a,priority:r};for(var h=0;h<Uc.length&&r!==0&&r<Uc[h].priority;h++);Uc.splice(h,0,a),h===0&&R4(a)}};var D4=t.version;if(D4!=="19.2.4")throw Error(i(527,D4,"19.2.4"));vt.findDOMNode=function(a){var r=a._reactInternals;if(r===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=g(r),a=a!==null?A(a):null,a=a===null?null:a.stateNode,a};var IR={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:et,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ry=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ry.isDisabled&&ry.supportsFiber)try{Xa=ry.inject(IR),ht=ry}catch{}}return lg.createRoot=function(a,r){if(!s(a))throw Error(i(299));var h=!1,d="",v=P_,S=zp,N=Bp;return r!=null&&(r.unstable_strictMode===!0&&(h=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(N=r.onRecoverableError)),r=y4(a,1,!1,null,null,h,d,null,v,S,N,N4),a[ga]=r.current,Dv(a),new Kv(r)},lg.hydrateRoot=function(a,r,h){if(!s(a))throw Error(i(299));var d=!1,v="",S=P_,N=zp,V=Bp,W=null;return h!=null&&(h.unstable_strictMode===!0&&(d=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(S=h.onUncaughtError),h.onCaughtError!==void 0&&(N=h.onCaughtError),h.onRecoverableError!==void 0&&(V=h.onRecoverableError),h.formState!==void 0&&(W=h.formState)),r=y4(a,1,!0,r,h??null,d,v,W,S,N,V,N4),r.context=v4(null),h=r.current,d=pa(),d=Kl(d),v=Tl(d),v.callback=null,mo(h,v,d),h=d,r.current.lanes=h,sl(r,h),xt(r),a[ga]=r.current,Dv(a),new ay(r)},lg.version="19.2.4",lg}var B4;function BR(){if(B4)return Zv.exports;B4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Zv.exports=zR(),Zv.exports}var jR=BR();var j4="popstate";function HR(n={}){function t(i,s){let{pathname:l,search:c,hash:f}=i.location;return q2("",{pathname:l,search:c,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(i,s){return typeof s=="string"?s:Qg(s)}return qR(t,e,null,n)}function Qn(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Bl(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function GR(){return Math.random().toString(36).substring(2,10)}function H4(n,t){return{usr:n.state,key:n.key,idx:t}}function q2(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?Im(t):t,state:e,key:t&&t.key||i||GR()}}function Qg({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function Im(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function qR(n,t,e,i={}){let{window:s=document.defaultView,v5Compat:l=!1}=i,c=s.history,f="POP",m=null,g=A();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function A(){return(c.state||{idx:null}).idx}function E(){f="POP";let L=A(),B=L==null?null:L-g;g=L,m&&m({action:f,location:I.location,delta:B})}function T(L,B){f="PUSH";let j=q2(I.location,L,B);g=A()+1;let q=H4(j,g),$=I.createHref(j);try{c.pushState(q,"",$)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;s.location.assign($)}l&&m&&m({action:f,location:I.location,delta:1})}function x(L,B){f="REPLACE";let j=q2(I.location,L,B);g=A();let q=H4(j,g),$=I.createHref(j);c.replaceState(q,"",$),l&&m&&m({action:f,location:I.location,delta:0})}function w(L){return FR(L)}let I={get action(){return f},get location(){return n(s,c)},listen(L){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(j4,E),m=L,()=>{s.removeEventListener(j4,E),m=null}},createHref(L){return t(s,L)},createURL:w,encodeLocation(L){let B=w(L);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:T,replace:x,go(L){return c.go(L)}};return I}function FR(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Qn(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Qg(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function Jb(n,t,e="/"){return YR(n,t,e,!1)}function YR(n,t,e,i){let s=typeof t=="string"?Im(t):t,l=Ou(s.pathname||"/",e);if(l==null)return null;let c=Zb(n);QR(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let g=sw(l);f=nw(c[m],g,i)}return f}function Zb(n,t=[],e=[],i="",s=!1){let l=(c,f,m=s,g)=>{let A={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(i)&&m)return;Qn(A.relativePath.startsWith(i),`Absolute route path "${A.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(i.length)}let E=wu([i,A.relativePath]),T=e.concat(A);c.children&&c.children.length>0&&(Qn(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Zb(c.children,t,T,E,m)),!(c.path==null&&!c.index)&&t.push({path:E,score:tw(E,c.index),routesMeta:T})};return n.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let m of $b(c.path))l(c,f,!0,m)}),t}function $b(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,s=e.endsWith("?"),l=e.replace(/\?$/,"");if(i.length===0)return s?[l,""]:[l];let c=$b(i.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),s&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function QR(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:ew(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var XR=/^:[\w-]+$/,KR=3,WR=2,JR=1,ZR=10,$R=-2,G4=n=>n==="*";function tw(n,t){let e=n.split("/"),i=e.length;return e.some(G4)&&(i+=$R),t&&(i+=WR),e.filter(s=>!G4(s)).reduce((s,l)=>s+(XR.test(l)?KR:l===""?JR:ZR),i)}function ew(n,t){return n.length===t.length&&n.slice(0,-1).every((i,s)=>i===t[s])?n[n.length-1]-t[t.length-1]:0}function nw(n,t,e=!1){let{routesMeta:i}=n,s={},l="/",c=[];for(let f=0;f<i.length;++f){let m=i[f],g=f===i.length-1,A=l==="/"?t:t.slice(l.length)||"/",E=jy({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},A),T=m.route;if(!E&&g&&e&&!i[i.length-1].route.index&&(E=jy({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},A)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:wu([l,E.pathname]),pathnameBase:ow(wu([l,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(l=wu([l,E.pathnameBase]))}return c}function jy(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=iw(n.path,n.caseSensitive,n.end),s=t.match(e);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:i.reduce((g,{paramName:A,isOptional:E},T)=>{if(A==="*"){let w=f[T]||"";c=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const x=f[T];return E&&!x?g[A]=void 0:g[A]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function iw(n,t=!1,e=!0){Bl(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function sw(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bl(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function Ou(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}var aw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function rw(n,t="/"){let{pathname:e,search:i="",hash:s=""}=typeof n=="string"?Im(n):n,l;return e?(e=e.replace(/\/\/+/g,"/"),e.startsWith("/")?l=q4(e.substring(1),"/"):l=q4(e,t)):l=t,{pathname:l,search:uw(i),hash:cw(s)}}function q4(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function n2(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lw(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function KA(n){let t=lw(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function WA(n,t,e,i=!1){let s;typeof n=="string"?s=Im(n):(s={...n},Qn(!s.pathname||!s.pathname.includes("?"),n2("?","pathname","search",s)),Qn(!s.pathname||!s.pathname.includes("#"),n2("#","pathname","hash",s)),Qn(!s.search||!s.search.includes("#"),n2("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,f;if(c==null)f=e;else{let E=t.length-1;if(!i&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),E-=1;s.pathname=T.join("/")}f=E>=0?t[E]:"/"}let m=rw(s,f),g=c&&c!=="/"&&c.endsWith("/"),A=(l||c===".")&&e.endsWith("/");return!m.pathname.endsWith("/")&&(g||A)&&(m.pathname+="/"),m}var wu=n=>n.join("/").replace(/\/\/+/g,"/"),ow=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),uw=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,cw=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,hw=class{constructor(n,t,e,i=!1){this.status=n,this.statusText=t||"",this.internal=i,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function fw(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function dw(n){return n.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var tC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function eC(n,t){let e=n;if(typeof e!="string"||!aw.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let i=e,s=!1;if(tC)try{let l=new URL(window.location.href),c=e.startsWith("//")?new URL(l.protocol+e):new URL(e),f=Ou(c.pathname,t);c.origin===l.origin&&f!=null?e=f+c.search+c.hash:s=!0}catch{Bl(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:s,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var nC=["POST","PUT","PATCH","DELETE"];new Set(nC);var mw=["GET",...nC];new Set(mw);var Om=H.createContext(null);Om.displayName="DataRouter";var N1=H.createContext(null);N1.displayName="DataRouterState";var pw=H.createContext(!1),iC=H.createContext({isTransitioning:!1});iC.displayName="ViewTransition";var gw=H.createContext(new Map);gw.displayName="Fetchers";var _w=H.createContext(null);_w.displayName="Await";var pr=H.createContext(null);pr.displayName="Navigation";var p0=H.createContext(null);p0.displayName="Location";var Gl=H.createContext({outlet:null,matches:[],isDataRoute:!1});Gl.displayName="Route";var JA=H.createContext(null);JA.displayName="RouteError";var sC="REACT_ROUTER_ERROR",yw="REDIRECT",vw="ROUTE_ERROR_RESPONSE";function Aw(n){if(n.startsWith(`${sC}:${yw}:{`))try{let t=JSON.parse(n.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function Ew(n){if(n.startsWith(`${sC}:${vw}:{`))try{let t=JSON.parse(n.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new hw(t.status,t.statusText,t.data)}catch{}}function Sw(n,{relative:t}={}){Qn(Mm(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=H.useContext(pr),{hash:s,pathname:l,search:c}=g0(n,{relative:t}),f=l;return e!=="/"&&(f=l==="/"?e:wu([e,l])),i.createHref({pathname:f,search:c,hash:s})}function Mm(){return H.useContext(p0)!=null}function mh(){return Qn(Mm(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(p0).location}var aC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rC(n){H.useContext(pr).static||H.useLayoutEffect(n)}function zf(){let{isDataRoute:n}=H.useContext(Gl);return n?kw():Tw()}function Tw(){Qn(Mm(),"useNavigate() may be used only in the context of a <Router> component.");let n=H.useContext(Om),{basename:t,navigator:e}=H.useContext(pr),{matches:i}=H.useContext(Gl),{pathname:s}=mh(),l=JSON.stringify(KA(i)),c=H.useRef(!1);return rC(()=>{c.current=!0}),H.useCallback((m,g={})=>{if(Bl(c.current,aC),!c.current)return;if(typeof m=="number"){e.go(m);return}let A=WA(m,JSON.parse(l),s,g.relative==="path");n==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:wu([t,A.pathname])),(g.replace?e.replace:e.push)(A,g.state,g)},[t,e,l,s,n])}H.createContext(null);function bw(){let{matches:n}=H.useContext(Gl),t=n[n.length-1];return t?t.params:{}}function g0(n,{relative:t}={}){let{matches:e}=H.useContext(Gl),{pathname:i}=mh(),s=JSON.stringify(KA(e));return H.useMemo(()=>WA(n,JSON.parse(s),i,t==="path"),[n,s,i,t])}function Cw(n,t){return lC(n,t)}function lC(n,t,e,i,s){Qn(Mm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=H.useContext(pr),{matches:c}=H.useContext(Gl),f=c[c.length-1],m=f?f.params:{},g=f?f.pathname:"/",A=f?f.pathnameBase:"/",E=f&&f.route;{let j=E&&E.path||"";uC(g,!E||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let T=mh(),x;if(t){let j=typeof t=="string"?Im(t):t;Qn(A==="/"||j.pathname?.startsWith(A),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${j.pathname}" was given in the \`location\` prop.`),x=j}else x=T;let w=x.pathname||"/",I=w;if(A!=="/"){let j=A.replace(/^\//,"").split("/");I="/"+w.replace(/^\//,"").split("/").slice(j.length).join("/")}let L=Jb(n,{pathname:I});Bl(E||L!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Bl(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=Dw(L&&L.map(j=>Object.assign({},j,{params:Object.assign({},m,j.params),pathname:wu([A,l.encodeLocation?l.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?A:wu([A,l.encodeLocation?l.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),c,e,i,s);return t&&B?H.createElement(p0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},B):B}function Rw(){let n=Vw(),t=fw(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=H.createElement(H.Fragment,null,H.createElement("p",null," Hey developer "),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:l},"ErrorBoundary")," or"," ",H.createElement("code",{style:l},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},t),e?H.createElement("pre",{style:s},e):null,c)}var ww=H.createElement(Rw,null),oC=class extends H.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.onError?this.props.onError(n,t):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const e=Ew(n.digest);e&&(n=e)}let t=n!==void 0?H.createElement(Gl.Provider,{value:this.props.routeContext},H.createElement(JA.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?H.createElement(xw,{error:n},t):t}};oC.contextType=pw;var i2=new WeakMap;function xw({children:n,error:t}){let{basename:e}=H.useContext(pr);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let i=Aw(t.digest);if(i){let s=i2.get(t);if(s)throw s;let l=eC(i.location,e);if(tC&&!i2.get(t))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw i2.set(t,c),c}return H.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function Nw({routeContext:n,match:t,children:e}){let i=H.useContext(Om);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(Gl.Provider,{value:n},e)}function Dw(n,t=[],e=null,i=null,s=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let l=n,c=e?.errors;if(c!=null){let A=l.findIndex(E=>E.route.id&&c?.[E.route.id]!==void 0);Qn(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,A+1))}let f=!1,m=-1;if(e)for(let A=0;A<l.length;A++){let E=l[A];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=A),E.route.id){let{loaderData:T,errors:x}=e,w=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!x||x[E.route.id]===void 0);if(E.route.lazy||w){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let g=e&&i?(A,E)=>{i(A,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:dw(e.matches),errorInfo:E})}:void 0;return l.reduceRight((A,E,T)=>{let x,w=!1,I=null,L=null;e&&(x=c&&E.route.id?c[E.route.id]:void 0,I=E.route.errorElement||ww,f&&(m<0&&T===0?(uC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,L=null):m===T&&(w=!0,L=E.route.hydrateFallbackElement||null)));let B=t.concat(l.slice(0,T+1)),j=()=>{let q;return x?q=I:w?q=L:E.route.Component?q=H.createElement(E.route.Component,null):E.route.element?q=E.route.element:q=A,H.createElement(Nw,{match:E,routeContext:{outlet:A,matches:B,isDataRoute:e!=null},children:q})};return e&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?H.createElement(oC,{location:e.location,revalidation:e.revalidation,component:I,error:x,children:j(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:g}):j()},null)}function ZA(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Iw(n){let t=H.useContext(Om);return Qn(t,ZA(n)),t}function Ow(n){let t=H.useContext(N1);return Qn(t,ZA(n)),t}function Mw(n){let t=H.useContext(Gl);return Qn(t,ZA(n)),t}function $A(n){let t=Mw(n),e=t.matches[t.matches.length-1];return Qn(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function Lw(){return $A("useRouteId")}function Vw(){let n=H.useContext(JA),t=Ow("useRouteError"),e=$A("useRouteError");return n!==void 0?n:t.errors?.[e]}function kw(){let{router:n}=Iw("useNavigate"),t=$A("useNavigate"),e=H.useRef(!1);return rC(()=>{e.current=!0}),H.useCallback(async(s,l={})=>{Bl(e.current,aC),e.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:t,...l}))},[n,t])}var F4={};function uC(n,t,e){!t&&!F4[n]&&(F4[n]=!0,Bl(!1,e))}H.memo(Pw);function Pw({routes:n,future:t,state:e,onError:i}){return lC(n,void 0,e,i,t)}function cC({to:n,replace:t,state:e,relative:i}){Qn(Mm(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=H.useContext(pr);Bl(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=H.useContext(Gl),{pathname:c}=mh(),f=zf(),m=WA(n,KA(l),c,i==="path"),g=JSON.stringify(m);return H.useEffect(()=>{f(JSON.parse(g),{replace:t,state:e,relative:i})},[f,g,i,t,e]),null}function Zd(n){Qn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Uw({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){Qn(!Mm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),m=H.useMemo(()=>({basename:f,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[f,s,l,c]);typeof e=="string"&&(e=Im(e));let{pathname:g="/",search:A="",hash:E="",state:T=null,key:x="default"}=e,w=H.useMemo(()=>{let I=Ou(g,f);return I==null?null:{location:{pathname:I,search:A,hash:E,state:T,key:x},navigationType:i}},[f,g,A,E,T,x,i]);return Bl(w!=null,`<Router basename="${f}"> is not able to match the URL "${g}${A}${E}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:H.createElement(pr.Provider,{value:m},H.createElement(p0.Provider,{children:t,value:w}))}function zw({children:n,location:t}){return Cw(F2(n),t)}function F2(n,t=[]){let e=[];return H.Children.forEach(n,(i,s)=>{if(!H.isValidElement(i))return;let l=[...t,s];if(i.type===H.Fragment){e.push.apply(e,F2(i.props.children,l));return}Qn(i.type===Zd,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=F2(i.props.children,l)),e.push(c)}),e}var wy="get",xy="application/x-www-form-urlencoded";function D1(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function Bw(n){return D1(n)&&n.tagName.toLowerCase()==="button"}function jw(n){return D1(n)&&n.tagName.toLowerCase()==="form"}function Hw(n){return D1(n)&&n.tagName.toLowerCase()==="input"}function Gw(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function qw(n,t){return n.button===0&&(!t||t==="_self")&&!Gw(n)}var ly=null;function Fw(){if(ly===null)try{new FormData(document.createElement("form"),0),ly=!1}catch{ly=!0}return ly}var Yw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function s2(n){return n!=null&&!Yw.has(n)?(Bl(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xy}"`),null):n}function Qw(n,t){let e,i,s,l,c;if(jw(n)){let f=n.getAttribute("action");i=f?Ou(f,t):null,e=n.getAttribute("method")||wy,s=s2(n.getAttribute("enctype"))||xy,l=new FormData(n)}else if(Bw(n)||Hw(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?Ou(m,t):null,e=n.getAttribute("formmethod")||f.getAttribute("method")||wy,s=s2(n.getAttribute("formenctype"))||s2(f.getAttribute("enctype"))||xy,l=new FormData(f,n),!Fw()){let{name:g,type:A,value:E}=n;if(A==="image"){let T=g?`${g}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else g&&l.append(g,E)}}else{if(D1(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=wy,i=null,s=xy,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:i,method:e.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tE(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Xw(n,t,e,i){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${i}`:s.pathname=`${s.pathname}.${i}`:s.pathname==="/"?s.pathname=`_root.${i}`:t&&Ou(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function Kw(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ww(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Jw(n,t,e){let i=await Promise.all(n.map(async s=>{let l=t.routes[s.route.id];if(l){let c=await Kw(l,e);return c.links?c.links():[]}return[]}));return e7(i.flat(1).filter(Ww).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Y4(n,t,e,i,s,l){let c=(m,g)=>e[g]?m.route.id!==e[g].route.id:!0,f=(m,g)=>e[g].pathname!==m.pathname||e[g].route.path?.endsWith("*")&&e[g].params["*"]!==m.params["*"];return l==="assets"?t.filter((m,g)=>c(m,g)||f(m,g)):l==="data"?t.filter((m,g)=>{let A=i.routes[m.route.id];if(!A||!A.hasLoader)return!1;if(c(m,g)||f(m,g))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function Zw(n,t,{includeHydrateFallback:e}={}){return $w(n.map(i=>{let s=t.routes[i.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function $w(n){return[...new Set(n)]}function t7(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function e7(n,t){let e=new Set;return new Set(t),n.reduce((i,s)=>{let l=JSON.stringify(t7(s));return e.has(l)||(e.add(l),i.push({key:l,link:s})),i},[])}function hC(){let n=H.useContext(Om);return tE(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function n7(){let n=H.useContext(N1);return tE(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var eE=H.createContext(void 0);eE.displayName="FrameworkContext";function fC(){let n=H.useContext(eE);return tE(n,"You must render this element inside a <HydratedRouter> element"),n}function i7(n,t){let e=H.useContext(eE),[i,s]=H.useState(!1),[l,c]=H.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:g,onMouseLeave:A,onTouchStart:E}=t,T=H.useRef(null);H.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let I=B=>{B.forEach(j=>{c(j.isIntersecting)})},L=new IntersectionObserver(I,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[n]),H.useEffect(()=>{if(i){let I=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(I)}}},[i]);let x=()=>{s(!0)},w=()=>{s(!1),c(!1)};return e?n!=="intent"?[l,T,{}]:[l,T,{onFocus:og(f,x),onBlur:og(m,w),onMouseEnter:og(g,x),onMouseLeave:og(A,w),onTouchStart:og(E,x)}]:[!1,T,{}]}function og(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function s7({page:n,...t}){let{router:e}=hC(),i=H.useMemo(()=>Jb(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?H.createElement(r7,{page:n,matches:i,...t}):null}function a7(n){let{manifest:t,routeModules:e}=fC(),[i,s]=H.useState([]);return H.useEffect(()=>{let l=!1;return Jw(n,t,e).then(c=>{l||s(c)}),()=>{l=!0}},[n,t,e]),i}function r7({page:n,matches:t,...e}){let i=mh(),{future:s,manifest:l,routeModules:c}=fC(),{basename:f}=hC(),{loaderData:m,matches:g}=n7(),A=H.useMemo(()=>Y4(n,t,g,l,i,"data"),[n,t,g,l,i]),E=H.useMemo(()=>Y4(n,t,g,l,i,"assets"),[n,t,g,l,i]),T=H.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let I=new Set,L=!1;if(t.forEach(j=>{let q=l.routes[j.route.id];!q||!q.hasLoader||(!A.some($=>$.route.id===j.route.id)&&j.route.id in m&&c[j.route.id]?.shouldRevalidate||q.hasClientLoader?L=!0:I.add(j.route.id))}),I.size===0)return[];let B=Xw(n,f,s.unstable_trailingSlashAwareDataRequests,"data");return L&&I.size>0&&B.searchParams.set("_routes",t.filter(j=>I.has(j.route.id)).map(j=>j.route.id).join(",")),[B.pathname+B.search]},[f,s.unstable_trailingSlashAwareDataRequests,m,i,l,A,t,n,c]),x=H.useMemo(()=>Zw(E,l),[E,l]),w=a7(E);return H.createElement(H.Fragment,null,T.map(I=>H.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...e})),x.map(I=>H.createElement("link",{key:I,rel:"modulepreload",href:I,...e})),w.map(({key:I,link:L})=>H.createElement("link",{key:I,nonce:e.nonce,...L,crossOrigin:L.crossOrigin??e.crossOrigin})))}function l7(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var o7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{o7&&(window.__reactRouterVersion="7.13.0")}catch{}function u7({basename:n,children:t,unstable_useTransitions:e,window:i}){let s=H.useRef();s.current==null&&(s.current=HR({window:i,v5Compat:!0}));let l=s.current,[c,f]=H.useState({action:l.action,location:l.location}),m=H.useCallback(g=>{e===!1?f(g):H.startTransition(()=>f(g))},[e]);return H.useLayoutEffect(()=>l.listen(m),[l,m]),H.createElement(Uw,{basename:n,children:t,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:e})}var dC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nE=H.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:s,reloadDocument:l,replace:c,state:f,target:m,to:g,preventScrollReset:A,viewTransition:E,unstable_defaultShouldRevalidate:T,...x},w){let{basename:I,unstable_useTransitions:L}=H.useContext(pr),B=typeof g=="string"&&dC.test(g),j=eC(g,I);g=j.to;let q=Sw(g,{relative:s}),[$,Z,nt]=i7(i,x),P=d7(g,{replace:c,state:f,target:m,preventScrollReset:A,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:T,unstable_useTransitions:L});function M(F){t&&t(F),F.defaultPrevented||P(F)}let z=H.createElement("a",{...x,...nt,href:j.absoluteURL||q,onClick:j.isExternal||l?t:M,ref:l7(w,Z),target:m,"data-discover":!B&&e==="render"?"true":void 0});return $&&!B?H.createElement(H.Fragment,null,z,H.createElement(s7,{page:q})):z});nE.displayName="Link";var c7=H.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:s=!1,style:l,to:c,viewTransition:f,children:m,...g},A){let E=g0(c,{relative:g.relative}),T=mh(),x=H.useContext(N1),{navigator:w,basename:I}=H.useContext(pr),L=x!=null&&y7(E)&&f===!0,B=w.encodeLocation?w.encodeLocation(E).pathname:E.pathname,j=T.pathname,q=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;e||(j=j.toLowerCase(),q=q?q.toLowerCase():null,B=B.toLowerCase()),q&&I&&(q=Ou(q,I)||q);const $=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let Z=j===B||!s&&j.startsWith(B)&&j.charAt($)==="/",nt=q!=null&&(q===B||!s&&q.startsWith(B)&&q.charAt(B.length)==="/"),P={isActive:Z,isPending:nt,isTransitioning:L},M=Z?t:void 0,z;typeof i=="function"?z=i(P):z=[i,Z?"active":null,nt?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let F=typeof l=="function"?l(P):l;return H.createElement(nE,{...g,"aria-current":M,className:z,ref:A,style:F,to:c,viewTransition:f},typeof m=="function"?m(P):m)});c7.displayName="NavLink";var h7=H.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:s,state:l,method:c=wy,action:f,onSubmit:m,relative:g,preventScrollReset:A,viewTransition:E,unstable_defaultShouldRevalidate:T,...x},w)=>{let{unstable_useTransitions:I}=H.useContext(pr),L=g7(),B=_7(f,{relative:g}),j=c.toLowerCase()==="get"?"get":"post",q=typeof f=="string"&&dC.test(f),$=Z=>{if(m&&m(Z),Z.defaultPrevented)return;Z.preventDefault();let nt=Z.nativeEvent.submitter,P=nt?.getAttribute("formmethod")||c,M=()=>L(nt||Z.currentTarget,{fetcherKey:t,method:P,navigate:e,replace:s,state:l,relative:g,preventScrollReset:A,viewTransition:E,unstable_defaultShouldRevalidate:T});I&&e!==!1?H.startTransition(()=>M()):M()};return H.createElement("form",{ref:w,method:j,action:B,onSubmit:i?m:$,...x,"data-discover":!q&&n==="render"?"true":void 0})});h7.displayName="Form";function f7(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mC(n){let t=H.useContext(Om);return Qn(t,f7(n)),t}function d7(n,{target:t,replace:e,state:i,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let g=zf(),A=mh(),E=g0(n,{relative:l});return H.useCallback(T=>{if(qw(T,t)){T.preventDefault();let x=e!==void 0?e:Qg(A)===Qg(E),w=()=>g(n,{replace:x,state:i,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f});m?H.startTransition(()=>w()):w()}},[A,g,E,e,i,t,n,s,l,c,f,m])}var m7=0,p7=()=>`__${String(++m7)}__`;function g7(){let{router:n}=mC("useSubmit"),{basename:t}=H.useContext(pr),e=Lw(),i=n.fetch,s=n.navigate;return H.useCallback(async(l,c={})=>{let{action:f,method:m,encType:g,formData:A,body:E}=Qw(l,t);if(c.navigate===!1){let T=c.fetcherKey||p7();await i(T,e,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:A,body:E,formMethod:c.method||m,formEncType:c.encType||g,flushSync:c.flushSync})}else await s(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:A,body:E,formMethod:c.method||m,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:e,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,s,t,e])}function _7(n,{relative:t}={}){let{basename:e}=H.useContext(pr),i=H.useContext(Gl);Qn(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),l={...g0(n||".",{relative:t})},c=mh();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(A=>A==="")){f.delete("index"),m.filter(E=>E).forEach(E=>f.append("index",E));let A=f.toString();l.search=A?`?${A}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:wu([e,l.pathname])),Qg(l)}function y7(n,{relative:t}={}){let e=H.useContext(iC);Qn(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=mC("useViewTransitionState"),s=g0(n,{relative:t});if(!e.isTransitioning)return!1;let l=Ou(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=Ou(e.nextLocation.pathname,i)||e.nextLocation.pathname;return jy(s.pathname,c)!=null||jy(s.pathname,l)!=null}const v7=()=>{};var Q4={};const pC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const kt=function(n,t){if(!n)throw Lm(t)},Lm=function(n){return new Error("Firebase Database ("+pC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};const gC=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},A7=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[e++];t[i++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[e++],c=n[e++],f=n[e++],m=((s&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[e++],c=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return t.join("")},iE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,f=c?n[s+1]:0,m=s+2<n.length,g=m?n[s+2]:0,A=l>>2,E=(l&3)<<4|f>>4;let T=(f&15)<<2|g>>6,x=g&63;m||(x=64,c||(T=64)),i.push(e[A],e[E],e[T],e[x])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(gC(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):A7(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const l=e[n.charAt(s++)],f=s<n.length?e[n.charAt(s)]:0;++s;const g=s<n.length?e[n.charAt(s)]:64;++s;const E=s<n.length?e[n.charAt(s)]:64;if(++s,l==null||f==null||g==null||E==null)throw new E7;const T=l<<2|f>>4;if(i.push(T),g!==64){const x=f<<4&240|g>>2;if(i.push(x),E!==64){const w=g<<6&192|E;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class E7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _C=function(n){const t=gC(n);return iE.encodeByteArray(t,!0)},Hy=function(n){return _C(n).replace(/\./g,"")},Gy=function(n){try{return iE.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function S7(n){return yC(void 0,n)}function yC(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!T7(e)||(n[e]=yC(n[e],t[e]));return n}function T7(n){return n!=="__proto__"}function b7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const C7=()=>b7().__FIREBASE_DEFAULTS__,R7=()=>{if(typeof process>"u"||typeof Q4>"u")return;const n=Q4.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},w7=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&Gy(n[1]);return t&&JSON.parse(t)},I1=()=>{try{return v7()||C7()||R7()||w7()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},vC=n=>{var t,e;return(e=(t=I1())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},AC=n=>{const t=vC(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},EC=()=>{var n;return(n=I1())===null||n===void 0?void 0:n.config},SC=n=>{var t;return(t=I1())===null||t===void 0?void 0:t[`_${n}`]};class Tu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}function ph(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sE(n){return(await fetch(n,{credentials:"include"})).ok}function TC(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Hy(JSON.stringify(e)),Hy(JSON.stringify(c)),""].join(".")}const Ig={};function x7(){const n={prod:[],emulator:[]};for(const t of Object.keys(Ig))Ig[t]?n.emulator.push(t):n.prod.push(t);return n}function N7(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let X4=!1;function aE(n,t){if(typeof window>"u"||typeof document>"u"||!ph(window.location.host)||Ig[n]===t||Ig[n]||X4)return;Ig[n]=t;function e(T){return`__firebase__banner__${T}`}const i="__firebase__banner",l=x7().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,x){T.setAttribute("width","24"),T.setAttribute("id",x),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{X4=!0,c()},T}function A(T,x){T.setAttribute("id",x),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=N7(i),x=e("text"),w=document.getElementById(x)||document.createElement("span"),I=e("learnmore"),L=document.getElementById(I)||document.createElement("a"),B=e("preprendIcon"),j=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const q=T.element;f(q),A(L,I);const $=g();m(j,B),q.append(j,w,L,$),document.body.appendChild(q)}l?(w.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Ws(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ws())}function D7(){var n;const t=(n=I1())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function I7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function O7(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function bC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M7(){const n=Ws();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function L7(){return pC.NODE_ADMIN===!0}function V7(){return!D7()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k7(){try{return typeof indexedDB=="object"}catch{return!1}}function P7(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{var l;t(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(e){t(e)}})}const U7="FirebaseError";class Bu extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=U7,Object.setPrototypeOf(this,Bu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_0.prototype.create)}}class _0{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,l=this.errors[t],c=l?z7(l,i):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new Bu(s,f,i)}}function z7(n,t){return n.replace(B7,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const B7=/\{\$([^}]+)}/g;function Xg(n){return JSON.parse(n)}function es(n){return JSON.stringify(n)}const CC=function(n){let t={},e={},i={},s="";try{const l=n.split(".");t=Xg(Gy(l[0])||""),e=Xg(Gy(l[1])||""),s=l[2],i=e.d||{},delete e.d}catch{}return{header:t,claims:e,data:i,signature:s}},j7=function(n){const t=CC(n),e=t.claims;return!!e&&typeof e=="object"&&e.hasOwnProperty("iat")},H7=function(n){const t=CC(n).claims;return typeof t=="object"&&t.admin===!0};function Uo(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function mm(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}function qy(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Fy(n,t,e){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=t.call(e,n[s],s,n));return i}function ih(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const l=n[s],c=t[s];if(K4(l)&&K4(c)){if(!ih(l,c))return!1}else if(l!==c)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function K4(n){return n!==null&&typeof n=="object"}function Vm(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Ag(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,l]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(l)}}),t}function Eg(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}class G7{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const i=this.W_;if(typeof t=="string")for(let E=0;E<16;E++)i[E]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let E=0;E<16;E++)i[E]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let E=16;E<80;E++){const T=i[E-3]^i[E-8]^i[E-14]^i[E-16];i[E]=(T<<1|T>>>31)&4294967295}let s=this.chain_[0],l=this.chain_[1],c=this.chain_[2],f=this.chain_[3],m=this.chain_[4],g,A;for(let E=0;E<80;E++){E<40?E<20?(g=f^l&(c^f),A=1518500249):(g=l^c^f,A=1859775393):E<60?(g=l&c|f&(l|c),A=2400959708):(g=l^c^f,A=3395469782);const T=(s<<5|s>>>27)+g+m+A+i[E]&4294967295;m=f,f=c,c=(l<<30|l>>>2)&4294967295,l=s,s=T}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(t,e){if(t==null)return;e===void 0&&(e=t.length);const i=e-this.blockSize;let s=0;const l=this.buf_;let c=this.inbuf_;for(;s<e;){if(c===0)for(;s<=i;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(l[c]=t.charCodeAt(s),++c,++s,c===this.blockSize){this.compress_(l),c=0;break}}else for(;s<e;)if(l[c]=t[s],++c,++s,c===this.blockSize){this.compress_(l),c=0;break}}this.inbuf_=c,this.total_+=e}digest(){const t=[];let e=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=e&255,e/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let l=24;l>=0;l-=8)t[i]=this.chain_[s]>>l&255,++i;return t}}function q7(n,t){const e=new F7(n,t);return e.subscribe.bind(e)}class F7{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");Y7(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=a2),s.error===void 0&&(s.error=a2),s.complete===void 0&&(s.complete=a2);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y7(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function a2(){}function pm(n,t){return`${n} failed: ${t} argument `}const Q7=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const l=s-55296;i++,kt(i<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(i)-56320;s=65536+(l<<10)+c}s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):s<65536?(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},O1=function(n){let t=0;for(let e=0;e<n.length;e++){const i=n.charCodeAt(e);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,e++):t+=3}return t};function jn(n){return n&&n._delegate?n._delegate:n}class sh{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const bf="[DEFAULT]";class X7{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Tu;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t?.identifier),s=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(W7(t))try{this.getOrInitializeService({instanceIdentifier:bf})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:s});i.resolve(l)}catch{}}}}clearInstance(t=bf){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=bf){return this.instances.has(t)}getOptions(t=bf){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(s)}return s}onInit(t,e){var i;const s=this.normalizeInstanceIdentifier(e),l=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:K7(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=bf){return this.component?this.component.multipleInstances?t:bf:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K7(n){return n===bf?void 0:n}function W7(n){return n.instantiationMode==="EAGER"}class J7{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new X7(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Pe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pe||(Pe={}));const Z7={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},$7=Pe.INFO,tx={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},ex=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=tx[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class M1{constructor(t){this.name=t,this._logLevel=$7,this._logHandler=ex,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Z7[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...t),this._logHandler(this,Pe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...t),this._logHandler(this,Pe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...t),this._logHandler(this,Pe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...t),this._logHandler(this,Pe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...t),this._logHandler(this,Pe.ERROR,...t)}}const nx=(n,t)=>t.some(e=>n instanceof e);let W4,J4;function ix(){return W4||(W4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sx(){return J4||(J4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RC=new WeakMap,Y2=new WeakMap,wC=new WeakMap,r2=new WeakMap,lE=new WeakMap;function ax(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{e(Wc(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&RC.set(e,n)}).catch(()=>{}),lE.set(t,n),t}function rx(n){if(Y2.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{e(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Y2.set(n,t)}let Q2={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Y2.get(n);if(t==="objectStoreNames")return n.objectStoreNames||wC.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Wc(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function lx(n){Q2=n(Q2)}function ox(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(l2(this),t,...e);return wC.set(i,t.sort?t.sort():[t]),Wc(i)}:sx().includes(n)?function(...t){return n.apply(l2(this),t),Wc(RC.get(this))}:function(...t){return Wc(n.apply(l2(this),t))}}function ux(n){return typeof n=="function"?ox(n):(n instanceof IDBTransaction&&rx(n),nx(n,ix())?new Proxy(n,Q2):n)}function Wc(n){if(n instanceof IDBRequest)return ax(n);if(r2.has(n))return r2.get(n);const t=ux(n);return t!==n&&(r2.set(n,t),lE.set(t,n)),t}const l2=n=>lE.get(n);function cx(n,t,{blocked:e,upgrade:i,blocking:s,terminated:l}={}){const c=indexedDB.open(n,t),f=Wc(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Wc(c.result),m.oldVersion,m.newVersion,Wc(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),s&&m.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const hx=["get","getKey","getAll","getAllKeys","count"],fx=["put","add","delete","clear"],o2=new Map;function Z4(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(o2.get(t))return o2.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=fx.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||hx.includes(e)))return;const l=async function(c,...f){const m=this.transaction(c,s?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[e](...f),s&&m.done]))[0]};return o2.set(t,l),l}lx(n=>({...n,get:(t,e,i)=>Z4(t,e)||n.get(t,e,i),has:(t,e)=>!!Z4(t,e)||n.has(t,e)}));class dx{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(mx(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function mx(n){const t=n.getComponent();return t?.type==="VERSION"}const X2="@firebase/app",$4="0.13.2";const Mu=new M1("@firebase/app"),px="@firebase/app-compat",gx="@firebase/analytics-compat",_x="@firebase/analytics",yx="@firebase/app-check-compat",vx="@firebase/app-check",Ax="@firebase/auth",Ex="@firebase/auth-compat",Sx="@firebase/database",Tx="@firebase/data-connect",bx="@firebase/database-compat",Cx="@firebase/functions",Rx="@firebase/functions-compat",wx="@firebase/installations",xx="@firebase/installations-compat",Nx="@firebase/messaging",Dx="@firebase/messaging-compat",Ix="@firebase/performance",Ox="@firebase/performance-compat",Mx="@firebase/remote-config",Lx="@firebase/remote-config-compat",Vx="@firebase/storage",kx="@firebase/storage-compat",Px="@firebase/firestore",Ux="@firebase/ai",zx="@firebase/firestore-compat",Bx="firebase",jx="11.10.0";const K2="[DEFAULT]",Hx={[X2]:"fire-core",[px]:"fire-core-compat",[_x]:"fire-analytics",[gx]:"fire-analytics-compat",[vx]:"fire-app-check",[yx]:"fire-app-check-compat",[Ax]:"fire-auth",[Ex]:"fire-auth-compat",[Sx]:"fire-rtdb",[Tx]:"fire-data-connect",[bx]:"fire-rtdb-compat",[Cx]:"fire-fn",[Rx]:"fire-fn-compat",[wx]:"fire-iid",[xx]:"fire-iid-compat",[Nx]:"fire-fcm",[Dx]:"fire-fcm-compat",[Ix]:"fire-perf",[Ox]:"fire-perf-compat",[Mx]:"fire-rc",[Lx]:"fire-rc-compat",[Vx]:"fire-gcs",[kx]:"fire-gcs-compat",[Px]:"fire-fst",[zx]:"fire-fst-compat",[Ux]:"fire-vertex","fire-js":"fire-js",[Bx]:"fire-js-all"};const Yy=new Map,Gx=new Map,W2=new Map;function tT(n,t){try{n.container.addComponent(t)}catch(e){Mu.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Df(n){const t=n.name;if(W2.has(t))return Mu.debug(`There were multiple attempts to register component ${t}.`),!1;W2.set(t,n);for(const e of Yy.values())tT(e,n);for(const e of Gx.values())tT(e,n);return!0}function L1(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function cr(n){return n==null?!1:n.settings!==void 0}const qx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jc=new _0("app","Firebase",qx);class Fx{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new sh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Jc.create("app-deleted",{appName:this._name})}}const Bf=jx;function xC(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:K2,automaticDataCollectionEnabled:!0},t),s=i.name;if(typeof s!="string"||!s)throw Jc.create("bad-app-name",{appName:String(s)});if(e||(e=EC()),!e)throw Jc.create("no-options");const l=Yy.get(s);if(l){if(ih(e,l.options)&&ih(i,l.config))return l;throw Jc.create("duplicate-app",{appName:s})}const c=new J7(s);for(const m of W2.values())c.addComponent(m);const f=new Fx(e,i,c);return Yy.set(s,f),f}function oE(n=K2){const t=Yy.get(n);if(!t&&n===K2&&EC())return xC();if(!t)throw Jc.create("no-app",{appName:n});return t}function Io(n,t,e){var i;let s=(i=Hx[n])!==null&&i!==void 0?i:n;e&&(s+=`-${e}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const f=[`Unable to register library "${s}" with version "${t}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Mu.warn(f.join(" "));return}Df(new sh(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const Yx="firebase-heartbeat-database",Qx=1,Kg="firebase-heartbeat-store";let u2=null;function NC(){return u2||(u2=cx(Yx,Qx,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Kg)}catch(e){console.warn(e)}}}}).catch(n=>{throw Jc.create("idb-open",{originalErrorMessage:n.message})})),u2}async function Xx(n){try{const e=(await NC()).transaction(Kg),i=await e.objectStore(Kg).get(DC(n));return await e.done,i}catch(t){if(t instanceof Bu)Mu.warn(t.message);else{const e=Jc.create("idb-get",{originalErrorMessage:t?.message});Mu.warn(e.message)}}}async function eT(n,t){try{const i=(await NC()).transaction(Kg,"readwrite");await i.objectStore(Kg).put(t,DC(n)),await i.done}catch(e){if(e instanceof Bu)Mu.warn(e.message);else{const i=Jc.create("idb-set",{originalErrorMessage:e?.message});Mu.warn(i.message)}}}function DC(n){return`${n.name}!${n.options.appId}`}const Kx=1024,Wx=30;class Jx{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new $x(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=nT();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>Wx){const c=tN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Mu.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=nT(),{heartbeatsToSend:i,unsentEntries:s}=Zx(this._heartbeatsCache.heartbeats),l=Hy(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Mu.warn(e),""}}}function nT(){return new Date().toISOString().substring(0,10)}function Zx(n,t=Kx){const e=[];let i=n.slice();for(const s of n){const l=e.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),iT(e)>t){l.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),iT(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class $x{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return k7()?P7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Xx(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return eT(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return eT(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function iT(n){return Hy(JSON.stringify({version:2,heartbeats:n})).length}function tN(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}function eN(n){Df(new sh("platform-logger",t=>new dx(t),"PRIVATE")),Df(new sh("heartbeat",t=>new Jx(t),"PRIVATE")),Io(X2,$4,n),Io(X2,$4,"esm2017"),Io("fire-js","")}eN("");var nN="firebase",iN="11.10.0";Io(nN,iN,"app");function uE(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e}function IC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sN=IC,OC=new _0("auth","Firebase",IC());const Qy=new M1("@firebase/auth");function aN(n,...t){Qy.logLevel<=Pe.WARN&&Qy.warn(`Auth (${Bf}): ${n}`,...t)}function Ny(n,...t){Qy.logLevel<=Pe.ERROR&&Qy.error(`Auth (${Bf}): ${n}`,...t)}function jl(n,...t){throw cE(n,...t)}function Oo(n,...t){return cE(n,...t)}function MC(n,t,e){const i=Object.assign(Object.assign({},sN()),{[t]:e});return new _0("auth","Firebase",i).create(t,{appName:n.name})}function xu(n){return MC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cE(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return OC.create(n,...t)}function ae(n,t,...e){if(!n)throw cE(t,...e)}function bu(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Ny(t),new Error(t)}function Lu(n,t){n||bu(t)}function J2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function rN(){return sT()==="http:"||sT()==="https:"}function sT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function lN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rN()||O7()||"connection"in navigator)?navigator.onLine:!0}function oN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class y0{constructor(t,e){this.shortDelay=t,this.longDelay=e,Lu(e>t,"Short delay should be less than long delay!"),this.isMobile=rE()||bC()}get(){return lN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hE(n,t){Lu(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class LC{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const uN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const cN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hN=new y0(3e4,6e4);function gh(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function _h(n,t,e,i,s={}){return VC(n,s,async()=>{let l={},c={};i&&(t==="GET"?c=i:l={body:JSON.stringify(i)});const f=Vm(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:t,headers:m},l);return I7()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&ph(n.emulatorConfig.host)&&(g.credentials="include"),LC.fetch()(await kC(n,n.config.apiHost,e,f),g)})}async function VC(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},uN),t);try{const s=new dN(n),l=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw oy(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw oy(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw oy(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw oy(n,"user-disabled",c);const A=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw MC(n,A,g);jl(n,A)}}catch(s){if(s instanceof Bu)throw s;jl(n,"network-request-failed",{message:String(s)})}}async function v0(n,t,e,i,s={}){const l=await _h(n,t,e,i,s);return"mfaPendingCredential"in l&&jl(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function kC(n,t,e,i){const s=`${t}${e}?${i}`,l=n,c=l.config.emulator?hE(n.config,s):`${n.config.apiScheme}://${s}`;return cN.includes(e)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function fN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Oo(this.auth,"network-request-failed")),hN.get())})}}function oy(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const s=Oo(n,t,i);return s.customData._tokenResponse=e,s}function aT(n){return n!==void 0&&n.enterprise!==void 0}class mN{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return fN(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pN(n,t){return _h(n,"GET","/v2/recaptchaConfig",gh(n,t))}async function gN(n,t){return _h(n,"POST","/v1/accounts:delete",t)}async function Xy(n,t){return _h(n,"POST","/v1/accounts:lookup",t)}function Og(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function _N(n,t=!1){const e=jn(n),i=await e.getIdToken(t),s=fE(i);ae(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l?.sign_in_provider;return{claims:s,token:i,authTime:Og(c2(s.auth_time)),issuedAtTime:Og(c2(s.iat)),expirationTime:Og(c2(s.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function c2(n){return Number(n)*1e3}function fE(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Ny("JWT malformed, contained fewer than 3 sections"),null;try{const s=Gy(e);return s?JSON.parse(s):(Ny("Failed to decode base64 JWT payload"),null)}catch(s){return Ny("Caught error parsing JWT payload as JSON",s?.toString()),null}}function rT(n){const t=fE(n);return ae(t,"internal-error"),ae(typeof t.exp<"u","internal-error"),ae(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Wg(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Bu&&yN(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function yN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class vN{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Z2{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Og(this.lastLoginAt),this.creationTime=Og(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ky(n){var t;const e=n.auth,i=await n.getIdToken(),s=await Wg(n,Xy(e,{idToken:i}));ae(s?.users.length,e,"internal-error");const l=s.users[0];n._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?PC(l.providerUserInfo):[],f=EN(n.providerData,c),m=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!f?.length,A=m?g:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Z2(l.createdAt,l.lastLoginAt),isAnonymous:A};Object.assign(n,E)}async function AN(n){const t=jn(n);await Ky(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function EN(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function PC(n){return n.map(t=>{var{providerId:e}=t,i=uE(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function SN(n,t){const e=await VC(n,{},async()=>{const i=Vm({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await kC(n,s,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&ph(n.emulatorConfig.host)&&(m.credentials="include"),LC.fetch()(c,m)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function TN(n,t){return _h(n,"POST","/v2/accounts:revokeToken",gh(n,t))}class lm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ae(t.idToken,"internal-error"),ae(typeof t.idToken<"u","internal-error"),ae(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):rT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){ae(t.length!==0,"internal-error");const e=rT(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:s,expiresIn:l}=await SN(t,e);this.updateTokensAndExpiration(i,s,Number(l))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:s,expirationTime:l}=e,c=new lm;return i&&(ae(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),s&&(ae(typeof s=="string","internal-error",{appName:t}),c.accessToken=s),l&&(ae(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new lm,this.toJSON())}_performRefresh(){return bu("not implemented")}}function Bc(n,t){ae(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Vl{constructor(t){var{uid:e,auth:i,stsTokenManager:s}=t,l=uE(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Z2(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const e=await Wg(this,this.stsTokenManager.getToken(this.auth,t));return ae(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return _N(this,t)}reload(){return AN(this)}_assign(t){this!==t&&(ae(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Vl(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Ky(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cr(this.auth.app))return Promise.reject(xu(this.auth));const t=await this.getIdToken();return await Wg(this,gN(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,s,l,c,f,m,g,A;const E=(i=e.displayName)!==null&&i!==void 0?i:void 0,T=(s=e.email)!==null&&s!==void 0?s:void 0,x=(l=e.phoneNumber)!==null&&l!==void 0?l:void 0,w=(c=e.photoURL)!==null&&c!==void 0?c:void 0,I=(f=e.tenantId)!==null&&f!==void 0?f:void 0,L=(m=e._redirectEventId)!==null&&m!==void 0?m:void 0,B=(g=e.createdAt)!==null&&g!==void 0?g:void 0,j=(A=e.lastLoginAt)!==null&&A!==void 0?A:void 0,{uid:q,emailVerified:$,isAnonymous:Z,providerData:nt,stsTokenManager:P}=e;ae(q&&P,t,"internal-error");const M=lm.fromJSON(this.name,P);ae(typeof q=="string",t,"internal-error"),Bc(E,t.name),Bc(T,t.name),ae(typeof $=="boolean",t,"internal-error"),ae(typeof Z=="boolean",t,"internal-error"),Bc(x,t.name),Bc(w,t.name),Bc(I,t.name),Bc(L,t.name),Bc(B,t.name),Bc(j,t.name);const z=new Vl({uid:q,auth:t,email:T,emailVerified:$,displayName:E,isAnonymous:Z,photoURL:w,phoneNumber:x,tenantId:I,stsTokenManager:M,createdAt:B,lastLoginAt:j});return nt&&Array.isArray(nt)&&(z.providerData=nt.map(F=>Object.assign({},F))),L&&(z._redirectEventId=L),z}static async _fromIdTokenResponse(t,e,i=!1){const s=new lm;s.updateFromServerResponse(e);const l=new Vl({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Ky(l),l}static async _fromGetAccountInfoResponse(t,e,i){const s=e.users[0];ae(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?PC(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!l?.length,f=new lm;f.updateFromIdToken(i);const m=new Vl({uid:s.localId,auth:t,stsTokenManager:f,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Z2(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!l?.length};return Object.assign(m,g),m}}const lT=new Map;function Cu(n){Lu(n instanceof Function,"Expected a class definition");let t=lT.get(n);return t?(Lu(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,lT.set(n,t),t)}class UC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}UC.type="NONE";const oT=UC;function Dy(n,t,e){return`firebase:${n}:${t}:${e}`}class om{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:s,name:l}=this.auth;this.fullUserKey=Dy(this.userKey,s.apiKey,l),this.fullPersistenceKey=Dy("persistence",s.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Xy(this.auth,{idToken:t}).catch(()=>{});return e?Vl._fromGetAccountInfoResponse(this.auth,e,t):null}return Vl._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new om(Cu(oT),t,i);const s=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||Cu(oT);const c=Dy(i,t.config.apiKey,t.name);let f=null;for(const g of e)try{const A=await g._get(c);if(A){let E;if(typeof A=="string"){const T=await Xy(t,{idToken:A}).catch(()=>{});if(!T)break;E=await Vl._fromGetAccountInfoResponse(t,T,A)}else E=Vl._fromJSON(t,A);g!==l&&(f=E),l=g;break}}catch{}const m=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new om(l,t,i):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(e.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new om(l,t,i))}}function uT(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(HC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(zC(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qC(t))return"Blackberry";if(FC(t))return"Webos";if(BC(t))return"Safari";if((t.includes("chrome/")||jC(t))&&!t.includes("edge/"))return"Chrome";if(GC(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function zC(n=Ws()){return/firefox\//i.test(n)}function BC(n=Ws()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function jC(n=Ws()){return/crios\//i.test(n)}function HC(n=Ws()){return/iemobile/i.test(n)}function GC(n=Ws()){return/android/i.test(n)}function qC(n=Ws()){return/blackberry/i.test(n)}function FC(n=Ws()){return/webos/i.test(n)}function dE(n=Ws()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bN(n=Ws()){var t;return dE(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function CN(){return M7()&&document.documentMode===10}function YC(n=Ws()){return dE(n)||GC(n)||FC(n)||qC(n)||/windows phone/i.test(n)||HC(n)}function QC(n,t=[]){let e;switch(n){case"Browser":e=uT(Ws());break;case"Worker":e=`${uT(Ws())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Bf}/${i}`}class RN{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=l=>new Promise((c,f)=>{try{const m=t(l);c(m)}catch(m){f(m)}});i.onAbort=e,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function wN(n,t={}){return _h(n,"GET","/v2/passwordPolicy",gh(n,t))}const xN=6;class NN{constructor(t){var e,i,s,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=c.minPasswordLength)!==null&&e!==void 0?e:xN,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,s,l,c,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(e=m.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(s=m.containsLowercaseLetter)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}class DN{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cT(this),this.idTokenSubscription=new cT(this),this.beforeStateQueue=new RN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Cu(e)),this._initializationPromise=this.queue(async()=>{var i,s,l;if(!this._deleted&&(this.persistenceManager=await om.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Xy(this,{idToken:t}),i=await Vl._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(cr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(t);(!c||c===f)&&m?.user&&(s=m.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Ky(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=oN()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(cr(this.app))return Promise.reject(xu(this));const e=t?jn(t):null;return e&&ae(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&ae(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return cr(this.app)?Promise.reject(xu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return cr(this.app)?Promise.reject(xu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cu(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await wN(this),e=new NN(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new _0("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await TN(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Cu(t)||this._popupRedirectResolver;ae(e,this,"argument-error"),this.redirectPersistenceManager=await om.create(this,[Cu(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof e=="function"){const m=t.addObserver(e,i,s);return()=>{c=!0,m()}}else{const m=t.addObserver(e);return()=>{c=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=QC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e?.error&&aN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function jf(n){return jn(n)}class cT{constructor(t){this.auth=t,this.observer=null,this.addObserver=q7(e=>this.observer=e)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let V1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IN(n){V1=n}function XC(n){return V1.loadJS(n)}function ON(){return V1.recaptchaEnterpriseScript}function MN(){return V1.gapiScript}function LN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class VN{constructor(){this.enterprise=new kN}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class kN{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const PN="recaptcha-enterprise",KC="NO_RECAPTCHA";class UN{constructor(t){this.type=PN,this.auth=jf(t)}async verify(t="verify",e=!1){async function i(l){if(!e){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{pN(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new mN(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{f(m)})})}function s(l,c,f){const m=window.grecaptcha;aT(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:t}).then(g=>{c(g)}).catch(()=>{c(KC)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new VN().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(f=>{if(!e&&aT(window.grecaptcha))s(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=ON();m.length!==0&&(m+=f),XC(m).then(()=>{s(f,l,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function hT(n,t,e,i=!1,s=!1){const l=new UN(n);let c;if(s)c=KC;else try{c=await l.verify(e)}catch{c=await l.verify(e,!0)}const f=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function $2(n,t,e,i,s){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await hT(n,t,e,e==="getOobCode");return i(n,c)}else return i(n,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await hT(n,t,e,e==="getOobCode");return i(n,f)}else return Promise.reject(c)})}function zN(n,t){const e=L1(n,"auth");if(e.isInitialized()){const s=e.getImmediate(),l=e.getOptions();if(ih(l,t??{}))return s;jl(s,"already-initialized")}return e.initialize({options:t})}function BN(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(Cu);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function jN(n,t,e){const i=jf(n);ae(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,l=WC(t),{host:c,port:f}=HN(t),m=f===null?"":`:${f}`,g={url:`${l}//${c}${m}/`},A=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ae(ih(g,i.config.emulator)&&ih(A,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=A,i.settings.appVerificationDisabledForTesting=!0,ph(c)?(sE(`${l}//${c}${m}`),aE("Auth",!0)):GN()}function WC(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function HN(n){const t=WC(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const l=s[1];return{host:l,port:fT(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:fT(c)}}}function fT(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function GN(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class mE{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return bu("not implemented")}_getIdTokenResponse(t){return bu("not implemented")}_linkToIdToken(t,e){return bu("not implemented")}_getReauthenticationResolver(t){return bu("not implemented")}}async function qN(n,t){return _h(n,"POST","/v1/accounts:signUp",t)}async function FN(n,t){return v0(n,"POST","/v1/accounts:signInWithPassword",gh(n,t))}async function YN(n,t){return v0(n,"POST","/v1/accounts:signInWithEmailLink",gh(n,t))}async function QN(n,t){return v0(n,"POST","/v1/accounts:signInWithEmailLink",gh(n,t))}class Jg extends mE{constructor(t,e,i,s=null){super("password",i),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new Jg(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Jg(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $2(t,e,"signInWithPassword",FN);case"emailLink":return YN(t,{email:this._email,oobCode:this._password});default:jl(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $2(t,i,"signUpPassword",qN);case"emailLink":return QN(t,{idToken:e,email:this._email,oobCode:this._password});default:jl(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function um(n,t){return v0(n,"POST","/v1/accounts:signInWithIdp",gh(n,t))}const XN="http://localhost";class If extends mE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new If(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):jl("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s}=e,l=uE(e,["providerId","signInMethod"]);if(!i||!s)return null;const c=new If(i,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return um(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,um(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,um(t,e)}buildRequest(){const t={requestUri:XN,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Vm(e)}return t}}function KN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WN(n){const t=Ag(Eg(n)).link,e=t?Ag(Eg(t)).deep_link_id:null,i=Ag(Eg(n)).deep_link_id;return(i?Ag(Eg(i)).link:null)||i||e||t||n}class pE{constructor(t){var e,i,s,l,c,f;const m=Ag(Eg(t)),g=(e=m.apiKey)!==null&&e!==void 0?e:null,A=(i=m.oobCode)!==null&&i!==void 0?i:null,E=KN((s=m.mode)!==null&&s!==void 0?s:null);ae(g&&A&&E,"argument-error"),this.apiKey=g,this.operation=E,this.code=A,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(t){const e=WN(t);try{return new pE(e)}catch{return null}}}class km{constructor(){this.providerId=km.PROVIDER_ID}static credential(t,e){return Jg._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=pE.parseLink(e);return ae(i,"argument-error"),Jg._fromEmailAndCode(t,i.code,i.tenantId)}}km.PROVIDER_ID="password";km.EMAIL_PASSWORD_SIGN_IN_METHOD="password";km.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class JC{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class A0 extends JC{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class qc extends A0{constructor(){super("facebook.com")}static credential(t){return If._fromParams({providerId:qc.PROVIDER_ID,signInMethod:qc.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qc.credentialFromTaggedObject(t)}static credentialFromError(t){return qc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qc.credential(t.oauthAccessToken)}catch{return null}}}qc.FACEBOOK_SIGN_IN_METHOD="facebook.com";qc.PROVIDER_ID="facebook.com";class Fc extends A0{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return If._fromParams({providerId:Fc.PROVIDER_ID,signInMethod:Fc.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Fc.credentialFromTaggedObject(t)}static credentialFromError(t){return Fc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Fc.credential(e,i)}catch{return null}}}Fc.GOOGLE_SIGN_IN_METHOD="google.com";Fc.PROVIDER_ID="google.com";class Yc extends A0{constructor(){super("github.com")}static credential(t){return If._fromParams({providerId:Yc.PROVIDER_ID,signInMethod:Yc.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Yc.credentialFromTaggedObject(t)}static credentialFromError(t){return Yc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Yc.credential(t.oauthAccessToken)}catch{return null}}}Yc.GITHUB_SIGN_IN_METHOD="github.com";Yc.PROVIDER_ID="github.com";class Qc extends A0{constructor(){super("twitter.com")}static credential(t,e){return If._fromParams({providerId:Qc.PROVIDER_ID,signInMethod:Qc.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Qc.credentialFromTaggedObject(t)}static credentialFromError(t){return Qc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Qc.credential(e,i)}catch{return null}}}Qc.TWITTER_SIGN_IN_METHOD="twitter.com";Qc.PROVIDER_ID="twitter.com";async function JN(n,t){return v0(n,"POST","/v1/accounts:signUp",gh(n,t))}class Of{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){const l=await Vl._fromIdTokenResponse(t,i,s),c=dT(i);return new Of({user:l,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const s=dT(i);return new Of({user:t,providerId:s,_tokenResponse:i,operationType:e})}}function dT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Wy extends Bu{constructor(t,e,i,s){var l;super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Wy.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new Wy(t,e,i,s)}}function ZC(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Wy._fromErrorAndOperation(n,l,t,i):l})}async function ZN(n,t,e=!1){const i=await Wg(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Of._forOperation(n,"link",i)}async function $N(n,t,e=!1){const{auth:i}=n;if(cr(i.app))return Promise.reject(xu(i));const s="reauthenticate";try{const l=await Wg(n,ZC(i,s,t,n),e);ae(l.idToken,i,"internal-error");const c=fE(l.idToken);ae(c,i,"internal-error");const{sub:f}=c;return ae(n.uid===f,i,"user-mismatch"),Of._forOperation(n,s,l)}catch(l){throw l?.code==="auth/user-not-found"&&jl(i,"user-mismatch"),l}}async function $C(n,t,e=!1){if(cr(n.app))return Promise.reject(xu(n));const i="signIn",s=await ZC(n,i,t),l=await Of._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(l.user),l}async function tD(n,t){return $C(jf(n),t)}async function t5(n){const t=jf(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function eD(n,t,e){if(cr(n.app))return Promise.reject(xu(n));const i=jf(n),c=await $2(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JN).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&t5(n),m}),f=await Of._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(f.user),f}function nD(n,t,e){return cr(n.app)?Promise.reject(xu(n)):tD(jn(n),km.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&t5(n),i})}function iD(n,t,e,i){return jn(n).onIdTokenChanged(t,e,i)}function sD(n,t,e){return jn(n).beforeAuthStateChanged(t,e)}function aD(n,t,e,i){return jn(n).onAuthStateChanged(t,e,i)}function rD(n){return jn(n).signOut()}const Jy="__sak";class e5{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Jy,"1"),this.storage.removeItem(Jy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const lD=1e3,oD=10;class n5 extends e5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YC(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);CN()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,oD):s()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},lD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}n5.type="LOCAL";const uD=n5;class i5 extends e5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}i5.type="SESSION";const s5=i5;function cD(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class k1{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const i=new k1(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:s,data:l}=e.data,c=this.handlersMap[s];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const f=Array.from(c).map(async g=>g(e.origin,l)),m=await cD(f);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:m})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}k1.receivers=[];function gE(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}class hD{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const g=gE("",20);s.port1.start();const A=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(E){const T=E;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(A),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(T.data.response);break;default:clearTimeout(A),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Mo(){return window}function fD(n){Mo().location.href=n}function a5(){return typeof Mo().WorkerGlobalScope<"u"&&typeof Mo().importScripts=="function"}async function dD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mD(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function pD(){return a5()?self:null}const r5="firebaseLocalStorageDb",gD=1,Zy="firebaseLocalStorage",l5="fbase_key";class E0{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function P1(n,t){return n.transaction([Zy],t?"readwrite":"readonly").objectStore(Zy)}function _D(){const n=indexedDB.deleteDatabase(r5);return new E0(n).toPromise()}function tA(){const n=indexedDB.open(r5,gD);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Zy,{keyPath:l5})}catch(s){e(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Zy)?t(i):(i.close(),await _D(),t(await tA()))})})}async function mT(n,t,e){const i=P1(n,!0).put({[l5]:t,value:e});return new E0(i).toPromise()}async function yD(n,t){const e=P1(n,!1).get(t),i=await new E0(e).toPromise();return i===void 0?null:i.value}function pT(n,t){const e=P1(n,!0).delete(t);return new E0(e).toPromise()}const vD=800,AD=3;class o5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tA(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>AD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return a5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=k1._getInstance(pD()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await dD(),!this.activeServiceWorker)return;this.sender=new hD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||mD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await tA();return await mT(t,Jy,"1"),await pT(t,Jy),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>mT(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>yD(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>pT(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const l=P1(s,!1).getAll();return new E0(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:l}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o5.type="LOCAL";const ED=o5;new y0(3e4,6e4);function SD(n,t){return t?Cu(t):(ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class _E extends mE{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return um(t,this._buildIdpRequest())}_linkToIdToken(t,e){return um(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return um(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function TD(n){return $C(n.auth,new _E(n),n.bypassAuthState)}function bD(n){const{auth:t,user:e}=n;return ae(e,t,"internal-error"),$N(e,new _E(n),n.bypassAuthState)}async function CD(n){const{auth:t,user:e}=n;return ae(e,t,"internal-error"),ZN(e,new _E(n),n.bypassAuthState)}class u5{constructor(t,e,i,s,l=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:s,tenantId:l,error:c,type:f}=t;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:e,sessionId:i,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return TD;case"linkViaPopup":case"linkViaRedirect":return CD;case"reauthViaPopup":case"reauthViaRedirect":return bD;default:jl(this.auth,"internal-error")}}resolve(t){Lu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Lu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const RD=new y0(2e3,1e4);class im extends u5{constructor(t,e,i,s,l){super(t,e,s,l),this.provider=i,this.authWindow=null,this.pollId=null,im.currentPopupAction&&im.currentPopupAction.cancel(),im.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ae(t,this.auth,"internal-error"),t}async onExecution(){Lu(this.filter.length===1,"Popup operations only handle one event");const t=gE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Oo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Oo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,im.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,RD.get())};t()}}im.currentPopupAction=null;const wD="pendingRedirect",Iy=new Map;class xD extends u5{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Iy.get(this.auth._key());if(!t){try{const i=await ND(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Iy.set(this.auth._key(),t)}return this.bypassAuthState||Iy.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ND(n,t){const e=OD(t),i=ID(n);if(!await i._isAvailable())return!1;const s=await i._get(e)==="true";return await i._remove(e),s}function DD(n,t){Iy.set(n._key(),t)}function ID(n){return Cu(n._redirectPersistence)}function OD(n){return Dy(wD,n.config.apiKey,n.name)}async function MD(n,t,e=!1){if(cr(n.app))return Promise.reject(xu(n));const i=jf(n),s=SD(i,t),c=await new xD(i,s,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}const LD=600*1e3;class VD{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!kD(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!c5(t)){const s=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(Oo(this.auth,s))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=LD&&this.cachedEventUids.clear(),this.cachedEventUids.has(gT(t))}saveEventToCache(t){this.cachedEventUids.add(gT(t)),this.lastProcessedEventTime=Date.now()}}function gT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function c5({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function kD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c5(n);default:return!1}}async function PD(n,t={}){return _h(n,"GET","/v1/projects",t)}const UD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zD=/^https?/;async function BD(n){if(n.config.emulator)return;const{authorizedDomains:t}=await PD(n);for(const e of t)try{if(jD(e))return}catch{}jl(n,"unauthorized-domain")}function jD(n){const t=J2(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!zD.test(e))return!1;if(UD.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const HD=new y0(3e4,6e4);function _T(){const n=Mo().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function GD(n){return new Promise((t,e)=>{var i,s,l;function c(){_T(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_T(),e(Oo(n,"network-request-failed"))},timeout:HD.get()})}if(!((s=(i=Mo().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((l=Mo().gapi)===null||l===void 0)&&l.load)c();else{const f=LN("iframefcb");return Mo()[f]=()=>{gapi.load?c():e(Oo(n,"network-request-failed"))},XC(`${MN()}?onload=${f}`).catch(m=>e(m))}}).catch(t=>{throw Oy=null,t})}let Oy=null;function qD(n){return Oy=Oy||GD(n),Oy}const FD=new y0(5e3,15e3),YD="__/auth/iframe",QD="emulator/auth/iframe",XD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WD(n){const t=n.config;ae(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?hE(t,QD):`https://${n.config.authDomain}/${YD}`,i={apiKey:t.apiKey,appName:n.name,v:Bf},s=KD.get(n.config.apiHost);s&&(i.eid=s);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${e}?${Vm(i).slice(1)}`}async function JD(n){const t=await qD(n),e=Mo().gapi;return ae(e,n,"internal-error"),t.open({where:document.body,url:WD(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XD,dontclear:!0},i=>new Promise(async(s,l)=>{await i.restyle({setHideOnLeave:!1});const c=Oo(n,"network-request-failed"),f=Mo().setTimeout(()=>{l(c)},FD.get());function m(){Mo().clearTimeout(f),s(i)}i.ping(m).then(m,()=>{l(c)})}))}const ZD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$D=500,tI=600,eI="_blank",nI="http://localhost";class yT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iI(n,t,e,i=$D,s=tI){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m=Object.assign(Object.assign({},ZD),{width:i.toString(),height:s.toString(),top:l,left:c}),g=Ws().toLowerCase();e&&(f=jC(g)?eI:e),zC(g)&&(t=t||nI,m.scrollbars="yes");const A=Object.entries(m).reduce((T,[x,w])=>`${T}${x}=${w},`,"");if(bN(g)&&f!=="_self")return sI(t||"",f),new yT(null);const E=window.open(t||"",f,A);ae(E,n,"popup-blocked");try{E.focus()}catch{}return new yT(E)}function sI(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}const aI="__/auth/handler",rI="emulator/auth/handler",lI=encodeURIComponent("fac");async function vT(n,t,e,i,s,l){ae(n.config.authDomain,n,"auth-domain-config-required"),ae(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:Bf,eventId:s};if(t instanceof JC){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",qy(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,E]of Object.entries({}))c[A]=E}if(t instanceof A0){const A=t.getScopes().filter(E=>E!=="");A.length>0&&(c.scopes=A.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const A of Object.keys(f))f[A]===void 0&&delete f[A];const m=await n._getAppCheckToken(),g=m?`#${lI}=${encodeURIComponent(m)}`:"";return`${oI(n)}?${Vm(f).slice(1)}${g}`}function oI({config:n}){return n.emulator?hE(n,rI):`https://${n.authDomain}/${aI}`}const h2="webStorageSupport";class uI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=s5,this._completeRedirectFn=MD,this._overrideRedirectResult=DD}async _openPopup(t,e,i,s){var l;Lu((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await vT(t,e,i,J2(),s);return iI(t,c,gE())}async _openRedirect(t,e,i,s){await this._originValidation(t);const l=await vT(t,e,i,J2(),s);return fD(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:l}=this.eventManagers[e];return s?Promise.resolve(s):(Lu(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await JD(t),i=new VD(t);return e.register("authEvent",s=>(ae(s?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(h2,{type:h2},s=>{var l;const c=(l=s?.[0])===null||l===void 0?void 0:l[h2];c!==void 0&&e(!!c),jl(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=BD(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return YC()||BC()||dE()}}const cI=uI;var AT="@firebase/auth",ET="1.10.8";class hI{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dI(n){Df(new sh("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;ae(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QC(n)},g=new DN(i,s,l,m);return BN(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Df(new sh("auth-internal",t=>{const e=jf(t.getProvider("auth").getImmediate());return(i=>new hI(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Io(AT,ET,fI(n)),Io(AT,ET,"esm2017")}const mI=300,pI=SC("authIdTokenMaxAge")||mI;let ST=null;const gI=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>pI)return;const s=e?.token;ST!==s&&(ST=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function _I(n=oE()){const t=L1(n,"auth");if(t.isInitialized())return t.getImmediate();const e=zN(n,{popupRedirectResolver:cI,persistence:[ED,uD,s5]}),i=SC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=gI(l.toString());sD(e,c,()=>c(e.currentUser)),iD(e,f=>c(f))}}const s=vC("auth");return s&&jN(e,`http://${s}`),e}function yI(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}IN({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{const l=Oo("internal-error");l.customData=s,e(l)},i.type="text/javascript",i.charset="UTF-8",yI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dI("Browser");var TT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Zc,h5;(function(){var n;function t(P,M){function z(){}z.prototype=M.prototype,P.D=M.prototype,P.prototype=new z,P.prototype.constructor=P,P.C=function(F,X,Q){for(var G=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)G[Yt-2]=arguments[Yt];return M.prototype[X].apply(F,G)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,M,z){z||(z=0);var F=Array(16);if(typeof M=="string")for(var X=0;16>X;++X)F[X]=M.charCodeAt(z++)|M.charCodeAt(z++)<<8|M.charCodeAt(z++)<<16|M.charCodeAt(z++)<<24;else for(X=0;16>X;++X)F[X]=M[z++]|M[z++]<<8|M[z++]<<16|M[z++]<<24;M=P.g[0],z=P.g[1],X=P.g[2];var Q=P.g[3],G=M+(Q^z&(X^Q))+F[0]+3614090360&4294967295;M=z+(G<<7&4294967295|G>>>25),G=Q+(X^M&(z^X))+F[1]+3905402710&4294967295,Q=M+(G<<12&4294967295|G>>>20),G=X+(z^Q&(M^z))+F[2]+606105819&4294967295,X=Q+(G<<17&4294967295|G>>>15),G=z+(M^X&(Q^M))+F[3]+3250441966&4294967295,z=X+(G<<22&4294967295|G>>>10),G=M+(Q^z&(X^Q))+F[4]+4118548399&4294967295,M=z+(G<<7&4294967295|G>>>25),G=Q+(X^M&(z^X))+F[5]+1200080426&4294967295,Q=M+(G<<12&4294967295|G>>>20),G=X+(z^Q&(M^z))+F[6]+2821735955&4294967295,X=Q+(G<<17&4294967295|G>>>15),G=z+(M^X&(Q^M))+F[7]+4249261313&4294967295,z=X+(G<<22&4294967295|G>>>10),G=M+(Q^z&(X^Q))+F[8]+1770035416&4294967295,M=z+(G<<7&4294967295|G>>>25),G=Q+(X^M&(z^X))+F[9]+2336552879&4294967295,Q=M+(G<<12&4294967295|G>>>20),G=X+(z^Q&(M^z))+F[10]+4294925233&4294967295,X=Q+(G<<17&4294967295|G>>>15),G=z+(M^X&(Q^M))+F[11]+2304563134&4294967295,z=X+(G<<22&4294967295|G>>>10),G=M+(Q^z&(X^Q))+F[12]+1804603682&4294967295,M=z+(G<<7&4294967295|G>>>25),G=Q+(X^M&(z^X))+F[13]+4254626195&4294967295,Q=M+(G<<12&4294967295|G>>>20),G=X+(z^Q&(M^z))+F[14]+2792965006&4294967295,X=Q+(G<<17&4294967295|G>>>15),G=z+(M^X&(Q^M))+F[15]+1236535329&4294967295,z=X+(G<<22&4294967295|G>>>10),G=M+(X^Q&(z^X))+F[1]+4129170786&4294967295,M=z+(G<<5&4294967295|G>>>27),G=Q+(z^X&(M^z))+F[6]+3225465664&4294967295,Q=M+(G<<9&4294967295|G>>>23),G=X+(M^z&(Q^M))+F[11]+643717713&4294967295,X=Q+(G<<14&4294967295|G>>>18),G=z+(Q^M&(X^Q))+F[0]+3921069994&4294967295,z=X+(G<<20&4294967295|G>>>12),G=M+(X^Q&(z^X))+F[5]+3593408605&4294967295,M=z+(G<<5&4294967295|G>>>27),G=Q+(z^X&(M^z))+F[10]+38016083&4294967295,Q=M+(G<<9&4294967295|G>>>23),G=X+(M^z&(Q^M))+F[15]+3634488961&4294967295,X=Q+(G<<14&4294967295|G>>>18),G=z+(Q^M&(X^Q))+F[4]+3889429448&4294967295,z=X+(G<<20&4294967295|G>>>12),G=M+(X^Q&(z^X))+F[9]+568446438&4294967295,M=z+(G<<5&4294967295|G>>>27),G=Q+(z^X&(M^z))+F[14]+3275163606&4294967295,Q=M+(G<<9&4294967295|G>>>23),G=X+(M^z&(Q^M))+F[3]+4107603335&4294967295,X=Q+(G<<14&4294967295|G>>>18),G=z+(Q^M&(X^Q))+F[8]+1163531501&4294967295,z=X+(G<<20&4294967295|G>>>12),G=M+(X^Q&(z^X))+F[13]+2850285829&4294967295,M=z+(G<<5&4294967295|G>>>27),G=Q+(z^X&(M^z))+F[2]+4243563512&4294967295,Q=M+(G<<9&4294967295|G>>>23),G=X+(M^z&(Q^M))+F[7]+1735328473&4294967295,X=Q+(G<<14&4294967295|G>>>18),G=z+(Q^M&(X^Q))+F[12]+2368359562&4294967295,z=X+(G<<20&4294967295|G>>>12),G=M+(z^X^Q)+F[5]+4294588738&4294967295,M=z+(G<<4&4294967295|G>>>28),G=Q+(M^z^X)+F[8]+2272392833&4294967295,Q=M+(G<<11&4294967295|G>>>21),G=X+(Q^M^z)+F[11]+1839030562&4294967295,X=Q+(G<<16&4294967295|G>>>16),G=z+(X^Q^M)+F[14]+4259657740&4294967295,z=X+(G<<23&4294967295|G>>>9),G=M+(z^X^Q)+F[1]+2763975236&4294967295,M=z+(G<<4&4294967295|G>>>28),G=Q+(M^z^X)+F[4]+1272893353&4294967295,Q=M+(G<<11&4294967295|G>>>21),G=X+(Q^M^z)+F[7]+4139469664&4294967295,X=Q+(G<<16&4294967295|G>>>16),G=z+(X^Q^M)+F[10]+3200236656&4294967295,z=X+(G<<23&4294967295|G>>>9),G=M+(z^X^Q)+F[13]+681279174&4294967295,M=z+(G<<4&4294967295|G>>>28),G=Q+(M^z^X)+F[0]+3936430074&4294967295,Q=M+(G<<11&4294967295|G>>>21),G=X+(Q^M^z)+F[3]+3572445317&4294967295,X=Q+(G<<16&4294967295|G>>>16),G=z+(X^Q^M)+F[6]+76029189&4294967295,z=X+(G<<23&4294967295|G>>>9),G=M+(z^X^Q)+F[9]+3654602809&4294967295,M=z+(G<<4&4294967295|G>>>28),G=Q+(M^z^X)+F[12]+3873151461&4294967295,Q=M+(G<<11&4294967295|G>>>21),G=X+(Q^M^z)+F[15]+530742520&4294967295,X=Q+(G<<16&4294967295|G>>>16),G=z+(X^Q^M)+F[2]+3299628645&4294967295,z=X+(G<<23&4294967295|G>>>9),G=M+(X^(z|~Q))+F[0]+4096336452&4294967295,M=z+(G<<6&4294967295|G>>>26),G=Q+(z^(M|~X))+F[7]+1126891415&4294967295,Q=M+(G<<10&4294967295|G>>>22),G=X+(M^(Q|~z))+F[14]+2878612391&4294967295,X=Q+(G<<15&4294967295|G>>>17),G=z+(Q^(X|~M))+F[5]+4237533241&4294967295,z=X+(G<<21&4294967295|G>>>11),G=M+(X^(z|~Q))+F[12]+1700485571&4294967295,M=z+(G<<6&4294967295|G>>>26),G=Q+(z^(M|~X))+F[3]+2399980690&4294967295,Q=M+(G<<10&4294967295|G>>>22),G=X+(M^(Q|~z))+F[10]+4293915773&4294967295,X=Q+(G<<15&4294967295|G>>>17),G=z+(Q^(X|~M))+F[1]+2240044497&4294967295,z=X+(G<<21&4294967295|G>>>11),G=M+(X^(z|~Q))+F[8]+1873313359&4294967295,M=z+(G<<6&4294967295|G>>>26),G=Q+(z^(M|~X))+F[15]+4264355552&4294967295,Q=M+(G<<10&4294967295|G>>>22),G=X+(M^(Q|~z))+F[6]+2734768916&4294967295,X=Q+(G<<15&4294967295|G>>>17),G=z+(Q^(X|~M))+F[13]+1309151649&4294967295,z=X+(G<<21&4294967295|G>>>11),G=M+(X^(z|~Q))+F[4]+4149444226&4294967295,M=z+(G<<6&4294967295|G>>>26),G=Q+(z^(M|~X))+F[11]+3174756917&4294967295,Q=M+(G<<10&4294967295|G>>>22),G=X+(M^(Q|~z))+F[2]+718787259&4294967295,X=Q+(G<<15&4294967295|G>>>17),G=z+(Q^(X|~M))+F[9]+3951481745&4294967295,P.g[0]=P.g[0]+M&4294967295,P.g[1]=P.g[1]+(X+(G<<21&4294967295|G>>>11))&4294967295,P.g[2]=P.g[2]+X&4294967295,P.g[3]=P.g[3]+Q&4294967295}i.prototype.u=function(P,M){M===void 0&&(M=P.length);for(var z=M-this.blockSize,F=this.B,X=this.h,Q=0;Q<M;){if(X==0)for(;Q<=z;)s(this,P,Q),Q+=this.blockSize;if(typeof P=="string"){for(;Q<M;)if(F[X++]=P.charCodeAt(Q++),X==this.blockSize){s(this,F),X=0;break}}else for(;Q<M;)if(F[X++]=P[Q++],X==this.blockSize){s(this,F),X=0;break}}this.h=X,this.o+=M},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var M=1;M<P.length-8;++M)P[M]=0;var z=8*this.o;for(M=P.length-8;M<P.length;++M)P[M]=z&255,z/=256;for(this.u(P),P=Array(16),M=z=0;4>M;++M)for(var F=0;32>F;F+=8)P[z++]=this.g[M]>>>F&255;return P};function l(P,M){var z=f;return Object.prototype.hasOwnProperty.call(z,P)?z[P]:z[P]=M(P)}function c(P,M){this.h=M;for(var z=[],F=!0,X=P.length-1;0<=X;X--){var Q=P[X]|0;F&&Q==M||(z[X]=Q,F=!1)}this.g=z}var f={};function m(P){return-128<=P&&128>P?l(P,function(M){return new c([M|0],0>M?-1:0)}):new c([P|0],0>P?-1:0)}function g(P){if(isNaN(P)||!isFinite(P))return E;if(0>P)return L(g(-P));for(var M=[],z=1,F=0;P>=z;F++)M[F]=P/z|0,z*=4294967296;return new c(M,0)}function A(P,M){if(P.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(P.charAt(0)=="-")return L(A(P.substring(1),M));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var z=g(Math.pow(M,8)),F=E,X=0;X<P.length;X+=8){var Q=Math.min(8,P.length-X),G=parseInt(P.substring(X,X+Q),M);8>Q?(Q=g(Math.pow(M,Q)),F=F.j(Q).add(g(G))):(F=F.j(z),F=F.add(g(G)))}return F}var E=m(0),T=m(1),x=m(16777216);n=c.prototype,n.m=function(){if(I(this))return-L(this).m();for(var P=0,M=1,z=0;z<this.g.length;z++){var F=this.i(z);P+=(0<=F?F:4294967296+F)*M,M*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(w(this))return"0";if(I(this))return"-"+L(this).toString(P);for(var M=g(Math.pow(P,6)),z=this,F="";;){var X=$(z,M).g;z=B(z,X.j(M));var Q=((0<z.g.length?z.g[0]:z.h)>>>0).toString(P);if(z=X,w(z))return Q+F;for(;6>Q.length;)Q="0"+Q;F=Q+F}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function w(P){if(P.h!=0)return!1;for(var M=0;M<P.g.length;M++)if(P.g[M]!=0)return!1;return!0}function I(P){return P.h==-1}n.l=function(P){return P=B(this,P),I(P)?-1:w(P)?0:1};function L(P){for(var M=P.g.length,z=[],F=0;F<M;F++)z[F]=~P.g[F];return new c(z,~P.h).add(T)}n.abs=function(){return I(this)?L(this):this},n.add=function(P){for(var M=Math.max(this.g.length,P.g.length),z=[],F=0,X=0;X<=M;X++){var Q=F+(this.i(X)&65535)+(P.i(X)&65535),G=(Q>>>16)+(this.i(X)>>>16)+(P.i(X)>>>16);F=G>>>16,Q&=65535,G&=65535,z[X]=G<<16|Q}return new c(z,z[z.length-1]&-2147483648?-1:0)};function B(P,M){return P.add(L(M))}n.j=function(P){if(w(this)||w(P))return E;if(I(this))return I(P)?L(this).j(L(P)):L(L(this).j(P));if(I(P))return L(this.j(L(P)));if(0>this.l(x)&&0>P.l(x))return g(this.m()*P.m());for(var M=this.g.length+P.g.length,z=[],F=0;F<2*M;F++)z[F]=0;for(F=0;F<this.g.length;F++)for(var X=0;X<P.g.length;X++){var Q=this.i(F)>>>16,G=this.i(F)&65535,Yt=P.i(X)>>>16,Pt=P.i(X)&65535;z[2*F+2*X]+=G*Pt,j(z,2*F+2*X),z[2*F+2*X+1]+=Q*Pt,j(z,2*F+2*X+1),z[2*F+2*X+1]+=G*Yt,j(z,2*F+2*X+1),z[2*F+2*X+2]+=Q*Yt,j(z,2*F+2*X+2)}for(F=0;F<M;F++)z[F]=z[2*F+1]<<16|z[2*F];for(F=M;F<2*M;F++)z[F]=0;return new c(z,0)};function j(P,M){for(;(P[M]&65535)!=P[M];)P[M+1]+=P[M]>>>16,P[M]&=65535,M++}function q(P,M){this.g=P,this.h=M}function $(P,M){if(w(M))throw Error("division by zero");if(w(P))return new q(E,E);if(I(P))return M=$(L(P),M),new q(L(M.g),L(M.h));if(I(M))return M=$(P,L(M)),new q(L(M.g),M.h);if(30<P.g.length){if(I(P)||I(M))throw Error("slowDivide_ only works with positive integers.");for(var z=T,F=M;0>=F.l(P);)z=Z(z),F=Z(F);var X=nt(z,1),Q=nt(F,1);for(F=nt(F,2),z=nt(z,2);!w(F);){var G=Q.add(F);0>=G.l(P)&&(X=X.add(z),Q=G),F=nt(F,1),z=nt(z,1)}return M=B(P,X.j(M)),new q(X,M)}for(X=E;0<=P.l(M);){for(z=Math.max(1,Math.floor(P.m()/M.m())),F=Math.ceil(Math.log(z)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),Q=g(z),G=Q.j(M);I(G)||0<G.l(P);)z-=F,Q=g(z),G=Q.j(M);w(Q)&&(Q=T),X=X.add(Q),P=B(P,G)}return new q(X,P)}n.A=function(P){return $(this,P).h},n.and=function(P){for(var M=Math.max(this.g.length,P.g.length),z=[],F=0;F<M;F++)z[F]=this.i(F)&P.i(F);return new c(z,this.h&P.h)},n.or=function(P){for(var M=Math.max(this.g.length,P.g.length),z=[],F=0;F<M;F++)z[F]=this.i(F)|P.i(F);return new c(z,this.h|P.h)},n.xor=function(P){for(var M=Math.max(this.g.length,P.g.length),z=[],F=0;F<M;F++)z[F]=this.i(F)^P.i(F);return new c(z,this.h^P.h)};function Z(P){for(var M=P.g.length+1,z=[],F=0;F<M;F++)z[F]=P.i(F)<<1|P.i(F-1)>>>31;return new c(z,P.h)}function nt(P,M){var z=M>>5;M%=32;for(var F=P.g.length-z,X=[],Q=0;Q<F;Q++)X[Q]=0<M?P.i(Q+z)>>>M|P.i(Q+z+1)<<32-M:P.i(Q+z);return new c(X,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,h5=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=A,Zc=c}).apply(typeof TT<"u"?TT:typeof self<"u"?self:typeof window<"u"?window:{});var uy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var f5,Sg,d5,My,eA,m5,p5,g5;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,R,D){return _==Array.prototype||_==Object.prototype||(_[R]=D.value),_};function e(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof uy=="object"&&uy];for(var R=0;R<_.length;++R){var D=_[R];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var i=e(this);function s(_,R){if(R)t:{var D=i;_=_.split(".");for(var U=0;U<_.length-1;U++){var rt=_[U];if(!(rt in D))break t;D=D[rt]}_=_[_.length-1],U=D[_],R=R(U),R!=U&&R!=null&&t(D,_,{configurable:!0,writable:!0,value:R})}}function l(_,R){_ instanceof String&&(_+="");var D=0,U=!1,rt={next:function(){if(!U&&D<_.length){var pt=D++;return{value:R(pt,_[pt]),done:!1}}return U=!0,{done:!0,value:void 0}}};return rt[Symbol.iterator]=function(){return rt},rt}s("Array.prototype.values",function(_){return _||function(){return l(this,function(R,D){return D})}});var c=c||{},f=this||self;function m(_){var R=typeof _;return R=R!="object"?R:_?Array.isArray(_)?"array":R:"null",R=="array"||R=="object"&&typeof _.length=="number"}function g(_){var R=typeof _;return R=="object"&&_!=null||R=="function"}function A(_,R,D){return _.call.apply(_.bind,arguments)}function E(_,R,D){if(!_)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var rt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(rt,U),_.apply(R,rt)}}return function(){return _.apply(R,arguments)}}function T(_,R,D){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:E,T.apply(null,arguments)}function x(_,R){var D=Array.prototype.slice.call(arguments,1);return function(){var U=D.slice();return U.push.apply(U,arguments),_.apply(this,U)}}function w(_,R){function D(){}D.prototype=R.prototype,_.aa=R.prototype,_.prototype=new D,_.prototype.constructor=_,_.Qb=function(U,rt,pt){for(var Ot=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)Ot[qe-2]=arguments[qe];return R.prototype[rt].apply(U,Ot)}}function I(_){const R=_.length;if(0<R){const D=Array(R);for(let U=0;U<R;U++)D[U]=_[U];return D}return[]}function L(_,R){for(let D=1;D<arguments.length;D++){const U=arguments[D];if(m(U)){const rt=_.length||0,pt=U.length||0;_.length=rt+pt;for(let Ot=0;Ot<pt;Ot++)_[rt+Ot]=U[Ot]}else _.push(U)}}class B{constructor(R,D){this.i=R,this.j=D,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function j(_){return/^[\s\xa0]*$/.test(_)}function q(){var _=f.navigator;return _&&(_=_.userAgent)?_:""}function $(_){return $[" "](_),_}$[" "]=function(){};var Z=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function nt(_,R,D){for(const U in _)R.call(D,_[U],U,_)}function P(_,R){for(const D in _)R.call(void 0,_[D],D,_)}function M(_){const R={};for(const D in _)R[D]=_[D];return R}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(_,R){let D,U;for(let rt=1;rt<arguments.length;rt++){U=arguments[rt];for(D in U)_[D]=U[D];for(let pt=0;pt<z.length;pt++)D=z[pt],Object.prototype.hasOwnProperty.call(U,D)&&(_[D]=U[D])}}function X(_){var R=1;_=_.split(":");const D=[];for(;0<R&&_.length;)D.push(_.shift()),R--;return _.length&&D.push(_.join(":")),D}function Q(_){f.setTimeout(()=>{throw _},0)}function G(){var _=Ut;let R=null;return _.g&&(R=_.g,_.g=_.g.next,_.g||(_.h=null),R.next=null),R}class Yt{constructor(){this.h=this.g=null}add(R,D){const U=Pt.get();U.set(R,D),this.h?this.h.next=U:this.g=U,this.h=U}}var Pt=new B(()=>new et,_=>_.reset());class et{constructor(){this.next=this.g=this.h=null}set(R,D){this.h=R,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let vt,St=!1,Ut=new Yt,Qt=()=>{const _=f.Promise.resolve(void 0);vt=()=>{_.then(K)}};var K=()=>{for(var _;_=G();){try{_.h.call(_.g)}catch(D){Q(D)}var R=Pt;R.j(_),100>R.h&&(R.h++,_.next=R.g,R.g=_)}St=!1};function ft(){this.s=this.s,this.C=this.C}ft.prototype.s=!1,ft.prototype.ma=function(){this.s||(this.s=!0,this.N())},ft.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function yt(_,R){this.type=_,this.g=this.target=R,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var jt=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var _=!1,R=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const D=()=>{};f.addEventListener("test",D,R),f.removeEventListener("test",D,R)}catch{}return _})();function qt(_,R){if(yt.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var D=this.type=_.type,U=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=R,R=_.relatedTarget){if(Z){t:{try{$(R.nodeName);var rt=!0;break t}catch{}rt=!1}rt||(R=null)}}else D=="mouseover"?R=_.fromElement:D=="mouseout"&&(R=_.toElement);this.relatedTarget=R,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:Wt[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&qt.aa.h.call(this)}}w(qt,yt);var Wt={2:"touch",3:"pen",4:"mouse"};qt.prototype.h=function(){qt.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),wt=0;function ie(_,R,D,U,rt){this.listener=_,this.proxy=null,this.src=R,this.type=D,this.capture=!!U,this.ha=rt,this.key=++wt,this.da=this.fa=!1}function as(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function xs(_){this.src=_,this.g={},this.h=0}xs.prototype.add=function(_,R,D,U,rt){var pt=_.toString();_=this.g[pt],_||(_=this.g[pt]=[],this.h++);var Ot=Vi(_,R,U,rt);return-1<Ot?(R=_[Ot],D||(R.fa=!1)):(R=new ie(R,this.src,pt,!!U,rt),R.fa=D,_.push(R)),R};function Ns(_,R){var D=R.type;if(D in _.g){var U=_.g[D],rt=Array.prototype.indexOf.call(U,R,void 0),pt;(pt=0<=rt)&&Array.prototype.splice.call(U,rt,1),pt&&(as(R),_.g[D].length==0&&(delete _.g[D],_.h--))}}function Vi(_,R,D,U){for(var rt=0;rt<_.length;++rt){var pt=_[rt];if(!pt.da&&pt.listener==R&&pt.capture==!!D&&pt.ha==U)return rt}return-1}var rs="closure_lm_"+(1e6*Math.random()|0),Zs={};function ls(_,R,D,U,rt){if(Array.isArray(R)){for(var pt=0;pt<R.length;pt++)ls(_,R[pt],D,U,rt);return null}return D=Bo(D),_&&_[ge]?_.K(R,D,g(U)?!!U.capture:!1,rt):$s(_,R,D,!1,U,rt)}function $s(_,R,D,U,rt,pt){if(!R)throw Error("Invalid event type");var Ot=g(rt)?!!rt.capture:!!rt,qe=Dn(_);if(qe||(_[rs]=qe=new xs(_)),D=qe.add(R,D,U,Ot,pt),D.proxy)return D;if(U=Ql(),D.proxy=U,U.src=_,U.listener=D,_.addEventListener)jt||(rt=Ot),rt===void 0&&(rt=!1),_.addEventListener(R.toString(),U,rt);else if(_.attachEvent)_.attachEvent(Ya(R.toString()),U);else if(_.addListener&&_.removeListener)_.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Ql(){function _(D){return R.call(_.src,_.listener,D)}const R=Qa;return _}function gr(_,R,D,U,rt){if(Array.isArray(R))for(var pt=0;pt<R.length;pt++)gr(_,R[pt],D,U,rt);else U=g(U)?!!U.capture:!!U,D=Bo(D),_&&_[ge]?(_=_.i,R=String(R).toString(),R in _.g&&(pt=_.g[R],D=Vi(pt,D,U,rt),-1<D&&(as(pt[D]),Array.prototype.splice.call(pt,D,1),pt.length==0&&(delete _.g[R],_.h--)))):_&&(_=Dn(_))&&(R=_.g[R.toString()],_=-1,R&&(_=Vi(R,D,U,rt)),(D=-1<_?R[_]:null)&&Ds(D))}function Ds(_){if(typeof _!="number"&&_&&!_.da){var R=_.src;if(R&&R[ge])Ns(R.i,_);else{var D=_.type,U=_.proxy;R.removeEventListener?R.removeEventListener(D,U,_.capture):R.detachEvent?R.detachEvent(Ya(D),U):R.addListener&&R.removeListener&&R.removeListener(U),(D=Dn(R))?(Ns(D,_),D.h==0&&(D.src=null,R[rs]=null)):as(_)}}}function Ya(_){return _ in Zs?Zs[_]:Zs[_]="on"+_}function Qa(_,R){if(_.da)_=!0;else{R=new qt(R,this);var D=_.listener,U=_.ha||_.src;_.fa&&Ds(_),_=D.call(U,R)}return _}function Dn(_){return _=_[rs],_ instanceof xs?_:null}var Hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bo(_){return typeof _=="function"?_:(_[Hn]||(_[Hn]=function(R){return _.handleEvent(R)}),_[Hn])}function In(){ft.call(this),this.i=new xs(this),this.M=this,this.F=null}w(In,ft),In.prototype[ge]=!0,In.prototype.removeEventListener=function(_,R,D,U){gr(this,_,R,D,U)};function Sn(_,R){var D,U=_.F;if(U)for(D=[];U;U=U.F)D.push(U);if(_=_.M,U=R.type||R,typeof R=="string")R=new yt(R,_);else if(R instanceof yt)R.target=R.target||_;else{var rt=R;R=new yt(U,_),F(R,rt)}if(rt=!0,D)for(var pt=D.length-1;0<=pt;pt--){var Ot=R.g=D[pt];rt=Is(Ot,U,!0,R)&&rt}if(Ot=R.g=_,rt=Is(Ot,U,!0,R)&&rt,rt=Is(Ot,U,!1,R)&&rt,D)for(pt=0;pt<D.length;pt++)Ot=R.g=D[pt],rt=Is(Ot,U,!1,R)&&rt}In.prototype.N=function(){if(In.aa.N.call(this),this.i){var _=this.i,R;for(R in _.g){for(var D=_.g[R],U=0;U<D.length;U++)as(D[U]);delete _.g[R],_.h--}}this.F=null},In.prototype.K=function(_,R,D,U){return this.i.add(String(_),R,!1,D,U)},In.prototype.L=function(_,R,D,U){return this.i.add(String(_),R,!0,D,U)};function Is(_,R,D,U){if(R=_.i.g[String(R)],!R)return!0;R=R.concat();for(var rt=!0,pt=0;pt<R.length;++pt){var Ot=R[pt];if(Ot&&!Ot.da&&Ot.capture==D){var qe=Ot.listener,Xn=Ot.ha||Ot.src;Ot.fa&&Ns(_.i,Ot),rt=qe.call(Xn,U)!==!1&&rt}}return rt&&!U.defaultPrevented}function os(_,R,D){if(typeof _=="function")D&&(_=T(_,D));else if(_&&typeof _.handleEvent=="function")_=T(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(R)?-1:f.setTimeout(_,R||0)}function Os(_){_.g=os(()=>{_.g=null,_.i&&(_.i=!1,Os(_))},_.l);const R=_.h;_.h=null,_.m.apply(null,R)}class Xl extends ft{constructor(R,D){super(),this.m=R,this.l=D,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:Os(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _r(_){ft.call(this),this.h=_,this.g={}}w(_r,ft);var Xa=[];function ht(_){nt(_.g,function(R,D){this.g.hasOwnProperty(D)&&Ds(R)},_),_.g={}}_r.prototype.N=function(){_r.aa.N.call(this),ht(this)},_r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rt=f.JSON.stringify,Ht=f.JSON.parse,he=class{stringify(_){return f.JSON.stringify(_,void 0)}parse(_){return f.JSON.parse(_,void 0)}};function Ge(){}Ge.prototype.h=null;function Ms(_){return _.h||(_.h=_.i())}function ta(){}var ui={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ls(){yt.call(this,"d")}w(Ls,yt);function us(){yt.call(this,"c")}w(us,yt);var cs={},il=null;function jo(){return il=il||new In}cs.La="serverreachability";function Ka(_){yt.call(this,cs.La,_)}w(Ka,yt);function yr(_){const R=jo();Sn(R,new Ka(R))}cs.STAT_EVENT="statevent";function sl(_,R){yt.call(this,cs.STAT_EVENT,_),this.stat=R}w(sl,yt);function ii(_){const R=jo();Sn(R,new sl(R,_))}cs.Ma="timingevent";function al(_,R){yt.call(this,cs.Ma,_),this.size=R}w(al,yt);function Wa(_,R){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){_()},R)}function rl(){this.g=!0}rl.prototype.xa=function(){this.g=!1};function Kl(_,R,D,U,rt,pt){_.info(function(){if(_.g)if(pt)for(var Ot="",qe=pt.split("&"),Xn=0;Xn<qe.length;Xn++){var ye=qe[Xn].split("=");if(1<ye.length){var fi=ye[0];ye=ye[1];var si=fi.split("_");Ot=2<=si.length&&si[1]=="type"?Ot+(fi+"="+ye+"&"):Ot+(fi+"=redacted&")}}else Ot=null;else Ot=pt;return"XMLHTTP REQ ("+U+") [attempt "+rt+"]: "+R+`
`+D+`
`+Ot})}function Wl(_,R,D,U,rt,pt,Ot){_.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+rt+"]: "+R+`
`+D+`
`+pt+" "+Ot})}function Ja(_,R,D,U){_.info(function(){return"XMLHTTP TEXT ("+R+"): "+Za(_,D)+(U?" "+U:"")})}function vr(_,R){_.info(function(){return"TIMEOUT: "+R})}rl.prototype.info=function(){};function Za(_,R){if(!_.g)return R;if(!R)return null;try{var D=JSON.parse(R);if(D){for(_=0;_<D.length;_++)if(Array.isArray(D[_])){var U=D[_];if(!(2>U.length)){var rt=U[1];if(Array.isArray(rt)&&!(1>rt.length)){var pt=rt[0];if(pt!="noop"&&pt!="stop"&&pt!="close")for(var Ot=1;Ot<rt.length;Ot++)rt[Ot]=""}}}}return Rt(D)}catch{return R}}var gn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ci={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ga;function hs(){}w(hs,Ge),hs.prototype.g=function(){return new XMLHttpRequest},hs.prototype.i=function(){return{}},ga=new hs;function ki(_,R,D,U){this.j=_,this.i=R,this.l=D,this.R=U||1,this.U=new _r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jl}function Jl(){this.i=null,this.g="",this.h=!1}var Ho={},ea={};function $a(_,R,D){_.L=1,_.v=ul(un(R)),_.m=D,_.P=!0,Ar(_,null)}function Ar(_,R){_.F=Date.now(),na(_),_.A=un(_.v);var D=_.A,U=_.R;Array.isArray(U)||(U=[String(U)]),Cr(D.i,"t",U),_.C=0,D=_.j.J,_.h=new Jl,_.g=Uh(_.j,D?R:null,!_.m),0<_.O&&(_.M=new Xl(T(_.Y,_,_.g),_.O)),R=_.U,D=_.g,U=_.ca;var rt="readystatechange";Array.isArray(rt)||(rt&&(Xa[0]=rt.toString()),rt=Xa);for(var pt=0;pt<rt.length;pt++){var Ot=ls(D,rt[pt],U||R.handleEvent,!1,R.h||R);if(!Ot)break;R.g[Ot.key]=Ot}R=_.H?M(_.H):{},_.m?(_.u||(_.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,R)):(_.u="GET",_.g.ea(_.A,_.u,null,R)),yr(),Kl(_.i,_.u,_.A,_.l,_.R,_.m)}ki.prototype.ca=function(_){_=_.target;const R=this.M;R&&Qi(_)==3?R.j():this.Y(_)},ki.prototype.Y=function(_){try{if(_==this.g)t:{const si=Qi(this.g);var R=this.g.Ba();const Dr=this.g.Z();if(!(3>si)&&(si!=3||this.g&&(this.h.h||this.g.oa()||hl(this.g)))){this.J||si!=4||R==7||(R==8||0>=Dr?yr(3):yr(2)),ia(this);var D=this.g.Z();this.X=D;e:if(Er(this)){var U=hl(this.g);_="";var rt=U.length,pt=Qi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yi(this),Sr(this);var Ot="";break e}this.h.i=new f.TextDecoder}for(R=0;R<rt;R++)this.h.h=!0,_+=this.h.i.decode(U[R],{stream:!(pt&&R==rt-1)});U.length=0,this.h.g+=_,this.C=0,Ot=this.h.g}else Ot=this.g.oa();if(this.o=D==200,Wl(this.i,this.u,this.A,this.l,this.R,si,D),this.o){if(this.T&&!this.K){e:{if(this.g){var qe,Xn=this.g;if((qe=Xn.g?Xn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(qe)){var ye=qe;break e}}ye=null}if(D=ye)Ja(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pi(this,D);else{this.o=!1,this.s=3,ii(12),Yi(this),Sr(this);break t}}if(this.P){D=!0;let gs;for(;!this.J&&this.C<Ot.length;)if(gs=Zl(this,Ot),gs==ea){si==4&&(this.s=4,ii(14),D=!1),Ja(this.i,this.l,null,"[Incomplete Response]");break}else if(gs==Ho){this.s=4,ii(15),Ja(this.i,this.l,Ot,"[Invalid Chunk]"),D=!1;break}else Ja(this.i,this.l,gs,null),Pi(this,gs);if(Er(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),si!=4||Ot.length!=0||this.h.h||(this.s=1,ii(16),D=!1),this.o=this.o&&D,!D)Ja(this.i,this.l,Ot,"[Invalid Chunked Response]"),Yi(this),Sr(this);else if(0<Ot.length&&!this.W){this.W=!0;var fi=this.j;fi.g==this&&fi.ba&&!fi.M&&(fi.j.info("Great, no buffering proxy detected. Bytes received: "+Ot.length),$u(fi),fi.M=!0,ii(11))}}else Ja(this.i,this.l,Ot,null),Pi(this,Ot);si==4&&Yi(this),this.o&&!this.J&&(si==4?Ph(this.j,this):(this.o=!1,na(this)))}else Mh(this.g),D==400&&0<Ot.indexOf("Unknown SID")?(this.s=3,ii(12)):(this.s=0,ii(13)),Yi(this),Sr(this)}}}catch{}};function Er(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function Zl(_,R){var D=_.C,U=R.indexOf(`
`,D);return U==-1?ea:(D=Number(R.substring(D,U)),isNaN(D)?Ho:(U+=1,U+D>R.length?ea:(R=R.slice(U,U+D),_.C=U+D,R)))}ki.prototype.cancel=function(){this.J=!0,Yi(this)};function na(_){_.S=Date.now()+_.I,On(_,_.I)}function On(_,R){if(_.B!=null)throw Error("WatchDog timer not null");_.B=Wa(T(_.ba,_),R)}function ia(_){_.B&&(f.clearTimeout(_.B),_.B=null)}ki.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(vr(this.i,this.A),this.L!=2&&(yr(),ii(17)),Yi(this),this.s=2,Sr(this)):On(this,this.S-_)};function Sr(_){_.j.G==0||_.J||Ph(_.j,_)}function Yi(_){ia(_);var R=_.M;R&&typeof R.ma=="function"&&R.ma(),_.M=null,ht(_.U),_.g&&(R=_.g,_.g=null,R.abort(),R.ma())}function Pi(_,R){try{var D=_.j;if(D.G!=0&&(D.g==_||Tr(D.h,_))){if(!_.K&&Tr(D.h,_)&&D.G==3){try{var U=D.Da.g.parse(R)}catch{U=null}if(Array.isArray(U)&&U.length==3){var rt=U;if(rt[0]==0){t:if(!D.u){if(D.g)if(D.g.F+3e3<_.F)dl(D),fl(D);else break t;Zu(D),ii(18)}}else D.za=rt[1],0<D.za-D.T&&37500>rt[2]&&D.F&&D.v==0&&!D.C&&(D.C=Wa(T(D.Za,D),6e3));if(1>=Yu(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else va(D,11)}else if((_.K||D.g==_)&&dl(D),!j(R))for(rt=D.Da.g.parse(R),R=0;R<rt.length;R++){let ye=rt[R];if(D.T=ye[0],ye=ye[1],D.G==2)if(ye[0]=="c"){D.K=ye[1],D.ia=ye[2];const fi=ye[3];fi!=null&&(D.la=fi,D.j.info("VER="+D.la));const si=ye[4];si!=null&&(D.Aa=si,D.j.info("SVER="+D.Aa));const Dr=ye[5];Dr!=null&&typeof Dr=="number"&&0<Dr&&(U=1.5*Dr,D.L=U,D.j.info("backChannelRequestTimeoutMs_="+U)),U=D;const gs=_.g;if(gs){const pl=gs.g?gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pl){var pt=U.h;pt.g||pl.indexOf("spdy")==-1&&pl.indexOf("quic")==-1&&pl.indexOf("h2")==-1||(pt.j=pt.l,pt.g=new Set,pt.h&&(ll(pt,pt.h),pt.h=null))}if(U.D){const Aa=gs.g?gs.g.getResponseHeader("X-HTTP-Session-Id"):null;Aa&&(U.ya=Aa,Le(U.I,U.D,Aa))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-_.F,D.j.info("Handshake RTT: "+D.R+"ms")),U=D;var Ot=_;if(U.qa=nc(U,U.J?U.ia:null,U.W),Ot.K){sa(U.h,Ot);var qe=Ot,Xn=U.L;Xn&&(qe.I=Xn),qe.B&&(ia(qe),na(qe)),U.g=Ot}else Ko(U);0<D.i.length&&Ju(D)}else ye[0]!="stop"&&ye[0]!="close"||va(D,7);else D.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?va(D,7):Qo(D):ye[0]!="noop"&&D.l&&D.l.ta(ye),D.v=0)}}yr(4)}catch{}}var fs=class{constructor(_,R){this.g=_,this.map=R}};function $l(_){this.l=_||10,f.PerformanceNavigationTiming?(_=f.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ln(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Yu(_){return _.h?1:_.g?_.g.size:0}function Tr(_,R){return _.h?_.h==R:_.g?_.g.has(R):!1}function ll(_,R){_.g?_.g.add(R):_.h=R}function sa(_,R){_.h&&_.h==R?_.h=null:_.g&&_.g.has(R)&&_.g.delete(R)}$l.prototype.cancel=function(){if(this.i=ds(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function ds(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let R=_.i;for(const D of _.g.values())R=R.concat(D.D);return R}return I(_.i)}function Qu(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(m(_)){for(var R=[],D=_.length,U=0;U<D;U++)R.push(_[U]);return R}R=[],D=0;for(U in _)R[D++]=_[U];return R}function Rh(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(m(_)||typeof _=="string"){var R=[];_=_.length;for(var D=0;D<_;D++)R.push(D);return R}R=[],D=0;for(const U in _)R[D++]=U;return R}}}function to(_,R){if(_.forEach&&typeof _.forEach=="function")_.forEach(R,void 0);else if(m(_)||typeof _=="string")Array.prototype.forEach.call(_,R,void 0);else for(var D=Rh(_),U=Qu(_),rt=U.length,pt=0;pt<rt;pt++)R.call(void 0,U[pt],D&&D[pt],_)}var hi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function on(_,R){if(_){_=_.split("&");for(var D=0;D<_.length;D++){var U=_[D].indexOf("="),rt=null;if(0<=U){var pt=_[D].substring(0,U);rt=_[D].substring(U+1)}else pt=_[D];R(pt,rt?decodeURIComponent(rt.replace(/\+/g," ")):"")}}}function _a(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof _a){this.h=_.h,tr(this,_.j),this.o=_.o,this.g=_.g,ol(this,_.s),this.l=_.l;var R=_.i,D=new er;D.i=R.i,R.g&&(D.g=new Map(R.g),D.h=R.h),Vs(this,D),this.m=_.m}else _&&(R=String(_).match(hi))?(this.h=!1,tr(this,R[1]||"",!0),this.o=br(R[2]||""),this.g=br(R[3]||"",!0),ol(this,R[4]),this.l=br(R[5]||"",!0),Vs(this,R[6]||"",!0),this.m=br(R[7]||"")):(this.h=!1,this.i=new er(null,this.h))}_a.prototype.toString=function(){var _=[],R=this.j;R&&_.push(aa(R,Xu,!0),":");var D=this.g;return(D||R=="file")&&(_.push("//"),(R=this.o)&&_.push(aa(R,Xu,!0),"@"),_.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&_.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&_.push("/"),_.push(aa(D,D.charAt(0)=="/"?Ku:wh,!0))),(D=this.i.toString())&&_.push("?",D),(D=this.m)&&_.push("#",aa(D,xh)),_.join("")};function un(_){return new _a(_)}function tr(_,R,D){_.j=D?br(R,!0):R,_.j&&(_.j=_.j.replace(/:$/,""))}function ol(_,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);_.s=R}else _.s=null}function Vs(_,R,D){R instanceof er?(_.i=R,Nh(_.i,_.h)):(D||(R=aa(R,td)),_.i=new er(R,_.h))}function Le(_,R,D){_.i.set(R,D)}function ul(_){return Le(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function br(_,R){return _?R?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function aa(_,R,D){return typeof _=="string"?(_=encodeURI(_).replace(R,$f),D&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function $f(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var Xu=/[#\/\?@]/g,wh=/[#\?:]/g,Ku=/[#\?]/g,td=/[#\?@]/g,xh=/#/g;function er(_,R){this.h=this.g=null,this.i=_||null,this.j=!!R}function Ai(_){_.g||(_.g=new Map,_.h=0,_.i&&on(_.i,function(R,D){_.add(decodeURIComponent(R.replace(/\+/g," ")),D)}))}n=er.prototype,n.add=function(_,R){Ai(this),this.i=null,_=ms(this,_);var D=this.g.get(_);return D||this.g.set(_,D=[]),D.push(R),this.h+=1,this};function Go(_,R){Ai(_),R=ms(_,R),_.g.has(R)&&(_.i=null,_.h-=_.g.get(R).length,_.g.delete(R))}function qo(_,R){return Ai(_),R=ms(_,R),_.g.has(R)}n.forEach=function(_,R){Ai(this),this.g.forEach(function(D,U){D.forEach(function(rt){_.call(R,rt,U,this)},this)},this)},n.na=function(){Ai(this);const _=Array.from(this.g.values()),R=Array.from(this.g.keys()),D=[];for(let U=0;U<R.length;U++){const rt=_[U];for(let pt=0;pt<rt.length;pt++)D.push(R[U])}return D},n.V=function(_){Ai(this);let R=[];if(typeof _=="string")qo(this,_)&&(R=R.concat(this.g.get(ms(this,_))));else{_=Array.from(this.g.values());for(let D=0;D<_.length;D++)R=R.concat(_[D])}return R},n.set=function(_,R){return Ai(this),this.i=null,_=ms(this,_),qo(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[R]),this.h+=1,this},n.get=function(_,R){return _?(_=this.V(_),0<_.length?String(_[0]):R):R};function Cr(_,R,D){Go(_,R),0<D.length&&(_.i=null,_.g.set(ms(_,R),I(D)),_.h+=D.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],R=Array.from(this.g.keys());for(var D=0;D<R.length;D++){var U=R[D];const pt=encodeURIComponent(String(U)),Ot=this.V(U);for(U=0;U<Ot.length;U++){var rt=pt;Ot[U]!==""&&(rt+="="+encodeURIComponent(String(Ot[U]))),_.push(rt)}}return this.i=_.join("&")};function ms(_,R){return R=String(R),_.j&&(R=R.toLowerCase()),R}function Nh(_,R){R&&!_.j&&(Ai(_),_.i=null,_.g.forEach(function(D,U){var rt=U.toLowerCase();U!=rt&&(Go(this,U),Cr(this,rt,D))},_)),_.j=R}function Wu(_,R){const D=new rl;if(f.Image){const U=new Image;U.onload=x(ps,D,"TestLoadImage: loaded",!0,R,U),U.onerror=x(ps,D,"TestLoadImage: error",!1,R,U),U.onabort=x(ps,D,"TestLoadImage: abort",!1,R,U),U.ontimeout=x(ps,D,"TestLoadImage: timeout",!1,R,U),f.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=_}else R(!1)}function Dh(_,R){const D=new rl,U=new AbortController,rt=setTimeout(()=>{U.abort(),ps(D,"TestPingServer: timeout",!1,R)},1e4);fetch(_,{signal:U.signal}).then(pt=>{clearTimeout(rt),pt.ok?ps(D,"TestPingServer: ok",!0,R):ps(D,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(rt),ps(D,"TestPingServer: error",!1,R)})}function ps(_,R,D,U,rt){try{rt&&(rt.onload=null,rt.onerror=null,rt.onabort=null,rt.ontimeout=null),U(D)}catch{}}function ya(){this.g=new he}function Ih(_,R,D){const U=D||"";try{to(_,function(rt,pt){let Ot=rt;g(rt)&&(Ot=Rt(rt)),R.push(U+pt+"="+encodeURIComponent(Ot))})}catch(rt){throw R.push(U+"type="+encodeURIComponent("_badmap")),rt}}function nr(_){this.l=_.Ub||null,this.j=_.eb||!1}w(nr,Ge),nr.prototype.g=function(){return new Ei(this.l,this.j)},nr.prototype.i=(function(_){return function(){return _}})({});function Ei(_,R){In.call(this),this.D=_,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ei,In),n=Ei.prototype,n.open=function(_,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=R,this.readyState=1,ir(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(R.body=_),(this.D||f).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ra(this)),this.readyState=0},n.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,ir(this)),this.g&&(this.readyState=3,ir(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fo(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fo(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}n.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var R=_.value?_.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!_.done}))&&(this.response=this.responseText+=R)}_.done?ra(this):ir(this),this.readyState==3&&Fo(this)}},n.Ra=function(_){this.g&&(this.response=this.responseText=_,ra(this))},n.Qa=function(_){this.g&&(this.response=_,ra(this))},n.ga=function(){this.g&&ra(this)};function ra(_){_.readyState=4,_.l=null,_.j=null,_.v=null,ir(_)}n.setRequestHeader=function(_,R){this.u.append(_,R)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],R=this.h.entries();for(var D=R.next();!D.done;)D=D.value,_.push(D[0]+": "+D[1]),D=R.next();return _.join(`\r
`)};function ir(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function eo(_){let R="";return nt(_,function(D,U){R+=U,R+=":",R+=D,R+=`\r
`}),R}function Rr(_,R,D){t:{for(U in D){var U=!1;break t}U=!0}U||(D=eo(D),typeof _=="string"?D!=null&&encodeURIComponent(String(D)):Le(_,R,D))}function _n(_){In.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(_n,In);var Ui=/^https?$/i,wr=["POST","PUT"];n=_n.prototype,n.Ha=function(_){this.J=_},n.ea=function(_,R,D,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);R=R?R.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ga.g(),this.v=this.o?Ms(this.o):Ms(ga),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(R,String(_),!0),this.B=!1}catch(pt){no(this,pt);return}if(_=D||"",D=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var rt in U)D.set(rt,U[rt]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const pt of U.keys())D.set(pt,U.get(pt));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(D.keys()).find(pt=>pt.toLowerCase()=="content-type"),rt=f.FormData&&_ instanceof f.FormData,!(0<=Array.prototype.indexOf.call(wr,R,void 0))||U||rt||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pt,Ot]of D)this.g.setRequestHeader(pt,Ot);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yo(this),this.u=!0,this.g.send(_),this.u=!1}catch(pt){no(this,pt)}};function no(_,R){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=R,_.m=5,cl(_),xr(_)}function cl(_){_.A||(_.A=!0,Sn(_,"complete"),Sn(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,Sn(this,"complete"),Sn(this,"abort"),xr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xr(this,!0)),_n.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Oh(this):this.bb())},n.bb=function(){Oh(this)};function Oh(_){if(_.h&&typeof c<"u"&&(!_.v[1]||Qi(_)!=4||_.Z()!=2)){if(_.u&&Qi(_)==4)os(_.Ea,0,_);else if(Sn(_,"readystatechange"),Qi(_)==4){_.h=!1;try{const Ot=_.Z();t:switch(Ot){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break t;default:R=!1}var D;if(!(D=R)){var U;if(U=Ot===0){var rt=String(_.D).match(hi)[1]||null;!rt&&f.self&&f.self.location&&(rt=f.self.location.protocol.slice(0,-1)),U=!Ui.test(rt?rt.toLowerCase():"")}D=U}if(D)Sn(_,"complete"),Sn(_,"success");else{_.m=6;try{var pt=2<Qi(_)?_.g.statusText:""}catch{pt=""}_.l=pt+" ["+_.Z()+"]",cl(_)}}finally{xr(_)}}}}function xr(_,R){if(_.g){Yo(_);const D=_.g,U=_.v[0]?()=>{}:null;_.g=null,_.v=null,R||Sn(_,"ready");try{D.onreadystatechange=U}catch{}}}function Yo(_){_.I&&(f.clearTimeout(_.I),_.I=null)}n.isActive=function(){return!!this.g};function Qi(_){return _.g?_.g.readyState:0}n.Z=function(){try{return 2<Qi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(_){if(this.g){var R=this.g.responseText;return _&&R.indexOf(_)==0&&(R=R.substring(_.length)),Ht(R)}};function hl(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function Mh(_){const R={};_=(_.g&&2<=Qi(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<_.length;U++){if(j(_[U]))continue;var D=X(_[U]);const rt=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const pt=R[rt]||[];R[rt]=pt,pt.push(D)}P(R,function(U){return U.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function io(_,R,D){return D&&D.internalChannelParams&&D.internalChannelParams[_]||R}function Lh(_){this.Aa=0,this.i=[],this.j=new rl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=io("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=io("baseRetryDelayMs",5e3,_),this.cb=io("retryDelaySeedMs",1e4,_),this.Wa=io("forwardChannelMaxRetries",2,_),this.wa=io("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new $l(_&&_.concurrentRequestLimit),this.Da=new ya,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Lh.prototype,n.la=8,n.G=1,n.connect=function(_,R,D,U){ii(0),this.W=_,this.H=R||{},D&&U!==void 0&&(this.H.OSID=D,this.H.OAID=U),this.F=this.X,this.I=nc(this,null,this.W),Ju(this)};function Qo(_){if(Vh(_),_.G==3){var R=_.U++,D=un(_.I);if(Le(D,"SID",_.K),Le(D,"RID",R),Le(D,"TYPE","terminate"),sr(_,D),R=new ki(_,_.j,R),R.L=2,R.v=ul(un(D)),D=!1,f.navigator&&f.navigator.sendBeacon)try{D=f.navigator.sendBeacon(R.v.toString(),"")}catch{}!D&&f.Image&&(new Image().src=R.v,D=!0),D||(R.g=Uh(R.j,null),R.g.ea(R.v)),R.F=Date.now(),na(R)}ec(_)}function fl(_){_.g&&($u(_),_.g.cancel(),_.g=null)}function Vh(_){fl(_),_.u&&(f.clearTimeout(_.u),_.u=null),dl(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&f.clearTimeout(_.s),_.s=null)}function Ju(_){if(!ln(_.h)&&!_.s){_.s=!0;var R=_.Ga;vt||Qt(),St||(vt(),St=!0),Ut.add(R,_),_.B=0}}function Km(_,R){return Yu(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=R.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=Wa(T(_.Ga,_,R),Nr(_,_.B)),_.B++,!0)}n.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const rt=new ki(this,this.j,_);let pt=this.o;if(this.S&&(pt?(pt=M(pt),F(pt,this.S)):pt=this.S),this.m!==null||this.O||(rt.H=pt,pt=null),this.P)t:{for(var R=0,D=0;D<this.i.length;D++){e:{var U=this.i[D];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break e}U=void 0}if(U===void 0)break;if(R+=U,4096<R){R=D;break t}if(R===4096||D===this.i.length-1){R=D+1;break t}}R=1e3}else R=1e3;R=Xo(this,rt,R),D=un(this.I),Le(D,"RID",_),Le(D,"CVER",22),this.D&&Le(D,"X-HTTP-Session-Id",this.D),sr(this,D),pt&&(this.O?R="headers="+encodeURIComponent(String(eo(pt)))+"&"+R:this.m&&Rr(D,this.m,pt)),ll(this.h,rt),this.Ua&&Le(D,"TYPE","init"),this.P?(Le(D,"$req",R),Le(D,"SID","null"),rt.T=!0,$a(rt,D,null)):$a(rt,D,R),this.G=2}}else this.G==3&&(_?kh(this,_):this.i.length==0||ln(this.h)||kh(this))};function kh(_,R){var D;R?D=R.l:D=_.U++;const U=un(_.I);Le(U,"SID",_.K),Le(U,"RID",D),Le(U,"AID",_.T),sr(_,U),_.m&&_.o&&Rr(U,_.m,_.o),D=new ki(_,_.j,D,_.B+1),_.m===null&&(D.H=_.o),R&&(_.i=R.D.concat(_.i)),R=Xo(_,D,1e3),D.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),ll(_.h,D),$a(D,U,R)}function sr(_,R){_.H&&nt(_.H,function(D,U){Le(R,U,D)}),_.l&&to({},function(D,U){Le(R,U,D)})}function Xo(_,R,D){D=Math.min(_.i.length,D);var U=_.l?T(_.l.Na,_.l,_):null;t:{var rt=_.i;let pt=-1;for(;;){const Ot=["count="+D];pt==-1?0<D?(pt=rt[0].g,Ot.push("ofs="+pt)):pt=0:Ot.push("ofs="+pt);let qe=!0;for(let Xn=0;Xn<D;Xn++){let ye=rt[Xn].g;const fi=rt[Xn].map;if(ye-=pt,0>ye)pt=Math.max(0,rt[Xn].g-100),qe=!1;else try{Ih(fi,Ot,"req"+ye+"_")}catch{U&&U(fi)}}if(qe){U=Ot.join("&");break t}}}return _=_.i.splice(0,D),R.D=_,U}function Ko(_){if(!_.g&&!_.u){_.Y=1;var R=_.Fa;vt||Qt(),St||(vt(),St=!0),Ut.add(R,_),_.v=0}}function Zu(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=Wa(T(_.Fa,_),Nr(_,_.v)),_.v++,!0)}n.Fa=function(){if(this.u=null,tc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=Wa(T(this.ab,this),_)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ii(10),fl(this),tc(this))};function $u(_){_.A!=null&&(f.clearTimeout(_.A),_.A=null)}function tc(_){_.g=new ki(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var R=un(_.qa);Le(R,"RID","rpc"),Le(R,"SID",_.K),Le(R,"AID",_.T),Le(R,"CI",_.F?"0":"1"),!_.F&&_.ja&&Le(R,"TO",_.ja),Le(R,"TYPE","xmlhttp"),sr(_,R),_.m&&_.o&&Rr(R,_.m,_.o),_.L&&(_.g.I=_.L);var D=_.g;_=_.ia,D.L=1,D.v=ul(un(R)),D.m=null,D.P=!0,Ar(D,_)}n.Za=function(){this.C!=null&&(this.C=null,fl(this),Zu(this),ii(19))};function dl(_){_.C!=null&&(f.clearTimeout(_.C),_.C=null)}function Ph(_,R){var D=null;if(_.g==R){dl(_),$u(_),_.g=null;var U=2}else if(Tr(_.h,R))D=R.D,sa(_.h,R),U=1;else return;if(_.G!=0){if(R.o)if(U==1){D=R.m?R.m.length:0,R=Date.now()-R.F;var rt=_.B;U=jo(),Sn(U,new al(U,D)),Ju(_)}else Ko(_);else if(rt=R.s,rt==3||rt==0&&0<R.X||!(U==1&&Km(_,R)||U==2&&Zu(_)))switch(D&&0<D.length&&(R=_.h,R.i=R.i.concat(D)),rt){case 1:va(_,5);break;case 4:va(_,10);break;case 3:va(_,6);break;default:va(_,2)}}}function Nr(_,R){let D=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(D*=2),D*R}function va(_,R){if(_.j.info("Error code "+R),R==2){var D=T(_.fb,_),U=_.Xa;const rt=!U;U=new _a(U||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||tr(U,"https"),ul(U),rt?Wu(U.toString(),D):Dh(U.toString(),D)}else ii(2);_.G=0,_.l&&_.l.sa(R),ec(_),Vh(_)}n.fb=function(_){_?(this.j.info("Successfully pinged google.com"),ii(2)):(this.j.info("Failed to ping google.com"),ii(1))};function ec(_){if(_.G=0,_.ka=[],_.l){const R=ds(_.h);(R.length!=0||_.i.length!=0)&&(L(_.ka,R),L(_.ka,_.i),_.h.i.length=0,I(_.i),_.i.length=0),_.l.ra()}}function nc(_,R,D){var U=D instanceof _a?un(D):new _a(D);if(U.g!="")R&&(U.g=R+"."+U.g),ol(U,U.s);else{var rt=f.location;U=rt.protocol,R=R?R+"."+rt.hostname:rt.hostname,rt=+rt.port;var pt=new _a(null);U&&tr(pt,U),R&&(pt.g=R),rt&&ol(pt,rt),D&&(pt.l=D),U=pt}return D=_.D,R=_.ya,D&&R&&Le(U,D,R),Le(U,"VER",_.la),sr(_,U),U}function Uh(_,R,D){if(R&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return R=_.Ca&&!_.pa?new _n(new nr({eb:D})):new _n(_.pa),R.Ha(_.J),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function zh(){}n=zh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ic(){}ic.prototype.g=function(_,R){return new Qe(_,R)};function Qe(_,R){In.call(this),this.g=new Lh(R),this.l=_,this.h=R&&R.messageUrlParams||null,_=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(_?_["X-WebChannel-Content-Type"]=R.messageContentType:_={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(_?_["X-WebChannel-Client-Profile"]=R.va:_={"X-WebChannel-Client-Profile":R.va}),this.g.S=_,(_=R&&R.Sb)&&!j(_)&&(this.g.m=_),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!j(R)&&(this.g.D=R,_=this.h,_!==null&&R in _&&(_=this.h,R in _&&delete _[R])),this.j=new ml(this)}w(Qe,In),Qe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qe.prototype.close=function(){Qo(this.g)},Qe.prototype.o=function(_){var R=this.g;if(typeof _=="string"){var D={};D.__data__=_,_=D}else this.u&&(D={},D.__data__=Rt(_),_=D);R.i.push(new fs(R.Ya++,_)),R.G==3&&Ju(R)},Qe.prototype.N=function(){this.g.l=null,delete this.j,Qo(this.g),delete this.g,Qe.aa.N.call(this)};function Bh(_){Ls.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var R=_.__sm__;if(R){t:{for(const D in R){_=D;break t}_=void 0}(this.i=_)&&(_=this.i,R=R!==null&&_ in R?R[_]:void 0),this.data=R}else this.data=_}w(Bh,Ls);function jh(){us.call(this),this.status=1}w(jh,us);function ml(_){this.g=_}w(ml,zh),ml.prototype.ua=function(){Sn(this.g,"a")},ml.prototype.ta=function(_){Sn(this.g,new Bh(_))},ml.prototype.sa=function(_){Sn(this.g,new jh)},ml.prototype.ra=function(){Sn(this.g,"b")},ic.prototype.createWebChannel=ic.prototype.g,Qe.prototype.send=Qe.prototype.o,Qe.prototype.open=Qe.prototype.m,Qe.prototype.close=Qe.prototype.close,g5=function(){return new ic},p5=function(){return jo()},m5=cs,eA={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gn.NO_ERROR=0,gn.TIMEOUT=8,gn.HTTP_ERROR=6,My=gn,ci.COMPLETE="complete",d5=ci,ta.EventType=ui,ui.OPEN="a",ui.CLOSE="b",ui.ERROR="c",ui.MESSAGE="d",In.prototype.listen=In.prototype.K,Sg=ta,_n.prototype.listenOnce=_n.prototype.L,_n.prototype.getLastError=_n.prototype.Ka,_n.prototype.getLastErrorCode=_n.prototype.Ba,_n.prototype.getStatus=_n.prototype.Z,_n.prototype.getResponseJson=_n.prototype.Oa,_n.prototype.getResponseText=_n.prototype.oa,_n.prototype.send=_n.prototype.ea,_n.prototype.setWithCredentials=_n.prototype.Ha,f5=_n}).apply(typeof uy<"u"?uy:typeof self<"u"?self:typeof window<"u"?window:{});const bT="@firebase/firestore",CT="4.8.0";class Qs{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Qs.UNAUTHENTICATED=new Qs(null),Qs.GOOGLE_CREDENTIALS=new Qs("google-credentials-uid"),Qs.FIRST_PARTY=new Qs("first-party-uid"),Qs.MOCK_USER=new Qs("mock-user");let Pm="11.10.0";const Mf=new M1("@firebase/firestore");function $d(){return Mf.logLevel}function Gt(n,...t){if(Mf.logLevel<=Pe.DEBUG){const e=t.map(yE);Mf.debug(`Firestore (${Pm}): ${n}`,...e)}}function Vu(n,...t){if(Mf.logLevel<=Pe.ERROR){const e=t.map(yE);Mf.error(`Firestore (${Pm}): ${n}`,...e)}}function ku(n,...t){if(Mf.logLevel<=Pe.WARN){const e=t.map(yE);Mf.warn(`Firestore (${Pm}): ${n}`,...e)}}function yE(n){if(typeof n=="string")return n;try{return(function(e){return JSON.stringify(e)})(n)}catch{return n}}function re(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,_5(n,i,e)}function _5(n,t,e){let i=`FIRESTORE (${Pm}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Vu(i),new Error(i)}function an(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||_5(t,s,i)}function pe(n,t){return n}const Et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bt extends Bu{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nu{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class y5{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class v5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Qs.UNAUTHENTICATED)))}shutdown(){}}class vI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class AI{constructor(t){this.t=t,this.currentUser=Qs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){an(this.o===void 0,42304);let i=this.i;const s=m=>this.i!==i?(i=this.i,e(m)):Promise.resolve();let l=new Nu;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Nu,t.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const m=l;t.enqueueRetryable((async()=>{await m.promise,await s(this.currentUser)}))},f=m=>{Gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Nu)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(Gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(an(typeof i.accessToken=="string",31837,{l:i}),new y5(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return an(t===null||typeof t=="string",2055,{h:t}),new Qs(t)}}class EI{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=Qs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class SI{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new EI(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Qs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class RT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TI{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cr(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){an(this.o===void 0,3512);const i=l=>{l.error!=null&&Gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Gt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable((()=>i(l)))};const s=l=>{Gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new RT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(an(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new RT(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function bI(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}function A5(){return new TextEncoder}class U1{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=bI(40);for(let l=0;l<s.length;++l)i.length<20&&s[l]<e&&(i+=t.charAt(s[l]%62))}return i}}function xe(n,t){return n<t?-1:n>t?1:0}function nA(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),s=t.codePointAt(e);if(i!==s){if(i<128&&s<128)return xe(i,s);{const l=A5(),c=CI(l.encode(wT(n,e)),l.encode(wT(t,e)));return c!==0?c:xe(i,s)}}e+=i>65535?2:1}return xe(n.length,t.length)}function wT(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function CI(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return xe(n[e],t[e]);return xe(n.length,t.length)}function gm(n,t,e){return n.length===t.length&&n.every(((i,s)=>e(i,t[s])))}const xT="__name__";class Do{constructor(t,e,i){e===void 0?e=0:e>t.length&&re(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&re(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Do.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Do?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const l=Do.compareSegments(t.get(s),e.get(s));if(l!==0)return l}return xe(t.length,e.length)}static compareSegments(t,e){const i=Do.isNumericId(t),s=Do.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?Do.extractNumericId(t).compare(Do.extractNumericId(e)):nA(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Zc.fromString(t.substring(4,t.length-2))}}class An extends Do{construct(t,e,i){return new An(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Bt(Et.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((s=>s.length>0)))}return new An(e)}static emptyPath(){return new An([])}}const RI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ns extends Do{construct(t,e,i){return new ns(t,e,i)}static isValidIdentifier(t){return RI.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ns.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xT}static keyField(){return new ns([xT])}static fromServerFormat(t){const e=[];let i="",s=0;const l=()=>{if(i.length===0)throw new Bt(Et.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;s<t.length;){const f=t[s];if(f==="\\"){if(s+1===t.length)throw new Bt(Et.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Bt(Et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(i+=f,s++):(l(),s++)}if(l(),c)throw new Bt(Et.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ns(e)}static emptyPath(){return new ns([])}}class Jt{constructor(t){this.path=t}static fromPath(t){return new Jt(An.fromString(t))}static fromName(t){return new Jt(An.fromString(t).popFirst(5))}static empty(){return new Jt(An.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&An.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return An.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Jt(new An(t.slice()))}}function vE(n,t,e){if(!e)throw new Bt(Et.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function E5(n,t,e,i){if(t===!0&&i===!0)throw new Bt(Et.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function NT(n){if(!Jt.isDocumentKey(n))throw new Bt(Et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function DT(n){if(Jt.isDocumentKey(n))throw new Bt(Et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function S5(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function z1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":re(12329,{type:typeof n})}function Ks(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Bt(Et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=z1(n);throw new Bt(Et.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function Oi(n,t){const e={typeString:n};return t&&(e.value=t),e}function S0(n,t){if(!S5(n))throw new Bt(Et.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const s=t[i].typeString,l="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(s&&typeof c!==s){e=`JSON field '${i}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){e=`Expected '${i}' field to equal '${l.value}'`;break}}if(e)throw new Bt(Et.INVALID_ARGUMENT,e);return!0}const IT=-62135596800,OT=1e6;class sn{static now(){return sn.fromMillis(Date.now())}static fromDate(t){return sn.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*OT);return new sn(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Bt(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Bt(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<IT)throw new Bt(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Bt(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OT}_compareTo(t){return this.seconds===t.seconds?xe(this.nanoseconds,t.nanoseconds):xe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:sn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(S0(t,sn._jsonSchema))return new sn(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-IT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}sn._jsonSchemaVersion="firestore/timestamp/1.0",sn._jsonSchema={type:Oi("string",sn._jsonSchemaVersion),seconds:Oi("number"),nanoseconds:Oi("number")};class ce{static fromTimestamp(t){return new ce(t)}static min(){return new ce(new sn(0,0))}static max(){return new ce(new sn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Zg=-1;function wI(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(i===1e9?new sn(e+1,0):new sn(e,i));return new ah(s,Jt.empty(),t)}function xI(n){return new ah(n.readTime,n.key,Zg)}class ah{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new ah(ce.min(),Jt.empty(),Zg)}static max(){return new ah(ce.max(),Jt.empty(),Zg)}}function NI(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Jt.comparator(n.documentKey,t.documentKey),e!==0?e:xe(n.largestBatchId,t.largestBatchId))}const DI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class II{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Um(n){if(n.code!==Et.FAILED_PRECONDITION||n.message!==DI)throw n;Gt("LocalStore","Unexpectedly lost primary lease")}class bt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new bt(((i,s)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(i,s)},this.catchCallback=l=>{this.wrapFailure(e,l).next(i,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof bt?e:bt.resolve(e)}catch(e){return bt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):bt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):bt.reject(e)}static resolve(t){return new bt(((e,i)=>{e(t)}))}static reject(t){return new bt(((e,i)=>{i(t)}))}static waitFor(t){return new bt(((e,i)=>{let s=0,l=0,c=!1;t.forEach((f=>{++s,f.next((()=>{++l,c&&l===s&&e()}),(m=>i(m)))})),c=!0,l===s&&e()}))}static or(t){let e=bt.resolve(!1);for(const i of t)e=e.next((s=>s?bt.resolve(s):i()));return e}static forEach(t,e){const i=[];return t.forEach(((s,l)=>{i.push(e.call(this,s,l))})),this.waitFor(i)}static mapArray(t,e){return new bt(((i,s)=>{const l=t.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;e(t[g]).next((A=>{c[g]=A,++f,f===l&&i(c)}),(A=>s(A)))}}))}static doWhile(t,e){return new bt(((i,s)=>{const l=()=>{t()===!0?e().next((()=>{l()}),s):i()};l()}))}}function OI(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function zm(n){return n.name==="IndexedDbTransactionError"}class B1{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this._e(i),this.ae=i=>e.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}B1.ue=-1;const AE=-1;function j1(n){return n==null}function $y(n){return n===0&&1/n==-1/0}function MI(n){return typeof n=="number"&&Number.isInteger(n)&&!$y(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const T5="";function LI(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=MT(t)),t=VI(n.get(e),t);return MT(t)}function VI(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const l=n.charAt(s);switch(l){case"\0":e+="";break;case T5:e+="";break;default:e+=l}}return e}function MT(n){return n+T5+""}function LT(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function yh(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function b5(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}let Li=class iA{constructor(t,e){this.comparator=t,this.root=e||$c.EMPTY}insert(t,e){return new iA(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,$c.BLACK,null,null))}remove(t){return new iA(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$c.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new cy(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new cy(this.root,t,this.comparator,!1)}getReverseIterator(){return new cy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new cy(this.root,t,this.comparator,!0)}},cy=class{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,e&&s&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},$c=class Eu{constructor(t,e,i,s,l){this.key=t,this.value=e,this.color=i??Eu.RED,this.left=s??Eu.EMPTY,this.right=l??Eu.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,l){return new Eu(t??this.key,e??this.value,i??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const l=i(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,e,i),null):l===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Eu.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return Eu.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Eu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Eu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw re(27949);return t+(this.isRed()?0:1)}};$c.EMPTY=null,$c.RED=!0,$c.BLACK=!1;$c.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(t,e,i,s,l){return this}insert(t,e,i){return new $c(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qi{constructor(t){this.comparator=t,this.data=new Li(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new VT(this.data.getIterator())}getIteratorFrom(t){return new VT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof qi)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,l=i.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new qi(this.comparator);return e.data=t,e}}class VT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class dr{constructor(t){this.fields=t,t.sort(ns.comparator)}static empty(){return new dr([])}unionWith(t){let e=new qi(ns.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new dr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return gm(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}class C5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class is{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new C5("Invalid base64 string: "+l):l}})(t);return new is(e)}static fromUint8Array(t){const e=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(t);return new is(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}is.EMPTY_BYTE_STRING=new is("");const kI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rh(n){if(an(!!n,39018),typeof n=="string"){let t=0;const e=kI.exec(n);if(an(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:yi(n.seconds),nanos:yi(n.nanos)}}function yi(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function lh(n){return typeof n=="string"?is.fromBase64String(n):is.fromUint8Array(n)}const R5="server_timestamp",w5="__type__",x5="__previous_value__",N5="__local_write_time__";function EE(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[w5])===null||e===void 0?void 0:e.stringValue)===R5}function H1(n){const t=n.mapValue.fields[x5];return EE(t)?H1(t):t}function $g(n){const t=rh(n.mapValue.fields[N5].timestampValue);return new sn(t.seconds,t.nanos)}class PI{constructor(t,e,i,s,l,c,f,m,g,A){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=A}}const t1="(default)";class _m{constructor(t,e){this.projectId=t,this.database=e||t1}static empty(){return new _m("","")}get isDefaultDatabase(){return this.database===t1}isEqual(t){return t instanceof _m&&t.projectId===this.projectId&&t.database===this.database}}const D5="__type__",UI="__max__",hy={mapValue:{}},I5="__vector__",e1="value";function oh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?EE(n)?4:BI(n)?9007199254740991:zI(n)?10:11:re(28295,{value:n})}function ko(n,t){if(n===t)return!0;const e=oh(n);if(e!==oh(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return $g(n).isEqual($g(t));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=rh(s.timestampValue),f=rh(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(s,l){return lh(s.bytesValue).isEqual(lh(l.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(s,l){return yi(s.geoPointValue.latitude)===yi(l.geoPointValue.latitude)&&yi(s.geoPointValue.longitude)===yi(l.geoPointValue.longitude)})(n,t);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return yi(s.integerValue)===yi(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=yi(s.doubleValue),f=yi(l.doubleValue);return c===f?$y(c)===$y(f):isNaN(c)&&isNaN(f)}return!1})(n,t);case 9:return gm(n.arrayValue.values||[],t.arrayValue.values||[],ko);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},f=l.mapValue.fields||{};if(LT(c)!==LT(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!ko(c[m],f[m])))return!1;return!0})(n,t);default:return re(52216,{left:n})}}function t0(n,t){return(n.values||[]).find((e=>ko(e,t)))!==void 0}function ym(n,t){if(n===t)return 0;const e=oh(n),i=oh(t);if(e!==i)return xe(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return xe(n.booleanValue,t.booleanValue);case 2:return(function(l,c){const f=yi(l.integerValue||l.doubleValue),m=yi(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,t);case 3:return kT(n.timestampValue,t.timestampValue);case 4:return kT($g(n),$g(t));case 5:return nA(n.stringValue,t.stringValue);case 6:return(function(l,c){const f=lh(l),m=lh(c);return f.compareTo(m)})(n.bytesValue,t.bytesValue);case 7:return(function(l,c){const f=l.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const A=xe(f[g],m[g]);if(A!==0)return A}return xe(f.length,m.length)})(n.referenceValue,t.referenceValue);case 8:return(function(l,c){const f=xe(yi(l.latitude),yi(c.latitude));return f!==0?f:xe(yi(l.longitude),yi(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return PT(n.arrayValue,t.arrayValue);case 10:return(function(l,c){var f,m,g,A;const E=l.fields||{},T=c.fields||{},x=(f=E[e1])===null||f===void 0?void 0:f.arrayValue,w=(m=T[e1])===null||m===void 0?void 0:m.arrayValue,I=xe(((g=x?.values)===null||g===void 0?void 0:g.length)||0,((A=w?.values)===null||A===void 0?void 0:A.length)||0);return I!==0?I:PT(x,w)})(n.mapValue,t.mapValue);case 11:return(function(l,c){if(l===hy.mapValue&&c===hy.mapValue)return 0;if(l===hy.mapValue)return 1;if(c===hy.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=c.fields||{},A=Object.keys(g);m.sort(),A.sort();for(let E=0;E<m.length&&E<A.length;++E){const T=nA(m[E],A[E]);if(T!==0)return T;const x=ym(f[m[E]],g[A[E]]);if(x!==0)return x}return xe(m.length,A.length)})(n.mapValue,t.mapValue);default:throw re(23264,{le:e})}}function kT(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return xe(n,t);const e=rh(n),i=rh(t),s=xe(e.seconds,i.seconds);return s!==0?s:xe(e.nanos,i.nanos)}function PT(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const l=ym(e[s],i[s]);if(l)return l}return xe(e.length,i.length)}function vm(n){return sA(n)}function sA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const i=rh(e);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return lh(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return Jt.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let i="[",s=!0;for(const l of e.values||[])s?s=!1:i+=",",i+=sA(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(e){const i=Object.keys(e.fields||{}).sort();let s="{",l=!0;for(const c of i)l?l=!1:s+=",",s+=`${c}:${sA(e.fields[c])}`;return s+"}"})(n.mapValue):re(61005,{value:n})}function Ly(n){switch(oh(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=H1(n);return t?16+Ly(t):16;case 5:return 2*n.stringValue.length;case 6:return lh(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,l)=>s+Ly(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return yh(i.fields,((l,c)=>{s+=l.length+Ly(c)})),s})(n.mapValue);default:throw re(13486,{value:n})}}function UT(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function aA(n){return!!n&&"integerValue"in n}function SE(n){return!!n&&"arrayValue"in n}function zT(n){return!!n&&"nullValue"in n}function BT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vy(n){return!!n&&"mapValue"in n}function zI(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[D5])===null||e===void 0?void 0:e.stringValue)===I5}function Mg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return yh(n.mapValue.fields,((e,i)=>t.mapValue.fields[e]=Mg(i))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Mg(n.arrayValue.values[e]);return t}return Object.assign({},n)}function BI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===UI}class ja{constructor(t){this.value=t}static empty(){return new ja({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Vy(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Mg(e)}setAll(t){let e=ns.emptyPath(),i={},s=[];t.forEach(((c,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,i,s),i={},s=[],e=f.popLast()}c?i[f.lastSegment()]=Mg(c):s.push(f.lastSegment())}));const l=this.getFieldsMap(e);this.applyChanges(l,i,s)}delete(t){const e=this.field(t.popLast());Vy(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ko(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];Vy(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){yh(e,((s,l)=>t[s]=l));for(const s of i)delete t[s]}clone(){return new ja(Mg(this.value))}}function O5(n){const t=[];return yh(n.fields,((e,i)=>{const s=new ns([e]);if(Vy(i)){const l=O5(i.mapValue).fields;if(l.length===0)t.push(s);else for(const c of l)t.push(s.child(c))}else t.push(s)})),new dr(t)}class Xs{constructor(t,e,i,s,l,c,f){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(t){return new Xs(t,0,ce.min(),ce.min(),ce.min(),ja.empty(),0)}static newFoundDocument(t,e,i,s){return new Xs(t,1,e,ce.min(),i,s,0)}static newNoDocument(t,e){return new Xs(t,2,e,ce.min(),ce.min(),ja.empty(),0)}static newUnknownDocument(t,e){return new Xs(t,3,e,ce.min(),ce.min(),ja.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ja.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ja.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Xs&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Xs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class n1{constructor(t,e){this.position=t,this.inclusive=e}}function jT(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const l=t[s],c=n.position[s];if(l.field.isKeyField()?i=Jt.comparator(Jt.fromName(c.referenceValue),e.key):i=ym(c,e.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function HT(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!ko(n.position[e],t.position[e]))return!1;return!0}class i1{constructor(t,e="asc"){this.field=t,this.dir=e}}function jI(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class M5{}class Ii extends M5{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new GI(t,e,i):e==="array-contains"?new YI(t,i):e==="in"?new QI(t,i):e==="not-in"?new XI(t,i):e==="array-contains-any"?new KI(t,i):new Ii(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new qI(t,i):new FI(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(ym(e,this.value)):e!==null&&oh(this.value)===oh(e)&&this.matchesComparison(ym(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hl extends M5{constructor(t,e){super(),this.filters=t,this.op=e,this.he=null}static create(t,e){return new Hl(t,e)}matches(t){return L5(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function L5(n){return n.op==="and"}function V5(n){return HI(n)&&L5(n)}function HI(n){for(const t of n.filters)if(t instanceof Hl)return!1;return!0}function rA(n){if(n instanceof Ii)return n.field.canonicalString()+n.op.toString()+vm(n.value);if(V5(n))return n.filters.map((t=>rA(t))).join(",");{const t=n.filters.map((e=>rA(e))).join(",");return`${n.op}(${t})`}}function k5(n,t){return n instanceof Ii?(function(i,s){return s instanceof Ii&&i.op===s.op&&i.field.isEqual(s.field)&&ko(i.value,s.value)})(n,t):n instanceof Hl?(function(i,s){return s instanceof Hl&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((l,c,f)=>l&&k5(c,s.filters[f])),!0):!1})(n,t):void re(19439)}function P5(n){return n instanceof Ii?(function(e){return`${e.field.canonicalString()} ${e.op} ${vm(e.value)}`})(n):n instanceof Hl?(function(e){return e.op.toString()+" {"+e.getFilters().map(P5).join(" ,")+"}"})(n):"Filter"}class GI extends Ii{constructor(t,e,i){super(t,e,i),this.key=Jt.fromName(i.referenceValue)}matches(t){const e=Jt.comparator(t.key,this.key);return this.matchesComparison(e)}}class qI extends Ii{constructor(t,e){super(t,"in",e),this.keys=U5("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class FI extends Ii{constructor(t,e){super(t,"not-in",e),this.keys=U5("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function U5(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map((i=>Jt.fromName(i.referenceValue)))}class YI extends Ii{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return SE(e)&&t0(e.arrayValue,this.value)}}class QI extends Ii{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&t0(this.value.arrayValue,e)}}class XI extends Ii{constructor(t,e){super(t,"not-in",e)}matches(t){if(t0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!t0(this.value.arrayValue,e)}}class KI extends Ii{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!SE(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>t0(this.value.arrayValue,i)))}}class WI{constructor(t,e=null,i=[],s=[],l=null,c=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=l,this.startAt=c,this.endAt=f,this.Pe=null}}function GT(n,t=null,e=[],i=[],s=null,l=null,c=null){return new WI(n,t,e,i,s,l,c)}function TE(n){const t=pe(n);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>rA(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),j1(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>vm(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>vm(i))).join(",")),t.Pe=e}return t.Pe}function bE(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!jI(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!k5(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!HT(n.startAt,t.startAt)&&HT(n.endAt,t.endAt)}function lA(n){return Jt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Bm{constructor(t,e=null,i=[],s=[],l=null,c="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function JI(n,t,e,i,s,l,c,f){return new Bm(n,t,e,i,s,l,c,f)}function G1(n){return new Bm(n)}function qT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function z5(n){return n.collectionGroup!==null}function Lg(n){const t=pe(n);if(t.Te===null){t.Te=[];const e=new Set;for(const l of t.explicitOrderBy)t.Te.push(l),e.add(l.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new qi(ns.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(t).forEach((l=>{e.has(l.canonicalString())||l.isKeyField()||t.Te.push(new i1(l,i))})),e.has(ns.keyField().canonicalString())||t.Te.push(new i1(ns.keyField(),i))}return t.Te}function Lo(n){const t=pe(n);return t.Ie||(t.Ie=ZI(t,Lg(n))),t.Ie}function ZI(n,t){if(n.limitType==="F")return GT(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new i1(s.field,l)}));const e=n.endAt?new n1(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new n1(n.startAt.position,n.startAt.inclusive):null;return GT(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function oA(n,t){const e=n.filters.concat([t]);return new Bm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function uA(n,t,e){return new Bm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function q1(n,t){return bE(Lo(n),Lo(t))&&n.limitType===t.limitType}function B5(n){return`${TE(Lo(n))}|lt:${n.limitType}`}function tm(n){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((s=>P5(s))).join(", ")}]`),j1(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((s=>vm(s))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((s=>vm(s))).join(",")),`Target(${i})`})(Lo(n))}; limitType=${n.limitType})`}function F1(n,t){return t.isFoundDocument()&&(function(i,s){const l=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Jt.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,t)&&(function(i,s){for(const l of Lg(i))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,t)&&(function(i,s){for(const l of i.filters)if(!l.matches(s))return!1;return!0})(n,t)&&(function(i,s){return!(i.startAt&&!(function(c,f,m){const g=jT(c,f,m);return c.inclusive?g<=0:g<0})(i.startAt,Lg(i),s)||i.endAt&&!(function(c,f,m){const g=jT(c,f,m);return c.inclusive?g>=0:g>0})(i.endAt,Lg(i),s))})(n,t)}function $I(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function j5(n){return(t,e)=>{let i=!1;for(const s of Lg(n)){const l=tO(s,t,e);if(l!==0)return l;i=i||s.field.isKeyField()}return 0}}function tO(n,t,e){const i=n.field.isKeyField()?Jt.comparator(t.key,e.key):(function(l,c,f){const m=c.data.field(l),g=f.data.field(l);return m!==null&&g!==null?ym(m,g):re(42886)})(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return re(19790,{direction:n.dir})}}class Hf{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,l]of i)if(this.equalsFn(s,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return void(s[l]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){yh(this.inner,((e,i)=>{for(const[s,l]of i)t(s,l)}))}isEmpty(){return b5(this.inner)}size(){return this.innerSize}}const eO=new Li(Jt.comparator);function Pu(){return eO}const H5=new Li(Jt.comparator);function Tg(...n){let t=H5;for(const e of n)t=t.insert(e.key,e);return t}function G5(n){let t=H5;return n.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function Rf(){return Vg()}function q5(){return Vg()}function Vg(){return new Hf((n=>n.toString()),((n,t)=>n.isEqual(t)))}const nO=new Li(Jt.comparator),iO=new qi(Jt.comparator);function Be(...n){let t=iO;for(const e of n)t=t.add(e);return t}const sO=new qi(xe);function aO(){return sO}function CE(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$y(t)?"-0":t}}function F5(n){return{integerValue:""+n}}function rO(n,t){return MI(t)?F5(t):CE(n,t)}class Y1{constructor(){this._=void 0}}function lO(n,t,e){return n instanceof e0?(function(s,l){const c={fields:{[w5]:{stringValue:R5},[N5]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&EE(l)&&(l=H1(l)),l&&(c.fields[x5]=l),{mapValue:c}})(e,t):n instanceof n0?Q5(n,t):n instanceof i0?X5(n,t):(function(s,l){const c=Y5(s,l),f=FT(c)+FT(s.Ee);return aA(c)&&aA(s.Ee)?F5(f):CE(s.serializer,f)})(n,t)}function oO(n,t,e){return n instanceof n0?Q5(n,t):n instanceof i0?X5(n,t):e}function Y5(n,t){return n instanceof s1?(function(i){return aA(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(t)?t:{integerValue:0}:null}class e0 extends Y1{}class n0 extends Y1{constructor(t){super(),this.elements=t}}function Q5(n,t){const e=K5(t);for(const i of n.elements)e.some((s=>ko(s,i)))||e.push(i);return{arrayValue:{values:e}}}class i0 extends Y1{constructor(t){super(),this.elements=t}}function X5(n,t){let e=K5(t);for(const i of n.elements)e=e.filter((s=>!ko(s,i)));return{arrayValue:{values:e}}}class s1 extends Y1{constructor(t,e){super(),this.serializer=t,this.Ee=e}}function FT(n){return yi(n.integerValue||n.doubleValue)}function K5(n){return SE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class uO{constructor(t,e){this.field=t,this.transform=e}}function cO(n,t){return n.field.isEqual(t.field)&&(function(i,s){return i instanceof n0&&s instanceof n0||i instanceof i0&&s instanceof i0?gm(i.elements,s.elements,ko):i instanceof s1&&s instanceof s1?ko(i.Ee,s.Ee):i instanceof e0&&s instanceof e0})(n.transform,t.transform)}class hO{constructor(t,e){this.version=t,this.transformResults=e}}class nl{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new nl}static exists(t){return new nl(void 0,t)}static updateTime(t){return new nl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ky(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Q1{}function W5(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new RE(n.key,nl.none()):new T0(n.key,n.data,nl.none());{const e=n.data,i=ja.empty();let s=new qi(ns.comparator);for(let l of t.fields)if(!s.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?i.delete(l):i.set(l,c),s=s.add(l)}return new vh(n.key,i,new dr(s.toArray()),nl.none())}}function fO(n,t,e){n instanceof T0?(function(s,l,c){const f=s.value.clone(),m=QT(s.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,t,e):n instanceof vh?(function(s,l,c){if(!ky(s.precondition,l))return void l.convertToUnknownDocument(c.version);const f=QT(s.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(J5(s)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,t,e):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function kg(n,t,e,i){return n instanceof T0?(function(l,c,f,m){if(!ky(l.precondition,c))return f;const g=l.value.clone(),A=XT(l.fieldTransforms,m,c);return g.setAll(A),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,t,e,i):n instanceof vh?(function(l,c,f,m){if(!ky(l.precondition,c))return f;const g=XT(l.fieldTransforms,m,c),A=c.data;return A.setAll(J5(l)),A.setAll(g),c.convertToFoundDocument(c.version,A).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,t,e,i):(function(l,c,f){return ky(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,t,e)}function dO(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),l=Y5(i.transform,s||null);l!=null&&(e===null&&(e=ja.empty()),e.set(i.field,l))}return e||null}function YT(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&gm(i,s,((l,c)=>cO(l,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class T0 extends Q1{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class vh extends Q1{constructor(t,e,i,s,l=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function J5(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}})),t}function QT(n,t,e){const i=new Map;an(n.length===e.length,32656,{Ae:e.length,Re:n.length});for(let s=0;s<e.length;s++){const l=n[s],c=l.transform,f=t.data.field(l.field);i.set(l.field,oO(c,f,e[s]))}return i}function XT(n,t,e){const i=new Map;for(const s of n){const l=s.transform,c=e.data.field(s.field);i.set(s.field,lO(l,c,t))}return i}class RE extends Q1{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mO extends Q1{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pO{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(t.key)&&fO(l,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=kg(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=kg(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=q5();return this.mutations.forEach((s=>{const l=t.get(s.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=e.has(s.key)?null:f;const m=W5(c,f);m!==null&&i.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(ce.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Be())}isEqual(t){return this.batchId===t.batchId&&gm(this.mutations,t.mutations,((e,i)=>YT(e,i)))&&gm(this.baseMutations,t.baseMutations,((e,i)=>YT(e,i)))}}class wE{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){an(t.mutations.length===i.length,58842,{Ve:t.mutations.length,me:i.length});let s=(function(){return nO})();const l=t.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,i[c].version);return new wE(t,e,i,s)}}class gO{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class _O{constructor(t,e){this.count=t,this.unchangedNames=e}}var Ni,Ye;function yO(n){switch(n){case Et.OK:return re(64938);case Et.CANCELLED:case Et.UNKNOWN:case Et.DEADLINE_EXCEEDED:case Et.RESOURCE_EXHAUSTED:case Et.INTERNAL:case Et.UNAVAILABLE:case Et.UNAUTHENTICATED:return!1;case Et.INVALID_ARGUMENT:case Et.NOT_FOUND:case Et.ALREADY_EXISTS:case Et.PERMISSION_DENIED:case Et.FAILED_PRECONDITION:case Et.ABORTED:case Et.OUT_OF_RANGE:case Et.UNIMPLEMENTED:case Et.DATA_LOSS:return!0;default:return re(15467,{code:n})}}function Z5(n){if(n===void 0)return Vu("GRPC error has no .code"),Et.UNKNOWN;switch(n){case Ni.OK:return Et.OK;case Ni.CANCELLED:return Et.CANCELLED;case Ni.UNKNOWN:return Et.UNKNOWN;case Ni.DEADLINE_EXCEEDED:return Et.DEADLINE_EXCEEDED;case Ni.RESOURCE_EXHAUSTED:return Et.RESOURCE_EXHAUSTED;case Ni.INTERNAL:return Et.INTERNAL;case Ni.UNAVAILABLE:return Et.UNAVAILABLE;case Ni.UNAUTHENTICATED:return Et.UNAUTHENTICATED;case Ni.INVALID_ARGUMENT:return Et.INVALID_ARGUMENT;case Ni.NOT_FOUND:return Et.NOT_FOUND;case Ni.ALREADY_EXISTS:return Et.ALREADY_EXISTS;case Ni.PERMISSION_DENIED:return Et.PERMISSION_DENIED;case Ni.FAILED_PRECONDITION:return Et.FAILED_PRECONDITION;case Ni.ABORTED:return Et.ABORTED;case Ni.OUT_OF_RANGE:return Et.OUT_OF_RANGE;case Ni.UNIMPLEMENTED:return Et.UNIMPLEMENTED;case Ni.DATA_LOSS:return Et.DATA_LOSS;default:return re(39323,{code:n})}}(Ye=Ni||(Ni={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";const vO=new Zc([4294967295,4294967295],0);function KT(n){const t=A5().encode(n),e=new h5;return e.update(t),new Uint8Array(e.digest())}function WT(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Zc([e,i],0),new Zc([s,l],0)]}class xE{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new bg(`Invalid padding: ${e}`);if(i<0)throw new bg(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new bg(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new bg(`Invalid padding when bitmap length is 0: ${e}`);this.fe=8*t.length-e,this.ge=Zc.fromNumber(this.fe)}pe(t,e,i){let s=t.add(e.multiply(Zc.fromNumber(i)));return s.compare(vO)===1&&(s=new Zc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const e=KT(t),[i,s]=WT(e);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,s,l);if(!this.ye(c))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new xE(l,s,e);return i.forEach((f=>c.insert(f))),c}insert(t){if(this.fe===0)return;const e=KT(t),[i,s]=WT(e);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,s,l);this.we(c)}}we(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class bg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class X1{constructor(t,e,i,s,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,b0.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new X1(ce.min(),s,new Li(xe),Pu(),Be())}}class b0{constructor(t,e,i,s,l){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new b0(i,e,Be(),Be(),Be())}}class Py{constructor(t,e,i,s){this.Se=t,this.removedTargetIds=e,this.key=i,this.be=s}}class $5{constructor(t,e){this.targetId=t,this.De=e}}class t6{constructor(t,e,i=is.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class JT{constructor(){this.ve=0,this.Ce=ZT(),this.Fe=is.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Be(),e=Be(),i=Be();return this.Ce.forEach(((s,l)=>{switch(l){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:re(38017,{changeType:l})}})),new b0(this.Fe,this.Me,t,e,i)}ke(){this.xe=!1,this.Ce=ZT()}qe(t,e){this.xe=!0,this.Ce=this.Ce.insert(t,e)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,an(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class AO{constructor(t){this.We=t,this.Ge=new Map,this.ze=Pu(),this.je=fy(),this.Je=fy(),this.He=new Li(xe)}Ye(t){for(const e of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(e,t.be):this.Xe(e,t.key,t.be);for(const e of t.removedTargetIds)this.Xe(e,t.key,t.be)}et(t){this.forEachTarget(t,(e=>{const i=this.tt(e);switch(t.state){case 0:this.nt(e)&&i.Be(t.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(t.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(e);break;case 3:this.nt(e)&&(i.Ke(),i.Be(t.resumeToken));break;case 4:this.nt(e)&&(this.rt(e),i.Be(t.resumeToken));break;default:re(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ge.forEach(((i,s)=>{this.nt(s)&&e(s)}))}it(t){const e=t.targetId,i=t.De.count,s=this.st(e);if(s){const l=s.target;if(lA(l))if(i===0){const c=new Jt(l.path);this.Xe(e,c,Xs.newNoDocument(c,ce.min()))}else an(i===1,20013,{expectedCount:i});else{const c=this.ot(e);if(c!==i){const f=this._t(t),m=f?this.ut(f,t,c):1;if(m!==0){this.rt(e);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(e,g)}}}}}_t(t){const e=t.De.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:l=0}=e;let c,f;try{c=lh(i).toUint8Array()}catch(m){if(m instanceof C5)return ku("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new xE(c,s,l)}catch(m){return ku(m instanceof bg?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.fe===0?null:f}ut(t,e,i){return e.De.count===i-this.ht(t,e.targetId)?0:2}ht(t,e){const i=this.We.getRemoteKeysForTarget(e);let s=0;return i.forEach((l=>{const c=this.We.lt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(f)||(this.Xe(e,l,null),s++)})),s}Pt(t){const e=new Map;this.Ge.forEach(((l,c)=>{const f=this.st(c);if(f){if(l.current&&lA(f.target)){const m=new Jt(f.target.path);this.Tt(m).has(c)||this.It(c,m)||this.Xe(c,m,Xs.newNoDocument(m,t))}l.Ne&&(e.set(c,l.Le()),l.ke())}}));let i=Be();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.st(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(t)));const s=new X1(t,e,this.He,this.ze,i);return this.ze=Pu(),this.je=fy(),this.Je=fy(),this.He=new Li(xe),s}Ze(t,e){if(!this.nt(t))return;const i=this.It(t,e.key)?2:0;this.tt(t).qe(e.key,i),this.ze=this.ze.insert(e.key,e),this.je=this.je.insert(e.key,this.Tt(e.key).add(t)),this.Je=this.Je.insert(e.key,this.dt(e.key).add(t))}Xe(t,e,i){if(!this.nt(t))return;const s=this.tt(t);this.It(t,e)?s.qe(e,1):s.Qe(e),this.Je=this.Je.insert(e,this.dt(e).delete(t)),this.Je=this.Je.insert(e,this.dt(e).add(t)),i&&(this.ze=this.ze.insert(e,i))}removeTarget(t){this.Ge.delete(t)}ot(t){const e=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let e=this.Ge.get(t);return e||(e=new JT,this.Ge.set(t,e)),e}dt(t){let e=this.Je.get(t);return e||(e=new qi(xe),this.Je=this.Je.insert(t,e)),e}Tt(t){let e=this.je.get(t);return e||(e=new qi(xe),this.je=this.je.insert(t,e)),e}nt(t){const e=this.st(t)!==null;return e||Gt("WatchChangeAggregator","Detected inactive target",t),e}st(t){const e=this.Ge.get(t);return e&&e.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new JT),this.We.getRemoteKeysForTarget(t).forEach((e=>{this.Xe(t,e,null)}))}It(t,e){return this.We.getRemoteKeysForTarget(t).has(e)}}function fy(){return new Li(Jt.comparator)}function ZT(){return new Li(Jt.comparator)}const EO={asc:"ASCENDING",desc:"DESCENDING"},SO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TO={and:"AND",or:"OR"};class bO{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function cA(n,t){return n.useProto3Json||j1(t)?t:{value:t}}function a1(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function e6(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function CO(n,t){return a1(n,t.toTimestamp())}function Vo(n){return an(!!n,49232),ce.fromTimestamp((function(e){const i=rh(e);return new sn(i.seconds,i.nanos)})(n))}function NE(n,t){return hA(n,t).canonicalString()}function hA(n,t){const e=(function(s){return new An(["projects",s.projectId,"databases",s.database])})(n).child("documents");return t===void 0?e:e.child(t)}function n6(n){const t=An.fromString(n);return an(l6(t),10190,{key:t.toString()}),t}function fA(n,t){return NE(n.databaseId,t.path)}function f2(n,t){const e=n6(t);if(e.get(1)!==n.databaseId.projectId)throw new Bt(Et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Bt(Et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Jt(s6(e))}function i6(n,t){return NE(n.databaseId,t)}function RO(n){const t=n6(n);return t.length===4?An.emptyPath():s6(t)}function dA(n){return new An(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function s6(n){return an(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function $T(n,t,e){return{name:fA(n,t),fields:e.value.mapValue.fields}}function wO(n,t){let e;if("targetChange"in t){t.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:re(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],l=(function(g,A){return g.useProto3Json?(an(A===void 0||typeof A=="string",58123),is.fromBase64String(A||"")):(an(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),is.fromUint8Array(A||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,f=c&&(function(g){const A=g.code===void 0?Et.UNKNOWN:Z5(g.code);return new Bt(A,g.message||"")})(c);e=new t6(i,s,l,f||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=f2(n,i.document.name),l=Vo(i.document.updateTime),c=i.document.createTime?Vo(i.document.createTime):ce.min(),f=new ja({mapValue:{fields:i.document.fields}}),m=Xs.newFoundDocument(s,l,c,f),g=i.targetIds||[],A=i.removedTargetIds||[];e=new Py(g,A,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=f2(n,i.document),l=i.readTime?Vo(i.readTime):ce.min(),c=Xs.newNoDocument(s,l),f=i.removedTargetIds||[];e=new Py([],f,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=f2(n,i.document),l=i.removedTargetIds||[];e=new Py([],l,s,null)}else{if(!("filter"in t))return re(11601,{At:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:l}=i,c=new _O(s,l),f=i.targetId;e=new $5(f,c)}}return e}function xO(n,t){let e;if(t instanceof T0)e={update:$T(n,t.key,t.value)};else if(t instanceof RE)e={delete:fA(n,t.key)};else if(t instanceof vh)e={update:$T(n,t.key,t.data),updateMask:PO(t.fieldMask)};else{if(!(t instanceof mO))return re(16599,{Rt:t.type});e={verify:fA(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(l,c){const f=c.transform;if(f instanceof e0)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof n0)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof i0)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof s1)return{fieldPath:c.field.canonicalString(),increment:f.Ee};throw re(20930,{transform:c.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:CO(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:re(27497)})(n,t.precondition)),e}function NO(n,t){return n&&n.length>0?(an(t!==void 0,14353),n.map((e=>(function(s,l){let c=s.updateTime?Vo(s.updateTime):Vo(l);return c.isEqual(ce.min())&&(c=Vo(l)),new hO(c,s.transformResults||[])})(e,t)))):[]}function DO(n,t){return{documents:[i6(n,t.path)]}}function IO(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=i6(n,s);const l=(function(g){if(g.length!==0)return r6(Hl.create(g,"and"))})(t.filters);l&&(e.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((A=>(function(T){return{field:em(T.field),direction:LO(T.dir)}})(A)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const f=cA(n,t.limit);return f!==null&&(e.structuredQuery.limit=f),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{Vt:e,parent:s}}function OO(n){let t=RO(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){an(i===1,65062);const A=e.from[0];A.allDescendants?s=A.collectionId:t=t.child(A.collectionId)}let l=[];e.where&&(l=(function(E){const T=a6(E);return T instanceof Hl&&V5(T)?T.getFilters():[T]})(e.where));let c=[];e.orderBy&&(c=(function(E){return E.map((T=>(function(w){return new i1(nm(w.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(T)))})(e.orderBy));let f=null;e.limit&&(f=(function(E){let T;return T=typeof E=="object"?E.value:E,j1(T)?null:T})(e.limit));let m=null;e.startAt&&(m=(function(E){const T=!!E.before,x=E.values||[];return new n1(x,T)})(e.startAt));let g=null;return e.endAt&&(g=(function(E){const T=!E.before,x=E.values||[];return new n1(x,T)})(e.endAt)),JI(t,s,c,l,f,"F",m,g)}function MO(n,t){const e=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:s})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function a6(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=nm(e.unaryFilter.field);return Ii.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=nm(e.unaryFilter.field);return Ii.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=nm(e.unaryFilter.field);return Ii.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=nm(e.unaryFilter.field);return Ii.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}})(n):n.fieldFilter!==void 0?(function(e){return Ii.create(nm(e.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return Hl.create(e.compositeFilter.filters.map((i=>a6(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re(1026)}})(e.compositeFilter.op))})(n):re(30097,{filter:n})}function LO(n){return EO[n]}function VO(n){return SO[n]}function kO(n){return TO[n]}function em(n){return{fieldPath:n.canonicalString()}}function nm(n){return ns.fromServerFormat(n.fieldPath)}function r6(n){return n instanceof Ii?(function(e){if(e.op==="=="){if(BT(e.value))return{unaryFilter:{field:em(e.field),op:"IS_NAN"}};if(zT(e.value))return{unaryFilter:{field:em(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(BT(e.value))return{unaryFilter:{field:em(e.field),op:"IS_NOT_NAN"}};if(zT(e.value))return{unaryFilter:{field:em(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:em(e.field),op:VO(e.op),value:e.value}}})(n):n instanceof Hl?(function(e){const i=e.getFilters().map((s=>r6(s)));return i.length===1?i[0]:{compositeFilter:{op:kO(e.op),filters:i}}})(n):re(54877,{filter:n})}function PO(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function l6(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Kc{constructor(t,e,i,s,l=ce.min(),c=ce.min(),f=is.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(t){return new Kc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Kc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class UO{constructor(t){this.gt=t}}function zO(n){const t=OO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?uA(t,t.limit,"L"):t}class BO{constructor(){this.Dn=new jO}addToCollectionParentIndex(t,e){return this.Dn.add(e),bt.resolve()}getCollectionParents(t,e){return bt.resolve(this.Dn.getEntries(e))}addFieldIndex(t,e){return bt.resolve()}deleteFieldIndex(t,e){return bt.resolve()}deleteAllFieldIndexes(t){return bt.resolve()}createTargetIndexes(t,e){return bt.resolve()}getDocumentsMatchingTarget(t,e){return bt.resolve(null)}getIndexType(t,e){return bt.resolve(0)}getFieldIndexes(t,e){return bt.resolve([])}getNextCollectionGroupToUpdate(t){return bt.resolve(null)}getMinOffset(t,e){return bt.resolve(ah.min())}getMinOffsetFromCollectionGroup(t,e){return bt.resolve(ah.min())}updateCollectionGroup(t,e,i){return bt.resolve()}updateIndexEntries(t,e){return bt.resolve()}}class jO{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new qi(An.comparator),l=!s.has(i);return this.index[e]=s.add(i),l}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new qi(An.comparator)).toArray()}}const t3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},o6=41943040;class Ba{static withCacheSize(t){return new Ba(t,Ba.DEFAULT_COLLECTION_PERCENTILE,Ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}Ba.DEFAULT_COLLECTION_PERCENTILE=10,Ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ba.DEFAULT=new Ba(o6,Ba.DEFAULT_COLLECTION_PERCENTILE,Ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ba.DISABLED=new Ba(-1,0,0);class Am{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new Am(0)}static ur(){return new Am(-1)}}const e3="LruGarbageCollector",HO=1048576;function n3([n,t],[e,i]){const s=xe(n,e);return s===0?xe(t,i):s}class GO{constructor(t){this.Tr=t,this.buffer=new qi(n3),this.Ir=0}dr(){return++this.Ir}Er(t){const e=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();n3(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class qO{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){Gt(e3,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){zm(e)?Gt(e3,"Ignoring IndexedDB error during garbage collection: ",e):await Um(e)}await this.Rr(3e5)}))}}class FO{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.mr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return bt.resolve(B1.ue);const i=new GO(e);return this.Vr.forEachTarget(t,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.gr(t,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Gt("LruGarbageCollector","Garbage collection skipped; disabled"),bt.resolve(t3)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(Gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t3):this.pr(t,e)))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,e){let i,s,l,c,f,m,g;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(t,s)))).next((E=>(i=E,f=Date.now(),this.removeTargets(t,i,e)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(t,i)))).next((E=>(g=Date.now(),$d()<=Pe.DEBUG&&Gt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-A}ms
	Determined least recently used ${s} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-A}ms`),bt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function YO(n,t){return new FO(n,t)}class QO{constructor(){this.changes=new Hf((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Xs.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?bt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class XO{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class KO{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(i=s,this.remoteDocumentCache.getEntry(t,e)))).next((s=>(i!==null&&kg(i.mutation,s,dr.empty(),sn.now()),s)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,Be()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=Be()){const s=Rf();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,i).next((l=>{let c=Tg();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const i=Rf();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,Be())))}populateOverlays(t,e,i){const s=[];return i.forEach((l=>{e.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(t,s).next((l=>{l.forEach(((c,f)=>{e.set(c,f)}))}))}computeViews(t,e,i,s){let l=Pu();const c=Vg(),f=(function(){return Vg()})();return e.forEach(((m,g)=>{const A=i.get(g.key);s.has(g.key)&&(A===void 0||A.mutation instanceof vh)?l=l.insert(g.key,g):A!==void 0?(c.set(g.key,A.mutation.getFieldMask()),kg(A.mutation,g,A.mutation.getFieldMask(),sn.now())):c.set(g.key,dr.empty())})),this.recalculateAndSaveOverlays(t,l).next((m=>(m.forEach(((g,A)=>c.set(g,A))),e.forEach(((g,A)=>{var E;return f.set(g,new XO(A,(E=c.get(g))!==null&&E!==void 0?E:null))})),f)))}recalculateAndSaveOverlays(t,e){const i=Vg();let s=new Li(((c,f)=>c-f)),l=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=e.get(m);if(g===null)return;let A=i.get(m)||dr.empty();A=f.applyToLocalView(g,A),i.set(m,A);const E=(s.get(f.batchId)||Be()).add(m);s=s.insert(f.batchId,E)}))})).next((()=>{const c=[],f=s.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,A=m.value,E=q5();A.forEach((T=>{if(!l.has(T)){const x=W5(e.get(T),i.get(T));x!==null&&E.set(T,x),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(t,g,E))}return bt.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,s){return(function(c){return Jt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):z5(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-l.size):bt.resolve(Rf());let f=Zg,m=l;return c.next((g=>bt.forEach(g,((A,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(A)?bt.resolve():this.remoteDocumentCache.getEntry(t,A).next((T=>{m=m.insert(A,T)}))))).next((()=>this.populateOverlays(t,g,l))).next((()=>this.computeViews(t,m,g,Be()))).next((A=>({batchId:f,changes:G5(A)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Jt(e)).next((i=>{let s=Tg();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const l=e.collectionGroup;let c=Tg();return this.indexManager.getCollectionParents(t,l).next((f=>bt.forEach(f,(m=>{const g=(function(E,T){return new Bm(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(e,m.child(l));return this.getDocumentsMatchingCollectionQuery(t,g,i,s).next((A=>{A.forEach(((E,T)=>{c=c.insert(E,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,i,s){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,l,s)))).next((c=>{l.forEach(((m,g)=>{const A=g.getKey();c.get(A)===null&&(c=c.insert(A,Xs.newInvalidDocument(A)))}));let f=Tg();return c.forEach(((m,g)=>{const A=l.get(m);A!==void 0&&kg(A.mutation,g,dr.empty(),sn.now()),F1(e,g)&&(f=f.insert(m,g))})),f}))}}class WO{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,e){return bt.resolve(this.Br.get(e))}saveBundleMetadata(t,e){return this.Br.set(e.id,(function(s){return{id:s.id,version:s.version,createTime:Vo(s.createTime)}})(e)),bt.resolve()}getNamedQuery(t,e){return bt.resolve(this.Lr.get(e))}saveNamedQuery(t,e){return this.Lr.set(e.name,(function(s){return{name:s.name,query:zO(s.bundledQuery),readTime:Vo(s.readTime)}})(e)),bt.resolve()}}class JO{constructor(){this.overlays=new Li(Jt.comparator),this.kr=new Map}getOverlay(t,e){return bt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Rf();return bt.forEach(e,(s=>this.getOverlay(t,s).next((l=>{l!==null&&i.set(s,l)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((s,l)=>{this.wt(t,e,l)})),bt.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),bt.resolve()}getOverlaysForCollection(t,e,i){const s=Rf(),l=e.length+1,c=new Jt(e.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>i&&s.set(m.getKey(),m)}return bt.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let l=new Li(((g,A)=>g-A));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let A=l.get(g.largestBatchId);A===null&&(A=Rf(),l=l.insert(g.largestBatchId,A)),A.set(g.getKey(),g)}}const f=Rf(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,A)=>f.set(g,A))),!(f.size()>=s)););return bt.resolve(f)}wt(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new gO(e,i));let l=this.kr.get(e);l===void 0&&(l=Be(),this.kr.set(e,l)),this.kr.set(e,l.add(i.key))}}class ZO{constructor(){this.sessionToken=is.EMPTY_BYTE_STRING}getSessionToken(t){return bt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,bt.resolve()}}class DE{constructor(){this.qr=new qi($i.Qr),this.$r=new qi($i.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,e){const i=new $i(t,e);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Wr(new $i(t,e))}Gr(t,e){t.forEach((i=>this.removeReference(i,e)))}zr(t){const e=new Jt(new An([])),i=new $i(e,t),s=new $i(e,t+1),l=[];return this.$r.forEachInRange([i,s],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((t=>this.Wr(t)))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const e=new Jt(new An([])),i=new $i(e,t),s=new $i(e,t+1);let l=Be();return this.$r.forEachInRange([i,s],(c=>{l=l.add(c.key)})),l}containsKey(t){const e=new $i(t,0),i=this.qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class $i{constructor(t,e){this.key=t,this.Hr=e}static Qr(t,e){return Jt.comparator(t.key,e.key)||xe(t.Hr,e.Hr)}static Ur(t,e){return xe(t.Hr,e.Hr)||Jt.comparator(t.key,e.key)}}class $O{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.er=1,this.Yr=new qi($i.Qr)}checkEmpty(t){return bt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new pO(l,e,i,s);this.mutationQueue.push(c);for(const f of s)this.Yr=this.Yr.add(new $i(f.key,l)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return bt.resolve(c)}lookupMutationBatch(t,e){return bt.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.Xr(i),l=s<0?0:s;return bt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return bt.resolve(this.mutationQueue.length===0?AE:this.er-1)}getAllMutationBatches(t){return bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new $i(e,0),s=new $i(e,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,s],(c=>{const f=this.Zr(c.Hr);l.push(f)})),bt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new qi(xe);return e.forEach((s=>{const l=new $i(s,0),c=new $i(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(f=>{i=i.add(f.Hr)}))})),bt.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let l=i;Jt.isDocumentKey(l)||(l=l.child(""));const c=new $i(new Jt(l),0);let f=new qi(xe);return this.Yr.forEachWhile((m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===s&&(f=f.add(m.Hr)),!0)}),c),bt.resolve(this.ei(f))}ei(t){const e=[];return t.forEach((i=>{const s=this.Zr(i);s!==null&&e.push(s)})),e}removeMutationBatch(t,e){an(this.ti(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return bt.forEach(e.mutations,(s=>{const l=new $i(s.key,e.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Yr=i}))}rr(t){}containsKey(t,e){const i=new $i(e,0),s=this.Yr.firstAfterOrEqual(i);return bt.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,bt.resolve()}ti(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class tM{constructor(t){this.ni=t,this.docs=(function(){return new Li(Jt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),l=s?s.size:0,c=this.ni(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return bt.resolve(i?i.document.mutableCopy():Xs.newInvalidDocument(e))}getEntries(t,e){let i=Pu();return e.forEach((s=>{const l=this.docs.get(s);i=i.insert(s,l?l.document.mutableCopy():Xs.newInvalidDocument(s))})),bt.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let l=Pu();const c=e.path,f=new Jt(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:A}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||NI(xI(A),i)<=0||(s.has(A.key)||F1(e,A))&&(l=l.insert(A.key,A.mutableCopy()))}return bt.resolve(l)}getAllFromCollectionGroup(t,e,i,s){re(9500)}ri(t,e){return bt.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new eM(this)}getSize(t){return bt.resolve(this.size)}}class eM extends QO{constructor(t){super(),this.Or=t}applyChanges(t){const e=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?e.push(this.Or.addEntry(t,s)):this.Or.removeEntry(i)})),bt.waitFor(e)}getFromCache(t,e){return this.Or.getEntry(t,e)}getAllFromCache(t,e){return this.Or.getEntries(t,e)}}class nM{constructor(t){this.persistence=t,this.ii=new Hf((e=>TE(e)),bE),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.si=0,this.oi=new DE,this.targetCount=0,this._i=Am.ar()}forEachTarget(t,e){return this.ii.forEach(((i,s)=>e(s))),bt.resolve()}getLastRemoteSnapshotVersion(t){return bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return bt.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),bt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.si&&(this.si=e),bt.resolve()}hr(t){this.ii.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this._i=new Am(e),this.highestTargetId=e),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,e){return this.hr(e),this.targetCount+=1,bt.resolve()}updateTargetData(t,e){return this.hr(e),bt.resolve()}removeTargetData(t,e){return this.ii.delete(e.target),this.oi.zr(e.targetId),this.targetCount-=1,bt.resolve()}removeTargets(t,e,i){let s=0;const l=[];return this.ii.forEach(((c,f)=>{f.sequenceNumber<=e&&i.get(f.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(t,f.targetId)),s++)})),bt.waitFor(l).next((()=>s))}getTargetCount(t){return bt.resolve(this.targetCount)}getTargetData(t,e){const i=this.ii.get(e)||null;return bt.resolve(i)}addMatchingKeys(t,e,i){return this.oi.Kr(e,i),bt.resolve()}removeMatchingKeys(t,e,i){this.oi.Gr(e,i);const s=this.persistence.referenceDelegate,l=[];return s&&e.forEach((c=>{l.push(s.markPotentiallyOrphaned(t,c))})),bt.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.oi.zr(e),bt.resolve()}getMatchingKeysForTargetId(t,e){const i=this.oi.Jr(e);return bt.resolve(i)}containsKey(t,e){return bt.resolve(this.oi.containsKey(e))}}class u6{constructor(t,e){this.ai={},this.overlays={},this.ui=new B1(0),this.ci=!1,this.ci=!0,this.li=new ZO,this.referenceDelegate=t(this),this.hi=new nM(this),this.indexManager=new BO,this.remoteDocumentCache=(function(s){return new tM(s)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new UO(e),this.Ti=new WO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new JO,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ai[t.toKey()];return i||(i=new $O(e,this.referenceDelegate),this.ai[t.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,e,i){Gt("MemoryPersistence","Starting transaction:",t);const s=new iM(this.ui.next());return this.referenceDelegate.Ii(),i(s).next((l=>this.referenceDelegate.di(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(t,e){return bt.or(Object.values(this.ai).map((i=>()=>i.containsKey(t,e))))}}class iM extends II{constructor(t){super(),this.currentSequenceNumber=t}}class IE{constructor(t){this.persistence=t,this.Ai=new DE,this.Ri=null}static Vi(t){return new IE(t)}get mi(){if(this.Ri)return this.Ri;throw re(60996)}addReference(t,e,i){return this.Ai.addReference(i,e),this.mi.delete(i.toString()),bt.resolve()}removeReference(t,e,i){return this.Ai.removeReference(i,e),this.mi.add(i.toString()),bt.resolve()}markPotentiallyOrphaned(t,e){return this.mi.add(e.toString()),bt.resolve()}removeTarget(t,e){this.Ai.zr(e.targetId).forEach((s=>this.mi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((s=>{s.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(t,e)))}Ii(){this.Ri=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bt.forEach(this.mi,(i=>{const s=Jt.fromPath(i);return this.fi(t,s).next((l=>{l||e.removeEntry(s,ce.min())}))})).next((()=>(this.Ri=null,e.apply(t))))}updateLimboDocument(t,e){return this.fi(t,e).next((i=>{i?this.mi.delete(e.toString()):this.mi.add(e.toString())}))}Pi(t){return 0}fi(t,e){return bt.or([()=>bt.resolve(this.Ai.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class r1{constructor(t,e){this.persistence=t,this.gi=new Hf((i=>LI(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=YO(this,e)}static Vi(t,e){return new r1(t,e)}Ii(){}di(t){return bt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}mr(t){const e=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((s=>i+s))))}yr(t){let e=0;return this.gr(t,(i=>{e++})).next((()=>e))}gr(t,e){return bt.forEach(this.gi,((i,s)=>this.Sr(t,i,s).next((l=>l?bt.resolve():e(s)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ri(t,(c=>this.Sr(t,c,e).next((f=>{f||(i++,l.removeEntry(c,ce.min()))})))).next((()=>l.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.gi.set(e,t.currentSequenceNumber),bt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),bt.resolve()}removeReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),bt.resolve()}updateLimboDocument(t,e){return this.gi.set(e,t.currentSequenceNumber),bt.resolve()}Pi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Ly(t.data.value)),e}Sr(t,e,i){return bt.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.gi.get(e);return bt.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class OE{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Is=i,this.ds=s}static Es(t,e){let i=Be(),s=Be();for(const l of e.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new OE(t,e.fromCache,i,s)}}class sM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class aM{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return V7()?8:OI(Ws())>0?6:4})()}initialize(t,e){this.gs=t,this.indexManager=e,this.As=!0}getDocumentsMatchingQuery(t,e,i,s){const l={result:null};return this.ps(t,e).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(t,e,s,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new sM;return this.ws(t,e,c).next((f=>{if(l.result=f,this.Rs)return this.Ss(t,e,c,f.size)}))})).next((()=>l.result))}Ss(t,e,i,s){return i.documentReadCount<this.Vs?($d()<=Pe.DEBUG&&Gt("QueryEngine","SDK will not create cache indexes for query:",tm(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),bt.resolve()):($d()<=Pe.DEBUG&&Gt("QueryEngine","Query:",tm(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?($d()<=Pe.DEBUG&&Gt("QueryEngine","The SDK decides to create cache indexes for query:",tm(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Lo(e))):bt.resolve())}ps(t,e){if(qT(e))return bt.resolve(null);let i=Lo(e);return this.indexManager.getIndexType(t,i).next((s=>s===0?null:(e.limit!==null&&s===1&&(e=uA(e,null,"F"),i=Lo(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((l=>{const c=Be(...l);return this.gs.getDocuments(t,c).next((f=>this.indexManager.getMinOffset(t,i).next((m=>{const g=this.bs(e,f);return this.Ds(e,g,c,m.readTime)?this.ps(t,uA(e,null,"F")):this.vs(t,g,e,m)}))))})))))}ys(t,e,i,s){return qT(e)||s.isEqual(ce.min())?bt.resolve(null):this.gs.getDocuments(t,i).next((l=>{const c=this.bs(e,l);return this.Ds(e,c,i,s)?bt.resolve(null):($d()<=Pe.DEBUG&&Gt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),tm(e)),this.vs(t,c,e,wI(s,Zg)).next((f=>f)))}))}bs(t,e){let i=new qi(j5(t));return e.forEach(((s,l)=>{F1(t,l)&&(i=i.add(l))})),i}Ds(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ws(t,e,i){return $d()<=Pe.DEBUG&&Gt("QueryEngine","Using full collection scan to execute query:",tm(e)),this.gs.getDocumentsMatchingQuery(t,e,ah.min(),i)}vs(t,e,i,s){return this.gs.getDocumentsMatchingQuery(t,i,s).next((l=>(e.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const ME="LocalStore",rM=3e8;class lM{constructor(t,e,i,s){this.persistence=t,this.Cs=e,this.serializer=s,this.Fs=new Li(xe),this.Ms=new Hf((l=>TE(l)),bE),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(i)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new KO(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Fs)))}}function oM(n,t,e,i){return new lM(n,t,e,i)}async function c6(n,t){const e=pe(n);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next((l=>(s=l,e.Ns(t),e.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],f=[];let m=Be();for(const g of s){c.push(g.batchId);for(const A of g.mutations)m=m.add(A.key)}for(const g of l){f.push(g.batchId);for(const A of g.mutations)m=m.add(A.key)}return e.localDocuments.getDocuments(i,m).next((g=>({Bs:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function uM(n,t){const e=pe(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=t.batch.keys(),l=e.Os.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,A){const E=g.batch,T=E.keys();let x=bt.resolve();return T.forEach((w=>{x=x.next((()=>A.getEntry(m,w))).next((I=>{const L=g.docVersions.get(w);an(L!==null,48541),I.version.compareTo(L)<0&&(E.applyToRemoteDocument(I,g),I.isValidDocument()&&(I.setReadTime(g.commitVersion),A.addEntry(I)))}))})),x.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(e,i,t,l).next((()=>l.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=Be();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(t)))).next((()=>e.localDocuments.getDocuments(i,s)))}))}function h6(n){const t=pe(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.hi.getLastRemoteSnapshotVersion(e)))}function cM(n,t){const e=pe(n),i=t.snapshotVersion;let s=e.Fs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=e.Os.newChangeBuffer({trackRemovals:!0});s=e.Fs;const f=[];t.targetChanges.forEach(((A,E)=>{const T=s.get(E);if(!T)return;f.push(e.hi.removeMatchingKeys(l,A.removedDocuments,E).next((()=>e.hi.addMatchingKeys(l,A.addedDocuments,E))));let x=T.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(E)!==null?x=x.withResumeToken(is.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):A.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(A.resumeToken,i)),s=s.insert(E,x),(function(I,L,B){return I.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=rM?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(T,x,A)&&f.push(e.hi.updateTargetData(l,x))}));let m=Pu(),g=Be();if(t.documentUpdates.forEach((A=>{t.resolvedLimboDocuments.has(A)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(l,A))})),f.push(hM(l,c,t.documentUpdates).next((A=>{m=A.Ls,g=A.ks}))),!i.isEqual(ce.min())){const A=e.hi.getLastRemoteSnapshotVersion(l).next((E=>e.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(A)}return bt.waitFor(f).next((()=>c.apply(l))).next((()=>e.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(e.Fs=s,l)))}function hM(n,t,e){let i=Be(),s=Be();return e.forEach((l=>i=i.add(l))),t.getEntries(n,i).next((l=>{let c=Pu();return e.forEach(((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(f)),m.isNoDocument()&&m.version.isEqual(ce.min())?(t.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(m),c=c.insert(f,m)):Gt(ME,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{Ls:c,ks:s}}))}function fM(n,t){const e=pe(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=AE),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function dM(n,t){const e=pe(n);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return e.hi.getTargetData(i,t).next((l=>l?(s=l,bt.resolve(s)):e.hi.allocateTargetId(i).next((c=>(s=new Kc(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.hi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=e.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Fs=e.Fs.insert(i.targetId,i),e.Ms.set(t,i.targetId)),i}))}async function mA(n,t,e){const i=pe(n),s=i.Fs.get(t),l=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!zm(c))throw c;Gt(ME,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Fs=i.Fs.remove(t),i.Ms.delete(s.target)}function i3(n,t,e){const i=pe(n);let s=ce.min(),l=Be();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,A){const E=pe(m),T=E.Ms.get(A);return T!==void 0?bt.resolve(E.Fs.get(T)):E.hi.getTargetData(g,A)})(i,c,Lo(t)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,t,e?s:ce.min(),e?l:Be()))).next((f=>(mM(i,$I(t),f),{documents:f,qs:l})))))}function mM(n,t,e){let i=n.xs.get(t)||ce.min();e.forEach(((s,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.xs.set(t,i)}class s3{constructor(){this.activeTargetIds=aO()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class pM{constructor(){this.Fo=new s3,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,e,i){this.Mo[t]=e}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new s3,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class gM{xo(t){}shutdown(){}}const a3="ConnectivityMonitor";class r3{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Gt(a3,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){Gt(a3,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let dy=null;function pA(){return dy===null?dy=(function(){return 268435456+Math.round(2147483648*Math.random())})():dy++,"0x"+dy.toString(16)}const d2="RestConnection",_M={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yM{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=e+"://"+t.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===t1?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(t,e,i,s,l){const c=pA(),f=this.Go(t,e.toUriEncodedString());Gt(d2,`Sending RPC '${t}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,s,l);const{host:g}=new URL(f),A=ph(g);return this.jo(t,f,m,i,A).then((E=>(Gt(d2,`Received RPC '${t}' ${c}: `,E),E)),(E=>{throw ku(d2,`RPC '${t}' ${c} failed with error: `,E,"url: ",f,"request:",i),E}))}Jo(t,e,i,s,l,c){return this.Wo(t,e,i,s,l)}zo(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pm})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((s,l)=>t[l]=s)),i&&i.headers.forEach(((s,l)=>t[l]=s))}Go(t,e){const i=_M[t];return`${this.$o}/v1/${e}:${i}`}terminate(){}}class vM{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}const Ys="WebChannelConnection";class AM extends yM{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,e,i,s,l){const c=pA();return new Promise(((f,m)=>{const g=new f5;g.setWithCredentials(!0),g.listenOnce(d5.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case My.NO_ERROR:const E=g.getResponseJson();Gt(Ys,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(E)),f(E);break;case My.TIMEOUT:Gt(Ys,`RPC '${t}' ${c} timed out`),m(new Bt(Et.DEADLINE_EXCEEDED,"Request time out"));break;case My.HTTP_ERROR:const T=g.getStatus();if(Gt(Ys,`RPC '${t}' ${c} failed with status:`,T,"response text:",g.getResponseText()),T>0){let x=g.getResponseJson();Array.isArray(x)&&(x=x[0]);const w=x?.error;if(w&&w.status&&w.message){const I=(function(B){const j=B.toLowerCase().replace(/_/g,"-");return Object.values(Et).indexOf(j)>=0?j:Et.UNKNOWN})(w.status);m(new Bt(I,w.message))}else m(new Bt(Et.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Bt(Et.UNAVAILABLE,"Connection failed."));break;default:re(9055,{c_:t,streamId:c,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{Gt(Ys,`RPC '${t}' ${c} completed.`)}}));const A=JSON.stringify(s);Gt(Ys,`RPC '${t}' ${c} sending request:`,s),g.send(e,"POST",A,i,15)}))}P_(t,e,i){const s=pA(),l=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=g5(),f=p5(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,e,i),m.encodeInitMessageHeaders=!0;const A=l.join("");Gt(Ys,`Creating RPC '${t}' stream ${s}: ${A}`,m);const E=c.createWebChannel(A,m);this.T_(E);let T=!1,x=!1;const w=new vM({Ho:L=>{x?Gt(Ys,`Not sending because RPC '${t}' stream ${s} is closed:`,L):(T||(Gt(Ys,`Opening RPC '${t}' stream ${s} transport.`),E.open(),T=!0),Gt(Ys,`RPC '${t}' stream ${s} sending:`,L),E.send(L))},Yo:()=>E.close()}),I=(L,B,j)=>{L.listen(B,(q=>{try{j(q)}catch($){setTimeout((()=>{throw $}),0)}}))};return I(E,Sg.EventType.OPEN,(()=>{x||(Gt(Ys,`RPC '${t}' stream ${s} transport opened.`),w.s_())})),I(E,Sg.EventType.CLOSE,(()=>{x||(x=!0,Gt(Ys,`RPC '${t}' stream ${s} transport closed`),w.__(),this.I_(E))})),I(E,Sg.EventType.ERROR,(L=>{x||(x=!0,ku(Ys,`RPC '${t}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),w.__(new Bt(Et.UNAVAILABLE,"The operation could not be completed")))})),I(E,Sg.EventType.MESSAGE,(L=>{var B;if(!x){const j=L.data[0];an(!!j,16349);const q=j,$=q?.error||((B=q[0])===null||B===void 0?void 0:B.error);if($){Gt(Ys,`RPC '${t}' stream ${s} received error:`,$);const Z=$.status;let nt=(function(z){const F=Ni[z];if(F!==void 0)return Z5(F)})(Z),P=$.message;nt===void 0&&(nt=Et.INTERNAL,P="Unknown error status: "+Z+" with message "+$.message),x=!0,w.__(new Bt(nt,P)),E.close()}else Gt(Ys,`RPC '${t}' stream ${s} received:`,j),w.a_(j)}})),I(f,m5.STAT_EVENT,(L=>{L.stat===eA.PROXY?Gt(Ys,`RPC '${t}' stream ${s} detected buffering proxy`):L.stat===eA.NOPROXY&&Gt(Ys,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{w.o_()}),0),w}terminate(){this.u_.forEach((t=>t.close())),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter((e=>e===t))}}function m2(){return typeof document<"u"?document:null}function K1(n){return new bO(n,!0)}class f6{constructor(t,e,i=1e3,s=1.5,l=6e4){this.Fi=t,this.timerId=e,this.d_=i,this.E_=s,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,e-i);s>0&&Gt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),t()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const l3="PersistentStream";class d6{constructor(t,e,i,s,l,c,f,m){this.Fi=t,this.w_=i,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new f6(t,e)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():e&&e.code===Et.RESOURCE_EXHAUSTED?(Vu(e.toString()),Vu("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):e&&e.code===Et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(e)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),e=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.b_===e&&this.W_(i,s)}),(i=>{t((()=>{const s=new Bt(Et.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)}))}))}W_(t,e){const i=this.K_(this.b_);this.stream=this.z_(t,e),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{i((()=>this.G_(s)))})),this.stream.onMessage((s=>{i((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(t){return Gt(l3,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return e=>{this.Fi.enqueueAndForget((()=>this.b_===t?e():(Gt(l3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EM extends d6{constructor(t,e,i,s,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,c),this.serializer=l}z_(t,e){return this.connection.P_("Listen",t,e)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const e=wO(this.serializer,t),i=(function(l){if(!("targetChange"in l))return ce.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ce.min():c.readTime?Vo(c.readTime):ce.min()})(t);return this.listener.J_(e,i)}H_(t){const e={};e.database=dA(this.serializer),e.addTarget=(function(l,c){let f;const m=c.target;if(f=lA(m)?{documents:DO(l,m)}:{query:IO(l,m).Vt},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=e6(l,c.resumeToken);const g=cA(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(ce.min())>0){f.readTime=a1(l,c.snapshotVersion.toTimestamp());const g=cA(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,t);const i=MO(this.serializer,t);i&&(e.labels=i),this.k_(e)}Y_(t){const e={};e.database=dA(this.serializer),e.removeTarget=t,this.k_(e)}}class SM extends d6{constructor(t,e,i,s,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,e){return this.connection.P_("Write",t,e)}j_(t){return an(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,an(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){an(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const e=NO(t.writeResults,t.commitTime),i=Vo(t.commitTime);return this.listener.ta(i,e)}na(){const t={};t.database=dA(this.serializer),this.k_(t)}X_(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>xO(this.serializer,i)))};this.k_(e)}}class TM{}class bM extends TM{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Bt(Et.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(t,hA(e,i),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Bt(Et.UNKNOWN,l.toString())}))}Jo(t,e,i,s,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Jo(t,hA(e,i),s,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Bt(Et.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class CM{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Vu(e),this._a=!1):Gt("OnlineStateTracker",e)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}const Lf="RemoteStore";class RM{constructor(t,e,i,s,l){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{i.enqueueAndForget((async()=>{Gf(this)&&(Gt(Lf,"Restarting streams for network reachability change."),await(async function(m){const g=pe(m);g.Ia.add(4),await C0(g),g.Aa.set("Unknown"),g.Ia.delete(4),await W1(g)})(this))}))})),this.Aa=new CM(i,s)}}async function W1(n){if(Gf(n))for(const t of n.da)await t(!0)}async function C0(n){for(const t of n.da)await t(!1)}function m6(n,t){const e=pe(n);e.Ta.has(t.targetId)||(e.Ta.set(t.targetId,t),PE(e)?kE(e):jm(e).x_()&&VE(e,t))}function LE(n,t){const e=pe(n),i=jm(e);e.Ta.delete(t),i.x_()&&p6(e,t),e.Ta.size===0&&(i.x_()?i.B_():Gf(e)&&e.Aa.set("Unknown"))}function VE(n,t){if(n.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ce.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}jm(n).H_(t)}function p6(n,t){n.Ra.$e(t),jm(n).Y_(t)}function kE(n){n.Ra=new AO({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.Ta.get(t)||null,lt:()=>n.datastore.serializer.databaseId}),jm(n).start(),n.Aa.aa()}function PE(n){return Gf(n)&&!jm(n).M_()&&n.Ta.size>0}function Gf(n){return pe(n).Ia.size===0}function g6(n){n.Ra=void 0}async function wM(n){n.Aa.set("Online")}async function xM(n){n.Ta.forEach(((t,e)=>{VE(n,t)}))}async function NM(n,t){g6(n),PE(n)?(n.Aa.la(t),kE(n)):n.Aa.set("Unknown")}async function DM(n,t,e){if(n.Aa.set("Online"),t instanceof t6&&t.state===2&&t.cause)try{await(async function(s,l){const c=l.cause;for(const f of l.targetIds)s.Ta.has(f)&&(await s.remoteSyncer.rejectListen(f,c),s.Ta.delete(f),s.Ra.removeTarget(f))})(n,t)}catch(i){Gt(Lf,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await l1(n,i)}else if(t instanceof Py?n.Ra.Ye(t):t instanceof $5?n.Ra.it(t):n.Ra.et(t),!e.isEqual(ce.min()))try{const i=await h6(n.localStore);e.compareTo(i)>=0&&await(function(l,c){const f=l.Ra.Pt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const A=l.Ta.get(g);A&&l.Ta.set(g,A.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const A=l.Ta.get(m);if(!A)return;l.Ta.set(m,A.withResumeToken(is.EMPTY_BYTE_STRING,A.snapshotVersion)),p6(l,m);const E=new Kc(A.target,m,g,A.sequenceNumber);VE(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,e)}catch(i){Gt(Lf,"Failed to raise snapshot:",i),await l1(n,i)}}async function l1(n,t,e){if(!zm(t))throw t;n.Ia.add(1),await C0(n),n.Aa.set("Offline"),e||(e=()=>h6(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Gt(Lf,"Retrying IndexedDB access"),await e(),n.Ia.delete(1),await W1(n)}))}function _6(n,t){return t().catch((e=>l1(n,e,t)))}async function J1(n){const t=pe(n),e=uh(t);let i=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:AE;for(;IM(t);)try{const s=await fM(t.localStore,i);if(s===null){t.Pa.length===0&&e.B_();break}i=s.batchId,OM(t,s)}catch(s){await l1(t,s)}y6(t)&&v6(t)}function IM(n){return Gf(n)&&n.Pa.length<10}function OM(n,t){n.Pa.push(t);const e=uh(n);e.x_()&&e.Z_&&e.X_(t.mutations)}function y6(n){return Gf(n)&&!uh(n).M_()&&n.Pa.length>0}function v6(n){uh(n).start()}async function MM(n){uh(n).na()}async function LM(n){const t=uh(n);for(const e of n.Pa)t.X_(e.mutations)}async function VM(n,t,e){const i=n.Pa.shift(),s=wE.from(i,t,e);await _6(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await J1(n)}async function kM(n,t){t&&uh(n).Z_&&await(async function(i,s){if((function(c){return yO(c)&&c!==Et.ABORTED})(s.code)){const l=i.Pa.shift();uh(i).N_(),await _6(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,s))),await J1(i)}})(n,t),y6(n)&&v6(n)}async function o3(n,t){const e=pe(n);e.asyncQueue.verifyOperationInProgress(),Gt(Lf,"RemoteStore received new credentials");const i=Gf(e);e.Ia.add(3),await C0(e),i&&e.Aa.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ia.delete(3),await W1(e)}async function PM(n,t){const e=pe(n);t?(e.Ia.delete(2),await W1(e)):t||(e.Ia.add(2),await C0(e),e.Aa.set("Unknown"))}function jm(n){return n.Va||(n.Va=(function(e,i,s){const l=pe(e);return l.ia(),new EM(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:wM.bind(null,n),e_:xM.bind(null,n),n_:NM.bind(null,n),J_:DM.bind(null,n)}),n.da.push((async t=>{t?(n.Va.N_(),PE(n)?kE(n):n.Aa.set("Unknown")):(await n.Va.stop(),g6(n))}))),n.Va}function uh(n){return n.ma||(n.ma=(function(e,i,s){const l=pe(e);return l.ia(),new SM(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:MM.bind(null,n),n_:kM.bind(null,n),ea:LM.bind(null,n),ta:VM.bind(null,n)}),n.da.push((async t=>{t?(n.ma.N_(),await J1(n)):(await n.ma.stop(),n.Pa.length>0&&(Gt(Lf,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}class UE{constructor(t,e,i,s,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=l,this.deferred=new Nu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,l){const c=Date.now()+i,f=new UE(t,e,c,s,l);return f.start(i),f}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Bt(Et.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zE(n,t){if(Vu("AsyncQueue",`${t}: ${n}`),zm(n))return new Bt(Et.UNAVAILABLE,`${t}: ${n}`);throw n}class cm{static emptySet(t){return new cm(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||Jt.comparator(e.key,i.key):(e,i)=>Jt.comparator(e.key,i.key),this.keyedMap=Tg(),this.sortedSet=new Li(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof cm)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,l=i.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new cm;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class u3{constructor(){this.fa=new Li(Jt.comparator)}track(t){const e=t.doc.key,i=this.fa.get(e);i?t.type!==0&&i.type===3?this.fa=this.fa.insert(e,t):t.type===3&&i.type!==1?this.fa=this.fa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.fa=this.fa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.fa=this.fa.remove(e):t.type===1&&i.type===2?this.fa=this.fa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):re(63341,{At:t,ga:i}):this.fa=this.fa.insert(e,t)}pa(){const t=[];return this.fa.inorderTraversal(((e,i)=>{t.push(i)})),t}}class Em{constructor(t,e,i,s,l,c,f,m,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,s,l){const c=[];return e.forEach((f=>{c.push({type:0,doc:f})})),new Em(t,e,cm.emptySet(e),c,i,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&q1(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}class UM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((t=>t.ba()))}}class zM{constructor(){this.queries=c3(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(e,i){const s=pe(e),l=s.queries;s.queries=c3(),l.forEach(((c,f)=>{for(const m of f.wa)m.onError(i)}))})(this,new Bt(Et.ABORTED,"Firestore shutting down"))}}function c3(){return new Hf((n=>B5(n)),q1)}async function BE(n,t){const e=pe(n);let i=3;const s=t.query;let l=e.queries.get(s);l?!l.Sa()&&t.ba()&&(i=2):(l=new UM,i=t.ba()?0:1);try{switch(i){case 0:l.ya=await e.onListen(s,!0);break;case 1:l.ya=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(c){const f=zE(c,`Initialization of query '${tm(t.query)}' failed`);return void t.onError(f)}e.queries.set(s,l),l.wa.push(t),t.va(e.onlineState),l.ya&&t.Ca(l.ya)&&HE(e)}async function jE(n,t){const e=pe(n),i=t.query;let s=3;const l=e.queries.get(i);if(l){const c=l.wa.indexOf(t);c>=0&&(l.wa.splice(c,1),l.wa.length===0?s=t.ba()?0:1:!l.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function BM(n,t){const e=pe(n);let i=!1;for(const s of t){const l=s.query,c=e.queries.get(l);if(c){for(const f of c.wa)f.Ca(s)&&(i=!0);c.ya=s}}i&&HE(e)}function jM(n,t,e){const i=pe(n),s=i.queries.get(t);if(s)for(const l of s.wa)l.onError(e);i.queries.delete(t)}function HE(n){n.Da.forEach((t=>{t.next()}))}var gA,h3;(h3=gA||(gA={})).Fa="default",h3.Cache="cache";class GE{constructor(t,e,i){this.query=t,this.Ma=e,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Em(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),e=!0):this.Ba(t,this.onlineState)&&(this.La(t),e=!0),this.Oa=t,e}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let e=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),e=!0),e}Ba(t,e){if(!t.fromCache||!this.ba())return!0;const i=e!=="Offline";return(!this.options.ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const e=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}La(t){t=Em.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==gA.Cache}}class A6{constructor(t){this.key=t}}class E6{constructor(t){this.key=t}}class HM{constructor(t,e){this.query=t,this.Ha=e,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Be(),this.mutatedKeys=Be(),this.Xa=j5(t),this.eu=new cm(this.Xa)}get tu(){return this.Ha}nu(t,e){const i=e?e.ru:new u3,s=e?e.eu:this.eu;let l=e?e.mutatedKeys:this.mutatedKeys,c=s,f=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((A,E)=>{const T=s.get(A),x=F1(this.query,E)?E:null,w=!!T&&this.mutatedKeys.has(T.key),I=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let L=!1;T&&x?T.data.isEqual(x.data)?w!==I&&(i.track({type:3,doc:x}),L=!0):this.iu(T,x)||(i.track({type:2,doc:x}),L=!0,(m&&this.Xa(x,m)>0||g&&this.Xa(x,g)<0)&&(f=!0)):!T&&x?(i.track({type:0,doc:x}),L=!0):T&&!x&&(i.track({type:1,doc:T}),L=!0,(m||g)&&(f=!0)),L&&(x?(c=c.add(x),l=I?l.add(A):l.delete(A)):(c=c.delete(A),l=l.delete(A)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const A=this.query.limitType==="F"?c.last():c.first();c=c.delete(A.key),l=l.delete(A.key),i.track({type:1,doc:A})}return{eu:c,ru:i,Ds:f,mutatedKeys:l}}iu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const l=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const c=t.ru.pa();c.sort(((A,E)=>(function(x,w){const I=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{At:L})}};return I(x)-I(w)})(A.type,E.type)||this.Xa(A.doc,E.doc))),this.su(i),s=s!=null&&s;const f=e&&!s?this.ou():[],m=this.Za.size===0&&this.current&&!s?1:0,g=m!==this.Ya;return this.Ya=m,c.length!==0||g?{snapshot:new Em(this.query,t.eu,l,c,t.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new u3,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach((e=>this.Ha=this.Ha.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ha=this.Ha.delete(e))),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Be(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const e=[];return t.forEach((i=>{this.Za.has(i)||e.push(new E6(i))})),this.Za.forEach((i=>{t.has(i)||e.push(new A6(i))})),e}uu(t){this.Ha=t.qs,this.Za=Be();const e=this.nu(t.documents);return this.applyChanges(e,!0)}cu(){return Em.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const qE="SyncEngine";class GM{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class qM{constructor(t){this.key=t,this.lu=!1}}class FM{constructor(t,e,i,s,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Hf((f=>B5(f)),q1),this.Tu=new Map,this.Iu=new Set,this.du=new Li(Jt.comparator),this.Eu=new Map,this.Au=new DE,this.Ru={},this.Vu=new Map,this.mu=Am.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function YM(n,t,e=!0){const i=w6(n);let s;const l=i.Pu.get(t);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.cu()):s=await S6(i,t,e,!0),s}async function QM(n,t){const e=w6(n);await S6(e,t,!0,!1)}async function S6(n,t,e,i){const s=await dM(n.localStore,Lo(t)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,e);let f;return i&&(f=await XM(n,t,l,c==="current",s.resumeToken)),n.isPrimaryClient&&e&&m6(n.remoteStore,s),f}async function XM(n,t,e,i,s){n.gu=(E,T,x)=>(async function(I,L,B,j){let q=L.view.nu(B);q.Ds&&(q=await i3(I.localStore,L.query,!1).then((({documents:P})=>L.view.nu(P,q))));const $=j&&j.targetChanges.get(L.targetId),Z=j&&j.targetMismatches.get(L.targetId)!=null,nt=L.view.applyChanges(q,I.isPrimaryClient,$,Z);return d3(I,L.targetId,nt._u),nt.snapshot})(n,E,T,x);const l=await i3(n.localStore,t,!0),c=new HM(t,l.qs),f=c.nu(l.documents),m=b0.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),g=c.applyChanges(f,n.isPrimaryClient,m);d3(n,e,g._u);const A=new GM(t,e,c);return n.Pu.set(t,A),n.Tu.has(e)?n.Tu.get(e).push(t):n.Tu.set(e,[t]),g.snapshot}async function KM(n,t,e){const i=pe(n),s=i.Pu.get(t),l=i.Tu.get(s.targetId);if(l.length>1)return i.Tu.set(s.targetId,l.filter((c=>!q1(c,t)))),void i.Pu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await mA(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),e&&LE(i.remoteStore,s.targetId),_A(i,s.targetId)})).catch(Um)):(_A(i,s.targetId),await mA(i.localStore,s.targetId,!0))}async function WM(n,t){const e=pe(n),i=e.Pu.get(t),s=e.Tu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),LE(e.remoteStore,i.targetId))}async function JM(n,t,e){const i=sL(n);try{const s=await(function(c,f){const m=pe(c),g=sn.now(),A=f.reduce(((x,w)=>x.add(w.key)),Be());let E,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let w=Pu(),I=Be();return m.Os.getEntries(x,A).next((L=>{w=L,w.forEach(((B,j)=>{j.isValidDocument()||(I=I.add(B))}))})).next((()=>m.localDocuments.getOverlayedDocuments(x,w))).next((L=>{E=L;const B=[];for(const j of f){const q=dO(j,E.get(j.key).overlayedDocument);q!=null&&B.push(new vh(j.key,q,O5(q.value.mapValue),nl.exists(!0)))}return m.mutationQueue.addMutationBatch(x,g,B,f)})).next((L=>{T=L;const B=L.applyToLocalDocumentSet(E,I);return m.documentOverlayCache.saveOverlays(x,L.batchId,B)}))})).then((()=>({batchId:T.batchId,changes:G5(E)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),(function(c,f,m){let g=c.Ru[c.currentUser.toKey()];g||(g=new Li(xe)),g=g.insert(f,m),c.Ru[c.currentUser.toKey()]=g})(i,s.batchId,e),await R0(i,s.changes),await J1(i.remoteStore)}catch(s){const l=zE(s,"Failed to persist write");e.reject(l)}}async function T6(n,t){const e=pe(n);try{const i=await cM(e.localStore,t);t.targetChanges.forEach(((s,l)=>{const c=e.Eu.get(l);c&&(an(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.lu=!0:s.modifiedDocuments.size>0?an(c.lu,14607):s.removedDocuments.size>0&&(an(c.lu,42227),c.lu=!1))})),await R0(e,i,t)}catch(i){await Um(i)}}function f3(n,t,e){const i=pe(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.Pu.forEach(((l,c)=>{const f=c.view.va(t);f.snapshot&&s.push(f.snapshot)})),(function(c,f){const m=pe(c);m.onlineState=f;let g=!1;m.queries.forEach(((A,E)=>{for(const T of E.wa)T.va(f)&&(g=!0)})),g&&HE(m)})(i.eventManager,t),s.length&&i.hu.J_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function ZM(n,t,e){const i=pe(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Eu.get(t),l=s&&s.key;if(l){let c=new Li(Jt.comparator);c=c.insert(l,Xs.newNoDocument(l,ce.min()));const f=Be().add(l),m=new X1(ce.min(),new Map,new Li(xe),c,f);await T6(i,m),i.du=i.du.remove(l),i.Eu.delete(t),FE(i)}else await mA(i.localStore,t,!1).then((()=>_A(i,t,e))).catch(Um)}async function $M(n,t){const e=pe(n),i=t.batch.batchId;try{const s=await uM(e.localStore,t);C6(e,i,null),b6(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await R0(e,s)}catch(s){await Um(s)}}async function tL(n,t,e){const i=pe(n);try{const s=await(function(c,f){const m=pe(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let A;return m.mutationQueue.lookupMutationBatch(g,f).next((E=>(an(E!==null,37113),A=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,A,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,A))).next((()=>m.localDocuments.getDocuments(g,A)))}))})(i.localStore,t);C6(i,t,e),b6(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await R0(i,s)}catch(s){await Um(s)}}function b6(n,t){(n.Vu.get(t)||[]).forEach((e=>{e.resolve()})),n.Vu.delete(t)}function C6(n,t,e){const i=pe(n);let s=i.Ru[i.currentUser.toKey()];if(s){const l=s.get(t);l&&(e?l.reject(e):l.resolve(),s=s.remove(t)),i.Ru[i.currentUser.toKey()]=s}}function _A(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Tu.get(t))n.Pu.delete(i),e&&n.hu.pu(i,e);n.Tu.delete(t),n.isPrimaryClient&&n.Au.zr(t).forEach((i=>{n.Au.containsKey(i)||R6(n,i)}))}function R6(n,t){n.Iu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(LE(n.remoteStore,e),n.du=n.du.remove(t),n.Eu.delete(e),FE(n))}function d3(n,t,e){for(const i of e)i instanceof A6?(n.Au.addReference(i.key,t),eL(n,i)):i instanceof E6?(Gt(qE,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,t),n.Au.containsKey(i.key)||R6(n,i.key)):re(19791,{yu:i})}function eL(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Iu.has(i)||(Gt(qE,"New document in limbo: "+e),n.Iu.add(i),FE(n))}function FE(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Iu.values().next().value;n.Iu.delete(t);const e=new Jt(An.fromString(t)),i=n.mu.next();n.Eu.set(i,new qM(e)),n.du=n.du.insert(e,i),m6(n.remoteStore,new Kc(Lo(G1(e.path)),i,"TargetPurposeLimboResolution",B1.ue))}}async function R0(n,t,e){const i=pe(n),s=[],l=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach(((f,m)=>{c.push(i.gu(m,t,e).then((g=>{var A;if((g||e)&&i.isPrimaryClient){const E=g?!g.fromCache:(A=e?.targetChanges.get(m.targetId))===null||A===void 0?void 0:A.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){s.push(g);const E=OE.Es(m.targetId,g);l.push(E)}})))})),await Promise.all(c),i.hu.J_(s),await(async function(m,g){const A=pe(m);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>bt.forEach(g,(T=>bt.forEach(T.Is,(x=>A.persistence.referenceDelegate.addReference(E,T.targetId,x))).next((()=>bt.forEach(T.ds,(x=>A.persistence.referenceDelegate.removeReference(E,T.targetId,x)))))))))}catch(E){if(!zm(E))throw E;Gt(ME,"Failed to update sequence numbers: "+E)}for(const E of g){const T=E.targetId;if(!E.fromCache){const x=A.Fs.get(T),w=x.snapshotVersion,I=x.withLastLimboFreeSnapshotVersion(w);A.Fs=A.Fs.insert(T,I)}}})(i.localStore,l))}async function nL(n,t){const e=pe(n);if(!e.currentUser.isEqual(t)){Gt(qE,"User change. New user:",t.toKey());const i=await c6(e.localStore,t);e.currentUser=t,(function(l,c){l.Vu.forEach((f=>{f.forEach((m=>{m.reject(new Bt(Et.CANCELLED,c))}))})),l.Vu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await R0(e,i.Bs)}}function iL(n,t){const e=pe(n),i=e.Eu.get(t);if(i&&i.lu)return Be().add(i.key);{let s=Be();const l=e.Tu.get(t);if(!l)return s;for(const c of l){const f=e.Pu.get(c);s=s.unionWith(f.view.tu)}return s}}function w6(n){const t=pe(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=T6.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iL.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZM.bind(null,t),t.hu.J_=BM.bind(null,t.eventManager),t.hu.pu=jM.bind(null,t.eventManager),t}function sL(n){const t=pe(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$M.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tL.bind(null,t),t}class o1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=K1(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,e){return null}Fu(t,e){return null}vu(t){return oM(this.persistence,new aM,t.initialUser,this.serializer)}Du(t){return new u6(IE.Vi,this.serializer)}bu(t){return new pM}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}o1.provider={build:()=>new o1};class aL extends o1{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,e){an(this.persistence.referenceDelegate instanceof r1,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new qO(i,t.asyncQueue,e)}Du(t){const e=this.cacheSizeBytes!==void 0?Ba.withCacheSize(this.cacheSizeBytes):Ba.DEFAULT;return new u6((i=>r1.Vi(i,e)),this.serializer)}}class yA{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>f3(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nL.bind(null,this.syncEngine),await PM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new zM})()}createDatastore(t){const e=K1(t.databaseInfo.databaseId),i=(function(l){return new AM(l)})(t.databaseInfo);return(function(l,c,f,m){return new bM(l,c,f,m)})(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,s,l,c,f){return new RM(i,s,l,c,f)})(this.localStore,this.datastore,t.asyncQueue,(e=>f3(this.syncEngine,e,0)),(function(){return r3.C()?new r3:new gM})())}createSyncEngine(t,e){return(function(s,l,c,f,m,g,A){const E=new FM(s,l,c,f,m,g);return A&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(s){const l=pe(s);Gt(Lf,"RemoteStore shutting down."),l.Ia.add(5),await C0(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}yA.provider={build:()=>new yA};class YE{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):Vu("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const ch="FirestoreClient";class rL{constructor(t,e,i,s,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=s,this.user=Qs.UNAUTHENTICATED,this.clientId=U1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Gt(ch,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Gt(ch,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Nu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=zE(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function p2(n,t){n.asyncQueue.verifyOperationInProgress(),Gt(ch,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await c6(t.localStore,s),i=s)})),t.persistence.setDatabaseDeletedListener((()=>{ku("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{Gt("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{ku("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),n._offlineComponents=t}async function m3(n,t){n.asyncQueue.verifyOperationInProgress();const e=await lL(n);Gt(ch,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((i=>o3(t.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>o3(t.remoteStore,s))),n._onlineComponents=t}async function lL(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Gt(ch,"Using user provided OfflineComponentProvider");try{await p2(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(s){return s.name==="FirebaseError"?s.code===Et.FAILED_PRECONDITION||s.code===Et.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(e))throw e;ku("Error using user provided cache. Falling back to memory cache: "+e),await p2(n,new o1)}}else Gt(ch,"Using default OfflineComponentProvider"),await p2(n,new aL(void 0));return n._offlineComponents}async function x6(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Gt(ch,"Using user provided OnlineComponentProvider"),await m3(n,n._uninitializedComponentsProvider._online)):(Gt(ch,"Using default OnlineComponentProvider"),await m3(n,new yA))),n._onlineComponents}function oL(n){return x6(n).then((t=>t.syncEngine))}async function u1(n){const t=await x6(n),e=t.eventManager;return e.onListen=YM.bind(null,t.syncEngine),e.onUnlisten=KM.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=QM.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=WM.bind(null,t.syncEngine),e}function uL(n,t,e={}){const i=new Nu;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,g){const A=new YE({next:T=>{A.Ou(),c.enqueueAndForget((()=>jE(l,E)));const x=T.docs.has(f);!x&&T.fromCache?g.reject(new Bt(Et.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&T.fromCache&&m&&m.source==="server"?g.reject(new Bt(Et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new GE(G1(f.path),A,{includeMetadataChanges:!0,ka:!0});return BE(l,E)})(await u1(n),n.asyncQueue,t,e,i))),i.promise}function cL(n,t,e={}){const i=new Nu;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,g){const A=new YE({next:T=>{A.Ou(),c.enqueueAndForget((()=>jE(l,E))),T.fromCache&&m.source==="server"?g.reject(new Bt(Et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new GE(f,A,{includeMetadataChanges:!0,ka:!0});return BE(l,E)})(await u1(n),n.asyncQueue,t,e,i))),i.promise}function N6(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}const p3=new Map;const D6="firestore.googleapis.com",g3=!0;class _3{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Bt(Et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=D6,this.ssl=g3}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:g3;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=o6;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<HO)throw new Bt(Et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}E5("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=N6((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Bt(Et.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Bt(Et.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Bt(Et.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class w0{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Bt(Et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Bt(Et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _3(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new v5;switch(i.type){case"firstParty":return new SI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Bt(Et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=p3.get(e);i&&(Gt("ComponentProvider","Removing Datastore"),p3.delete(e),i.terminate())})(this),Promise.resolve()}}function I6(n,t,e,i={}){var s;n=Ks(n,w0);const l=ph(t),c=n._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),m=`${t}:${e}`;l&&(sE(`https://${m}`),aE("Firestore",!0)),c.host!==D6&&c.host!==m&&ku("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:i});if(!ih(g,f)&&(n._setSettings(g),i.mockUserToken)){let A,E;if(typeof i.mockUserToken=="string")A=i.mockUserToken,E=Qs.MOCK_USER;else{A=TC(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Bt(Et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Qs(T)}n._authCredentials=new vI(new y5(A,E))}}class ju{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new ju(this.firestore,t,this._query)}}class ti{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Du(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ti(this.firestore,t,this._key)}toJSON(){return{type:ti._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(S0(e,ti._jsonSchema))return new ti(t,i||null,new Jt(An.fromString(e.referencePath)))}}ti._jsonSchemaVersion="firestore/documentReference/1.0",ti._jsonSchema={type:Oi("string",ti._jsonSchemaVersion),referencePath:Oi("string")};class Du extends ju{constructor(t,e,i){super(t,e,G1(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ti(this.firestore,null,new Jt(t))}withConverter(t){return new Du(this.firestore,t,this._path)}}function Hm(n,t,...e){if(n=jn(n),vE("collection","path",t),n instanceof w0){const i=An.fromString(t,...e);return DT(i),new Du(n,null,i)}{if(!(n instanceof ti||n instanceof Du))throw new Bt(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(An.fromString(t,...e));return DT(i),new Du(n.firestore,null,i)}}function QE(n,t){if(n=Ks(n,w0),vE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Bt(Et.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ju(n,null,(function(i){return new Bm(An.emptyPath(),i)})(t))}function Hu(n,t,...e){if(n=jn(n),arguments.length===1&&(t=U1.newId()),vE("doc","path",t),n instanceof w0){const i=An.fromString(t,...e);return NT(i),new ti(n,null,new Jt(i))}{if(!(n instanceof ti||n instanceof Du))throw new Bt(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(An.fromString(t,...e));return NT(i),new ti(n.firestore,n instanceof Du?n.converter:null,new Jt(i))}}const y3="AsyncQueue";class v3{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new f6(this,"async_queue_retry"),this.oc=()=>{const i=m2();i&&Gt(y3,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=t;const e=m2();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=m2();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise((()=>{}));const e=new Nu;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Zu.push(t),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!zm(t))throw t;Gt(y3,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(t){const e=this._c.then((()=>(this.nc=!0,t().catch((i=>{throw this.tc=i,this.nc=!1,Vu("INTERNAL UNHANDLED ERROR: ",A3(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=e,e}enqueueAfterDelay(t,e,i){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const s=UE.createAndSchedule(this,t,e,i,(l=>this.lc(l)));return this.ec.push(s),s}ac(){this.tc&&re(47125,{hc:A3(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then((()=>{this.ec.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.ec)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Pc()}))}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function A3(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}function E3(n){return(function(e,i){if(typeof e!="object"||e===null)return!1;const s=e;for(const l of i)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Po extends w0{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new v3,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new v3(t),this._firestoreClient=void 0,await t}}}function O6(n,t){const e=typeof n=="object"?n:oE(),i=typeof n=="string"?n:t1,s=L1(e,"firestore").getImmediate({identifier:i});if(!s._initialized){const l=AC("firestore");l&&I6(s,...l)}return s}function x0(n){if(n._terminated)throw new Bt(Et.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||hL(n),n._firestoreClient}function hL(n){var t,e,i;const s=n._freezeSettings(),l=(function(f,m,g,A){return new PI(f,m,g,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,N6(A.experimentalLongPollingOptions),A.useFetchStreams,A.isUsingEmulator)})(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((e=s.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new rL(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(f){const m=f?._online.build();return{_offline:f?._offline.build(m),_online:m}})(n._componentsProvider))}class hr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new hr(is.fromBase64String(t))}catch(e){throw new Bt(Et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new hr(is.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:hr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(S0(t,hr._jsonSchema))return hr.fromBase64String(t.bytes)}}hr._jsonSchemaVersion="firestore/bytes/1.0",hr._jsonSchema={type:Oi("string",hr._jsonSchemaVersion),bytes:Oi("string")};class N0{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Bt(Et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ns(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class D0{constructor(t){this._methodName=t}}class Pl{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Bt(Et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Bt(Et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return xe(this._lat,t._lat)||xe(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pl._jsonSchemaVersion}}static fromJSON(t){if(S0(t,Pl._jsonSchema))return new Pl(t.latitude,t.longitude)}}Pl._jsonSchemaVersion="firestore/geoPoint/1.0",Pl._jsonSchema={type:Oi("string",Pl._jsonSchemaVersion),latitude:Oi("number"),longitude:Oi("number")};class Ul{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,s){if(i.length!==s.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==s[l])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ul._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(S0(t,Ul._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Ul(t.vectorValues);throw new Bt(Et.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ul._jsonSchemaVersion="firestore/vectorValue/1.0",Ul._jsonSchema={type:Oi("string",Ul._jsonSchemaVersion),vectorValues:Oi("object")};const fL=/^__.*__$/;class dL{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new vh(t,this.data,this.fieldMask,e,this.fieldTransforms):new T0(t,this.data,e,this.fieldTransforms)}}class M6{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new vh(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function L6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ec:n})}}class XE{constructor(t,e,i,s,l,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new XE(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.Rc({path:i,mc:!1});return s.fc(t),s}gc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return c1(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(L6(this.Ec)&&fL.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class mL{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||K1(t)}Dc(t,e,i,s=!1){return new XE({Ec:t,methodName:e,bc:i,path:ns.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Z1(n){const t=n._freezeSettings(),e=K1(n._databaseId);return new mL(n._databaseId,!!t.ignoreUndefinedProperties,e)}function V6(n,t,e,i,s,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,t,e,s);WE("Data must be an object, but it was:",c,i);const f=k6(i,c);let m,g;if(l.merge)m=new dr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const A=[];for(const E of l.mergeFields){const T=vA(t,E,e);if(!c.contains(T))throw new Bt(Et.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);U6(A,T)||A.push(T)}m=new dr(A),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new dL(new ja(f),m,g)}class $1 extends D0{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof $1}}class KE extends D0{_toFieldTransform(t){return new uO(t.path,new e0)}isEqual(t){return t instanceof KE}}function pL(n,t,e,i){const s=n.Dc(1,t,e);WE("Data must be an object, but it was:",s,i);const l=[],c=ja.empty();yh(i,((m,g)=>{const A=JE(t,m,e);g=jn(g);const E=s.gc(A);if(g instanceof $1)l.push(A);else{const T=I0(g,E);T!=null&&(l.push(A),c.set(A,T))}}));const f=new dr(l);return new M6(c,f,s.fieldTransforms)}function gL(n,t,e,i,s,l){const c=n.Dc(1,t,e),f=[vA(t,i,e)],m=[s];if(l.length%2!=0)throw new Bt(Et.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)f.push(vA(t,l[T])),m.push(l[T+1]);const g=[],A=ja.empty();for(let T=f.length-1;T>=0;--T)if(!U6(g,f[T])){const x=f[T];let w=m[T];w=jn(w);const I=c.gc(x);if(w instanceof $1)g.push(x);else{const L=I0(w,I);L!=null&&(g.push(x),A.set(x,L))}}const E=new dr(g);return new M6(A,E,c.fieldTransforms)}function _L(n,t,e,i=!1){return I0(e,n.Dc(i?4:3,t))}function I0(n,t){if(P6(n=jn(n)))return WE("Unsupported field value:",t,n),k6(n,t);if(n instanceof D0)return(function(i,s){if(!L6(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return(function(i,s){const l=[];let c=0;for(const f of i){let m=I0(f,s.yc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,t)}return(function(i,s){if((i=jn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return rO(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=sn.fromDate(i);return{timestampValue:a1(s.serializer,l)}}if(i instanceof sn){const l=new sn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:a1(s.serializer,l)}}if(i instanceof Pl)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof hr)return{bytesValue:e6(s.serializer,i._byteString)};if(i instanceof ti){const l=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw s.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:NE(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Ul)return(function(c,f){return{mapValue:{fields:{[D5]:{stringValue:I5},[e1]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw f.wc("VectorValues must only contain numeric values.");return CE(f.serializer,g)}))}}}}}})(i,s);throw s.wc(`Unsupported field value: ${z1(i)}`)})(n,t)}function k6(n,t){const e={};return b5(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):yh(n,((i,s)=>{const l=I0(s,t.Vc(i));l!=null&&(e[i]=l)})),{mapValue:{fields:e}}}function P6(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof sn||n instanceof Pl||n instanceof hr||n instanceof ti||n instanceof D0||n instanceof Ul)}function WE(n,t,e){if(!P6(e)||!S5(e)){const i=z1(e);throw i==="an object"?t.wc(n+" a custom object"):t.wc(n+" "+i)}}function vA(n,t,e){if((t=jn(t))instanceof N0)return t._internalPath;if(typeof t=="string")return JE(n,t);throw c1("Field path arguments must be of type string or ",n,!1,void 0,e)}const yL=new RegExp("[~\\*/\\[\\]]");function JE(n,t,e){if(t.search(yL)>=0)throw c1(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new N0(...t.split("."))._internalPath}catch{throw c1(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function c1(n,t,e,i,s){const l=i&&!i.isEmpty(),c=s!==void 0;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${s}`),m+=")"),new Bt(Et.INVALID_ARGUMENT,f+n+m)}function U6(n,t){return n.some((e=>e.isEqual(t)))}class z6{constructor(t,e,i,s,l){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new vL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(ZE("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class vL extends z6{data(){return super.data()}}function ZE(n,t){return typeof t=="string"?JE(n,t):t instanceof N0?t._internalPath:t._delegate._internalPath}function B6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Bt(Et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $E{}class j6 extends $E{}function h1(n,t,...e){let i=[];t instanceof $E&&i.push(t),i=i.concat(e),(function(l){const c=l.filter((m=>m instanceof tv)).length,f=l.filter((m=>m instanceof O0)).length;if(c>1||c>0&&f>0)throw new Bt(Et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class O0 extends j6{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new O0(t,e,i)}_apply(t){const e=this._parse(t);return H6(t._query,e),new ju(t.firestore,t.converter,oA(t._query,e))}_parse(t){const e=Z1(t.firestore);return(function(l,c,f,m,g,A,E){let T;if(g.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new Bt(Et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){T3(E,A);const w=[];for(const I of E)w.push(S3(m,l,I));T={arrayValue:{values:w}}}else T=S3(m,l,E)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||T3(E,A),T=_L(f,c,E,A==="in"||A==="not-in");return Ii.create(g,A,T)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function s0(n,t,e){const i=t,s=ZE("where",n);return O0._create(s,i,e)}class tv extends $E{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new tv(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:Hl.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(s,l){let c=s;const f=l.getFlattenedFilters();for(const m of f)H6(c,m),c=oA(c,m)})(t._query,e),new ju(t.firestore,t.converter,oA(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function S3(n,t,e){if(typeof(e=jn(e))=="string"){if(e==="")throw new Bt(Et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z5(t)&&e.indexOf("/")!==-1)throw new Bt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(An.fromString(e));if(!Jt.isDocumentKey(i))throw new Bt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return UT(n,new Jt(i))}if(e instanceof ti)return UT(n,e._key);throw new Bt(Et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${z1(e)}.`)}function T3(n,t){if(!Array.isArray(n)||n.length===0)throw new Bt(Et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function H6(n,t){const e=(function(s,l){for(const c of s)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new Bt(Et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Bt(Et.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class G6{convertValue(t,e="none"){switch(oh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return yi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(lh(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw re(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return yh(t,((s,l)=>{i[s]=this.convertValue(l,e)})),i}convertVectorValue(t){var e,i,s;const l=(s=(i=(e=t.fields)===null||e===void 0?void 0:e[e1].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map((c=>yi(c.doubleValue)));return new Ul(l)}convertGeoPoint(t){return new Pl(yi(t.latitude),yi(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=H1(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp($g(t));default:return null}}convertTimestamp(t){const e=rh(t);return new sn(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=An.fromString(t);an(l6(i),9688,{name:t});const s=new _m(i.get(1),i.get(3)),l=new Jt(i.popFirst(5));return s.isEqual(e)||Vu(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}function q6(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class sm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class th extends z6{constructor(t,e,i,s,l,c){super(t,e,i,s,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Pg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(ZE("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Bt(Et.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=th._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}th._jsonSchemaVersion="firestore/documentSnapshot/1.0",th._jsonSchema={type:Oi("string",th._jsonSchemaVersion),bundleSource:Oi("string","DocumentSnapshot"),bundleName:Oi("string"),bundle:Oi("string")};class Pg extends th{data(t={}){return super.data(t)}}class eh{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new sm(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new Pg(this._firestore,this._userDataWriter,i.key,i,new sm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Bt(Et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((f=>{const m=new Pg(s._firestore,s._userDataWriter,f.doc.key,f.doc,new sm(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new Pg(s._firestore,s._userDataWriter,f.doc.key,f.doc,new sm(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,A=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),A=c.indexOf(f.doc.key)),{type:AL(f.type),doc:m,oldIndex:g,newIndex:A}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Bt(Et.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=eh._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=U1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(e.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function AL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:n})}}function ev(n){n=Ks(n,ti);const t=Ks(n.firestore,Po);return uL(x0(t),n._key).then((e=>F6(t,n,e)))}eh._jsonSchemaVersion="firestore/querySnapshot/1.0",eh._jsonSchema={type:Oi("string",eh._jsonSchemaVersion),bundleSource:Oi("string","QuerySnapshot"),bundleName:Oi("string"),bundle:Oi("string")};class tS extends G6{constructor(t){super(),this.firestore=t}convertBytes(t){return new hr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ti(this.firestore,null,e)}}function eS(n){n=Ks(n,ju);const t=Ks(n.firestore,Po),e=x0(t),i=new tS(t);return B6(n._query),cL(e,n._query).then((s=>new eh(t,i,n,s)))}function M0(n,t,e){n=Ks(n,ti);const i=Ks(n.firestore,Po),s=q6(n.converter,t);return L0(i,[V6(Z1(i),"setDoc",n._key,s,n.converter!==null,e).toMutation(n._key,nl.none())])}function qf(n,t,e,...i){n=Ks(n,ti);const s=Ks(n.firestore,Po),l=Z1(s);let c;return c=typeof(t=jn(t))=="string"||t instanceof N0?gL(l,"updateDoc",n._key,t,e,i):pL(l,"updateDoc",n._key,t),L0(s,[c.toMutation(n._key,nl.exists(!0))])}function nv(n){return L0(Ks(n.firestore,Po),[new RE(n._key,nl.none())])}function Ml(n,t){const e=Ks(n.firestore,Po),i=Hu(n),s=q6(n.converter,t);return L0(e,[V6(Z1(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,nl.exists(!1))]).then((()=>i))}function a0(n,...t){var e,i,s;n=jn(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof t[c]!="object"||E3(t[c])||(l=t[c++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(E3(t[c])){const E=t[c];t[c]=(e=E.next)===null||e===void 0?void 0:e.bind(E),t[c+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),t[c+2]=(s=E.complete)===null||s===void 0?void 0:s.bind(E)}let m,g,A;if(n instanceof ti)g=Ks(n.firestore,Po),A=G1(n._key.path),m={next:E=>{t[c]&&t[c](F6(g,n,E))},error:t[c+1],complete:t[c+2]};else{const E=Ks(n,ju);g=Ks(E.firestore,Po),A=E._query;const T=new tS(g);m={next:x=>{t[c]&&t[c](new eh(g,T,E,x))},error:t[c+1],complete:t[c+2]},B6(n._query)}return(function(T,x,w,I){const L=new YE(I),B=new GE(x,L,w);return T.asyncQueue.enqueueAndForget((async()=>BE(await u1(T),B))),()=>{L.Ou(),T.asyncQueue.enqueueAndForget((async()=>jE(await u1(T),B)))}})(x0(g),A,f,m)}function L0(n,t){return(function(i,s){const l=new Nu;return i.asyncQueue.enqueueAndForget((async()=>JM(await oL(i),s,l))),l.promise})(x0(n),t)}function F6(n,t,e){const i=e.docs.get(t._key),s=new tS(n);return new th(n,s,t._key,i,new sm(e.hasPendingWrites,e.fromCache),t.converter)}function Mi(){return new KE("serverTimestamp")}(function(t,e=!0){(function(s){Pm=s})(Bf),Df(new sh("firestore",((i,{instanceIdentifier:s,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new Po(new AI(i.getProvider("auth-internal")),new TI(c,i.getProvider("app-check-internal")),(function(g,A){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Bt(Et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _m(g.options.projectId,A)})(c,s),c);return l=Object.assign({useFetchStreams:e},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Io(bT,CT,t),Io(bT,CT,"esm2017")})();const EL=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:G6,Bytes:hr,CollectionReference:Du,DocumentReference:ti,DocumentSnapshot:th,FieldPath:N0,FieldValue:D0,Firestore:Po,FirestoreError:Bt,GeoPoint:Pl,Query:ju,QueryCompositeFilterConstraint:tv,QueryConstraint:j6,QueryDocumentSnapshot:Pg,QueryFieldFilterConstraint:O0,QuerySnapshot:eh,SnapshotMetadata:sm,Timestamp:sn,VectorValue:Ul,_AutoId:U1,_ByteString:is,_DatabaseId:_m,_DocumentKey:Jt,_EmptyAuthCredentialsProvider:v5,_FieldPath:ns,_cast:Ks,_logWarn:ku,_validateIsNotUsedTogether:E5,addDoc:Ml,collection:Hm,collectionGroup:QE,connectFirestoreEmulator:I6,deleteDoc:nv,doc:Hu,ensureFirestoreConfigured:x0,executeWrite:L0,getDoc:ev,getDocs:eS,getFirestore:O6,onSnapshot:a0,query:h1,serverTimestamp:Mi,setDoc:M0,updateDoc:qf,where:s0},Symbol.toStringTag,{value:"Module"}));var b3={};const C3="@firebase/database",R3="1.0.20";let Y6="";function SL(n){Y6=n}class TL{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),es(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:Xg(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class bL{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return Uo(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Q6=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new TL(t)}}catch{}return new bL},wf=Q6("localStorage"),CL=Q6("sessionStorage");const hm=new M1("@firebase/database"),RL=(function(){let n=1;return function(){return n++}})(),X6=function(n){const t=Q7(n),e=new G7;e.update(t);const i=e.digest();return iE.encodeByteArray(i)},V0=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=V0.apply(null,i):typeof i=="object"?t+=es(i):t+=i,t+=" "}return t};let Ug=null,w3=!0;const wL=function(n,t){kt(!0,"Can't turn on custom loggers persistently."),hm.logLevel=Pe.VERBOSE,Ug=hm.log.bind(hm)},ws=function(...n){if(w3===!0&&(w3=!1,Ug===null&&CL.get("logging_enabled")===!0&&wL()),Ug){const t=V0.apply(null,n);Ug(t)}},k0=function(n){return function(...t){ws(n,...t)}},AA=function(...n){const t="FIREBASE INTERNAL ERROR: "+V0(...n);hm.error(t)},Uu=function(...n){const t=`FIREBASE FATAL ERROR: ${V0(...n)}`;throw hm.error(t),new Error(t)},qa=function(...n){const t="FIREBASE WARNING: "+V0(...n);hm.warn(t)},xL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&qa("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},iv=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},NL=function(n){if(document.readyState==="complete")n();else{let t=!1;const e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},Sm="[MIN_NAME]",Vf="[MAX_NAME]",Ff=function(n,t){if(n===t)return 0;if(n===Sm||t===Vf)return-1;if(t===Sm||n===Vf)return 1;{const e=x3(n),i=x3(t);return e!==null?i!==null?e-i===0?n.length-t.length:e-i:-1:i!==null?1:n<t?-1:1}},DL=function(n,t){return n===t?0:n<t?-1:1},ug=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+es(t))},nS=function(n){if(typeof n!="object"||n===null)return es(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)i!==0&&(e+=","),e+=es(t[i]),e+=":",e+=nS(n[t[i]]);return e+="}",e},K6=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let s=0;s<e;s+=t)s+t>e?i.push(n.substring(s,e)):i.push(n.substring(s,s+t));return i};function Js(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const W6=function(n){kt(!iv(n),"Invalid JSON number");const t=11,e=52,i=(1<<t-1)-1;let s,l,c,f,m;n===0?(l=0,c=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),i),l=f+i,c=Math.round(n*Math.pow(2,e-f)-Math.pow(2,e))):(l=0,c=Math.round(n/Math.pow(2,1-i-e))));const g=[];for(m=e;m;m-=1)g.push(c%2?1:0),c=Math.floor(c/2);for(m=t;m;m-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(s?1:0),g.reverse();const A=g.join("");let E="";for(m=0;m<64;m+=8){let T=parseInt(A.substr(m,8),2).toString(16);T.length===1&&(T="0"+T),E=E+T}return E.toLowerCase()},IL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},OL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ML(n,t){let e="Unknown Error";n==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?e="Client doesn't have permission to access the desired data.":n==="unavailable"&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}const LL=new RegExp("^-?(0*)\\d{1,10}$"),VL=-2147483648,kL=2147483647,x3=function(n){if(LL.test(n)){const t=Number(n);if(t>=VL&&t<=kL)return t}return null},Gm=function(n){try{n()}catch(t){setTimeout(()=>{const e=t.stack||"";throw qa("Exception was thrown by user callback.",e),t},Math.floor(0))}},PL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},zg=function(n,t){const e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};class UL{constructor(t,e){this.appCheckProvider=e,this.appName=t.name,cr(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){qa(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zL{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(ws("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qa(t)}}class Uy{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Uy.OWNER="owner";const iS="5",J6="v",Z6="s",$6="r",t9="f",e9=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,n9="ls",i9="p",EA="ac",s9="websocket",a9="long_polling";class r9{constructor(t,e,i,s,l=!1,c="",f=!1,m=!1,g=null){this.secure=e,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=l,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wf.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&wf.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function BL(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function l9(n,t,e){kt(typeof t=="string","typeof type must == string"),kt(typeof e=="object","typeof params must == object");let i;if(t===s9)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===a9)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);BL(n)&&(e.ns=n.namespace);const s=[];return Js(e,(l,c)=>{s.push(l+"="+c)}),i+s.join("&")}class jL{constructor(){this.counters_={}}incrementCounter(t,e=1){Uo(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return S7(this.counters_)}}const g2={},_2={};function sS(n){const t=n.toString();return g2[t]||(g2[t]=new jL),g2[t]}function HL(n,t){const e=n.toString();return _2[e]||(_2[e]=t()),_2[e]}class GL{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Gm(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const N3="start",qL="close",FL="pLPCommand",YL="pRTLPCB",o9="id",u9="pw",c9="ser",QL="cb",XL="seg",KL="ts",WL="d",JL="dframe",h9=1870,f9=30,ZL=h9-f9,$L=25e3,tV=3e4;class am{constructor(t,e,i,s,l,c,f){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k0(t),this.stats_=sS(e),this.urlFn=m=>(this.appCheckToken&&(m[EA]=this.appCheckToken),l9(e,a9,m))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new GL(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(tV)),NL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new aS((...l)=>{const[c,f,m,g,A]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===N3)this.id=f,this.password=m;else if(c===qL)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...l)=>{const[c,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const i={};i[N3]="t",i[c9]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[QL]=this.scriptTagHolder.uniqueCallbackIdentifier),i[J6]=iS,this.transportSessionId&&(i[Z6]=this.transportSessionId),this.lastSessionId&&(i[n9]=this.lastSessionId),this.applicationId&&(i[i9]=this.applicationId),this.appCheckToken&&(i[EA]=this.appCheckToken),typeof location<"u"&&location.hostname&&e9.test(location.hostname)&&(i[$6]=t9);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){am.forceAllow_=!0}static forceDisallow(){am.forceDisallow_=!0}static isAvailable(){return am.forceAllow_?!0:!am.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!IL()&&!OL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=es(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=_C(e),s=K6(i,ZL);for(let l=0;l<s.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[l]),this.curSegmentNum++}addDisconnectPingFrame(t,e){this.myDisconnFrame=document.createElement("iframe");const i={};i[JL]="t",i[o9]=t,i[u9]=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=es(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class aS{constructor(t,e,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=RL(),window[FL+this.uniqueCallbackIdentifier]=t,window[YL+this.uniqueCallbackIdentifier]=e,this.myIFrame=aS.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){ws("frame writing exception"),f.stack&&ws(f.stack),ws(f)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||ws("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[o9]=this.myID,t[u9]=this.myPW,t[c9]=this.currentSerial;let e=this.urlFn(t),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+f9+i.length<=h9;){const c=this.pendingSegs.shift();i=i+"&"+XL+s+"="+c.seg+"&"+KL+s+"="+c.ts+"&"+WL+s+"="+c.d,s++}return e=e+i,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},s=setTimeout(i,Math.floor($L)),l=()=>{clearTimeout(s),i()};this.addTag(t,l)}addTag(t,e){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{ws("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}const eV=16384,nV=45e3;let f1=null;typeof MozWebSocket<"u"?f1=MozWebSocket:typeof WebSocket<"u"&&(f1=WebSocket);class Ll{constructor(t,e,i,s,l,c,f){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k0(this.connId),this.stats_=sS(e),this.connURL=Ll.connectionURL_(e,c,f,s,i),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,i,s,l){const c={};return c[J6]=iS,typeof location<"u"&&location.hostname&&e9.test(location.hostname)&&(c[$6]=t9),e&&(c[Z6]=e),i&&(c[n9]=i),s&&(c[EA]=s),l&&(c[i9]=l),l9(t,s9,c)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wf.set("previous_websocket_failure",!0);try{let i;L7(),this.mySock=new f1(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ll.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(e);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&f1!==null&&!Ll.forceDisallow_}static previouslyFailed(){return wf.isInMemoryStorage||wf.get("previous_websocket_failure")===!0}markConnectionHealthy(){wf.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const i=Xg(e);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(kt(this.frames===null,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(e);else{const i=this.extractFrameCount_(e);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const e=es(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=K6(e,eV);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(nV))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ll.responsesRequiredToBeHealthy=2;Ll.healthyTimeout=3e4;class r0{static get ALL_TRANSPORTS(){return[am,Ll]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const e=Ll&&Ll.isAvailable();let i=e&&!Ll.previouslyFailed();if(t.webSocketOnly&&(e||qa("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ll];else{const s=this.transports_=[];for(const l of r0.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);r0.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}r0.globalTransportInitialized_=!1;const iV=6e4,sV=5e3,aV=10*1024,rV=100*1024,y2="t",D3="d",lV="s",I3="r",oV="e",O3="o",M3="a",L3="n",V3="p",uV="h";class cV{constructor(t,e,i,s,l,c,f,m,g,A){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=l,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k0("c:"+this.id+":"),this.transportManager_=new r0(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=zg(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>aV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(y2 in t){const e=t[y2];e===M3?this.upgradeIfSecondaryHealthy_():e===I3?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===O3&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=ug("t",t),i=ug("d",t);if(e==="c")this.onSecondaryControl_(i);else if(e==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:V3,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:M3,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:L3,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=ug("t",t),i=ug("d",t);e==="c"?this.onControl_(i):e==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=ug(y2,t);if(D3 in t){const i=t[D3];if(e===uV){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(e===L3){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===lV?this.onConnectionShutdown_(i):e===I3?this.onReset_(i):e===oV?AA("Server Error: "+i):e===O3?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):AA("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),iS!==i&&qa("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),zg(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(iV))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zg(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(sV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:V3,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class d9{put(t,e,i,s){}merge(t,e,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class m9{constructor(t){this.allowedEvents_=t,this.listeners_={},kt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const s=this.getInitialEvent(t);s&&e.apply(i,s)}off(t,e,i){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let l=0;l<s.length;l++)if(s[l].callback===e&&(!i||i===s[l].context)){s.splice(l,1);return}}validateEventType_(t){kt(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class d1 extends m9{static getInstance(){return new d1}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!rE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return kt(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const k3=32,P3=768;let rn=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function tn(){return new rn("")}function Ne(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function hh(n){return n.pieces_.length-n.pieceNum_}function vn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new rn(n.pieces_,t)}function rS(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function hV(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function l0(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function p9(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new rn(t,0)}function vi(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof rn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&e.push(i[s])}return new rn(e,0)}function Oe(n){return n.pieceNum_>=n.pieces_.length}function Ha(n,t){const e=Ne(n),i=Ne(t);if(e===null)return t;if(e===i)return Ha(vn(n),vn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function fV(n,t){const e=l0(n,0),i=l0(t,0);for(let s=0;s<e.length&&s<i.length;s++){const l=Ff(e[s],i[s]);if(l!==0)return l}return e.length===i.length?0:e.length<i.length?-1:1}function lS(n,t){if(hh(n)!==hh(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function el(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(hh(n)>hh(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class dV{constructor(t,e){this.errorPrefix_=e,this.parts_=l0(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=O1(this.parts_[i]);g9(this)}}function mV(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=O1(t),g9(n)}function pV(n){const t=n.parts_.pop();n.byteLength_-=O1(t),n.parts_.length>0&&(n.byteLength_-=1)}function g9(n){if(n.byteLength_>P3)throw new Error(n.errorPrefix_+"has a key path longer than "+P3+" bytes ("+n.byteLength_+").");if(n.parts_.length>k3)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+k3+") or object contains a cycle "+Cf(n))}function Cf(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}class oS extends m9{static getInstance(){return new oS}constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(t){return kt(t==="visible","Unknown event type: "+t),[this.visible_]}}const cg=1e3,gV=300*1e3,U3=30*1e3,_V=1.3,yV=3e4,vV="server_kill",z3=3;class Iu extends d9{constructor(t,e,i,s,l,c,f,m){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=c,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=Iu.nextPersistentConnectionId_++,this.log_=k0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cg,this.maxReconnectDelay_=gV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");oS.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&d1.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,i){const s=++this.requestNumber_,l={r:s,a:t,b:e};this.log_(es(l)),kt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const e=new Tu,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:c=>{const f=c.d;c.s==="ok"?e.resolve(f):e.reject(f)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),e.promise}listen(t,e,i,s){this.initConnection_();const l=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+l),this.listens.has(c)||this.listens.set(c,new Map),kt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),kt(!this.listens.get(c).has(l),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:e,query:t,tag:i};this.listens.get(c).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(i)})}sendListen_(t){const e=t.query,i=e._path.toString(),s=e._queryIdentifier;this.log_("Listen on "+i+" for "+s);const l={p:i},c="q";t.tag&&(l.q=e._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest(c,l,f=>{const m=f.d,g=f.s;Iu.warnOnListenWarnings_(m,e),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",f),g!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(g,m))})}static warnOnListenWarnings_(t,e){if(t&&typeof t=="object"&&Uo(t,"w")){const i=mm(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+e._queryParams.getIndex().toString()+'"',l=e._path.toString();qa(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||H7(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=U3)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=j7(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(e,i,s=>{const l=s.s,c=s.d||"error";this.authToken_===t&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const e=t.s,i=t.d||"error";e==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,i)})}unlisten(t,e){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),kt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,e)}sendUnlisten_(t,e,i,s){this.log_("Unlisten on "+t+" for "+e);const l={p:t},c="n";s&&(l.q=i,l.t=s),this.sendRequest(c,l)}onDisconnectPut(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:i})}onDisconnectMerge(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:i})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,i,s){const l={p:e,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(t,e,i,s){this.putInternal("p",t,e,i,s)}merge(t,e,i,s){this.putInternal("m",t,e,i,s)}putInternal(t,e,i,s,l){this.initConnection_();const c={p:e,d:i};l!==void 0&&(c.h=l),this.outstandingPuts_.push({action:t,request:c,onComplete:s}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,i,l=>{this.log_(e+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+es(t));const e=t.r,i=this.requestCBHash_[e];i&&(delete this.requestCBHash_[e],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),t==="d"?this.onDataUpdate_(e.p,e.d,!1,e.t):t==="m"?this.onDataUpdate_(e.p,e.d,!0,e.t):t==="c"?this.onListenRevoked_(e.p,e.q):t==="ac"?this.onAuthRevoked_(e.s,e.d):t==="apc"?this.onAppCheckRevoked_(e.s,e.d):t==="sd"?this.onSecurityDebugPacket_(e):AA("Unrecognized action received from server: "+es(t)+`
Are you using the latest client?`)}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){kt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cg,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=cg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>yV&&(this.reconnectDelay_=cg),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_V)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Iu.nextConnectionId_++,l=this.lastSessionId;let c=!1,f=null;const m=function(){f?f.close():(c=!0,i())},g=function(E){kt(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(E)};this.realtime_={close:m,sendRequest:g};const A=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[E,T]=await Promise.all([this.authTokenProvider_.getToken(A),this.appCheckTokenProvider_.getToken(A)]);c?ws("getToken() completed but was canceled"):(ws("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=T&&T.token,f=new cV(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,i,x=>{qa(x+" ("+this.repoInfo_.toString()+")"),this.interrupt(vV)},l))}catch(E){this.log_("Failed to get token: "+E),c||(this.repoInfo_.nodeAdmin&&qa(E),m())}}}interrupt(t){ws("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ws("Resuming connection for reason: "+t),delete this.interruptReasons_[t],qy(this.interruptReasons_)&&(this.reconnectDelay_=cg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let i;e?i=e.map(l=>nS(l)).join("$"):i="default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,e){const i=new rn(t).toString();let s;if(this.listens.has(i)){const l=this.listens.get(i);s=l.get(e),l.delete(e),l.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,e){ws("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=z3&&(this.reconnectDelay_=U3,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){ws("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=z3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";t["sdk."+e+"."+Y6.replace(/\./g,"-")]=1,rE()?t["framework.cordova"]=1:bC()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=d1.getInstance().currentlyOnline();return qy(this.interruptReasons_)&&t}}Iu.nextPersistentConnectionId_=0;Iu.nextConnectionId_=0;class Me{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Me(t,e)}}class sv{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new Me(Sm,t),s=new Me(Sm,e);return this.compare(i,s)!==0}minPost(){return Me.MIN}}let my;class _9 extends sv{static get __EMPTY_NODE(){return my}static set __EMPTY_NODE(t){my=t}compare(t,e){return Ff(t.name,e.name)}isDefinedOn(t){throw Lm("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Me.MIN}maxPost(){return new Me(Vf,my)}makePost(t,e){return kt(typeof t=="string","KeyIndex indexValue must always be a string."),new Me(t,my)}toString(){return".key"}}const fm=new _9;class py{constructor(t,e,i,s,l=null){this.isReverse_=s,this.resultGenerator_=l,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=e?i(t.key,e):1,s&&(c*=-1),c<0)this.isReverse_?t=t.left:t=t.right;else if(c===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class ts{constructor(t,e,i,s,l){this.key=t,this.value=e,this.color=i??ts.RED,this.left=s??Ga.EMPTY_NODE,this.right=l??Ga.EMPTY_NODE}copy(t,e,i,s,l){return new ts(t??this.key,e??this.value,i??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const l=i(t,s.key);return l<0?s=s.copy(null,null,null,s.left.insert(t,e,i),null):l===0?s=s.copy(null,e,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ga.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let i,s;if(i=this,e(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),e(t,i.key)===0){if(i.right.isEmpty())return Ga.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}ts.RED=!0;ts.BLACK=!1;class AV{copy(t,e,i,s,l){return this}insert(t,e,i){return new ts(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ga{constructor(t,e=Ga.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ga(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,ts.BLACK,null,null))}remove(t){return new Ga(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ts.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),e===0)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,s=null;for(;!i.isEmpty();)if(e=this.comparator_(t,i.key),e===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else e<0?i=i.left:e>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new py(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new py(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new py(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new py(this.root_,null,this.comparator_,!0,t)}}Ga.EMPTY_NODE=new AV;function EV(n,t){return Ff(n.name,t.name)}function uS(n,t){return Ff(n,t)}let SA;function SV(n){SA=n}const y9=function(n){return typeof n=="number"?"number:"+W6(n):"string:"+n},v9=function(n){if(n.isLeafNode()){const t=n.val();kt(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Uo(t,".sv"),"Priority must be a string or number.")}else kt(n===SA||n.isEmpty(),"priority of unexpected type.");kt(n===SA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let B3;class Zi{static set __childrenNodeConstructor(t){B3=t}static get __childrenNodeConstructor(){return B3}constructor(t,e=Zi.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,kt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),v9(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Zi(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Zi.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Oe(t)?this:Ne(t)===".priority"?this.priorityNode_:Zi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return t===".priority"?this.updatePriority(e):e.isEmpty()&&t!==".priority"?this:Zi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const i=Ne(t);return i===null?e:e.isEmpty()&&i!==".priority"?this:(kt(i!==".priority"||hh(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Zi.__childrenNodeConstructor.EMPTY_NODE.updateChild(vn(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+y9(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",e==="number"?t+=W6(this.value_):t+=this.value_,this.lazyHash_=X6(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Zi.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Zi.__childrenNodeConstructor?-1:(kt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,i=typeof this.value_,s=Zi.VALUE_TYPE_ORDER.indexOf(e),l=Zi.VALUE_TYPE_ORDER.indexOf(i);return kt(s>=0,"Unknown leaf type: "+e),kt(l>=0,"Unknown leaf type: "+i),s===l?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}else return!1}}Zi.VALUE_TYPE_ORDER=["object","boolean","number","string"];let A9,E9;function TV(n){A9=n}function bV(n){E9=n}class CV extends sv{compare(t,e){const i=t.node.getPriority(),s=e.node.getPriority(),l=i.compareTo(s);return l===0?Ff(t.name,e.name):l}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me(Vf,new Zi("[PRIORITY-POST]",E9))}makePost(t,e){const i=A9(t);return new Me(e,new Zi("[PRIORITY-POST]",i))}toString(){return".priority"}}const ei=new CV;const RV=Math.log(2);class wV{constructor(t){const e=l=>parseInt(Math.log(l)/RV,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;const s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const m1=function(n,t,e,i){n.sort(t);const s=function(m,g){const A=g-m;let E,T;if(A===0)return null;if(A===1)return E=n[m],T=e?e(E):E,new ts(T,E.node,ts.BLACK,null,null);{const x=parseInt(A/2,10)+m,w=s(m,x),I=s(x+1,g);return E=n[x],T=e?e(E):E,new ts(T,E.node,ts.BLACK,w,I)}},l=function(m){let g=null,A=null,E=n.length;const T=function(w,I){const L=E-w,B=E;E-=w;const j=s(L+1,B),q=n[L],$=e?e(q):q;x(new ts($,q.node,I,null,j))},x=function(w){g?(g.left=w,g=w):(A=w,g=w)};for(let w=0;w<m.count;++w){const I=m.nextBitIsOne(),L=Math.pow(2,m.count-(w+1));I?T(L,ts.BLACK):(T(L,ts.BLACK),T(L,ts.RED))}return A},c=new wV(n.length),f=l(c);return new Ga(i||t,f)};let v2;const Xd={};class Ru{static get Default(){return kt(Xd&&ei,"ChildrenNode.ts has not been loaded"),v2=v2||new Ru({".priority":Xd},{".priority":ei}),v2}constructor(t,e){this.indexes_=t,this.indexSet_=e}get(t){const e=mm(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ga?e:null}hasIndex(t){return Uo(this.indexSet_,t.toString())}addIndex(t,e){kt(t!==fm,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const l=e.getIterator(Me.Wrap);let c=l.getNext();for(;c;)s=s||t.isDefinedOn(c.node),i.push(c),c=l.getNext();let f;s?f=m1(i,t.getCompare()):f=Xd;const m=t.toString(),g=Object.assign({},this.indexSet_);g[m]=t;const A=Object.assign({},this.indexes_);return A[m]=f,new Ru(A,g)}addToIndexes(t,e){const i=Fy(this.indexes_,(s,l)=>{const c=mm(this.indexSet_,l);if(kt(c,"Missing index implementation for "+l),s===Xd)if(c.isDefinedOn(t.node)){const f=[],m=e.getIterator(Me.Wrap);let g=m.getNext();for(;g;)g.name!==t.name&&f.push(g),g=m.getNext();return f.push(t),m1(f,c.getCompare())}else return Xd;else{const f=e.get(t.name);let m=s;return f&&(m=m.remove(new Me(t.name,f))),m.insert(t,t.node)}});return new Ru(i,this.indexSet_)}removeFromIndexes(t,e){const i=Fy(this.indexes_,s=>{if(s===Xd)return s;{const l=e.get(t.name);return l?s.remove(new Me(t.name,l)):s}});return new Ru(i,this.indexSet_)}}let hg;class oe{static get EMPTY_NODE(){return hg||(hg=new oe(new Ga(uS),null,Ru.Default))}constructor(t,e,i){this.children_=t,this.priorityNode_=e,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&v9(this.priorityNode_),this.children_.isEmpty()&&kt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hg}updatePriority(t){return this.children_.isEmpty()?this:new oe(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const e=this.children_.get(t);return e===null?hg:e}}getChild(t){const e=Ne(t);return e===null?this:this.getImmediateChild(e).getChild(vn(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,e){if(kt(e,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(e);{const i=new Me(t,e);let s,l;e.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,e),l=this.indexMap_.addToIndexes(i,this.children_));const c=s.isEmpty()?hg:this.priorityNode_;return new oe(s,c,l)}}updateChild(t,e){const i=Ne(t);if(i===null)return e;{kt(Ne(t)!==".priority"||hh(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(vn(t),e);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let i=0,s=0,l=!0;if(this.forEachChild(ei,(c,f)=>{e[c]=f.val(t),i++,l&&oe.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):l=!1}),!t&&l&&s<2*i){const c=[];for(const f in e)c[f]=e[f];return c}else return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+y9(this.getPriority().val())+":"),this.forEachChild(ei,(e,i)=>{const s=i.hash();s!==""&&(t+=":"+e+":"+s)}),this.lazyHash_=t===""?"":X6(t)}return this.lazyHash_}getPredecessorChildName(t,e,i){const s=this.resolveIndex_(i);if(s){const l=s.getPredecessorKey(new Me(t,e));return l?l.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const i=e.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new Me(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const i=e.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new Me(e,this.children_.get(e)):null}forEachChild(t,e){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>e(s.name,s.node)):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Me.Wrap);let l=s.peek();for(;l!=null&&e.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Me.Wrap);let l=s.peek();for(;l!=null&&e.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===P0?-1:0}withIndex(t){if(t===fm||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new oe(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===fm||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority()))if(this.children_.count()===e.children_.count()){const i=this.getIterator(ei),s=e.getIterator(ei);let l=i.getNext(),c=s.getNext();for(;l&&c;){if(l.name!==c.name||!l.node.equals(c.node))return!1;l=i.getNext(),c=s.getNext()}return l===null&&c===null}else return!1;else return!1}}resolveIndex_(t){return t===fm?null:this.indexMap_.get(t.toString())}}oe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class xV extends oe{constructor(){super(new Ga(uS),oe.EMPTY_NODE,Ru.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return oe.EMPTY_NODE}isEmpty(){return!1}}const P0=new xV;Object.defineProperties(Me,{MIN:{value:new Me(Sm,oe.EMPTY_NODE)},MAX:{value:new Me(Vf,P0)}});_9.__EMPTY_NODE=oe.EMPTY_NODE;Zi.__childrenNodeConstructor=oe;SV(P0);bV(P0);const NV=!0;function Di(n,t=null){if(n===null)return oe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),kt(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const e=n;return new Zi(e,Di(t))}if(!(n instanceof Array)&&NV){const e=[];let i=!1;if(Js(n,(c,f)=>{if(c.substring(0,1)!=="."){const m=Di(f);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),e.push(new Me(c,m)))}}),e.length===0)return oe.EMPTY_NODE;const l=m1(e,EV,c=>c.name,uS);if(i){const c=m1(e,ei.getCompare());return new oe(l,Di(t),new Ru({".priority":c},{".priority":ei}))}else return new oe(l,Di(t),Ru.Default)}else{let e=oe.EMPTY_NODE;return Js(n,(i,s)=>{if(Uo(n,i)&&i.substring(0,1)!=="."){const l=Di(s);(l.isLeafNode()||!l.isEmpty())&&(e=e.updateImmediateChild(i,l))}}),e.updatePriority(Di(t))}}TV(Di);class DV extends sv{constructor(t){super(),this.indexPath_=t,kt(!Oe(t)&&Ne(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),s=this.extractChild(e.node),l=i.compareTo(s);return l===0?Ff(t.name,e.name):l}makePost(t,e){const i=Di(t),s=oe.EMPTY_NODE.updateChild(this.indexPath_,i);return new Me(e,s)}maxPost(){const t=oe.EMPTY_NODE.updateChild(this.indexPath_,P0);return new Me(Vf,t)}toString(){return l0(this.indexPath_,0).join("/")}}class IV extends sv{compare(t,e){const i=t.node.compareTo(e.node);return i===0?Ff(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(t,e){const i=Di(t);return new Me(e,i)}toString(){return".value"}}const OV=new IV;function S9(n){return{type:"value",snapshotNode:n}}function Tm(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function o0(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function u0(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function MV(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}class cS{constructor(t){this.index_=t}updateChild(t,e,i,s,l,c){kt(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=t.getImmediateChild(e);return f.getChild(s).equals(i.getChild(s))&&f.isEmpty()===i.isEmpty()||(c!=null&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(o0(e,f)):kt(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(Tm(e,i)):c.trackChildChange(u0(e,i,f))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return i!=null&&(t.isLeafNode()||t.forEachChild(ei,(s,l)=>{e.hasChild(s)||i.trackChildChange(o0(s,l))}),e.isLeafNode()||e.forEachChild(ei,(s,l)=>{if(t.hasChild(s)){const c=t.getImmediateChild(s);c.equals(l)||i.trackChildChange(u0(s,l,c))}else i.trackChildChange(Tm(s,l))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?oe.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class c0{constructor(t){this.indexedFilter_=new cS(t.getIndex()),this.index_=t.getIndex(),this.startPost_=c0.getStartPost_(t),this.endPost_=c0.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,s,l,c){return this.matches(new Me(e,i))||(i=oe.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,s,l,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=oe.EMPTY_NODE);let s=e.withIndex(this.index_);s=s.updatePriority(oe.EMPTY_NODE);const l=this;return e.forEachChild(ei,(c,f)=>{l.matches(new Me(c,f))||(s=s.updateImmediateChild(c,oe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}}class LV{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new c0(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,s,l,c){return this.rangedFilter_.matches(new Me(e,i))||(i=oe.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,s,l,c):this.fullLimitUpdateChild_(t,e,i,l,c)}updateFullNode(t,e,i){let s;if(e.isLeafNode()||e.isEmpty())s=oe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){s=oe.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;l.hasNext()&&c<this.limit_;){const f=l.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))s=s.updateImmediateChild(f.name,f.node),c++;else break;else continue}}else{s=e.withIndex(this.index_),s=s.updatePriority(oe.EMPTY_NODE);let l;this.reverse_?l=s.getReverseIterator(this.index_):l=s.getIterator(this.index_);let c=0;for(;l.hasNext();){const f=l.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:s=s.updateImmediateChild(f.name,oe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,s,l){let c;if(this.reverse_){const E=this.index_.getCompare();c=(T,x)=>E(x,T)}else c=this.index_.getCompare();const f=t;kt(f.numChildren()===this.limit_,"");const m=new Me(e,i),g=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),A=this.rangedFilter_.matches(m);if(f.hasChild(e)){const E=f.getImmediateChild(e);let T=s.getChildAfterChild(this.index_,g,this.reverse_);for(;T!=null&&(T.name===e||f.hasChild(T.name));)T=s.getChildAfterChild(this.index_,T,this.reverse_);const x=T==null?1:c(T,m);if(A&&!i.isEmpty()&&x>=0)return l?.trackChildChange(u0(e,i,E)),f.updateImmediateChild(e,i);{l?.trackChildChange(o0(e,E));const I=f.updateImmediateChild(e,oe.EMPTY_NODE);return T!=null&&this.rangedFilter_.matches(T)?(l?.trackChildChange(Tm(T.name,T.node)),I.updateImmediateChild(T.name,T.node)):I}}else return i.isEmpty()?t:A&&c(g,m)>=0?(l!=null&&(l.trackChildChange(o0(g.name,g.node)),l.trackChildChange(Tm(e,i))),f.updateImmediateChild(e,i).updateImmediateChild(g.name,oe.EMPTY_NODE)):t}}class hS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ei}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return kt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return kt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Sm}hasEnd(){return this.endSet_}getIndexEndValue(){return kt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return kt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return kt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ei}copy(){const t=new hS;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function VV(n){return n.loadsAllData()?new cS(n.getIndex()):n.hasLimit()?new LV(n):new c0(n)}function j3(n){const t={};if(n.isDefault())return t;let e;if(n.index_===ei?e="$priority":n.index_===OV?e="$value":n.index_===fm?e="$key":(kt(n.index_ instanceof DV,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=es(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=es(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+es(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=es(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+es(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function H3(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==ei&&(t.i=n.index_.toString()),t}class p1 extends d9{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(kt(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,e,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=k0("p:rest:"),this.listens_={}}listen(t,e,i,s){const l=t._path.toString();this.log_("Listen called for "+l+" "+t._queryIdentifier);const c=p1.getListenId_(t,i),f={};this.listens_[c]=f;const m=j3(t._queryParams);this.restRequest_(l+".json",m,(g,A)=>{let E=A;if(g===404&&(E=null,g=null),g===null&&this.onDataUpdate_(l,E,!1,i),mm(this.listens_,c)===f){let T;g?g===401?T="permission_denied":T="rest_error:"+g:T="ok",s(T,null)}})}unlisten(t,e){const i=p1.getListenId_(t,e);delete this.listens_[i]}get(t){const e=j3(t._queryParams),i=t._path.toString(),s=new Tu;return this.restRequest_(i+".json",e,(l,c)=>{let f=c;l===404&&(f=null,l=null),l===null?(this.onDataUpdate_(i,f,!1,null),s.resolve(f)):s.reject(new Error(f))}),s.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,l])=>{s&&s.accessToken&&(e.auth=s.accessToken),l&&l.token&&(e.ac=l.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Vm(e);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(i&&f.readyState===4){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=Xg(f.responseText)}catch{qa("Failed to parse JSON response for "+c+": "+f.responseText)}i(null,m)}else f.status!==401&&f.status!==404&&qa("Got unsuccessful REST response for "+c+" Status: "+f.status),i(f.status);i=null}},f.open("GET",c,!0),f.send()})}}class kV{constructor(){this.rootNode_=oe.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function g1(){return{value:null,children:new Map}}function qm(n,t,e){if(Oe(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{const i=Ne(t);n.children.has(i)||n.children.set(i,g1());const s=n.children.get(i);t=vn(t),qm(s,t,e)}}function TA(n,t){if(Oe(t))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(ei,(i,s)=>{qm(n,new rn(i),s)}),TA(n,t)}}else if(n.children.size>0){const e=Ne(t);return t=vn(t),n.children.has(e)&&TA(n.children.get(e),t)&&n.children.delete(e),n.children.size===0}else return!0}function bA(n,t,e){n.value!==null?e(t,n.value):PV(n,(i,s)=>{const l=new rn(t.toString()+"/"+i);bA(s,l,e)})}function PV(n,t){n.children.forEach((e,i)=>{t(i,e)})}class UV{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Js(this.last_,(i,s)=>{e[i]=e[i]-s}),this.last_=t,e}}const G3=10*1e3,zV=30*1e3,BV=300*1e3;class jV{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new UV(t);const i=G3+(zV-G3)*Math.random();zg(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Js(t,(s,l)=>{l>0&&Uo(this.statsToReport_,s)&&(e[s]=l,i=!0)}),i&&this.server_.reportStats(e),zg(this.reportStats_.bind(this),Math.floor(Math.random()*2*BV))}}var kl;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(kl||(kl={}));function T9(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function dS(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class _1{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=kl.ACK_USER_WRITE,this.source=T9()}operationForChild(t){if(Oe(this.path)){if(this.affectedTree.value!=null)return kt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new rn(t));return new _1(tn(),e,this.revert)}}else return kt(Ne(this.path)===t,"operationForChild called for unrelated child."),new _1(vn(this.path),this.affectedTree,this.revert)}}class h0{constructor(t,e){this.source=t,this.path=e,this.type=kl.LISTEN_COMPLETE}operationForChild(t){return Oe(this.path)?new h0(this.source,tn()):new h0(this.source,vn(this.path))}}class kf{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=kl.OVERWRITE}operationForChild(t){return Oe(this.path)?new kf(this.source,tn(),this.snap.getImmediateChild(t)):new kf(this.source,vn(this.path),this.snap)}}class f0{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=kl.MERGE}operationForChild(t){if(Oe(this.path)){const e=this.children.subtree(new rn(t));return e.isEmpty()?null:e.value?new kf(this.source,tn(),e.value):new f0(this.source,tn(),e)}else return kt(Ne(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new f0(this.source,vn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Pf{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Oe(t))return this.isFullyInitialized()&&!this.filtered_;const e=Ne(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class HV{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function GV(n,t,e,i){const s=[],l=[];return t.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&l.push(MV(c.childName,c.snapshotNode))}),fg(n,s,"child_removed",t,i,e),fg(n,s,"child_added",t,i,e),fg(n,s,"child_moved",l,i,e),fg(n,s,"child_changed",t,i,e),fg(n,s,"value",t,i,e),s}function fg(n,t,e,i,s,l){const c=i.filter(f=>f.type===e);c.sort((f,m)=>FV(n,f,m)),c.forEach(f=>{const m=qV(n,f,l);s.forEach(g=>{g.respondsTo(f.type)&&t.push(g.createEvent(m,n.query_))})})}function qV(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function FV(n,t,e){if(t.childName==null||e.childName==null)throw Lm("Should only compare child_ events.");const i=new Me(t.childName,t.snapshotNode),s=new Me(e.childName,e.snapshotNode);return n.index_.compare(i,s)}function av(n,t){return{eventCache:n,serverCache:t}}function Bg(n,t,e,i){return av(new Pf(t,e,i),n.serverCache)}function b9(n,t,e,i){return av(n.eventCache,new Pf(t,e,i))}function CA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Uf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let A2;const YV=()=>(A2||(A2=new Ga(DL)),A2);class Bn{static fromObject(t){let e=new Bn(null);return Js(t,(i,s)=>{e=e.set(new rn(i),s)}),e}constructor(t,e=YV()){this.value=t,this.children=e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:tn(),value:this.value};if(Oe(t))return null;{const i=Ne(t),s=this.children.get(i);if(s!==null){const l=s.findRootMostMatchingPathAndValue(vn(t),e);return l!=null?{path:vi(new rn(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Oe(t))return this;{const e=Ne(t),i=this.children.get(e);return i!==null?i.subtree(vn(t)):new Bn(null)}}set(t,e){if(Oe(t))return new Bn(e,this.children);{const i=Ne(t),l=(this.children.get(i)||new Bn(null)).set(vn(t),e),c=this.children.insert(i,l);return new Bn(this.value,c)}}remove(t){if(Oe(t))return this.children.isEmpty()?new Bn(null):new Bn(null,this.children);{const e=Ne(t),i=this.children.get(e);if(i){const s=i.remove(vn(t));let l;return s.isEmpty()?l=this.children.remove(e):l=this.children.insert(e,s),this.value===null&&l.isEmpty()?new Bn(null):new Bn(this.value,l)}else return this}}get(t){if(Oe(t))return this.value;{const e=Ne(t),i=this.children.get(e);return i?i.get(vn(t)):null}}setTree(t,e){if(Oe(t))return e;{const i=Ne(t),l=(this.children.get(i)||new Bn(null)).setTree(vn(t),e);let c;return l.isEmpty()?c=this.children.remove(i):c=this.children.insert(i,l),new Bn(this.value,c)}}fold(t){return this.fold_(tn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((s,l)=>{i[s]=l.fold_(vi(t,s),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,tn(),e)}findOnPath_(t,e,i){const s=this.value?i(e,this.value):!1;if(s)return s;if(Oe(t))return null;{const l=Ne(t),c=this.children.get(l);return c?c.findOnPath_(vn(t),vi(e,l),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,tn(),e)}foreachOnPath_(t,e,i){if(Oe(t))return this;{this.value&&i(e,this.value);const s=Ne(t),l=this.children.get(s);return l?l.foreachOnPath_(vn(t),vi(e,s),i):new Bn(null)}}foreach(t){this.foreach_(tn(),t)}foreach_(t,e){this.children.inorderTraversal((i,s)=>{s.foreach_(vi(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class zl{constructor(t){this.writeTree_=t}static empty(){return new zl(new Bn(null))}}function jg(n,t,e){if(Oe(t))return new zl(new Bn(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(i!=null){const s=i.path;let l=i.value;const c=Ha(s,t);return l=l.updateChild(c,e),new zl(n.writeTree_.set(s,l))}else{const s=new Bn(e),l=n.writeTree_.setTree(t,s);return new zl(l)}}}function q3(n,t,e){let i=n;return Js(e,(s,l)=>{i=jg(i,vi(t,s),l)}),i}function F3(n,t){if(Oe(t))return zl.empty();{const e=n.writeTree_.setTree(t,new Bn(null));return new zl(e)}}function RA(n,t){return Yf(n,t)!=null}function Yf(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(Ha(e.path,t)):null}function Y3(n){const t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(ei,(i,s)=>{t.push(new Me(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&t.push(new Me(i,s.value))}),t}function nh(n,t){if(Oe(t))return n;{const e=Yf(n,t);return e!=null?new zl(new Bn(e)):new zl(n.writeTree_.subtree(t))}}function wA(n){return n.writeTree_.isEmpty()}function bm(n,t){return C9(tn(),n.writeTree_,t)}function C9(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((s,l)=>{s===".priority"?(kt(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):e=C9(vi(n,s),l,e)}),!e.getChild(n).isEmpty()&&i!==null&&(e=e.updateChild(vi(n,".priority"),i)),e}}function mS(n,t){return N9(t,n)}function QV(n,t,e,i,s){kt(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:s}),s&&(n.visibleWrites=jg(n.visibleWrites,t,e)),n.lastWriteId=i}function XV(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}function KV(n,t){const e=n.allWrites.findIndex(f=>f.writeId===t);kt(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let s=i.visible,l=!1,c=n.allWrites.length-1;for(;s&&c>=0;){const f=n.allWrites[c];f.visible&&(c>=e&&WV(f,i.path)?s=!1:el(i.path,f.path)&&(l=!0)),c--}if(s){if(l)return JV(n),!0;if(i.snap)n.visibleWrites=F3(n.visibleWrites,i.path);else{const f=i.children;Js(f,m=>{n.visibleWrites=F3(n.visibleWrites,vi(i.path,m))})}return!0}else return!1}function WV(n,t){if(n.snap)return el(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&el(vi(n.path,e),t))return!0;return!1}function JV(n){n.visibleWrites=R9(n.allWrites,ZV,tn()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function ZV(n){return n.visible}function R9(n,t,e){let i=zl.empty();for(let s=0;s<n.length;++s){const l=n[s];if(t(l)){const c=l.path;let f;if(l.snap)el(e,c)?(f=Ha(e,c),i=jg(i,f,l.snap)):el(c,e)&&(f=Ha(c,e),i=jg(i,tn(),l.snap.getChild(f)));else if(l.children){if(el(e,c))f=Ha(e,c),i=q3(i,f,l.children);else if(el(c,e))if(f=Ha(c,e),Oe(f))i=q3(i,tn(),l.children);else{const m=mm(l.children,Ne(f));if(m){const g=m.getChild(vn(f));i=jg(i,tn(),g)}}}else throw Lm("WriteRecord should have .snap or .children")}}return i}function w9(n,t,e,i,s){if(!i&&!s){const l=Yf(n.visibleWrites,t);if(l!=null)return l;{const c=nh(n.visibleWrites,t);if(wA(c))return e;if(e==null&&!RA(c,tn()))return null;{const f=e||oe.EMPTY_NODE;return bm(c,f)}}}else{const l=nh(n.visibleWrites,t);if(!s&&wA(l))return e;if(!s&&e==null&&!RA(l,tn()))return null;{const c=function(g){return(g.visible||s)&&(!i||!~i.indexOf(g.writeId))&&(el(g.path,t)||el(t,g.path))},f=R9(n.allWrites,c,t),m=e||oe.EMPTY_NODE;return bm(f,m)}}}function $V(n,t,e){let i=oe.EMPTY_NODE;const s=Yf(n.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(ei,(l,c)=>{i=i.updateImmediateChild(l,c)}),i;if(e){const l=nh(n.visibleWrites,t);return e.forEachChild(ei,(c,f)=>{const m=bm(nh(l,new rn(c)),f);i=i.updateImmediateChild(c,m)}),Y3(l).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}else{const l=nh(n.visibleWrites,t);return Y3(l).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}}function tk(n,t,e,i,s){kt(i||s,"Either existingEventSnap or existingServerSnap must exist");const l=vi(t,e);if(RA(n.visibleWrites,l))return null;{const c=nh(n.visibleWrites,l);return wA(c)?s.getChild(e):bm(c,s.getChild(e))}}function ek(n,t,e,i){const s=vi(t,e),l=Yf(n.visibleWrites,s);if(l!=null)return l;if(i.isCompleteForChild(e)){const c=nh(n.visibleWrites,s);return bm(c,i.getNode().getImmediateChild(e))}else return null}function nk(n,t){return Yf(n.visibleWrites,t)}function ik(n,t,e,i,s,l,c){let f;const m=nh(n.visibleWrites,t),g=Yf(m,tn());if(g!=null)f=g;else if(e!=null)f=bm(m,e);else return[];if(f=f.withIndex(c),!f.isEmpty()&&!f.isLeafNode()){const A=[],E=c.getCompare(),T=l?f.getReverseIteratorFrom(i,c):f.getIteratorFrom(i,c);let x=T.getNext();for(;x&&A.length<s;)E(x,i)!==0&&A.push(x),x=T.getNext();return A}else return[]}function sk(){return{visibleWrites:zl.empty(),allWrites:[],lastWriteId:-1}}function y1(n,t,e,i){return w9(n.writeTree,n.treePath,t,e,i)}function pS(n,t){return $V(n.writeTree,n.treePath,t)}function Q3(n,t,e,i){return tk(n.writeTree,n.treePath,t,e,i)}function v1(n,t){return nk(n.writeTree,vi(n.treePath,t))}function ak(n,t,e,i,s,l){return ik(n.writeTree,n.treePath,t,e,i,s,l)}function gS(n,t,e){return ek(n.writeTree,n.treePath,t,e)}function x9(n,t){return N9(vi(n.treePath,t),n.writeTree)}function N9(n,t){return{treePath:n,writeTree:t}}class rk{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;kt(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),kt(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const l=s.type;if(e==="child_added"&&l==="child_removed")this.changeMap.set(i,u0(i,t.snapshotNode,s.snapshotNode));else if(e==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(e==="child_removed"&&l==="child_changed")this.changeMap.set(i,o0(i,s.oldSnap));else if(e==="child_changed"&&l==="child_added")this.changeMap.set(i,Tm(i,t.snapshotNode));else if(e==="child_changed"&&l==="child_changed")this.changeMap.set(i,u0(i,t.snapshotNode,s.oldSnap));else throw Lm("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}class lk{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}}const D9=new lk;class _S{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=this.optCompleteServerCache_!=null?new Pf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gS(this.writes_,t,i)}}getChildAfterChild(t,e,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Uf(this.viewCache_),l=ak(this.writes_,s,e,1,i,t);return l.length===0?null:l[0]}}function ok(n){return{filter:n}}function uk(n,t){kt(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),kt(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function ck(n,t,e,i,s){const l=new rk;let c,f;if(e.type===kl.OVERWRITE){const g=e;g.source.fromUser?c=xA(n,t,g.path,g.snap,i,s,l):(kt(g.source.fromServer,"Unknown source."),f=g.source.tagged||t.serverCache.isFiltered()&&!Oe(g.path),c=A1(n,t,g.path,g.snap,i,s,f,l))}else if(e.type===kl.MERGE){const g=e;g.source.fromUser?c=fk(n,t,g.path,g.children,i,s,l):(kt(g.source.fromServer,"Unknown source."),f=g.source.tagged||t.serverCache.isFiltered(),c=NA(n,t,g.path,g.children,i,s,f,l))}else if(e.type===kl.ACK_USER_WRITE){const g=e;g.revert?c=pk(n,t,g.path,i,s,l):c=dk(n,t,g.path,g.affectedTree,i,s,l)}else if(e.type===kl.LISTEN_COMPLETE)c=mk(n,t,e.path,i,l);else throw Lm("Unknown operation type: "+e.type);const m=l.getChanges();return hk(t,c,m),{viewCache:c,changes:m}}function hk(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=CA(n);(e.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&e.push(S9(CA(t)))}}function I9(n,t,e,i,s,l){const c=t.eventCache;if(v1(i,e)!=null)return t;{let f,m;if(Oe(e))if(kt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const g=Uf(t),A=g instanceof oe?g:oe.EMPTY_NODE,E=pS(i,A);f=n.filter.updateFullNode(t.eventCache.getNode(),E,l)}else{const g=y1(i,Uf(t));f=n.filter.updateFullNode(t.eventCache.getNode(),g,l)}else{const g=Ne(e);if(g===".priority"){kt(hh(e)===1,"Can't have a priority with additional path components");const A=c.getNode();m=t.serverCache.getNode();const E=Q3(i,e,A,m);E!=null?f=n.filter.updatePriority(A,E):f=c.getNode()}else{const A=vn(e);let E;if(c.isCompleteForChild(g)){m=t.serverCache.getNode();const T=Q3(i,e,c.getNode(),m);T!=null?E=c.getNode().getImmediateChild(g).updateChild(A,T):E=c.getNode().getImmediateChild(g)}else E=gS(i,g,t.serverCache);E!=null?f=n.filter.updateChild(c.getNode(),g,E,A,s,l):f=c.getNode()}}return Bg(t,f,c.isFullyInitialized()||Oe(e),n.filter.filtersNodes())}}function A1(n,t,e,i,s,l,c,f){const m=t.serverCache;let g;const A=c?n.filter:n.filter.getIndexedFilter();if(Oe(e))g=A.updateFullNode(m.getNode(),i,null);else if(A.filtersNodes()&&!m.isFiltered()){const x=m.getNode().updateChild(e,i);g=A.updateFullNode(m.getNode(),x,null)}else{const x=Ne(e);if(!m.isCompleteForPath(e)&&hh(e)>1)return t;const w=vn(e),L=m.getNode().getImmediateChild(x).updateChild(w,i);x===".priority"?g=A.updatePriority(m.getNode(),L):g=A.updateChild(m.getNode(),x,L,w,D9,null)}const E=b9(t,g,m.isFullyInitialized()||Oe(e),A.filtersNodes()),T=new _S(s,E,l);return I9(n,E,e,s,T,f)}function xA(n,t,e,i,s,l,c){const f=t.eventCache;let m,g;const A=new _S(s,t,l);if(Oe(e))g=n.filter.updateFullNode(t.eventCache.getNode(),i,c),m=Bg(t,g,!0,n.filter.filtersNodes());else{const E=Ne(e);if(E===".priority")g=n.filter.updatePriority(t.eventCache.getNode(),i),m=Bg(t,g,f.isFullyInitialized(),f.isFiltered());else{const T=vn(e),x=f.getNode().getImmediateChild(E);let w;if(Oe(T))w=i;else{const I=A.getCompleteChild(E);I!=null?rS(T)===".priority"&&I.getChild(p9(T)).isEmpty()?w=I:w=I.updateChild(T,i):w=oe.EMPTY_NODE}if(x.equals(w))m=t;else{const I=n.filter.updateChild(f.getNode(),E,w,T,A,c);m=Bg(t,I,f.isFullyInitialized(),n.filter.filtersNodes())}}}return m}function X3(n,t){return n.eventCache.isCompleteForChild(t)}function fk(n,t,e,i,s,l,c){let f=t;return i.foreach((m,g)=>{const A=vi(e,m);X3(t,Ne(A))&&(f=xA(n,f,A,g,s,l,c))}),i.foreach((m,g)=>{const A=vi(e,m);X3(t,Ne(A))||(f=xA(n,f,A,g,s,l,c))}),f}function K3(n,t,e){return e.foreach((i,s)=>{t=t.updateChild(i,s)}),t}function NA(n,t,e,i,s,l,c,f){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let m=t,g;Oe(e)?g=i:g=new Bn(null).setTree(e,i);const A=t.serverCache.getNode();return g.children.inorderTraversal((E,T)=>{if(A.hasChild(E)){const x=t.serverCache.getNode().getImmediateChild(E),w=K3(n,x,T);m=A1(n,m,new rn(E),w,s,l,c,f)}}),g.children.inorderTraversal((E,T)=>{const x=!t.serverCache.isCompleteForChild(E)&&T.value===null;if(!A.hasChild(E)&&!x){const w=t.serverCache.getNode().getImmediateChild(E),I=K3(n,w,T);m=A1(n,m,new rn(E),I,s,l,c,f)}}),m}function dk(n,t,e,i,s,l,c){if(v1(s,e)!=null)return t;const f=t.serverCache.isFiltered(),m=t.serverCache;if(i.value!=null){if(Oe(e)&&m.isFullyInitialized()||m.isCompleteForPath(e))return A1(n,t,e,m.getNode().getChild(e),s,l,f,c);if(Oe(e)){let g=new Bn(null);return m.getNode().forEachChild(fm,(A,E)=>{g=g.set(new rn(A),E)}),NA(n,t,e,g,s,l,f,c)}else return t}else{let g=new Bn(null);return i.foreach((A,E)=>{const T=vi(e,A);m.isCompleteForPath(T)&&(g=g.set(A,m.getNode().getChild(T)))}),NA(n,t,e,g,s,l,f,c)}}function mk(n,t,e,i,s){const l=t.serverCache,c=b9(t,l.getNode(),l.isFullyInitialized()||Oe(e),l.isFiltered());return I9(n,c,e,i,D9,s)}function pk(n,t,e,i,s,l){let c;if(v1(i,e)!=null)return t;{const f=new _S(i,t,s),m=t.eventCache.getNode();let g;if(Oe(e)||Ne(e)===".priority"){let A;if(t.serverCache.isFullyInitialized())A=y1(i,Uf(t));else{const E=t.serverCache.getNode();kt(E instanceof oe,"serverChildren would be complete if leaf node"),A=pS(i,E)}A=A,g=n.filter.updateFullNode(m,A,l)}else{const A=Ne(e);let E=gS(i,A,t.serverCache);E==null&&t.serverCache.isCompleteForChild(A)&&(E=m.getImmediateChild(A)),E!=null?g=n.filter.updateChild(m,A,E,vn(e),f,l):t.eventCache.getNode().hasChild(A)?g=n.filter.updateChild(m,A,oe.EMPTY_NODE,vn(e),f,l):g=m,g.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=y1(i,Uf(t)),c.isLeafNode()&&(g=n.filter.updateFullNode(g,c,l)))}return c=t.serverCache.isFullyInitialized()||v1(i,tn())!=null,Bg(t,g,c,n.filter.filtersNodes())}}class gk{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new cS(i.getIndex()),l=VV(i);this.processor_=ok(l);const c=e.serverCache,f=e.eventCache,m=s.updateFullNode(oe.EMPTY_NODE,c.getNode(),null),g=l.updateFullNode(oe.EMPTY_NODE,f.getNode(),null),A=new Pf(m,c.isFullyInitialized(),s.filtersNodes()),E=new Pf(g,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=av(E,A),this.eventGenerator_=new HV(this.query_)}get query(){return this.query_}}function _k(n){return n.viewCache_.serverCache.getNode()}function yk(n,t){const e=Uf(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!Oe(t)&&!e.getImmediateChild(Ne(t)).isEmpty())?e.getChild(t):null}function W3(n){return n.eventRegistrations_.length===0}function vk(n,t){n.eventRegistrations_.push(t)}function J3(n,t,e){const i=[];if(e){kt(t==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(l=>{const c=l.createCancelEvent(e,s);c&&i.push(c)})}if(t){let s=[];for(let l=0;l<n.eventRegistrations_.length;++l){const c=n.eventRegistrations_[l];if(!c.matches(t))s.push(c);else if(t.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(l+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function Z3(n,t,e,i){t.type===kl.MERGE&&t.source.queryId!==null&&(kt(Uf(n.viewCache_),"We should always have a full cache before handling merges"),kt(CA(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,l=ck(n.processor_,s,t,e,i);return uk(n.processor_,l.viewCache),kt(l.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,O9(n,l.changes,l.viewCache.eventCache.getNode(),null)}function Ak(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(ei,(l,c)=>{i.push(Tm(l,c))}),e.isFullyInitialized()&&i.push(S9(e.getNode())),O9(n,i,e.getNode(),t)}function O9(n,t,e,i){const s=i?[i]:n.eventRegistrations_;return GV(n.eventGenerator_,t,e,s)}let E1;class Ek{constructor(){this.views=new Map}}function Sk(n){kt(!E1,"__referenceConstructor has already been defined"),E1=n}function Tk(){return kt(E1,"Reference.ts has not been loaded"),E1}function bk(n){return n.views.size===0}function yS(n,t,e,i){const s=t.source.queryId;if(s!==null){const l=n.views.get(s);return kt(l!=null,"SyncTree gave us an op for an invalid query."),Z3(l,t,e,i)}else{let l=[];for(const c of n.views.values())l=l.concat(Z3(c,t,e,i));return l}}function Ck(n,t,e,i,s){const l=t._queryIdentifier,c=n.views.get(l);if(!c){let f=y1(e,s?i:null),m=!1;f?m=!0:i instanceof oe?(f=pS(e,i),m=!1):(f=oe.EMPTY_NODE,m=!1);const g=av(new Pf(f,m,!1),new Pf(i,s,!1));return new gk(t,g)}return c}function Rk(n,t,e,i,s,l){const c=Ck(n,t,i,s,l);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),vk(c,e),Ak(c,e)}function wk(n,t,e,i){const s=t._queryIdentifier,l=[];let c=[];const f=fh(n);if(s==="default")for(const[m,g]of n.views.entries())c=c.concat(J3(g,e,i)),W3(g)&&(n.views.delete(m),g.query._queryParams.loadsAllData()||l.push(g.query));else{const m=n.views.get(s);m&&(c=c.concat(J3(m,e,i)),W3(m)&&(n.views.delete(s),m.query._queryParams.loadsAllData()||l.push(m.query)))}return f&&!fh(n)&&l.push(new(Tk())(t._repo,t._path)),{removed:l,events:c}}function M9(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function dm(n,t){let e=null;for(const i of n.views.values())e=e||yk(i,t);return e}function L9(n,t){if(t._queryParams.loadsAllData())return rv(n);{const i=t._queryIdentifier;return n.views.get(i)}}function V9(n,t){return L9(n,t)!=null}function fh(n){return rv(n)!=null}function rv(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let S1;function xk(n){kt(!S1,"__referenceConstructor has already been defined"),S1=n}function Nk(){return kt(S1,"Reference.ts has not been loaded"),S1}let Dk=1;class $3{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Bn(null),this.pendingWriteTree_=sk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function k9(n,t,e,i,s){return QV(n.pendingWriteTree_,t,e,i,s),s?U0(n,new kf(T9(),t,e)):[]}function xf(n,t,e=!1){const i=XV(n.pendingWriteTree_,t);if(KV(n.pendingWriteTree_,t)){let l=new Bn(null);return i.snap!=null?l=l.set(tn(),!0):Js(i.children,c=>{l=l.set(new rn(c),!0)}),U0(n,new _1(i.path,l,e))}else return[]}function lv(n,t,e){return U0(n,new kf(fS(),t,e))}function Ik(n,t,e){const i=Bn.fromObject(e);return U0(n,new f0(fS(),t,i))}function Ok(n,t){return U0(n,new h0(fS(),t))}function Mk(n,t,e){const i=AS(n,e);if(i){const s=ES(i),l=s.path,c=s.queryId,f=Ha(l,t),m=new h0(dS(c),f);return SS(n,l,m)}else return[]}function DA(n,t,e,i,s=!1){const l=t._path,c=n.syncPointTree_.get(l);let f=[];if(c&&(t._queryIdentifier==="default"||V9(c,t))){const m=wk(c,t,e,i);bk(c)&&(n.syncPointTree_=n.syncPointTree_.remove(l));const g=m.removed;if(f=m.events,!s){const A=g.findIndex(T=>T._queryParams.loadsAllData())!==-1,E=n.syncPointTree_.findOnPath(l,(T,x)=>fh(x));if(A&&!E){const T=n.syncPointTree_.subtree(l);if(!T.isEmpty()){const x=kk(T);for(let w=0;w<x.length;++w){const I=x[w],L=I.query,B=z9(n,I);n.listenProvider_.startListening(Hg(L),T1(n,L),B.hashFn,B.onComplete)}}}!E&&g.length>0&&!i&&(A?n.listenProvider_.stopListening(Hg(t),null):g.forEach(T=>{const x=n.queryToTagMap.get(ov(T));n.listenProvider_.stopListening(Hg(T),x)}))}Pk(n,g)}return f}function Lk(n,t,e,i){const s=AS(n,i);if(s!=null){const l=ES(s),c=l.path,f=l.queryId,m=Ha(c,t),g=new kf(dS(f),m,e);return SS(n,c,g)}else return[]}function Vk(n,t,e,i){const s=AS(n,i);if(s){const l=ES(s),c=l.path,f=l.queryId,m=Ha(c,t),g=Bn.fromObject(e),A=new f0(dS(f),m,g);return SS(n,c,A)}else return[]}function tb(n,t,e,i=!1){const s=t._path;let l=null,c=!1;n.syncPointTree_.foreachOnPath(s,(T,x)=>{const w=Ha(T,s);l=l||dm(x,w),c=c||fh(x)});let f=n.syncPointTree_.get(s);f?(c=c||fh(f),l=l||dm(f,tn())):(f=new Ek,n.syncPointTree_=n.syncPointTree_.set(s,f));let m;l!=null?m=!0:(m=!1,l=oe.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((x,w)=>{const I=dm(w,tn());I&&(l=l.updateImmediateChild(x,I))}));const g=V9(f,t);if(!g&&!t._queryParams.loadsAllData()){const T=ov(t);kt(!n.queryToTagMap.has(T),"View does not exist, but we have a tag");const x=Uk();n.queryToTagMap.set(T,x),n.tagToQueryMap.set(x,T)}const A=mS(n.pendingWriteTree_,s);let E=Rk(f,t,e,A,l,m);if(!g&&!c&&!i){const T=L9(f,t);E=E.concat(zk(n,t,T))}return E}function vS(n,t,e){const s=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(t,(c,f)=>{const m=Ha(c,t),g=dm(f,m);if(g)return g});return w9(s,t,l,e,!0)}function U0(n,t){return P9(t,n.syncPointTree_,null,mS(n.pendingWriteTree_,tn()))}function P9(n,t,e,i){if(Oe(n.path))return U9(n,t,e,i);{const s=t.get(tn());e==null&&s!=null&&(e=dm(s,tn()));let l=[];const c=Ne(n.path),f=n.operationForChild(c),m=t.children.get(c);if(m&&f){const g=e?e.getImmediateChild(c):null,A=x9(i,c);l=l.concat(P9(f,m,g,A))}return s&&(l=l.concat(yS(s,n,i,e))),l}}function U9(n,t,e,i){const s=t.get(tn());e==null&&s!=null&&(e=dm(s,tn()));let l=[];return t.children.inorderTraversal((c,f)=>{const m=e?e.getImmediateChild(c):null,g=x9(i,c),A=n.operationForChild(c);A&&(l=l.concat(U9(A,f,m,g)))}),s&&(l=l.concat(yS(s,n,i,e))),l}function z9(n,t){const e=t.query,i=T1(n,e);return{hashFn:()=>(_k(t)||oe.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?Mk(n,e._path,i):Ok(n,e._path);{const l=ML(s,e);return DA(n,e,null,l)}}}}function T1(n,t){const e=ov(t);return n.queryToTagMap.get(e)}function ov(n){return n._path.toString()+"$"+n._queryIdentifier}function AS(n,t){return n.tagToQueryMap.get(t)}function ES(n){const t=n.indexOf("$");return kt(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new rn(n.substr(0,t))}}function SS(n,t,e){const i=n.syncPointTree_.get(t);kt(i,"Missing sync point for query tag that we're tracking");const s=mS(n.pendingWriteTree_,t);return yS(i,e,s,null)}function kk(n){return n.fold((t,e,i)=>{if(e&&fh(e))return[rv(e)];{let s=[];return e&&(s=M9(e)),Js(i,(l,c)=>{s=s.concat(c)}),s}})}function Hg(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(Nk())(n._repo,n._path):n}function Pk(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const s=ov(i),l=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(l)}}}function Uk(){return Dk++}function zk(n,t,e){const i=t._path,s=T1(n,t),l=z9(n,e),c=n.listenProvider_.startListening(Hg(t),s,l.hashFn,l.onComplete),f=n.syncPointTree_.subtree(i);if(s)kt(!fh(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((g,A,E)=>{if(!Oe(g)&&A&&fh(A))return[rv(A).query];{let T=[];return A&&(T=T.concat(M9(A).map(x=>x.query))),Js(E,(x,w)=>{T=T.concat(w)}),T}});for(let g=0;g<m.length;++g){const A=m[g];n.listenProvider_.stopListening(Hg(A),T1(n,A))}}return c}class TS{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new TS(e)}node(){return this.node_}}class bS{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=vi(this.path_,t);return new bS(this.syncTree_,e)}node(){return vS(this.syncTree_,this.path_)}}const Bk=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},eb=function(n,t,e){if(!n||typeof n!="object")return n;if(kt(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return jk(n[".sv"],t,e);if(typeof n[".sv"]=="object")return Hk(n[".sv"],t);kt(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},jk=function(n,t,e){if(n==="timestamp")return e.timestamp;kt(!1,"Unexpected server value: "+n)},Hk=function(n,t,e){n.hasOwnProperty("increment")||kt(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&kt(!1,"Unexpected increment value: "+i);const s=t.node();if(kt(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const c=s.getValue();return typeof c!="number"?i:c+i},Gk=function(n,t,e,i){return CS(t,new bS(e,n),i)},B9=function(n,t,e){return CS(n,new TS(t),e)};function CS(n,t,e){const i=n.getPriority().val(),s=eb(i,t.getImmediateChild(".priority"),e);let l;if(n.isLeafNode()){const c=n,f=eb(c.getValue(),t,e);return f!==c.getValue()||s!==c.getPriority().val()?new Zi(f,Di(s)):n}else{const c=n;return l=c,s!==c.getPriority().val()&&(l=l.updatePriority(new Zi(s))),c.forEachChild(ei,(f,m)=>{const g=CS(m,t.getImmediateChild(f),e);g!==m&&(l=l.updateImmediateChild(f,g))}),l}}class RS{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function wS(n,t){let e=t instanceof rn?t:new rn(t),i=n,s=Ne(e);for(;s!==null;){const l=mm(i.node.children,s)||{children:{},childCount:0};i=new RS(s,i,l),e=vn(e),s=Ne(e)}return i}function Fm(n){return n.node.value}function j9(n,t){n.node.value=t,IA(n)}function H9(n){return n.node.childCount>0}function qk(n){return Fm(n)===void 0&&!H9(n)}function uv(n,t){Js(n.node.children,(e,i)=>{t(new RS(e,n,i))})}function G9(n,t,e,i){e&&t(n),uv(n,s=>{G9(s,t,!0)})}function Fk(n,t,e){let i=n.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function z0(n){return new rn(n.parent===null?n.name:z0(n.parent)+"/"+n.name)}function IA(n){n.parent!==null&&Yk(n.parent,n.name,n)}function Yk(n,t,e){const i=qk(e),s=Uo(n.node.children,t);i&&s?(delete n.node.children[t],n.node.childCount--,IA(n)):!i&&!s&&(n.node.children[t]=e.node,n.node.childCount++,IA(n))}const Qk=/[\[\].#$\/\u0000-\u001F\u007F]/,Xk=/[\[\].#$\u0000-\u001F\u007F]/,E2=10*1024*1024,xS=function(n){return typeof n=="string"&&n.length!==0&&!Qk.test(n)},q9=function(n){return typeof n=="string"&&n.length!==0&&!Xk.test(n)},Kk=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),q9(n)},F9=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!iv(n)||n&&typeof n=="object"&&Uo(n,".sv")},OA=function(n,t,e,i){cv(pm(n,"value"),t,e)},cv=function(n,t,e){const i=e instanceof rn?new dV(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+Cf(i));if(typeof t=="function")throw new Error(n+"contains a function "+Cf(i)+" with contents = "+t.toString());if(iv(t))throw new Error(n+"contains "+t.toString()+" "+Cf(i));if(typeof t=="string"&&t.length>E2/3&&O1(t)>E2)throw new Error(n+"contains a string greater than "+E2+" utf8 bytes "+Cf(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,l=!1;if(Js(t,(c,f)=>{if(c===".value")s=!0;else if(c!==".priority"&&c!==".sv"&&(l=!0,!xS(c)))throw new Error(n+" contains an invalid key ("+c+") "+Cf(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);mV(i,c),cv(n,f,i),pV(i)}),s&&l)throw new Error(n+' contains ".value" child '+Cf(i)+" in addition to actual children.")}},Wk=function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const l=l0(i);for(let c=0;c<l.length;c++)if(!(l[c]===".priority"&&c===l.length-1)){if(!xS(l[c]))throw new Error(n+"contains an invalid key ("+l[c]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(fV);let s=null;for(e=0;e<t.length;e++){if(i=t[e],s!==null&&el(s,i))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}},Jk=function(n,t,e,i){const s=pm(n,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(s+" must be an object containing the children to replace.");const l=[];Js(t,(c,f)=>{const m=new rn(c);if(cv(s,f,vi(e,m)),rS(m)===".priority"&&!F9(f))throw new Error(s+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),Wk(s,l)},Zk=function(n,t,e){if(iv(t))throw new Error(pm(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!F9(t))throw new Error(pm(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Y9=function(n,t,e,i){if(!q9(e))throw new Error(pm(n,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},$k=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Y9(n,t,e)},Cg=function(n,t){if(Ne(t)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},tP=function(n,t){const e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!xS(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!Kk(e))throw new Error(pm(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class eP{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function NS(n,t){let e=null;for(let i=0;i<t.length;i++){const s=t[i],l=s.getPath();e!==null&&!lS(l,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:l}),e.events.push(s)}e&&n.eventLists_.push(e)}function Q9(n,t,e){NS(n,e),X9(n,i=>lS(i,t))}function zu(n,t,e){NS(n,e),X9(n,i=>el(i,t)||el(t,i))}function X9(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];if(s){const l=s.path;t(l)?(nP(n.eventLists_[i]),n.eventLists_[i]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function nP(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(e!==null){n.events[t]=null;const i=e.getEventRunner();Ug&&ws("event: "+e.toString()),Gm(i)}}}const iP="repo_interrupt",sP=25;class aP{constructor(t,e,i,s){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new eP,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=g1(),this.transactionQueueTree_=new RS,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function rP(n,t,e){if(n.stats_=sS(n.repoInfo_),n.forceRestClient_||PL())n.server_=new p1(n.repoInfo_,(i,s,l,c)=>{nb(n,i,s,l,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ib(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{es(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Iu(n.repoInfo_,t,(i,s,l,c)=>{nb(n,i,s,l,c)},i=>{ib(n,i)},i=>{oP(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=HL(n.repoInfo_,()=>new jV(n.stats_,n.server_)),n.infoData_=new kV,n.infoSyncTree_=new $3({startListening:(i,s,l,c)=>{let f=[];const m=n.infoData_.getNode(i._path);return m.isEmpty()||(f=lv(n.infoSyncTree_,i._path,m),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),IS(n,"connected",!1),n.serverSyncTree_=new $3({startListening:(i,s,l,c)=>(n.server_.listen(i,l,s,(f,m)=>{const g=c(f,m);zu(n.eventQueue_,i._path,g)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function lP(n){const e=n.infoData_.getNode(new rn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function DS(n){return Bk({timestamp:lP(n)})}function nb(n,t,e,i,s){n.dataUpdateCount++;const l=new rn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(s)if(i){const m=Fy(e,g=>Di(g));c=Vk(n.serverSyncTree_,l,m,s)}else{const m=Di(e);c=Lk(n.serverSyncTree_,l,m,s)}else if(i){const m=Fy(e,g=>Di(g));c=Ik(n.serverSyncTree_,l,m)}else{const m=Di(e);c=lv(n.serverSyncTree_,l,m)}let f=l;c.length>0&&(f=hv(n,l)),zu(n.eventQueue_,f,c)}function ib(n,t){IS(n,"connected",t),t===!1&&cP(n)}function oP(n,t){Js(t,(e,i)=>{IS(n,e,i)})}function IS(n,t,e){const i=new rn("/.info/"+t),s=Di(e);n.infoData_.updateSnapshot(i,s);const l=lv(n.infoSyncTree_,i,s);zu(n.eventQueue_,i,l)}function K9(n){return n.nextWriteId_++}function uP(n,t,e,i,s){OS(n,"set",{path:t.toString(),value:e,priority:i});const l=DS(n),c=Di(e,i),f=vS(n.serverSyncTree_,t),m=B9(c,f,l),g=K9(n),A=k9(n.serverSyncTree_,t,m,g,!0);NS(n.eventQueue_,A),n.server_.put(t.toString(),c.val(!0),(T,x)=>{const w=T==="ok";w||qa("set at "+t+" failed: "+T);const I=xf(n.serverSyncTree_,g,!w);zu(n.eventQueue_,t,I),Cm(n,s,T,x)});const E=t8(n,t);hv(n,E),zu(n.eventQueue_,E,[])}function cP(n){OS(n,"onDisconnectEvents");const t=DS(n),e=g1();bA(n.onDisconnect_,tn(),(s,l)=>{const c=Gk(s,l,n.serverSyncTree_,t);qm(e,s,c)});let i=[];bA(e,tn(),(s,l)=>{i=i.concat(lv(n.serverSyncTree_,s,l));const c=t8(n,s);hv(n,c)}),n.onDisconnect_=g1(),zu(n.eventQueue_,tn(),i)}function hP(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,s)=>{i==="ok"&&TA(n.onDisconnect_,t),Cm(n,e,i,s)})}function sb(n,t,e,i){const s=Di(e);n.server_.onDisconnectPut(t.toString(),s.val(!0),(l,c)=>{l==="ok"&&qm(n.onDisconnect_,t,s),Cm(n,i,l,c)})}function fP(n,t,e,i,s){const l=Di(e,i);n.server_.onDisconnectPut(t.toString(),l.val(!0),(c,f)=>{c==="ok"&&qm(n.onDisconnect_,t,l),Cm(n,s,c,f)})}function dP(n,t,e,i){if(qy(e)){ws("onDisconnect().update() called with empty data.  Don't do anything."),Cm(n,i,"ok",void 0);return}n.server_.onDisconnectMerge(t.toString(),e,(s,l)=>{s==="ok"&&Js(e,(c,f)=>{const m=Di(f);qm(n.onDisconnect_,vi(t,c),m)}),Cm(n,i,s,l)})}function mP(n,t,e){let i;Ne(t._path)===".info"?i=tb(n.infoSyncTree_,t,e):i=tb(n.serverSyncTree_,t,e),Q9(n.eventQueue_,t._path,i)}function pP(n,t,e){let i;Ne(t._path)===".info"?i=DA(n.infoSyncTree_,t,e):i=DA(n.serverSyncTree_,t,e),Q9(n.eventQueue_,t._path,i)}function gP(n){n.persistentConnection_&&n.persistentConnection_.interrupt(iP)}function OS(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),ws(e,...t)}function Cm(n,t,e,i){t&&Gm(()=>{if(e==="ok")t(null);else{const s=(e||"error").toUpperCase();let l=s;i&&(l+=": "+i);const c=new Error(l);c.code=s,t(c)}})}function W9(n,t,e){return vS(n.serverSyncTree_,t,e)||oe.EMPTY_NODE}function MS(n,t=n.transactionQueueTree_){if(t||fv(n,t),Fm(t)){const e=Z9(n,t);kt(e.length>0,"Sending zero length transaction queue"),e.every(s=>s.status===0)&&_P(n,z0(t),e)}else H9(t)&&uv(t,e=>{MS(n,e)})}function _P(n,t,e){const i=e.map(g=>g.currentWriteId),s=W9(n,t,i);let l=s;const c=s.hash();for(let g=0;g<e.length;g++){const A=e[g];kt(A.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const E=Ha(t,A.path);l=l.updateChild(E,A.currentOutputSnapshotRaw)}const f=l.val(!0),m=t;n.server_.put(m.toString(),f,g=>{OS(n,"transaction put response",{path:m.toString(),status:g});let A=[];if(g==="ok"){const E=[];for(let T=0;T<e.length;T++)e[T].status=2,A=A.concat(xf(n.serverSyncTree_,e[T].currentWriteId)),e[T].onComplete&&E.push(()=>e[T].onComplete(null,!0,e[T].currentOutputSnapshotResolved)),e[T].unwatcher();fv(n,wS(n.transactionQueueTree_,t)),MS(n,n.transactionQueueTree_),zu(n.eventQueue_,t,A);for(let T=0;T<E.length;T++)Gm(E[T])}else{if(g==="datastale")for(let E=0;E<e.length;E++)e[E].status===3?e[E].status=4:e[E].status=0;else{qa("transaction at "+m.toString()+" failed: "+g);for(let E=0;E<e.length;E++)e[E].status=4,e[E].abortReason=g}hv(n,t)}},c)}function hv(n,t){const e=J9(n,t),i=z0(e),s=Z9(n,e);return yP(n,s,i),i}function yP(n,t,e){if(t.length===0)return;const i=[];let s=[];const c=t.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<t.length;f++){const m=t[f],g=Ha(e,m.path);let A=!1,E;if(kt(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)A=!0,E=m.abortReason,s=s.concat(xf(n.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=sP)A=!0,E="maxretry",s=s.concat(xf(n.serverSyncTree_,m.currentWriteId,!0));else{const T=W9(n,m.path,c);m.currentInputSnapshot=T;const x=t[f].update(T.val());if(x!==void 0){cv("transaction failed: Data returned ",x,m.path);let w=Di(x);typeof x=="object"&&x!=null&&Uo(x,".priority")||(w=w.updatePriority(T.getPriority()));const L=m.currentWriteId,B=DS(n),j=B9(w,T,B);m.currentOutputSnapshotRaw=w,m.currentOutputSnapshotResolved=j,m.currentWriteId=K9(n),c.splice(c.indexOf(L),1),s=s.concat(k9(n.serverSyncTree_,m.path,j,m.currentWriteId,m.applyLocally)),s=s.concat(xf(n.serverSyncTree_,L,!0))}else A=!0,E="nodata",s=s.concat(xf(n.serverSyncTree_,m.currentWriteId,!0))}zu(n.eventQueue_,e,s),s=[],A&&(t[f].status=2,(function(T){setTimeout(T,Math.floor(0))})(t[f].unwatcher),t[f].onComplete&&(E==="nodata"?i.push(()=>t[f].onComplete(null,!1,t[f].currentInputSnapshot)):i.push(()=>t[f].onComplete(new Error(E),!1,null))))}fv(n,n.transactionQueueTree_);for(let f=0;f<i.length;f++)Gm(i[f]);MS(n,n.transactionQueueTree_)}function J9(n,t){let e,i=n.transactionQueueTree_;for(e=Ne(t);e!==null&&Fm(i)===void 0;)i=wS(i,e),t=vn(t),e=Ne(t);return i}function Z9(n,t){const e=[];return $9(n,t,e),e.sort((i,s)=>i.order-s.order),e}function $9(n,t,e){const i=Fm(t);if(i)for(let s=0;s<i.length;s++)e.push(i[s]);uv(t,s=>{$9(n,s,e)})}function fv(n,t){const e=Fm(t);if(e){let i=0;for(let s=0;s<e.length;s++)e[s].status!==2&&(e[i]=e[s],i++);e.length=i,j9(t,e.length>0?e:void 0)}uv(t,i=>{fv(n,i)})}function t8(n,t){const e=z0(J9(n,t)),i=wS(n.transactionQueueTree_,t);return Fk(i,s=>{S2(n,s)}),S2(n,i),G9(i,s=>{S2(n,s)}),e}function S2(n,t){const e=Fm(t);if(e){const i=[];let s=[],l=-1;for(let c=0;c<e.length;c++)e[c].status===3||(e[c].status===1?(kt(l===c-1,"All SENT items should be at beginning of queue."),l=c,e[c].status=3,e[c].abortReason="set"):(kt(e[c].status===0,"Unexpected transaction status in abort"),e[c].unwatcher(),s=s.concat(xf(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));l===-1?j9(t,void 0):e.length=l+1,zu(n.eventQueue_,z0(t),s);for(let c=0;c<i.length;c++)Gm(i[c])}}function vP(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let s=e[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function AP(n){const t={};n.charAt(0)==="?"&&(n=n.substring(1));for(const e of n.split("&")){if(e.length===0)continue;const i=e.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):qa(`Invalid query segment '${e}' in query '${n}'`)}return t}const ab=function(n,t){const e=EP(n),i=e.namespace;e.domain==="firebase.com"&&Uu(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&e.domain!=="localhost"&&Uu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||xL();const s=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new r9(e.host,e.secure,i,s,t,"",i!==e.subdomain),path:new rn(e.pathString)}},EP=function(n){let t="",e="",i="",s="",l="",c=!0,f="https",m=443;if(typeof n=="string"){let g=n.indexOf("//");g>=0&&(f=n.substring(0,g-1),n=n.substring(g+2));let A=n.indexOf("/");A===-1&&(A=n.length);let E=n.indexOf("?");E===-1&&(E=n.length),t=n.substring(0,Math.min(A,E)),A<E&&(s=vP(n.substring(A,E)));const T=AP(n.substring(Math.min(n.length,E)));g=t.indexOf(":"),g>=0?(c=f==="https"||f==="wss",m=parseInt(t.substring(g+1),10)):g=t.length;const x=t.slice(0,g);if(x.toLowerCase()==="localhost")e="localhost";else if(x.split(".").length<=2)e=x;else{const w=t.indexOf(".");i=t.substring(0,w).toLowerCase(),e=t.substring(w+1),l=i}"ns"in T&&(l=T.ns)}return{host:t,port:m,domain:e,subdomain:i,secure:c,scheme:f,pathString:s,namespace:l}};class SP{constructor(t,e,i,s){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=s}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+es(this.snapshot.exportVal())}}class TP{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class bP{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return kt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class CP{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new Tu;return hP(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Cg("OnDisconnect.remove",this._path);const t=new Tu;return sb(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Cg("OnDisconnect.set",this._path),OA("OnDisconnect.set",t,this._path);const e=new Tu;return sb(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Cg("OnDisconnect.setWithPriority",this._path),OA("OnDisconnect.setWithPriority",t,this._path),Zk("OnDisconnect.setWithPriority",e);const i=new Tu;return fP(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){Cg("OnDisconnect.update",this._path),Jk("OnDisconnect.update",t,this._path);const e=new Tu;return dP(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class LS{constructor(t,e,i,s){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=s}get key(){return Oe(this._path)?null:rS(this._path)}get ref(){return new Ah(this._repo,this._path)}get _queryIdentifier(){const t=H3(this._queryParams),e=nS(t);return e==="{}"?"default":e}get _queryObject(){return H3(this._queryParams)}isEqual(t){if(t=jn(t),!(t instanceof LS))return!1;const e=this._repo===t._repo,i=lS(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return e&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+hV(this._path)}}class Ah extends LS{constructor(t,e){super(t,e,new hS,!1)}get parent(){const t=p9(this._path);return t===null?null:new Ah(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class b1{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new rn(t),i=MA(this.ref,t);return new b1(this._node.getChild(e),i,ei)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>t(new b1(s,MA(this.ref,i),ei)))}hasChild(t){const e=new rn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Rm(n,t){return n=jn(n),n._checkNotDeleted("ref"),t!==void 0?MA(n._root,t):n._root}function MA(n,t){return n=jn(n),Ne(n._path)===null?$k("child","path",t):Y9("child","path",t),new Ah(n._repo,vi(n._path,t))}function rb(n){return n=jn(n),new CP(n._repo,n._path)}function LA(n,t){n=jn(n),Cg("set",n._path),OA("set",t,n._path);const e=new Tu;return uP(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}class VS{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){const i=e._queryParams.getIndex();return new SP("value",this,new b1(t.snapshotNode,new Ah(e._repo,e._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new TP(this,t,e):null}matches(t){return t instanceof VS?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function RP(n,t,e,i,s){const l=new bP(e,void 0),c=new VS(l);return mP(n._repo,n,c),()=>pP(n._repo,n,c)}function e8(n,t,e,i){return RP(n,"value",t)}Sk(Ah);xk(Ah);const wP="FIREBASE_DATABASE_EMULATOR_HOST",VA={};let xP=!1;function NP(n,t,e,i){const s=t.lastIndexOf(":"),l=t.substring(0,s),c=ph(l);n.repoInfo_=new r9(t,c,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,e),i&&(n.authTokenProvider_=i)}function DP(n,t,e,i,s){let l=i||n.options.databaseURL;l===void 0&&(n.options.projectId||Uu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ws("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=ab(l,s),f=c.repoInfo,m;typeof process<"u"&&b3&&(m=b3[wP]),m?(l=`http://${m}?ns=${f.namespace}`,c=ab(l,s),f=c.repoInfo):c.repoInfo.secure;const g=new zL(n.name,n.options,t);tP("Invalid Firebase Database URL",c),Oe(c.path)||Uu("Database URL must point to the root of a Firebase Database (not including a child path).");const A=OP(f,n,g,new UL(n,e));return new MP(A,n)}function IP(n,t){const e=VA[t];(!e||e[n.key]!==n)&&Uu(`Database ${t}(${n.repoInfo_}) has already been deleted.`),gP(n),delete e[n.key]}function OP(n,t,e,i){let s=VA[t.name];s||(s={},VA[t.name]=s);let l=s[n.toURLString()];return l&&Uu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new aP(n,xP,e,i),s[n.toURLString()]=l,l}class MP{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(rP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ah(this._repo,tn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(IP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Uu("Cannot call "+t+" on a deleted database.")}}function LP(n=oE(),t){const e=L1(n,"database").getImmediate({identifier:t});if(!e._instanceStarted){const i=AC("database");i&&VP(e,...i)}return e}function VP(n,t,e,i={}){n=jn(n),n._checkNotDeleted("useEmulator");const s=`${t}:${e}`,l=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&ih(i,l.repoInfo_.emulatorOptions))return;Uu("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(l.repoInfo_.nodeAdmin)i.mockUserToken&&Uu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Uy(Uy.OWNER);else if(i.mockUserToken){const f=typeof i.mockUserToken=="string"?i.mockUserToken:TC(i.mockUserToken,n.app.options.projectId);c=new Uy(f)}ph(t)&&(sE(t),aE("Database",!0)),NP(l,s,i,c)}function kP(n){SL(Bf),Df(new sh("database",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),l=t.getProvider("app-check-internal");return DP(i,s,l,e)},"PUBLIC").setMultipleInstances(!0)),Io(C3,R3,n),Io(C3,R3,"esm2017")}Iu.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};Iu.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};kP();const PP={apiKey:"AIzaSyBRoQv-CjY6LEEY2rAyX6Gp9PD0Q5vZZCA",authDomain:"vellum-6f172.firebaseapp.com",projectId:"vellum-6f172",storageBucket:"vellum-6f172.firebasestorage.app",messagingSenderId:"865208426663",appId:"1:865208426663:web:196559740c44bb241bfb82",databaseURL:"https://vellum-6f172-default-rtdb.firebaseio.com"};let Ef,T2,b2,C2;function UP(){return typeof Ef<"u"?{app:Ef,auth:T2,db:b2,rtdb:C2}:(Ef=xC(PP),T2=_I(Ef),b2=O6(Ef),C2=LP(Ef),{app:Ef,auth:T2,db:b2,rtdb:C2})}const{app:xG,auth:ss,db:Fa,rtdb:wm}=UP();async function zP(n,t){return nD(ss,n,t)}async function BP(n,t){return eD(ss,n,t)}async function jP(){return rD(ss)}function HP(n){return aD(ss,n)}const n8=H.createContext(null);function GP({children:n}){const[t,e]=H.useState(null),[i,s]=H.useState(!0);return H.useEffect(()=>HP(c=>{e(c),s(!1)}),[]),k.jsx(n8.Provider,{value:{user:t,loading:i},children:n})}function kS(){const n=H.useContext(n8);if(!n)throw new Error("useAuth must be used within AuthProvider");return n}function qP(){const n=zf();function t(){document.getElementById("about")?.scrollIntoView({behavior:"smooth"})}return k.jsxs("div",{className:"landing-page",children:[k.jsxs("nav",{className:"landing-nav",children:[k.jsx("span",{className:"landing-logo",children:"Vellum"}),k.jsxs("div",{className:"landing-nav-actions",children:[k.jsx("button",{type:"button",className:"landing-nav-btn",onClick:t,children:"About"}),k.jsx("button",{type:"button",className:"landing-nav-btn",onClick:()=>n("/login"),children:"Login"}),k.jsx("button",{type:"button",className:"landing-nav-btn landing-nav-btn-primary",onClick:()=>n("/login"),children:"Sign Up"})]})]}),k.jsxs("main",{className:"landing-main",children:[k.jsxs("section",{className:"landing-hero",children:[k.jsx("h1",{className:"landing-hero-title",children:"From rough ideas to real plans."}),k.jsx("button",{type:"button",className:"landing-hero-cta",onClick:()=>n("/login"),children:"Get Started"}),k.jsx("p",{className:"landing-hero-subtext",children:"Canvas-first planning with a clean, collaborative experience."})]}),k.jsxs("section",{id:"about",className:"landing-about",children:[k.jsx("h2",{className:"landing-about-title",children:"About"}),k.jsx("p",{className:"landing-about-content",children:"Under construction"})]})]})]})}function FP(){const n=zf(),[t,e]=H.useState(""),[i,s]=H.useState(""),[l,c]=H.useState(!1),[f,m]=H.useState(null),[g,A]=H.useState(!1);async function E(T){T.preventDefault(),m(null),A(!0);try{l?await BP(t,i):await zP(t,i),n("/dashboard",{replace:!0})}catch(x){const w=x instanceof Error?x.message:"Something went wrong";w.includes("password")?m("Incorrect password"):w.includes("email")||w.includes("user")?m("Invalid email or user not found"):m(w)}finally{A(!1)}}return k.jsx("div",{className:"login-page",children:k.jsxs("div",{className:"login-card",children:[k.jsx("h1",{children:"CollabBoard"}),k.jsx("p",{className:"login-subtitle",children:"Real-time collaborative whiteboard"}),k.jsxs("form",{onSubmit:E,className:"login-form",children:[k.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:T=>e(T.target.value),required:!0,autoComplete:"email"}),k.jsx("input",{type:"password",placeholder:"Password",value:i,onChange:T=>s(T.target.value),required:!0,autoComplete:l?"new-password":"current-password"}),f&&k.jsx("p",{className:"login-error",children:f}),k.jsx("button",{type:"submit",disabled:g,children:g?"Please wait":l?"Create account":"Sign in"})]}),k.jsx("button",{type:"button",className:"login-toggle",onClick:()=>{c(T=>!T),m(null)},children:l?"Already have an account? Sign in":"Need an account? Sign up"})]})})}const YP="modulepreload",QP=function(n){return"/"+n},lb={},XP=function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){let g=function(A){return Promise.all(A.map(E=>Promise.resolve(E).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var c=g;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=f?.nonce||f?.getAttribute("nonce");s=g(e.map(A=>{if(A=QP(A),A in lb)return;lb[A]=!0;const E=A.endsWith(".css"),T=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${T}`))return;const x=document.createElement("link");if(x.rel=E?"stylesheet":YP,E||(x.as="script"),x.crossOrigin="",x.href=A,m&&x.setAttribute("nonce",m),document.head.appendChild(x),E)return new Promise((w,I)=>{x.addEventListener("load",w),x.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${A}`)))})}))}function l(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return s.then(f=>{for(const m of f||[])m.status==="rejected"&&l(m.reason);return t().catch(l)})},B0="boards",PS="members";function i8(){return Hm(Fa,B0)}function dv(n){return Hu(Fa,B0,n)}function KP(n){return Hm(Fa,B0,n,PS)}function US(n,t){return Hu(Fa,B0,n,PS,t)}async function WP(n){const t=ss.currentUser;if(!t)throw new Error("Not authenticated");const e={name:n||"Untitled Board",ownerId:t.uid,createdAt:Mi(),updatedAt:Mi()},i=await Ml(i8(),e);return console.log("[board] createBoard saved to Firestore:",{boardId:i.id,name:n,ownerId:t.uid}),await M0(US(i.id,t.uid),{userId:t.uid,email:t.email??"",displayName:t.displayName??null,role:"edit",addedAt:Mi()}),i.id}async function Ym(n){const t=await ev(dv(n));if(!t.exists())return null;const e=t.data();return{id:t.id,...e}}async function JP(n,t){await qf(dv(n),{...t,updatedAt:Mi()})}async function ZP(n){const t=ss.currentUser;if(!t)throw new Error("Not authenticated");const e=await Ym(n);if(!e||e.ownerId!==t.uid)throw new Error("Only the board owner can delete it");await nv(dv(n))}function ob(n){return[...n].sort((t,e)=>{const i=t.updatedAt?.toMillis?.()??0;return(e.updatedAt?.toMillis?.()??0)-i})}function $P(n){const t=ss.currentUser;if(!t)return n({owned:[],shared:[]}),()=>{};let e=[],i=[];const s=()=>{const f=new Set(e.map(g=>g.id)),m=i.filter(g=>!f.has(g.id));n({owned:ob(e),shared:ob(m)})},l=a0(h1(i8(),s0("ownerId","==",t.uid)),f=>{e=f.docs.map(m=>{const g=m.data();return{id:m.id,...g}}),s()},f=>{console.error("[board] subscribeToBoardsForUser (owned):",f),e=[],s()});let c=()=>{};try{c=a0(h1(QE(Fa,PS),s0("userId","==",t.uid)),async f=>{const m=new Set;f.docs.forEach(E=>{const T=E.ref.path.split("/"),x=T.indexOf(B0);x>=0&&T[x+1]&&m.add(T[x+1])});const g=[...m],A=[];for(const E of g){const T=await Ym(E);T&&T.ownerId!==t.uid&&A.push(T)}i=A,s()},f=>{console.warn("[board] subscribeToBoardsForUser (shared) failed, showing owned only:",f.message),i=[],s()})}catch(f){console.warn("[board] subscribeToBoardsForUser (shared) setup failed:",f)}return()=>{l(),c()}}async function ub(n){return(await eS(KP(n))).docs.map(e=>{const i=e.data();return{...i,addedAt:i.addedAt}})}async function tU(n,t,e,i,s){const l=ss.currentUser?.uid;l&&t!==l&&await qf(dv(n),{updatedAt:Mi()}),await M0(US(n,t),{userId:t,email:e,displayName:i,role:s,addedAt:Mi()})}async function s8(n){const t=ss.currentUser;if(!t)return null;const e=await Ym(n);if(!e)return null;if(e.ownerId===t.uid)return"owner";const i=await ev(US(n,t.uid));return i.exists()?i.data().role??null:null}async function eU(n){const t=await s8(n);return t==="owner"||t==="edit"}const zS="invites";function nU(n){return Hm(Fa,"boards",n,zS)}function a8(n,t){return Hu(Fa,"boards",n,zS,t)}async function iU(n){const t=ss.currentUser;if(!t)throw new Error("Not authenticated");const e=await Ym(n.boardId);if(!e||e.ownerId!==t.uid)throw new Error("Only the board owner can send invites");const s={email:n.email.trim().toLowerCase(),role:n.role,invitedBy:t.uid,invitedByName:t.displayName??null,status:"pending",createdAt:Mi(),updatedAt:Mi()};return(await Ml(nU(n.boardId),s)).id}async function sU(n){const t=n.trim().toLowerCase();return(await eS(h1(QE(Fa,zS),s0("email","==",t),s0("status","==","pending")))).docs.map(i=>{const s=i.data(),l=i.ref.parent.parent?.id??"";return{id:i.id,boardId:l,...s}})}function r8(){const n=ss.currentUser;if(!n)return null;if(n.email)return n.email.trim().toLowerCase();const t=n.providerData?.[0];return t?.email?t.email.trim().toLowerCase():null}async function gy(){const n=r8();if(!n)return[];try{return await sU(n)}catch(t){return console.error("[invites] getMyPendingInvites failed:",t),[]}}async function aU(n,t){const e=ss.currentUser;if(!e)throw new Error("Not authenticated");const i=a8(n,t),s=await ev(i);if(!s.exists())throw new Error("Invite not found");const l=s.data();if(l.status!=="pending")throw new Error("Invite already used");const c=r8();if(!c||l.email!==c)throw new Error("This invite was sent to a different email");try{await tU(n,e.uid,e.email??"",e.displayName??null,l.role)}catch(f){throw console.error("[invites] addBoardMember failed:",f),new Error("Failed to join board. You may already be a member.")}try{await qf(i,{status:"accepted",updatedAt:Mi()})}catch(f){throw console.error("[invites] updateDoc invite failed:",f),new Error("Failed to update invite. You have been added to the board.")}}async function rU(n,t){const e=a8(n,t);await qf(e,{status:"rejected",updatedAt:Mi()})}function lU({ownedBoards:n,sharedBoards:t,currentUserId:e,onOpen:i,onShare:s,onDelete:l}){const c=[...n.map(f=>({...f,isOwner:!0})),...t.map(f=>({...f,isOwner:!1}))].sort((f,m)=>{const g=f.updatedAt?.toMillis?.()??0;return(m.updatedAt?.toMillis?.()??0)-g});return c.length===0?k.jsx("div",{className:"board-list-empty",children:k.jsx("p",{children:"No boards yet. Create one to get started."})}):k.jsxs("div",{className:"board-list-section",children:[k.jsx("h2",{className:"board-list-heading",children:"Your Boards"}),k.jsx("div",{className:"board-grid",children:c.map(f=>k.jsx(oU,{board:f,isOwner:f.isOwner,currentUserId:e,onOpen:i,onShare:s,onDelete:l},f.id))})]})}function oU({board:n,isOwner:t,currentUserId:e,onOpen:i,onShare:s,onDelete:l}){const c=n.ownerId===e;return k.jsxs("article",{className:"board-card",children:[k.jsxs("button",{type:"button",className:"board-card-main",onClick:()=>i(n.id),children:[k.jsx("h3",{className:"board-card-name",children:n.name||"Untitled Board"}),k.jsxs("span",{className:"board-card-meta",children:["Updated ",uU(n.updatedAt)]})]}),k.jsxs("div",{className:"board-card-actions",children:[t&&k.jsx("button",{type:"button",className:"board-card-share",onClick:f=>{f.stopPropagation(),s(n.id)},title:"Share board",children:"Share"}),c&&k.jsx("button",{type:"button",className:"board-card-delete",onClick:f=>{f.stopPropagation(),l(n.id)},title:"Delete board",children:"Delete"})]})]})}function uU(n){if(!n?.toMillis)return"";const t=new Date(n.toMillis()),i=new Date().getTime()-t.getTime();return i<6e4?"just now":i<36e5?`${Math.floor(i/6e4)}m ago`:i<864e5?`${Math.floor(i/36e5)}h ago`:t.toLocaleDateString()}function cU({onClose:n,onCreate:t}){const[e,i]=H.useState(""),[s,l]=H.useState(!1),[c,f]=H.useState(null),m=H.useRef(null);H.useEffect(()=>{m.current?.focus()},[]);async function g(A){A.preventDefault();const E=e.trim();if(!E){f("Please enter a board name");return}f(null),l(!0);try{await t(E),n()}catch(T){f(T instanceof Error?T.message:"Failed to create board")}finally{l(!1)}}return k.jsx("div",{className:"modal-overlay",onClick:n,children:k.jsxs("div",{className:"modal create-board-modal",onClick:A=>A.stopPropagation(),children:[k.jsxs("div",{className:"modal-header",children:[k.jsx("h2",{children:"Create New Board"}),k.jsx("button",{type:"button",className:"modal-close",onClick:n,"aria-label":"Close",children:""})]}),k.jsxs("form",{onSubmit:g,className:"create-board-form",children:[k.jsx("label",{htmlFor:"board-name",children:"Board name"}),k.jsx("input",{ref:m,id:"board-name",type:"text",placeholder:"Enter board name",value:e,onChange:A=>i(A.target.value),disabled:s,autoComplete:"off"}),c&&k.jsx("p",{className:"create-board-error",children:c}),k.jsxs("div",{className:"create-board-actions",children:[k.jsx("button",{type:"button",className:"btn-secondary",onClick:n,children:"Cancel"}),k.jsx("button",{type:"submit",className:"btn-primary",disabled:s,children:s?"Creating":"Create"})]})]})]})})}function l8({boardId:n,onClose:t}){const[e,i]=H.useState("email"),[s,l]=H.useState(""),[c,f]=H.useState("edit"),[m,g]=H.useState([]),[A,E]=H.useState(!1),[T,x]=H.useState(null),[w,I]=H.useState(null),[L,B]=H.useState(!1),j=typeof window<"u"?`${window.location.origin}/board/${n}`:"";H.useEffect(()=>{ub(n).then(g)},[n]);async function q(Z){Z.preventDefault(),x(null),I(null),E(!0);try{await iU({boardId:n,email:s.trim(),role:c}),I(`Invite sent to ${s.trim()}`),l(""),ub(n).then(g)}catch(nt){x(nt instanceof Error?nt.message:"Failed to send invite")}finally{E(!1)}}async function $(){try{await navigator.clipboard.writeText(j),B(!0),setTimeout(()=>B(!1),2e3)}catch{x("Failed to copy link")}}return k.jsx("div",{className:"modal-overlay",onClick:t,children:k.jsxs("div",{className:"modal invite-modal",onClick:Z=>Z.stopPropagation(),children:[k.jsxs("div",{className:"modal-header",children:[k.jsx("h2",{children:"Share board"}),k.jsx("button",{type:"button",className:"modal-close",onClick:t,"aria-label":"Close",children:""})]}),k.jsxs("div",{className:"invite-tabs",children:[k.jsx("button",{type:"button",className:`invite-tab ${e==="email"?"active":""}`,onClick:()=>i("email"),children:"Invite by Email"}),k.jsx("button",{type:"button",className:`invite-tab ${e==="link"?"active":""}`,onClick:()=>i("link"),children:"Share Link"})]}),e==="email"&&k.jsxs("form",{onSubmit:q,className:"invite-form",children:[k.jsxs("div",{className:"invite-form-row",children:[k.jsx("input",{type:"email",placeholder:"Email address",value:s,onChange:Z=>l(Z.target.value),required:!0}),k.jsxs("select",{value:c,onChange:Z=>f(Z.target.value),children:[k.jsx("option",{value:"edit",children:"Can Edit"}),k.jsx("option",{value:"view",children:"Can View"})]}),k.jsx("button",{type:"submit",disabled:A,children:A?"Sending":"Send invite"})]}),T&&k.jsx("p",{className:"invite-error",children:T}),w&&k.jsx("p",{className:"invite-success",children:w})]}),e==="link"&&k.jsxs("div",{className:"invite-link-section",children:[k.jsx("p",{className:"invite-link-hint",children:"Anyone with the link can access this board."}),k.jsxs("div",{className:"invite-link-row",children:[k.jsx("input",{type:"text",readOnly:!0,value:j,className:"invite-link-input"}),k.jsx("button",{type:"button",className:"invite-copy-btn",onClick:$,children:L?"Copied!":"Copy link"})]})]}),k.jsxs("div",{className:"invite-members",children:[k.jsx("h3",{children:"Board members"}),m.length===0?k.jsx("p",{className:"invite-muted",children:"Only you so far. Send an invite to add others."}):k.jsx("ul",{className:"members-list",children:m.map(Z=>k.jsxs("li",{className:"members-list-item",children:[k.jsx("span",{className:"member-email",children:Z.email}),k.jsx("span",{className:"member-role",children:Z.role})]},Z.userId))})]})]})})}function hU({invites:n,onAccept:t,onReject:e,onRefresh:i}){const[s,l]=H.useState(!1),[c,f]=H.useState(null),[m,g]=H.useState(null),A=H.useRef(null),E=zf();H.useEffect(()=>{s&&i()},[s,i]),H.useEffect(()=>{function w(I){A.current&&!A.current.contains(I.target)&&l(!1)}if(s)return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[s]);async function T(w){f(null),g(w.id);try{await aU(w.boardId,w.id),t(w.boardId),l(!1),E(`/board/${w.boardId}`)}catch(I){f(I instanceof Error?I.message:"Failed to accept invite"),t()}finally{g(null)}}async function x(w){f(null);try{await rU(w.boardId,w.id),e()}catch(I){f(I instanceof Error?I.message:"Failed to decline invite"),e()}}return k.jsxs("div",{className:"notifications-dropdown",ref:A,children:[k.jsxs("button",{type:"button",className:"notifications-trigger",onClick:()=>l(w=>!w),title:"Notifications","aria-expanded":s,"aria-haspopup":"true",children:["Notifications",n.length>0&&k.jsx("span",{className:"notifications-badge",children:n.length})]}),s&&k.jsxs("div",{className:"notifications-panel",children:[k.jsx("div",{className:"notifications-header",children:k.jsx("h3",{children:"Pending invites"})}),k.jsxs("div",{className:"notifications-content",children:[c&&k.jsx("p",{className:"notifications-error",children:c}),n.length===0?k.jsx("p",{className:"notifications-empty",children:"No pending invites."}):k.jsx("ul",{className:"notifications-list",children:n.map(w=>k.jsxs("li",{className:"notifications-item",children:[k.jsxs("div",{className:"notifications-item-info",children:[k.jsx("strong",{children:w.invitedByName||w.invitedBy}),k.jsxs("span",{children:["invited you to a board (",w.role," access)"]})]}),k.jsxs("div",{className:"notifications-item-actions",children:[k.jsx("button",{type:"button",className:"notifications-btn-accept",onClick:()=>T(w),disabled:m===w.id,children:m===w.id?"Accepting":"Accept"}),k.jsx("button",{type:"button",className:"notifications-btn-reject",onClick:()=>x(w),children:"Decline"})]})]},`${w.boardId}-${w.id}`))})]})]})]})}function fU(){const[n,t]=H.useState(!1),e=H.useRef(null);H.useEffect(()=>{function s(l){e.current&&!e.current.contains(l.target)&&t(!1)}if(n)return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[n]);const i=[{label:"Update Username",comingSoon:!0},{label:"Update Password",comingSoon:!0},{label:"Update Title/Bio",comingSoon:!0}];return k.jsxs("div",{className:"account-dropdown",ref:e,children:[k.jsx("button",{type:"button",className:"account-trigger",onClick:()=>t(s=>!s),title:"Account","aria-expanded":n,"aria-haspopup":"true",children:"Account"}),n&&k.jsx("div",{className:"account-panel",children:k.jsx("ul",{className:"account-menu",children:i.map(s=>k.jsx("li",{children:k.jsxs("button",{type:"button",className:"account-menu-item",disabled:s.comingSoon,title:s.comingSoon?"Coming soon":void 0,children:[s.label,s.comingSoon&&k.jsx("span",{className:"account-coming-soon",children:"Coming soon"})]})},s.label))})})]})}function dU({expanded:n,onToggle:t,onCreateBoard:e,onDashboardClick:i}){return k.jsxs("aside",{className:`dashboard-sidebar ${n?"dashboard-sidebar-expanded":"dashboard-sidebar-collapsed"}`,children:[k.jsx("button",{type:"button",className:"sidebar-toggle",onClick:t,"aria-label":n?"Collapse sidebar":"Expand sidebar",children:k.jsx("span",{className:"sidebar-toggle-icon","aria-hidden":!0,children:n?"":""})}),n&&k.jsxs("nav",{className:"sidebar-nav",children:[k.jsx("button",{type:"button",className:"sidebar-btn sidebar-btn-primary",onClick:e,children:"Create Board"}),k.jsx("button",{type:"button",className:"sidebar-btn",onClick:i,children:"Dashboard"})]})]})}function mU(){const{user:n}=kS(),t=zf(),e=H.useRef(null),[i,s]=H.useState({owned:[],shared:[]}),[l,c]=H.useState([]),[f,m]=H.useState(!0),[g,A]=H.useState(null),[E,T]=H.useState(!1),[x,w]=H.useState(!0);H.useEffect(()=>{if(!n?.uid){m(!1),s({owned:[],shared:[]}),c([]);return}m(!0);const Z=$P(P=>{s(P),m(!1)});let nt=!1;return gy().then(P=>{nt||c(P)}),()=>{nt=!0,Z()}},[n?.uid,n?.email]);async function I(Z){const nt=await WP(Z);t(`/board/${nt}`)}async function L(Z){t(`/board/${Z}`)}async function B(Z){if(gy().then(c),Z){const nt=await Ym(Z);nt&&s(P=>P.owned.some(z=>z.id===Z)||P.shared.some(z=>z.id===Z)?P:{...P,shared:[nt,...P.shared]})}}function j(){e.current?.scrollIntoView({behavior:"smooth"})}async function q(Z){if(confirm("Delete this board? This cannot be undone."))try{await ZP(Z)}catch(nt){console.error("Failed to delete board:",nt),alert(nt instanceof Error?nt.message:"Failed to delete board")}}const $=n?.displayName||n?.email||"User";return k.jsxs("div",{className:"dashboard",children:[k.jsxs("header",{className:"dashboard-topnav",children:[k.jsx("span",{className:"dashboard-brand",children:"Vellum"}),k.jsxs("div",{className:"dashboard-topnav-actions",children:[k.jsx("span",{className:"dashboard-user",children:$}),k.jsx(hU,{invites:l,onAccept:B,onReject:()=>gy().then(c),onRefresh:()=>gy().then(c)}),k.jsx(fU,{}),k.jsx("button",{type:"button",className:"dashboard-logout",onClick:()=>jP(),children:"Log Out"})]})]}),k.jsx(dU,{expanded:x,onToggle:()=>w(Z=>!Z),onCreateBoard:()=>T(!0),onDashboardClick:j}),k.jsxs("main",{className:"dashboard-main",style:{marginLeft:x?200:48},children:[k.jsxs("section",{className:"dashboard-ai-placeholder",children:[k.jsx("h2",{className:"dashboard-ai-title",children:"Need help drafting a template?"}),k.jsx("p",{className:"dashboard-ai-subtext",children:"Under construction  come back for an AI template and feature generator"})]}),k.jsx("section",{className:"dashboard-template-section",children:k.jsxs("div",{className:"dashboard-template-row",children:[k.jsxs("button",{type:"button",className:"dashboard-template-blank",onClick:()=>T(!0),children:[k.jsx("span",{className:"dashboard-template-blank-icon",children:"+"}),k.jsx("span",{className:"dashboard-template-blank-text",children:"Start from Scratch"})]}),k.jsxs("div",{className:"dashboard-template-recent",children:[k.jsx("h3",{className:"dashboard-template-recent-title",children:"Recently Used Templates"}),k.jsx("p",{className:"dashboard-template-recent-message",children:!f&&(i.owned.length>0||i.shared.length>0)?"Templates coming soon  we're building AI-powered templates for you":"No templates yet  create your first board to get started!"})]})]})}),k.jsx("section",{ref:e,className:"dashboard-boards",children:f?k.jsx("p",{className:"dashboard-loading",children:"Loading boards"}):k.jsx(lU,{ownedBoards:i.owned,sharedBoards:i.shared,currentUserId:n?.uid??"",onOpen:L,onShare:A,onDelete:q})})]}),E&&k.jsx(cU,{onClose:()=>T(!1),onCreate:I}),g&&k.jsx(l8,{boardId:g,onClose:()=>A(null)})]})}const C1={fontFamily:"Inter, system-ui, sans-serif",fontSize:14,fontColor:"#1a1a1a",bold:!1,italic:!1,underline:!1,textAlign:"left"},o8="objects";function jc(n){return Hm(Fa,"boards",n,o8)}function BS(n,t){return Hu(Fa,"boards",n,o8,t)}function pU(n,t){const e={objectId:n,type:t.type,createdBy:t.createdBy,createdAt:t.createdAt,updatedAt:t.updatedAt};if(t.type==="sticky")return{...e,type:"sticky",position:t.position,dimensions:t.dimensions,content:t.content??"",fillColor:t.fillColor??"#fef08a",textStyle:t.textStyle??C1};if(t.type==="rectangle")return{...e,type:"rectangle",position:t.position,dimensions:t.dimensions,fillColor:t.fillColor??"transparent"};if(t.type==="circle")return{...e,type:"circle",position:t.position,dimensions:t.dimensions,fillColor:t.fillColor??"transparent"};if(t.type==="triangle")return{...e,type:"triangle",position:t.position,dimensions:t.dimensions,fillColor:t.fillColor??"transparent"};if(t.type==="line")return{...e,type:"line",start:t.start,end:t.end,strokeColor:t.strokeColor??"#000",strokeWidth:t.strokeWidth??2};if(t.type==="text")return{...e,type:"text",position:t.position,dimensions:t.dimensions,content:t.content??"",textStyle:t.textStyle??C1};if(t.type==="emoji")return{...e,type:"emoji",position:t.position,emoji:t.emoji??"",fontSize:t.fontSize??32};throw new Error(`Unknown object type: ${t.type}`)}async function R2(n,t){const e=ss.currentUser;if(!e)throw new Error("Not authenticated");const i={type:t.type,createdBy:e.uid,createdAt:Mi(),updatedAt:Mi()};if(t.type==="sticky"){const s={...i,position:t.position,dimensions:t.dimensions??{width:200,height:200},content:t.content??"",fillColor:t.fillColor??"#fef08a",textStyle:{...C1,...t.textStyle}};return(await Ml(jc(n),s)).id}if(t.type==="rectangle"){const s={...i,position:t.position,dimensions:t.dimensions??{width:150,height:100}};return(await Ml(jc(n),s)).id}if(t.type==="circle"){const s={...i,position:t.position,dimensions:t.dimensions??{width:100,height:100}};return(await Ml(jc(n),s)).id}if(t.type==="triangle"){const s={...i,position:t.position,dimensions:t.dimensions??{width:100,height:80}};return(await Ml(jc(n),s)).id}if(t.type==="line"){const s={...i,start:t.start,end:t.end,strokeColor:t.strokeColor??"#000",strokeWidth:t.strokeWidth??2};return(await Ml(jc(n),s)).id}if(t.type==="text"){const s={...i,position:t.position,dimensions:t.dimensions??{width:200,height:40},content:t.content??"Text",textStyle:{...C1,...t.textStyle}};return(await Ml(jc(n),s)).id}if(t.type==="emoji"){const s={...i,position:t.position,emoji:t.emoji??"",fontSize:t.fontSize??32};return(await Ml(jc(n),s)).id}throw new Error(`Unsupported type: ${t.type}`)}async function Sf(n,t,e){await qf(BS(n,t),{...e,updatedAt:Mi()})}async function w2(n,t){await nv(BS(n,t))}function gU(n){const{objectId:t,...e}=n;return e}function _U(n){if(n&&typeof n=="object"&&"seconds"in n&&typeof n.seconds=="number"){const t=n;return sn.fromMillis(t.seconds*1e3+(t.nanoseconds??0)/1e6)}return Mi()}async function yU(n,t,e){const i=ss.currentUser;if(!i)throw new Error("Not authenticated");const s={...e,createdBy:e.createdBy??i.uid,createdAt:_U(e.createdAt),updatedAt:Mi()};await M0(BS(n,t),s)}function vU(n,t){return a0(jc(n),e=>{const i={};e.docs.forEach(s=>{try{const l=pU(s.id,s.data());i[s.id]=l}catch{console.warn("[objects] skip unknown type:",s.data()?.type)}}),t(i)})}function u8(n){return Hm(Fa,"boards",n,"comments")}async function AU(n,t,e){const i=ss.currentUser;if(!i)throw new Error("Not authenticated");const s=i.displayName??(i.email?i.email.split("@")[0]:null),l={position:t,authorId:i.uid,authorName:s,text:e,replies:[],createdAt:Mi(),updatedAt:Mi()};return(await Ml(u8(n),l)).id}async function EU(n,t,e){const i=ss.currentUser;if(!i)throw new Error("Not authenticated");const s=Hu(Fa,"boards",n,"comments",t),l=i.displayName??(i.email?i.email.split("@")[0]:null),c={authorId:i.uid,authorName:l,text:e,timestamp:sn.now()},g=(await XP(async()=>{const{getDoc:A}=await Promise.resolve().then(()=>EL);return{getDoc:A}},[]).then(({getDoc:A})=>A(s))).data()?.replies??[];await qf(s,{replies:[...g,c],updatedAt:Mi()})}async function cb(n,t){const e=Hu(Fa,"boards",n,"comments",t);await nv(e)}function hb(n){if(n&&typeof n=="object"&&"seconds"in n&&typeof n.seconds=="number"){const t=n;return sn.fromMillis(t.seconds*1e3+(t.nanoseconds??0)/1e6)}return sn.now()}async function SU(n,t,e){const i=Hu(Fa,"boards",n,"comments",t),s=(e.replies??[]).map(l=>({...l,timestamp:hb(l.timestamp)}));await M0(i,{position:e.position,authorId:e.authorId,authorName:e.authorName,text:e.text,replies:s,createdAt:hb(e.createdAt),updatedAt:Mi()})}function TU(n,t){return a0(u8(n),e=>{const i=e.docs.map(s=>{const l=s.data();return{id:s.id,boardId:n,position:l.position,authorId:l.authorId,authorName:l.authorName,text:l.text,replies:l.replies??[],createdAt:l.createdAt,updatedAt:l.updatedAt}});t(i)})}const bU="vellum-undo",CU=1,d0="stacks";function c8(){return new Promise((n,t)=>{const e=indexedDB.open(bU,CU);e.onerror=()=>t(e.error),e.onsuccess=()=>n(e.result),e.onupgradeneeded=()=>{e.result.createObjectStore(d0,{keyPath:"boardId"})}})}async function RU(n){try{const t=await c8();return new Promise((e,i)=>{const c=t.transaction(d0,"readonly").objectStore(d0).get(n);c.onsuccess=()=>{const f=c.result;e(f?{undoStack:f.undoStack??[],redoStack:f.redoStack??[]}:null)},c.onerror=()=>i(c.error),t.close()})}catch{return null}}async function x2(n,t,e){try{const i=await c8();return new Promise((s,l)=>{const c=i.transaction(d0,"readwrite");c.objectStore(d0).put({boardId:n,undoStack:t,redoStack:e}),c.oncomplete=()=>s(),c.onerror=()=>l(c.error),i.close()})}catch{}}const fb=33,db=["#ef4444","#f97316","#eab308","#22c55e","#14b8a6","#3b82f6","#8b5cf6","#ec4899"];function kA(n){let t=0;for(let i=0;i<n.length;i++)t=(t<<5)-t+n.charCodeAt(i);const e=Math.abs(t)%db.length;return db[e]}async function wU(n){const t=ss.currentUser;if(!t)return;const e=Rm(wm,`presence/${n}/${t.uid}`),i=Rm(wm,`cursors/${n}/${t.uid}`),s={userId:t.uid,displayName:t.displayName??null,email:t.email??"",color:kA(t.uid),joinedAt:Date.now()};await LA(e,s),rb(e).remove(),rb(i).remove()}let N2=0,Kd=null,D2=null;function mb(n,t,e){const i=ss.currentUser;if(!i){console.log("[presence] updateCursor skipped: no user");return}const s=Date.now();if(s-N2<fb){Kd={x:t,y:e},D2||(D2=setTimeout(()=>{if(Kd){N2=Date.now();const f=Rm(wm,`cursors/${n}/${i.uid}`),m={x:Kd.x,y:Kd.y,displayName:i.displayName??(i.email?i.email.split("@")[0]:null),color:kA(i.uid)};console.log("[presence] Sending cursor update (throttled flush)",n,i.uid,m),LA(f,m),Kd=null}D2=null},fb));return}N2=s,Kd=null;const l=Rm(wm,`cursors/${n}/${i.uid}`),c={x:t,y:e,displayName:i.displayName??(i.email?i.email.split("@")[0]:null),color:kA(i.uid)};console.log("[presence] Sending cursor update",n,i.uid,c),LA(l,c)}function xU(n,t){const e=Rm(wm,`presence/${n}`);return e8(e,i=>{const s=i.val(),l=[];if(s&&typeof s=="object")for(const[c,f]of Object.entries(s)){const m=f;m&&typeof m=="object"&&l.push({userId:c,displayName:m.displayName??null,email:m.email??"",color:m.color??"#888",joinedAt:m.joinedAt??0})}t(l)})}function NU(n,t){const e=Rm(wm,`cursors/${n}`);return console.log("[presence] subscribeToCursors: listening to path",`cursors/${n}`),e8(e,i=>{const s=i.val();console.log("[presence] Received cursor data",n,"raw:",s);const l=[];if(s&&typeof s=="object")for(const[c,f]of Object.entries(s)){const m=f;m&&typeof m=="object"&&typeof m.x=="number"&&typeof m.y=="number"?l.push({userId:c,x:m.x,y:m.y,displayName:m.displayName??null,color:m.color??"#888"}):console.log("[presence] Skipped cursor entry (invalid)",c,f)}console.log("[presence] Parsed cursors:",l.length,l),t(l)})}const DU=Math.PI/180;function IU(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Nf=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Vt={_global:Nf,version:"10.2.0",isBrowser:IU(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return Vt.angleDeg?n*DU:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Vt.DD.isDragging},isTransforming(){var n,t;return(t=(n=Vt.Transformer)===null||n===void 0?void 0:n.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!Vt.DD.node},releaseCanvasOnDestroy:!0,document:Nf.document,_injectGlobal(n){typeof Nf.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Nf.Konva=n}},ni=n=>{Vt[n.prototype.getClassName()]=n};Vt._injectGlobal(Vt);const OU=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,pb=()=>{if(typeof document>"u")throw new Error(OU)};class fr{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new fr(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.m[0]*e+this.m[2]*i,l=this.m[1]*e+this.m[3]*i,c=this.m[0]*-i+this.m[2]*e,f=this.m[1]*-i+this.m[3]*e;return this.m[0]=s,this.m[1]=l,this.m[2]=c,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){const i=this.m[0]+this.m[2]*e,s=this.m[1]+this.m[3]*e,l=this.m[2]+this.m[0]*t,c=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=s,this.m[2]=l,this.m[3]=c,this}multiply(t){const e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],s=this.m[0]*t.m[2]+this.m[2]*t.m[3],l=this.m[1]*t.m[2]+this.m[3]*t.m[3],c=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],f=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=l,this.m[4]=c,this.m[5]=f,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,s=-this.m[2]*t,l=this.m[0]*t,c=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=l,this.m[4]=c,this.m[5]=f,this}getMatrix(){return this.m}decompose(){const t=this.m[0],e=this.m[1],i=this.m[2],s=this.m[3],l=this.m[4],c=this.m[5],f=t*s-e*i,m={x:l,y:c,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||e!=0){const g=Math.sqrt(t*t+e*e);m.rotation=e>0?Math.acos(t/g):-Math.acos(t/g),m.scaleX=g,m.scaleY=f/g,m.skewX=(t*i+e*s)/f,m.skewY=0}else if(i!=0||s!=0){const g=Math.sqrt(i*i+s*s);m.rotation=Math.PI/2-(s>0?Math.acos(-i/g):-Math.acos(i/g)),m.scaleX=f/g,m.scaleY=g,m.skewX=0,m.skewY=(t*i+e*s)/f}return m.rotation=st._getRotation(m.rotation),m}}const MU="[object Array]",LU="[object Number]",VU="[object String]",kU="[object Boolean]",PU=Math.PI/180,UU=180/Math.PI,dg="#",zU="",BU="0",jU="Konva warning: ",gb="Konva error: ",HU="rgb(",I2={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},GU=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let _y=[],mg=null;const qU=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(n){setTimeout(n,16)},st={_isElement(n){return!!(n&&n.nodeType==1)},_isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)},_isPlainObject(n){return!!n&&n.constructor===Object},_isArray(n){return Object.prototype.toString.call(n)===MU},_isNumber(n){return Object.prototype.toString.call(n)===LU&&!isNaN(n)&&isFinite(n)},_isString(n){return Object.prototype.toString.call(n)===VU},_isBoolean(n){return Object.prototype.toString.call(n)===kU},isObject(n){return n instanceof Object},isValidSelector(n){if(typeof n!="string")return!1;const t=n[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(n){return n===0||n>0?1:-1},requestAnimFrame(n){_y.push(n),_y.length===1&&qU(function(){const t=_y;_y=[],t.forEach(function(e){e()})})},createCanvasElement(){pb();const n=document.createElement("canvas");try{n.style=n.style||{}}catch{}return n},createImageElement(){return pb(),document.createElement("img")},_isInDocument(n){for(;n=n.parentNode;)if(n==document)return!0;return!1},_urlToImage(n,t){const e=st.createImageElement();e.onload=function(){t(e)},e.src=n},_rgbToHex(n,t,e){return((1<<24)+(n<<16)+(t<<8)+e).toString(16).slice(1)},_hexToRgb(n){n=n.replace(dg,zU);const t=parseInt(n,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let n=(Math.random()*16777215<<0).toString(16);for(;n.length<6;)n=BU+n;return dg+n},isCanvasFarblingActive(){if(mg!==null)return mg;if(typeof document>"u")return mg=!1,!1;const n=this.createCanvasElement();n.width=10,n.height=10;const t=n.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,10,10),t.fillStyle="#282828",t.fillRect(0,0,10,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=0;s<100;s++)if(e[s*4]!==40||e[s*4+1]!==40||e[s*4+2]!==40||e[s*4+3]!==255){i=!0;break}return mg=i,this.releaseCanvas(n),mg},getHitColor(){const n=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(n):n},getHitColorKey(n,t,e){return this.isCanvasFarblingActive()&&(n=Math.round(n/5)*5,t=Math.round(t/5)*5,e=Math.round(e/5)*5),dg+this._rgbToHex(n,t,e)},getSnappedHexColor(n){const t=this._hexToRgb(n);return dg+this._rgbToHex(Math.round(t.r/5)*5,Math.round(t.g/5)*5,Math.round(t.b/5)*5)},getRGB(n){let t;return n in I2?(t=I2[n],{r:t[0],g:t[1],b:t[2]}):n[0]===dg?this._hexToRgb(n.substring(1)):n.substr(0,4)===HU?(t=GU.exec(n.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(n){return n=n||"black",st._namedColorToRBA(n)||st._hex3ColorToRGBA(n)||st._hex4ColorToRGBA(n)||st._hex6ColorToRGBA(n)||st._hex8ColorToRGBA(n)||st._rgbColorToRGBA(n)||st._rgbaColorToRGBA(n)||st._hslColorToRGBA(n)},_namedColorToRBA(n){const t=I2[n.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(n){if(n.indexOf("rgb(")===0){n=n.match(/rgb\(([^)]+)\)/)[1];const t=n.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(n){if(n.indexOf("rgba(")===0){n=n.match(/rgba\(([^)]+)\)/)[1];const t=n.split(/ *, */).map((e,i)=>e.slice(-1)==="%"?i===3?parseInt(e)/100:parseInt(e)/100*255:Number(e));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(n){if(n[0]==="#"&&n.length===9)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:parseInt(n.slice(7,9),16)/255}},_hex6ColorToRGBA(n){if(n[0]==="#"&&n.length===7)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:1}},_hex4ColorToRGBA(n){if(n[0]==="#"&&n.length===5)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:parseInt(n[4]+n[4],16)/255}},_hex3ColorToRGBA(n){if(n[0]==="#"&&n.length===4)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:1}},_hslColorToRGBA(n){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(n)){const[t,...e]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n),i=Number(e[0])/360,s=Number(e[1])/100,l=Number(e[2])/100;let c,f,m;if(s===0)return m=l*255,{r:Math.round(m),g:Math.round(m),b:Math.round(m),a:1};l<.5?c=l*(1+s):c=l+s-l*s;const g=2*l-c,A=[0,0,0];for(let E=0;E<3;E++)f=i+1/3*-(E-1),f<0&&f++,f>1&&f--,6*f<1?m=g+(c-g)*6*f:2*f<1?m=c:3*f<2?m=g+(c-g)*(2/3-f)*6:m=g,A[E]=m*255;return{r:Math.round(A[0]),g:Math.round(A[1]),b:Math.round(A[2]),a:1}}},haveIntersection(n,t){return!(t.x>n.x+n.width||t.x+t.width<n.x||t.y>n.y+n.height||t.y+t.height<n.y)},cloneObject(n){const t={};for(const e in n)this._isPlainObject(n[e])?t[e]=this.cloneObject(n[e]):this._isArray(n[e])?t[e]=this.cloneArray(n[e]):t[e]=n[e];return t},cloneArray(n){return n.slice(0)},degToRad(n){return n*PU},radToDeg(n){return n*UU},_degToRad(n){return st.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),st.degToRad(n)},_radToDeg(n){return st.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),st.radToDeg(n)},_getRotation(n){return Vt.angleDeg?st.radToDeg(n):n},_capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)},throw(n){throw new Error(gb+n)},error(n){console.error(gb+n)},warn(n){Vt.showWarnings&&console.warn(jU+n)},each(n,t){for(const e in n)t(e,n[e])},_inRange(n,t,e){return t<=n&&n<e},_getProjectionToSegment(n,t,e,i,s,l){let c,f,m;const g=(n-e)*(n-e)+(t-i)*(t-i);if(g==0)c=n,f=t,m=(s-e)*(s-e)+(l-i)*(l-i);else{const A=((s-n)*(e-n)+(l-t)*(i-t))/g;A<0?(c=n,f=t,m=(n-s)*(n-s)+(t-l)*(t-l)):A>1?(c=e,f=i,m=(e-s)*(e-s)+(i-l)*(i-l)):(c=n+A*(e-n),f=t+A*(i-t),m=(c-s)*(c-s)+(f-l)*(f-l))}return[c,f,m]},_getProjectionToLine(n,t,e){const i=st.cloneObject(n);let s=Number.MAX_VALUE;return t.forEach(function(l,c){if(!e&&c===t.length-1)return;const f=t[(c+1)%t.length],m=st._getProjectionToSegment(l.x,l.y,f.x,f.y,n.x,n.y),g=m[0],A=m[1],E=m[2];E<s&&(i.x=g,i.y=A,s=E)}),i},_prepareArrayForTween(n,t,e){const i=[],s=[];if(n.length>t.length){const c=t;t=n,n=c}for(let c=0;c<n.length;c+=2)i.push({x:n[c],y:n[c+1]});for(let c=0;c<t.length;c+=2)s.push({x:t[c],y:t[c+1]});const l=[];return s.forEach(function(c){const f=st._getProjectionToLine(c,i,e);l.push(f.x),l.push(f.y)}),l},_prepareToStringify(n){let t;n.visitedByCircularReferenceRemoval=!0;for(const e in n)if(n.hasOwnProperty(e)&&n[e]&&typeof n[e]=="object"){if(t=Object.getOwnPropertyDescriptor(n,e),n[e].visitedByCircularReferenceRemoval||st._isElement(n[e]))if(t.configurable)delete n[e];else return null;else if(st._prepareToStringify(n[e])===null)if(t.configurable)delete n[e];else return null}return delete n.visitedByCircularReferenceRemoval,n},_assign(n,t){for(const e in t)n[e]=t[e];return n},_getFirstPointerId(n){return n.touches?n.changedTouches[0].identifier:n.pointerId||999},releaseCanvas(...n){Vt.releaseCanvasOnDestroy&&n.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(n,t,e,i){let s=t<0?t:0,l=e<0?e:0;t=Math.abs(t),e=Math.abs(e);let c=0,f=0,m=0,g=0;typeof i=="number"?c=f=m=g=Math.min(i,t/2,e/2):(c=Math.min(i[0]||0,t/2,e/2),f=Math.min(i[1]||0,t/2,e/2),g=Math.min(i[2]||0,t/2,e/2),m=Math.min(i[3]||0,t/2,e/2)),n.moveTo(s+c,l),n.lineTo(s+t-f,l),n.arc(s+t-f,l+f,f,Math.PI*3/2,0,!1),n.lineTo(s+t,l+e-g),n.arc(s+t-g,l+e-g,g,0,Math.PI/2,!1),n.lineTo(s+m,l+e),n.arc(s+m,l+e-m,m,Math.PI/2,Math.PI,!1),n.lineTo(s,l+c),n.arc(s+c,l+c,c,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(n,t,e,i,s){i=Math.abs(i);for(let l=0;l<e;l++){const c=t[(l-1+e)%e],f=t[l],m=t[(l+1)%e],g={x:f.x-c.x,y:f.y-c.y},A={x:m.x-f.x,y:m.y-f.y},E=Math.hypot(g.x,g.y),T=Math.hypot(A.x,A.y);let x;typeof s=="number"?x=s:x=l<s.length?s[l]:0,x=i*Math.cos(Math.PI/e)*Math.min(1,x/i*2);const I={x:g.x/E,y:g.y/E},L={x:A.x/T,y:A.y/T},B={x:f.x-I.x*x,y:f.y-I.y*x},j={x:f.x+L.x*x,y:f.y+L.y*x};l===0?n.moveTo(B.x,B.y):n.lineTo(B.x,B.y),n.arcTo(f.x,f.y,j.x,j.y,x)}}};function FU(n){const t=[],e=n.length,i=st;for(let s=0;s<e;s++){let l=n[s];i._isNumber(l)?l=Math.round(l*1e3)/1e3:i._isString(l)||(l=l+""),t.push(l)}return t}const _b=",",YU="(",QU=")",XU="([",KU="])",WU=";",JU="()",ZU="=",yb=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],$U=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],tz=100;let yy=null;function vb(){if(yy!==null)return yy;try{const t=st.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(yy=!1,!1)}catch{return yy=!1,!1}}class mv{constructor(t){this.canvas=t,Vt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){let i=this.traceArr,s=i.length,l="",c,f,m,g;for(c=0;c<s;c++)f=i[c],m=f.method,m?(g=f.args,l+=m,t?l+=JU:st._isArray(g[0])?l+=XU+g.join(_b)+KU:(e&&(g=g.map(A=>typeof A=="number"?Math.floor(A):A)),l+=YU+g.join(_b)+QU)):(l+=f.property,t||(l+=ZU+f.val)),l+=WU;return l}clearTrace(){this.traceArr=[]}_trace(t){let e=this.traceArr,i;e.push(t),i=e.length,i>=tz&&e.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){const e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}_applyOpacity(t){const e=t.getAbsoluteOpacity();e!==1&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){const e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}_applyMiterLimit(t){const e=t.attrs.miterLimit;e!=null&&this.setAttr("miterLimit",e)}setAttr(t,e){this._context[t]=e}arc(t,e,i,s,l,c){this._context.arc(t,e,i,s,l,c)}arcTo(t,e,i,s,l){this._context.arcTo(t,e,i,s,l)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,i,s,l,c){this._context.bezierCurveTo(t,e,i,s,l,c)}clearRect(t,e,i,s){this._context.clearRect(t,e,i,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,e){const i=arguments;if(i.length===2)return this._context.createImageData(t,e);if(i.length===1)return this._context.createImageData(t)}createLinearGradient(t,e,i,s){return this._context.createLinearGradient(t,e,i,s)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,i,s,l,c){return this._context.createRadialGradient(t,e,i,s,l,c)}drawImage(t,e,i,s,l,c,f,m,g){const A=arguments,E=this._context;A.length===3?E.drawImage(t,e,i):A.length===5?E.drawImage(t,e,i,s,l):A.length===9&&E.drawImage(t,e,i,s,l,c,f,m,g)}ellipse(t,e,i,s,l,c,f,m){this._context.ellipse(t,e,i,s,l,c,f,m)}isPointInPath(t,e,i,s){return i?this._context.isPointInPath(i,t,e,s):this._context.isPointInPath(t,e,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,e,i,s){this._context.fillRect(t,e,i,s)}strokeRect(t,e,i,s){this._context.strokeRect(t,e,i,s)}fillText(t,e,i,s){s?this._context.fillText(t,e,i,s):this._context.fillText(t,e,i)}measureText(t){return this._context.measureText(t)}getImageData(t,e,i,s){return this._context.getImageData(t,e,i,s)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,i,s){this._context.rect(t,e,i,s)}roundRect(t,e,i,s,l){this._context.roundRect(t,e,i,s,l)}putImageData(t,e,i){this._context.putImageData(t,e,i)}quadraticCurveTo(t,e,i,s){this._context.quadraticCurveTo(t,e,i,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,i,s,l,c){this._context.setTransform(t,e,i,s,l,c)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,i,s){this._context.strokeText(t,e,i,s)}transform(t,e,i,s,l,c){this._context.transform(t,e,i,s,l,c)}translate(t,e){this._context.translate(t,e)}_enableTrace(){let t=this,e=yb.length,i=this.setAttr,s,l;const c=function(f){let m=t[f],g;t[f]=function(){return l=FU(Array.prototype.slice.call(arguments,0)),g=m.apply(t,arguments),t._trace({method:f,args:l}),g}};for(s=0;s<e;s++)c(yb[s]);t.setAttr=function(){i.apply(t,arguments);const f=arguments[0];let m=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(m=m/this.canvas.getPixelRatio()),t._trace({property:f,val:m})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;!e||e==="source-over"||this.setAttr("globalCompositeOperation",e)}}$U.forEach(function(n){Object.defineProperty(mv.prototype,n,{get(){return this._context[n]},set(t){this._context[n]=t}})});class ez extends mv{constructor(t,{willReadFrequently:e=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(t){const e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){const e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){const e=t.fill(),i=t.getFillPriority();if(e&&i==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&i==="pattern"){this._fillPattern(t);return}const l=t.getFillLinearGradientColorStops();if(l&&i==="linear-gradient"){this._fillLinearGradient(t);return}const c=t.getFillRadialGradientColorStops();if(c&&i==="radial-gradient"){this._fillRadialGradient(t);return}e?this._fillColor(t):s?this._fillPattern(t):l?this._fillLinearGradient(t):c&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const e=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),l=this.createLinearGradient(e.x,e.y,i.x,i.y);if(s){for(let c=0;c<s.length;c+=2)l.addColorStop(s[c],s[c+1]);this.setAttr("strokeStyle",l)}}_stroke(t){const e=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();const l=this.getCanvas().getPixelRatio();this.setTransform(l,0,0,l,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var e,i,s;const l=(e=t.getShadowRGBA())!==null&&e!==void 0?e:"black",c=(i=t.getShadowBlur())!==null&&i!==void 0?i:5,f=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},m=t.getAbsoluteScale(),g=this.canvas.getPixelRatio(),A=m.x*g,E=m.y*g;this.setAttr("shadowColor",l),this.setAttr("shadowBlur",c*Math.min(Math.abs(A),Math.abs(E))),this.setAttr("shadowOffsetX",f.x*A),this.setAttr("shadowOffsetY",f.y*E)}}class nz extends mv{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const e=t.getStrokeScaleEnabled();if(!e){this.save();const l=this.getCanvas().getPixelRatio();this.setTransform(l,0,0,l,0,0)}this._applyLineCap(t);const i=t.hitStrokeWidth(),s=i==="auto"?t.strokeWidth():i;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}let vy;function iz(){if(vy)return vy;const n=st.createCanvasElement(),t=n.getContext("2d");return vy=(function(){const e=Vt._global.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return e/i})(),st.releaseCanvas(n),vy}class jS{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(t||{}).pixelRatio||Vt.pixelRatio||iz();this.pixelRatio=i,this._canvas=st.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch{try{return this._canvas.toDataURL()}catch(s){return st.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Xc extends jS{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new ez(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}class HS extends jS{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new nz(this),this.setSize(t.width,t.height)}}const $e={get isDragging(){let n=!1;return $e._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return $e._dragElements.forEach(t=>{n=t.node}),n},_dragElements:new Map,_drag(n){const t=[];$e._dragElements.forEach((e,i)=>{const{node:s}=e,l=s.getStage();l.setPointersPositions(n),e.pointerId===void 0&&(e.pointerId=st._getFirstPointerId(n));const c=l._changedPointerPositions.find(f=>f.id===e.pointerId);if(c){if(e.dragStatus!=="dragging"){const f=s.dragDistance();if(Math.max(Math.abs(c.x-e.startPointerPos.x),Math.abs(c.y-e.startPointerPos.y))<f||(s.startDrag({evt:n}),!s.isDragging()))return}s._setDragPosition(n,e),t.push(s)}}),t.forEach(e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:n},!0)})},_endDragBefore(n){const t=[];$e._dragElements.forEach(e=>{const{node:i}=e,s=i.getStage();if(n&&s.setPointersPositions(n),!s._changedPointerPositions.find(f=>f.id===e.pointerId))return;(e.dragStatus==="dragging"||e.dragStatus==="stopped")&&($e.justDragged=!0,Vt._mouseListenClick=!1,Vt._touchListenClick=!1,Vt._pointerListenClick=!1,e.dragStatus="stopped");const c=e.node.getLayer()||e.node instanceof Vt.Stage&&e.node;c&&t.indexOf(c)===-1&&t.push(c)}),t.forEach(e=>{e.draw()})},_endDragAfter(n){$e._dragElements.forEach((t,e)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:n},!0),t.dragStatus!=="dragging"&&$e._dragElements.delete(e)})}};Vt.isBrowser&&(window.addEventListener("mouseup",$e._endDragBefore,!0),window.addEventListener("touchend",$e._endDragBefore,!0),window.addEventListener("touchcancel",$e._endDragBefore,!0),window.addEventListener("mousemove",$e._drag),window.addEventListener("touchmove",$e._drag),window.addEventListener("mouseup",$e._endDragAfter,!1),window.addEventListener("touchend",$e._endDragAfter,!1),window.addEventListener("touchcancel",$e._endDragAfter,!1));function Eh(n){return st._isString(n)?'"'+n+'"':Object.prototype.toString.call(n)==="[object Number]"||st._isBoolean(n)?n:Object.prototype.toString.call(n)}function h8(n){return n>255?255:n<0?0:Math.round(n)}function Mt(){if(Vt.isUnminified)return function(n,t){return st._isNumber(n)||st.warn(Eh(n)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),n}}function pv(n){if(Vt.isUnminified)return function(t,e){let i=st._isNumber(t),s=st._isArray(t)&&t.length==n;return!i&&!s&&st.warn(Eh(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or Array<number>('+n+")"),t}}function GS(){if(Vt.isUnminified)return function(n,t){return st._isNumber(n)||n==="auto"||st.warn(Eh(n)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),n}}function Qf(){if(Vt.isUnminified)return function(n,t){return st._isString(n)||st.warn(Eh(n)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),n}}function f8(){if(Vt.isUnminified)return function(n,t){const e=st._isString(n),i=Object.prototype.toString.call(n)==="[object CanvasGradient]"||n&&n.addColorStop;return e||i||st.warn(Eh(n)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),n}}function sz(){if(Vt.isUnminified)return function(n,t){const e=Int8Array?Object.getPrototypeOf(Int8Array):null;return e&&n instanceof e||(st._isArray(n)?n.forEach(function(i){st._isNumber(i)||st.warn('"'+t+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):st.warn(Eh(n)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),n}}function ql(){if(Vt.isUnminified)return function(n,t){return n===!0||n===!1||st.warn(Eh(n)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),n}}function az(n){if(Vt.isUnminified)return function(t,e){return t==null||st.isObject(t)||st.warn(Eh(t)+' is a not valid value for "'+e+'" attribute. The value should be an object with properties '+n),t}}const pg="get",gg="set",Y={addGetterSetter(n,t,e,i,s){Y.addGetter(n,t,e),Y.addSetter(n,t,i,s),Y.addOverloadedGetterSetter(n,t)},addGetter(n,t,e){const i=pg+st._capitalize(t);n.prototype[i]=n.prototype[i]||function(){const s=this.attrs[t];return s===void 0?e:s}},addSetter(n,t,e,i){const s=gg+st._capitalize(t);n.prototype[s]||Y.overWriteSetter(n,t,e,i)},overWriteSetter(n,t,e,i){const s=gg+st._capitalize(t);n.prototype[s]=function(l){return e&&l!==void 0&&l!==null&&(l=e.call(this,l,t)),this._setAttr(t,l),i&&i.call(this),this}},addComponentsGetterSetter(n,t,e,i,s){const l=e.length,c=st._capitalize,f=pg+c(t),m=gg+c(t);n.prototype[f]=function(){const A={};for(let E=0;E<l;E++){const T=e[E];A[T]=this.getAttr(t+c(T))}return A};const g=az(e);n.prototype[m]=function(A){const E=this.attrs[t];i&&(A=i.call(this,A,t)),g&&g.call(this,A,t);for(const T in A)A.hasOwnProperty(T)&&this._setAttr(t+c(T),A[T]);return A||e.forEach(T=>{this._setAttr(t+c(T),void 0)}),this._fireChangeEvent(t,E,A),s&&s.call(this),this},Y.addOverloadedGetterSetter(n,t)},addOverloadedGetterSetter(n,t){const e=st._capitalize(t),i=gg+e,s=pg+e;n.prototype[t]=function(){return arguments.length?(this[i](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(n,t,e,i){st.error("Adding deprecated "+t);const s=pg+st._capitalize(t),l=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[s]=function(){st.error(l);const c=this.attrs[t];return c===void 0?e:c},Y.addSetter(n,t,i,function(){st.error(l)}),Y.addOverloadedGetterSetter(n,t)},backCompat(n,t){st.each(t,function(e,i){const s=n.prototype[i],l=pg+st._capitalize(e),c=gg+st._capitalize(e);function f(){s.apply(this,arguments),st.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}n.prototype[e]=f,n.prototype[l]=f,n.prototype[c]=f})},afterSetFilter(){this._filterUpToDate=!1}};function rz(n){const t=/(\w+)\(([^)]+)\)/g;let e;for(;(e=t.exec(n))!==null;){const[,i,s]=e;switch(i){case"blur":{const l=parseFloat(s.replace("px",""));return function(c){this.blurRadius(l*.5);const f=Vt.Filters;f&&f.Blur&&f.Blur.call(this,c)}}case"brightness":{const l=s.includes("%")?parseFloat(s)/100:parseFloat(s);return function(c){this.brightness(l);const f=Vt.Filters;f&&f.Brightness&&f.Brightness.call(this,c)}}case"contrast":{const l=parseFloat(s);return function(c){const f=100*(Math.sqrt(l)-1);this.contrast(f);const m=Vt.Filters;m&&m.Contrast&&m.Contrast.call(this,c)}}case"grayscale":return function(l){const c=Vt.Filters;c&&c.Grayscale&&c.Grayscale.call(this,l)};case"sepia":return function(l){const c=Vt.Filters;c&&c.Sepia&&c.Sepia.call(this,l)};case"invert":return function(l){const c=Vt.Filters;c&&c.Invert&&c.Invert.call(this,l)};default:st.warn(`CSS filter "${i}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const zy="absoluteOpacity",Ab="allEventListeners",Su="absoluteTransform",Eb="absoluteScale",Tf="canvas",lz="Change",oz="children",uz="konva",PA="listening",cz="mouseenter",hz="mouseleave",fz="pointerenter",dz="pointerleave",mz="touchenter",pz="touchleave",Sb="set",Tb="Shape",By=" ",bb="stage",Hc="transform",gz="Stage",UA="visible",_z=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(By);let yz=1;class It{constructor(t){this._id=yz++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Hc||t===Su)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,e){let i=this._cache.get(t);return(i===void 0||(t===Hc||t===Su)&&i.dirty===!0)&&(i=e.call(this),this._cache.set(t,i)),i}_calculate(t,e,i){if(!this._attachedDepsListeners.get(t)){const s=e.map(l=>l+"Change.konva").join(By);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(Tf)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Su&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Tf)){const{scene:t,filter:e,hit:i}=this._cache.get(Tf);st.releaseCanvas(t._canvas,e._canvas,i._canvas),this._cache.delete(Tf)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const e=t||{};let i={};(e.x===void 0||e.y===void 0||e.width===void 0||e.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(e.width||i.width),l=Math.ceil(e.height||i.height),c=e.pixelRatio,f=e.x===void 0?Math.floor(i.x):e.x,m=e.y===void 0?Math.floor(i.y):e.y,g=e.offset||0,A=e.drawBorder||!1,E=e.hitCanvasPixelRatio||1;if(!s||!l){st.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const T=Math.abs(Math.round(i.x)-f)>.5?1:0,x=Math.abs(Math.round(i.y)-m)>.5?1:0;s+=g*2+T,l+=g*2+x,f-=g,m-=g;const w=new Xc({pixelRatio:c,width:s,height:l}),I=new Xc({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),L=new HS({pixelRatio:E,width:s,height:l}),B=w.getContext(),j=L.getContext(),q=new Xc({width:w.width/w.pixelRatio+Math.abs(f),height:w.height/w.pixelRatio+Math.abs(m),pixelRatio:w.pixelRatio}),$=q.getContext();return L.isCache=!0,w.isCache=!0,this._cache.delete(Tf),this._filterUpToDate=!1,e.imageSmoothingEnabled===!1&&(w.getContext()._context.imageSmoothingEnabled=!1,I.getContext()._context.imageSmoothingEnabled=!1),B.save(),j.save(),$.save(),B.translate(-f,-m),j.translate(-f,-m),$.translate(-f,-m),q.x=f,q.y=m,this._isUnderCache=!0,this._clearSelfAndDescendantCache(zy),this._clearSelfAndDescendantCache(Eb),this.drawScene(w,this,q),this.drawHit(L,this),this._isUnderCache=!1,B.restore(),j.restore(),A&&(B.save(),B.beginPath(),B.rect(0,0,s,l),B.closePath(),B.setAttr("strokeStyle","red"),B.setAttr("lineWidth",5),B.stroke(),B.restore()),st.releaseCanvas(q._canvas),this._cache.set(Tf,{scene:w,filter:I,hit:L,x:f,y:m}),this._requestDraw(),this}isCached(){return this._cache.has(Tf)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let s=1/0,l=1/0,c=-1/0,f=-1/0;const m=this.getAbsoluteTransform(e);return i.forEach(function(g){const A=m.point(g);s===void 0&&(s=c=A.x,l=f=A.y),s=Math.min(s,A.x),l=Math.min(l,A.y),c=Math.max(c,A.x),f=Math.max(f,A.y)}),{x:s,y:l,width:c-s,height:f-l}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);const i=this._getCachedSceneCanvas(),s=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/s,i.height/s),t.restore()}_drawCachedHitCanvas(t){const e=this._getCanvasCache(),i=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),e=this._getCanvasCache(),i=e.scene,s=e.filter,l=s.getContext(),c,f,m,g;if(!t||t.length===0)return i;if(this._filterUpToDate)return s;let A=!0;for(let T=0;T<t.length;T++)if(typeof t[T]=="string"&&vb(),typeof t[T]!="string"||!vb()){A=!1;break}const E=i.pixelRatio;if(s.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),A){const T=t.join(" ");return l.save(),l.setAttr("filter",T),l.drawImage(i._canvas,0,0,i.getWidth()/E,i.getHeight()/E),l.restore(),this._filterUpToDate=!0,s}try{for(c=t.length,l.clear(),l.drawImage(i._canvas,0,0,i.getWidth()/E,i.getHeight()/E),f=l.getImageData(0,0,s.getWidth(),s.getHeight()),m=0;m<c;m++)g=t[m],typeof g=="string"&&(g=rz(g)),g.call(this,f),l.putImageData(f,0,0)}catch(T){st.error("Unable to apply filter. "+T.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,s}on(t,e){if(this._cache&&this._cache.delete(Ab),arguments.length===3)return this._delegate.apply(this,arguments);const i=t.split(By);for(let s=0;s<i.length;s++){const c=i[s].split("."),f=c[0],m=c[1]||"";this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:m,handler:e})}return this}off(t,e){let i=(t||"").split(By),s=i.length,l,c,f,m,g,A;if(this._cache&&this._cache.delete(Ab),!t)for(c in this.eventListeners)this._off(c);for(l=0;l<s;l++)if(f=i[l],m=f.split("."),g=m[0],A=m[1],g)this.eventListeners[g]&&this._off(g,A,e);else for(c in this.eventListeners)this._off(c,A,e);return this}dispatchEvent(t){const e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,function(i){e.call(this,i.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,i){const s=this;this.on(t,function(l){const c=l.target.findAncestors(e,!0,s);for(let f=0;f<c.length;f++)l=st.cloneObject(l),l.currentTarget=c[f],i.call(c[f],l)})}remove(){return this.isDragging()&&this.stopDrag(),$e._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Su),this._clearSelfAndDescendantCache(zy),this._clearSelfAndDescendantCache(Eb),this._clearSelfAndDescendantCache(bb),this._clearSelfAndDescendantCache(UA),this._clearSelfAndDescendantCache(PA)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const e="get"+st._capitalize(t);return st._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){let t=this.getParent(),e=[];for(;t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let e,i;if(!t)return this;for(e in t)e!==oz&&(i=Sb+st._capitalize(e),st._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]))}),this}isListening(){return this._getCache(PA,this._isListening)}_isListening(t){if(!this.listening())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isListening(t):!0}isVisible(){return this._getCache(UA,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isVisible(t):!0}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);const i=this.getLayer();let s=!1;$e._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===i)&&(s=!0)});const l=!e&&!Vt.hitOnDragEnabled&&(s||Vt.isTransforming());return this.isListening()&&this.isVisible()&&!l}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),e=this,i=0,s,l,c,f;function m(A){for(s=[],l=A.length,c=0;c<l;c++)f=A[c],i++,f.nodeType!==Tb&&(s=s.concat(f.getChildren().slice())),f._id===e._id&&(c=l);s.length>0&&s[0].getDepth()<=t&&m(s)}const g=this.getStage();return e.nodeType!==gz&&g&&m(g.getChildren()),i}getDepth(){let t=0,e=this.parent;for(;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Hc),this._clearSelfAndDescendantCache(Su)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const e=t.getPointerPosition();if(!e)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(t){let e=!1,i=this.parent;for(;i;){if(i.isCached()){e=!0;break}i=i.parent}e&&!t&&(t=!0);const s=this.getAbsoluteTransform(t).getMatrix(),l=new fr,c=this.offset();return l.m=s.slice(),l.translate(c.x,c.y),l.getTranslation()}setAbsolutePosition(t){const{x:e,y:i,...s}=this._clearTransform();this.attrs.x=e,this.attrs.y=i,this._clearCache(Hc);const l=this._getAbsoluteTransform().copy();return l.invert(),l.translate(t.x,t.y),t={x:this.attrs.x+l.getTranslation().x,y:this.attrs.y+l.getTranslation().y},this._setTransform(s),this.setPosition({x:t.x,y:t.y}),this._clearCache(Hc),this._clearSelfAndDescendantCache(Su),this}_setTransform(t){let e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let e=t.x,i=t.y,s=this.x(),l=this.y();return e!==void 0&&(s+=e),i!==void 0&&(l+=i),this.setPosition({x:s,y:l}),this}_eachAncestorReverse(t,e){let i=[],s=this.getParent(),l,c;if(!(e&&e._id===this._id)){for(i.unshift(this);s&&(!e||s._id!==e._id);)i.unshift(s),s=s.parent;for(l=i.length,c=0;c<l;c++)t(i[c])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return st.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return st.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return st.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return st.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return st.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&st.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(zy,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),e,i,s,l,c;const f={attrs:{},className:this.getClassName()};for(e in t)i=t[e],c=st.isObject(i)&&!st._isPlainObject(i)&&!st._isArray(i),!c&&(s=typeof this[e]=="function"&&this[e],delete t[e],l=s?s.call(this):null,t[e]=i,l!==i&&(f.attrs[e]=i));return st._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,i){const s=[];e&&this._isMatch(t)&&s.push(this);let l=this.parent;for(;l;){if(l===i)return s;l._isMatch(t)&&s.push(l),l=l.parent}return s}isAncestorOf(t){return!1}findAncestor(t,e,i){return this.findAncestors(t,e,i)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let e=t.replace(/ /g,"").split(","),i=e.length,s,l;for(s=0;s<i;s++)if(l=e[s],st.isValidSelector(l)||(st.warn('Selector "'+l+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),st.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),st.warn("Konva is awesome, right?")),l.charAt(0)==="#"){if(this.id()===l.slice(1))return!0}else if(l.charAt(0)==="."){if(this.hasName(l.slice(1)))return!0}else if(this.className===l||this.nodeType===l)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(bb,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,e={},i){return e.target=e.target||this,i?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Su,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let e;if(t)return e=new fr,this._eachAncestorReverse(function(i){const s=i.transformsEnabled();s==="all"?e.multiply(i.getTransform()):s==="position"&&e.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},t),e;{e=this._cache.get(Su)||new fr,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();const i=this.transformsEnabled();if(i==="all")e.multiply(this.getTransform());else if(i==="position"){const s=this.attrs.x||0,l=this.attrs.y||0,c=this.attrs.offsetX||0,f=this.attrs.offsetY||0;e.translate(s-c,l-f)}return e.dirty=!1,e}}getAbsoluteScale(t){let e=this;for(;e;)e._isUnderCache&&(t=e),e=e.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Hc,this._getTransform)}_getTransform(){var t,e;const i=this._cache.get(Hc)||new fr;i.reset();const s=this.x(),l=this.y(),c=Vt.getAngle(this.rotation()),f=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,m=(e=this.attrs.scaleY)!==null&&e!==void 0?e:1,g=this.attrs.skewX||0,A=this.attrs.skewY||0,E=this.attrs.offsetX||0,T=this.attrs.offsetY||0;return(s!==0||l!==0)&&i.translate(s,l),c!==0&&i.rotate(c),(g!==0||A!==0)&&i.skew(g,A),(f!==1||m!==1)&&i.scale(f,m),(E!==0||T!==0)&&i.translate(-1*E,-1*T),i.dirty=!1,i}clone(t){let e=st.cloneObject(this.attrs),i,s,l,c,f;for(i in t)e[i]=t[i];const m=new this.constructor(e);for(i in this.eventListeners)for(s=this.eventListeners[i],l=s.length,c=0;c<l;c++)f=s[c],f.name.indexOf(uz)<0&&(m.eventListeners[i]||(m.eventListeners[i]=[]),m.eventListeners[i].push(f));return m}_toKonvaCanvas(t){t=t||{};const e=this.getClientRect(),i=this.getStage(),s=t.x!==void 0?t.x:Math.floor(e.x),l=t.y!==void 0?t.y:Math.floor(e.y),c=t.pixelRatio||1,f=new Xc({width:t.width||Math.ceil(e.width)||(i?i.width():0),height:t.height||Math.ceil(e.height)||(i?i.height():0),pixelRatio:c}),m=f.getContext(),g=new Xc({width:f.width/f.pixelRatio+Math.abs(s),height:f.height/f.pixelRatio+Math.abs(l),pixelRatio:f.pixelRatio});return t.imageSmoothingEnabled===!1&&(m._context.imageSmoothingEnabled=!1),m.save(),(s||l)&&m.translate(-1*s,-1*l),this.drawScene(f,void 0,g),m.restore(),f}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const e=t.mimeType||null,i=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(e,i);return t.callback&&t.callback(s),s}toImage(t){return new Promise((e,i)=>{try{const s=t?.callback;s&&delete t.callback,st._urlToImage(this.toDataURL(t),function(l){e(l),s?.(l)})}catch(s){i(s)}})}toBlob(t){return new Promise((e,i)=>{try{const s=t?.callback;s&&delete t.callback,this.toCanvas(t).toBlob(l=>{e(l),s?.(l)},t?.mimeType,t?.quality)}catch(s){i(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Vt.dragDistance}_off(t,e,i){let s=this.eventListeners[t],l,c,f;for(l=0;l<s.length;l++)if(c=s[l].name,f=s[l].handler,(c!=="konva"||e==="konva")&&(!e||c===e)&&(!i||i===f)){if(s.splice(l,1),s.length===0){delete this.eventListeners[t];break}l--}}_fireChangeEvent(t,e,i){this._fire(t+lz,{oldVal:e,newVal:i})}addName(t){if(!this.hasName(t)){const e=this.name(),i=e?e+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const e=this.name();return e?(e||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const e=(this.name()||"").split(/\s/g),i=e.indexOf(t);return i!==-1&&(e.splice(i,1),this.name(e.join(" "))),this}setAttr(t,e){const i=this[Sb+st._capitalize(t)];return st._isFunction(i)?i.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(Vt.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,e){const i=this.attrs[t];i===e&&!st.isObject(e)||(e==null?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e),this._requestDraw())}_setComponentAttr(t,e,i){let s;i!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,s,i))}_fireAndBubble(t,e,i){e&&this.nodeType===Tb&&(e.target=this);const s=[cz,hz,fz,dz,mz,pz];if(!(s.indexOf(t)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(t,e);const c=s.indexOf(t)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!c&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){var e,i;const{nodeType:s}=this,l=It.protoListenerMap.get(s)||{};let c=l?.[t];if(c===void 0){c=[];let f=Object.getPrototypeOf(this);for(;f;){const m=(i=(e=f.eventListeners)===null||e===void 0?void 0:e[t])!==null&&i!==void 0?i:[];c.push(...m),f=Object.getPrototypeOf(f)}l[t]=c,It.protoListenerMap.set(s,l)}return c}_fire(t,e){e=e||{},e.currentTarget=this,e.type=t;const i=this._getProtoListeners(t);if(i)for(let l=0;l<i.length;l++)i[l].handler.call(this,e);const s=this.eventListeners[t];if(s)for(let l=0;l<s.length;l++)s[l].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const e=t?t.pointerId:void 0,i=this.getStage(),s=this.getAbsolutePosition();if(!i)return;const l=i._getPointerById(e)||i._changedPointerPositions[0]||s;$e._dragElements.set(this._id,{node:this,startPointerPos:l,offset:{x:l.x-s.x,y:l.y-s.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){$e._dragElements.has(this._id)||this._createDragElement(t);const i=$e._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const i=this.getStage()._getPointerById(e.pointerId);if(!i)return;let s={x:i.x-e.offset.x,y:i.y-e.offset.y};const l=this.dragBoundFunc();if(l!==void 0){const c=l.call(this,s,t);c?s=c:st.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(t){const e=$e._dragElements.get(this._id);e&&(e.dragStatus="stopped"),$e._endDragBefore(t),$e._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=$e._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||Vt.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let s=!1;$e._dragElements.forEach(l=>{this.isAncestorOf(l.node)&&(s=!0)}),s||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const e=$e._dragElements.get(this._id),i=e&&e.dragStatus==="dragging",s=e&&e.dragStatus==="ready";i?this.stopDrag():s&&$e._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const i={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return st.haveIntersection(i,this.getClientRect())}static create(t,e){return st._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){let i=It.prototype.getClassName.call(t),s=t.children,l,c,f;e&&(t.attrs.container=e),Vt[i]||(st.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const m=Vt[i];if(l=new m(t.attrs),s)for(c=s.length,f=0;f<c;f++)l.add(It._createNode(s[f]));return l}}It.protoListenerMap=new Map;It.prototype.nodeType="Node";It.prototype._attrsAffectingSize=[];It.prototype.eventListeners={};It.prototype.on.call(It.prototype,_z,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Hc),this._clearSelfAndDescendantCache(Su)});It.prototype.on.call(It.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(UA)});It.prototype.on.call(It.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(PA)});It.prototype.on.call(It.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(zy)});const En=Y.addGetterSetter;En(It,"zIndex");En(It,"absolutePosition");En(It,"position");En(It,"x",0,Mt());En(It,"y",0,Mt());En(It,"globalCompositeOperation","source-over",Qf());En(It,"opacity",1,Mt());En(It,"name","",Qf());En(It,"id","",Qf());En(It,"rotation",0,Mt());Y.addComponentsGetterSetter(It,"scale",["x","y"]);En(It,"scaleX",1,Mt());En(It,"scaleY",1,Mt());Y.addComponentsGetterSetter(It,"skew",["x","y"]);En(It,"skewX",0,Mt());En(It,"skewY",0,Mt());Y.addComponentsGetterSetter(It,"offset",["x","y"]);En(It,"offsetX",0,Mt());En(It,"offsetY",0,Mt());En(It,"dragDistance",void 0,Mt());En(It,"width",0,Mt());En(It,"height",0,Mt());En(It,"listening",!0,ql());En(It,"preventDefault",!0,ql());En(It,"filters",void 0,function(n){return this._filterUpToDate=!1,n});En(It,"visible",!0,ql());En(It,"transformsEnabled","all",Qf());En(It,"size");En(It,"dragBoundFunc");En(It,"draggable",!1,ql());Y.backCompat(It,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class mr extends It{constructor(){super(...arguments),this.children=[]}getChildren(t){const e=this.children||[];return t?e.filter(t):e}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let i=0;i<t.length;i++)this.add(t[i]);return this}const e=t[0];return e.getParent()?(e.moveTo(this),this):(this._validateAdd(e),e.index=this.getChildren().length,e.parent=this,e._clearCaches(),this.getChildren().push(e),this._fire("add",{child:e}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){const i=[];return this._descendants(s=>{const l=s._isMatch(t);return l&&i.push(s),!!(l&&e)}),i}_descendants(t){let e=!1;const i=this.getChildren();for(const s of i){if(e=t(s),e)return!0;if(s.hasChildren()&&(e=s._descendants(t),e))return!0}return!1}toObject(){const t=It.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(e=>{t.children.push(e.toObject())}),t}isAncestorOf(t){let e=t.getParent();for(;e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){const e=It.prototype.clone.call(this,t);return this.getChildren().forEach(function(i){e.add(i.clone())}),e}getAllIntersections(t){const e=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(t)&&e.push(i)}),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),!this.isCached()&&((e=this.children)===null||e===void 0||e.forEach(function(i){i._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(e,i){e.index=i}),this._requestDraw()}drawScene(t,e,i){const s=this.getLayer(),l=t||s&&s.getCanvas(),c=l&&l.getContext(),f=this._getCanvasCache(),m=f&&f.scene,g=l&&l.isCache;if(!this.isVisible()&&!g)return this;if(m){c.save();const A=this.getAbsoluteTransform(e).getMatrix();c.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,e,i);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;const i=this.getLayer(),s=t||i&&i.hitCanvas,l=s&&s.getContext(),c=this._getCanvasCache();if(c&&c.hit){l.save();const m=this.getAbsoluteTransform(e).getMatrix();l.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",s,e);return this}_drawChildren(t,e,i,s){var l;const c=e&&e.getContext(),f=this.clipWidth(),m=this.clipHeight(),g=this.clipFunc(),A=typeof f=="number"&&typeof m=="number"||g,E=i===this;if(A){c.save();const x=this.getAbsoluteTransform(i);let w=x.getMatrix();c.transform(w[0],w[1],w[2],w[3],w[4],w[5]),c.beginPath();let I;if(g)I=g.call(this,c,this);else{const L=this.clipX(),B=this.clipY();c.rect(L||0,B||0,f,m)}c.clip.apply(c,I),w=x.copy().invert().getMatrix(),c.transform(w[0],w[1],w[2],w[3],w[4],w[5])}const T=!E&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";T&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(x){x[t](e,i,s)}),T&&c.restore(),A&&c.restore()}getClientRect(t={}){var e;const i=t.skipTransform,s=t.relativeTo;let l,c,f,m,g={x:1/0,y:1/0,width:0,height:0};const A=this;(e=this.children)===null||e===void 0||e.forEach(function(x){if(!x.visible())return;const w=x.getClientRect({relativeTo:A,skipShadow:t.skipShadow,skipStroke:t.skipStroke});w.width===0&&w.height===0||(l===void 0?(l=w.x,c=w.y,f=w.x+w.width,m=w.y+w.height):(l=Math.min(l,w.x),c=Math.min(c,w.y),f=Math.max(f,w.x+w.width),m=Math.max(m,w.y+w.height)))});const E=this.find("Shape");let T=!1;for(let x=0;x<E.length;x++)if(E[x]._isVisible(this)){T=!0;break}return T&&l!==void 0?g={x:l,y:c,width:f-l,height:m-c}:g={x:0,y:0,width:0,height:0},i?g:this._transformedRect(g,s)}}Y.addComponentsGetterSetter(mr,"clip",["x","y","width","height"]);Y.addGetterSetter(mr,"clipX",void 0,Mt());Y.addGetterSetter(mr,"clipY",void 0,Mt());Y.addGetterSetter(mr,"clipWidth",void 0,Mt());Y.addGetterSetter(mr,"clipHeight",void 0,Mt());Y.addGetterSetter(mr,"clipFunc");const m0=new Map,d8=Vt._global.PointerEvent!==void 0;function O2(n){return m0.get(n)}function qS(n){return{evt:n,pointerId:n.pointerId}}function m8(n,t){return m0.get(n)===t}function p8(n,t){Gg(n),t.getStage()&&(m0.set(n,t),d8&&t._fire("gotpointercapture",qS(new PointerEvent("gotpointercapture"))))}function Gg(n,t){const e=m0.get(n);if(!e)return;const i=e.getStage();i&&i.content,m0.delete(n),d8&&e._fire("lostpointercapture",qS(new PointerEvent("lostpointercapture")))}const vz="Stage",Az="string",Cb="px",Ez="mouseout",g8="mouseleave",_8="mouseover",y8="mouseenter",v8="mousemove",A8="mousedown",E8="mouseup",Rg="pointermove",wg="pointerdown",rm="pointerup",xg="pointercancel",Sz="lostpointercapture",Ay="pointerout",Ng="pointerleave",Ey="pointerover",Sy="pointerenter",zA="contextmenu",S8="touchstart",T8="touchend",b8="touchmove",C8="touchcancel",BA="wheel",Tz=5,bz=[[y8,"_pointerenter"],[A8,"_pointerdown"],[v8,"_pointermove"],[E8,"_pointerup"],[g8,"_pointerleave"],[S8,"_pointerdown"],[b8,"_pointermove"],[T8,"_pointerup"],[C8,"_pointercancel"],[_8,"_pointerover"],[BA,"_wheel"],[zA,"_contextmenu"],[wg,"_pointerdown"],[Rg,"_pointermove"],[rm,"_pointerup"],[xg,"_pointercancel"],[Ng,"_pointerleave"],[Sz,"_lostpointercapture"]],M2={mouse:{[Ay]:Ez,[Ng]:g8,[Ey]:_8,[Sy]:y8,[Rg]:v8,[wg]:A8,[rm]:E8,[xg]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Ay]:"touchout",[Ng]:"touchleave",[Ey]:"touchover",[Sy]:"touchenter",[Rg]:b8,[wg]:S8,[rm]:T8,[xg]:C8,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Ay]:Ay,[Ng]:Ng,[Ey]:Ey,[Sy]:Sy,[Rg]:Rg,[wg]:wg,[rm]:rm,[xg]:xg,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Dg=n=>n.indexOf("pointer")>=0?"pointer":n.indexOf("touch")>=0?"touch":"mouse",Wd=n=>{const t=Dg(n);if(t==="pointer")return Vt.pointerEventsEnabled&&M2.pointer;if(t==="touch")return M2.touch;if(t==="mouse")return M2.mouse};function Rb(n={}){return(n.clipFunc||n.clipWidth||n.clipHeight)&&st.warn("Stage does not support clipping. Please use clip for Layers or Groups."),n}const Cz="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",qg=[];let gv=class extends mr{constructor(t){super(Rb(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),qg.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Rb(this.attrs)}),this._checkVisibility()}_validateAdd(t){const e=t.getType()==="Layer",i=t.getType()==="FastLayer";e||i||st.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===Az){let e;if(t.charAt(0)==="."){const i=t.slice(1);t=document.getElementsByClassName(i)[0]}else t.charAt(0)!=="#"?e=t:e=t.slice(1),t=document.getElementById(e);if(!t)throw"Can not find container in document with id "+e}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,e=t.length;for(let i=0;i<e;i++)t[i].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),mr.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&st._isInDocument(t)&&this.container().removeChild(t);const e=qg.indexOf(this);return e>-1&&qg.splice(e,1),st.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(st.warn(Cz),null)}_getPointerById(t){return this._pointerPositions.find(e=>e.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const e=new Xc({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=e.getContext()._context,s=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),s.forEach(function(l){if(!l.isVisible())return;const c=l._toKonvaCanvas(t);i.drawImage(c._canvas,t.x,t.y,c.getWidth()/c.getPixelRatio(),c.getHeight()/c.getPixelRatio())}),e}getIntersection(t){if(!t)return null;const e=this.children,i=e.length,s=i-1;for(let l=s;l>=0;l--){const c=e[l].getIntersection(t);if(c)return c}return null}_resizeDOM(){const t=this.width(),e=this.height();this.content&&(this.content.style.width=t+Cb,this.content.style.height=e+Cb),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach(i=>{i.setSize({width:t,height:e}),i.draw()})}add(t,...e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}super.add(t);const i=this.children.length;return i>Tz&&st.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),Vt.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return m8(t,this)}setPointerCapture(t){p8(t,this)}releaseCapture(t){Gg(t)}getLayers(){return this.children}_bindContentEvents(){Vt.isBrowser&&bz.forEach(([t,e])=>{this.content.addEventListener(t,i=>{this[e](i)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const e=Wd(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=Wd(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=Wd(t.type),i=Dg(t.type);if(!e)return;this.setPointersPositions(t);const s=this._getTargetShape(i),l=!(Vt.isDragging()||Vt.isTransforming())||Vt.hitOnDragEnabled;s&&l?(s._fireAndBubble(e.pointerout,{evt:t}),s._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):l&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const e=Wd(t.type),i=Dg(t.type);if(!e)return;this.setPointersPositions(t);let s=!1;this._changedPointerPositions.forEach(l=>{const c=this.getIntersection(l);if($e.justDragged=!1,Vt["_"+i+"ListenClick"]=!0,!c||!c.isListening()){this[i+"ClickStartShape"]=void 0;return}Vt.capturePointerEventsEnabled&&c.setPointerCapture(l.id),this[i+"ClickStartShape"]=c,c._fireAndBubble(e.pointerdown,{evt:t,pointerId:l.id}),s=!0;const f=t.type.indexOf("touch")>=0;c.preventDefault()&&t.cancelable&&f&&t.preventDefault()}),s||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const e=Wd(t.type),i=Dg(t.type);if(!e)return;const s=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(Vt.isDragging()&&$e.node.preventDefault()&&t.cancelable&&s&&t.preventDefault(),this.setPointersPositions(t),!(!(Vt.isDragging()||Vt.isTransforming())||Vt.hitOnDragEnabled))return;const c={};let f=!1;const m=this._getTargetShape(i);this._changedPointerPositions.forEach(g=>{const A=O2(g.id)||this.getIntersection(g),E=g.id,T={evt:t,pointerId:E},x=m!==A;if(x&&m&&(m._fireAndBubble(e.pointerout,{...T},A),m._fireAndBubble(e.pointerleave,{...T},A)),A){if(c[A._id])return;c[A._id]=!0}A&&A.isListening()?(f=!0,x&&(A._fireAndBubble(e.pointerover,{...T},m),A._fireAndBubble(e.pointerenter,{...T},m),this[i+"targetShape"]=A),A._fireAndBubble(e.pointermove,{...T})):m&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:E}),this[i+"targetShape"]=null)}),f||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=Wd(t.type),i=Dg(t.type);if(!e)return;this.setPointersPositions(t);const s=this[i+"ClickStartShape"],l=this[i+"ClickEndShape"],c={};let f=!1;this._changedPointerPositions.forEach(m=>{const g=O2(m.id)||this.getIntersection(m);if(g){if(g.releaseCapture(m.id),c[g._id])return;c[g._id]=!0}const A=m.id,E={evt:t,pointerId:A};let T=!1;Vt["_"+i+"InDblClickWindow"]?(T=!0,clearTimeout(this[i+"DblTimeout"])):$e.justDragged||(Vt["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){Vt["_"+i+"InDblClickWindow"]=!1},Vt.dblClickWindow),g&&g.isListening()?(f=!0,this[i+"ClickEndShape"]=g,g._fireAndBubble(e.pointerup,{...E}),Vt["_"+i+"ListenClick"]&&s&&s===g&&(g._fireAndBubble(e.pointerclick,{...E}),T&&l&&l===g&&g._fireAndBubble(e.pointerdblclick,{...E}))):(this[i+"ClickEndShape"]=null,f||(this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),f=!0),Vt["_"+i+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:A}),T&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:A}))}),f||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Vt["_"+i+"ListenClick"]=!1,t.cancelable&&i!=="touch"&&i!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(zA,{evt:t}):this._fire(zA,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(BA,{evt:t}):this._fire(BA,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=O2(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(rm,qS(t)),Gg(t.pointerId)}_lostpointercapture(t){Gg(t.pointerId)}setPointersPositions(t){const e=this._getContentPosition();let i=null,s=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,l=>{this._pointerPositions.push({id:l.identifier,x:(l.clientX-e.left)/e.scaleX,y:(l.clientY-e.top)/e.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,l=>{this._changedPointerPositions.push({id:l.identifier,x:(l.clientX-e.left)/e.scaleX,y:(l.clientY-e.top)/e.scaleY})})):(i=(t.clientX-e.left)/e.scaleX,s=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:i,y:s},this._pointerPositions=[{x:i,y:s,id:st._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:s,id:st._getFirstPointerId(t)}])}_setPointerPosition(t){st.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Xc({width:this.width(),height:this.height()}),this.bufferHitCanvas=new HS({pixelRatio:1,width:this.width(),height:this.height()}),!Vt.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return st.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}};gv.prototype.nodeType=vz;ni(gv);Y.addGetterSetter(gv,"container");Vt.isBrowser&&document.addEventListener("visibilitychange",()=>{qg.forEach(n=>{n.batchDraw()})});const R8="hasShadow",w8="shadowRGBA",x8="patternImage",N8="linearGradient",D8="radialGradient";let Ty;function L2(){return Ty||(Ty=st.createCanvasElement().getContext("2d"),Ty)}const Fg={};function Rz(n){const t=this.attrs.fillRule;t?n.fill(t):n.fill()}function wz(n){n.stroke()}function xz(n){const t=this.attrs.fillRule;t?n.fill(t):n.fill()}function Nz(n){n.stroke()}function Dz(){this._clearCache(R8)}function Iz(){this._clearCache(w8)}function Oz(){this._clearCache(x8)}function Mz(){this._clearCache(N8)}function Lz(){this._clearCache(D8)}class Nt extends It{constructor(t){super(t);let e,i=0;for(;e=st.getHitColor(),!(e&&!(e in Fg));)if(i++,i>=1e4){st.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),e=st.getRandomColor();break}this.colorKey=e,Fg[e]=this}getContext(){return st.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return st.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(R8,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(x8,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=L2().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const i=new fr;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(Vt.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=i.getMatrix(),l=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);e.setTransform(l)}return e}}_getLinearGradient(){return this._getCache(N8,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const e=L2(),i=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),l=e.createLinearGradient(i.x,i.y,s.x,s.y);for(let c=0;c<t.length;c+=2)l.addColorStop(t[c],t[c+1]);return l}}_getRadialGradient(){return this._getCache(D8,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const e=L2(),i=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),l=e.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius());for(let c=0;c<t.length;c+=2)l.addColorStop(t[c],t[c+1]);return l}}getShadowRGBA(){return this._getCache(w8,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=st.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const e=this.getStage();if(!e)return!1;const i=e.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return It.prototype.destroy.call(this),delete Fg[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!((e=this.attrs.perfectDrawEnabled)!==null&&e!==void 0?e:!0))return!1;const s=t||this.hasFill(),l=this.hasStroke(),c=this.getAbsoluteOpacity()!==1;if(s&&l&&c)return!0;const f=this.hasShadow(),m=this.shadowForStrokeEnabled();return!!(s&&l&&f&&m)}setStrokeHitEnabled(t){st.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let e=!1,i=this.getParent();for(;i;){if(i.isCached()){e=!0;break}i=i.getParent()}const s=t.skipTransform,l=t.relativeTo||e&&this.getStage()||void 0,c=this.getSelfRect(),m=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,g=c.width+m,A=c.height+m,E=!t.skipShadow&&this.hasShadow(),T=E?this.shadowOffsetX():0,x=E?this.shadowOffsetY():0,w=g+Math.abs(T),I=A+Math.abs(x),L=E&&this.shadowBlur()||0,B=w+L*2,j=I+L*2,q={width:B,height:j,x:-(m/2+L)+Math.min(T,0)+c.x,y:-(m/2+L)+Math.min(x,0)+c.y};return s?q:this._transformedRect(q,l)}drawScene(t,e,i){const s=this.getLayer(),l=t||s.getCanvas(),c=l.getContext(),f=this._getCanvasCache(),m=this.getSceneFunc(),g=this.hasShadow();let A;const E=e===this;if(!this.isVisible()&&!E)return this;if(f){c.save();const T=this.getAbsoluteTransform(e).getMatrix();return c.transform(T[0],T[1],T[2],T[3],T[4],T[5]),this._drawCachedSceneCanvas(c),c.restore(),this}if(!m)return this;if(c.save(),this._useBufferCanvas()){A=this.getStage();const T=i||A.bufferCanvas,x=T.getContext();i?(x.save(),x.setTransform(1,0,0,1,0,0),x.clearRect(0,0,T.width,T.height),x.restore()):x.clear(),x.save(),x._applyLineJoin(this),x._applyMiterLimit(this);const w=this.getAbsoluteTransform(e).getMatrix();x.transform(w[0],w[1],w[2],w[3],w[4],w[5]),m.call(this,x,this),x.restore();const I=T.pixelRatio;g&&c._applyShadow(this),E||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c.drawImage(T._canvas,T.x||0,T.y||0,T.width/I,T.height/I)}else{if(c._applyLineJoin(this),c._applyMiterLimit(this),!E){const T=this.getAbsoluteTransform(e).getMatrix();c.transform(T[0],T[1],T[2],T[3],T[4],T[5]),c._applyOpacity(this),c._applyGlobalCompositeOperation(this)}g&&c._applyShadow(this),m.call(this,c,this)}return c.restore(),this}drawHit(t,e,i=!1){if(!this.shouldDrawHit(e,i))return this;const s=this.getLayer(),l=t||s.hitCanvas,c=l&&l.getContext(),f=this.hitFunc()||this.sceneFunc(),m=this._getCanvasCache(),g=m&&m.hit;if(this.colorKey||st.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),g){c.save();const E=this.getAbsoluteTransform(e).getMatrix();return c.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedHitCanvas(c),c.restore(),this}if(!f)return this;if(c.save(),c._applyLineJoin(this),c._applyMiterLimit(this),!(this===e)){const E=this.getAbsoluteTransform(e).getMatrix();c.transform(E[0],E[1],E[2],E[3],E[4],E[5])}return f.call(this,c,this),c.restore(),this}drawHitFromCache(t=0){const e=this._getCanvasCache(),i=this._getCachedSceneCanvas(),s=e.hit,l=s.getContext(),c=s.getWidth(),f=s.getHeight();l.clear(),l.drawImage(i._canvas,0,0,c,f);try{const m=l.getImageData(0,0,c,f),g=m.data,A=g.length,E=st._hexToRgb(this.colorKey);for(let T=0;T<A;T+=4)g[T+3]>t?(g[T]=E.r,g[T+1]=E.g,g[T+2]=E.b,g[T+3]=255):g[T+3]=0;l.putImageData(m,0,0)}catch(m){st.error("Unable to draw hit graph from cached scene canvas. "+m.message)}return this}hasPointerCapture(t){return m8(t,this)}setPointerCapture(t){p8(t,this)}releaseCapture(t){Gg(t)}}Nt.prototype._fillFunc=Rz;Nt.prototype._strokeFunc=wz;Nt.prototype._fillFuncHit=xz;Nt.prototype._strokeFuncHit=Nz;Nt.prototype._centroid=!1;Nt.prototype.nodeType="Shape";ni(Nt);Nt.prototype.eventListeners={};Nt.prototype.on.call(Nt.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Dz);Nt.prototype.on.call(Nt.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Iz);Nt.prototype.on.call(Nt.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",Oz);Nt.prototype.on.call(Nt.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Mz);Nt.prototype.on.call(Nt.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",Lz);Y.addGetterSetter(Nt,"stroke",void 0,f8());Y.addGetterSetter(Nt,"strokeWidth",2,Mt());Y.addGetterSetter(Nt,"fillAfterStrokeEnabled",!1);Y.addGetterSetter(Nt,"hitStrokeWidth","auto",GS());Y.addGetterSetter(Nt,"strokeHitEnabled",!0,ql());Y.addGetterSetter(Nt,"perfectDrawEnabled",!0,ql());Y.addGetterSetter(Nt,"shadowForStrokeEnabled",!0,ql());Y.addGetterSetter(Nt,"lineJoin");Y.addGetterSetter(Nt,"lineCap");Y.addGetterSetter(Nt,"miterLimit");Y.addGetterSetter(Nt,"sceneFunc");Y.addGetterSetter(Nt,"hitFunc");Y.addGetterSetter(Nt,"dash");Y.addGetterSetter(Nt,"dashOffset",0,Mt());Y.addGetterSetter(Nt,"shadowColor",void 0,Qf());Y.addGetterSetter(Nt,"shadowBlur",0,Mt());Y.addGetterSetter(Nt,"shadowOpacity",1,Mt());Y.addComponentsGetterSetter(Nt,"shadowOffset",["x","y"]);Y.addGetterSetter(Nt,"shadowOffsetX",0,Mt());Y.addGetterSetter(Nt,"shadowOffsetY",0,Mt());Y.addGetterSetter(Nt,"fillPatternImage");Y.addGetterSetter(Nt,"fill",void 0,f8());Y.addGetterSetter(Nt,"fillPatternX",0,Mt());Y.addGetterSetter(Nt,"fillPatternY",0,Mt());Y.addGetterSetter(Nt,"fillLinearGradientColorStops");Y.addGetterSetter(Nt,"strokeLinearGradientColorStops");Y.addGetterSetter(Nt,"fillRadialGradientStartRadius",0);Y.addGetterSetter(Nt,"fillRadialGradientEndRadius",0);Y.addGetterSetter(Nt,"fillRadialGradientColorStops");Y.addGetterSetter(Nt,"fillPatternRepeat","repeat");Y.addGetterSetter(Nt,"fillEnabled",!0);Y.addGetterSetter(Nt,"strokeEnabled",!0);Y.addGetterSetter(Nt,"shadowEnabled",!0);Y.addGetterSetter(Nt,"dashEnabled",!0);Y.addGetterSetter(Nt,"strokeScaleEnabled",!0);Y.addGetterSetter(Nt,"fillPriority","color");Y.addComponentsGetterSetter(Nt,"fillPatternOffset",["x","y"]);Y.addGetterSetter(Nt,"fillPatternOffsetX",0,Mt());Y.addGetterSetter(Nt,"fillPatternOffsetY",0,Mt());Y.addComponentsGetterSetter(Nt,"fillPatternScale",["x","y"]);Y.addGetterSetter(Nt,"fillPatternScaleX",1,Mt());Y.addGetterSetter(Nt,"fillPatternScaleY",1,Mt());Y.addComponentsGetterSetter(Nt,"fillLinearGradientStartPoint",["x","y"]);Y.addComponentsGetterSetter(Nt,"strokeLinearGradientStartPoint",["x","y"]);Y.addGetterSetter(Nt,"fillLinearGradientStartPointX",0);Y.addGetterSetter(Nt,"strokeLinearGradientStartPointX",0);Y.addGetterSetter(Nt,"fillLinearGradientStartPointY",0);Y.addGetterSetter(Nt,"strokeLinearGradientStartPointY",0);Y.addComponentsGetterSetter(Nt,"fillLinearGradientEndPoint",["x","y"]);Y.addComponentsGetterSetter(Nt,"strokeLinearGradientEndPoint",["x","y"]);Y.addGetterSetter(Nt,"fillLinearGradientEndPointX",0);Y.addGetterSetter(Nt,"strokeLinearGradientEndPointX",0);Y.addGetterSetter(Nt,"fillLinearGradientEndPointY",0);Y.addGetterSetter(Nt,"strokeLinearGradientEndPointY",0);Y.addComponentsGetterSetter(Nt,"fillRadialGradientStartPoint",["x","y"]);Y.addGetterSetter(Nt,"fillRadialGradientStartPointX",0);Y.addGetterSetter(Nt,"fillRadialGradientStartPointY",0);Y.addComponentsGetterSetter(Nt,"fillRadialGradientEndPoint",["x","y"]);Y.addGetterSetter(Nt,"fillRadialGradientEndPointX",0);Y.addGetterSetter(Nt,"fillRadialGradientEndPointY",0);Y.addGetterSetter(Nt,"fillPatternRotation",0);Y.addGetterSetter(Nt,"fillRule",void 0,Qf());Y.backCompat(Nt,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const Vz="beforeDraw",kz="draw",I8=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Pz=I8.length;let Xf=class extends mr{constructor(t){super(t),this.canvas=new Xc,this.hitCanvas=new HS({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){It.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!It.prototype.moveUp.call(this))return!1;const e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(It.prototype.moveDown.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(It.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return It.prototype.remove.call(this),t&&t.parentNode&&st._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&st.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),It.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){st.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){st.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,st.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let e=1,i=!1;for(;;){for(let s=0;s<Pz;s++){const l=I8[s],c=this._getIntersection({x:t.x+l.x*e,y:t.y+l.y*e}),f=c.shape;if(f)return f;if(i=!!c.antialiased,!c.antialiased)break}if(i)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,s=i[3];if(s===255){const l=st.getHitColorKey(i[0],i[1],i[2]),c=Fg[l];return c?{shape:c}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,e,i){const s=this.getLayer(),l=t||s&&s.getCanvas();return this._fire(Vz,{node:this}),this.clearBeforeDraw()&&l.getContext().clear(),mr.prototype.drawScene.call(this,l,e,i),this._fire(kz,{node:this}),this}drawHit(t,e){const i=this.getLayer(),s=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),mr.prototype.drawHit.call(this,s,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){st.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return st.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return st.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Xf.prototype.nodeType="Layer";ni(Xf);Y.addGetterSetter(Xf,"imageSmoothingEnabled",!0);Y.addGetterSetter(Xf,"clearBeforeDraw",!0);Y.addGetterSetter(Xf,"hitGraphEnabled",!0,ql());class FS extends Xf{constructor(t){super(t),this.listening(!1),st.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}FS.prototype.nodeType="FastLayer";ni(FS);let xm=class extends mr{_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&st.throw("You may only add groups and shapes to groups.")}};xm.prototype.nodeType="Group";ni(xm);const V2=(function(){return Nf.performance&&Nf.performance.now?function(){return Nf.performance.now()}:function(){return new Date().getTime()}})();class tl{constructor(t,e){this.id=tl.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:V2(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){let e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}getLayers(){return this.layers}addLayer(t){const e=this.layers,i=e.length;for(let s=0;s<i;s++)if(e[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const e=tl.animations,i=e.length;for(let s=0;s<i;s++)if(e[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=V2(),tl._addAnimation(this),this}stop(){return tl._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const e=t.id,i=this.animations,s=i.length;for(let l=0;l<s;l++)if(i[l].id===e){this.animations.splice(l,1);break}}static _runFrames(){const t={},e=this.animations;for(let i=0;i<e.length;i++){const s=e[i],l=s.layers,c=s.func;s._updateFrameObject(V2());const f=l.length;let m;if(c?m=c.call(s,s.frame)!==!1:m=!0,!!m)for(let g=0;g<f;g++){const A=l[g];A._id!==void 0&&(t[A._id]=A)}}for(const i in t)t.hasOwnProperty(i)&&t[i].batchDraw()}static _animationLoop(){const t=tl;t.animations.length?(t._runFrames(),st.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,st.requestAnimFrame(this._animationLoop))}}tl.animations=[];tl.animIdCounter=0;tl.animRunning=!1;const Uz={node:1,duration:1,easing:1,onFinish:1,yoyo:1},zz=1,wb=2,xb=3,Nb=["fill","stroke","shadowColor"];let Bz=0;class jz{constructor(t,e,i,s,l,c,f){this.prop=t,this.propFunc=e,this.begin=s,this._pos=s,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=l-this.begin,this.pause()}fire(t){const e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=wb,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=xb,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===wb?this.setTime(t):this.state===xb&&this.setTime(this.duration-t)}pause(){this.state=zz,this.fire("onPause")}getTimer(){return new Date().getTime()}}class wn{constructor(t){const e=this,i=t.node,s=i._id,l=t.easing||Yg.Linear,c=!!t.yoyo;let f,m;typeof t.duration>"u"?f=.3:t.duration===0?f=.001:f=t.duration,this.node=i,this._id=Bz++;const g=i.getLayer()||(i instanceof Vt.Stage?i.getLayers():null);g||st.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new tl(function(){e.tween.onEnterFrame()},g),this.tween=new jz(m,function(A){e._tweenFunc(A)},l,0,1,f*1e3,c),this._addListeners(),wn.attrs[s]||(wn.attrs[s]={}),wn.attrs[s][this._id]||(wn.attrs[s][this._id]={}),wn.tweens[s]||(wn.tweens[s]={});for(m in t)Uz[m]===void 0&&this._addAttr(m,t[m]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){const i=this.node,s=i._id;let l,c,f,m,g;const A=wn.tweens[s][t];A&&delete wn.attrs[s][A][t];let E=i.getAttr(t);if(st._isArray(e))if(l=[],c=Math.max(e.length,E.length),t==="points"&&e.length!==E.length&&(e.length>E.length?(m=E,E=st._prepareArrayForTween(E,e,i.closed())):(f=e,e=st._prepareArrayForTween(e,E,i.closed()))),t.indexOf("fill")===0)for(let T=0;T<c;T++)if(T%2===0)l.push(e[T]-E[T]);else{const x=st.colorToRGBA(E[T]);g=st.colorToRGBA(e[T]),E[T]=x,l.push({r:g.r-x.r,g:g.g-x.g,b:g.b-x.b,a:g.a-x.a})}else for(let T=0;T<c;T++)l.push(e[T]-E[T]);else Nb.indexOf(t)!==-1?(E=st.colorToRGBA(E),g=st.colorToRGBA(e),l={r:g.r-E.r,g:g.g-E.g,b:g.b-E.b,a:g.a-E.a}):l=e-E;wn.attrs[s][this._id][t]={start:E,diff:l,end:e,trueEnd:f,trueStart:m},wn.tweens[s][t]=this._id}_tweenFunc(t){const e=this.node,i=wn.attrs[e._id][this._id];let s,l,c,f,m,g,A,E;for(s in i){if(l=i[s],c=l.start,f=l.diff,E=l.end,st._isArray(c))if(m=[],A=Math.max(c.length,E.length),s.indexOf("fill")===0)for(g=0;g<A;g++)g%2===0?m.push((c[g]||0)+f[g]*t):m.push("rgba("+Math.round(c[g].r+f[g].r*t)+","+Math.round(c[g].g+f[g].g*t)+","+Math.round(c[g].b+f[g].b*t)+","+(c[g].a+f[g].a*t)+")");else for(g=0;g<A;g++)m.push((c[g]||0)+f[g]*t);else Nb.indexOf(s)!==-1?m="rgba("+Math.round(c.r+f.r*t)+","+Math.round(c.g+f.g*t)+","+Math.round(c.b+f.b*t)+","+(c.a+f.a*t)+")":m=c+f*t;e.setAttr(s,m)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,e=wn.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,e=wn.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,e=this._id,i=wn.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const s in i)delete wn.tweens[t][s];delete wn.attrs[t][e],wn.tweens[t]&&(Object.keys(wn.tweens[t]).length===0&&delete wn.tweens[t],Object.keys(wn.attrs[t]).length===0&&delete wn.attrs[t])}}wn.attrs={};wn.tweens={};It.prototype.to=function(n){const t=n.onFinish;n.node=this,n.onFinish=function(){this.destroy(),t&&t()},new wn(n).play()};const Yg={BackEaseIn(n,t,e,i){return e*(n/=i)*n*((1.70158+1)*n-1.70158)+t},BackEaseOut(n,t,e,i){return e*((n=n/i-1)*n*((1.70158+1)*n+1.70158)+1)+t},BackEaseInOut(n,t,e,i){let s=1.70158;return(n/=i/2)<1?e/2*(n*n*(((s*=1.525)+1)*n-s))+t:e/2*((n-=2)*n*(((s*=1.525)+1)*n+s)+2)+t},ElasticEaseIn(n,t,e,i,s,l){let c=0;return n===0?t:(n/=i)===1?t+e:(l||(l=i*.3),!s||s<Math.abs(e)?(s=e,c=l/4):c=l/(2*Math.PI)*Math.asin(e/s),-(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/l))+t)},ElasticEaseOut(n,t,e,i,s,l){let c=0;return n===0?t:(n/=i)===1?t+e:(l||(l=i*.3),!s||s<Math.abs(e)?(s=e,c=l/4):c=l/(2*Math.PI)*Math.asin(e/s),s*Math.pow(2,-10*n)*Math.sin((n*i-c)*(2*Math.PI)/l)+e+t)},ElasticEaseInOut(n,t,e,i,s,l){let c=0;return n===0?t:(n/=i/2)===2?t+e:(l||(l=i*(.3*1.5)),!s||s<Math.abs(e)?(s=e,c=l/4):c=l/(2*Math.PI)*Math.asin(e/s),n<1?-.5*(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/l))+t:s*Math.pow(2,-10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/l)*.5+e+t)},BounceEaseOut(n,t,e,i){return(n/=i)<1/2.75?e*(7.5625*n*n)+t:n<2/2.75?e*(7.5625*(n-=1.5/2.75)*n+.75)+t:n<2.5/2.75?e*(7.5625*(n-=2.25/2.75)*n+.9375)+t:e*(7.5625*(n-=2.625/2.75)*n+.984375)+t},BounceEaseIn(n,t,e,i){return e-Yg.BounceEaseOut(i-n,0,e,i)+t},BounceEaseInOut(n,t,e,i){return n<i/2?Yg.BounceEaseIn(n*2,0,e,i)*.5+t:Yg.BounceEaseOut(n*2-i,0,e,i)*.5+e*.5+t},EaseIn(n,t,e,i){return e*(n/=i)*n+t},EaseOut(n,t,e,i){return-e*(n/=i)*(n-2)+t},EaseInOut(n,t,e,i){return(n/=i/2)<1?e/2*n*n+t:-e/2*(--n*(n-2)-1)+t},StrongEaseIn(n,t,e,i){return e*(n/=i)*n*n*n*n+t},StrongEaseOut(n,t,e,i){return e*((n=n/i-1)*n*n*n*n+1)+t},StrongEaseInOut(n,t,e,i){return(n/=i/2)<1?e/2*n*n*n*n*n+t:e/2*((n-=2)*n*n*n*n+2)+t},Linear(n,t,e,i){return e*n/i+t}},Nm=st._assign(Vt,{Util:st,Transform:fr,Node:It,Container:mr,Stage:gv,stages:qg,Layer:Xf,FastLayer:FS,Group:xm,DD:$e,Shape:Nt,shapes:Fg,Animation:tl,Tween:wn,Easings:Yg,Context:mv,Canvas:jS});class Gu extends Nt{_sceneFunc(t){const e=Vt.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,i),t.arc(0,0,this.innerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),i=this.clockwise(),s=Vt.getAngle(i?360-this.angle():this.angle()),l=Math.cos(Math.min(s,Math.PI)),c=1,f=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),m=Math.sin(Math.min(s,Math.PI/2)),g=l*(l>0?t:e),A=c*e,E=f*(f>0?t:e),T=m*(m>0?e:t);return{x:g,y:i?-1*T:E,width:A-g,height:T-E}}}Gu.prototype._centroid=!0;Gu.prototype.className="Arc";Gu.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];ni(Gu);Y.addGetterSetter(Gu,"innerRadius",0,Mt());Y.addGetterSetter(Gu,"outerRadius",0,Mt());Y.addGetterSetter(Gu,"angle",0,Mt());Y.addGetterSetter(Gu,"clockwise",!1,ql());function jA(n,t,e,i,s,l,c){const f=Math.sqrt(Math.pow(e-n,2)+Math.pow(i-t,2)),m=Math.sqrt(Math.pow(s-e,2)+Math.pow(l-i,2)),g=c*f/(f+m),A=c*m/(f+m),E=e-g*(s-n),T=i-g*(l-t),x=e+A*(s-n),w=i+A*(l-t);return[E,T,x,w]}function Db(n,t){const e=n.length,i=[];for(let s=2;s<e-2;s+=2){const l=jA(n[s-2],n[s-1],n[s],n[s+1],n[s+2],n[s+3],t);isNaN(l[0])||(i.push(l[0]),i.push(l[1]),i.push(n[s]),i.push(n[s+1]),i.push(l[2]),i.push(l[3]))}return i}function Hz(n){const t=[[n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]]],e=[];for(const i of t){const s=-3*i[0]+9*i[1]-9*i[2]+3*i[3];if(s!==0){const l=6*i[0]-12*i[1]+6*i[2],c=-3*i[0]+3*i[1],f=l*l-4*s*c;if(f>=0){const m=Math.sqrt(f);e.push((-l+m)/(2*s)),e.push((-l-m)/(2*s))}}}return e.filter(i=>i>0&&i<1).flatMap(i=>t.map(s=>{const l=1-i;return l*l*l*s[0]+3*l*l*i*s[1]+3*l*i*i*s[2]+i*i*i*s[3]}))}let qu=class extends Nt{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const e=this.points(),i=e.length,s=this.tension(),l=this.closed(),c=this.bezier();if(!i)return;let f=0;if(t.beginPath(),t.moveTo(e[0],e[1]),s!==0&&i>4){const m=this.getTensionPoints(),g=m.length;for(f=l?0:4,l||t.quadraticCurveTo(m[0],m[1],m[2],m[3]);f<g-2;)t.bezierCurveTo(m[f++],m[f++],m[f++],m[f++],m[f++],m[f++]);l||t.quadraticCurveTo(m[g-2],m[g-1],e[i-2],e[i-1])}else if(c)for(f=2;f<i;)t.bezierCurveTo(e[f++],e[f++],e[f++],e[f++],e[f++],e[f++]);else for(f=2;f<i;f+=2)t.lineTo(e[f],e[f+1]);l?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Db(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),e=t.length,i=this.tension(),s=jA(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),l=jA(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),c=Db(t,i);return[s[2],s[3]].concat(c).concat([l[0],l[1],t[e-2],t[e-1],l[2],l[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.bezier()?t=[t[0],t[1],...Hz(this.points()),t[t.length-2],t[t.length-1]]:t=this.points();let e=t[0],i=t[0],s=t[1],l=t[1],c,f;for(let m=0;m<t.length/2;m++)c=t[m*2],f=t[m*2+1],e=Math.min(e,c),i=Math.max(i,c),s=Math.min(s,f),l=Math.max(l,f);return{x:e,y:s,width:i-e,height:l-s}}};qu.prototype.className="Line";qu.prototype._attrsAffectingSize=["points","bezier","tension"];ni(qu);Y.addGetterSetter(qu,"closed",!1);Y.addGetterSetter(qu,"bezier",!1);Y.addGetterSetter(qu,"tension",0,Mt());Y.addGetterSetter(qu,"points",[],sz());const Gz=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],qz=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Fz=[[1],[1,1],[1,2,1],[1,3,3,1]],Ib=(n,t,e)=>{let i,s;const c=e/2;i=0;for(let f=0;f<20;f++)s=c*Gz[20][f]+c,i+=qz[20][f]*Yz(n,t,s);return c*i},Ob=(n,t,e)=>{e===void 0&&(e=1);const i=n[0]-2*n[1]+n[2],s=t[0]-2*t[1]+t[2],l=2*n[1]-2*n[0],c=2*t[1]-2*t[0],f=4*(i*i+s*s),m=4*(i*l+s*c),g=l*l+c*c;if(f===0)return e*Math.sqrt(Math.pow(n[2]-n[0],2)+Math.pow(t[2]-t[0],2));const A=m/(2*f),E=g/f,T=e+A,x=E-A*A,w=T*T+x>0?Math.sqrt(T*T+x):0,I=A*A+x>0?Math.sqrt(A*A+x):0,L=A+Math.sqrt(A*A+x)!==0?x*Math.log(Math.abs((T+w)/(A+I))):0;return Math.sqrt(f)/2*(T*w-A*I+L)};function Yz(n,t,e){const i=HA(1,e,n),s=HA(1,e,t),l=i*i+s*s;return Math.sqrt(l)}const HA=(n,t,e)=>{const i=e.length-1;let s,l;if(i===0)return 0;if(n===0){l=0;for(let c=0;c<=i;c++)l+=Fz[i][c]*Math.pow(1-t,i-c)*Math.pow(t,c)*e[c];return l}else{s=new Array(i);for(let c=0;c<i;c++)s[c]=i*(e[c+1]-e[c]);return HA(n-1,t,s)}},Mb=(n,t,e)=>{let i=1,s=n/t,l=(n-e(s))/t,c=0;for(;i>.001;){const f=e(s+l),m=Math.abs(n-f)/t;if(m<i)i=m,s+=l;else{const g=e(s-l),A=Math.abs(n-g)/t;A<i?(i=A,s-=l):l/=2}if(c++,c>500)break}return s};class xn extends Nt{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=xn.parsePathData(this.data()),this.pathLength=xn.getPathLength(this.dataArray)}_sceneFunc(t){const e=this.dataArray;t.beginPath();let i=!1;for(let s=0;s<e.length;s++){const l=e[s].command,c=e[s].points;switch(l){case"L":t.lineTo(c[0],c[1]);break;case"M":t.moveTo(c[0],c[1]);break;case"C":t.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":t.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":const f=c[0],m=c[1],g=c[2],A=c[3],E=c[4],T=c[5],x=c[6],w=c[7],I=g>A?g:A,L=g>A?1:g/A,B=g>A?A/g:1;t.translate(f,m),t.rotate(x),t.scale(L,B),t.arc(0,0,I,E,E+T,1-w),t.scale(1/L,1/B),t.rotate(-x),t.translate(-f,-m);break;case"z":i=!0,t.closePath();break}}!i&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(m){if(m.command==="A"){const g=m.points[4],A=m.points[5],E=m.points[4]+A;let T=Math.PI/180;if(Math.abs(g-E)<T&&(T=Math.abs(g-E)),A<0)for(let x=g-T;x>E;x-=T){const w=xn.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],x,0);t.push(w.x,w.y)}else for(let x=g+T;x<E;x+=T){const w=xn.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],x,0);t.push(w.x,w.y)}}else if(m.command==="C")for(let g=0;g<=1;g+=.01){const A=xn.getPointOnCubicBezier(g,m.start.x,m.start.y,m.points[0],m.points[1],m.points[2],m.points[3],m.points[4],m.points[5]);t.push(A.x,A.y)}else t=t.concat(m.points)});let e=t[0],i=t[0],s=t[1],l=t[1],c,f;for(let m=0;m<t.length/2;m++)c=t[m*2],f=t[m*2+1],isNaN(c)||(e=Math.min(e,c),i=Math.max(i,c)),isNaN(f)||(s=Math.min(s,f),l=Math.max(l,f));return{x:e,y:s,width:i-e,height:l-s}}getLength(){return this.pathLength}getPointAtLength(t){return xn.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,e,i,s){return Math.sqrt((i-t)*(i-t)+(s-e)*(s-e))}static getPathLength(t){let e=0;for(let i=0;i<t.length;++i)e+=t[i].pathLength;return e}static getPointAtLengthOfDataArray(t,e){let i,s=0,l=e.length;if(!l)return null;for(;s<l&&t>e[s].pathLength;)t-=e[s].pathLength,++s;if(s===l)return i=e[s-1].points.slice(-2),{x:i[0],y:i[1]};if(t<.01)return e[s].command==="M"?(i=e[s].points.slice(0,2),{x:i[0],y:i[1]}):{x:e[s].start.x,y:e[s].start.y};const c=e[s],f=c.points;switch(c.command){case"L":return xn.getPointOnLine(t,c.start.x,c.start.y,f[0],f[1]);case"C":return xn.getPointOnCubicBezier(Mb(t,xn.getPathLength(e),I=>Ib([c.start.x,f[0],f[2],f[4]],[c.start.y,f[1],f[3],f[5]],I)),c.start.x,c.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return xn.getPointOnQuadraticBezier(Mb(t,xn.getPathLength(e),I=>Ob([c.start.x,f[0],f[2]],[c.start.y,f[1],f[3]],I)),c.start.x,c.start.y,f[0],f[1],f[2],f[3]);case"A":const m=f[0],g=f[1],A=f[2],E=f[3],T=f[5],x=f[6];let w=f[4];return w+=T*t/c.pathLength,xn.getPointOnEllipticalArc(m,g,A,E,w,x)}return null}static getPointOnLine(t,e,i,s,l,c,f){c=c??e,f=f??i;const m=this.getLineLength(e,i,s,l);if(m<1e-10)return{x:e,y:i};if(s===e)return{x:c,y:f+(l>i?t:-t)};const g=(l-i)/(s-e),A=Math.sqrt(t*t/(1+g*g))*(s<e?-1:1),E=g*A;if(Math.abs(f-i-g*(c-e))<1e-10)return{x:c+A,y:f+E};const T=((c-e)*(s-e)+(f-i)*(l-i))/(m*m),x=e+T*(s-e),w=i+T*(l-i),I=this.getLineLength(c,f,x,w),L=Math.sqrt(t*t-I*I),B=Math.sqrt(L*L/(1+g*g))*(s<e?-1:1),j=g*B;return{x:x+B,y:w+j}}static getPointOnCubicBezier(t,e,i,s,l,c,f,m,g){function A(L){return L*L*L}function E(L){return 3*L*L*(1-L)}function T(L){return 3*L*(1-L)*(1-L)}function x(L){return(1-L)*(1-L)*(1-L)}const w=m*A(t)+c*E(t)+s*T(t)+e*x(t),I=g*A(t)+f*E(t)+l*T(t)+i*x(t);return{x:w,y:I}}static getPointOnQuadraticBezier(t,e,i,s,l,c,f){function m(x){return x*x}function g(x){return 2*x*(1-x)}function A(x){return(1-x)*(1-x)}const E=c*m(t)+s*g(t)+e*A(t),T=f*m(t)+l*g(t)+i*A(t);return{x:E,y:T}}static getPointOnEllipticalArc(t,e,i,s,l,c){const f=Math.cos(c),m=Math.sin(c),g={x:i*Math.cos(l),y:s*Math.sin(l)};return{x:t+(g.x*f-g.y*m),y:e+(g.x*m+g.y*f)}}static parsePathData(t){if(!t)return[];let e=t;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(let E=0;E<i.length;E++)e=e.replace(new RegExp(i[E],"g"),"|"+i[E]);const s=e.split("|"),l=[],c=[];let f=0,m=0;const g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let A;for(let E=1;E<s.length;E++){let T=s[E],x=T.charAt(0);for(T=T.slice(1),c.length=0;A=g.exec(T);)c.push(A[0]);let w=[],I=x==="A"||x==="a"?0:-1;for(let L=0,B=c.length;L<B;L++){const j=c[L];if(j==="00"){w.push(0,0),I>=0&&(I+=2,I>=7&&(I-=7));continue}if(I>=0){if(I===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(j)){w.push(parseInt(j[0],10)),w.push(parseInt(j[1],10)),w.push(parseFloat(j.slice(2))),I+=3,I>=7&&(I-=7);continue}if(j==="11"||j==="10"||j==="01"){w.push(parseInt(j[0],10)),w.push(parseInt(j[1],10)),I+=2,I>=7&&(I-=7);continue}if(j==="0"||j==="1"){w.push(parseInt(j,10)),I+=1,I>=7&&(I-=7);continue}}else if(I===4){if(/^[01]\d+(?:\.\d+)?$/.test(j)){w.push(parseInt(j[0],10)),w.push(parseFloat(j.slice(1))),I+=2,I>=7&&(I-=7);continue}if(j==="0"||j==="1"){w.push(parseInt(j,10)),I+=1,I>=7&&(I-=7);continue}}const q=parseFloat(j);isNaN(q)?w.push(0):w.push(q),I+=1,I>=7&&(I-=7)}else{const q=parseFloat(j);isNaN(q)?w.push(0):w.push(q)}}for(;w.length>0&&!isNaN(w[0]);){let L="",B=[];const j=f,q=m;let $,Z,nt,P,M,z,F,X,Q,G;switch(x){case"l":f+=w.shift(),m+=w.shift(),L="L",B.push(f,m);break;case"L":f=w.shift(),m=w.shift(),B.push(f,m);break;case"m":const Yt=w.shift(),Pt=w.shift();if(f+=Yt,m+=Pt,L="M",l.length>2&&l[l.length-1].command==="z"){for(let et=l.length-2;et>=0;et--)if(l[et].command==="M"){f=l[et].points[0]+Yt,m=l[et].points[1]+Pt;break}}B.push(f,m),x="l";break;case"M":f=w.shift(),m=w.shift(),L="M",B.push(f,m),x="L";break;case"h":f+=w.shift(),L="L",B.push(f,m);break;case"H":f=w.shift(),L="L",B.push(f,m);break;case"v":m+=w.shift(),L="L",B.push(f,m);break;case"V":m=w.shift(),L="L",B.push(f,m);break;case"C":B.push(w.shift(),w.shift(),w.shift(),w.shift()),f=w.shift(),m=w.shift(),B.push(f,m);break;case"c":B.push(f+w.shift(),m+w.shift(),f+w.shift(),m+w.shift()),f+=w.shift(),m+=w.shift(),L="C",B.push(f,m);break;case"S":Z=f,nt=m,$=l[l.length-1],$.command==="C"&&(Z=f+(f-$.points[2]),nt=m+(m-$.points[3])),B.push(Z,nt,w.shift(),w.shift()),f=w.shift(),m=w.shift(),L="C",B.push(f,m);break;case"s":Z=f,nt=m,$=l[l.length-1],$.command==="C"&&(Z=f+(f-$.points[2]),nt=m+(m-$.points[3])),B.push(Z,nt,f+w.shift(),m+w.shift()),f+=w.shift(),m+=w.shift(),L="C",B.push(f,m);break;case"Q":B.push(w.shift(),w.shift()),f=w.shift(),m=w.shift(),B.push(f,m);break;case"q":B.push(f+w.shift(),m+w.shift()),f+=w.shift(),m+=w.shift(),L="Q",B.push(f,m);break;case"T":Z=f,nt=m,$=l[l.length-1],$.command==="Q"&&(Z=f+(f-$.points[0]),nt=m+(m-$.points[1])),f=w.shift(),m=w.shift(),L="Q",B.push(Z,nt,f,m);break;case"t":Z=f,nt=m,$=l[l.length-1],$.command==="Q"&&(Z=f+(f-$.points[0]),nt=m+(m-$.points[1])),f+=w.shift(),m+=w.shift(),L="Q",B.push(Z,nt,f,m);break;case"A":P=w.shift(),M=w.shift(),z=w.shift(),F=w.shift(),X=w.shift(),Q=f,G=m,f=w.shift(),m=w.shift(),L="A",B=this.convertEndpointToCenterParameterization(Q,G,f,m,F,X,P,M,z);break;case"a":P=w.shift(),M=w.shift(),z=w.shift(),F=w.shift(),X=w.shift(),Q=f,G=m,f+=w.shift(),m+=w.shift(),L="A",B=this.convertEndpointToCenterParameterization(Q,G,f,m,F,X,P,M,z);break}l.push({command:L||x,points:B,start:{x:j,y:q},pathLength:this.calcLength(j,q,L||x,B)})}(x==="z"||x==="Z")&&l.push({command:"z",points:[],start:void 0,pathLength:0})}return l}static calcLength(t,e,i,s){let l,c,f,m;const g=xn;switch(i){case"L":return g.getLineLength(t,e,s[0],s[1]);case"C":return Ib([t,s[0],s[2],s[4]],[e,s[1],s[3],s[5]],1);case"Q":return Ob([t,s[0],s[2]],[e,s[1],s[3]],1);case"A":l=0;const A=s[4],E=s[5],T=s[4]+E;let x=Math.PI/180;if(Math.abs(A-T)<x&&(x=Math.abs(A-T)),c=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],A,0),E<0)for(m=A-x;m>T;m-=x)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),l+=g.getLineLength(c.x,c.y,f.x,f.y),c=f;else for(m=A+x;m<T;m+=x)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),l+=g.getLineLength(c.x,c.y,f.x,f.y),c=f;return f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],T,0),l+=g.getLineLength(c.x,c.y,f.x,f.y),l}return 0}static convertEndpointToCenterParameterization(t,e,i,s,l,c,f,m,g){const A=g*(Math.PI/180),E=Math.cos(A)*(t-i)/2+Math.sin(A)*(e-s)/2,T=-1*Math.sin(A)*(t-i)/2+Math.cos(A)*(e-s)/2,x=E*E/(f*f)+T*T/(m*m);x>1&&(f*=Math.sqrt(x),m*=Math.sqrt(x));let w=Math.sqrt((f*f*(m*m)-f*f*(T*T)-m*m*(E*E))/(f*f*(T*T)+m*m*(E*E)));l===c&&(w*=-1),isNaN(w)&&(w=0);const I=w*f*T/m,L=w*-m*E/f,B=(t+i)/2+Math.cos(A)*I-Math.sin(A)*L,j=(e+s)/2+Math.sin(A)*I+Math.cos(A)*L,q=function(F){return Math.sqrt(F[0]*F[0]+F[1]*F[1])},$=function(F,X){return(F[0]*X[0]+F[1]*X[1])/(q(F)*q(X))},Z=function(F,X){return(F[0]*X[1]<F[1]*X[0]?-1:1)*Math.acos($(F,X))},nt=Z([1,0],[(E-I)/f,(T-L)/m]),P=[(E-I)/f,(T-L)/m],M=[(-1*E-I)/f,(-1*T-L)/m];let z=Z(P,M);return $(P,M)<=-1&&(z=Math.PI),$(P,M)>=1&&(z=0),c===0&&z>0&&(z=z-2*Math.PI),c===1&&z<0&&(z=z+2*Math.PI),[B,j,f,m,nt,z,A,c]}}xn.prototype.className="Path";xn.prototype._attrsAffectingSize=["data"];ni(xn);Y.addGetterSetter(xn,"data");class Kf extends qu{_sceneFunc(t){super._sceneFunc(t);const e=Math.PI*2,i=this.points();let s=i;const l=this.tension()!==0&&i.length>4;l&&(s=this.getTensionPoints());const c=this.pointerLength(),f=i.length;let m,g;if(l){const T=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],i[f-2],i[f-1]],x=xn.calcLength(s[s.length-4],s[s.length-3],"C",T),w=xn.getPointOnQuadraticBezier(Math.min(1,1-c/x),T[0],T[1],T[2],T[3],T[4],T[5]);m=i[f-2]-w.x,g=i[f-1]-w.y}else m=i[f-2]-i[f-4],g=i[f-1]-i[f-3];const A=(Math.atan2(g,m)+e)%e,E=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[f-2],i[f-1]),t.rotate(A),t.moveTo(0,0),t.lineTo(-c,E/2),t.lineTo(-c,-E/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),l?(m=(s[0]+s[2])/2-i[0],g=(s[1]+s[3])/2-i[1]):(m=i[2]-i[0],g=i[3]-i[1]),t.rotate((Math.atan2(-g,-m)+e)%e),t.moveTo(0,0),t.lineTo(-c,E/2),t.lineTo(-c,-E/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x,y:t.y-e,width:t.width,height:t.height+e*2}}}Kf.prototype.className="Arrow";ni(Kf);Y.addGetterSetter(Kf,"pointerLength",10,Mt());Y.addGetterSetter(Kf,"pointerWidth",10,Mt());Y.addGetterSetter(Kf,"pointerAtBeginning",!1);Y.addGetterSetter(Kf,"pointerAtEnding",!0);let Qm=class extends Nt{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}};Qm.prototype._centroid=!0;Qm.prototype.className="Circle";Qm.prototype._attrsAffectingSize=["radius"];ni(Qm);Y.addGetterSetter(Qm,"radius",0,Mt());let Sh=class extends Nt{_sceneFunc(t){const e=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}};Sh.prototype.className="Ellipse";Sh.prototype._centroid=!0;Sh.prototype._attrsAffectingSize=["radiusX","radiusY"];ni(Sh);Y.addComponentsGetterSetter(Sh,"radius",["x","y"]);Y.addGetterSetter(Sh,"radiusX",0,Mt());Y.addGetterSetter(Sh,"radiusY",0,Mt());let Fl=class O8 extends Nt{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",e=>{this._removeImageLoad(e.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),e=this.hasShadow();return t&&e?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),i=this.getHeight(),s=this.cornerRadius(),l=this.attrs.image;let c;if(l){const f=this.attrs.cropWidth,m=this.attrs.cropHeight;f&&m?c=[l,this.cropX(),this.cropY(),f,m,0,0,e,i]:c=[l,0,0,e,i]}(this.hasFill()||this.hasStroke()||s)&&(t.beginPath(),s?st.drawRoundedRectPath(t,e,i,s):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)),l&&(s&&t.clip(),t.drawImage.apply(t,c))}_hitFunc(t){const e=this.width(),i=this.height(),s=this.cornerRadius();t.beginPath(),s?st.drawRoundedRectPath(t,e,i,s):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e,i;return(i=(t=this.attrs.width)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.width)!==null&&i!==void 0?i:0}getHeight(){var t,e,i;return(i=(t=this.attrs.height)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.height)!==null&&i!==void 0?i:0}static fromURL(t,e,i=null){const s=st.createImageElement();s.onload=function(){const l=new O8({image:s});e(l)},s.onerror=i,s.crossOrigin="Anonymous",s.src=t}};Fl.prototype.className="Image";Fl.prototype._attrsAffectingSize=["image"];ni(Fl);Y.addGetterSetter(Fl,"cornerRadius",0,pv(4));Y.addGetterSetter(Fl,"image");Y.addComponentsGetterSetter(Fl,"crop",["x","y","width","height"]);Y.addGetterSetter(Fl,"cropX",0,Mt());Y.addGetterSetter(Fl,"cropY",0,Mt());Y.addGetterSetter(Fl,"cropWidth",0,Mt());Y.addGetterSetter(Fl,"cropHeight",0,Mt());const M8=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Qz="Change.konva",Xz="none",GA="up",qA="right",FA="down",YA="left",Kz=M8.length;class YS extends xm{constructor(t){super(t),this.on("add.konva",function(e){this._addListeners(e.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let e=this,i;const s=function(){e._sync()};for(i=0;i<Kz;i++)t.on(M8[i]+Qz,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),e=this.getTag(),i,s,l,c,f,m,g;if(t&&e){switch(i=t.width(),s=t.height(),l=e.pointerDirection(),c=e.pointerWidth(),g=e.pointerHeight(),f=0,m=0,l){case GA:f=i/2,m=-1*g;break;case qA:f=i+c,m=s/2;break;case FA:f=i/2,m=s+g;break;case YA:f=-1*c,m=s/2;break}e.setAttrs({x:-1*f,y:-1*m,width:i,height:s}),t.setAttrs({x:-1*f,y:-1*m})}}}YS.prototype.className="Label";ni(YS);class Wf extends Nt{_sceneFunc(t){const e=this.width(),i=this.height(),s=this.pointerDirection(),l=this.pointerWidth(),c=this.pointerHeight(),f=this.cornerRadius();let m=0,g=0,A=0,E=0;typeof f=="number"?m=g=A=E=Math.min(f,e/2,i/2):(m=Math.min(f[0]||0,e/2,i/2),g=Math.min(f[1]||0,e/2,i/2),E=Math.min(f[2]||0,e/2,i/2),A=Math.min(f[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(m,0),s===GA&&(t.lineTo((e-l)/2,0),t.lineTo(e/2,-1*c),t.lineTo((e+l)/2,0)),t.lineTo(e-g,0),t.arc(e-g,g,g,Math.PI*3/2,0,!1),s===qA&&(t.lineTo(e,(i-c)/2),t.lineTo(e+l,i/2),t.lineTo(e,(i+c)/2)),t.lineTo(e,i-E),t.arc(e-E,i-E,E,0,Math.PI/2,!1),s===FA&&(t.lineTo((e+l)/2,i),t.lineTo(e/2,i+c),t.lineTo((e-l)/2,i)),t.lineTo(A,i),t.arc(A,i-A,A,Math.PI/2,Math.PI,!1),s===YA&&(t.lineTo(0,(i+c)/2),t.lineTo(-1*l,i/2),t.lineTo(0,(i-c)/2)),t.lineTo(0,m),t.arc(m,m,m,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,e=0,i=this.pointerWidth(),s=this.pointerHeight(),l=this.pointerDirection(),c=this.width(),f=this.height();return l===GA?(e-=s,f+=s):l===FA?f+=s:l===YA?(t-=i*1.5,c+=i):l===qA&&(c+=i*1.5),{x:t,y:e,width:c,height:f}}}Wf.prototype.className="Tag";ni(Wf);Y.addGetterSetter(Wf,"pointerDirection",Xz);Y.addGetterSetter(Wf,"pointerWidth",0,Mt());Y.addGetterSetter(Wf,"pointerHeight",0,Mt());Y.addGetterSetter(Wf,"cornerRadius",0,pv(4));let j0=class extends Nt{_sceneFunc(t){const e=this.cornerRadius(),i=this.width(),s=this.height();t.beginPath(),e?st.drawRoundedRectPath(t,i,s,e):t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)}};j0.prototype.className="Rect";ni(j0);Y.addGetterSetter(j0,"cornerRadius",0,pv(4));class Th extends Nt{_sceneFunc(t){const e=this._getPoints(),i=this.radius(),s=this.sides(),l=this.cornerRadius();if(t.beginPath(),l)st.drawRoundedPolygonPath(t,e,s,i,l);else{t.moveTo(e[0].x,e[0].y);for(let c=1;c<e.length;c++)t.lineTo(e[c].x,e[c].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,i=[];for(let s=0;s<t;s++)i.push({x:e*Math.sin(s*2*Math.PI/t),y:-1*e*Math.cos(s*2*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();let e=t[0].x,i=t[0].x,s=t[0].y,l=t[0].y;return t.forEach(c=>{e=Math.min(e,c.x),i=Math.max(i,c.x),s=Math.min(s,c.y),l=Math.max(l,c.y)}),{x:e,y:s,width:i-e,height:l-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Th.prototype.className="RegularPolygon";Th.prototype._centroid=!0;Th.prototype._attrsAffectingSize=["radius"];ni(Th);Y.addGetterSetter(Th,"radius",0,Mt());Y.addGetterSetter(Th,"sides",0,Mt());Y.addGetterSetter(Th,"cornerRadius",0,pv(4));const Lb=Math.PI*2;class Jf extends Nt{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Lb,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Lb,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Jf.prototype.className="Ring";Jf.prototype._centroid=!0;Jf.prototype._attrsAffectingSize=["innerRadius","outerRadius"];ni(Jf);Y.addGetterSetter(Jf,"innerRadius",0,Mt());Y.addGetterSetter(Jf,"outerRadius",0,Mt());class zo extends Nt{constructor(t){super(t),this._updated=!0,this.anim=new tl(()=>{const e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const e=this.animation(),i=this.frameIndex(),s=i*4,l=this.animations()[e],c=this.frameOffsets(),f=l[s+0],m=l[s+1],g=l[s+2],A=l[s+3],E=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,g,A),t.closePath(),t.fillStrokeShape(this)),E)if(c){const T=c[e],x=i*2;t.drawImage(E,f,m,g,A,T[x+0],T[x+1],g,A)}else t.drawImage(E,f,m,g,A,0,0,g,A)}_hitFunc(t){const e=this.animation(),i=this.frameIndex(),s=i*4,l=this.animations()[e],c=this.frameOffsets(),f=l[s+2],m=l[s+3];if(t.beginPath(),c){const g=c[e],A=i*2;t.rect(g[A+0],g[A+1],f,m)}else t.rect(0,0,f,m);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),e=this.animation(),i=this.animations(),s=i[e],l=s.length/4;t<l-1?this.frameIndex(t+1):this.frameIndex(0)}}zo.prototype.className="Sprite";ni(zo);Y.addGetterSetter(zo,"animation");Y.addGetterSetter(zo,"animations");Y.addGetterSetter(zo,"frameOffsets");Y.addGetterSetter(zo,"image");Y.addGetterSetter(zo,"frameIndex",0,Mt());Y.addGetterSetter(zo,"frameRate",17,Mt());Y.backCompat(zo,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class bh extends Nt{_sceneFunc(t){const e=this.innerRadius(),i=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(let l=1;l<s*2;l++){const c=l%2===0?i:e,f=c*Math.sin(l*Math.PI/s),m=-1*c*Math.cos(l*Math.PI/s);t.lineTo(f,m)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}bh.prototype.className="Star";bh.prototype._centroid=!0;bh.prototype._attrsAffectingSize=["innerRadius","outerRadius"];ni(bh);Y.addGetterSetter(bh,"numPoints",5,Mt());Y.addGetterSetter(bh,"innerRadius",0,Mt());Y.addGetterSetter(bh,"outerRadius",0,Mt());function Gc(n){return[...n].reduce((t,e,i,s)=>{if(new RegExp("\\p{Emoji}","u").test(e)){const l=s[i+1];l&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(l)?(t.push(e+l),s[i+1]=""):t.push(e)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(e+(s[i+1]||""))?t.push(e+s[i+1]):i>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(e)?t[t.length-1]+=e:e&&t.push(e);return t},[])}const Jd="auto",Wz="center",L8="inherit",_g="justify",Jz="Change.konva",Zz="2d",Vb="-",V8="left",$z="text",tB="Text",eB="top",nB="bottom",kb="middle",k8="normal",iB="px ",by=" ",sB="right",Pb="rtl",aB="word",rB="char",Ub="none",k2="",P8=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],lB=P8.length;function oB(n){return n.split(",").map(t=>{t=t.trim();const e=t.indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!i&&(t=`"${t}"`),t}).join(", ")}let Cy;function P2(){return Cy||(Cy=st.createCanvasElement().getContext(Zz),Cy)}function uB(n){n.fillText(this._partialText,this._partialTextX,this._partialTextY)}function cB(n){n.setAttr("miterLimit",2),n.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function hB(n){return n=n||{},!n.fillLinearGradientColorStops&&!n.fillRadialGradientColorStops&&!n.fillPatternImage&&(n.fill=n.fill||"black"),n}let Nn=class extends Nt{constructor(t){super(hB(t)),this._partialTextX=0,this._partialTextY=0;for(let e=0;e<lB;e++)this.on(P8[e]+Jz,this._setTextData);this._setTextData()}_sceneFunc(t){var e,i;const s=this.textArr,l=s.length;if(!this.text())return;let c=this.padding(),f=this.fontSize(),m=this.lineHeight()*f,g=this.verticalAlign(),A=this.direction(),E=0,T=this.align(),x=this.getWidth(),w=this.letterSpacing(),I=this.charRenderFunc(),L=this.fill(),B=this.textDecoration(),j=this.underlineOffset(),q=B.indexOf("underline")!==-1,$=B.indexOf("line-through")!==-1,Z;A=A===L8?t.direction:A;let nt=m/2,P=kb;if(!Vt.legacyTextRendering){const M=this.measureSize("M");P="alphabetic";const z=(e=M.fontBoundingBoxAscent)!==null&&e!==void 0?e:M.actualBoundingBoxAscent,F=(i=M.fontBoundingBoxDescent)!==null&&i!==void 0?i:M.actualBoundingBoxDescent;nt=(z-F)/2+m/2}for(A===Pb&&t.setAttr("direction",A),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",P),t.setAttr("textAlign",V8),g===kb?E=(this.getHeight()-l*m-c*2)/2:g===nB&&(E=this.getHeight()-l*m-c*2),t.translate(c,E+c),Z=0;Z<l;Z++){let M=0,z=0;const F=s[Z],X=F.text,Q=F.width,G=F.lastInParagraph;if(t.save(),T===sB?M+=x-Q-c*2:T===Wz&&(M+=(x-Q-c*2)/2),q){t.save(),t.beginPath();const Pt=j??(Vt.legacyTextRendering?Math.round(f/2):Math.round(f/4)),et=M,vt=nt+z+Pt;t.moveTo(et,vt);const St=T===_g&&!G?x-c*2:Q;t.lineTo(et+Math.round(St),vt),t.lineWidth=f/15;const Ut=this._getLinearGradient();t.strokeStyle=Ut||L,t.stroke(),t.restore()}const Yt=M;if(A!==Pb&&(w!==0||T===_g||I)){const Pt=X.split(" ").length-1,et=Gc(X);for(let vt=0;vt<et.length;vt++){const St=et[vt];if(St===" "&&!G&&T===_g&&(M+=(x-c*2-Q)/Pt),this._partialTextX=M,this._partialTextY=nt+z,this._partialText=St,I){t.save();const Qt=s.slice(0,Z).reduce((ft,yt)=>ft+Gc(yt.text).length,0),K=vt+Qt;I({char:St,index:K,x:M,y:nt+z,lineIndex:Z,column:vt,isLastInLine:G,width:this.measureSize(St).width,context:t})}t.fillStrokeShape(this),I&&t.restore(),M+=this.measureSize(St).width+w}}else w!==0&&t.setAttr("letterSpacing",`${w}px`),this._partialTextX=M,this._partialTextY=nt+z,this._partialText=X,t.fillStrokeShape(this);if($){t.save(),t.beginPath();const Pt=Vt.legacyTextRendering?0:-Math.round(f/4),et=Yt;t.moveTo(et,nt+z+Pt);const vt=T===_g&&!G?x-c*2:Q;t.lineTo(et+Math.round(vt),nt+z+Pt),t.lineWidth=f/15;const St=this._getLinearGradient();t.strokeStyle=St||L,t.stroke(),t.restore()}t.restore(),l>1&&(nt+=m)}}_hitFunc(t){const e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}setText(t){const e=st._isString(t)?t:t==null?"":t+"";return this._setAttr($z,e),this}getWidth(){return this.attrs.width===Jd||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Jd||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return st.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,i,s,l,c,f,m,g,A,E,T;let x=P2(),w=this.fontSize(),I;x.save(),x.font=this._getContextFont(),I=x.measureText(t),x.restore();const L=w/100;return{actualBoundingBoxAscent:(e=I.actualBoundingBoxAscent)!==null&&e!==void 0?e:71.58203125*L,actualBoundingBoxDescent:(i=I.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(s=I.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*L,actualBoundingBoxRight:(l=I.actualBoundingBoxRight)!==null&&l!==void 0?l:75.732421875*L,alphabeticBaseline:(c=I.alphabeticBaseline)!==null&&c!==void 0?c:0,emHeightAscent:(f=I.emHeightAscent)!==null&&f!==void 0?f:100*L,emHeightDescent:(m=I.emHeightDescent)!==null&&m!==void 0?m:-20*L,fontBoundingBoxAscent:(g=I.fontBoundingBoxAscent)!==null&&g!==void 0?g:91*L,fontBoundingBoxDescent:(A=I.fontBoundingBoxDescent)!==null&&A!==void 0?A:21*L,hangingBaseline:(E=I.hangingBaseline)!==null&&E!==void 0?E:72.80000305175781*L,ideographicBaseline:(T=I.ideographicBaseline)!==null&&T!==void 0?T:-21*L,width:I.width,height:w}}_getContextFont(){return this.fontStyle()+by+this.fontVariant()+by+(this.fontSize()+iB)+oB(this.fontFamily())}_addTextLine(t){this.align()===_g&&(t=t.trim());const i=this._getTextWidth(t);return this.textArr.push({text:t,width:i,lastInParagraph:!1})}_getTextWidth(t){const e=this.letterSpacing(),i=t.length;return P2().measureText(t).width+e*i}_setTextData(){let t=this.text().split(`
`),e=+this.fontSize(),i=0,s=this.lineHeight()*e,l=this.attrs.width,c=this.attrs.height,f=l!==Jd&&l!==void 0,m=c!==Jd&&c!==void 0,g=this.padding(),A=l-g*2,E=c-g*2,T=0,x=this.wrap(),w=x!==Ub,I=x!==rB&&w,L=this.ellipsis();this.textArr=[],P2().font=this._getContextFont();const B=L?this._getTextWidth(k2):0;for(let j=0,q=t.length;j<q;++j){let $=t[j],Z=this._getTextWidth($);if(f&&Z>A)for(;$.length>0;){let nt=0,P=Gc($).length,M="",z=0;for(;nt<P;){const F=nt+P>>>1,X=Gc($),Q=X.slice(0,F+1).join(""),G=this._getTextWidth(Q);(L&&m&&T+s>E?G+B:G)<=A?(nt=F+1,M=Q,z=G):P=F}if(M){if(I){const Q=Gc($),G=Gc(M),Yt=Q[G.length],Pt=Yt===by||Yt===Vb;let et;if(Pt&&z<=A)et=G.length;else{const vt=G.lastIndexOf(by),St=G.lastIndexOf(Vb);et=Math.max(vt,St)+1}et>0&&(nt=et,M=Q.slice(0,nt).join(""),z=this._getTextWidth(M))}if(M=M.trimRight(),this._addTextLine(M),i=Math.max(i,z),T+=s,this._shouldHandleEllipsis(T)){this._tryToAddEllipsisToLastLine();break}if($=Gc($).slice(nt).join("").trimLeft(),$.length>0&&(Z=this._getTextWidth($),Z<=A)){this._addTextLine($),T+=s,i=Math.max(i,Z);break}}else break}else this._addTextLine($),T+=s,i=Math.max(i,Z),this._shouldHandleEllipsis(T)&&j<q-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),m&&T+s>E)break}this.textHeight=e,this.textWidth=i}_shouldHandleEllipsis(t){const e=+this.fontSize(),i=this.lineHeight()*e,s=this.attrs.height,l=s!==Jd&&s!==void 0,c=this.padding(),f=s-c*2;return!(this.wrap()!==Ub)||l&&t+i>f}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,e=t!==Jd&&t!==void 0,i=this.padding(),s=t-i*2,l=this.ellipsis(),c=this.textArr[this.textArr.length-1];!c||!l||(e&&(this._getTextWidth(c.text+k2)<s||(c.text=c.text.slice(0,c.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+k2))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,e=this.hasShadow();return t&&e?!0:super._useBufferCanvas()}};Nn.prototype._fillFunc=uB;Nn.prototype._strokeFunc=cB;Nn.prototype.className=tB;Nn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];ni(Nn);Y.overWriteSetter(Nn,"width",GS());Y.overWriteSetter(Nn,"height",GS());Y.addGetterSetter(Nn,"direction",L8);Y.addGetterSetter(Nn,"fontFamily","Arial");Y.addGetterSetter(Nn,"fontSize",12,Mt());Y.addGetterSetter(Nn,"fontStyle",k8);Y.addGetterSetter(Nn,"fontVariant",k8);Y.addGetterSetter(Nn,"padding",0,Mt());Y.addGetterSetter(Nn,"align",V8);Y.addGetterSetter(Nn,"verticalAlign",eB);Y.addGetterSetter(Nn,"lineHeight",1,Mt());Y.addGetterSetter(Nn,"wrap",aB);Y.addGetterSetter(Nn,"ellipsis",!1,ql());Y.addGetterSetter(Nn,"letterSpacing",0,Mt());Y.addGetterSetter(Nn,"text","",Qf());Y.addGetterSetter(Nn,"textDecoration","");Y.addGetterSetter(Nn,"underlineOffset",void 0,Mt());Y.addGetterSetter(Nn,"charRenderFunc",void 0);const fB="",U8="normal";function z8(n){n.fillText(this.partialText,0,0)}function B8(n){n.strokeText(this.partialText,0,0)}class Fi extends Nt{constructor(t){super(t),this.dummyCanvas=st.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return xn.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const e=this.pathLength;return t>e?null:xn.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=xn.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const e=this.textDecoration(),i=this.fill(),s=this.fontSize(),l=this.glyphInfo,c=e.indexOf("underline")!==-1,f=e.indexOf("line-through")!==-1;c&&t.beginPath();for(let m=0;m<l.length;m++){t.save();const g=l[m].p0;t.translate(g.x,g.y),t.rotate(l[m].rotation),this.partialText=l[m].text,t.fillStrokeShape(this),c&&(m===0&&t.moveTo(0,s/2+1),t.lineTo(l[m].width,s/2+1)),t.restore()}if(c&&(t.strokeStyle=i,t.lineWidth=s/20,t.stroke()),f){t.beginPath();for(let m=0;m<l.length;m++){t.save();const g=l[m].p0;t.translate(g.x,g.y),t.rotate(l[m].rotation),m===0&&t.moveTo(0,0),t.lineTo(l[m].width,0),t.restore()}t.strokeStyle=i,t.lineWidth=s/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();const e=this.glyphInfo;if(e.length>=1){const i=e[0].p0;t.moveTo(i.x,i.y)}for(let i=0;i<e.length;i++){const s=e[i].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return st.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Nn.prototype.setText.call(this,t)}_getContextFont(){return Nn.prototype._getContextFont.call(this)}_getTextSize(t){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const s=i.measureText(t);return i.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=Gc(this.text()),e=[];let i=0;for(let E=0;E<t.length;E++)e.push({char:t[E],width:this._getTextSize(t[E]).width}),i+=e[E].width;const{height:s}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=s,this.glyphInfo=[],!this.attrs.data)return null;const l=this.letterSpacing(),c=this.align(),f=this.kerningFunc(),m=Math.max(this.textWidth+((this.attrs.text||"").length-1)*l,0);let g=0;c==="center"&&(g=Math.max(0,this.pathLength/2-m/2)),c==="right"&&(g=Math.max(0,this.pathLength-m));let A=g;for(let E=0;E<e.length;E++){const T=this._getPointAtLength(A);if(!T)return;const x=e[E].char;let w=e[E].width+l;if(x===" "&&c==="justify"){const $=this.text().split(" ").length-1;w+=(this.pathLength-m)/$}const I=this._getPointAtLength(A+w);if(!I)return;const L=xn.getLineLength(T.x,T.y,I.x,I.y);let B=0;if(f)try{B=f(e[E-1].char,x)*this.fontSize()}catch{B=0}T.x+=B,I.x+=B,this.textWidth+=B;const j=xn.getPointOnLine(B+L/2,T.x,T.y,I.x,I.y),q=Math.atan2(I.y-T.y,I.x-T.x);this.glyphInfo.push({transposeX:j.x,transposeY:j.y,text:t[E],rotation:q,p0:T,p1:I,width:L}),A+=w}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(g){t.push(g.p0.x),t.push(g.p0.y),t.push(g.p1.x),t.push(g.p1.y)});let e=t[0]||0,i=t[0]||0,s=t[1]||0,l=t[1]||0,c,f;for(let g=0;g<t.length/2;g++)c=t[g*2],f=t[g*2+1],e=Math.min(e,c),i=Math.max(i,c),s=Math.min(s,f),l=Math.max(l,f);const m=this.fontSize();return{x:e-m/2,y:s-m/2,width:i-e+m,height:l-s+m}}destroy(){return st.releaseCanvas(this.dummyCanvas),super.destroy()}}Fi.prototype._fillFunc=z8;Fi.prototype._strokeFunc=B8;Fi.prototype._fillFuncHit=z8;Fi.prototype._strokeFuncHit=B8;Fi.prototype.className="TextPath";Fi.prototype._attrsAffectingSize=["text","fontSize","data"];ni(Fi);Y.addGetterSetter(Fi,"data");Y.addGetterSetter(Fi,"fontFamily","Arial");Y.addGetterSetter(Fi,"fontSize",12,Mt());Y.addGetterSetter(Fi,"fontStyle",U8);Y.addGetterSetter(Fi,"align","left");Y.addGetterSetter(Fi,"letterSpacing",0,Mt());Y.addGetterSetter(Fi,"textBaseline","middle");Y.addGetterSetter(Fi,"fontVariant",U8);Y.addGetterSetter(Fi,"text",fB);Y.addGetterSetter(Fi,"textDecoration","");Y.addGetterSetter(Fi,"kerningFunc",void 0);const j8="tr-konva",dB=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(n=>n+`.${j8}`).join(" "),zb="nodesRect",mB=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],pB={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},gB="ontouchstart"in Vt._global;function _B(n,t,e){if(n==="rotater")return e;t+=st.degToRad(pB[n]||0);const i=(st.radToDeg(t)%360+360)%360;return st._inRange(i,315+22.5,360)||st._inRange(i,0,22.5)?"ns-resize":st._inRange(i,45-22.5,45+22.5)?"nesw-resize":st._inRange(i,90-22.5,90+22.5)?"ew-resize":st._inRange(i,135-22.5,135+22.5)?"nwse-resize":st._inRange(i,180-22.5,180+22.5)?"ns-resize":st._inRange(i,225-22.5,225+22.5)?"nesw-resize":st._inRange(i,270-22.5,270+22.5)?"ew-resize":st._inRange(i,315-22.5,315+22.5)?"nwse-resize":(st.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const R1=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function yB(n){return{x:n.x+n.width/2*Math.cos(n.rotation)+n.height/2*Math.sin(-n.rotation),y:n.y+n.height/2*Math.cos(n.rotation)+n.width/2*Math.sin(n.rotation)}}function H8(n,t,e){const i=e.x+(n.x-e.x)*Math.cos(t)-(n.y-e.y)*Math.sin(t),s=e.y+(n.x-e.x)*Math.sin(t)+(n.y-e.y)*Math.cos(t);return{...n,rotation:n.rotation+t,x:i,y:s}}function vB(n,t){const e=yB(n);return H8(n,t,e)}function AB(n,t,e){let i=t;for(let s=0;s<n.length;s++){const l=Vt.getAngle(n[s]),c=Math.abs(l-t)%(Math.PI*2);Math.min(c,Math.PI*2-c)<e&&(i=l)}return i}let QA=0,je=class extends xm{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(dB,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return st.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return j8+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(s=>s.isAncestorOf(this)?(st.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const l=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const c=s._attrsAffectingSize.map(f=>f+"Change."+this._getEventNamespace()).join(" ");s.on(c,l)}s.on(mB.map(c=>c+`.${this._getEventNamespace()}`).join(" "),l),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,l),this._proxyDrag(s)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,i=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(i,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!e)return;const s=t.getAbsolutePosition(),l=s.x-e.x,c=s.y-e.y;this.nodes().forEach(f=>{if(f===t||f.isDragging())return;const m=f.getAbsolutePosition();f.setAbsolutePosition({x:m.x+l,y:m.y+c}),f.startDrag(i)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(zb),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(zb,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),i){const s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=t.getAbsoluteScale(i),c=t.getAbsolutePosition(i),f=s.x*l.x-t.offsetX()*l.x,m=s.y*l.y-t.offsetY()*l.y,g=(Vt.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),A={x:c.x+f*Math.cos(g)+m*Math.sin(-g),y:c.y+m*Math.cos(g)+f*Math.sin(g),width:s.width*l.x,height:s.height*l.y,rotation:g};return H8(A,-Vt.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const e=[];this.nodes().map(g=>{const A=g.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),E=[{x:A.x,y:A.y},{x:A.x+A.width,y:A.y},{x:A.x+A.width,y:A.y+A.height},{x:A.x,y:A.y+A.height}],T=g.getAbsoluteTransform();E.forEach(function(x){const w=T.point(x);e.push(w)})});const i=new fr;i.rotate(-Vt.getAngle(this.rotation()));let s=1/0,l=1/0,c=-1/0,f=-1/0;e.forEach(function(g){const A=i.point(g);s===void 0&&(s=c=A.x,l=f=A.y),s=Math.min(s,A.x),l=Math.min(l,A.y),c=Math.max(c,A.x),f=Math.max(f,A.y)}),i.invert();const m=i.point({x:s,y:l});return{x:m.x,y:m.y,width:c-s,height:f-l,rotation:Vt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),R1.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const e=new j0({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:gB?10:"auto"}),i=this;e.on("mousedown touchstart",function(s){i._handleMouseDown(s)}),e.on("dragstart",s=>{e.stopDrag(),s.cancelBubble=!0}),e.on("dragend",s=>{s.cancelBubble=!0}),e.on("mouseenter",()=>{const s=Vt.getAngle(this.rotation()),l=this.rotateAnchorCursor(),c=_B(t,s,l);e.getStage().content&&(e.getStage().content.style.cursor=c),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){const t=new Nt({name:"back",width:0,height:0,sceneFunc(e,i){const s=i.getParent(),l=s.padding(),c=i.width(),f=i.height();if(e.beginPath(),e.rect(-l,-l,c+l*2,f+l*2),s.rotateEnabled()&&s.rotateLineVisible()){const m=s.rotateAnchorAngle(),g=s.rotateAnchorOffset(),A=st.degToRad(m),E=Math.sin(A),T=-Math.cos(A),x=c/2,w=f/2;let I=1/0;T<0?I=Math.min(I,-w/T):T>0&&(I=Math.min(I,(f-w)/T)),E<0?I=Math.min(I,-x/E):E>0&&(I=Math.min(I,(c-x)/E));const L=x+E*I,B=w+T*I,j=st._sign(f),q=L+E*g*j,$=B+T*g*j;e.moveTo(L,B),e.lineTo(q,$)}e.fillStrokeShape(i)},hitFunc:(e,i)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();e.beginPath(),e.rect(-s,-s,i.width()+s*2,i.height()+s*2),e.fillStrokeShape(i)}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const e=this._getNodeRect(),i=e.width,s=e.height,l=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));this.sin=Math.abs(s/l),this.cos=Math.abs(i/l),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const c=t.target.getAbsolutePosition(),f=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-c.x,y:f.y-c.y},QA++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(m=>{m._fire("transformstart",{evt:t.evt,target:m})})}_handleMouseMove(t){let e,i,s;const l=this.findOne("."+this._movingAnchorName),c=l.getStage();c.setPointersPositions(t);const f=c.getPointerPosition();let m={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const g=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(m=this.anchorDragBoundFunc()(g,m,t)),l.setAbsolutePosition(m);const A=l.getAbsolutePosition();if(g.x===A.x&&g.y===A.y)return;if(this._movingAnchorName==="rotater"){const j=this._getNodeRect();e=l.x()-j.width/2,i=-l.y()+j.height/2;const q=Vt.getAngle(this.rotateAnchorAngle());let $=Math.atan2(-i,e)+Math.PI/2-q;j.height<0&&($-=Math.PI);const nt=Vt.getAngle(this.rotation())+$,P=Vt.getAngle(this.rotationSnapTolerance()),z=AB(this.rotationSnaps(),nt,P)-j.rotation,F=vB(j,z);this._fitNodesInto(F,t);return}const E=this.shiftBehavior();let T;E==="inverted"?T=this.keepRatio()&&!t.shiftKey:E==="none"?T=this.keepRatio():T=this.keepRatio()||t.shiftKey;let x=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(T){const j=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(j.x-l.x(),2)+Math.pow(j.y-l.y(),2));const q=this.findOne(".top-left").x()>j.x?-1:1,$=this.findOne(".top-left").y()>j.y?-1:1;e=s*this.cos*q,i=s*this.sin*$,this.findOne(".top-left").x(j.x-e),this.findOne(".top-left").y(j.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(l.y());else if(this._movingAnchorName==="top-right"){if(T){const j=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(l.x()-j.x,2)+Math.pow(j.y-l.y(),2));const q=this.findOne(".top-right").x()<j.x?-1:1,$=this.findOne(".top-right").y()>j.y?-1:1;e=s*this.cos*q,i=s*this.sin*$,this.findOne(".top-right").x(j.x+e),this.findOne(".top-right").y(j.y-i)}var w=l.position();this.findOne(".top-left").y(w.y),this.findOne(".bottom-right").x(w.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(l.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(l.x());else if(this._movingAnchorName==="bottom-left"){if(T){const j=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(j.x-l.x(),2)+Math.pow(l.y()-j.y,2));const q=j.x<l.x()?-1:1,$=l.y()<j.y?-1:1;e=s*this.cos*q,i=s*this.sin*$,l.x(j.x-e),l.y(j.y+i)}w=l.position(),this.findOne(".top-left").x(w.x),this.findOne(".bottom-right").y(w.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(l.y());else if(this._movingAnchorName==="bottom-right"){if(T){const j=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(l.x()-j.x,2)+Math.pow(l.y()-j.y,2));const q=this.findOne(".bottom-right").x()<j.x?-1:1,$=this.findOne(".bottom-right").y()<j.y?-1:1;e=s*this.cos*q,i=s*this.sin*$,this.findOne(".bottom-right").x(j.x+e),this.findOne(".bottom-right").y(j.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(x=this.centeredScaling()||t.altKey,x){const j=this.findOne(".top-left"),q=this.findOne(".bottom-right"),$=j.x(),Z=j.y(),nt=this.getWidth()-q.x(),P=this.getHeight()-q.y();q.move({x:-$,y:-Z}),j.move({x:nt,y:P})}const I=this.findOne(".top-left").getAbsolutePosition();e=I.x,i=I.y;const L=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),B=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:i,width:L,height:B,rotation:Vt.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var e;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();QA--,this._fire("transformend",{evt:t,target:i}),(e=this.getLayer())===null||e===void 0||e.batchDraw(),i&&this._nodes.forEach(s=>{var l;s._fire("transformend",{evt:t,target:s}),(l=s.getLayer())===null||l===void 0||l.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,e){const i=this._getNodeRect(),s=1;if(st._inRange(t.width,-this.padding()*2-s,s)){this.update();return}if(st._inRange(t.height,-this.padding()*2-s,s)){this.update();return}const l=new fr;if(l.rotate(Vt.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const T=l.point({x:-this.padding()*2,y:0});t.x+=T.x,t.y+=T.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const T=l.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const T=l.point({x:0,y:-this.padding()*2});t.x+=T.x,t.y+=T.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const T=l.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const T=this.boundBoxFunc()(i,t);T?t=T:st.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,f=new fr;f.translate(i.x,i.y),f.rotate(i.rotation),f.scale(i.width/c,i.height/c);const m=new fr,g=t.width/c,A=t.height/c;this.flipEnabled()===!1?(m.translate(t.x,t.y),m.rotate(t.rotation),m.translate(t.width<0?t.width:0,t.height<0?t.height:0),m.scale(Math.abs(g),Math.abs(A))):(m.translate(t.x,t.y),m.rotate(t.rotation),m.scale(g,A));const E=m.multiply(f.invert());this._nodes.forEach(T=>{var x;if(!T.getStage())return;const w=T.getParent().getAbsoluteTransform(),I=T.getTransform().copy();I.translate(T.offsetX(),T.offsetY());const L=new fr;L.multiply(w.copy().invert()).multiply(E).multiply(w).multiply(I);const B=L.decompose();T.setAttrs(B),(x=T.getLayer())===null||x===void 0||x.batchDraw()}),this.rotation(st._getRotation(t.rotation)),this._nodes.forEach(T=>{this._fire("transform",{evt:e,target:T}),T._fire("transform",{evt:e,target:T})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t;const e=this._getNodeRect();this.rotation(st._getRotation(e.rotation));const i=e.width,s=e.height,l=this.enabledAnchors(),c=this.resizeEnabled(),f=this.padding(),m=this.anchorSize(),g=this.find("._anchor");g.forEach(nt=>{nt.setAttrs({width:m,height:m,offsetX:m/2,offsetY:m/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:m/2+f,offsetY:m/2+f,visible:c&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:m/2+f,visible:c&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:m/2-f,offsetY:m/2+f,visible:c&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:m/2+f,visible:c&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:s/2,offsetX:m/2-f,visible:c&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:m/2+f,offsetY:m/2-f,visible:c&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:s,offsetY:m/2-f,visible:c&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:s,offsetX:m/2-f,offsetY:m/2-f,visible:c&&l.indexOf("bottom-right")>=0});const A=this.rotateAnchorAngle(),E=this.rotateAnchorOffset(),T=st.degToRad(A),x=Math.sin(T),w=-Math.cos(T),I=i/2,L=s/2;let B=1/0;w<0?B=Math.min(B,-L/w):w>0&&(B=Math.min(B,(s-L)/w)),x<0?B=Math.min(B,-I/x):x>0&&(B=Math.min(B,(i-I)/x));const j=I+x*B,q=L+w*B,$=st._sign(s);this._batchChangeChild(".rotater",{x:j+x*E*$,y:q+w*E*$-f*w,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(nt=>nt.draggable()),x:0,y:0});const Z=this.anchorStyleFunc();Z&&g.forEach(nt=>{Z(nt)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),xm.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return It.prototype.toObject.call(this)}clone(t){return It.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};je.isTransforming=()=>QA>0;function EB(n){return n instanceof Array||st.warn("enabledAnchors value should be an array"),n instanceof Array&&n.forEach(function(t){R1.indexOf(t)===-1&&st.warn("Unknown anchor name: "+t+". Available names are: "+R1.join(", "))}),n||[]}je.prototype.className="Transformer";ni(je);Y.addGetterSetter(je,"enabledAnchors",R1,EB);Y.addGetterSetter(je,"flipEnabled",!0,ql());Y.addGetterSetter(je,"resizeEnabled",!0);Y.addGetterSetter(je,"anchorSize",10,Mt());Y.addGetterSetter(je,"rotateEnabled",!0);Y.addGetterSetter(je,"rotateLineVisible",!0);Y.addGetterSetter(je,"rotationSnaps",[]);Y.addGetterSetter(je,"rotateAnchorOffset",50,Mt());Y.addGetterSetter(je,"rotateAnchorAngle",0,Mt());Y.addGetterSetter(je,"rotateAnchorCursor","crosshair");Y.addGetterSetter(je,"rotationSnapTolerance",5,Mt());Y.addGetterSetter(je,"borderEnabled",!0);Y.addGetterSetter(je,"anchorStroke","rgb(0, 161, 255)");Y.addGetterSetter(je,"anchorStrokeWidth",1,Mt());Y.addGetterSetter(je,"anchorFill","white");Y.addGetterSetter(je,"anchorCornerRadius",0,Mt());Y.addGetterSetter(je,"borderStroke","rgb(0, 161, 255)");Y.addGetterSetter(je,"borderStrokeWidth",1,Mt());Y.addGetterSetter(je,"borderDash");Y.addGetterSetter(je,"keepRatio",!0);Y.addGetterSetter(je,"shiftBehavior","default");Y.addGetterSetter(je,"centeredScaling",!1);Y.addGetterSetter(je,"ignoreStroke",!1);Y.addGetterSetter(je,"padding",0,Mt());Y.addGetterSetter(je,"nodes");Y.addGetterSetter(je,"node");Y.addGetterSetter(je,"boundBoxFunc");Y.addGetterSetter(je,"anchorDragBoundFunc");Y.addGetterSetter(je,"anchorStyleFunc");Y.addGetterSetter(je,"shouldOverdrawWholeArea",!1);Y.addGetterSetter(je,"useSingleNodeRotation",!0);Y.backCompat(je,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Fu extends Nt{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,Vt.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Fu.prototype.className="Wedge";Fu.prototype._centroid=!0;Fu.prototype._attrsAffectingSize=["radius"];ni(Fu);Y.addGetterSetter(Fu,"radius",0,Mt());Y.addGetterSetter(Fu,"angle",0,Mt());Y.addGetterSetter(Fu,"clockwise",!1);Y.backCompat(Fu,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function Bb(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const SB=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],TB=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function bB(n,t){const e=n.data,i=n.width,s=n.height;let l,c,f,m,g,A,E,T,x,w,I,L,B,j,q,$,Z,nt,P,M;const z=t+t+1,F=i-1,X=s-1,Q=t+1,G=Q*(Q+1)/2,Yt=new Bb,Pt=SB[t],et=TB[t];let vt=null,St=Yt,Ut=null,Qt=null;for(let K=1;K<z;K++)St=St.next=new Bb,K===Q&&(vt=St);St.next=Yt,f=c=0;for(let K=0;K<s;K++){L=B=j=q=m=g=A=E=0,T=Q*($=e[c]),x=Q*(Z=e[c+1]),w=Q*(nt=e[c+2]),I=Q*(P=e[c+3]),m+=G*$,g+=G*Z,A+=G*nt,E+=G*P,St=Yt;for(let ft=0;ft<Q;ft++)St.r=$,St.g=Z,St.b=nt,St.a=P,St=St.next;for(let ft=1;ft<Q;ft++)l=c+((F<ft?F:ft)<<2),m+=(St.r=$=e[l])*(M=Q-ft),g+=(St.g=Z=e[l+1])*M,A+=(St.b=nt=e[l+2])*M,E+=(St.a=P=e[l+3])*M,L+=$,B+=Z,j+=nt,q+=P,St=St.next;Ut=Yt,Qt=vt;for(let ft=0;ft<i;ft++)e[c+3]=P=E*Pt>>et,P!==0?(P=255/P,e[c]=(m*Pt>>et)*P,e[c+1]=(g*Pt>>et)*P,e[c+2]=(A*Pt>>et)*P):e[c]=e[c+1]=e[c+2]=0,m-=T,g-=x,A-=w,E-=I,T-=Ut.r,x-=Ut.g,w-=Ut.b,I-=Ut.a,l=f+((l=ft+t+1)<F?l:F)<<2,L+=Ut.r=e[l],B+=Ut.g=e[l+1],j+=Ut.b=e[l+2],q+=Ut.a=e[l+3],m+=L,g+=B,A+=j,E+=q,Ut=Ut.next,T+=$=Qt.r,x+=Z=Qt.g,w+=nt=Qt.b,I+=P=Qt.a,L-=$,B-=Z,j-=nt,q-=P,Qt=Qt.next,c+=4;f+=i}for(let K=0;K<i;K++){B=j=q=L=g=A=E=m=0,c=K<<2,T=Q*($=e[c]),x=Q*(Z=e[c+1]),w=Q*(nt=e[c+2]),I=Q*(P=e[c+3]),m+=G*$,g+=G*Z,A+=G*nt,E+=G*P,St=Yt;for(let yt=0;yt<Q;yt++)St.r=$,St.g=Z,St.b=nt,St.a=P,St=St.next;let ft=i;for(let yt=1;yt<=t;yt++)c=ft+K<<2,m+=(St.r=$=e[c])*(M=Q-yt),g+=(St.g=Z=e[c+1])*M,A+=(St.b=nt=e[c+2])*M,E+=(St.a=P=e[c+3])*M,L+=$,B+=Z,j+=nt,q+=P,St=St.next,yt<X&&(ft+=i);c=K,Ut=Yt,Qt=vt;for(let yt=0;yt<s;yt++)l=c<<2,e[l+3]=P=E*Pt>>et,P>0?(P=255/P,e[l]=(m*Pt>>et)*P,e[l+1]=(g*Pt>>et)*P,e[l+2]=(A*Pt>>et)*P):e[l]=e[l+1]=e[l+2]=0,m-=T,g-=x,A-=w,E-=I,T-=Ut.r,x-=Ut.g,w-=Ut.b,I-=Ut.a,l=K+((l=yt+Q)<X?l:X)*i<<2,m+=L+=Ut.r=e[l],g+=B+=Ut.g=e[l+1],A+=j+=Ut.b=e[l+2],E+=q+=Ut.a=e[l+3],Ut=Ut.next,T+=$=Qt.r,x+=Z=Qt.g,w+=nt=Qt.b,I+=P=Qt.a,L-=$,B-=Z,j-=nt,q-=P,Qt=Qt.next,c+=i}}const CB=function(t){const e=Math.round(this.blurRadius());e>0&&bB(t,e)};Y.addGetterSetter(It,"blurRadius",0,Mt(),Y.afterSetFilter);const RB=function(n){const t=this.brightness()*255,e=n.data,i=e.length;for(let s=0;s<i;s+=4)e[s]+=t,e[s+1]+=t,e[s+2]+=t};Y.addGetterSetter(It,"brightness",0,Mt(),Y.afterSetFilter);const wB=function(n){const t=this.brightness(),e=n.data,i=e.length;for(let s=0;s<i;s+=4)e[s]=Math.min(255,e[s]*t),e[s+1]=Math.min(255,e[s+1]*t),e[s+2]=Math.min(255,e[s+2]*t)},xB=function(n){const t=Math.pow((this.contrast()+100)/100,2),e=n.data,i=e.length;let s=150,l=150,c=150;for(let f=0;f<i;f+=4)s=e[f],l=e[f+1],c=e[f+2],s/=255,s-=.5,s*=t,s+=.5,s*=255,l/=255,l-=.5,l*=t,l+=.5,l*=255,c/=255,c-=.5,c*=t,c+=.5,c*=255,s=s<0?0:s>255?255:s,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,e[f]=s,e[f+1]=l,e[f+2]=c};Y.addGetterSetter(It,"contrast",0,Mt(),Y.afterSetFilter);const NB=function(n){var t,e,i,s,l,c,f,m,g;const A=n.data,E=n.width,T=n.height,x=Math.min(1,Math.max(0,(e=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&e!==void 0?e:.5)),w=Math.min(1,Math.max(0,(s=(i=this.embossWhiteLevel)===null||i===void 0?void 0:i.call(this))!==null&&s!==void 0?s:.5)),L=(f={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(c=(l=this.embossDirection)===null||l===void 0?void 0:l.call(this))!==null&&c!==void 0?c:"top-left"])!==null&&f!==void 0?f:315,B=!!((g=(m=this.embossBlend)===null||m===void 0?void 0:m.call(this))!==null&&g!==void 0&&g),j=x*10,q=w*255,$=L*Math.PI/180,Z=Math.cos($),nt=Math.sin($),P=128/1020*j,M=new Uint8ClampedArray(A),z=new Float32Array(E*T);for(let Yt=0,Pt=0;Pt<A.length;Pt+=4,Yt++)z[Yt]=.2126*M[Pt]+.7152*M[Pt+1]+.0722*M[Pt+2];const F=[-1,0,1,-2,0,2,-1,0,1],X=[-1,-2,-1,0,0,0,1,2,1],Q=[-E-1,-E,-E+1,-1,0,1,E-1,E,E+1],G=Yt=>Yt<0?0:Yt>255?255:Yt;for(let Yt=1;Yt<T-1;Yt++)for(let Pt=1;Pt<E-1;Pt++){const et=Yt*E+Pt;let vt=0,St=0;vt+=z[et+Q[0]]*F[0],St+=z[et+Q[0]]*X[0],vt+=z[et+Q[1]]*F[1],St+=z[et+Q[1]]*X[1],vt+=z[et+Q[2]]*F[2],St+=z[et+Q[2]]*X[2],vt+=z[et+Q[3]]*F[3],St+=z[et+Q[3]]*X[3],vt+=z[et+Q[5]]*F[5],St+=z[et+Q[5]]*X[5],vt+=z[et+Q[6]]*F[6],St+=z[et+Q[6]]*X[6],vt+=z[et+Q[7]]*F[7],St+=z[et+Q[7]]*X[7],vt+=z[et+Q[8]]*F[8],St+=z[et+Q[8]]*X[8];const Ut=Z*vt+nt*St,Qt=G(q+Ut*P),K=et*4;if(B){const ft=Qt-q;A[K]=G(M[K]+ft),A[K+1]=G(M[K+1]+ft),A[K+2]=G(M[K+2]+ft),A[K+3]=M[K+3]}else A[K]=A[K+1]=A[K+2]=Qt,A[K+3]=M[K+3]}for(let Yt=0;Yt<E;Yt++){let Pt=Yt*4,et=((T-1)*E+Yt)*4;A[Pt]=M[Pt],A[Pt+1]=M[Pt+1],A[Pt+2]=M[Pt+2],A[Pt+3]=M[Pt+3],A[et]=M[et],A[et+1]=M[et+1],A[et+2]=M[et+2],A[et+3]=M[et+3]}for(let Yt=1;Yt<T-1;Yt++){let Pt=Yt*E*4,et=(Yt*E+(E-1))*4;A[Pt]=M[Pt],A[Pt+1]=M[Pt+1],A[Pt+2]=M[Pt+2],A[Pt+3]=M[Pt+3],A[et]=M[et],A[et+1]=M[et+1],A[et+2]=M[et+2],A[et+3]=M[et+3]}return n};Y.addGetterSetter(It,"embossStrength",.5,Mt(),Y.afterSetFilter);Y.addGetterSetter(It,"embossWhiteLevel",.5,Mt(),Y.afterSetFilter);Y.addGetterSetter(It,"embossDirection","top-left",void 0,Y.afterSetFilter);Y.addGetterSetter(It,"embossBlend",!1,void 0,Y.afterSetFilter);function U2(n,t,e,i,s){const l=e-t,c=s-i;if(l===0)return i+c/2;if(c===0)return i;let f=(n-t)/l;return f=c*f+i,f}const DB=function(n){const t=n.data,e=t.length;let i=t[0],s=i,l,c=t[1],f=c,m,g=t[2],A=g,E;const T=this.enhance();if(T===0)return;for(let q=0;q<e;q+=4)l=t[q+0],l<i?i=l:l>s&&(s=l),m=t[q+1],m<c?c=m:m>f&&(f=m),E=t[q+2],E<g?g=E:E>A&&(A=E);s===i&&(s=255,i=0),f===c&&(f=255,c=0),A===g&&(A=255,g=0);let x,w,I,L,B,j;if(T>0)x=s+T*(255-s),w=i-T*(i-0),I=f+T*(255-f),L=c-T*(c-0),B=A+T*(255-A),j=g-T*(g-0);else{const q=(s+i)*.5;x=s+T*(s-q),w=i+T*(i-q);const $=(f+c)*.5;I=f+T*(f-$),L=c+T*(c-$);const Z=(A+g)*.5;B=A+T*(A-Z),j=g+T*(g-Z)}for(let q=0;q<e;q+=4)t[q+0]=U2(t[q+0],i,s,w,x),t[q+1]=U2(t[q+1],c,f,L,I),t[q+2]=U2(t[q+2],g,A,j,B)};Y.addGetterSetter(It,"enhance",0,Mt(),Y.afterSetFilter);const IB=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4){const s=.34*t[i]+.5*t[i+1]+.16*t[i+2];t[i]=s,t[i+1]=s,t[i+2]=s}};Y.addGetterSetter(It,"hue",0,Mt(),Y.afterSetFilter);Y.addGetterSetter(It,"saturation",0,Mt(),Y.afterSetFilter);Y.addGetterSetter(It,"luminance",0,Mt(),Y.afterSetFilter);const OB=function(n){const t=n.data,e=t.length,i=1,s=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,f=i*s*Math.cos(l*Math.PI/180),m=i*s*Math.sin(l*Math.PI/180),g=.299*i+.701*f+.167*m,A=.587*i-.587*f+.33*m,E=.114*i-.114*f-.497*m,T=.299*i-.299*f-.328*m,x=.587*i+.413*f+.035*m,w=.114*i-.114*f+.293*m,I=.299*i-.3*f+1.25*m,L=.587*i-.586*f-1.05*m,B=.114*i+.886*f-.2*m;let j,q,$,Z;for(let nt=0;nt<e;nt+=4)j=t[nt+0],q=t[nt+1],$=t[nt+2],Z=t[nt+3],t[nt+0]=g*j+A*q+E*$+c,t[nt+1]=T*j+x*q+w*$+c,t[nt+2]=I*j+L*q+B*$+c,t[nt+3]=Z},MB=function(n){const t=n.data,e=t.length,i=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=i*s*Math.cos(l*Math.PI/180),f=i*s*Math.sin(l*Math.PI/180),m=.299*i+.701*c+.167*f,g=.587*i-.587*c+.33*f,A=.114*i-.114*c-.497*f,E=.299*i-.299*c-.328*f,T=.587*i+.413*c+.035*f,x=.114*i-.114*c+.293*f,w=.299*i-.3*c+1.25*f,I=.587*i-.586*c-1.05*f,L=.114*i+.886*c-.2*f;for(let B=0;B<e;B+=4){const j=t[B+0],q=t[B+1],$=t[B+2],Z=t[B+3];t[B+0]=m*j+g*q+A*$,t[B+1]=E*j+T*q+x*$,t[B+2]=w*j+I*q+L*$,t[B+3]=Z}};Y.addGetterSetter(It,"hue",0,Mt(),Y.afterSetFilter);Y.addGetterSetter(It,"saturation",0,Mt(),Y.afterSetFilter);Y.addGetterSetter(It,"value",0,Mt(),Y.afterSetFilter);const LB=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]},VB=function(n,t,e){const i=n.data,s=t.data,l=n.width,c=n.height,f=e.polarCenterX||l/2,m=e.polarCenterY||c/2;let g=Math.sqrt(f*f+m*m),A=l-f,E=c-m;const T=Math.sqrt(A*A+E*E);g=T>g?T:g;const x=c,w=l,I=360/w*Math.PI/180;for(let L=0;L<w;L+=1){const B=Math.sin(L*I),j=Math.cos(L*I);for(let q=0;q<x;q+=1){A=Math.floor(f+g*q/x*j),E=Math.floor(m+g*q/x*B);let $=(E*l+A)*4;const Z=i[$+0],nt=i[$+1],P=i[$+2],M=i[$+3];$=(L+q*l)*4,s[$+0]=Z,s[$+1]=nt,s[$+2]=P,s[$+3]=M}}},kB=function(n,t,e){const i=n.data,s=t.data,l=n.width,c=n.height,f=e.polarCenterX||l/2,m=e.polarCenterY||c/2;let g=Math.sqrt(f*f+m*m),A=l-f,E=c-m;const T=Math.sqrt(A*A+E*E);g=T>g?T:g;const x=c,w=l,I=0;let L,B;for(A=0;A<l;A+=1)for(E=0;E<c;E+=1){const j=A-f,q=E-m,$=Math.sqrt(j*j+q*q)*x/g;let Z=(Math.atan2(q,j)*180/Math.PI+360+I)%360;Z=Z*w/360,L=Math.floor(Z),B=Math.floor($);let nt=(B*l+L)*4;const P=i[nt+0],M=i[nt+1],z=i[nt+2],F=i[nt+3];nt=(E*l+A)*4,s[nt+0]=P,s[nt+1]=M,s[nt+2]=z,s[nt+3]=F}},PB=function(n){const t=n.width,e=n.height;let i,s,l,c,f,m,g,A,E,T,x=Math.round(this.kaleidoscopePower());const w=Math.round(this.kaleidoscopeAngle()),I=Math.floor(t*(w%360)/360);if(x<1)return;const L=st.createCanvasElement();L.width=t,L.height=e;const B=L.getContext("2d").getImageData(0,0,t,e);st.releaseCanvas(L),VB(n,B,{polarCenterX:t/2,polarCenterY:e/2});let j=t/Math.pow(2,x);for(;j<=8;)j=j*2,x-=1;j=Math.ceil(j);let q=j,$=0,Z=q,nt=1;for(I+j>t&&($=q,Z=0,nt=-1),s=0;s<e;s+=1)for(i=$;i!==Z;i+=nt)l=Math.round(i+I)%t,E=(t*s+l)*4,f=B.data[E+0],m=B.data[E+1],g=B.data[E+2],A=B.data[E+3],T=(t*s+i)*4,B.data[T+0]=f,B.data[T+1]=m,B.data[T+2]=g,B.data[T+3]=A;for(s=0;s<e;s+=1)for(q=Math.floor(j),c=0;c<x;c+=1){for(i=0;i<q+1;i+=1)E=(t*s+i)*4,f=B.data[E+0],m=B.data[E+1],g=B.data[E+2],A=B.data[E+3],T=(t*s+q*2-i-1)*4,B.data[T+0]=f,B.data[T+1]=m,B.data[T+2]=g,B.data[T+3]=A;q*=2}kB(B,n,{})};Y.addGetterSetter(It,"kaleidoscopePower",2,Mt(),Y.afterSetFilter);Y.addGetterSetter(It,"kaleidoscopeAngle",0,Mt(),Y.afterSetFilter);function Ry(n,t,e){let i=(e*n.width+t)*4;const s=[];return s.push(n.data[i++],n.data[i++],n.data[i++],n.data[i++]),s}function yg(n,t){return Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2)+Math.pow(n[2]-t[2],2))}function UB(n){const t=[0,0,0];for(let e=0;e<n.length;e++)t[0]+=n[e][0],t[1]+=n[e][1],t[2]+=n[e][2];return t[0]/=n.length,t[1]/=n.length,t[2]/=n.length,t}function zB(n,t){const e=Ry(n,0,0),i=Ry(n,n.width-1,0),s=Ry(n,0,n.height-1),l=Ry(n,n.width-1,n.height-1),c=t||10;if(yg(e,i)<c&&yg(i,l)<c&&yg(l,s)<c&&yg(s,e)<c){const f=UB([i,e,l,s]),m=[];for(let g=0;g<n.width*n.height;g++){const A=yg(f,[n.data[g*4],n.data[g*4+1],n.data[g*4+2]]);m[g]=A<c?0:255}return m}}function BB(n,t){for(let e=0;e<n.width*n.height;e++)n.data[4*e+3]=t[e]}function jB(n,t,e){const i=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(i.length)),l=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let A=0;for(let E=0;E<s;E++)for(let T=0;T<s;T++){const x=f+E-l,w=m+T-l;if(x>=0&&x<e&&w>=0&&w<t){const I=x*t+w,L=i[E*s+T];A+=n[I]*L}}c[g]=A===2040?255:0}return c}function HB(n,t,e){const i=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(i.length)),l=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let A=0;for(let E=0;E<s;E++)for(let T=0;T<s;T++){const x=f+E-l,w=m+T-l;if(x>=0&&x<e&&w>=0&&w<t){const I=x*t+w,L=i[E*s+T];A+=n[I]*L}}c[g]=A>=1020?255:0}return c}function GB(n,t,e){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(i.length)),l=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let A=0;for(let E=0;E<s;E++)for(let T=0;T<s;T++){const x=f+E-l,w=m+T-l;if(x>=0&&x<e&&w>=0&&w<t){const I=x*t+w,L=i[E*s+T];A+=n[I]*L}}c[g]=A}return c}const qB=function(n){const t=this.threshold();let e=zB(n,t);return e&&(e=jB(e,n.width,n.height),e=HB(e,n.width,n.height),e=GB(e,n.width,n.height),BB(n,e)),n};Y.addGetterSetter(It,"threshold",0,Mt(),Y.afterSetFilter);const FB=function(n){const t=this.noise()*255,e=n.data,i=e.length,s=t/2;for(let l=0;l<i;l+=4)e[l+0]+=s-2*s*Math.random(),e[l+1]+=s-2*s*Math.random(),e[l+2]+=s-2*s*Math.random()};Y.addGetterSetter(It,"noise",.2,Mt(),Y.afterSetFilter);const YB=function(n){let t=Math.ceil(this.pixelSize()),e=n.width,i=n.height,s=Math.ceil(e/t),l=Math.ceil(i/t),c=n.data;if(t<=0){st.error("pixelSize value can not be <= 0");return}for(let f=0;f<s;f+=1)for(let m=0;m<l;m+=1){let g=0,A=0,E=0,T=0;const x=f*t,w=x+t,I=m*t,L=I+t;let B=0;for(let j=x;j<w;j+=1)if(!(j>=e))for(let q=I;q<L;q+=1){if(q>=i)continue;const $=(e*q+j)*4;g+=c[$+0],A+=c[$+1],E+=c[$+2],T+=c[$+3],B+=1}g=g/B,A=A/B,E=E/B,T=T/B;for(let j=x;j<w;j+=1)if(!(j>=e))for(let q=I;q<L;q+=1){if(q>=i)continue;const $=(e*q+j)*4;c[$+0]=g,c[$+1]=A,c[$+2]=E,c[$+3]=T}}};Y.addGetterSetter(It,"pixelSize",8,Mt(),Y.afterSetFilter);const QB=function(n){const t=Math.round(this.levels()*254)+1,e=n.data,i=e.length,s=255/t;for(let l=0;l<i;l+=1)e[l]=Math.floor(e[l]/s)*s};Y.addGetterSetter(It,"levels",.5,Mt(),Y.afterSetFilter);const XB=function(n){const t=n.data,e=t.length,i=this.red(),s=this.green(),l=this.blue();for(let c=0;c<e;c+=4){const f=(.34*t[c]+.5*t[c+1]+.16*t[c+2])/255;t[c]=f*i,t[c+1]=f*s,t[c+2]=f*l,t[c+3]=t[c+3]}};Y.addGetterSetter(It,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});Y.addGetterSetter(It,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});Y.addGetterSetter(It,"blue",0,h8,Y.afterSetFilter);const KB=function(n){const t=n.data,e=t.length,i=this.red(),s=this.green(),l=this.blue(),c=this.alpha();for(let f=0;f<e;f+=4){const m=1-c;t[f]=i*c+t[f]*m,t[f+1]=s*c+t[f+1]*m,t[f+2]=l*c+t[f+2]*m}};Y.addGetterSetter(It,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});Y.addGetterSetter(It,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});Y.addGetterSetter(It,"blue",0,h8,Y.afterSetFilter);Y.addGetterSetter(It,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n});const WB=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4){const s=t[i+0],l=t[i+1],c=t[i+2];t[i+0]=Math.min(255,s*.393+l*.769+c*.189),t[i+1]=Math.min(255,s*.349+l*.686+c*.168),t[i+2]=Math.min(255,s*.272+l*.534+c*.131)}},JB=function(n){const e=n.data;for(let i=0;i<e.length;i+=4){const s=e[i],l=e[i+1],c=e[i+2];.2126*s+.7152*l+.0722*c>=128&&(e[i]=255-s,e[i+1]=255-l,e[i+2]=255-c)}return n},ZB=function(n){const t=this.threshold()*255,e=n.data,i=e.length;for(let s=0;s<i;s+=1)e[s]=e[s]<t?0:255};Y.addGetterSetter(It,"threshold",.5,Mt(),Y.afterSetFilter);Nm.Util._assign(Nm,{Arc:Gu,Arrow:Kf,Circle:Qm,Ellipse:Sh,Image:Fl,Label:YS,Tag:Wf,Line:qu,Path:xn,Rect:j0,RegularPolygon:Th,Ring:Jf,Sprite:zo,Star:bh,Text:Nn,TextPath:Fi,Transformer:je,Wedge:Fu,Filters:{Blur:CB,Brightness:wB,Brighten:RB,Contrast:xB,Emboss:NB,Enhance:DB,Grayscale:IB,HSL:OB,HSV:MB,Invert:LB,Kaleidoscope:PB,Mask:qB,Noise:FB,Pixelate:YB,Posterize:QB,RGB:XB,RGBA:KB,Sepia:WB,Solarize:JB,Threshold:ZB}});var z2={exports:{}},B2={exports:{}};var jb;function $B(){return jb||(jb=1,(function(n){n.exports=function(t){function e(o,u,p,y){return new rp(o,u,p,y)}function i(){}function s(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(o){var u=o,p=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(p=u.return),o=u.return;while(o)}return u.tag===3?p:null}function c(o){if(l(o)!==o)throw Error(s(188))}function f(o){var u=o.alternate;if(!u){if(u=l(o),u===null)throw Error(s(188));return u!==o?null:o}for(var p=o,y=u;;){var b=p.return;if(b===null)break;var C=b.alternate;if(C===null){if(y=b.return,y!==null){p=y;continue}break}if(b.child===C.child){for(C=b.child;C;){if(C===p)return c(b),o;if(C===y)return c(b),u;C=C.sibling}throw Error(s(188))}if(p.return!==y.return)p=b,y=C;else{for(var O=!1,J=b.child;J;){if(J===p){O=!0,p=b,y=C;break}if(J===y){O=!0,y=b,p=C;break}J=J.sibling}if(!O){for(J=C.child;J;){if(J===p){O=!0,p=C,y=b;break}if(J===y){O=!0,y=C,p=b;break}J=J.sibling}if(!O)throw Error(s(189))}}if(p.alternate!==y)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?o:u}function m(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=m(o),u!==null)return u;o=o.sibling}return null}function g(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(o.tag!==4&&(u=g(o),u!==null))return u;o=o.sibling}return null}function A(o){return o===null||typeof o!="object"?null:(o=Tl&&o[Tl]||o["@@iterator"],typeof o=="function"?o:null)}function E(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===mo?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case nu:return"Fragment";case su:return"Profiler";case iu:return"StrictMode";case gd:return"Suspense";case Sl:return"SuspenseList";case ef:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case eu:return"Portal";case wa:return o.displayName||"Context";case tf:return(o._context.displayName||"Context")+".Consumer";case _c:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case _d:return u=o.displayName||null,u!==null?u:E(o.type)||"Memo";case vs:u=o._payload,o=o._init;try{return E(o(u))}catch{}}return null}function T(o){return{current:o}}function x(o){0>uu||(o.current=Dd[uu],Dd[uu]=null,uu--)}function w(o,u){uu++,Dd[uu]=o.current,o.current=u}function I(o){return o>>>=0,o===0?32:31-(Id(o)/B_|0)|0}function L(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function B(o,u,p){var y=o.pendingLanes;if(y===0)return 0;var b=0,C=o.suspendedLanes,O=o.pingedLanes;o=o.warmLanes;var J=y&134217727;return J!==0?(y=J&~C,y!==0?b=L(y):(O&=J,O!==0?b=L(O):p||(p=J&~o,p!==0&&(b=L(p))))):(J=y&~C,J!==0?b=L(J):O!==0?b=L(O):p||(p=y&~o,p!==0&&(b=L(p)))),b===0?0:u!==0&&u!==b&&(u&C)===0&&(C=b&-b,p=u&-u,C>=p||C===32&&(p&4194048)!==0)?u:b}function j(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function q(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $(){var o=bc;return bc<<=1,(bc&62914560)===0&&(bc=4194304),o}function Z(o){for(var u=[],p=0;31>p;p++)u.push(o);return u}function nt(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function P(o,u,p,y,b,C){var O=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var J=o.entanglements,mt=o.expirationTimes,Ct=o.hiddenUpdates;for(p=O&~p;0<p;){var Lt=31-js(p),xt=1<<Lt;J[Lt]=0,mt[Lt]=-1;var zt=Ct[Lt];if(zt!==null)for(Ct[Lt]=null,Lt=0;Lt<zt.length;Lt++){var ue=zt[Lt];ue!==null&&(ue.lane&=-536870913)}p&=~xt}y!==0&&M(o,y,0),C!==0&&b===0&&o.tag!==0&&(o.suspendedLanes|=C&~(O&~u))}function M(o,u,p){o.pendingLanes|=u,o.suspendedLanes&=~u;var y=31-js(u);o.entangledLanes|=u,o.entanglements[y]=o.entanglements[y]|1073741824|p&261930}function z(o,u){var p=o.entangledLanes|=u;for(o=o.entanglements;p;){var y=31-js(p),b=1<<y;b&u|o[y]&u&&(o[y]|=u),p&=~b}}function F(o,u){var p=u&-u;return p=(p&42)!==0?1:X(p),(p&(o.suspendedLanes|u))!==0?0:p}function X(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Q(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function G(o){if(typeof Fp=="function"&&G_(o),Hs&&typeof Hs.setStrictMode=="function")try{Hs.setStrictMode(hu,o)}catch{}}function Yt(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}function Pt(o){if(Pd===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);Pd=u&&u[1]||"",qr=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pd+o+qr}function et(o,u){if(!o||hf)return"";hf=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var xt=function(){throw Error()};if(Object.defineProperty(xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xt,[])}catch(ue){var zt=ue}Reflect.construct(o,[],xt)}else{try{xt.call()}catch(ue){zt=ue}o.call(xt.prototype)}}else{try{throw Error()}catch(ue){zt=ue}(xt=o())&&typeof xt.catch=="function"&&xt.catch(function(){})}}catch(ue){if(ue&&zt&&typeof ue.stack=="string")return[ue.stack,zt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=y.DetermineComponentFrameRoot(),O=C[0],J=C[1];if(O&&J){var mt=O.split(`
`),Ct=J.split(`
`);for(b=y=0;y<mt.length&&!mt[y].includes("DetermineComponentFrameRoot");)y++;for(;b<Ct.length&&!Ct[b].includes("DetermineComponentFrameRoot");)b++;if(y===mt.length||b===Ct.length)for(y=mt.length-1,b=Ct.length-1;1<=y&&0<=b&&mt[y]!==Ct[b];)b--;for(;1<=y&&0<=b;y--,b--)if(mt[y]!==Ct[b]){if(y!==1||b!==1)do if(y--,b--,0>b||mt[y]!==Ct[b]){var Lt=`
`+mt[y].replace(" at new "," at ");return o.displayName&&Lt.includes("<anonymous>")&&(Lt=Lt.replace("<anonymous>",o.displayName)),Lt}while(1<=y&&0<=b);break}}}finally{hf=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?Pt(p):""}function vt(o,u){switch(o.tag){case 26:case 27:case 5:return Pt(o.type);case 16:return Pt("Lazy");case 13:return o.child!==u&&u!==null?Pt("Suspense Fallback"):Pt("Suspense");case 19:return Pt("SuspenseList");case 0:case 15:return et(o.type,!1);case 11:return et(o.type.render,!1);case 1:return et(o.type,!0);case 31:return Pt("Activity");default:return""}}function St(o){try{var u="",p=null;do u+=vt(o,p),p=o,o=o.return;while(o);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function Ut(o,u){if(typeof o=="object"&&o!==null){var p=Yp.get(o);return p!==void 0?p:(u={value:o,source:u,stack:St(u)},Yp.set(o,u),u)}return{value:o,source:u,stack:St(u)}}function Qt(o,u){Rl[Fr++]=ff,Rl[Fr++]=nn,nn=o,ff=u}function K(o,u,p){Da[ha++]=zi,Da[ha++]=rr,Da[ha++]=Ia,Ia=o;var y=zi;o=rr;var b=32-js(y)-1;y&=~(1<<b),p+=1;var C=32-js(u)+b;if(30<C){var O=b-b%5;C=(y&(1<<O)-1).toString(32),y>>=O,b-=O,zi=1<<32-js(u)+b|p<<b|y,rr=C+o}else zi=1<<C|p<<b|y,rr=o}function ft(o){o.return!==null&&(Qt(o,1),K(o,1,0))}function yt(o){for(;o===nn;)nn=Rl[--Fr],Rl[Fr]=null,ff=Rl[--Fr],Rl[Fr]=null;for(;o===Ia;)Ia=Da[--ha],Da[ha]=null,rr=Da[--ha],Da[ha]=null,zi=Da[--ha],Da[ha]=null}function jt(o,u){Da[ha++]=zi,Da[ha++]=rr,Da[ha++]=Ia,zi=u.id,rr=u.overflow,Ia=o}function qt(o,u){w(Bi,u),w(wl,o),w(Ci,null),o=n_(u),x(Ci),w(Ci,o)}function Wt(){x(Ci),x(wl),x(Bi)}function ge(o){o.memoizedState!==null&&w(df,o);var u=Ci.current,p=Ac(u,o.type);u!==p&&(w(wl,o),w(Ci,p))}function wt(o){wl.current===o&&(x(Ci),x(wl)),df.current===o&&(x(df),Kn?lu._currentValue=ru:lu._currentValue2=ru)}function ie(o){var u=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zs(Ut(u,o)),Ud}function as(o,u){if(!bn)throw Error(s(175));x_(o.stateNode,o.type,o.memoizedProps,u,o)||ie(o,!0)}function xs(o){for(pi=o.return;pi;)switch(pi.tag){case 5:case 31:case 13:Es=!1;return;case 27:case 3:Es=!0;return;default:pi=pi.return}}function Ns(o){if(!bn||o!==pi)return!1;if(!Re)return xs(o),Re=!0,!1;var u=o.tag;if(mi?u!==3&&u!==27&&(u!==5||Tc(o.type)&&!As(o.type,o.memoizedProps))&&Cn&&ie(o):u!==3&&(u!==5||Tc(o.type)&&!As(o.type,o.memoizedProps))&&Cn&&ie(o),xs(o),u===13){if(!bn)throw Error(s(316));if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));Cn=Lp(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));Cn=D_(o)}else Cn=mi&&u===27?A_(o.type,Cn):pi?v_(o.stateNode):null;return!0}function Vi(){bn&&(Cn=pi=null,Re=!1)}function rs(){var o=Yr;return o!==null&&(qs===null?qs=o:qs.push.apply(qs,o),Yr=null),o}function Zs(o){Yr===null?Yr=[o]:Yr.push(o)}function ls(o,u,p){Kn?(w(Oa,u._currentValue),u._currentValue=p):(w(Oa,u._currentValue2),u._currentValue2=p)}function $s(o){var u=Oa.current;Kn?o._currentValue=u:o._currentValue2=u,x(Oa)}function Ql(o,u,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),o===p)break;o=o.return}}function gr(o,u,p,y){var b=o.child;for(b!==null&&(b.return=o);b!==null;){var C=b.dependencies;if(C!==null){var O=b.child;C=C.firstContext;t:for(;C!==null;){var J=C;C=b;for(var mt=0;mt<u.length;mt++)if(J.context===u[mt]){C.lanes|=p,J=C.alternate,J!==null&&(J.lanes|=p),Ql(C.return,p,o),y||(O=null);break t}C=J.next}}else if(b.tag===18){if(O=b.return,O===null)throw Error(s(341));O.lanes|=p,C=O.alternate,C!==null&&(C.lanes|=p),Ql(O,p,o),O=null}else O=b.child;if(O!==null)O.return=b;else for(O=b;O!==null;){if(O===o){O=null;break}if(b=O.sibling,b!==null){b.return=O.return,O=b;break}O=O.return}b=O}}function Ds(o,u,p,y){o=null;for(var b=u,C=!1;b!==null;){if(!C){if((b.flags&524288)!==0)C=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var O=b.alternate;if(O===null)throw Error(s(387));if(O=O.memoizedProps,O!==null){var J=b.type;Jn(b.pendingProps.value,O.value)||(o!==null?o.push(J):o=[J])}}else if(b===df.current){if(O=b.alternate,O===null)throw Error(s(387));O.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(o!==null?o.push(lu):o=[lu])}b=b.return}o!==null&&gr(u,o,p,y),u.flags|=262144}function Ya(o){for(o=o.firstContext;o!==null;){var u=o.context;if(!Jn(Kn?u._currentValue:u._currentValue2,o.memoizedValue))return!0;o=o.next}return!1}function Qa(o){fn=o,lr=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Dn(o){return Bo(fn,o)}function Hn(o,u){return fn===null&&Qa(o),Bo(o,u)}function Bo(o,u){var p=Kn?u._currentValue:u._currentValue2;if(u={context:u,memoizedValue:p,next:null},lr===null){if(o===null)throw Error(s(308));lr=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else lr=lr.next=u;return p}function In(){return{controller:new q_,data:new Map,refCount:0}}function Sn(o){o.refCount--,o.refCount===0&&Ri(wv,function(){o.controller.abort()})}function Is(){}function os(o){o!==We&&o.next===null&&(We===null?mf=We=o:We=We.next=o),Ma=!0,Wi||(Wi=!0,Ht())}function Os(o,u){if(!zd&&Ma){zd=!0;do for(var p=!1,y=mf;y!==null;){if(o!==0){var b=y.pendingLanes;if(b===0)var C=0;else{var O=y.suspendedLanes,J=y.pingedLanes;C=(1<<31-js(42|o)+1)-1,C&=b&~(O&~J),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(p=!0,Rt(y,C))}else C=we,C=B(y,y===Ee?C:0,y.cancelPendingCommit!==null||y.timeoutHandle!==Bs),(C&3)===0||j(y,C)||(p=!0,Rt(y,C));y=y.next}while(p);zd=!1}}function Xl(){_r()}function _r(){Ma=Wi=!1;var o=0;vo!==0&&au()&&(o=vo);for(var u=Ki(),p=null,y=mf;y!==null;){var b=y.next,C=Xa(y,u);C===0?(y.next=null,p===null?mf=b:p.next=b,b===null&&(We=p)):(p=y,(o!==0||(C&3)!==0)&&(Ma=!0)),y=b}oi!==0&&oi!==5||Os(o),vo!==0&&(vo=0)}function Xa(o,u){for(var p=o.suspendedLanes,y=o.pingedLanes,b=o.expirationTimes,C=o.pendingLanes&-62914561;0<C;){var O=31-js(C),J=1<<O,mt=b[O];mt===-1?((J&p)===0||(J&y)!==0)&&(b[O]=q(J,u)):mt<=u&&(o.expiredLanes|=J),C&=~J}if(u=Ee,p=we,p=B(o,o===u?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==Bs),y=o.callbackNode,p===0||o===u&&(Ze===2||Ze===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&Md(y),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||j(o,p)){if(u=p&-p,u===o.callbackPriority)return u;switch(y!==null&&Md(y),Q(p)){case 2:case 8:p=H_;break;case 32:p=cf;break;case 268435456:p=Vd;break;default:p=cf}return y=ht.bind(null,o),p=uf(p,y),o.callbackPriority=u,o.callbackNode=p,u}return y!==null&&y!==null&&Md(y),o.callbackPriority=2,o.callbackNode=null,2}function ht(o,u){if(oi!==0&&oi!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if(jr()&&o.callbackNode!==p)return null;var y=we;return y=B(o,o===Ee?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==Bs),y===0?null:(ar(o,y,u),Xa(o,Ki()),o.callbackNode!=null&&o.callbackNode===p?ht.bind(null,o):null)}function Rt(o,u){if(jr())return null;ar(o,u,!0)}function Ht(){yp?vp(function(){(Te&6)!==0?uf(Ld,Xl):_r()}):uf(Ld,Xl)}function he(){if(vo===0){var o=xl;o===0&&(o=Od,Od<<=1,(Od&261888)===0&&(Od=256)),vo=o}return vo}function Ge(o,u){if(Cc===null){var p=Cc=[];Qp=0,xl=he(),gi={status:"pending",value:void 0,then:function(y){p.push(y)}}}return Qp++,u.then(Ms,Ms),u}function Ms(){if(--Qp===0&&Cc!==null){gi!==null&&(gi.status="fulfilled");var o=Cc;Cc=null,xl=0,gi=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function ta(o,u){var p=[],y={status:"pending",value:null,reason:null,then:function(b){p.push(b)}};return o.then(function(){y.status="fulfilled",y.value=u;for(var b=0;b<p.length;b++)(0,p[b])(u)},function(b){for(y.status="rejected",y.reason=b,b=0;b<p.length;b++)(0,p[b])(void 0)}),y}function ui(){var o=Ao.current;return o!==null?o:Ee.pooledCache}function Ls(o,u){u===null?w(Ao,Ao.current):w(Ao,u.pool)}function us(){var o=ui();return o===null?null:{parent:Kn?Rn._currentValue:Rn._currentValue2,pool:o}}function cs(o,u){if(Jn(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var p=Object.keys(o),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var b=p[y];if(!Rv.call(u,b)||!Jn(o[b],u[b]))return!1}return!0}function il(o){return o=o.status,o==="fulfilled"||o==="rejected"}function jo(o,u,p){switch(p=o[p],p===void 0?o.push(u):p!==u&&(u.then(Is,Is),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,sl(o),o;default:if(typeof u.status=="string")u.then(Is,Is);else{if(o=Ee,o!==null&&100<o.shellSuspendCounter)throw Error(s(482));o=u,o.status="pending",o.then(function(y){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=y}},function(y){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,sl(o),o}throw Ss=u,_i}}function Ka(o){try{var u=o._init;return u(o._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Ss=p,_i):p}}function yr(){if(Ss===null)throw Error(s(459));var o=Ss;return Ss=null,o}function sl(o){if(o===_i||o===Va)throw Error(s(483))}function ii(o){var u=fu;return fu+=1,Eo===null&&(Eo=[]),jo(Eo,o,u)}function al(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Wa(o,u){throw u.$$typeof===tu?Error(s(525)):(o=Object.prototype.toString.call(u),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function rl(o){function u(ut,at){if(o){var dt=ut.deletions;dt===null?(ut.deletions=[at],ut.flags|=16):dt.push(at)}}function p(ut,at){if(!o)return null;for(;at!==null;)u(ut,at),at=at.sibling;return null}function y(ut){for(var at=new Map;ut!==null;)ut.key!==null?at.set(ut.key,ut):at.set(ut.index,ut),ut=ut.sibling;return at}function b(ut,at){return ut=ua(ut,at),ut.index=0,ut.sibling=null,ut}function C(ut,at,dt){return ut.index=dt,o?(dt=ut.alternate,dt!==null?(dt=dt.index,dt<at?(ut.flags|=67108866,at):dt):(ut.flags|=67108866,at)):(ut.flags|=1048576,at)}function O(ut){return o&&ut.alternate===null&&(ut.flags|=67108866),ut}function J(ut,at,dt,Dt){return at===null||at.tag!==6?(at=lp(dt,ut.mode,Dt),at.return=ut,at):(at=b(at,dt),at.return=ut,at)}function mt(ut,at,dt,Dt){var te=dt.type;return te===nu?Lt(ut,at,dt.props.children,Dt,dt.key):at!==null&&(at.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===vs&&Ka(te)===at.type)?(at=b(at,dt.props),al(at,dt),at.return=ut,at):(at=El(dt.type,dt.key,dt.props,null,ut.mode,Dt),al(at,dt),at.return=ut,at)}function Ct(ut,at,dt,Dt){return at===null||at.tag!==4||at.stateNode.containerInfo!==dt.containerInfo||at.stateNode.implementation!==dt.implementation?(at=up(dt,ut.mode,Dt),at.return=ut,at):(at=b(at,dt.children||[]),at.return=ut,at)}function Lt(ut,at,dt,Dt,te){return at===null||at.tag!==7?(at=Ra(dt,ut.mode,Dt,te),at.return=ut,at):(at=b(at,dt),at.return=ut,at)}function xt(ut,at,dt){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return at=lp(""+at,ut.mode,dt),at.return=ut,at;if(typeof at=="object"&&at!==null){switch(at.$$typeof){case Hr:return dt=El(at.type,at.key,at.props,null,ut.mode,dt),al(dt,at),dt.return=ut,dt;case eu:return at=up(at,ut.mode,dt),at.return=ut,at;case vs:return at=Ka(at),xt(ut,at,dt)}if(po(at)||A(at))return at=Ra(at,ut.mode,dt,null),at.return=ut,at;if(typeof at.then=="function")return xt(ut,ii(at),dt);if(at.$$typeof===wa)return xt(ut,Hn(ut,at),dt);Wa(ut,at)}return null}function zt(ut,at,dt,Dt){var te=at!==null?at.key:null;if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return te!==null?null:J(ut,at,""+dt,Dt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case Hr:return dt.key===te?mt(ut,at,dt,Dt):null;case eu:return dt.key===te?Ct(ut,at,dt,Dt):null;case vs:return dt=Ka(dt),zt(ut,at,dt,Dt)}if(po(dt)||A(dt))return te!==null?null:Lt(ut,at,dt,Dt,null);if(typeof dt.then=="function")return zt(ut,at,ii(dt),Dt);if(dt.$$typeof===wa)return zt(ut,at,Hn(ut,dt),Dt);Wa(ut,dt)}return null}function ue(ut,at,dt,Dt,te){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return ut=ut.get(dt)||null,J(at,ut,""+Dt,te);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case Hr:return ut=ut.get(Dt.key===null?dt:Dt.key)||null,mt(at,ut,Dt,te);case eu:return ut=ut.get(Dt.key===null?dt:Dt.key)||null,Ct(at,ut,Dt,te);case vs:return Dt=Ka(Dt),ue(ut,at,dt,Dt,te)}if(po(Dt)||A(Dt))return ut=ut.get(dt)||null,Lt(at,ut,Dt,te,null);if(typeof Dt.then=="function")return ue(ut,at,dt,ii(Dt),te);if(Dt.$$typeof===wa)return ue(ut,at,dt,Hn(at,Dt),te);Wa(at,Dt)}return null}function wi(ut,at,dt,Dt){for(var te=null,zn=null,ee=at,Ue=at=0,xi=null;ee!==null&&Ue<dt.length;Ue++){ee.index>Ue?(xi=ee,ee=null):xi=ee.sibling;var Fe=zt(ut,ee,dt[Ue],Dt);if(Fe===null){ee===null&&(ee=xi);break}o&&ee&&Fe.alternate===null&&u(ut,ee),at=C(Fe,at,Ue),zn===null?te=Fe:zn.sibling=Fe,zn=Fe,ee=xi}if(Ue===dt.length)return p(ut,ee),Re&&Qt(ut,Ue),te;if(ee===null){for(;Ue<dt.length;Ue++)ee=xt(ut,dt[Ue],Dt),ee!==null&&(at=C(ee,at,Ue),zn===null?te=ee:zn.sibling=ee,zn=ee);return Re&&Qt(ut,Ue),te}for(ee=y(ee);Ue<dt.length;Ue++)xi=ue(ee,ut,Ue,dt[Ue],Dt),xi!==null&&(o&&xi.alternate!==null&&ee.delete(xi.key===null?Ue:xi.key),at=C(xi,at,Ue),zn===null?te=xi:zn.sibling=xi,zn=xi);return o&&ee.forEach(function(Ua){return u(ut,Ua)}),Re&&Qt(ut,Ue),te}function Mc(ut,at,dt,Dt){if(dt==null)throw Error(s(151));for(var te=null,zn=null,ee=at,Ue=at=0,xi=null,Fe=dt.next();ee!==null&&!Fe.done;Ue++,Fe=dt.next()){ee.index>Ue?(xi=ee,ee=null):xi=ee.sibling;var Ua=zt(ut,ee,Fe.value,Dt);if(Ua===null){ee===null&&(ee=xi);break}o&&ee&&Ua.alternate===null&&u(ut,ee),at=C(Ua,at,Ue),zn===null?te=Ua:zn.sibling=Ua,zn=Ua,ee=xi}if(Fe.done)return p(ut,ee),Re&&Qt(ut,Ue),te;if(ee===null){for(;!Fe.done;Ue++,Fe=dt.next())Fe=xt(ut,Fe.value,Dt),Fe!==null&&(at=C(Fe,at,Ue),zn===null?te=Fe:zn.sibling=Fe,zn=Fe);return Re&&Qt(ut,Ue),te}for(ee=y(ee);!Fe.done;Ue++,Fe=dt.next())Fe=ue(ee,ut,Ue,Fe.value,Dt),Fe!==null&&(o&&Fe.alternate!==null&&ee.delete(Fe.key===null?Ue:Fe.key),at=C(Fe,at,Ue),zn===null?te=Fe:zn.sibling=Fe,zn=Fe);return o&&ee.forEach(function(xv){return u(ut,xv)}),Re&&Qt(ut,Ue),te}function No(ut,at,dt,Dt){if(typeof dt=="object"&&dt!==null&&dt.type===nu&&dt.key===null&&(dt=dt.props.children),typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case Hr:t:{for(var te=dt.key;at!==null;){if(at.key===te){if(te=dt.type,te===nu){if(at.tag===7){p(ut,at.sibling),Dt=b(at,dt.props.children),Dt.return=ut,ut=Dt;break t}}else if(at.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===vs&&Ka(te)===at.type){p(ut,at.sibling),Dt=b(at,dt.props),al(Dt,dt),Dt.return=ut,ut=Dt;break t}p(ut,at);break}else u(ut,at);at=at.sibling}dt.type===nu?(Dt=Ra(dt.props.children,ut.mode,Dt,dt.key),Dt.return=ut,ut=Dt):(Dt=El(dt.type,dt.key,dt.props,null,ut.mode,Dt),al(Dt,dt),Dt.return=ut,ut=Dt)}return O(ut);case eu:t:{for(te=dt.key;at!==null;){if(at.key===te)if(at.tag===4&&at.stateNode.containerInfo===dt.containerInfo&&at.stateNode.implementation===dt.implementation){p(ut,at.sibling),Dt=b(at,dt.children||[]),Dt.return=ut,ut=Dt;break t}else{p(ut,at);break}else u(ut,at);at=at.sibling}Dt=up(dt,ut.mode,Dt),Dt.return=ut,ut=Dt}return O(ut);case vs:return dt=Ka(dt),No(ut,at,dt,Dt)}if(po(dt))return wi(ut,at,dt,Dt);if(A(dt)){if(te=A(dt),typeof te!="function")throw Error(s(150));return dt=te.call(dt),Mc(ut,at,dt,Dt)}if(typeof dt.then=="function")return No(ut,at,ii(dt),Dt);if(dt.$$typeof===wa)return No(ut,at,Hn(ut,dt),Dt);Wa(ut,dt)}return typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint"?(dt=""+dt,at!==null&&at.tag===6?(p(ut,at.sibling),Dt=b(at,dt),Dt.return=ut,ut=Dt):(p(ut,at),Dt=lp(dt,ut.mode,Dt),Dt.return=ut,ut=Dt),O(ut)):p(ut,at)}return function(ut,at,dt,Dt){try{fu=0;var te=No(ut,at,dt,Dt);return Eo=null,te}catch(ee){if(ee===_i||ee===Va)throw ee;var zn=e(29,ee,null,ut.mode);return zn.lanes=Dt,zn.return=ut,zn}}}function Kl(){for(var o=Xr,u=du=Xr=0;u<o;){var p=Hi[u];Hi[u++]=null;var y=Hi[u];Hi[u++]=null;var b=Hi[u];Hi[u++]=null;var C=Hi[u];if(Hi[u++]=null,y!==null&&b!==null){var O=y.pending;O===null?b.next=b:(b.next=O.next,O.next=b),y.pending=b}C!==0&&Za(p,b,C)}}function Wl(o,u,p,y){Hi[Xr++]=o,Hi[Xr++]=u,Hi[Xr++]=p,Hi[Xr++]=y,du|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function Ja(o,u,p,y){return Wl(o,u,p,y),gn(o)}function vr(o,u){return Wl(o,null,null,u),gn(o)}function Za(o,u,p){o.lanes|=p;var y=o.alternate;y!==null&&(y.lanes|=p);for(var b=!1,C=o.return;C!==null;)C.childLanes|=p,y=C.alternate,y!==null&&(y.childLanes|=p),C.tag===22&&(o=C.stateNode,o===null||o._visibility&1||(b=!0)),o=C,C=C.return;return o.tag===3?(C=o.stateNode,b&&u!==null&&(b=31-js(p),o=C.hiddenUpdates,y=o[b],y===null?o[b]=[u]:y.push(u),u.lane=p|536870912),C):null}function gn(o){if(50<He)throw He=0,Af=null,Error(s(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}function ci(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ga(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function hs(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ki(o,u,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(Te&2)!==0){var b=y.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),y.pending=u,u=gn(o),Za(o,null,p),u}return Wl(o,y,u,p),gn(o)}function Jl(o,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var y=u.lanes;y&=o.pendingLanes,p|=y,u.lanes=p,z(o,p)}}function Ho(o,u){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var b=null,C=null;if(p=p.firstBaseUpdate,p!==null){do{var O={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};C===null?b=C=O:C=C.next=O,p=p.next}while(p!==null);C===null?b=C=u:C=C.next=u}else b=C=u;p={baseState:y.baseState,firstBaseUpdate:b,lastBaseUpdate:C,shared:y.shared,callbacks:y.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=u:o.next=u,p.lastBaseUpdate=u}function ea(){if(jd){var o=gi;if(o!==null)throw o}}function $a(o,u,p,y){jd=!1;var b=o.updateQueue;fa=!1;var C=b.firstBaseUpdate,O=b.lastBaseUpdate,J=b.shared.pending;if(J!==null){b.shared.pending=null;var mt=J,Ct=mt.next;mt.next=null,O===null?C=Ct:O.next=Ct,O=mt;var Lt=o.alternate;Lt!==null&&(Lt=Lt.updateQueue,J=Lt.lastBaseUpdate,J!==O&&(J===null?Lt.firstBaseUpdate=Ct:J.next=Ct,Lt.lastBaseUpdate=mt))}if(C!==null){var xt=b.baseState;O=0,Lt=Ct=mt=null,J=C;do{var zt=J.lane&-536870913,ue=zt!==J.lane;if(ue?(we&zt)===zt:(y&zt)===zt){zt!==0&&zt===xl&&(jd=!0),Lt!==null&&(Lt=Lt.next={lane:0,tag:J.tag,payload:J.payload,callback:null,next:null});t:{var wi=o,Mc=J;zt=u;var No=p;switch(Mc.tag){case 1:if(wi=Mc.payload,typeof wi=="function"){xt=wi.call(No,xt,zt);break t}xt=wi;break t;case 3:wi.flags=wi.flags&-65537|128;case 0:if(wi=Mc.payload,zt=typeof wi=="function"?wi.call(No,xt,zt):wi,zt==null)break t;xt=pd({},xt,zt);break t;case 2:fa=!0}}zt=J.callback,zt!==null&&(o.flags|=64,ue&&(o.flags|=8192),ue=b.callbacks,ue===null?b.callbacks=[zt]:ue.push(zt))}else ue={lane:zt,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Lt===null?(Ct=Lt=ue,mt=xt):Lt=Lt.next=ue,O|=zt;if(J=J.next,J===null){if(J=b.shared.pending,J===null)break;ue=J,J=ue.next,ue.next=null,b.lastBaseUpdate=ue,b.shared.pending=null}}while(!0);Lt===null&&(mt=xt),b.baseState=mt,b.firstBaseUpdate=Ct,b.lastBaseUpdate=Lt,C===null&&(b.shared.lanes=0),Dl|=O,o.lanes=O,o.memoizedState=xt}}function Ar(o,u){if(typeof o!="function")throw Error(s(191,o));o.call(u)}function Er(o,u){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)Ar(p[o],u)}function Zl(o,u){o=Wr,w(So,o),w(mu,u),Wr=o|u.baseLanes}function na(){w(So,Wr),w(mu,mu.current)}function On(){Wr=So.current,x(mu),x(So)}function ia(o){var u=o.alternate;w(qn,qn.current&1),w(Gs,o),Ts===null&&(u===null||mu.current!==null||u.memoizedState!==null)&&(Ts=o)}function Sr(o){w(qn,qn.current),w(Gs,o),Ts===null&&(Ts=o)}function Yi(o){o.tag===22?(w(qn,qn.current),w(Gs,o),Ts===null&&(Ts=o)):Pi()}function Pi(){w(qn,qn.current),w(Gs,Gs.current)}function fs(o){x(Gs),Ts===o&&(Ts=null),x(qn)}function $l(o){for(var u=o;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||_o(p)||Td(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function ln(){throw Error(s(321))}function Yu(o,u){if(u===null)return!1;for(var p=0;p<u.length&&p<o.length;p++)if(!Jn(o[p],u[p]))return!1;return!0}function Tr(o,u,p,y,b,C){return Nl=C,de=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Zt.H=o===null||o.memoizedState===null?kn:Kr,Ve=!1,C=p(y,b),Ve=!1,_e&&(C=sa(u,p,y,b)),ll(o),C}function ll(o){Zt.H=da;var u=Kt!==null&&Kt.next!==null;if(Nl=0,le=Kt=de=null,Ae=!1,ka=0,or=null,u)throw Error(s(300));o===null||yn||(o=o.dependencies,o!==null&&Ya(o)&&(yn=!0))}function sa(o,u,p,y){de=o;var b=0;do{if(_e&&(or=null),ka=0,_e=!1,25<=b)throw Error(s(301));if(b+=1,le=Kt=null,o.updateQueue!=null){var C=o.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}Zt.H=To,C=u(p,y)}while(_e);return C}function ds(){var o=Zt.H,u=o.useState()[0];return u=typeof u.then=="function"?un(u):u,o=o.useState()[0],(Kt!==null?Kt.memoizedState:null)!==o&&(de.flags|=1024),u}function Qu(){var o=Ji!==0;return Ji=0,o}function Rh(o,u,p){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~p}function to(o){if(Ae){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Ae=!1}Nl=0,le=Kt=de=null,_e=!1,ka=Ji=0,or=null}function hi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return le===null?de.memoizedState=le=o:le=le.next=o,le}function on(){if(Kt===null){var o=de.alternate;o=o!==null?o.memoizedState:null}else o=Kt.next;var u=le===null?de.memoizedState:le.next;if(u!==null)le=u,Kt=o;else{if(o===null)throw de.alternate===null?Error(s(467)):Error(s(310));Kt=o,o={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},le===null?de.memoizedState=le=o:le=le.next=o}return le}function _a(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function un(o){var u=ka;return ka+=1,or===null&&(or=[]),o=jo(or,o,u),u=de,(le===null?u.memoizedState:le.next)===null&&(u=u.alternate,Zt.H=u===null||u.memoizedState===null?kn:Kr),o}function tr(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return un(o);if(o.$$typeof===wa)return Dn(o)}throw Error(s(438,String(o)))}function ol(o){var u=null,p=de.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var y=de.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=_a(),de.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(o),y=0;y<o;y++)p[y]=hp;return u.index++,p}function Vs(o,u){return typeof u=="function"?u(o):u}function Le(o){var u=on();return ul(u,Kt,o)}function ul(o,u,p){var y=o.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=p;var b=o.baseQueue,C=y.pending;if(C!==null){if(b!==null){var O=b.next;b.next=C.next,C.next=O}u.baseQueue=b=C,y.pending=null}if(C=o.baseState,b===null)o.memoizedState=C;else{u=b.next;var J=O=null,mt=null,Ct=u,Lt=!1;do{var xt=Ct.lane&-536870913;if(xt!==Ct.lane?(we&xt)===xt:(Nl&xt)===xt){var zt=Ct.revertLane;if(zt===0)mt!==null&&(mt=mt.next={lane:0,revertLane:0,gesture:null,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null}),xt===xl&&(Lt=!0);else if((Nl&zt)===zt){Ct=Ct.next,zt===xl&&(Lt=!0);continue}else xt={lane:0,revertLane:Ct.revertLane,gesture:null,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},mt===null?(J=mt=xt,O=C):mt=mt.next=xt,de.lanes|=zt,Dl|=zt;xt=Ct.action,Ve&&p(C,xt),C=Ct.hasEagerState?Ct.eagerState:p(C,xt)}else zt={lane:xt,revertLane:Ct.revertLane,gesture:Ct.gesture,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},mt===null?(J=mt=zt,O=C):mt=mt.next=zt,de.lanes|=xt,Dl|=xt;Ct=Ct.next}while(Ct!==null&&Ct!==u);if(mt===null?O=C:mt.next=J,!Jn(C,o.memoizedState)&&(yn=!0,Lt&&(p=gi,p!==null)))throw p;o.memoizedState=C,o.baseState=O,o.baseQueue=mt,y.lastRenderedState=C}return b===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function br(o){var u=on(),p=u.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=o;var y=p.dispatch,b=p.pending,C=u.memoizedState;if(b!==null){p.pending=null;var O=b=b.next;do C=o(C,O.action),O=O.next;while(O!==b);Jn(C,u.memoizedState)||(yn=!0),u.memoizedState=C,u.baseQueue===null&&(u.baseState=C),p.lastRenderedState=C}return[C,y]}function aa(o,u,p){var y=de,b=on(),C=Re;if(C){if(p===void 0)throw Error(s(407));p=p()}else p=u();var O=!Jn((Kt||b).memoizedState,p);if(O&&(b.memoizedState=p,yn=!0),b=b.queue,Rr(wh.bind(null,y,b,o),[o]),b.getSnapshot!==u||O||le!==null&&le.memoizedState.tag&1){if(y.flags|=2048,Ei(9,{destroy:void 0},Xu.bind(null,y,b,p,u),null),Ee===null)throw Error(s(349));C||(Nl&127)!==0||$f(y,u,p)}return p}function $f(o,u,p){o.flags|=16384,o={getSnapshot:u,value:p},u=de.updateQueue,u===null?(u=_a(),de.updateQueue=u,u.stores=[o]):(p=u.stores,p===null?u.stores=[o]:p.push(o))}function Xu(o,u,p,y){u.value=p,u.getSnapshot=y,Ku(u)&&td(o)}function wh(o,u,p){return p(function(){Ku(u)&&td(o)})}function Ku(o){var u=o.getSnapshot;o=o.value;try{var p=u();return!Jn(o,p)}catch{return!0}}function td(o){var u=vr(o,2);u!==null&&Ln(u,o,2)}function xh(o){var u=hi();if(typeof o=="function"){var p=o;if(o=p(),Ve){G(!0);try{p()}finally{G(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:o},u}function er(o,u,p,y){return o.baseState=p,ul(o,Kt,typeof y=="function"?y:Vs)}function Ai(o,u,p,y,b){if(Ko(o))throw Error(s(485));if(o=u.action,o!==null){var C={payload:b,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){C.listeners.push(O)}};Zt.T!==null?p(!0):C.isTransition=!1,y(C),p=u.pending,p===null?(C.next=u.pending=C,Go(u,C)):(C.next=p.next,u.pending=p.next=C)}}function Go(o,u){var p=u.action,y=u.payload,b=o.state;if(u.isTransition){var C=Zt.T,O={};Zt.T=O;try{var J=p(b,y),mt=Zt.S;mt!==null&&mt(O,J),qo(o,u,J)}catch(Ct){ms(o,u,Ct)}finally{C!==null&&O.types!==null&&(C.types=O.types),Zt.T=C}}else try{C=p(b,y),qo(o,u,C)}catch(Ct){ms(o,u,Ct)}}function qo(o,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Cr(o,u,y)},function(y){return ms(o,u,y)}):Cr(o,u,p)}function Cr(o,u,p){u.status="fulfilled",u.value=p,Nh(u),o.state=p,u=o.pending,u!==null&&(p=u.next,p===u?o.pending=null:(p=p.next,u.next=p,Go(o,p)))}function ms(o,u,p){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=p,Nh(u),u=u.next;while(u!==y)}o.action=null}function Nh(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function Wu(o,u){return u}function Dh(o,u){if(Re){var p=Ee.formState;if(p!==null){t:{var y=de;if(Re){if(Cn){var b=y_(Cn,Es);if(b){Cn=v_(b),y=Dp(b);break t}}ie(y)}y=!1}y&&(u=p[0])}}p=hi(),p.memoizedState=p.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wu,lastRenderedState:u},p.queue=y,p=kh.bind(null,de,y),y.dispatch=p,y=xh(!1);var C=Xo.bind(null,de,!1,y.queue);return y=hi(),b={state:u,dispatch:null,action:o,pending:null},y.queue=b,p=Ai.bind(null,de,b,C,p),b.dispatch=p,y.memoizedState=o,[u,p,!1]}function ps(o){var u=on();return ya(u,Kt,o)}function ya(o,u,p){if(u=ul(o,u,Wu)[0],o=Le(Vs)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=un(u)}catch(O){throw O===_i?Va:O}else y=u;u=on();var b=u.queue,C=b.dispatch;return p!==u.memoizedState&&(de.flags|=2048,Ei(9,{destroy:void 0},Ih.bind(null,b,p),null)),[y,C,o]}function Ih(o,u){o.action=u}function nr(o){var u=on(),p=Kt;if(p!==null)return ya(u,p,o);on(),u=u.memoizedState,p=on();var y=p.queue.dispatch;return p.memoizedState=o,[u,y,!1]}function Ei(o,u,p,y){return o={tag:o,create:p,deps:y,inst:u,next:null},u=de.updateQueue,u===null&&(u=_a(),de.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,u.lastEffect=o),o}function Fo(){return on().memoizedState}function ra(o,u,p,y){var b=hi();de.flags|=o,b.memoizedState=Ei(1|u,{destroy:void 0},p,y===void 0?null:y)}function ir(o,u,p,y){var b=on();y=y===void 0?null:y;var C=b.memoizedState.inst;Kt!==null&&y!==null&&Yu(y,Kt.memoizedState.deps)?b.memoizedState=Ei(u,C,p,y):(de.flags|=o,b.memoizedState=Ei(1|u,C,p,y))}function eo(o,u){ra(8390656,8,o,u)}function Rr(o,u){ir(2048,8,o,u)}function _n(o){de.flags|=4;var u=de.updateQueue;if(u===null)u=_a(),de.updateQueue=u,u.events=[o];else{var p=u.events;p===null?u.events=[o]:p.push(o)}}function Ui(o){var u=on().memoizedState;return _n({ref:u,nextImpl:o}),function(){if((Te&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}function wr(o,u){return ir(4,2,o,u)}function no(o,u){return ir(4,4,o,u)}function cl(o,u){if(typeof u=="function"){o=o();var p=u(o);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function Oh(o,u,p){p=p!=null?p.concat([o]):null,ir(4,4,cl.bind(null,u,o),p)}function xr(){}function Yo(o,u){var p=on();u=u===void 0?null:u;var y=p.memoizedState;return u!==null&&Yu(u,y[1])?y[0]:(p.memoizedState=[o,u],o)}function Qi(o,u){var p=on();u=u===void 0?null:u;var y=p.memoizedState;if(u!==null&&Yu(u,y[1]))return y[0];if(y=o(),Ve){G(!0);try{o()}finally{G(!1)}}return p.memoizedState=[y,u],y}function hl(o,u,p){return p===void 0||(Nl&1073741824)!==0&&(we&261930)===0?o.memoizedState=u:(o.memoizedState=p,o=yl(),de.lanes|=o,Dl|=o,p)}function Mh(o,u,p,y){return Jn(p,u)?p:mu.current!==null?(o=hl(o,p,y),Jn(o,u)||(yn=!0),o):(Nl&42)===0||(Nl&1073741824)!==0&&(we&261930)===0?(yn=!0,o.memoizedState=p):(o=yl(),de.lanes|=o,Dl|=o,u)}function io(o,u,p,y,b){var C=xa();Ce(C!==0&&8>C?C:8);var O=Zt.T,J={};Zt.T=J,Xo(o,!1,u,p);try{var mt=b(),Ct=Zt.S;if(Ct!==null&&Ct(J,mt),mt!==null&&typeof mt=="object"&&typeof mt.then=="function"){var Lt=ta(mt,y);sr(o,u,Lt,Tn(o))}else sr(o,u,y,Tn(o))}catch(xt){sr(o,u,{then:function(){},status:"rejected",reason:xt},Tn())}finally{Ce(C),O!==null&&J.types!==null&&(O.types=J.types),Zt.T=O}}function Lh(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:ru,baseState:ru,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:ru},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:p},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function Qo(){return Dn(lu)}function fl(){return on().memoizedState}function Vh(){return on().memoizedState}function Ju(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var p=Tn();o=hs(p);var y=ki(u,o,p);y!==null&&(Ln(y,u,p),Jl(y,u,p)),u={cache:In()},o.payload=u;return}u=u.return}}function Km(o,u,p){var y=Tn();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ko(o)?Zu(u,p):(p=Ja(o,u,p,y),p!==null&&(Ln(p,o,y),$u(p,u,y)))}function kh(o,u,p){var y=Tn();sr(o,u,p,y)}function sr(o,u,p,y){var b={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ko(o))Zu(u,b);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=u.lastRenderedReducer,C!==null))try{var O=u.lastRenderedState,J=C(O,p);if(b.hasEagerState=!0,b.eagerState=J,Jn(J,O))return Wl(o,u,b,0),Ee===null&&Kl(),!1}catch{}if(p=Ja(o,u,b,y),p!==null)return Ln(p,o,y),$u(p,u,y),!0}return!1}function Xo(o,u,p,y){if(y={lane:2,revertLane:he(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Ko(o)){if(u)throw Error(s(479))}else u=Ja(o,p,y,2),u!==null&&Ln(u,o,2)}function Ko(o){var u=o.alternate;return o===de||u!==null&&u===de}function Zu(o,u){_e=Ae=!0;var p=o.pending;p===null?u.next=u:(u.next=p.next,p.next=u),o.pending=u}function $u(o,u,p){if((p&4194048)!==0){var y=u.lanes;y&=o.pendingLanes,p|=y,u.lanes=p,z(o,p)}}function tc(o,u,p,y){u=o.memoizedState,p=p(y,u),p=p==null?u:pd({},u,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}function dl(o,u,p,y,b,C,O){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,C,O):u.prototype&&u.prototype.isPureReactComponent?!cs(p,y)||!cs(b,C):!0}function Ph(o,u,p,y){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==o&&pf.enqueueReplaceState(u,u.state,null)}function Nr(o,u){var p=u;if("ref"in u){p={};for(var y in u)y!=="ref"&&(p[y]=u[y])}if(o=o.defaultProps){p===u&&(p=pd({},p));for(var b in o)p[b]===void 0&&(p[b]=o[b])}return p}function va(o,u){try{var p=o.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function ec(o,u,p){try{var y=o.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function nc(o,u,p){return p=hs(p),p.tag=3,p.payload={element:null},p.callback=function(){va(o,u)},p}function Uh(o){return o=hs(o),o.tag=3,o}function zh(o,u,p,y){var b=p.type.getDerivedStateFromError;if(typeof b=="function"){var C=y.value;o.payload=function(){return b(C)},o.callback=function(){ec(u,p,y)}}var O=p.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(o.callback=function(){ec(u,p,y),typeof b!="function"&&(Il===null?Il=new Set([this]):Il.add(this));var J=y.stack;this.componentDidCatch(y.value,{componentStack:J!==null?J:""})})}function ic(o,u,p,y,b){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=p.alternate,u!==null&&Ds(u,p,b,!0),p=Gs.current,p!==null){switch(p.tag){case 31:case 13:return Ts===null?dc():p.alternate===null&&Un===0&&(Un=3),p.flags&=-257,p.flags|=65536,p.lanes=b,y===Qr?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([y]):u.add(y),gc(o,y,b)),!1;case 22:return p.flags|=65536,y===Qr?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([y]):p.add(y)),gc(o,y,b)),!1}throw Error(s(435,p.tag))}return gc(o,y,b),dc(),!1}if(Re)return u=Gs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,y!==Ud&&(o=Error(s(422),{cause:y}),Zs(Ut(o,p)))):(y!==Ud&&(u=Error(s(423),{cause:y}),Zs(Ut(u,p))),o=o.current.alternate,o.flags|=65536,b&=-b,o.lanes|=b,y=Ut(y,p),b=nc(o.stateNode,y,b),Ho(o,b),Un!==4&&(Un=2)),!1;var C=Error(s(520),{cause:y});if(C=Ut(C,p),_f===null?_f=[C]:_f.push(C),Un!==4&&(Un=2),u===null)return!0;y=Ut(y,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,o=b&-b,p.lanes|=o,o=nc(p.stateNode,y,o),Ho(p,o),!1;case 1:if(u=p.type,C=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Il===null||!Il.has(C))))return p.flags|=65536,b&=-b,p.lanes|=b,b=Uh(b),zh(b,o,p,y),Ho(p,b),!1}p=p.return}while(p!==null);return!1}function Qe(o,u,p,y){u.child=o===null?Xp(u,null,p,y):ji(u,o.child,p,y)}function Bh(o,u,p,y,b){p=p.render;var C=u.ref;if("ref"in y){var O={};for(var J in y)J!=="ref"&&(O[J]=y[J])}else O=y;return Qa(u),y=Tr(o,u,p,O,C,b),J=Qu(),o!==null&&!yn?(Rh(o,u,b),Ir(o,u,b)):(Re&&J&&ft(u),u.flags|=1,Qe(o,u,y,b),u.child)}function jh(o,u,p,y,b){if(o===null){var C=p.type;return typeof C=="function"&&!Zo(C)&&C.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=C,ml(o,u,C,y,b)):(o=El(p.type,null,y,u,u.mode,b),o.ref=u.ref,o.return=u,u.child=o)}if(C=o.child,!Hh(o,b)){var O=C.memoizedProps;if(p=p.compare,p=p!==null?p:cs,p(O,y)&&o.ref===u.ref)return Ir(o,u,b)}return u.flags|=1,o=ua(C,y),o.ref=u.ref,o.return=u,u.child=o}function ml(o,u,p,y,b){if(o!==null){var C=o.memoizedProps;if(cs(C,y)&&o.ref===u.ref)if(yn=!1,u.pendingProps=y=C,Hh(o,b))(o.flags&131072)!==0&&(yn=!0);else return u.lanes=o.lanes,Ir(o,u,b)}return qe(o,u,p,y,b)}function _(o,u,p,y){var b=y.children,C=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((u.flags&128)!==0){if(C=C!==null?C.baseLanes|p:p,o!==null){for(y=u.child=o.child,b=0;y!==null;)b=b|y.lanes|y.childLanes,y=y.sibling;y=b&~C}else y=0,u.child=null;return D(o,u,C,p,y)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Ls(u,C!==null?C.cachePool:null),C!==null?Zl(u,C):na(),Yi(u);else return y=u.lanes=536870912,D(o,u,C!==null?C.baseLanes|p:p,p,y)}else C!==null?(Ls(u,C.cachePool),Zl(u,C),Pi(),u.memoizedState=null):(o!==null&&Ls(u,null),na(),Pi());return Qe(o,u,b,p),u.child}function R(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function D(o,u,p,y,b){var C=ui();return C=C===null?null:{parent:Kn?Rn._currentValue:Rn._currentValue2,pool:C},u.memoizedState={baseLanes:p,cachePool:C},o!==null&&Ls(u,null),na(),Yi(u),o!==null&&Ds(o,u,y,!0),u.childLanes=b,null}function U(o,u){return u=Aa({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function rt(o,u,p){return ji(u,o.child,null,p),o=U(u,u.pendingProps),o.flags|=2,fs(u),u.memoizedState=null,o}function pt(o,u,p){var y=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(Re){if(y.mode==="hidden")return o=U(u,y),u.lanes=536870912,R(null,o);if(Sr(u),(o=Cn)?(o=Op(o,Es),o!==null&&(u.memoizedState={dehydrated:o,treeContext:Ia!==null?{id:zi,overflow:rr}:null,retryLane:536870912,hydrationErrors:null},p=op(o),p.return=u,u.child=p,pi=u,Cn=null)):o=null,o===null)throw ie(u);return u.lanes=536870912,null}return U(u,y)}var C=o.memoizedState;if(C!==null){var O=C.dehydrated;if(Sr(u),b)if(u.flags&256)u.flags&=-257,u=rt(o,u,p);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(s(558));else if(yn||Ds(o,u,p,!1),b=(p&o.childLanes)!==0,yn||b){if(y=Ee,y!==null&&(O=F(y,p),O!==0&&O!==C.retryLane))throw C.retryLane=O,vr(o,O),Ln(y,o,O),bs;dc(),u=rt(o,u,p)}else o=C.treeContext,bn&&(Cn=T_(O),pi=u,Re=!0,Yr=null,Es=!1,o!==null&&jt(u,o)),u=U(u,y),u.flags|=4096;return u}return o=ua(o.child,{mode:y.mode,children:y.children}),o.ref=u.ref,u.child=o,o.return=u,o}function Ot(o,u){var p=u.ref;if(p===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(s(284));(o===null||o.ref!==p)&&(u.flags|=4194816)}}function qe(o,u,p,y,b){return Qa(u),p=Tr(o,u,p,y,void 0,b),y=Qu(),o!==null&&!yn?(Rh(o,u,b),Ir(o,u,b)):(Re&&y&&ft(u),u.flags|=1,Qe(o,u,p,b),u.child)}function Xn(o,u,p,y,b,C){return Qa(u),u.updateQueue=null,p=sa(u,y,p,b),ll(o),y=Qu(),o!==null&&!yn?(Rh(o,u,C),Ir(o,u,C)):(Re&&y&&ft(u),u.flags|=1,Qe(o,u,p,C),u.child)}function ye(o,u,p,y,b){if(Qa(u),u.stateNode===null){var C=Gr,O=p.contextType;typeof O=="object"&&O!==null&&(C=Dn(O)),C=new p(y,C),u.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=pf,u.stateNode=C,C._reactInternals=u,C=u.stateNode,C.props=y,C.state=u.memoizedState,C.refs={},ci(u),O=p.contextType,C.context=typeof O=="object"&&O!==null?Dn(O):Gr,C.state=u.memoizedState,O=p.getDerivedStateFromProps,typeof O=="function"&&(tc(u,p,O,y),C.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(O=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),O!==C.state&&pf.enqueueReplaceState(C,C.state,null),$a(u,y,C,b),ea(),C.state=u.memoizedState),typeof C.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(o===null){C=u.stateNode;var J=u.memoizedProps,mt=Nr(p,J);C.props=mt;var Ct=C.context,Lt=p.contextType;O=Gr,typeof Lt=="object"&&Lt!==null&&(O=Dn(Lt));var xt=p.getDerivedStateFromProps;Lt=typeof xt=="function"||typeof C.getSnapshotBeforeUpdate=="function",J=u.pendingProps!==J,Lt||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(J||Ct!==O)&&Ph(u,C,y,O),fa=!1;var zt=u.memoizedState;C.state=zt,$a(u,y,C,b),ea(),Ct=u.memoizedState,J||zt!==Ct||fa?(typeof xt=="function"&&(tc(u,p,xt,y),Ct=u.memoizedState),(mt=fa||dl(u,p,mt,y,zt,Ct,O))?(Lt||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(u.flags|=4194308)):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=Ct),C.props=y,C.state=Ct,C.context=O,y=mt):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{C=u.stateNode,ga(o,u),O=u.memoizedProps,Lt=Nr(p,O),C.props=Lt,xt=u.pendingProps,zt=C.context,Ct=p.contextType,mt=Gr,typeof Ct=="object"&&Ct!==null&&(mt=Dn(Ct)),J=p.getDerivedStateFromProps,(Ct=typeof J=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(O!==xt||zt!==mt)&&Ph(u,C,y,mt),fa=!1,zt=u.memoizedState,C.state=zt,$a(u,y,C,b),ea();var ue=u.memoizedState;O!==xt||zt!==ue||fa||o!==null&&o.dependencies!==null&&Ya(o.dependencies)?(typeof J=="function"&&(tc(u,p,J,y),ue=u.memoizedState),(Lt=fa||dl(u,p,Lt,y,zt,ue,mt)||o!==null&&o.dependencies!==null&&Ya(o.dependencies))?(Ct||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(y,ue,mt),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(y,ue,mt)),typeof C.componentDidUpdate=="function"&&(u.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof C.componentDidUpdate!="function"||O===o.memoizedProps&&zt===o.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&zt===o.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=ue),C.props=y,C.state=ue,C.context=mt,y=Lt):(typeof C.componentDidUpdate!="function"||O===o.memoizedProps&&zt===o.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&zt===o.memoizedState||(u.flags|=1024),y=!1)}return C=y,Ot(o,u),y=(u.flags&128)!==0,C||y?(C=u.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:C.render(),u.flags|=1,o!==null&&y?(u.child=ji(u,o.child,null,b),u.child=ji(u,null,p,b)):Qe(o,u,p,b),u.memoizedState=C.state,o=u.child):o=Ir(o,u,b),o}function fi(o,u,p,y){return Vi(),u.flags|=256,Qe(o,u,p,y),u.child}function si(o){return{baseLanes:o,cachePool:us()}}function Dr(o,u,p){return o=o!==null?o.childLanes&~p:0,u&&(o|=Cs),o}function gs(o,u,p){var y=u.pendingProps,b=!1,C=(u.flags&128)!==0,O;if((O=C)||(O=o!==null&&o.memoizedState===null?!1:(qn.current&2)!==0),O&&(b=!0,u.flags&=-129),O=(u.flags&32)!==0,u.flags&=-33,o===null){if(Re){if(b?ia(u):Pi(),(o=Cn)?(o=w_(o,Es),o!==null&&(u.memoizedState={dehydrated:o,treeContext:Ia!==null?{id:zi,overflow:rr}:null,retryLane:536870912,hydrationErrors:null},p=op(o),p.return=u,u.child=p,pi=u,Cn=null)):o=null,o===null)throw ie(u);return Td(o)?u.lanes=32:u.lanes=536870912,null}var J=y.children;return y=y.fallback,b?(Pi(),b=u.mode,J=Aa({mode:"hidden",children:J},b),y=Ra(y,b,p,null),J.return=u,y.return=u,J.sibling=y,u.child=J,y=u.child,y.memoizedState=si(p),y.childLanes=Dr(o,O,p),u.memoizedState=pu,R(null,y)):(ia(u),pl(u,J))}var mt=o.memoizedState;if(mt!==null&&(J=mt.dehydrated,J!==null)){if(C)u.flags&256?(ia(u),u.flags&=-257,u=Wo(o,u,p)):u.memoizedState!==null?(Pi(),u.child=o.child,u.flags|=128,u=null):(Pi(),J=y.fallback,b=u.mode,y=Aa({mode:"visible",children:y.children},b),J=Ra(J,b,p,null),J.flags|=2,y.return=u,J.return=u,y.sibling=J,u.child=y,ji(u,o.child,null,p),y=u.child,y.memoizedState=si(p),y.childLanes=Dr(o,O,p),u.memoizedState=pu,u=R(null,y));else if(ia(u),Td(J))O=bd(J).digest,y=Error(s(419)),y.stack="",y.digest=O,Zs({value:y,source:null,stack:null}),u=Wo(o,u,p);else if(yn||Ds(o,u,p,!1),O=(p&o.childLanes)!==0,yn||O){if(O=Ee,O!==null&&(y=F(O,p),y!==0&&y!==mt.retryLane))throw mt.retryLane=y,vr(o,y),Ln(O,o,y),bs;_o(J)||dc(),u=Wo(o,u,p)}else _o(J)?(u.flags|=192,u.child=o.child,u=null):(o=mt.treeContext,bn&&(Cn=b_(J),pi=u,Re=!0,Yr=null,Es=!1,o!==null&&jt(u,o)),u=pl(u,y.children),u.flags|=4096);return u}return b?(Pi(),J=y.fallback,b=u.mode,mt=o.child,C=mt.sibling,y=ua(mt,{mode:"hidden",children:y.children}),y.subtreeFlags=mt.subtreeFlags&65011712,C!==null?J=ua(C,J):(J=Ra(J,b,p,null),J.flags|=2),J.return=u,y.return=u,y.sibling=J,u.child=y,R(null,y),y=u.child,J=o.child.memoizedState,J===null?J=si(p):(b=J.cachePool,b!==null?(mt=Kn?Rn._currentValue:Rn._currentValue2,b=b.parent!==mt?{parent:mt,pool:mt}:b):b=us(),J={baseLanes:J.baseLanes|p,cachePool:b}),y.memoizedState=J,y.childLanes=Dr(o,O,p),u.memoizedState=pu,R(o.child,y)):(ia(u),p=o.child,o=p.sibling,p=ua(p,{mode:"visible",children:y.children}),p.return=u,p.sibling=null,o!==null&&(O=u.deletions,O===null?(u.deletions=[o],u.flags|=16):O.push(o)),u.child=p,u.memoizedState=null,p)}function pl(o,u){return u=Aa({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Aa(o,u){return o=e(22,o,null,u),o.lanes=0,o}function Wo(o,u,p){return ji(u,o.child,null,p),o=pl(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function H0(o,u,p){o.lanes|=u;var y=o.alternate;y!==null&&(y.lanes|=u),Ql(o.return,u,p)}function sc(o,u,p,y,b,C){var O=o.memoizedState;O===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:b,treeForkCount:C}:(O.isBackwards=u,O.rendering=null,O.renderingStartTime=0,O.last=y,O.tail=p,O.tailMode=b,O.treeForkCount=C)}function Wm(o,u,p){var y=u.pendingProps,b=y.revealOrder,C=y.tail;y=y.children;var O=qn.current,J=(O&2)!==0;if(J?(O=O&1|2,u.flags|=128):O&=1,w(qn,O),Qe(o,u,y,p),y=Re?ff:0,!J&&o!==null&&(o.flags&128)!==0)t:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&H0(o,p,u);else if(o.tag===19)H0(o,p,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break t;for(;o.sibling===null;){if(o.return===null||o.return===u)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(b){case"forwards":for(p=u.child,b=null;p!==null;)o=p.alternate,o!==null&&$l(o)===null&&(b=p),p=p.sibling;p=b,p===null?(b=u.child,u.child=null):(b=p.sibling,p.sibling=null),sc(u,!1,b,p,C,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,b=u.child,u.child=null;b!==null;){if(o=b.alternate,o!==null&&$l(o)===null){u.child=b;break}o=b.sibling,b.sibling=p,p=b,b=o}sc(u,!0,p,null,C,y);break;case"together":sc(u,!1,null,null,void 0,y);break;default:u.memoizedState=null}return u.child}function Ir(o,u,p){if(o!==null&&(u.dependencies=o.dependencies),Dl|=u.lanes,(p&u.childLanes)===0)if(o!==null){if(Ds(o,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(s(153));if(u.child!==null){for(o=u.child,p=ua(o,o.pendingProps),u.child=p,p.return=u;o.sibling!==null;)o=o.sibling,p=p.sibling=ua(o,o.pendingProps),p.return=u;p.sibling=null}return u.child}function Hh(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Ya(o)))}function Jm(o,u,p){switch(u.tag){case 3:qt(u,u.stateNode.containerInfo),ls(u,Rn,o.memoizedState.cache),Vi();break;case 27:case 5:ge(u);break;case 4:qt(u,u.stateNode.containerInfo);break;case 10:ls(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Sr(u),null;break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(ia(u),u.flags|=128,null):(p&u.child.childLanes)!==0?gs(o,u,p):(ia(u),o=Ir(o,u,p),o!==null?o.sibling:null);ia(u);break;case 19:var b=(o.flags&128)!==0;if(y=(p&u.childLanes)!==0,y||(Ds(o,u,p,!1),y=(p&u.childLanes)!==0),b){if(y)return Wm(o,u,p);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),w(qn,qn.current),y)break;return null;case 22:return u.lanes=0,_(o,u,p,u.pendingProps);case 24:ls(u,Rn,o.memoizedState.cache)}return Ir(o,u,p)}function Zm(o,u,p){if(o!==null)if(o.memoizedProps!==u.pendingProps)yn=!0;else{if(!Hh(o,p)&&(u.flags&128)===0)return yn=!1,Jm(o,u,p);yn=(o.flags&131072)!==0}else yn=!1,Re&&(u.flags&1048576)!==0&&K(u,ff,u.index);switch(u.lanes=0,u.tag){case 16:t:{var y=u.pendingProps;if(o=Ka(u.elementType),u.type=o,typeof o=="function")Zo(o)?(y=Nr(o,y),u.tag=1,u=ye(null,u,o,y,p)):(u.tag=0,u=qe(null,u,o,y,p));else{if(o!=null){var b=o.$$typeof;if(b===_c){u.tag=11,u=Bh(null,u,o,y,p);break t}else if(b===_d){u.tag=14,u=jh(null,u,o,y,p);break t}}throw u=E(o)||o,Error(s(306,u,""))}}return u;case 0:return qe(o,u,u.type,u.pendingProps,p);case 1:return y=u.type,b=Nr(y,u.pendingProps),ye(o,u,y,b,p);case 3:t:{if(qt(u,u.stateNode.containerInfo),o===null)throw Error(s(387));var C=u.pendingProps;b=u.memoizedState,y=b.element,ga(o,u),$a(u,C,null,p);var O=u.memoizedState;if(C=O.cache,ls(u,Rn,C),C!==b.cache&&gr(u,[Rn],p,!0),ea(),C=O.element,bn&&b.isDehydrated)if(b={element:C,isDehydrated:!1,cache:O.cache},u.updateQueue.baseState=b,u.memoizedState=b,u.flags&256){u=fi(o,u,C,p);break t}else if(C!==y){y=Ut(Error(s(424)),u),Zs(y),u=fi(o,u,C,p);break t}else for(bn&&(Cn=S_(u.stateNode.containerInfo),pi=u,Re=!0,Yr=null,Es=!0),p=Xp(u,null,C,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Vi(),C===y){u=Ir(o,u,p);break t}Qe(o,u,C,p)}u=u.child}return u;case 26:if(Na)return Ot(o,u),o===null?(p=Pp(u.type,null,u.pendingProps,null))?u.memoizedState=p:Re||(u.stateNode=xd(u.type,u.pendingProps,Bi.current,u)):u.memoizedState=Pp(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:if(mi)return ge(u),o===null&&mi&&Re&&(y=u.stateNode=Nd(u.type,u.pendingProps,Bi.current,Ci.current,!1),pi=u,Es=!0,Cn=Ip(u.type,y,Cn)),Qe(o,u,u.pendingProps.children,p),Ot(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Re&&(k_(u.type,u.pendingProps,Ci.current),(b=y=Cn)&&(y=C_(y,u.type,u.pendingProps,Es),y!==null?(u.stateNode=y,pi=u,Cn=E_(y),Es=!1,b=!0):b=!1),b||ie(u)),ge(u),b=u.type,C=u.pendingProps,O=o!==null?o.memoizedProps:null,y=C.children,As(b,C)?y=null:O!==null&&As(b,O)&&(u.flags|=32),u.memoizedState!==null&&(b=Tr(o,u,ds,null,null,p),Kn?lu._currentValue=b:lu._currentValue2=b),Ot(o,u),Qe(o,u,y,p),u.child;case 6:return o===null&&Re&&(kp(u.pendingProps,Ci.current),(o=p=Cn)&&(p=R_(p,u.pendingProps,Es),p!==null?(u.stateNode=p,pi=u,Cn=null,o=!0):o=!1),o||ie(u)),null;case 13:return gs(o,u,p);case 4:return qt(u,u.stateNode.containerInfo),y=u.pendingProps,o===null?u.child=ji(u,null,y,p):Qe(o,u,y,p),u.child;case 11:return Bh(o,u,u.type,u.pendingProps,p);case 7:return Qe(o,u,u.pendingProps,p),u.child;case 8:return Qe(o,u,u.pendingProps.children,p),u.child;case 12:return Qe(o,u,u.pendingProps.children,p),u.child;case 10:return y=u.pendingProps,ls(u,u.type,y.value),Qe(o,u,y.children,p),u.child;case 9:return b=u.type._context,y=u.pendingProps.children,Qa(u),b=Dn(b),y=y(b),u.flags|=1,Qe(o,u,y,p),u.child;case 14:return jh(o,u,u.type,u.pendingProps,p);case 15:return ml(o,u,u.type,u.pendingProps,p);case 19:return Wm(o,u,p);case 31:return pt(o,u,p);case 22:return _(o,u,p,u.pendingProps);case 24:return Qa(u),y=Dn(Rn),o===null?(b=ui(),b===null&&(b=Ee,C=In(),b.pooledCache=C,C.refCount++,C!==null&&(b.pooledCacheLanes|=p),b=C),u.memoizedState={parent:y,cache:b},ci(u),ls(u,Rn,b)):((o.lanes&p)!==0&&(ga(o,u),$a(u,null,null,p),ea()),b=o.memoizedState,C=u.memoizedState,b.parent!==y?(b={parent:y,cache:y},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),ls(u,Rn,y)):(y=C.cache,ls(u,Rn,y),y!==b.cache&&gr(u,[Rn],p,!0))),Qe(o,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(s(156,u.tag))}function Ea(o){o.flags|=4}function Gh(o){ca&&(o.flags|=8)}function G0(o,u){if(o!==null&&o.child===u.child)return!1;if((u.flags&16)!==0)return!0;for(o=u.child;o!==null;){if((o.flags&8218)!==0||(o.subtreeFlags&8218)!==0)return!0;o=o.sibling}return!1}function $m(o,u,p,y){if(Ie)for(p=u.child;p!==null;){if(p.tag===5||p.tag===6)sf(o,p.stateNode);else if(!(p.tag===4||mi&&p.tag===27)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}else if(ca)for(var b=u.child;b!==null;){if(b.tag===5){var C=b.stateNode;p&&y&&(C=__(C,b.type,b.memoizedProps)),sf(o,C)}else if(b.tag===6)C=b.stateNode,p&&y&&(C=Np(C,b.memoizedProps)),sf(o,C);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)C=b.child,C!==null&&(C.return=b),$m(o,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===u)break;for(;b.sibling===null;){if(b.return===null||b.return===u)return;b=b.return}b.sibling.return=b.return,b=b.sibling}}function q0(o,u,p,y){var b=!1;if(ca)for(var C=u.child;C!==null;){if(C.tag===5){var O=C.stateNode;p&&y&&(O=__(O,C.type,C.memoizedProps)),wp(o,O)}else if(C.tag===6)O=C.stateNode,p&&y&&(O=Np(O,C.memoizedProps)),wp(o,O);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)b=C.child,b!==null&&(b.return=C),q0(o,C,!0,!0),b=!0;else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===u)break;for(;C.sibling===null;){if(C.return===null||C.return===u)return b;C=C.return}C.sibling.return=C.return,C=C.sibling}return b}function F0(o,u){if(ca&&G0(o,u)){o=u.stateNode;var p=o.containerInfo,y=Rp();q0(y,u,!1,!1),o.pendingChildren=y,Ea(u),g_(p,y)}}function tp(o,u,p,y){if(Ie)o.memoizedProps!==y&&Ea(u);else if(ca){var b=o.stateNode,C=o.memoizedProps;if((o=G0(o,u))||C!==y){var O=Ci.current;C=p_(b,p,C,y,!o,null),C===b?u.stateNode=b:(Gh(u),zs(C,p,y,O)&&Ea(u),u.stateNode=C,o&&$m(C,u,!1,!1))}else u.stateNode=b}}function _s(o,u,p,y,b){if((o.mode&32)!==0&&(p===null?af(u,y):Sc(u,p,y))){if(o.flags|=16777216,(b&335544128)===b||pp(u,y))if(Vn(o.stateNode,u,y))o.flags|=8192;else if(De())o.flags|=8192;else throw Ss=Qr,Bd}else o.flags&=-16777217}function ac(o,u){if(jp(u)){if(o.flags|=16777216,!Hp(u))if(De())o.flags|=8192;else throw Ss=Qr,Bd}else o.flags&=-16777217}function qh(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?$():536870912,o.lanes|=u,Ic|=u)}function rc(o,u){if(!Re)switch(o.tailMode){case"hidden":u=o.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function cn(o){var u=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(u)for(var b=o.child;b!==null;)p|=b.lanes|b.childLanes,y|=b.subtreeFlags&65011712,y|=b.flags&65011712,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)p|=b.lanes|b.childLanes,y|=b.subtreeFlags,y|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=y,o.childLanes=p,u}function Y0(o,u,p){var y=u.pendingProps;switch(yt(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(u),null;case 1:return cn(u),null;case 3:return p=u.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),$s(Rn),Wt(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(Ns(u)?Ea(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,rs())),F0(o,u),cn(u),null;case 26:if(Na){var b=u.type,C=u.memoizedState;return o===null?(Ea(u),C!==null?(cn(u),ac(u,C)):(cn(u),_s(u,b,null,y,p))):C?C!==o.memoizedState?(Ea(u),cn(u),ac(u,C)):(cn(u),u.flags&=-16777217):(C=o.memoizedProps,Ie?C!==y&&Ea(u):tp(o,u,b,y),cn(u),_s(u,b,C,y,p)),null}case 27:if(mi){if(wt(u),p=Bi.current,b=u.type,o!==null&&u.stateNode!=null)Ie?o.memoizedProps!==y&&Ea(u):tp(o,u,b,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return cn(u),null}o=Ci.current,Ns(u)?as(u,o):(o=Nd(b,y,p,o,!0),u.stateNode=o,Ea(u))}return cn(u),null}case 5:if(wt(u),b=u.type,o!==null&&u.stateNode!=null)tp(o,u,b,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return cn(u),null}if(C=Ci.current,Ns(u))as(u,C),M_(u.stateNode,b,y,C)&&(u.flags|=64);else{var O=dp(b,y,Bi.current,C,u);Gh(u),$m(O,u,!1,!1),u.stateNode=O,zs(O,b,y,C)&&Ea(u)}}return cn(u),_s(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,p),null;case 6:if(o&&u.stateNode!=null)p=o.memoizedProps,Ie?p!==y&&Ea(u):ca&&(p!==y?(o=Bi.current,p=Ci.current,Gh(u),u.stateNode=bl(y,o,p,u)):u.stateNode=o.stateNode);else{if(typeof y!="string"&&u.stateNode===null)throw Error(s(166));if(o=Bi.current,p=Ci.current,Ns(u)){if(!bn)throw Error(s(176));if(o=u.stateNode,p=u.memoizedProps,y=null,b=pi,b!==null)switch(b.tag){case 27:case 5:y=b.memoizedProps}Tv(o,p,u,y)||ie(u,!0)}else Gh(u),u.stateNode=bl(y,o,p,u)}return cn(u),null;case 31:if(p=u.memoizedState,o===null||o.memoizedState!==null){if(y=Ns(u),p!==null){if(o===null){if(!y)throw Error(s(318));if(!bn)throw Error(s(556));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(557));Mp(o,u)}else Vi(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;cn(u),o=!1}else p=rs(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=p),o=!0;if(!o)return u.flags&256?(fs(u),u):(fs(u),null);if((u.flags&128)!==0)throw Error(s(558))}return cn(u),null;case 13:if(y=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(b=Ns(u),y!==null&&y.dehydrated!==null){if(o===null){if(!b)throw Error(s(318));if(!bn)throw Error(s(344));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));N_(b,u)}else Vi(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;cn(u),b=!1}else b=rs(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(fs(u),u):(fs(u),null)}return fs(u),(u.flags&128)!==0?(u.lanes=p,u):(p=y!==null,o=o!==null&&o.memoizedState!==null,p&&(y=u.child,b=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(b=y.alternate.memoizedState.cachePool.pool),C=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(C=y.memoizedState.cachePool.pool),C!==b&&(y.flags|=2048)),p!==o&&p&&(u.child.flags|=8192),qh(u,u.updateQueue),cn(u),null);case 4:return Wt(),F0(o,u),o===null&&en(u.stateNode.containerInfo),cn(u),null;case 10:return $s(u.type),cn(u),null;case 19:if(x(qn),y=u.memoizedState,y===null)return cn(u),null;if(b=(u.flags&128)!==0,C=y.rendering,C===null)if(b)rc(y,!1);else{if(Un!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(C=$l(o),C!==null){for(u.flags|=128,rc(y,!1),o=C.updateQueue,u.updateQueue=o,qh(u,o),u.subtreeFlags=0,o=p,p=u.child;p!==null;)fd(p,o),p=p.sibling;return w(qn,qn.current&1|2),Re&&Qt(u,y.treeForkCount),u.child}o=o.sibling}y.tail!==null&&Ki()>xo&&(u.flags|=128,b=!0,rc(y,!1),u.lanes=4194304)}else{if(!b)if(o=$l(C),o!==null){if(u.flags|=128,b=!0,o=o.updateQueue,u.updateQueue=o,qh(u,o),rc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!C.alternate&&!Re)return cn(u),null}else 2*Ki()-y.renderingStartTime>xo&&p!==536870912&&(u.flags|=128,b=!0,rc(y,!1),u.lanes=4194304);y.isBackwards?(C.sibling=u.child,u.child=C):(o=y.last,o!==null?o.sibling=C:u.child=C,y.last=C)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Ki(),o.sibling=null,p=qn.current,w(qn,b?p&1|2:p&1),Re&&Qt(u,y.treeForkCount),o):(cn(u),null);case 22:case 23:return fs(u),On(),y=u.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(p&536870912)!==0&&(u.flags&128)===0&&(cn(u),u.subtreeFlags&6&&(u.flags|=8192)):cn(u),p=u.updateQueue,p!==null&&qh(u,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048),o!==null&&x(Ao),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),$s(Rn),cn(u),null;case 25:return null;case 30:return null}throw Error(s(156,u.tag))}function ep(o,u){switch(yt(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return $s(Rn),Wt(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return wt(u),null;case 31:if(u.memoizedState!==null){if(fs(u),u.alternate===null)throw Error(s(340));Vi()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(fs(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(s(340));Vi()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return x(qn),null;case 4:return Wt(),null;case 10:return $s(u.type),null;case 22:case 23:return fs(u),On(),o!==null&&x(Ao),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return $s(Rn),null;case 25:return null;default:return null}}function Q0(o,u){switch(yt(u),u.tag){case 3:$s(Rn),Wt();break;case 26:case 27:case 5:wt(u);break;case 4:Wt();break;case 31:u.memoizedState!==null&&fs(u);break;case 13:fs(u);break;case 19:x(qn);break;case 10:$s(u.type);break;case 22:case 23:fs(u),On(),o!==null&&x(Ao);break;case 24:$s(Rn)}}function Or(o,u){try{var p=u.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var b=y.next;p=b;do{if((p.tag&o)===o){y=void 0;var C=p.create,O=p.inst;y=C(),O.destroy=y}p=p.next}while(p!==b)}}catch(J){se(u,u.return,J)}}function Mr(o,u,p){try{var y=u.updateQueue,b=y!==null?y.lastEffect:null;if(b!==null){var C=b.next;y=C;do{if((y.tag&o)===o){var O=y.inst,J=O.destroy;if(J!==void 0){O.destroy=void 0,b=u;var mt=p,Ct=J;try{Ct()}catch(Lt){se(b,mt,Lt)}}}y=y.next}while(y!==C)}}catch(Lt){se(u,u.return,Lt)}}function lc(o){var u=o.updateQueue;if(u!==null){var p=o.stateNode;try{Er(u,p)}catch(y){se(o,o.return,y)}}}function ed(o,u,p){p.props=Nr(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(y){se(o,u,y)}}function oc(o,u){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var y=vc(o.stateNode);break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof p=="function"?o.refCleanup=p(y):p.current=y}}catch(b){se(o,u,b)}}function Xi(o,u){var p=o.ref,y=o.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(b){se(o,u,b)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(b){se(o,u,b)}else p.current=null}function Jo(o){var u=o.type,p=o.memoizedProps,y=o.stateNode;try{l_(y,u,p,o)}catch(b){se(o,o.return,b)}}function Fh(o,u,p){try{o_(o.stateNode,o.type,p,u,o)}catch(y){se(o,o.return,y)}}function np(o){return o.tag===5||o.tag===3||(Na?o.tag===26:!1)||(mi?o.tag===27&&ou(o.type):!1)||o.tag===4}function gl(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||np(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(mi&&o.tag===27&&ou(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function nd(o,u,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?c_(p,o,u):Sp(p,o);else if(y!==4&&(mi&&y===27&&ou(o.type)&&(p=o.stateNode,u=null),o=o.child,o!==null))for(nd(o,u,p),o=o.sibling;o!==null;)nd(o,u,p),o=o.sibling}function Yh(o,u,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?u_(p,o,u):Ep(p,o);else if(y!==4&&(mi&&y===27&&ou(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(Yh(o,u,p),o=o.sibling;o!==null;)Yh(o,u,p),o=o.sibling}function ip(o,u,p){o=o.containerInfo;try{xp(o,p)}catch(y){se(u,u.return,y)}}function X0(o){var u=o.stateNode,p=o.memoizedProps;try{ri(o.type,p,u,o)}catch(y){se(o,o.return,y)}}function vv(o,u){for(yd(o.containerInfo),Zn=u;Zn!==null;)if(o=Zn,u=o.child,(o.subtreeFlags&1028)!==0&&u!==null)u.return=o,Zn=u;else for(;Zn!==null;){o=Zn;var p=o.alternate;switch(u=o.flags,o.tag){case 0:if((u&4)!==0&&(u=o.updateQueue,u=u!==null?u.events:null,u!==null))for(var y=0;y<u.length;y++){var b=u[y];b.ref.impl=b.nextImpl}break;case 11:case 15:break;case 1:if((u&1024)!==0&&p!==null){u=void 0,y=o,b=p.memoizedProps,p=p.memoizedState;var C=y.stateNode;try{var O=Nr(y.type,b);u=C.getSnapshotBeforeUpdate(O,p),C.__reactInternalSnapshotBeforeUpdate=u}catch(J){se(y,y.return,J)}}break;case 3:(u&1024)!==0&&Ie&&Cp(o.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(s(163))}if(u=o.sibling,u!==null){u.return=o.return,Zn=u;break}Zn=o.return}}function K0(o,u,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:ys(o,p),y&4&&Or(5,p);break;case 1:if(ys(o,p),y&4)if(o=p.stateNode,u===null)try{o.componentDidMount()}catch(O){se(p,p.return,O)}else{var b=Nr(p.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(b,u,o.__reactInternalSnapshotBeforeUpdate)}catch(O){se(p,p.return,O)}}y&64&&lc(p),y&512&&oc(p,p.return);break;case 3:if(ys(o,p),y&64&&(y=p.updateQueue,y!==null)){if(o=null,p.child!==null)switch(p.child.tag){case 27:case 5:o=vc(p.child.stateNode);break;case 1:o=p.child.stateNode}try{Er(y,o)}catch(O){se(p,p.return,O)}}break;case 27:mi&&u===null&&y&4&&X0(p);case 26:case 5:if(ys(o,p),u===null){if(y&4)Jo(p);else if(y&64){o=p.type,u=p.memoizedProps,b=p.stateNode;try{I_(b,o,u,p)}catch(O){se(p,p.return,O)}}}y&512&&oc(p,p.return);break;case 12:ys(o,p);break;case 31:ys(o,p),y&4&&Ta(o,p);break;case 13:ys(o,p),y&4&&Xh(o,p),y&64&&(y=p.memoizedState,y!==null&&(y=y.dehydrated,y!==null&&(p=Av.bind(null,p),Cd(y,p))));break;case 22:if(y=p.memoizedState!==null||Fn,!y){u=u!==null&&u.memoizedState!==null||Yn,b=Fn;var C=Yn;Fn=y,(Yn=u)&&!C?Ca(o,p,(p.subtreeFlags&8772)!==0):ys(o,p),Fn=b,Yn=C}break;case 30:break;default:ys(o,p)}}function sp(o){var u=o.alternate;u!==null&&(o.alternate=null,sp(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&vd(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Sa(o,u,p){for(p=p.child;p!==null;)Qh(o,u,p),p=p.sibling}function Qh(o,u,p){if(Hs&&typeof Hs.onCommitFiberUnmount=="function")try{Hs.onCommitFiberUnmount(hu,p)}catch{}switch(p.tag){case 26:if(Na){Yn||Xi(p,u),Sa(o,u,p),p.memoizedState?yo(p.memoizedState):p.stateNode&&Bp(p.stateNode);break}case 27:if(mi){Yn||Xi(p,u);var y=Pn,b=$n;ou(p.type)&&(Pn=p.stateNode,$n=!1),Sa(o,u,p),bi(p.stateNode),Pn=y,$n=b;break}case 5:Yn||Xi(p,u);case 6:if(Ie){if(y=Pn,b=$n,Pn=null,Sa(o,u,p),Pn=y,$n=b,Pn!==null)if($n)try{Tp(Pn,p.stateNode)}catch(C){se(p,u,C)}else try{h_(Pn,p.stateNode)}catch(C){se(p,u,C)}}else Sa(o,u,p);break;case 18:Ie&&Pn!==null&&($n?Rd(Pn,p.stateNode):Vp(Pn,p.stateNode));break;case 4:Ie?(y=Pn,b=$n,Pn=p.stateNode.containerInfo,$n=!0,Sa(o,u,p),Pn=y,$n=b):(ca&&ip(p.stateNode,p,Rp()),Sa(o,u,p));break;case 0:case 11:case 14:case 15:Mr(2,p,u),Yn||Mr(4,p,u),Sa(o,u,p);break;case 1:Yn||(Xi(p,u),y=p.stateNode,typeof y.componentWillUnmount=="function"&&ed(p,u,y)),Sa(o,u,p);break;case 21:Sa(o,u,p);break;case 22:Yn=(y=Yn)||p.memoizedState!==null,Sa(o,u,p),Yn=y;break;default:Sa(o,u,p)}}function Ta(o,u){if(bn&&u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{bv(o)}catch(p){se(u,u.return,p)}}}function Xh(o,u){if(bn&&u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Cv(o)}catch(p){se(u,u.return,p)}}function ba(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new Wp),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new Wp),u;default:throw Error(s(435,o.tag))}}function _l(o,u){var p=ba(o);u.forEach(function(y){if(!p.has(y)){p.add(y);var b=Ev.bind(null,o,y);y.then(b,b)}})}function Si(o,u){var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var b=p[y],C=o,O=u;if(Ie){var J=O;t:for(;J!==null;){switch(J.tag){case 27:if(mi){if(ou(J.type)){Pn=J.stateNode,$n=!1;break t}break}case 5:Pn=J.stateNode,$n=!1;break t;case 3:case 4:Pn=J.stateNode.containerInfo,$n=!0;break t}J=J.return}if(Pn===null)throw Error(s(160));Qh(C,O,b),Pn=null,$n=!1}else Qh(C,O,b);C=b.alternate,C!==null&&(C.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Kh(u,o),u=u.sibling}function Kh(o,u){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Si(u,o),Ti(o),y&4&&(Mr(3,o,o.return),Or(3,o),Mr(5,o,o.return));break;case 1:Si(u,o),Ti(o),y&512&&(Yn||p===null||Xi(p,p.return)),y&64&&Fn&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:if(Na){var b=Je;if(Si(u,o),Ti(o),y&512&&(Yn||p===null||Xi(p,p.return)),y&4){y=p!==null?p.memoizedState:null;var C=o.memoizedState;p===null?C===null?o.stateNode===null?o.stateNode=P_(b,o.type,o.memoizedProps,o):zp(b,o.type,o.stateNode):o.stateNode=Up(b,C,o.memoizedProps):y!==C?(y===null?p.stateNode!==null&&Bp(p.stateNode):yo(y),C===null?zp(b,o.type,o.stateNode):Up(b,C,o.memoizedProps)):C===null&&o.stateNode!==null&&Fh(o,o.memoizedProps,p.memoizedProps)}break}case 27:if(mi){Si(u,o),Ti(o),y&512&&(Yn||p===null||Xi(p,p.return)),p!==null&&y&4&&Fh(o,o.memoizedProps,p.memoizedProps);break}case 5:if(Si(u,o),Ti(o),y&512&&(Yn||p===null||Xi(p,p.return)),Ie){if(o.flags&32){b=o.stateNode;try{bp(b)}catch(xt){se(o,o.return,xt)}}y&4&&o.stateNode!=null&&(b=o.memoizedProps,Fh(o,b,p!==null?p.memoizedProps:b)),y&1024&&(Rc=!0)}else ca&&o.alternate!==null&&(o.alternate.stateNode=o.stateNode);break;case 6:if(Si(u,o),Ti(o),y&4&&Ie){if(o.stateNode===null)throw Error(s(162));y=o.memoizedProps,p=p!==null?p.memoizedProps:y,b=o.stateNode;try{r_(b,p,y)}catch(xt){se(o,o.return,xt)}}break;case 3:if(Na?(U_(),b=Je,Je=of(u.containerInfo),Si(u,o),Je=b):Si(u,o),Ti(o),y&4){if(Ie&&bn&&p!==null&&p.memoizedState.isDehydrated)try{O_(u.containerInfo)}catch(xt){se(o,o.return,xt)}if(ca){y=u.containerInfo,p=u.pendingChildren;try{xp(y,p)}catch(xt){se(o,o.return,xt)}}}Rc&&(Rc=!1,id(o));break;case 4:Na?(p=Je,Je=of(o.stateNode.containerInfo),Si(u,o),Ti(o),Je=p):(Si(u,o),Ti(o)),y&4&&ca&&ip(o.stateNode,o,o.stateNode.pendingChildren);break;case 12:Si(u,o),Ti(o);break;case 31:Si(u,o),Ti(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,_l(o,y)));break;case 13:Si(u,o),Ti(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(yf=Ki()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,_l(o,y)));break;case 22:b=o.memoizedState!==null;var O=p!==null&&p.memoizedState!==null,J=Fn,mt=Yn;if(Fn=J||b,Yn=mt||O,Si(u,o),Yn=mt,Fn=J,Ti(o),y&8192&&(u=o.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(p===null||O||Fn||Yn||so(o)),Ie)){t:if(p=null,Ie)for(u=o;;){if(u.tag===5||Na&&u.tag===26){if(p===null){O=p=u;try{C=O.stateNode,b?Sv(C):d_(O.stateNode,O.memoizedProps)}catch(xt){se(O,O.return,xt)}}}else if(u.tag===6){if(p===null){O=u;try{var Ct=O.stateNode;b?f_(Ct):m_(Ct,O.memoizedProps)}catch(xt){se(O,O.return,xt)}}}else if(u.tag===18){if(p===null){O=u;try{var Lt=O.stateNode;b?L_(Lt):V_(O.stateNode)}catch(xt){se(O,O.return,xt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break t;for(;u.sibling===null;){if(u.return===null||u.return===o)break t;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}}y&4&&(y=o.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,_l(o,p))));break;case 19:Si(u,o),Ti(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,_l(o,y)));break;case 30:break;case 21:break;default:Si(u,o),Ti(o)}}function Ti(o){var u=o.flags;if(u&2){try{for(var p,y=o.return;y!==null;){if(np(y)){p=y;break}y=y.return}if(Ie){if(p==null)throw Error(s(160));switch(p.tag){case 27:if(mi){var b=p.stateNode,C=gl(o);Yh(o,C,b);break}case 5:var O=p.stateNode;p.flags&32&&(bp(O),p.flags&=-33);var J=gl(o);Yh(o,J,O);break;case 3:case 4:var mt=p.stateNode.containerInfo,Ct=gl(o);nd(o,Ct,mt);break;default:throw Error(s(161))}}}catch(Lt){se(o,o.return,Lt)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function id(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;id(u),u.tag===5&&u.flags&1024&&_p(u.stateNode),o=o.sibling}}function ys(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)K0(o,u.alternate,u),u=u.sibling}function so(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Mr(4,u,u.return),so(u);break;case 1:Xi(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&ed(u,u.return,p),so(u);break;case 27:mi&&bi(u.stateNode);case 26:case 5:Xi(u,u.return),so(u);break;case 22:u.memoizedState===null&&so(u);break;case 30:so(u);break;default:so(u)}o=o.sibling}}function Ca(o,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,b=o,C=u,O=C.flags;switch(C.tag){case 0:case 11:case 15:Ca(b,C,p),Or(4,C);break;case 1:if(Ca(b,C,p),y=C,b=y.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Ct){se(y,y.return,Ct)}if(y=C,b=y.updateQueue,b!==null){var J=y.stateNode;try{var mt=b.shared.hiddenCallbacks;if(mt!==null)for(b.shared.hiddenCallbacks=null,b=0;b<mt.length;b++)Ar(mt[b],J)}catch(Ct){se(y,y.return,Ct)}}p&&O&64&&lc(C),oc(C,C.return);break;case 27:mi&&X0(C);case 26:case 5:Ca(b,C,p),p&&y===null&&O&4&&Jo(C),oc(C,C.return);break;case 12:Ca(b,C,p);break;case 31:Ca(b,C,p),p&&O&4&&Ta(b,C);break;case 13:Ca(b,C,p),p&&O&4&&Xh(b,C);break;case 22:C.memoizedState===null&&Ca(b,C,p),oc(C,C.return);break;case 30:break;default:Ca(b,C,p)}u=u.sibling}}function ao(o,u){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&Sn(p))}function ap(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Sn(o))}function Mn(o,u,p,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)sd(o,u,p,y),u=u.sibling}function sd(o,u,p,y){var b=u.flags;switch(u.tag){case 0:case 11:case 15:Mn(o,u,p,y),b&2048&&Or(9,u);break;case 1:Mn(o,u,p,y);break;case 3:Mn(o,u,p,y),b&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Sn(o)));break;case 12:if(b&2048){Mn(o,u,p,y),o=u.stateNode;try{var C=u.memoizedProps,O=C.id,J=C.onPostCommit;typeof J=="function"&&J(O,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(mt){se(u,u.return,mt)}}else Mn(o,u,p,y);break;case 31:Mn(o,u,p,y);break;case 13:Mn(o,u,p,y);break;case 23:break;case 22:C=u.stateNode,O=u.alternate,u.memoizedState!==null?C._visibility&2?Mn(o,u,p,y):uc(o,u):C._visibility&2?Mn(o,u,p,y):(C._visibility|=2,ks(o,u,p,y,(u.subtreeFlags&10256)!==0||!1)),b&2048&&ao(O,u);break;case 24:Mn(o,u,p,y),b&2048&&ap(u.alternate,u);break;default:Mn(o,u,p,y)}}function ks(o,u,p,y,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var C=o,O=u,J=p,mt=y,Ct=O.flags;switch(O.tag){case 0:case 11:case 15:ks(C,O,J,mt,b),Or(8,O);break;case 23:break;case 22:var Lt=O.stateNode;O.memoizedState!==null?Lt._visibility&2?ks(C,O,J,mt,b):uc(C,O):(Lt._visibility|=2,ks(C,O,J,mt,b)),b&&Ct&2048&&ao(O.alternate,O);break;case 24:ks(C,O,J,mt,b),b&&Ct&2048&&ap(O.alternate,O);break;default:ks(C,O,J,mt,b)}u=u.sibling}}function uc(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=o,y=u,b=y.flags;switch(y.tag){case 22:uc(p,y),b&2048&&ao(y.alternate,y);break;case 24:uc(p,y),b&2048&&ap(y.alternate,y);break;default:uc(p,y)}u=u.sibling}}function Lr(o,u,p){if(o.subtreeFlags&ma)for(o=o.child;o!==null;)ro(o,u,p),o=o.sibling}function ro(o,u,p){switch(o.tag){case 26:if(Lr(o,u,p),o.flags&ma)if(o.memoizedState!==null)z_(p,Je,o.memoizedState,o.memoizedProps);else{var y=o.stateNode,b=o.type;o=o.memoizedProps,((u&335544128)===u||pp(b,o))&&Ad(p,y,b,o)}break;case 5:Lr(o,u,p),o.flags&ma&&(y=o.stateNode,b=o.type,o=o.memoizedProps,((u&335544128)===u||pp(b,o))&&Ad(p,y,b,o));break;case 3:case 4:Na?(y=Je,Je=of(o.stateNode.containerInfo),Lr(o,u,p),Je=y):Lr(o,u,p);break;case 22:o.memoizedState===null&&(y=o.alternate,y!==null&&y.memoizedState!==null?(y=ma,ma=16777216,Lr(o,u,p),ma=y):Lr(o,u,p));break;default:Lr(o,u,p)}}function ad(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function cc(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];Zn=y,la(y,o)}ad(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)rd(o),o=o.sibling}function rd(o){switch(o.tag){case 0:case 11:case 15:cc(o),o.flags&2048&&Mr(9,o,o.return);break;case 3:cc(o);break;case 12:cc(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Wh(o)):cc(o);break;default:cc(o)}}function Wh(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];Zn=y,la(y,o)}ad(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Mr(8,u,u.return),Wh(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,Wh(u));break;default:Wh(u)}o=o.sibling}}function la(o,u){for(;Zn!==null;){var p=Zn;switch(p.tag){case 0:case 11:case 15:Mr(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Sn(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Zn=y;else t:for(p=o;Zn!==null;){y=Zn;var b=y.sibling,C=y.return;if(sp(y),y===p){Zn=null;break t}if(b!==null){b.return=C,Zn=b;break t}Zn=C}}}function lo(o){var u=fe(o);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if(o=Wn(o),o===null)throw Error(s(362));return o.stateNode.current}function oo(o,u){var p=o.tag;switch(u.$$typeof){case Pa:if(o.type===u.value)return!0;break;case xc:t:{for(u=u.value,o=[o,0],p=0;p<o.length;){var y=o[p++],b=y.tag,C=o[p++],O=u[C];if(b!==5&&b!==26&&b!==27||!go(y)){for(;O!=null&&oo(y,O);)C++,O=u[C];if(C===u.length){u=!0;break t}else for(y=y.child;y!==null;)o.push(y,C),y=y.sibling}}u=!1}return u;case Nc:if((p===5||p===26||p===27)&&Ap(o.stateNode,u.value))return!0;break;case bo:if((p===5||p===6||p===26||p===27)&&(o=rf(o),o!==null&&0<=o.indexOf(u.value)))return!0;break;case gf:if((p===5||p===26||p===27)&&(o=o.memoizedProps["data-testname"],typeof o=="string"&&o.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function hc(o){switch(o.$$typeof){case Pa:return"<"+(E(o.value)||"Unknown")+">";case xc:return":has("+(hc(o)||"")+")";case Nc:return'[role="'+o.value+'"]';case bo:return'"'+o.value+'"';case gf:return'[data-testname="'+o.value+'"]';default:throw Error(s(365))}}function fc(o,u){var p=[];o=[o,0];for(var y=0;y<o.length;){var b=o[y++],C=b.tag,O=o[y++],J=u[O];if(C!==5&&C!==26&&C!==27||!go(b)){for(;J!=null&&oo(b,J);)O++,J=u[O];if(O===u.length)p.push(b);else for(b=b.child;b!==null;)o.push(b,O),b=b.sibling}}return p}function Ps(o,u){if(!di)throw Error(s(363));o=lo(o),o=fc(o,u),u=[],o=Array.from(o);for(var p=0;p<o.length;){var y=o[p++],b=y.tag;if(b===5||b===26||b===27)go(y)||u.push(y.stateNode);else for(y=y.child;y!==null;)o.push(y),y=y.sibling}return u}function Tn(){return(Te&2)!==0&&we!==0?we&-we:Zt.T!==null?he():Ec()}function yl(){if(Cs===0)if((we&536870912)===0||Re){var o=cu;cu<<=1,(cu&3932160)===0&&(cu=262144),Cs=o}else Cs=536870912;return o=Gs.current,o!==null&&(o.flags|=32),Cs}function Ln(o,u,p){(o===Ee&&(Ze===2||Ze===9)||o.cancelPendingCommit!==null)&&(Gn(o,0),kr(o,we,Cs,!1)),nt(o,p),((Te&2)===0||o!==Ee)&&(o===Ee&&((Te&2)===0&&(wo|=p),Un===4&&kr(o,we,Cs,!1)),os(o))}function ar(o,u,p){if((Te&6)!==0)throw Error(s(327));var y=!p&&(u&127)===0&&(u&o.expiredLanes)===0||j(o,u),b=y?Z0(o,u):Pr(o,u,!0),C=y;do{if(b===0){Co&&!y&&kr(o,u,0,!1);break}else{if(p=o.current.alternate,C&&!W0(p)){b=Pr(o,u,!1),C=!1;continue}if(b===2){if(C=u,o.errorRecoveryDisabledLanes&C)var O=0;else O=o.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){u=O;t:{var J=o;b=_f;var mt=bn&&J.current.memoizedState.isDehydrated;if(mt&&(Gn(J,O).flags|=256),O=Pr(J,O,!1),O!==2){if(Ro&&!mt){J.errorRecoveryDisabledLanes|=C,wo|=C,b=4;break t}C=qs,qs=b,C!==null&&(qs===null?qs=C:qs.push.apply(qs,C))}b=O}if(C=!1,b!==2)continue}}if(b===1){Gn(o,0),kr(o,u,0,!0);break}t:{switch(y=o,C=b,C){case 0:case 1:throw Error(s(345));case 4:if((u&4194048)!==u)break;case 6:kr(y,u,Cs,!ur);break t;case 2:qs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((u&62914560)===u&&(b=yf+300-Ki(),10<b)){if(kr(y,u,Cs,!ur),B(y,0,!0)!==0)break t;Jr=u,y.timeoutHandle=mp(Vr.bind(null,y,p,qs,vf,Hd,u,Cs,wo,Ic,ur,C,"Throttled",-0,0),b);break t}Vr(y,p,qs,vf,Hd,u,Cs,wo,Ic,ur,C,null,-0,0)}}break}while(!0);os(o)}function Vr(o,u,p,y,b,C,O,J,mt,Ct,Lt,xt,zt,ue){if(o.timeoutHandle=Bs,xt=u.subtreeFlags,xt&8192||(xt&16785408)===16785408){xt=gp(),ro(u,C,xt);var wi=(C&62914560)===C?yf-Ki():(C&4194048)===C?_u-Ki():0;if(wi=a_(xt,wi),wi!==null){Jr=C,o.cancelPendingCommit=wi(zr.bind(null,o,u,C,p,y,b,O,J,mt,Lt,xt,null,zt,ue)),kr(o,C,O,!Ct);return}}zr(o,u,C,p,y,b,O,J,mt)}function W0(o){for(var u=o;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var b=p[y],C=b.getSnapshot;b=b.value;try{if(!Jn(C(),b))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function kr(o,u,p,y){u&=~Dc,u&=~wo,o.suspendedLanes|=u,o.pingedLanes&=~u,y&&(o.warmLanes|=u),y=o.expirationTimes;for(var b=u;0<b;){var C=31-js(b),O=1<<C;y[C]=-1,b&=~O}p!==0&&M(o,p,u)}function ld(){return(Te&6)===0?(Os(0),!1):!0}function od(){if(be!==null){if(Ze===0)var o=be.return;else o=be,lr=fn=null,to(o),Eo=null,fu=0,o=be;for(;o!==null;)Q0(o.alternate,o),o=o.return;be=null}}function Gn(o,u){var p=o.timeoutHandle;p!==Bs&&(o.timeoutHandle=Bs,s_(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),Jr=0,od(),Ee=o,be=p=ua(o.current,null),we=u,Ze=0,li=null,ur=!1,Co=j(o,u),Ro=!1,Ic=Cs=Dc=wo=Dl=Un=0,qs=_f=null,Hd=!1,(u&8)!==0&&(u|=u&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=u;0<y;){var b=31-js(y),C=1<<b;u|=o[b],y&=~C}return Wr=u,Kl(),p}function hn(o,u){de=null,Zt.H=da,u===_i||u===Va?(u=yr(),Ze=3):u===Bd?(u=yr(),Ze=4):Ze=u===bs?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,li=u,be===null&&(Un=1,va(o,Ut(u,o.current)))}function De(){var o=Gs.current;return o===null?!0:(we&4194048)===we?Ts===null:(we&62914560)===we||(we&536870912)!==0?o===Ts:!1}function vl(){var o=Zt.H;return Zt.H=da,o===null?da:o}function oa(){var o=Zt.A;return Zt.A=wc,o}function dc(){Un=4,ur||(we&4194048)!==we&&Gs.current!==null||(Co=!0),(Dl&134217727)===0&&(wo&134217727)===0||Ee===null||kr(Ee,we,Cs,!1)}function Pr(o,u,p){var y=Te;Te|=2;var b=vl(),C=oa();(Ee!==o||we!==u)&&(vf=null,Gn(o,u)),u=!1;var O=Un;t:do try{if(Ze!==0&&be!==null){var J=be,mt=li;switch(Ze){case 8:od(),O=6;break t;case 3:case 2:case 9:case 6:Gs.current===null&&(u=!0);var Ct=Ze;if(Ze=0,li=null,Ur(o,J,mt,Ct),p&&Co){O=0;break t}break;default:Ct=Ze,Ze=0,li=null,Ur(o,J,mt,Ct)}}J0(),O=Un;break}catch(Lt){hn(o,Lt)}while(!0);return u&&o.shellSuspendCounter++,lr=fn=null,Te=y,Zt.H=b,Zt.A=C,be===null&&(Ee=null,we=0,Kl()),O}function J0(){for(;be!==null;)uo(be)}function Z0(o,u){var p=Te;Te|=2;var y=vl(),b=oa();Ee!==o||we!==u?(vf=null,xo=Ki()+500,Gn(o,u)):Co=j(o,u);t:do try{if(Ze!==0&&be!==null){u=be;var C=li;e:switch(Ze){case 1:Ze=0,li=null,Ur(o,u,C,1);break;case 2:case 9:if(il(C)){Ze=0,li=null,ud(u);break}u=function(){Ze!==2&&Ze!==9||Ee!==o||(Ze=7),os(o)},C.then(u,u);break t;case 3:Ze=7;break t;case 4:Ze=5;break t;case 7:il(C)?(Ze=0,li=null,ud(u)):(Ze=0,li=null,Ur(o,u,C,7));break;case 5:var O=null;switch(be.tag){case 26:O=be.memoizedState;case 5:case 27:var J=be,mt=J.type,Ct=J.pendingProps;if(O?Hp(O):Vn(J.stateNode,mt,Ct)){Ze=0,li=null;var Lt=J.sibling;if(Lt!==null)be=Lt;else{var xt=J.return;xt!==null?(be=xt,pc(xt)):be=null}break e}}Ze=0,li=null,Ur(o,u,C,5);break;case 6:Ze=0,li=null,Ur(o,u,C,6);break;case 8:od(),Un=6;break t;default:throw Error(s(462))}}mc();break}catch(zt){hn(o,zt)}while(!0);return lr=fn=null,Zt.H=y,Zt.A=b,Te=p,be!==null?0:(Ee=null,we=0,Kl(),Un)}function mc(){for(;be!==null&&!j_();)uo(be)}function uo(o){var u=Zm(o.alternate,o,Wr);o.memoizedProps=o.pendingProps,u===null?pc(o):be=u}function ud(o){var u=o,p=u.alternate;switch(u.tag){case 15:case 0:u=Xn(p,u,u.pendingProps,u.type,void 0,we);break;case 11:u=Xn(p,u,u.pendingProps,u.type.render,u.ref,we);break;case 5:to(u);default:Q0(p,u),u=be=fd(u,Wr),u=Zm(p,u,Wr)}o.memoizedProps=o.pendingProps,u===null?pc(o):be=u}function Ur(o,u,p,y){lr=fn=null,to(u),Eo=null,fu=0;var b=u.return;try{if(ic(o,b,u,p,we)){Un=1,va(o,Ut(p,o.current)),be=null;return}}catch(C){if(b!==null)throw be=b,C;Un=1,va(o,Ut(p,o.current)),be=null;return}u.flags&32768?(Re||y===1?o=!0:Co||(we&536870912)!==0?o=!1:(ur=o=!0,(y===2||y===9||y===3||y===6)&&(y=Gs.current,y!==null&&y.tag===13&&(y.flags|=16384))),co(u,o)):pc(u)}function pc(o){var u=o;do{if((u.flags&32768)!==0){co(u,ur);return}o=u.return;var p=Y0(u.alternate,u,Wr);if(p!==null){be=p;return}if(u=u.sibling,u!==null){be=u;return}be=u=o}while(u!==null);Un===0&&(Un=5)}function co(o,u){do{var p=ep(o.alternate,o);if(p!==null){p.flags&=32767,be=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(o=o.sibling,o!==null)){be=o;return}be=o=p}while(o!==null);Un=6,be=null}function zr(o,u,p,y,b,C,O,J,mt){o.cancelPendingCommit=null;do jr();while(oi!==0);if((Te&6)!==0)throw Error(s(327));if(u!==null){if(u===o.current)throw Error(s(177));if(C=u.lanes|u.childLanes,C|=du,P(o,p,C,O,J,mt),o===Ee&&(be=Ee=null,we=0),yu=u,Ol=o,Jr=p,Oc=C,Gd=b,Jp=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,ai(cf,function(){return Jh(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=Zt.T,Zt.T=null,b=xa(),Ce(2),O=Te,Te|=4;try{vv(o,u,p)}finally{Te=O,Ce(b),Zt.T=y}}oi=1,Al(),Br(),cd()}}function Al(){if(oi===1){oi=0;var o=Ol,u=yu,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=Zt.T,Zt.T=null;var y=xa();Ce(2);var b=Te;Te|=4;try{Kh(u,o),i_(o.containerInfo)}finally{Te=b,Ce(y),Zt.T=p}}o.current=u,oi=2}}function Br(){if(oi===2){oi=0;var o=Ol,u=yu,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=Zt.T,Zt.T=null;var y=xa();Ce(2);var b=Te;Te|=4;try{K0(o,u.alternate,u)}finally{Te=b,Ce(y),Zt.T=p}}oi=3}}function cd(){if(oi===4||oi===3){oi=0,qp();var o=Ol,u=yu,p=Jr,y=Jp;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?oi=5:(oi=0,yu=Ol=null,hd(o,o.pendingLanes));var b=o.pendingLanes;if(b===0&&(Il=null),Q(p),u=u.stateNode,Hs&&typeof Hs.onCommitFiberRoot=="function")try{Hs.onCommitFiberRoot(hu,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=Zt.T,b=xa(),Ce(2),Zt.T=null;try{for(var C=o.onRecoverableError,O=0;O<y.length;O++){var J=y[O];C(J.value,{componentStack:J.stack})}}finally{Zt.T=u,Ce(b)}}(Jr&3)!==0&&jr(),os(o),b=o.pendingLanes,(p&261930)!==0&&(b&42)!==0?o===Af?He++:(He=0,Af=o):He=0,bn&&lf(),Os(0)}}function hd(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Sn(u)))}function jr(){return Al(),Br(),cd(),Jh()}function Jh(){if(oi!==5)return!1;var o=Ol,u=Oc;Oc=0;var p=Q(Jr),y=32>p?32:p;p=Zt.T;var b=xa();try{Ce(y),Zt.T=null,y=Gd,Gd=null;var C=Ol,O=Jr;if(oi=0,yu=Ol=null,Jr=0,(Te&6)!==0)throw Error(s(331));var J=Te;if(Te|=4,rd(C.current),sd(C,C.current,O,y),Te=J,Os(0,!1),Hs&&typeof Hs.onPostCommitFiberRoot=="function")try{Hs.onPostCommitFiberRoot(hu,C)}catch{}return!0}finally{Ce(b),Zt.T=p,hd(o,u)}}function ho(o,u,p){u=Ut(p,u),u=nc(o.stateNode,u,2),o=ki(o,u,2),o!==null&&(nt(o,2),os(o))}function se(o,u,p){if(o.tag===3)ho(o,o,p);else for(;u!==null;){if(u.tag===3){ho(u,o,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Il===null||!Il.has(y))){o=Ut(p,o),p=Uh(2),y=ki(u,p,2),y!==null&&(zh(p,y,u,o),nt(y,2),os(y));break}}u=u.return}}function gc(o,u,p){var y=o.pingCache;if(y===null){y=o.pingCache=new pa;var b=new Set;y.set(u,b)}else b=y.get(u),b===void 0&&(b=new Set,y.set(u,b));b.has(p)||(Ro=!0,b.add(p),o=$0.bind(null,o,u,p),u.then(o,o))}function $0(o,u,p){var y=o.pingCache;y!==null&&y.delete(u),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,Ee===o&&(we&p)===p&&(Un===4||Un===3&&(we&62914560)===we&&300>Ki()-yf?(Te&2)===0&&Gn(o,0):Dc|=p,Ic===we&&(Ic=0)),os(o)}function t_(o,u){u===0&&(u=$()),o=vr(o,u),o!==null&&(nt(o,u),os(o))}function Av(o){var u=o.memoizedState,p=0;u!==null&&(p=u.retryLane),t_(o,p)}function Ev(o,u){var p=0;switch(o.tag){case 31:case 13:var y=o.stateNode,b=o.memoizedState;b!==null&&(p=b.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(s(314))}y!==null&&y.delete(u),t_(o,p)}function ai(o,u){return uf(o,u)}function rp(o,u,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zo(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ua(o,u){var p=o.alternate;return p===null?(p=e(o.tag,u,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=u,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,u=o.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function fd(o,u){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,u=p.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function El(o,u,p,y,b,C){var O=0;if(y=o,typeof o=="function")Zo(o)&&(O=1);else if(typeof o=="string")O=Na&&mi?wd(o,p,Ci.current)?26:Gp(o)?27:5:Na?wd(o,p,Ci.current)?26:5:mi&&Gp(o)?27:5;else t:switch(o){case ef:return o=e(31,p,u,b),o.elementType=ef,o.lanes=C,o;case nu:return Ra(p.children,b,C,u);case iu:O=8,b|=24;break;case su:return o=e(12,p,u,b|2),o.elementType=su,o.lanes=C,o;case gd:return o=e(13,p,u,b),o.elementType=gd,o.lanes=C,o;case Sl:return o=e(19,p,u,b),o.elementType=Sl,o.lanes=C,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case wa:O=10;break t;case tf:O=9;break t;case _c:O=11;break t;case _d:O=14;break t;case vs:O=16,y=null;break t}O=29,p=Error(s(130,o===null?"null":typeof o,"")),y=null}return u=e(O,p,u,b),u.elementType=o,u.type=y,u.lanes=C,u}function Ra(o,u,p,y){return o=e(7,o,y,u),o.lanes=p,o}function lp(o,u,p){return o=e(6,o,null,u),o.lanes=p,o}function op(o){var u=e(18,null,null,0);return u.stateNode=o,u}function up(o,u,p){return u=e(4,o.children!==null?o.children:[],o.key,u),u.lanes=p,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}function e_(o,u,p,y,b,C,O,J,mt){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Bs,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z(0),this.hiddenUpdates=Z(null),this.identifierPrefix=y,this.onUncaughtError=b,this.onCaughtError=C,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=mt,this.incompleteTransitions=new Map}function fo(o,u,p,y,b,C,O,J,mt,Ct,Lt,xt){return o=new e_(o,u,p,O,mt,Ct,Lt,xt,J),u=1,C===!0&&(u|=24),C=e(3,null,null,u),o.current=C,C.stateNode=o,u=In(),u.refCount++,o.pooledCache=u,u.refCount++,C.memoizedState={element:y,isDehydrated:p,cache:u},ci(C),o}function dd(o){return o?(o=Gr,o):Gr}function Zh(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=f(u),o=o!==null?m(o):null,o===null?null:vc(o.stateNode)}function cp(o,u,p,y,b,C){b=dd(b),y.context===null?y.context=b:y.pendingContext=b,y=hs(u),y.payload={element:p},C=C===void 0?null:C,C!==null&&(y.callback=C),p=ki(o,y,u),p!==null&&(Ln(p,o,u),Jl(p,o,u))}function $o(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<u?p:u}}function $h(o,u){$o(o,u),(o=o.alternate)&&$o(o,u)}var ve={},md=x1(),Us=XA(),pd=Object.assign,tu=Symbol.for("react.element"),Hr=Symbol.for("react.transitional.element"),eu=Symbol.for("react.portal"),nu=Symbol.for("react.fragment"),iu=Symbol.for("react.strict_mode"),su=Symbol.for("react.profiler"),tf=Symbol.for("react.consumer"),wa=Symbol.for("react.context"),_c=Symbol.for("react.forward_ref"),gd=Symbol.for("react.suspense"),Sl=Symbol.for("react.suspense_list"),_d=Symbol.for("react.memo"),vs=Symbol.for("react.lazy"),ef=Symbol.for("react.activity"),hp=Symbol.for("react.memo_cache_sentinel"),Tl=Symbol.iterator,mo=Symbol.for("react.client.reference"),po=Array.isArray,Zt=md.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fp=t.rendererVersion,nf=t.rendererPackageName,yc=t.extraDevToolsConfig,vc=t.getPublicInstance,n_=t.getRootHostContext,Ac=t.getChildHostContext,yd=t.prepareForCommit,i_=t.resetAfterCommit,dp=t.createInstance;t.cloneMutableInstance;var sf=t.appendInitialChild,zs=t.finalizeInitialChildren,As=t.shouldSetTextContent,bl=t.createTextInstance;t.cloneMutableTextInstance;var mp=t.scheduleTimeout,s_=t.cancelTimeout,Bs=t.noTimeout,Kn=t.isPrimaryRenderer;t.warnsIfNotActing;var Ie=t.supportsMutation,ca=t.supportsPersistence,bn=t.supportsHydration,fe=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var en=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Ce=t.setCurrentUpdatePriority,xa=t.getCurrentUpdatePriority,Ec=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var au=t.shouldAttemptEagerTransition,vd=t.detachDeletedInstance;t.requestPostPaintCallback;var af=t.maySuspendCommit,Sc=t.maySuspendCommitOnUpdate,pp=t.maySuspendCommitInSyncRender,Vn=t.preloadInstance,gp=t.startSuspendingCommit,Ad=t.suspendInstance;t.suspendOnActiveViewTransition;var a_=t.waitForCommitToBeReady;t.getSuspendedCommitReason;var ru=t.NotPendingTransition,lu=t.HostTransitionContext,_p=t.resetFormInstance;t.bindToConsole;var yp=t.supportsMicrotasks,vp=t.scheduleMicrotask,di=t.supportsTestSelectors,Wn=t.findFiberRoot,Ed=t.getBoundingRect,rf=t.getTextContent,go=t.isHiddenSubtree,Ap=t.matchAccessibilityRole,Cl=t.setFocusIfFocusable,Sd=t.setupIntersectionObserver,Ep=t.appendChild,Sp=t.appendChildToContainer,r_=t.commitTextUpdate,l_=t.commitMount,o_=t.commitUpdate,u_=t.insertBefore,c_=t.insertInContainerBefore,h_=t.removeChild,Tp=t.removeChildFromContainer,bp=t.resetTextContent,Sv=t.hideInstance,f_=t.hideTextInstance,d_=t.unhideInstance,m_=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopViewTransition,t.getCurrentGestureOffset,t.createViewTransitionInstance;var Cp=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var p_=t.cloneInstance,Rp=t.createContainerChildSet,wp=t.appendChildToContainerChildSet,g_=t.finalizeContainerChildren,xp=t.replaceContainerChildren,__=t.cloneHiddenInstance,Np=t.cloneHiddenTextInstance,_o=t.isSuspenseInstancePending,Td=t.isSuspenseInstanceFallback,bd=t.getSuspenseInstanceFallbackErrorDetails,Cd=t.registerSuspenseInstanceRetry,y_=t.canHydrateFormStateMarker,Dp=t.isFormStateMarkerMatching,v_=t.getNextHydratableSibling,A_=t.getNextHydratableSiblingAfterSingleton,E_=t.getFirstHydratableChild,S_=t.getFirstHydratableChildWithinContainer,T_=t.getFirstHydratableChildWithinActivityInstance,b_=t.getFirstHydratableChildWithinSuspenseInstance,Ip=t.getFirstHydratableChildWithinSingleton,C_=t.canHydrateInstance,R_=t.canHydrateTextInstance,Op=t.canHydrateActivityInstance,w_=t.canHydrateSuspenseInstance,x_=t.hydrateInstance,Tv=t.hydrateTextInstance,Mp=t.hydrateActivityInstance,N_=t.hydrateSuspenseInstance,D_=t.getNextHydratableInstanceAfterActivityInstance,Lp=t.getNextHydratableInstanceAfterSuspenseInstance,I_=t.commitHydratedInstance,O_=t.commitHydratedContainer,bv=t.commitHydratedActivityInstance,Cv=t.commitHydratedSuspenseInstance,M_=t.finalizeHydratedChildren,lf=t.flushHydrationEvents;t.clearActivityBoundary;var Vp=t.clearSuspenseBoundary;t.clearActivityBoundaryFromContainer;var Rd=t.clearSuspenseBoundaryFromContainer,L_=t.hideDehydratedBoundary,V_=t.unhideDehydratedBoundary,Tc=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var k_=t.validateHydratableInstance,kp=t.validateHydratableTextInstance,Na=t.supportsResources,wd=t.isHostHoistableType,of=t.getHoistableRoot,Pp=t.getResource,Up=t.acquireResource,yo=t.releaseResource,P_=t.hydrateHoistable,zp=t.mountHoistable,Bp=t.unmountHoistable,xd=t.createHoistableInstance,U_=t.prepareToCommitHoistables,jp=t.mayResourceSuspendCommit,Hp=t.preloadResource,z_=t.suspendResource,mi=t.supportsSingletons,Nd=t.resolveSingletonInstance,ri=t.acquireSingletonInstance,bi=t.releaseSingletonInstance,Gp=t.isHostSingletonType,ou=t.isSingletonScope,Dd=[],uu=-1,Gr={},js=Math.clz32?Math.clz32:I,Id=Math.log,B_=Math.LN2,Od=256,cu=262144,bc=4194304,uf=Us.unstable_scheduleCallback,Md=Us.unstable_cancelCallback,j_=Us.unstable_shouldYield,qp=Us.unstable_requestPaint,Ki=Us.unstable_now,Ld=Us.unstable_ImmediatePriority,H_=Us.unstable_UserBlockingPriority,cf=Us.unstable_NormalPriority,Vd=Us.unstable_IdlePriority,Fp=Us.log,G_=Us.unstable_setDisableYieldValue,hu=null,Hs=null,Jn=typeof Object.is=="function"?Object.is:Yt,kd=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Rv=Object.prototype.hasOwnProperty,Pd,qr,hf=!1,Yp=new WeakMap,Rl=[],Fr=0,nn=null,ff=0,Da=[],ha=0,Ia=null,zi=1,rr="",Ci=T(null),wl=T(null),Bi=T(null),df=T(null),pi=null,Cn=null,Re=!1,Yr=null,Es=!1,Ud=Error(s(519)),Oa=T(null),fn=null,lr=null,q_=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(p,y){o.push(y)}};this.abort=function(){u.aborted=!0,o.forEach(function(p){return p()})}},Ri=Us.unstable_scheduleCallback,wv=Us.unstable_NormalPriority,Rn={$$typeof:wa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},mf=null,We=null,Wi=!1,Ma=!1,zd=!1,vo=0,Cc=null,Qp=0,xl=0,gi=null,La=Zt.S;Zt.S=function(o,u){_u=Ki(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&Ge(o,u),La!==null&&La(o,u)};var Ao=T(null),_i=Error(s(460)),Bd=Error(s(474)),Va=Error(s(542)),Qr={then:function(){}},Ss=null,Eo=null,fu=0,ji=rl(!0),Xp=rl(!1),Hi=[],Xr=0,du=0,fa=!1,jd=!1,mu=T(null),So=T(0),Gs=T(null),Ts=null,qn=T(0),Nl=0,de=null,Kt=null,le=null,Ae=!1,_e=!1,Ve=!1,Ji=0,ka=0,or=null,Kp=0,da={readContext:Dn,use:tr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln};da.useEffectEvent=ln;var kn={readContext:Dn,use:tr,useCallback:function(o,u){return hi().memoizedState=[o,u===void 0?null:u],o},useContext:Dn,useEffect:eo,useImperativeHandle:function(o,u,p){p=p!=null?p.concat([o]):null,ra(4194308,4,cl.bind(null,u,o),p)},useLayoutEffect:function(o,u){return ra(4194308,4,o,u)},useInsertionEffect:function(o,u){ra(4,2,o,u)},useMemo:function(o,u){var p=hi();u=u===void 0?null:u;var y=o();if(Ve){G(!0);try{o()}finally{G(!1)}}return p.memoizedState=[y,u],y},useReducer:function(o,u,p){var y=hi();if(p!==void 0){var b=p(u);if(Ve){G(!0);try{p(u)}finally{G(!1)}}}else b=u;return y.memoizedState=y.baseState=b,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:b},y.queue=o,o=o.dispatch=Km.bind(null,de,o),[y.memoizedState,o]},useRef:function(o){var u=hi();return o={current:o},u.memoizedState=o},useState:function(o){o=xh(o);var u=o.queue,p=kh.bind(null,de,u);return u.dispatch=p,[o.memoizedState,p]},useDebugValue:xr,useDeferredValue:function(o,u){var p=hi();return hl(p,o,u)},useTransition:function(){var o=xh(!1);return o=io.bind(null,de,o.queue,!0,!1),hi().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,p){var y=de,b=hi();if(Re){if(p===void 0)throw Error(s(407));p=p()}else{if(p=u(),Ee===null)throw Error(s(349));(we&127)!==0||$f(y,u,p)}b.memoizedState=p;var C={value:p,getSnapshot:u};return b.queue=C,eo(wh.bind(null,y,C,o),[o]),y.flags|=2048,Ei(9,{destroy:void 0},Xu.bind(null,y,C,p,u),null),p},useId:function(){var o=hi(),u=Ee.identifierPrefix;if(Re){var p=rr,y=zi;p=(y&~(1<<32-js(y)-1)).toString(32)+p,u="_"+u+"R_"+p,p=Ji++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=Kp++,u="_"+u+"r_"+p.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:Qo,useFormState:Dh,useActionState:Dh,useOptimistic:function(o){var u=hi();u.memoizedState=u.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Xo.bind(null,de,!0,p),p.dispatch=u,[o,u]},useMemoCache:ol,useCacheRefresh:function(){return hi().memoizedState=Ju.bind(null,de)},useEffectEvent:function(o){var u=hi(),p={impl:o};return u.memoizedState=p,function(){if((Te&2)!==0)throw Error(s(440));return p.impl.apply(void 0,arguments)}}},Kr={readContext:Dn,use:tr,useCallback:Yo,useContext:Dn,useEffect:Rr,useImperativeHandle:Oh,useInsertionEffect:wr,useLayoutEffect:no,useMemo:Qi,useReducer:Le,useRef:Fo,useState:function(){return Le(Vs)},useDebugValue:xr,useDeferredValue:function(o,u){var p=on();return Mh(p,Kt.memoizedState,o,u)},useTransition:function(){var o=Le(Vs)[0],u=on().memoizedState;return[typeof o=="boolean"?o:un(o),u]},useSyncExternalStore:aa,useId:fl,useHostTransitionStatus:Qo,useFormState:ps,useActionState:ps,useOptimistic:function(o,u){var p=on();return er(p,Kt,o,u)},useMemoCache:ol,useCacheRefresh:Vh};Kr.useEffectEvent=Ui;var To={readContext:Dn,use:tr,useCallback:Yo,useContext:Dn,useEffect:Rr,useImperativeHandle:Oh,useInsertionEffect:wr,useLayoutEffect:no,useMemo:Qi,useReducer:br,useRef:Fo,useState:function(){return br(Vs)},useDebugValue:xr,useDeferredValue:function(o,u){var p=on();return Kt===null?hl(p,o,u):Mh(p,Kt.memoizedState,o,u)},useTransition:function(){var o=br(Vs)[0],u=on().memoizedState;return[typeof o=="boolean"?o:un(o),u]},useSyncExternalStore:aa,useId:fl,useHostTransitionStatus:Qo,useFormState:nr,useActionState:nr,useOptimistic:function(o,u){var p=on();return Kt!==null?er(p,Kt,o,u):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:ol,useCacheRefresh:Vh};To.useEffectEvent=Ui;var pf={enqueueSetState:function(o,u,p){o=o._reactInternals;var y=Tn(),b=hs(y);b.payload=u,p!=null&&(b.callback=p),u=ki(o,b,y),u!==null&&(Ln(u,o,y),Jl(u,o,y))},enqueueReplaceState:function(o,u,p){o=o._reactInternals;var y=Tn(),b=hs(y);b.tag=1,b.payload=u,p!=null&&(b.callback=p),u=ki(o,b,y),u!==null&&(Ln(u,o,y),Jl(u,o,y))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var p=Tn(),y=hs(p);y.tag=2,u!=null&&(y.callback=u),u=ki(o,y,p),u!==null&&(Ln(u,o,p),Jl(u,o,p))}},bs=Error(s(461)),yn=!1,pu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Fn=!1,Yn=!1,Rc=!1,Wp=typeof WeakSet=="function"?WeakSet:Set,Zn=null,Pn=null,$n=!1,Je=null,ma=8192,wc={getCacheForType:function(o){var u=Dn(Rn),p=u.data.get(o);return p===void 0&&(p=o(),u.data.set(o,p)),p},cacheSignal:function(){return Dn(Rn).controller.signal}},Pa=0,xc=1,Nc=2,gf=3,bo=4;if(typeof Symbol=="function"&&Symbol.for){var gu=Symbol.for;Pa=gu("selector.component"),xc=gu("selector.has_pseudo_class"),Nc=gu("selector.role"),gf=gu("selector.test_id"),bo=gu("selector.text")}var pa=typeof WeakMap=="function"?WeakMap:Map,Te=0,Ee=null,be=null,we=0,Ze=0,li=null,ur=!1,Co=!1,Ro=!1,Wr=0,Un=0,Dl=0,wo=0,Dc=0,Cs=0,Ic=0,_f=null,qs=null,Hd=!1,yf=0,_u=0,xo=1/0,vf=null,Il=null,oi=0,Ol=null,yu=null,Jr=0,Oc=0,Gd=null,Jp=null,He=0,Af=null;return ve.attemptContinuousHydration=function(o){if(o.tag===13||o.tag===31){var u=vr(o,67108864);u!==null&&Ln(u,o,67108864),$h(o,67108864)}},ve.attemptHydrationAtCurrentPriority=function(o){if(o.tag===13||o.tag===31){var u=Tn();u=X(u);var p=vr(o,u);p!==null&&Ln(p,o,u),$h(o,u)}},ve.attemptSynchronousHydration=function(o){switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var u=L(o.pendingLanes);if(u!==0){for(o.pendingLanes|=2,o.entangledLanes|=2;u;){var p=1<<31-js(u);o.entanglements[1]|=p,u&=~p}os(o),(Te&6)===0&&(xo=Ki()+500,Os(0))}}break;case 31:case 13:u=vr(o,2),u!==null&&Ln(u,o,2),ld(),$h(o,2)}},ve.batchedUpdates=function(o,u){return o(u)},ve.createComponentSelector=function(o){return{$$typeof:Pa,value:o}},ve.createContainer=function(o,u,p,y,b,C,O,J,mt,Ct){return fo(o,u,!1,null,p,y,C,null,O,J,mt,Ct)},ve.createHasPseudoClassSelector=function(o){return{$$typeof:xc,value:o}},ve.createHydrationContainer=function(o,u,p,y,b,C,O,J,mt,Ct,Lt,xt,zt,ue){return o=fo(p,y,!0,o,b,C,J,ue,mt,Ct,Lt,xt),o.context=dd(null),p=o.current,y=Tn(),y=X(y),b=hs(y),b.callback=u??null,ki(p,b,y),u=y,o.current.lanes=u,nt(o,u),os(o),o},ve.createPortal=function(o,u,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eu,key:y==null?null:""+y,children:o,containerInfo:u,implementation:p}},ve.createRoleSelector=function(o){return{$$typeof:Nc,value:o}},ve.createTestNameSelector=function(o){return{$$typeof:gf,value:o}},ve.createTextSelector=function(o){return{$$typeof:bo,value:o}},ve.defaultOnCaughtError=function(o){console.error(o)},ve.defaultOnRecoverableError=function(o){kd(o)},ve.defaultOnUncaughtError=function(o){kd(o)},ve.deferredUpdates=function(o){var u=Zt.T,p=xa();try{return Ce(32),Zt.T=null,o()}finally{Ce(p),Zt.T=u}},ve.discreteUpdates=function(o,u,p,y,b){var C=Zt.T,O=xa();try{return Ce(2),Zt.T=null,o(u,p,y,b)}finally{Ce(O),Zt.T=C,Te===0&&(xo=Ki()+500)}},ve.findAllNodes=Ps,ve.findBoundingRects=function(o,u){if(!di)throw Error(s(363));u=Ps(o,u),o=[];for(var p=0;p<u.length;p++)o.push(Ed(u[p]));for(u=o.length-1;0<u;u--){p=o[u];for(var y=p.x,b=y+p.width,C=p.y,O=C+p.height,J=u-1;0<=J;J--)if(u!==J){var mt=o[J],Ct=mt.x,Lt=Ct+mt.width,xt=mt.y,zt=xt+mt.height;if(y>=Ct&&C>=xt&&b<=Lt&&O<=zt){o.splice(u,1);break}else if(y!==Ct||p.width!==mt.width||zt<C||xt>O){if(!(C!==xt||p.height!==mt.height||Lt<y||Ct>b)){Ct>y&&(mt.width+=Ct-y,mt.x=y),Lt<b&&(mt.width=b-Ct),o.splice(u,1);break}}else{xt>C&&(mt.height+=xt-C,mt.y=C),zt<O&&(mt.height=O-xt),o.splice(u,1);break}}}return o},ve.findHostInstance=Zh,ve.findHostInstanceWithNoPortals=function(o){return o=f(o),o=o!==null?g(o):null,o===null?null:vc(o.stateNode)},ve.findHostInstanceWithWarning=function(o){return Zh(o)},ve.flushPassiveEffects=jr,ve.flushSyncFromReconciler=function(o){var u=Te;Te|=1;var p=Zt.T,y=xa();try{if(Ce(2),Zt.T=null,o)return o()}finally{Ce(y),Zt.T=p,Te=u,(Te&6)===0&&Os(0)}},ve.flushSyncWork=ld,ve.focusWithin=function(o,u){if(!di)throw Error(s(363));for(o=lo(o),u=fc(o,u),u=Array.from(u),o=0;o<u.length;){var p=u[o++],y=p.tag;if(!go(p)){if((y===5||y===26||y===27)&&Cl(p.stateNode))return!0;for(p=p.child;p!==null;)u.push(p),p=p.sibling}}return!1},ve.getFindAllNodesFailureDescription=function(o,u){if(!di)throw Error(s(363));var p=0,y=[];o=[lo(o),0];for(var b=0;b<o.length;){var C=o[b++],O=C.tag,J=o[b++],mt=u[J];if((O!==5&&O!==26&&O!==27||!go(C))&&(oo(C,mt)&&(y.push(hc(mt)),J++,J>p&&(p=J)),J<u.length))for(C=C.child;C!==null;)o.push(C,J),C=C.sibling}if(p<u.length){for(o=[];p<u.length;p++)o.push(hc(u[p]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+o.join(" > ")}return null},ve.getPublicRootInstance=function(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 27:case 5:return vc(o.child.stateNode);default:return o.child.stateNode}},ve.injectIntoDevTools=function(){var o={bundleType:0,version:fp,rendererPackageName:nf,currentDispatcherRef:Zt,reconcilerVersion:"19.2.0"};if(yc!==null&&(o.rendererConfig=yc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")o=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)o=!0;else{try{hu=u.inject(o),Hs=u}catch{}o=!!u.checkDCE}}return o},ve.isAlreadyRendering=function(){return(Te&6)!==0},ve.observeVisibleRects=function(o,u,p,y){if(!di)throw Error(s(363));o=Ps(o,u);var b=Sd(o,p,y).disconnect;return{disconnect:function(){b()}}},ve.shouldError=function(){return null},ve.shouldSuspend=function(){return!1},ve.startHostTransition=function(o,u,p,y){if(o.tag!==5)throw Error(s(476));var b=Lh(o).queue;io(o,b,u,ru,p===null?i:function(){var C=Lh(o);return C.next===null&&(C=o.alternate.memoizedState),sr(o,C.next.queue,{},Tn()),p(y)})},ve.updateContainer=function(o,u,p,y){var b=u.current,C=Tn();return cp(b,C,o,u,p,y),C},ve.updateContainerSync=function(o,u,p,y){return cp(u.current,2,o,u,p,y),2},ve},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(B2)),B2.exports}var Hb;function tj(){return Hb||(Hb=1,z2.exports=$B()),z2.exports}var ej=tj();const nj=Wb(ej);var j2={exports:{}},Au={};var Gb;function ij(){return Gb||(Gb=1,Au.ConcurrentRoot=1,Au.ContinuousEventPriority=8,Au.DefaultEventPriority=32,Au.DiscreteEventPriority=2,Au.IdleEventPriority=268435456,Au.LegacyRoot=0,Au.NoEventPriority=0),Au}var qb;function sj(){return qb||(qb=1,j2.exports=ij()),j2.exports}var _v=sj();const Fb={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Yb=!1,Qb=!1;const w1=".react-konva-event",aj=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,rj=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,lj={};function yv(n,t,e=lj){if(!Yb&&"zIndex"in t&&(console.warn(rj),Yb=!0),!Qb&&t.draggable){var i=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;i&&!s&&(console.warn(aj),Qb=!0)}for(var l in e)if(!Fb[l]){var c=l.slice(0,2)==="on",f=e[l]!==t[l];if(c&&f){var m=l.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),n.off(m,e[l])}var g=!t.hasOwnProperty(l);g&&n.setAttr(l,void 0)}var A=t._useStrictMode,E={},T=!1;const x={};for(var l in t)if(!Fb[l]){var c=l.slice(0,2)==="on",w=e[l]!==t[l];if(c&&w){var m=l.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),t[l]&&(x[m]=t[l])}!c&&(t[l]!==e[l]||A&&t[l]!==n.getAttr(l))&&(T=!0,E[l]=t[l])}T&&(n.setAttrs(E),Ch(n));for(var m in x)n.off(m+w1),n.on(m+w1,x[m])}function Ch(n){if(!Vt.autoDrawEnabled){var t=n.getLayer()||n.getStage();t&&t.batchDraw()}}var H2=XA();const G8={},oj={};Nm.Node.prototype._applyProps=yv;let q8=_v.DefaultEventPriority;function uj(n,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}n.add(t),Ch(n)}function cj(n,t,e){let i=Nm[n];i||(console.error(`Konva has no node with the type ${n}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${n}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=Nm.Group);const s={},l={};for(var c in t)if(c!=="ref"){var f=c.slice(0,2)==="on";f?l[c]=t[c]:s[c]=t[c]}const m=new i(s);return yv(m,l),m}function hj(n,t,e){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${n}"`)}function fj(n,t,e){return!1}function dj(n){return n}function mj(){return null}function pj(){return null}function gj(n,t,e,i){return oj}function _j(){}function yj(n){}function vj(n,t){return!1}function Aj(){return G8}function Ej(){return G8}const Sj=setTimeout,Tj=clearTimeout,bj=!0,Cj=n=>{n()},Rj=-1;function wj(n,t){return!1}const xj=!1,Nj=!1,Dj=!0,Ij=!1,Oj=!1;function Mj(n,t){t.parent===n?t.moveToTop():n.add(t),Ch(n)}function Lj(n,t){t.parent===n?t.moveToTop():n.add(t),Ch(n)}function F8(n,t,e){t._remove(),n.add(t),t.setZIndex(e.getZIndex()),Ch(n)}function Vj(n,t,e){F8(n,t,e)}function kj(n,t){t.destroy(),t.off(w1),Ch(n)}function Pj(n,t){t.destroy(),t.off(w1),Ch(n)}function Uj(n,t,e){console.error(`Text components are not yet supported in ReactKonva. You text is: "${e}"`)}function zj(n,t,e){}function Bj(n,t,e,i){yv(n,i,e)}function jj(n){n.hide(),Ch(n)}function Hj(n){}function Gj(n,t){(t.visible==null||t.visible)&&n.show()}function qj(n,t){}function Fj(n){}function Yj(){}function Qj(){return null}function Xj(){}function Kj(){}function Wj(){return _v.DefaultEventPriority}function Jj(){}function Zj(){return null}function $j(n){q8=n}function tH(){return q8}function eH(){return _v.DiscreteEventPriority}function nH(){return!1}function iH(){}function sH(){return null}function aH(){return-1.1}function rH(){}function lH(){return!1}function oH(){return!0}function uH(){}function cH(){}function hH(){return null}const fH=null,dH=Gi.createContext(null);function mH(){}const pH=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:dH,NotPendingTransition:fH,afterActiveInstanceBlur:Kj,appendChild:Mj,appendChildToContainer:Lj,appendInitialChild:uj,beforeActiveInstanceBlur:Xj,cancelTimeout:Tj,clearContainer:Fj,commitMount:zj,commitTextUpdate:Uj,commitUpdate:Bj,createInstance:cj,createTextInstance:hj,detachDeletedInstance:Yj,finalizeInitialChildren:fj,getChildHostContext:Ej,getCurrentEventPriority:Wj,getCurrentUpdatePriority:tH,getInstanceFromNode:Qj,getInstanceFromScope:Zj,getPublicInstance:dj,getRootHostContext:Aj,hideInstance:jj,hideTextInstance:Hj,idlePriority:H2.unstable_IdlePriority,insertBefore:F8,insertInContainerBefore:Vj,isPrimaryRenderer:xj,maySuspendCommit:lH,noTimeout:Rj,now:H2.unstable_now,preloadInstance:oH,prepareForCommit:mj,preparePortalMount:pj,prepareScopeUpdate:Jj,prepareUpdate:gj,removeChild:kj,removeChildFromContainer:Pj,requestPostPaintCallback:rH,resetAfterCommit:_j,resetFormInstance:mH,resetTextContent:yj,resolveEventTimeStamp:aH,resolveEventType:sH,resolveUpdatePriority:eH,run:H2.unstable_runWithPriority,scheduleMicrotask:Cj,scheduleTimeout:Sj,setCurrentUpdatePriority:$j,shouldAttemptEagerTransition:nH,shouldDeprioritizeSubtree:vj,shouldSetTextContent:wj,startSuspendingCommit:uH,supportsHydration:Oj,supportsMicrotasks:bj,supportsMutation:Dj,supportsPersistence:Ij,suspendInstance:cH,trackSchedulerEvent:iH,unhideInstance:Gj,unhideTextInstance:qj,waitForCommitToBeReady:hH,warnsIfNotActing:Nj},Symbol.toStringTag,{value:"Module"}));function Y8(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=n.child;for(;i;){const s=Y8(i,t,e);if(s)return s;i=i.sibling}}function Q8(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const QS=Q8(H.createContext(null));class X8 extends H.Component{render(){return H.createElement(QS.Provider,{value:this._reactInternals},this.props.children)}}function gH(){const n=H.useContext(QS);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=H.useId();return H.useMemo(()=>{for(const e of[n,n?.alternate]){if(!e)continue;const i=Y8(e,!1,s=>{let l=s.memoizedState;for(;l;){if(l.memoizedState===t)return!0;l=l.next}});if(i)return i}},[n,t])}const _H=Symbol.for("react.context"),yH=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===_H;function vH(){const n=gH(),[t]=H.useState(()=>new Map);t.clear();let e=n;for(;e;){const i=e.type;yH(i)&&i!==QS&&!t.has(i)&&t.set(i,H.use(Q8(i))),e=e.return}return t}function AH(){const n=vH();return H.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>H.createElement(t,null,H.createElement(e.Provider,{...i,value:n.get(e)})),t=>H.createElement(X8,{...t})),[n])}if(Gi.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function EH(n){const t=Gi.useRef({});return Gi.useLayoutEffect(()=>{t.current=n}),Gi.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const SH=()=>{const n=Gi.useRef(0);return Gi.useMemo(()=>{n.current++},[]),n.current>1},TH=n=>{const t=Gi.useRef(null),e=Gi.useRef(null),i=Gi.useRef(null),s=EH(n),l=AH(),c=Gi.useRef(null),f=A=>{const{forwardedRef:E}=n;E&&(typeof E=="function"?E(A):E.current=A)},m=SH(),g=()=>{f(null),vg.updateContainer(null,i.current,null),e.current?.destroy(),e.current=null};return Gi.useLayoutEffect(()=>(c.current&&(clearTimeout(c.current),c.current=null),e.current?f(e.current):(e.current=new Nm.Stage({width:n.width,height:n.height,container:t.current}),f(e.current),i.current=vg.createContainer(e.current,_v.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),vg.updateContainer(Gi.createElement(l,{},n.children),i.current,null,()=>{})),()=>{m?c.current=setTimeout(g,0):g()}),[]),Gi.useLayoutEffect(()=>{f(e.current),yv(e.current,n,s),vg.flushSyncFromReconciler(()=>{vg.updateContainer(Gi.createElement(l,{},n.children),i.current,null)})}),Gi.createElement("div",{ref:t,id:n.id,accessKey:n.accessKey,className:n.className,role:n.role,style:n.style,tabIndex:n.tabIndex,title:n.title})},K8="Layer",Yl="Group",dh="Rect",W8="Circle",bH="Ellipse",J8="Line",Dm="Text",Xm="Transformer",vg=nj(pH),CH=Gi.forwardRef((n,t)=>Gi.createElement(X8,{},Gi.createElement(TH,{...n,forwardedRef:t}))),RH=.001,wH=1e-4,G2="#fafafa",za=20,xH="rgba(0, 0, 0, 0.12)",NH=1;function DH({width:n,height:t,viewport:e}){const i=H.useMemo(()=>{const{x:s,y:l,scale:c}=e,f=-s/c-za,m=-l/c-za,g=(-s+n)/c+za,A=(-l+t)/c+za,E=Math.floor(f/za)*za,T=Math.floor(m/za)*za,x=Math.ceil(g/za)*za,w=Math.ceil(A/za)*za,I=[];for(let L=E;L<=x;L+=za)for(let B=T;B<=w;B+=za)I.push(k.jsx(W8,{x:L,y:B,radius:NH,fill:xH,listening:!1},`${L},${B}`));return I},[n,t,e]);return k.jsx(Yl,{listening:!1,children:i})}function IH({width:n,height:t,viewport:e,onViewportChange:i,onMouseMove:s,onBackgroundClick:l,showGrid:c=!0,children:f,cursorLayer:m}){const g=H.useRef(null),[A,E]=H.useState(!1),T=H.useRef({x:0,y:0,vx:0,vy:0}),x=H.useRef(!1),w=H.useCallback($=>{$.evt.preventDefault();const Z=g.current;if(!Z)return;const nt=Z.getPointerPosition();if(!nt)return;const P=1-$.evt.deltaY*RH,M=Math.max(wH,e.scale*P),z={x:(nt.x-e.x)/e.scale,y:(nt.y-e.y)/e.scale},F=nt.x-z.x*M,X=nt.y-z.y*M;i({x:F,y:X,scale:M})},[e,i]),I=H.useCallback($=>{const Z=$.target,nt=Z.name();if(nt==="background"||nt==="stageFill"||Z===Z.getStage()){const M=g.current;if(M){const z=M.getPointerPosition();z&&(E(!0),x.current=!1,T.current={x:z.x,y:z.y,vx:e.x,vy:e.y})}}},[e]),L=H.useCallback($=>{if(!A)return;x.current=!0;const Z=g.current;if(!Z)return;const nt=Z.getPointerPosition();if(!nt)return;const{x:P,y:M,vx:z,vy:F}=T.current,X=nt.x-P,Q=nt.y-M;i({...e,x:z+X,y:F+Q})},[A,e,i]),B=H.useCallback(()=>{A&&(console.log("[canvas] pan end"),E(!1))},[A]),j=H.useCallback($=>{L($),s?.($)},[L,s]),q=H.useCallback($=>{if(x.current)return;const Z=$.target,nt=Z.name();if((nt==="background"||nt==="stageFill"||Z===Z.getStage())&&l){const M=g.current;if(M){const z=M.getPointerPosition();if(z){const F=(z.x-e.x)/e.scale,X=(z.y-e.y)/e.scale;l({x:F,y:X})}}}},[e,l]);return k.jsxs(CH,{ref:g,width:n,height:t,onWheel:w,onMouseDown:I,onMouseUp:B,onMouseLeave:B,onMouseMove:j,onClick:q,style:{cursor:A?"grabbing":"grab",background:G2},children:[k.jsxs(K8,{listening:!0,children:[k.jsx(dh,{x:0,y:0,width:n,height:t,fill:G2,listening:!0,name:"stageFill"}),k.jsxs(Yl,{x:e.x,y:e.y,scaleX:e.scale,scaleY:e.scale,draggable:!1,children:[k.jsx(dh,{x:-5e3,y:-5e3,width:2e4,height:2e4,fill:G2,listening:!0,name:"background"}),c&&k.jsx(DH,{width:n,height:t,viewport:e}),f]})]}),m]})}function OH(n,t,e){return{x:(n-e.x)/e.scale,y:(t-e.y)/e.scale}}const pn=20;function MH({objects:n,viewport:t,selectedIds:e,isPointerTool:i,onObjectDragEnd:s,onObjectClick:l,onObjectResizeEnd:c,onStickyDoubleClick:f,onTextDoubleClick:m,canEdit:g}){const A=Object.values(n).sort((E,T)=>{const x=E.createdAt?.toMillis?.()??0,w=T.createdAt?.toMillis?.()??0;return x-w});return k.jsx(k.Fragment,{children:A.map(E=>{const T=e.has(E.objectId),x=g&&c&&(E.type==="sticky"||E.type==="rectangle"||E.type==="circle"||E.type==="triangle"||E.type==="line"||E.type==="text");return E.type==="sticky"?k.jsx(LH,{obj:E,viewport:t,canEdit:g,selected:T,isPointerTool:i,onObjectDragEnd:s,onObjectClick:l,onObjectResizeEnd:x?c:void 0,onStickyDoubleClick:f},E.objectId):E.type==="rectangle"?k.jsx(VH,{obj:E,viewport:t,canEdit:g,selected:T,isPointerTool:i,onObjectDragEnd:s,onObjectClick:l,onObjectResizeEnd:x?c:void 0},E.objectId):E.type==="circle"?k.jsx(kH,{obj:E,viewport:t,canEdit:g,selected:T,isPointerTool:i,onObjectDragEnd:s,onObjectClick:l,onObjectResizeEnd:x?c:void 0},E.objectId):E.type==="triangle"?k.jsx(PH,{obj:E,viewport:t,canEdit:g,selected:T,isPointerTool:i,onObjectDragEnd:s,onObjectClick:l,onObjectResizeEnd:x?c:void 0},E.objectId):E.type==="line"?k.jsx(UH,{obj:E,viewport:t,canEdit:g,selected:T,isPointerTool:i,onObjectDragEnd:s,onObjectClick:l,onObjectResizeEnd:x?c:void 0},E.objectId):E.type==="text"?k.jsx(zH,{obj:E,viewport:t,canEdit:g,selected:T,isPointerTool:i,onObjectDragEnd:s,onObjectClick:l,onObjectResizeEnd:x?c:void 0,onTextDoubleClick:m},E.objectId):E.type==="emoji"?k.jsx(BH,{obj:E,viewport:t,canEdit:g,selected:e.has(E.objectId),isPointerTool:i,onObjectDragEnd:s,onObjectClick:l},E.objectId):null})})}const Zf=(n,t,e,i,s,l)=>({draggable:e&&l,onDragEnd:c=>{const f=c.target,m=f.getAbsolutePosition(),g=OH(m.x,m.y,t);i(n,g.x,g.y),f.position({x:g.x,y:g.y})},onClick:c=>s(n,{ctrlKey:c.evt.ctrlKey})});function LH({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c,onObjectResizeEnd:f,onStickyDoubleClick:m}){const g=H.useRef(null),A=H.useRef(null),{objectId:E,position:T,dimensions:x,content:w,fillColor:I,textStyle:L}=n;H.useEffect(()=>{i&&f&&A.current&&g.current&&A.current.nodes([g.current])},[i,f]);const B=()=>{const j=g.current;if(!j||!f)return;const q=j.scaleX(),$=j.scaleY();j.scaleX(1),j.scaleY(1);const Z=j.findOne("Rect");if(Z){const nt=Math.max(pn,Z.width()*q),P=Math.max(pn,Z.height()*$);Z.width(nt),Z.height(P);const M=j.findOne("Text");M&&(M.width(nt-8),M.height(P-8)),f(E,{position:{x:j.x(),y:j.y()},dimensions:{width:nt,height:P}})}};return k.jsxs(k.Fragment,{children:[k.jsxs(Yl,{ref:g,x:T.x,y:T.y,...Zf(E,t,e,l,c,s),onDblClick:e?()=>m(E):void 0,onTransformEnd:f?B:void 0,children:[k.jsx(dh,{width:x.width,height:x.height,fill:I,stroke:i?"#4f46e5":"#d1d5db",strokeWidth:i?3:1,shadowColor:"black",shadowBlur:6,shadowOffset:{x:1,y:2},shadowOpacity:.12}),k.jsx(Dm,{x:4,y:4,width:x.width-8,height:x.height-8,text:w||"Double-click to edit",fontSize:L.fontSize,fontFamily:L.fontFamily,fill:L.fontColor,fontStyle:L.bold&&L.italic?"bold italic":L.bold?"bold":L.italic?"italic":"normal",align:L.textAlign,verticalAlign:"top",padding:4,listening:!1})]}),i&&f&&k.jsx(Xm,{ref:A,rotateEnabled:!1,boundBoxFunc:(j,q)=>Math.abs(q.width)<pn||Math.abs(q.height)<pn?j:q})]})}function VH({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c,onObjectResizeEnd:f}){const m=H.useRef(null),g=H.useRef(null),{objectId:A,position:E,dimensions:T}=n;H.useEffect(()=>{i&&f&&g.current&&m.current&&g.current.nodes([m.current])},[i,f]);const x=()=>{const w=m.current;if(!w||!f)return;const I=w.scaleX(),L=w.scaleY();w.scaleX(1),w.scaleY(1);const B=w.findOne("Rect");if(B){const j=Math.max(pn,B.width()*I),q=Math.max(pn,B.height()*L);B.width(j),B.height(q),f(A,{position:{x:w.x(),y:w.y()},dimensions:{width:j,height:q}})}};return k.jsxs(k.Fragment,{children:[k.jsx(Yl,{ref:m,x:E.x,y:E.y,...Zf(A,t,e,l,c,s),onTransformEnd:f?x:void 0,children:k.jsx(dh,{width:T.width,height:T.height,fill:"transparent",stroke:i?"#4f46e5":"black",strokeWidth:i?3:2})}),i&&f&&k.jsx(Xm,{ref:g,rotateEnabled:!1,boundBoxFunc:(w,I)=>Math.abs(I.width)<pn||Math.abs(I.height)<pn?w:I})]})}function kH({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c,onObjectResizeEnd:f}){const m=H.useRef(null),g=H.useRef(null),{objectId:A,position:E,dimensions:T}=n,x=T.width/2,w=T.height/2;H.useEffect(()=>{i&&f&&g.current&&m.current&&g.current.nodes([m.current])},[i,f]);const I=()=>{const L=m.current;if(!L||!f)return;const B=L.scaleX(),j=L.scaleY();L.scaleX(1),L.scaleY(1);const q=L.findOne("Ellipse");if(q){const $=Math.max(pn,T.width*B),Z=Math.max(pn,T.height*j),nt=$/2,P=Z/2;q.setAttrs({x:nt,y:P,radiusX:nt,radiusY:P}),f(A,{position:{x:L.x(),y:L.y()},dimensions:{width:$,height:Z}})}};return k.jsxs(k.Fragment,{children:[k.jsx(Yl,{ref:m,x:E.x,y:E.y,...Zf(A,t,e,l,c,s),onTransformEnd:f?I:void 0,children:k.jsx(bH,{x,y:w,radiusX:x,radiusY:w,fill:"transparent",stroke:i?"#4f46e5":"black",strokeWidth:i?3:2})}),i&&f&&k.jsx(Xm,{ref:g,rotateEnabled:!1,boundBoxFunc:(L,B)=>Math.abs(B.width)<pn||Math.abs(B.height)<pn?L:B})]})}function PH({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c,onObjectResizeEnd:f}){const m=H.useRef(null),g=H.useRef(null),{objectId:A,position:E,dimensions:T}=n,x=[0,T.height,T.width/2,0,T.width,T.height];H.useEffect(()=>{i&&f&&g.current&&m.current&&g.current.nodes([m.current])},[i,f]);const w=()=>{const I=m.current;if(!I||!f)return;const L=I.scaleX(),B=I.scaleY();I.scaleX(1),I.scaleY(1);const j=I.findOne("Line");if(j){const q=Math.max(pn,T.width*L),$=Math.max(pn,T.height*B),Z=[0,$,q/2,0,q,$];j.points(Z),f(A,{position:{x:I.x(),y:I.y()},dimensions:{width:q,height:$}})}};return k.jsxs(k.Fragment,{children:[k.jsx(Yl,{ref:m,x:E.x,y:E.y,...Zf(A,t,e,l,c,s),onTransformEnd:f?w:void 0,children:k.jsx(J8,{points:x,fill:"transparent",stroke:i?"#4f46e5":"black",strokeWidth:i?3:2,closed:!0})}),i&&f&&k.jsx(Xm,{ref:g,rotateEnabled:!1,boundBoxFunc:(I,L)=>Math.abs(L.width)<pn||Math.abs(L.height)<pn?I:L})]})}function UH({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c,onObjectResizeEnd:f}){const m=H.useRef(null),g=H.useRef(null),{objectId:A,start:E,end:T,strokeColor:x,strokeWidth:w}=n,I=Math.min(E.x,T.x),L=Math.min(E.y,T.y),B=Math.abs(T.x-E.x)||pn,j=Math.abs(T.y-E.y)||pn,q=[E.x-I,E.y-L,T.x-I,T.y-L];H.useEffect(()=>{i&&f&&g.current&&m.current&&g.current.nodes([m.current])},[i,f]);const $=()=>{const Z=m.current;if(!Z||!f)return;const nt=Z.scaleX(),P=Z.scaleY();Z.scaleX(1),Z.scaleY(1);const M={x:Z.x(),y:Z.y()},z=(T.x-E.x)*nt,F=(T.y-E.y)*P;let X=z,Q=F;Math.abs(X)<pn&&Math.abs(Q)<pn&&(X=B>=j?pn:0,Q=B>=j?0:pn);const G={x:M.x+X,y:M.y+Q},Yt=Z.findOne("Line");Yt&&(Yt.points([0,0,G.x-M.x,G.y-M.y]),f(A,{start:M,end:G}))};return k.jsxs(k.Fragment,{children:[k.jsx(Yl,{ref:m,x:I,y:L,...Zf(A,t,e,l,c,s),onTransformEnd:f?$:void 0,children:k.jsx(J8,{points:q,stroke:i?"#4f46e5":x??"#000",strokeWidth:i?3:w??2})}),i&&f&&k.jsx(Xm,{ref:g,rotateEnabled:!1,boundBoxFunc:(Z,nt)=>Math.abs(nt.width)<pn||Math.abs(nt.height)<pn?Z:nt})]})}function zH({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c,onObjectResizeEnd:f,onTextDoubleClick:m}){const g=H.useRef(null),A=H.useRef(null),{objectId:E,position:T,dimensions:x,content:w,textStyle:I}=n;H.useEffect(()=>{i&&f&&A.current&&g.current&&A.current.nodes([g.current])},[i,f]);const L=()=>{const B=g.current;if(!B||!f)return;const j=B.scaleX(),q=B.scaleY();B.scaleX(1),B.scaleY(1);const $=B.findOne("Rect");if($){const Z=Math.max(pn,$.width()*j),nt=Math.max(pn,$.height()*q);$.width(Z),$.height(nt);const P=B.findOne("Text");P&&(P.width(Z-8),P.height(nt-8)),f(E,{position:{x:B.x(),y:B.y()},dimensions:{width:Z,height:nt}})}};return k.jsxs(k.Fragment,{children:[k.jsxs(Yl,{ref:g,x:T.x,y:T.y,...Zf(E,t,e,l,c,s),onDblClick:e?()=>m(E):void 0,onTransformEnd:f?L:void 0,children:[k.jsx(dh,{width:x.width,height:x.height,fill:"transparent",stroke:i?"#4f46e5":"#d1d5db",strokeWidth:i?3:1}),k.jsx(Dm,{x:4,y:4,width:x.width-8,height:x.height-8,text:w||"Double-click to edit",fontSize:I.fontSize,fontFamily:I.fontFamily,fill:I.fontColor,align:I.textAlign,verticalAlign:"top",padding:4,listening:!1})]}),i&&f&&k.jsx(Xm,{ref:A,rotateEnabled:!1,boundBoxFunc:(B,j)=>Math.abs(j.width)<pn||Math.abs(j.height)<pn?B:j})]})}function BH({obj:n,viewport:t,canEdit:e,selected:i,isPointerTool:s,onObjectDragEnd:l,onObjectClick:c}){const{objectId:f,position:m,emoji:g,fontSize:A=32}=n;return k.jsxs(Yl,{x:m.x,y:m.y,...Zf(f,t,e,l,c,s),children:[k.jsx(Dm,{text:g,fontSize:A,listening:!1}),i&&k.jsx(dh,{x:-4,y:-4,width:A+8,height:A+8,stroke:"#4f46e5",strokeWidth:2,fill:"transparent",listening:!1})]})}function jH(n,t){return n?n.includes("@")?n.split("@")[0]:n:t.slice(0,8)}function HH({cursors:n,viewport:t,currentUserId:e}){const i=n.filter(l=>l.userId!==e),s=H.useRef(0);return H.useEffect(()=>{const l=Date.now();l-s.current>1e3&&(s.current=l,console.log("[CursorLayer] total cursors:",n.length,"remote (excluding self):",i.length,"currentUserId:",e,"remote positions:",i.map(c=>({id:c.userId.slice(0,8),x:c.x.toFixed(0),y:c.y.toFixed(0)}))))},[n,i.length,e]),k.jsx(K8,{listening:!1,children:i.map(l=>{const c=t.x+l.x*t.scale,f=t.y+l.y*t.scale;return k.jsxs(Yl,{x:c,y:f,children:[k.jsx(W8,{radius:6,fill:l.color,listening:!1}),k.jsx(Dm,{x:10,y:-6,text:jH(l.displayName,l.userId),fontSize:12,fontFamily:"Inter, system-ui, sans-serif",fill:"#1a1a1a",listening:!1})]},l.userId)})})}function GH(n){return n?n.includes("@")?n.split("@")[0]:n:"Anonymous"}function qH({comments:n,onCommentClick:t}){return k.jsx(k.Fragment,{children:n.map(e=>{const i=GH(e.authorName),s=18,l=8,c=s+4+i.length*6+l*2,f=s+l*2;return k.jsxs(Yl,{x:e.position.x,y:e.position.y,onClick:m=>{m.cancelBubble=!0,t(e)},onTap:m=>{m.cancelBubble=!0,t(e)},children:[k.jsx(dh,{x:-l,y:-l,width:c,height:f,fill:"transparent",listening:!0}),k.jsx(dh,{x:0,y:0,width:s,height:s,fill:"#fff",stroke:"#4f46e5",strokeWidth:1.5,cornerRadius:3,listening:!1}),k.jsx(Dm,{x:4,y:2,text:"T",fontSize:12,fontStyle:"bold",fill:"#4f46e5",listening:!1}),k.jsx(Dm,{x:s+4,y:2,text:i,fontSize:10,fill:"#374151",listening:!1})]},e.id)})})}const FH="/assets/ai-icon-q1BpoY3z.png",YH="/assets/pointer-icon-IPPLXpJe.png",QH="/assets/formats-icon-kYqTQfys.png",XH="/assets/sticky-icon-x5X3FZKq.png",KH="/assets/templates-icon-CnL5fU05.png",WH="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA6/SURBVHic7d1bzGx3XcfhT8sGWqgcgkoVFJFDQQ6BEJBGPAAiES8MwSrxkBiNaDDGGCXeEokHYjSg4ULkoBgjYoIaE+QQKgaxCVgkcpY22krAIoFWWqBQWi+mBKht9+zd7vc/6/09T7Kyb7/zZjLrs9esmSkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAO8dZqwds2FnVo6unVU+sLqgeVN2juufCXQDH0XU3H1dWH67eWV1cvb+6aeGuzRIAp+6bq+dVP1V9++ItANNdXv1Z9cfVxxZv2RQBsL/zqxdWP13dfekSAG7p+upV7V6nP7F2yjbcZfWADTiren7119V3VSfWzgHgVpxo93bsz1VXV5eunXP4XAG4ffetXl398OohAJyS11c/U12zesihEgC37ZuqN1aPXT0EgNPygeqZ1UdXDzlEAuDWPaD6p+rbFu8A4I75j+opuUHw/zl79YADdN/qTTn5AxwHD67+vrr36iGHRgB8rbOqV1aPWj0EgDvNY6tXrB5xaHwK4Gs9v/rV1SMAuNN9R7u3Ad69esihcA/AV9y/+lB1n9VDADgjPl09It8TULkC8NV+r92NIgAcT+e2+7r2N6wecghcAdg5v92douesHgLAGfX56iH5VICbAG/2Czn5A0xwTvWzq0ccAlcAdn+Dj7QrQgCOv8uqhzf8VwRdAajH5OQPMMlDq0euHrGaAKinrh4AwJF72uoBqwmA3a9HATDL+Nd+AVAXrB4AwJEb/9ovAOpbVg8A4Mh96+oBqwmA+rrVAwA4cvdaPWA1HwOsG/N3AJjmpob/J9iJb/jnQAEGG30OHF0/ADCVAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMdGL1APb20eqS1SNY5oHVhatH7OmSds9XZrqw3fMVDt5NGzled6b+AGzCRa1/Du57XHSG/gZsw+ta/xzc9xjNWwAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAKgvrR6wp63sBGa7cfWAPY1/TRUAdd3qAXv6zOoBAHu4dvWAPY1/TRUAdfXqAXvayk5gtq28Vm1l5xkjAOry1QP2dNnqAQB78Jq6EQKgPrB6wJ4+tHoAwB4+uHrAnray84wRAPWO1QP28PnqXatHAOzhndX1q0fs4e2rB6wmAOriDv+u1X+uPrd6BMAePltdsnrESXypetvqEasJgLqqw38ivHb1AIBT8LrVA07i4up/Vo9YTQDs/OnqAbfjs9VfrR4BcAr+ssO+annIr/lHRgDs/EV1xeoRt+Hl+bgKsC2fql61esRtuDL/qaoEwJd9sXrx6hG34rrqd1ePADgNL+4wrwK8qPrC6hGHQAB8xcurf1094hZeVH1s9QiA0/Bf1W+vHnELl1avXj2Cw/SEdh+5u+kAjn+p7nZmHy4bclHrn5P7Hhedob8B23P3dv+xWv2cvKnd1YjHndmHuy2uAHytS6sXrB5RXVP9WC5TAdt2fbvXskP43v1fqd6zegSH7yWtq9Trqx848w+RjXEFgC17Wmuvrr7szD9Ejouzq9e05uT/nCN4fGyPAGDrLmr3GnfUz8c/ydVuTtFZ7e7AP6on6dXV04/kkbFFAoDj4Bnt3uI8qufi77R7LYfT8uzq053ZJ+ml1UOP6gGxSQKA4+JhnfkbA/+3eu5RPSCOtwd0Zt4SuK56Ybs7ZeH2CACOk7tWv9zu5sA7+/n3d9WDju6hMMX3Vm/pzjnxv6RdWMA+BADH0QOrP2j3led39Hn3puq7j3Y+Ez2y+q3q/e3/5Pxc9dbqedV9jn4yGycAOM7uW/18ux/pOZVPC7yv+s3qEUc/efvcHHHHnV89sbqg3WWn86p7trtv4Jrq8uqD1bs6zK/FZBsu6vB/Ye3LfjTftc7pO7d6UruT+kOre7ULhOvavWVwZfXhdq+p/71oI8CRcQUAuFP5bCQADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAwkAABgIAEAAAMJAAAYSAAAwEACAAAGEgAAMJAAAICBBAAADCQAAGAgAQAAAwkAABhIAADAQAIAAAYSAAAwkAAAgIEEAAAMJAAAYCABAAADCQAAGEgAAMBAAgAABhIAADCQAACAgQQAAAx01uoBcETOrh5z83FB9Y3VedVdV446BQ+sLlw9Yk+XVB9dPWJPX6yura6qPly9t3pfdePKUXAUBADH2YnqmdVPVs+o7rd2DhvxyerN1Z/f/O8Na+cAsK9zq1+qrqhucjjuwPGf1S9W5wTAQXt69aHWnzgcx+u4rHpWABycc6qXtv5E4Tjex2uqewTHgHsAOA7Or95QPX71EEa4tPqhdjcOwmYJALbuQdVbq4esHsIol7V7u+nK1UPgdAkAtuzrq7dXj1g9hJE+Uj2l+sTqIXA6fBEQW3Wien1O/qzzsOq11V1WD4HT4YnLVv1Gu8/3w0oPbndz4NsW74BT5i0AtujR1bvbzrf4cbzdUD2h+rfVQ+BUeAuALXpZTv4cjhPV768eAafKFQC25vuqf1g9Am7F97S7KRU2wRUAtubXVg+A2/CC1QPgVLgCwJbcv92vzJ1YPQRuxQ3tfrXRFwSxCa4AsCU/kpM/h+tE9ezVI2BfAoAtefrqAXASnqNshrcA2JJPVN+wegTcjqva/TYFHDwBwFbcr/rk6hGwh/tVn1o9Ak7GWwBsxUNXD4A9+WEqNkEAsBX3WT0A9uS5yiYIALbiHqsHwJ7OWz0A9iEA2IovrB4Ae/r86gGwDwHAVnxm9QDYk+cqmyAA2IorVw+APV2xegDsw8cA2Yqzq2urc1cPgdvx2Xb3ANy0egicjCsAbMWN1aWrR8BJvCsnfzZCALAlF68eACfhp6rZDAHAlvzt6gFwEn+zegDsyz0AbM37qketHgG34r3VY1ePgH25AsDW/OHqAXAbXrp6AJwKVwDYmrtXl1cPWD0EvsoV1cPzhVVsiCsAbM311a+vHgG38IKc/NkYVwDYorOqN1ffv3oIVG+sfnD1CDhVAoCtun/1nur81UMY7arq8dXHVw+BU+UtALbqquq5+eEV1vlc9Zyc/NkoAcCW/WP1E9UNq4cwzherH6/esXoIwGTPaPcLbDc5HEdwXFs9KwAOwhOqy1p/cnAc7+Pfq8cFwEG5d/WKdj8ctPpE4Thex5eqP6ruFQAH68ntfjho9UnDcTyOt1RPCoDNeHL1yuqa1p9EHNs6rm53Nek7g2PK9wAwwTnVhdVTq0dXF7T7/oDzqrst3MV6X2h3U9/H272//952P+l7SbtvnQQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATuL/ANILJbw2b9d5AAAAAElFTkSuQmCC",JH="/assets/shapes-icon-BpiwLWZS.png",ZH="/assets/emoji-icon-DGWSzL21.png",$H="/assets/comment-icon-D2tnyNZ6.png",tG="/assets/link-icon-BaLUL97h.png",eG="/assets/redo-icon-B46labgb.png",nG="/assets/undo-icon-i2DOfIDT.png",iG="/assets/pencil-icon-D_gGFYx7.png";function sG({activeTool:n,onToolSelect:t,onEmojiSelect:e,onUndo:i,onRedo:s,canEdit:l}){const[c,f]=H.useState(!1),[m,g]=H.useState(!1),[A,E]=H.useState(!1),[T,x]=H.useState(!1),[w,I]=H.useState(!1),L=H.useRef(null),B=H.useRef(null),j=H.useRef(null),q=H.useRef(null),$=H.useRef(null),Z=()=>{f(!1),g(!1),E(!1),x(!1),I(!1)};H.useEffect(()=>{function P(M){L.current?.contains(M.target)||B.current?.contains(M.target)||j.current?.contains(M.target)||q.current?.contains(M.target)||$.current?.contains(M.target)||Z()}return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const nt=["rectangle","circle","triangle","line"];return k.jsxs("div",{className:"whiteboard-toolbar",children:[k.jsx("span",{className:"toolbar-icon-wrap",title:"AI Template Generator - Coming Soon",children:k.jsx("button",{type:"button",className:"toolbar-icon-btn disabled",disabled:!0,children:k.jsx("img",{src:FH,alt:"AI",width:20,height:20})})}),k.jsx("button",{type:"button",className:`toolbar-icon-btn ${n==="pointer"?"active":""}`,onClick:()=>{Z(),t("pointer")},title:"Select",children:k.jsx("img",{src:YH,alt:"Select",width:20,height:20})}),k.jsxs("div",{className:"toolbar-dropdown",ref:L,children:[k.jsx("button",{type:"button",className:"toolbar-icon-btn",onClick:()=>{Z(),f(P=>!P)},title:"Formats & Flows",children:k.jsx("img",{src:QH,alt:"Formats & Flows",width:20,height:20})}),c&&k.jsxs("div",{className:"toolbar-dropdown-panel",children:[k.jsx("p",{className:"toolbar-coming-soon",children:"Coming Soon"}),k.jsx("p",{className:"toolbar-dropdown-hint",children:"Doc, Slides, Table, Timeline, Kanban, Flow Chart"})]})]}),k.jsxs("div",{className:"toolbar-dropdown",ref:B,children:[k.jsx("button",{type:"button",className:"toolbar-icon-btn",onClick:()=>{Z(),g(P=>!P)},title:"Templates",children:k.jsx("img",{src:KH,alt:"Templates",width:20,height:20})}),m&&k.jsx("div",{className:"toolbar-dropdown-panel",children:k.jsx("p",{className:"toolbar-coming-soon",children:"Templates Coming Soon"})})]}),k.jsx("button",{type:"button",className:`toolbar-icon-btn ${n==="sticky"?"active":""}`,onClick:()=>{Z(),t("sticky")},disabled:!l,title:"Sticky Note",children:k.jsx("img",{src:XH,alt:"Sticky Note",width:20,height:20})}),k.jsx("button",{type:"button",className:`toolbar-icon-btn ${n==="text"?"active":""}`,onClick:()=>{Z(),t("text")},disabled:!l,title:"Text Box",children:k.jsx("img",{src:WH,alt:"Text Box",width:20,height:20})}),k.jsxs("div",{className:"toolbar-dropdown",ref:j,children:[k.jsx("button",{type:"button",className:`toolbar-icon-btn ${nt.includes(n)?"active":""}`,onClick:()=>{Z(),E(P=>!P)},disabled:!l,title:"Shapes",children:k.jsx("img",{src:JH,alt:"Shapes",width:20,height:20})}),A&&k.jsx("div",{className:"toolbar-dropdown-panel",children:nt.map(P=>k.jsx("button",{type:"button",className:"toolbar-dropdown-item",onClick:()=>{t(P),E(!1)},children:P.charAt(0).toUpperCase()+P.slice(1)},P))})]}),k.jsxs("div",{className:"toolbar-dropdown",ref:q,children:[k.jsx("button",{type:"button",className:`toolbar-icon-btn ${n==="pen"?"active":""}`,onClick:()=>{Z(),x(P=>!P),T||t("pen")},disabled:!l,title:"Pen",children:k.jsx("img",{src:iG,alt:"Pen",width:20,height:20})}),T&&k.jsxs("div",{className:"toolbar-dropdown-panel",children:[k.jsx("button",{type:"button",className:"toolbar-dropdown-item",disabled:!0,children:"Pen (Coming Soon)"}),k.jsx("button",{type:"button",className:"toolbar-dropdown-item",disabled:!0,children:"Highlighter (Coming Soon)"}),k.jsx("button",{type:"button",className:"toolbar-dropdown-item",disabled:!0,children:"Eraser (Coming Soon)"}),k.jsx("button",{type:"button",className:"toolbar-dropdown-item",disabled:!0,children:"Lasso (Coming Soon)"})]})]}),k.jsxs("div",{className:"toolbar-dropdown",ref:$,children:[k.jsx("button",{type:"button",className:`toolbar-icon-btn ${n==="emoji"?"active":""}`,onClick:()=>{Z(),I(P=>!P)},disabled:!l,title:"Stickers / Emojis",children:k.jsx("img",{src:ZH,alt:"Stickers / Emojis",width:20,height:20})}),w&&k.jsxs("div",{className:"toolbar-dropdown-panel toolbar-emoji-panel",children:[k.jsx("p",{className:"toolbar-coming-soon",children:"Emoji Picker Coming Soon"}),k.jsx("div",{className:"toolbar-emoji-preview",children:["","","","",""].map(P=>k.jsx("button",{type:"button",className:"toolbar-emoji-btn",onClick:()=>{t("emoji"),e?.(P),I(!1)},title:`Place ${P}`,children:P},P))})]})]}),k.jsx("button",{type:"button",className:`toolbar-icon-btn ${n==="comment"?"active":""}`,onClick:()=>{Z(),t("comment")},disabled:!l,title:"Comment",children:k.jsx("img",{src:$H,alt:"Comment",width:20,height:20})}),k.jsx("span",{className:"toolbar-icon-wrap",title:"Upload - Coming Soon",children:k.jsx("button",{type:"button",className:"toolbar-icon-btn disabled",disabled:!0,children:k.jsx("img",{src:tG,alt:"Upload",width:20,height:20})})}),k.jsx("div",{className:"toolbar-divider"}),k.jsx("button",{type:"button",className:"toolbar-icon-btn",title:"Undo (Z)",onClick:()=>i?.(),disabled:!l,children:k.jsx("img",{src:nG,alt:"Undo",width:20,height:20})}),k.jsx("button",{type:"button",className:"toolbar-icon-btn",title:"Redo (Z)",onClick:()=>s?.(),disabled:!l,children:k.jsx("img",{src:eG,alt:"Redo",width:20,height:20})})]})}const aG="/assets/reaction-icon-BOtQgXzF.png",rG="/assets/share-icon-ko8Xib63.png";function lG({boardName:n,onBoardNameChange:t,onShareClick:e,canEdit:i,canShare:s}){const[l,c]=H.useState(!1),[f,m]=H.useState(n),g=H.useRef(null),[A,E]=H.useState(!1),T=H.useRef(null);H.useEffect(()=>{m(n)},[n]),H.useEffect(()=>{l&&g.current?.focus()},[l]),H.useEffect(()=>{function w(I){T.current?.contains(I.target)||E(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const x=["","","","","",""];return k.jsxs(k.Fragment,{children:[k.jsxs("nav",{className:"whiteboard-nav-left",children:[k.jsx(nE,{to:"/dashboard",className:"whiteboard-nav-brand",children:"Vellum"}),k.jsx("div",{className:"whiteboard-nav-board-name",children:l&&i?k.jsx("input",{ref:g,type:"text",value:f,onChange:w=>m(w.target.value),onBlur:()=>{c(!1);const w=f.trim();w&&w!==n&&t?.(w)},onKeyDown:w=>{if(w.key==="Enter"){c(!1);const I=f.trim();I&&I!==n&&t?.(I)}},className:"whiteboard-nav-name-input"}):k.jsx("button",{type:"button",className:"whiteboard-nav-name-btn",onClick:()=>i&&c(!0),children:n||"Untitled Board"})})]}),k.jsxs("nav",{className:"whiteboard-nav-right",children:[k.jsxs("div",{className:"whiteboard-nav-reactions",ref:T,children:[k.jsx("button",{type:"button",className:"whiteboard-nav-btn",onClick:()=>E(w=>!w),title:"Reactions",children:k.jsx("img",{src:aG,alt:"Reactions",width:20,height:20})}),A&&k.jsxs("div",{className:"whiteboard-nav-reactions-panel",children:[k.jsx("p",{className:"whiteboard-nav-reactions-label",children:"Quick reactions"}),k.jsx("div",{className:"whiteboard-nav-reactions-grid",children:x.map(w=>k.jsx("button",{type:"button",className:"whiteboard-nav-emoji-btn",onClick:()=>E(!1),children:w},w))}),k.jsx("p",{className:"whiteboard-nav-coming-soon",children:"Stickers, Timer, Voting - Coming Soon"})]})]}),s&&k.jsxs("button",{type:"button",className:"whiteboard-nav-btn whiteboard-nav-share",onClick:e,title:"Share",children:[k.jsx("img",{src:rG,alt:"",width:20,height:20}),"Share"]})]})]})}const oG="/assets/grid-icon-7S24i3vX.png";function uG({showGrid:n,onGridToggle:t,zoom:e,onZoomIn:i,onZoomOut:s}){const l=Math.round(e*100);return k.jsxs("div",{className:"whiteboard-controls",children:[k.jsx("button",{type:"button",className:`whiteboard-control-btn ${n?"active":""}`,onClick:t,title:n?"Hide grid":"Show grid",children:k.jsx("img",{src:oG,alt:"",width:18,height:18})}),k.jsxs("div",{className:"whiteboard-zoom",children:[k.jsx("button",{type:"button",className:"whiteboard-zoom-btn",onClick:s,title:"Zoom out",disabled:l<=10,"aria-label":"Zoom out",children:""}),k.jsxs("span",{className:"whiteboard-zoom-value",children:[l,"%"]}),k.jsx("button",{type:"button",className:"whiteboard-zoom-btn",onClick:i,title:"Zoom in",disabled:l>=400,"aria-label":"Zoom in",children:"+"})]})]})}function cG({sticky:n,viewport:t,onSave:e,onCancel:i}){const s=H.useRef(null),l=t.x+n.position.x*t.scale,c=t.y+n.position.y*t.scale,f=n.dimensions.width*t.scale,m=n.dimensions.height*t.scale;return H.useEffect(()=>{s.current?.focus(),s.current?.select()},[]),k.jsx("div",{style:{position:"absolute",left:l,top:c,width:f,height:m,zIndex:1e3,padding:4,boxSizing:"border-box"},children:k.jsx("textarea",{ref:s,defaultValue:n.content,onBlur:g=>e(g.target.value),onKeyDown:g=>{g.key==="Escape"&&i()},style:{width:"100%",height:"100%",padding:8,margin:0,border:"2px solid #4f46e5",borderRadius:4,fontSize:n.textStyle.fontSize,fontFamily:n.textStyle.fontFamily,color:n.textStyle.fontColor,fontWeight:n.textStyle.bold?"bold":"normal",fontStyle:n.textStyle.italic?"italic":"normal",textAlign:n.textStyle.textAlign,resize:"none",outline:"none",background:n.fillColor,boxSizing:"border-box"}})})}function hG({text:n,viewport:t,onSave:e,onCancel:i}){const s=H.useRef(null),l=t.x+n.position.x*t.scale,c=t.y+n.position.y*t.scale,f=n.dimensions.width*t.scale,m=n.dimensions.height*t.scale;return H.useEffect(()=>{s.current?.focus()},[]),k.jsx("div",{style:{position:"absolute",left:l,top:c,width:f,height:m,zIndex:1e3,padding:4,boxSizing:"border-box"},children:k.jsx("textarea",{ref:s,defaultValue:n.content,onBlur:g=>e(g.target.value),onKeyDown:g=>{g.key==="Escape"&&i()},style:{width:"100%",height:"100%",padding:8,margin:0,border:"2px solid #4f46e5",borderRadius:4,fontSize:n.textStyle.fontSize,fontFamily:n.textStyle.fontFamily,color:n.textStyle.fontColor,fontWeight:n.textStyle.bold?"bold":"normal",fontStyle:n.textStyle.italic?"italic":"normal",textAlign:n.textStyle.textAlign,resize:"none",outline:"none",background:"transparent",boxSizing:"border-box"}})})}function fG({position:n,viewport:t,canvasWidth:e,canvasHeight:i,onSave:s,onCancel:l}){const[c,f]=H.useState(""),m=H.useRef(null);if(H.useEffect(()=>{m.current?.focus()},[]),!n)return null;const g=t.x+n.x*t.scale,A=t.y+n.y*t.scale,E=12;let T=g+E,x=A;return T+280>e&&(T=g-280-E),x+180>i&&(x=i-180),x<8&&(x=8),k.jsx("div",{className:"comment-modal-overlay",onClick:w=>w.target===w.currentTarget&&l(),children:k.jsxs("div",{className:"comment-modal comment-modal-inline",style:{left:T,top:x},onClick:w=>w.stopPropagation(),children:[k.jsx("h3",{children:"Add Comment"}),k.jsx("textarea",{ref:m,value:c,onChange:w=>f(w.target.value),placeholder:"Write a comment...",rows:3}),k.jsxs("div",{className:"comment-modal-actions",children:[k.jsx("button",{type:"button",className:"comment-btn-cancel",onClick:l,children:"Cancel"}),k.jsx("button",{type:"button",className:"comment-btn-save",onClick:()=>{const w=c.trim();w&&s(w),l()},disabled:!c.trim(),children:"Done"})]})]})})}const Z8=(...n)=>n.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim();const dG=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const mG=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase());const Xb=n=>{const t=mG(n);return t.charAt(0).toUpperCase()+t.slice(1)};var pG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const gG=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const _G=H.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:s="",children:l,iconNode:c,...f},m)=>H.createElement("svg",{ref:m,...pG,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:Z8("lucide",s),...!l&&!gG(f)&&{"aria-hidden":"true"},...f},[...c.map(([g,A])=>H.createElement(g,A)),...Array.isArray(l)?l:[l]]));const yG=(n,t)=>{const e=H.forwardRef(({className:i,...s},l)=>H.createElement(_G,{ref:l,iconNode:t,className:Z8(`lucide-${dG(Xb(n))}`,`lucide-${n}`,i),...s}));return e.displayName=Xb(n),e};const vG=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],AG=yG("trash-2",vG);function EG({comment:n,currentUserId:t,onReply:e,onDelete:i,onClose:s}){const[l,c]=H.useState("");if(!n)return null;const f=t!=null&&n.authorId===t,m=()=>{const g=l.trim();g&&(e(g),c(""))};return k.jsx("div",{className:"comment-thread-overlay",onClick:g=>g.target===g.currentTarget&&s(),children:k.jsxs("div",{className:"comment-thread-modal",children:[k.jsxs("div",{className:"comment-thread-header",children:[k.jsx("h3",{children:"Comment"}),k.jsxs("div",{className:"comment-thread-header-actions",children:[f&&i&&k.jsx("button",{type:"button",className:"comment-btn-delete",onClick:i,title:"Delete comment","aria-label":"Delete comment",children:k.jsx(AG,{size:18})}),k.jsx("button",{type:"button",className:"comment-btn-done",onClick:s,children:"Done"})]})]}),k.jsxs("div",{className:"comment-thread-main",children:[k.jsx("div",{className:"comment-thread-author",children:n.authorName||"Anonymous"}),k.jsx("p",{className:"comment-thread-text",children:n.text})]}),n.replies.length>0&&k.jsx("div",{className:"comment-thread-replies",children:n.replies.map((g,A)=>k.jsxs("div",{className:"comment-thread-reply",children:[k.jsx("span",{className:"comment-thread-reply-author",children:g.authorName||"Anonymous"}),k.jsx("p",{children:g.text})]},A))}),k.jsxs("div",{className:"comment-thread-input",children:[k.jsx("textarea",{value:l,onChange:g=>c(g.target.value),placeholder:"Write a reply...",rows:2}),k.jsx("button",{type:"button",className:"comment-btn-reply",onClick:m,disabled:!l.trim(),children:"Reply"})]})]})})}function SG(){const{boardId:n}=bw(),t=zf(),{user:e}=kS(),i=H.useRef(null),[s,l]=H.useState(null),[c,f]=H.useState(!1),[m,g]=H.useState(!0),[A,E]=H.useState(!1),[T,x]=H.useState({}),[w,I]=H.useState([]),[,L]=H.useState([]),[B,j]=H.useState([]),[q,$]=H.useState({x:0,y:0,scale:1}),[Z,nt]=H.useState("pointer"),[P,M]=H.useState(new Set),[z,F]=H.useState(null),[X,Q]=H.useState(null),[G,Yt]=H.useState(!1),[Pt,et]=H.useState(null),[vt,St]=H.useState(null),[Ut,Qt]=H.useState(null),[K,ft]=H.useState(()=>{try{const ht=localStorage.getItem("vellum:showGrid");return ht===null?!0:ht==="true"}catch{return!0}}),[yt,jt]=H.useState(()=>({width:typeof window<"u"?window.innerWidth:800,height:typeof window<"u"?window.innerHeight:600})),qt=H.useRef([]),Wt=H.useRef([]),ge=H.useRef(!1),wt=n??"";H.useEffect(()=>{if(!wt)return;let ht=!1;return RU(wt).then(Rt=>{ht||!Rt||(qt.current=Rt.undoStack,Wt.current=Rt.redoStack)}),()=>{ht=!0}},[wt]),H.useEffect(()=>{if(!wt||!e)return;let ht=!1;async function Rt(){try{const Ht=await Ym(wt);if(ht)return;if(!Ht){f(!0),l(null);return}const he=await s8(wt);if(ht)return;if(he===null){f(!0),l(null);return}l(Ht),f(!1);const Ge=await eU(wt);ht||E(Ge)}finally{ht||g(!1)}}return Rt(),()=>{ht=!0}},[wt,e]),H.useEffect(()=>{!wt||!e||wU(wt)},[wt,e]),H.useEffect(()=>{if(!(!wt||!e)&&i.current){const ht=(yt.width/2-q.x)/q.scale,Rt=(yt.height/2-q.y)/q.scale;mb(wt,ht,Rt)}},[wt,e,yt,q]),H.useEffect(()=>wt?vU(wt,x):void 0,[wt]),H.useEffect(()=>wt?TU(wt,I):void 0,[wt]),H.useEffect(()=>wt?xU(wt,L):void 0,[wt]),H.useEffect(()=>wt?NU(wt,j):void 0,[wt]),H.useEffect(()=>{const ht=i.current;if(!ht)return;const Rt=()=>jt({width:window.innerWidth,height:window.innerHeight}),Ht=new ResizeObserver(he=>{const Ge=he[0]?.contentRect;Ge?.width&&Ge?.height?jt({width:Ge.width,height:Ge.height}):Rt()});return Ht.observe(ht),window.addEventListener("resize",Rt),Rt(),()=>{Ht.disconnect(),window.removeEventListener("resize",Rt)}},[]);const ie=H.useCallback(ht=>{qt.current=qt.current.slice(-99).concat(ht),Wt.current=[],wt&&x2(wt,qt.current,Wt.current)},[wt]),as=H.useCallback(async()=>{const ht=qt.current.pop();if(!(!ht||!wt||!A))try{if(ht.type==="create")await w2(wt,ht.objectId),Wt.current.push(ht);else if(ht.type==="update")await Sf(wt,ht.objectId,ht.from),Wt.current.push({...ht,from:ht.to,to:ht.from});else if(ht.type==="delete"){const Rt=gU(ht.deleted);await yU(wt,ht.objectId,Rt),Wt.current.push(ht)}else if(ht.type==="deleteComment"){const{id:Rt,boardId:Ht,...he}=ht.deleted;await SU(wt,ht.commentId,he),Wt.current.push(ht)}x2(wt,qt.current,Wt.current)}catch(Rt){console.error("[undo]",Rt),qt.current.push(ht)}},[wt,A]),xs=H.useCallback(async()=>{const ht=Wt.current.pop();if(!(!ht||!wt||!A))try{if(ht.type==="create"){const Rt=await R2(wt,ht.createInput);qt.current.push({...ht,objectId:Rt})}else ht.type==="update"?(await Sf(wt,ht.objectId,ht.to),qt.current.push({...ht,from:ht.to,to:ht.from})):ht.type==="delete"?(await w2(wt,ht.objectId),qt.current.push(ht)):ht.type==="deleteComment"&&(await cb(wt,ht.commentId),qt.current.push(ht));x2(wt,qt.current,Wt.current)}catch(Rt){console.error("[redo]",Rt),Wt.current.push(ht)}},[wt,A]);H.useEffect(()=>{const ht=Rt=>{Rt.key==="Escape"&&(nt("pointer"),M(new Set),et(null),St(null)),(Rt.key==="Delete"||Rt.key==="Backspace")&&P.size>0&&A&&(Rt.preventDefault(),P.forEach(Ht=>{const he=T[Ht];he&&ie({type:"delete",objectId:Ht,deleted:he}),w2(wt,Ht)}),M(new Set)),(Rt.metaKey||Rt.ctrlKey)&&Rt.key==="z"&&(Rt.preventDefault(),Rt.shiftKey?xs():as())};return window.addEventListener("keydown",ht),()=>window.removeEventListener("keydown",ht)},[wt,A,P,T,ie,as,xs]);const Ns=H.useCallback(ht=>{if(!wt)return;const Rt=ht.target.getStage();if(!Rt?.getPointerPosition)return;const Ht=Rt.getPointerPosition();if(!Ht)return;const he=(Ht.x-q.x)/q.scale,Ge=(Ht.y-q.y)/q.scale;mb(wt,he,Ge)},[wt,q]),Vi=H.useCallback(()=>{const ht=yt.width,Rt=yt.height;return{x:(ht/2-q.x)/q.scale,y:(Rt/2-q.y)/q.scale}},[yt,q]),rs=H.useCallback(async(ht,Rt,Ht)=>{if(!wt||!A)return;const he=T[ht];if(he){if(he.type==="line"){const Ge=he,Ms=Math.min(Ge.start.x,Ge.end.x),ta=Math.min(Ge.start.y,Ge.end.y),ui=Rt-Ms,Ls=Ht-ta,us={start:{x:Ge.start.x+ui,y:Ge.start.y+Ls},end:{x:Ge.end.x+ui,y:Ge.end.y+Ls}};ie({type:"update",objectId:ht,from:{start:Ge.start,end:Ge.end},to:us}),await Sf(wt,ht,us)}else if("position"in he){const Ge={position:he.position},Ms={position:{x:Rt,y:Ht}};ie({type:"update",objectId:ht,from:Ge,to:Ms}),x(ta=>{const ui=ta[ht];return!ui||!("position"in ui)?ta:{...ta,[ht]:{...ui,position:{x:Rt,y:Ht}}}}),await Sf(wt,ht,Ms)}}},[wt,A,T,ie]),Zs=H.useCallback((ht,Rt)=>{M(Ht=>{const he=new Set(Ht);if(Rt.ctrlKey)he.has(ht)?he.delete(ht):he.add(ht);else return new Set([ht]);return he})},[]),ls=H.useCallback(async(ht,Rt)=>{if(!wt||!A)return;const Ht=T[ht];if(!Ht)return;const he="start"in Rt?{start:Ht.start,end:Ht.end}:{position:Ht.position,dimensions:Ht.dimensions};ie({type:"update",objectId:ht,from:he,to:Rt}),x(Ge=>{const Ms=Ge[ht];return Ms?"start"in Rt?{...Ge,[ht]:{...Ms,start:Rt.start,end:Rt.end}}:{...Ge,[ht]:{...Ms,position:Rt.position,dimensions:Rt.dimensions}}:Ge}),await Sf(wt,ht,Rt)},[wt,A,T,ie]),$s=H.useCallback(async ht=>{if(M(new Set),Z==="comment"&&A&&et(ht),(Z==="sticky"||Z==="rectangle"||Z==="circle"||Z==="triangle"||Z==="line"||Z==="text")&&A){const Rt=ht;let Ht=null;if(Z==="sticky")Ht={type:"sticky",position:{x:Rt.x-100,y:Rt.y-100},dimensions:{width:200,height:200},fillColor:"#fef08a"};else if(Z==="rectangle")Ht={type:"rectangle",position:{x:Rt.x-75,y:Rt.y-50},dimensions:{width:150,height:100}};else if(Z==="circle")Ht={type:"circle",position:{x:Rt.x-50,y:Rt.y-50},dimensions:{width:100,height:100}};else if(Z==="triangle")Ht={type:"triangle",position:{x:Rt.x-50,y:Rt.y-40},dimensions:{width:100,height:80}};else if(Z==="line")Ht={type:"line",start:{x:Rt.x-50,y:Rt.y},end:{x:Rt.x+50,y:Rt.y}};else if(Z==="text"){if(ge.current){ge.current=!1;return}Ht={type:"text",position:{x:Rt.x-100,y:Rt.y-20},dimensions:{width:200,height:40},content:""}}if(Ht){const he=await R2(wt,Ht);ie({type:"create",objectId:he,createInput:Ht}),Z==="text"&&Q(he)}}if(Z==="emoji"&&A){const Rt=Ut??"",Ht={type:"emoji",position:{x:ht.x-16,y:ht.y-16},emoji:Rt},he=await R2(wt,Ht);ie({type:"create",objectId:he,createInput:Ht})}},[wt,Z,A,Ut,ie]),Ql=H.useCallback(ht=>{A&&F(ht)},[A]),gr=H.useCallback(ht=>{A&&Q(ht)},[A]),Ds=H.useCallback(async(ht,Rt)=>{if(!wt||!A)return;const Ht=T[ht],he=Ht&&Ht.type==="sticky"?Ht.content:"";ie({type:"update",objectId:ht,from:{content:he},to:{content:Rt}}),await Sf(wt,ht,{content:Rt}),F(null)},[wt,A,T,ie]),Ya=H.useCallback(async(ht,Rt)=>{if(!wt||!A)return;const Ht=T[ht],he=Ht&&Ht.type==="text"?Ht.content:"";ie({type:"update",objectId:ht,from:{content:he},to:{content:Rt}}),await Sf(wt,ht,{content:Rt}),ge.current=!0,Q(null)},[wt,A,T,ie]),Qa=H.useCallback(async ht=>{!wt||!A||!Pt||(await AU(wt,Pt,ht),et(null))},[wt,A,Pt]),Dn=H.useCallback(async ht=>{!wt||!vt||await EU(wt,vt.id,ht)},[wt,vt]),Hn=H.useCallback(async()=>{!wt||!vt||(ie({type:"deleteComment",commentId:vt.id,deleted:vt}),await cb(wt,vt.id),St(null))},[wt,vt,ie]),Bo=H.useCallback(()=>{const ht=Vi(),Rt=Math.min(4,q.scale*1.2),Ht=yt.width,he=yt.height;$({x:Ht/2-ht.x*Rt,y:he/2-ht.y*Rt,scale:Rt})},[q,yt,Vi]),In=H.useCallback(()=>{const ht=Vi(),Rt=Math.max(.1,q.scale/1.2),Ht=yt.width,he=yt.height;$({x:Ht/2-ht.x*Rt,y:he/2-ht.y*Rt,scale:Rt})},[q,yt,Vi]),Sn=H.useCallback(ht=>{nt(ht)},[]),Is=H.useCallback(ht=>{Qt(ht)},[]),os=H.useCallback(async ht=>{!wt||!s||s.ownerId!==e?.uid||(await JP(wt,{name:ht}),l(Rt=>Rt?{...Rt,name:ht}:null))},[wt,s,e?.uid]);if(!e)return null;if(m)return k.jsx("div",{className:"board-page-loading",children:"Loading board"});if(c)return k.jsxs("div",{className:"board-page-denied",children:[k.jsx("p",{children:"You don't have access to this board."}),k.jsx("button",{type:"button",onClick:()=>t("/dashboard"),children:"Back to Dashboard"})]});if(!s)return null;const Os=z?T[z]:null,Xl=X?T[X]:null,_r=Os?.type==="sticky",Xa=Xl?.type==="text";return k.jsxs("div",{className:"board-page",children:[k.jsx(lG,{boardName:s.name||"Untitled Board",onBoardNameChange:os,onShareClick:()=>Yt(!0),canEdit:A&&s.ownerId===e.uid,canShare:s.ownerId===e.uid}),k.jsxs("div",{ref:i,className:"board-canvas-container",children:[k.jsxs(IH,{width:yt.width,height:yt.height,viewport:q,onViewportChange:$,onMouseMove:Ns,onBackgroundClick:$s,showGrid:K,cursorLayer:k.jsx(HH,{cursors:B,viewport:q,currentUserId:e.uid}),children:[k.jsx(MH,{objects:T,viewport:q,selectedIds:P,isPointerTool:Z==="pointer",onObjectDragEnd:rs,onObjectClick:Zs,onObjectResizeEnd:ls,onStickyDoubleClick:Ql,onTextDoubleClick:gr,canEdit:A}),k.jsx(qH,{comments:w,onCommentClick:ht=>{et(null),St(ht)}})]}),k.jsx(sG,{activeTool:Z,onToolSelect:Sn,onEmojiSelect:Is,onUndo:as,onRedo:xs,canEdit:A}),k.jsx(uG,{showGrid:K,onGridToggle:()=>{ft(ht=>{const Rt=!ht;try{localStorage.setItem("vellum:showGrid",String(Rt))}catch{}return Rt})},zoom:q.scale,onZoomIn:Bo,onZoomOut:In}),_r&&z&&Os&&k.jsx(cG,{sticky:Os,viewport:q,onSave:ht=>Ds(z,ht),onCancel:()=>F(null)}),Xa&&X&&Xl&&k.jsx(hG,{text:Xl,viewport:q,onSave:ht=>Ya(X,ht),onCancel:()=>Q(null)}),k.jsx(fG,{position:Pt,viewport:q,canvasWidth:yt.width,canvasHeight:yt.height,onSave:Qa,onCancel:()=>et(null)}),k.jsx(EG,{comment:w.find(ht=>ht.id===vt?.id)??vt,currentUserId:e.uid,onReply:Dn,onDelete:Hn,onClose:()=>St(null)}),G&&k.jsx(l8,{boardId:wt,onClose:()=>Yt(!1)})]})]})}function Kb({children:n}){const{user:t,loading:e}=kS();return e?k.jsx("div",{className:"app-loading",children:"Loading"}):t?k.jsx(k.Fragment,{children:n}):k.jsx(cC,{to:"/login",replace:!0})}function TG(){return k.jsxs(zw,{children:[k.jsx(Zd,{path:"/",element:k.jsx(qP,{})}),k.jsx(Zd,{path:"/login",element:k.jsx(FP,{})}),k.jsx(Zd,{path:"/dashboard",element:k.jsx(Kb,{children:k.jsx(mU,{})})}),k.jsx(Zd,{path:"/board/:boardId",element:k.jsx(Kb,{children:k.jsx(SG,{})})}),k.jsx(Zd,{path:"*",element:k.jsx(cC,{to:"/",replace:!0})})]})}function bG(){return k.jsx(u7,{children:k.jsx(GP,{children:k.jsx(TG,{})})})}jR.createRoot(document.getElementById("root")).render(k.jsx(H.StrictMode,{children:k.jsx(bG,{})}));
