(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var qp={exports:{}},Iu={};var u0;function C1(){if(u0)return Iu;u0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Iu.Fragment=e,Iu.jsx=t,Iu.jsxs=t,Iu}var c0;function I1(){return c0||(c0=1,qp.exports=C1()),qp.exports}var te=I1(),Hp={exports:{}},Ae={};var h0;function N1(){if(h0)return Ae;h0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function I(x){return x===null||typeof x!="object"?null:(x=S&&x[S]||x["@@iterator"],typeof x=="function"?x:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,F={};function ne(x,W,re){this.props=x,this.context=W,this.refs=F,this.updater=re||P}ne.prototype.isReactComponent={},ne.prototype.setState=function(x,W){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,W,"setState")},ne.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function ee(){}ee.prototype=ne.prototype;function ie(x,W,re){this.props=x,this.context=W,this.refs=F,this.updater=re||P}var ge=ie.prototype=new ee;ge.constructor=ie,z(ge,ne.prototype),ge.isPureReactComponent=!0;var Ce=Array.isArray;function Se(){}var D={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function R(x,W,re){var he=re.ref;return{$$typeof:n,type:x,key:W,ref:he!==void 0?he:null,props:re}}function M(x,W){return R(x.type,W,x.props)}function k(x){return typeof x=="object"&&x!==null&&x.$$typeof===n}function L(x){var W={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(re){return W[re]})}var N=/\/+/g;function Pt(x,W){return typeof x=="object"&&x!==null&&x.key!=null?L(""+x.key):W.toString(36)}function Qt(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(Se,Se):(x.status="pending",x.then(function(W){x.status==="pending"&&(x.status="fulfilled",x.value=W)},function(W){x.status==="pending"&&(x.status="rejected",x.reason=W)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function Q(x,W,re,he,Ee){var Ie=typeof x;(Ie==="undefined"||Ie==="boolean")&&(x=null);var Le=!1;if(x===null)Le=!0;else switch(Ie){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(x.$$typeof){case n:case e:Le=!0;break;case y:return Le=x._init,Q(Le(x._payload),W,re,he,Ee)}}if(Le)return Ee=Ee(x),Le=he===""?"."+Pt(x,0):he,Ce(Ee)?(re="",Le!=null&&(re=Le.replace(N,"$&/")+"/"),Q(Ee,W,re,"",function(wi){return wi})):Ee!=null&&(k(Ee)&&(Ee=M(Ee,re+(Ee.key==null||x&&x.key===Ee.key?"":(""+Ee.key).replace(N,"$&/")+"/")+Le)),W.push(Ee)),1;Le=0;var Wt=he===""?".":he+":";if(Ce(x))for(var pt=0;pt<x.length;pt++)he=x[pt],Ie=Wt+Pt(he,pt),Le+=Q(he,W,re,Ie,Ee);else if(pt=I(x),typeof pt=="function")for(x=pt.call(x),pt=0;!(he=x.next()).done;)he=he.value,Ie=Wt+Pt(he,pt++),Le+=Q(he,W,re,Ie,Ee);else if(Ie==="object"){if(typeof x.then=="function")return Q(Qt(x),W,re,he,Ee);throw W=String(x),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Le}function ae(x,W,re){if(x==null)return x;var he=[],Ee=0;return Q(x,he,"","",function(Ie){return W.call(re,Ie,Ee++)}),he}function pe(x){if(x._status===-1){var W=x._result;W=W(),W.then(function(re){(x._status===0||x._status===-1)&&(x._status=1,x._result=re)},function(re){(x._status===0||x._status===-1)&&(x._status=2,x._result=re)}),x._status===-1&&(x._status=0,x._result=W)}if(x._status===1)return x._result.default;throw x._result}var qe=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},Qe={map:ae,forEach:function(x,W,re){ae(x,function(){W.apply(this,arguments)},re)},count:function(x){var W=0;return ae(x,function(){W++}),W},toArray:function(x){return ae(x,function(W){return W})||[]},only:function(x){if(!k(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return Ae.Activity=T,Ae.Children=Qe,Ae.Component=ne,Ae.Fragment=t,Ae.Profiler=a,Ae.PureComponent=ie,Ae.StrictMode=r,Ae.Suspense=p,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(x){return D.H.useMemoCache(x)}},Ae.cache=function(x){return function(){return x.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(x,W,re){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var he=z({},x.props),Ee=x.key;if(W!=null)for(Ie in W.key!==void 0&&(Ee=""+W.key),W)!b.call(W,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&W.ref===void 0||(he[Ie]=W[Ie]);var Ie=arguments.length-2;if(Ie===1)he.children=re;else if(1<Ie){for(var Le=Array(Ie),Wt=0;Wt<Ie;Wt++)Le[Wt]=arguments[Wt+2];he.children=Le}return R(x.type,Ee,he)},Ae.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},Ae.createElement=function(x,W,re){var he,Ee={},Ie=null;if(W!=null)for(he in W.key!==void 0&&(Ie=""+W.key),W)b.call(W,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ee[he]=W[he]);var Le=arguments.length-2;if(Le===1)Ee.children=re;else if(1<Le){for(var Wt=Array(Le),pt=0;pt<Le;pt++)Wt[pt]=arguments[pt+2];Ee.children=Wt}if(x&&x.defaultProps)for(he in Le=x.defaultProps,Le)Ee[he]===void 0&&(Ee[he]=Le[he]);return R(x,Ie,Ee)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(x){return{$$typeof:d,render:x}},Ae.isValidElement=k,Ae.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:pe}},Ae.memo=function(x,W){return{$$typeof:g,type:x,compare:W===void 0?null:W}},Ae.startTransition=function(x){var W=D.T,re={};D.T=re;try{var he=x(),Ee=D.S;Ee!==null&&Ee(re,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(Se,qe)}catch(Ie){qe(Ie)}finally{W!==null&&re.types!==null&&(W.types=re.types),D.T=W}},Ae.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ae.use=function(x){return D.H.use(x)},Ae.useActionState=function(x,W,re){return D.H.useActionState(x,W,re)},Ae.useCallback=function(x,W){return D.H.useCallback(x,W)},Ae.useContext=function(x){return D.H.useContext(x)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(x,W){return D.H.useDeferredValue(x,W)},Ae.useEffect=function(x,W){return D.H.useEffect(x,W)},Ae.useEffectEvent=function(x){return D.H.useEffectEvent(x)},Ae.useId=function(){return D.H.useId()},Ae.useImperativeHandle=function(x,W,re){return D.H.useImperativeHandle(x,W,re)},Ae.useInsertionEffect=function(x,W){return D.H.useInsertionEffect(x,W)},Ae.useLayoutEffect=function(x,W){return D.H.useLayoutEffect(x,W)},Ae.useMemo=function(x,W){return D.H.useMemo(x,W)},Ae.useOptimistic=function(x,W){return D.H.useOptimistic(x,W)},Ae.useReducer=function(x,W,re){return D.H.useReducer(x,W,re)},Ae.useRef=function(x){return D.H.useRef(x)},Ae.useState=function(x){return D.H.useState(x)},Ae.useSyncExternalStore=function(x,W,re){return D.H.useSyncExternalStore(x,W,re)},Ae.useTransition=function(){return D.H.useTransition()},Ae.version="19.2.4",Ae}var f0;function f_(){return f0||(f0=1,Hp.exports=N1()),Hp.exports}var H=f_(),Gp={exports:{}},Nu={},Kp={exports:{}},Yp={};var d0;function D1(){return d0||(d0=1,(function(n){function e(Q,ae){var pe=Q.length;Q.push(ae);e:for(;0<pe;){var qe=pe-1>>>1,Qe=Q[qe];if(0<a(Qe,ae))Q[qe]=ae,Q[pe]=Qe,pe=qe;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ae=Q[0],pe=Q.pop();if(pe!==ae){Q[0]=pe;e:for(var qe=0,Qe=Q.length,x=Qe>>>1;qe<x;){var W=2*(qe+1)-1,re=Q[W],he=W+1,Ee=Q[he];if(0>a(re,pe))he<Qe&&0>a(Ee,re)?(Q[qe]=Ee,Q[he]=pe,qe=he):(Q[qe]=re,Q[W]=pe,qe=W);else if(he<Qe&&0>a(Ee,pe))Q[qe]=Ee,Q[he]=pe,qe=he;else break e}}return ae}function a(Q,ae){var pe=Q.sortIndex-ae.sortIndex;return pe!==0?pe:Q.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],y=1,T=null,S=3,I=!1,P=!1,z=!1,F=!1,ne=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function ge(Q){for(var ae=t(g);ae!==null;){if(ae.callback===null)r(g);else if(ae.startTime<=Q)r(g),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(g)}}function Ce(Q){if(z=!1,ge(Q),!P)if(t(p)!==null)P=!0,Se||(Se=!0,L());else{var ae=t(g);ae!==null&&Qt(Ce,ae.startTime-Q)}}var Se=!1,D=-1,b=5,R=-1;function M(){return F?!0:!(n.unstable_now()-R<b)}function k(){if(F=!1,Se){var Q=n.unstable_now();R=Q;var ae=!0;try{e:{P=!1,z&&(z=!1,ee(D),D=-1),I=!0;var pe=S;try{t:{for(ge(Q),T=t(p);T!==null&&!(T.expirationTime>Q&&M());){var qe=T.callback;if(typeof qe=="function"){T.callback=null,S=T.priorityLevel;var Qe=qe(T.expirationTime<=Q);if(Q=n.unstable_now(),typeof Qe=="function"){T.callback=Qe,ge(Q),ae=!0;break t}T===t(p)&&r(p),ge(Q)}else r(p);T=t(p)}if(T!==null)ae=!0;else{var x=t(g);x!==null&&Qt(Ce,x.startTime-Q),ae=!1}}break e}finally{T=null,S=pe,I=!1}ae=void 0}}finally{ae?L():Se=!1}}}var L;if(typeof ie=="function")L=function(){ie(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Pt=N.port2;N.port1.onmessage=k,L=function(){Pt.postMessage(null)}}else L=function(){ne(k,0)};function Qt(Q,ae){D=ne(function(){Q(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var pe=S;S=ae;try{return Q()}finally{S=pe}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(Q,ae){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var pe=S;S=Q;try{return ae()}finally{S=pe}},n.unstable_scheduleCallback=function(Q,ae,pe){var qe=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?qe+pe:qe):pe=qe,Q){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=pe+Qe,Q={id:y++,callback:ae,priorityLevel:Q,startTime:pe,expirationTime:Qe,sortIndex:-1},pe>qe?(Q.sortIndex=pe,e(g,Q),t(p)===null&&Q===t(g)&&(z?(ee(D),D=-1):z=!0,Qt(Ce,pe-qe))):(Q.sortIndex=Qe,e(p,Q),P||I||(P=!0,Se||(Se=!0,L()))),Q},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(Q){var ae=S;return function(){var pe=S;S=ae;try{return Q.apply(this,arguments)}finally{S=pe}}}})(Yp)),Yp}var m0;function O1(){return m0||(m0=1,Kp.exports=D1()),Kp.exports}var Qp={exports:{}},un={};var p0;function M1(){if(p0)return un;p0=1;var n=f_();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,y){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:p,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,un.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,y)},un.flushSync=function(p){var g=c.T,y=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=g,r.p=y,r.d.f()}},un.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(p,g))},un.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},un.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,T=d(y,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,I=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?r.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:I}):y==="script"&&r.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:I,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},un.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);r.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(p)},un.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,T=d(y,g.crossOrigin);r.d.L(p,y,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},un.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=d(g.as,g.crossOrigin);r.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(p)},un.requestFormReset=function(p){r.d.r(p)},un.unstable_batchedUpdates=function(p,g){return p(g)},un.useFormState=function(p,g,y){return c.H.useFormState(p,g,y)},un.useFormStatus=function(){return c.H.useHostTransitionStatus()},un.version="19.2.4",un}var g0;function x1(){if(g0)return Qp.exports;g0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qp.exports=M1(),Qp.exports}var _0;function k1(){if(_0)return Nu;_0=1;var n=O1(),e=f_(),t=x1();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(r(188))}function g(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),i;if(m===u)return p(f),s;m=m.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=m;else{for(var v=!1,A=f.child;A;){if(A===o){v=!0,o=f,u=m;break}if(A===u){v=!0,u=f,o=m;break}A=A.sibling}if(!v){for(A=m.child;A;){if(A===o){v=!0,o=m,u=f;break}if(A===u){v=!0,u=m,o=f;break}A=A.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function y(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=y(i),s!==null)return s;i=i.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=k&&i[k]||i["@@iterator"],typeof i=="function"?i:null)}var N=Symbol.for("react.client.reference");function Pt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===N?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case z:return"Fragment";case ne:return"Profiler";case F:return"StrictMode";case Ce:return"Suspense";case Se:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case P:return"Portal";case ie:return i.displayName||"Context";case ee:return(i._context.displayName||"Context")+".Consumer";case ge:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:Pt(i.type)||"Memo";case b:s=i._payload,i=i._init;try{return Pt(i(s))}catch{}}return null}var Qt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},qe=[],Qe=-1;function x(i){return{current:i}}function W(i){0>Qe||(i.current=qe[Qe],qe[Qe]=null,Qe--)}function re(i,s){Qe++,qe[Qe]=i.current,i.current=s}var he=x(null),Ee=x(null),Ie=x(null),Le=x(null);function Wt(i,s){switch(re(Ie,s),re(Ee,i),re(he,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?MT(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=MT(s),i=xT(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}W(he),re(he,i)}function pt(){W(he),W(Ee),W(Ie)}function wi(i){i.memoizedState!==null&&re(Le,i);var s=he.current,o=xT(s,i.type);s!==o&&(re(Ee,i),re(he,o))}function Qi(i){Ee.current===i&&(W(he),W(Ee)),Le.current===i&&(W(Le),wu._currentValue=pe)}var ta,Ja;function oi(i){if(ta===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);ta=s&&s[1]||"",Ja=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ta+i+Ja}var na=!1;function Za(i,s){if(!i||na)return"";na=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(G){var q=G}Reflect.construct(i,[],J)}else{try{J.call()}catch(G){q=G}i.call(J.prototype)}}else{try{throw Error()}catch(G){q=G}(J=i())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(G){if(G&&q&&typeof G.stack=="string")return[G.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),v=m[0],A=m[1];if(v&&A){var C=v.split(`
`),j=A.split(`
`);for(f=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;if(u===C.length||f===j.length)for(u=C.length-1,f=j.length-1;1<=u&&0<=f&&C[u]!==j[f];)f--;for(;1<=u&&0<=f;u--,f--)if(C[u]!==j[f]){if(u!==1||f!==1)do if(u--,f--,0>f||C[u]!==j[f]){var Y=`
`+C[u].replace(" at new "," at ");return i.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",i.displayName)),Y}while(1<=u&&0<=f);break}}}finally{na=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?oi(o):""}function Bd(i,s){switch(i.tag){case 26:case 27:case 5:return oi(i.type);case 16:return oi("Lazy");case 13:return i.child!==s&&s!==null?oi("Suspense Fallback"):oi("Suspense");case 19:return oi("SuspenseList");case 0:case 15:return Za(i.type,!1);case 11:return Za(i.type.render,!1);case 1:return Za(i.type,!0);case 31:return oi("Activity");default:return""}}function Mc(i){try{var s="",o=null;do s+=Bd(i,o),o=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var eo=Object.prototype.hasOwnProperty,ia=n.unstable_scheduleCallback,to=n.unstable_cancelCallback,Fd=n.unstable_shouldYield,Cl=n.unstable_requestPaint,$t=n.unstable_now,xc=n.unstable_getCurrentPriorityLevel,Vt=n.unstable_ImmediatePriority,zt=n.unstable_UserBlockingPriority,Wi=n.unstable_NormalPriority,kc=n.unstable_LowPriority,Il=n.unstable_IdlePriority,jd=n.log,ra=n.unstable_setDisableYieldValue,Ur=null,on=null;function Kn(i){if(typeof jd=="function"&&ra(i),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(Ur,i)}catch{}}var _n=Math.clz32?Math.clz32:Pc,qd=Math.log,Nl=Math.LN2;function Pc(i){return i>>>=0,i===0?32:31-(qd(i)/Nl|0)|0}var sa=256,bi=262144,zr=4194304;function li(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Yn(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,m=i.suspendedLanes,v=i.pingedLanes;i=i.warmLanes;var A=u&134217727;return A!==0?(u=A&~m,u!==0?f=li(u):(v&=A,v!==0?f=li(v):o||(o=A&~i,o!==0&&(f=li(o))))):(A=u&~m,A!==0?f=li(A):v!==0?f=li(v):o||(o=u&~i,o!==0&&(f=li(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function Br(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function no(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dl(){var i=zr;return zr<<=1,(zr&62914560)===0&&(zr=4194304),i}function $i(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Fr(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Xt(i,s,o,u,f,m){var v=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var A=i.entanglements,C=i.expirationTimes,j=i.hiddenUpdates;for(o=v&~o;0<o;){var Y=31-_n(o),J=1<<Y;A[Y]=0,C[Y]=-1;var q=j[Y];if(q!==null)for(j[Y]=null,Y=0;Y<q.length;Y++){var G=q[Y];G!==null&&(G.lane&=-536870913)}o&=~J}u!==0&&Ol(i,u,0),m!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=m&~(v&~s))}function Ol(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-_n(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function jr(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-_n(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function qr(i,s){var o=s&-s;return o=(o&42)!==0?1:Ml(o),(o&(i.suspendedLanes|s))!==0?0:o}function Ml(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function xl(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Xi(){var i=ae.p;return i!==0?i:(i=window.event,i===void 0?32:n0(i.type))}function Vc(i,s){var o=ae.p;try{return ae.p=i,s()}finally{ae.p=o}}var Ri=Math.random().toString(36).slice(2),gt="__reactFiber$"+Ri,Jt="__reactProps$"+Ri,Ci="__reactContainer$"+Ri,Hr="__reactEvents$"+Ri,Ii="__reactListeners$"+Ri,Lc="__reactHandles$"+Ri,kl="__reactResources$"+Ri,Ji="__reactMarker$"+Ri;function aa(i){delete i[gt],delete i[Jt],delete i[Hr],delete i[Ii],delete i[Lc]}function Zi(i){var s=i[gt];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Ci]||o[gt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=BT(i);i!==null;){if(o=i[gt])return o;i=BT(i)}return s}i=o,o=i.parentNode}return null}function er(i){if(i=i[gt]||i[Ci]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function oa(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function ui(i){var s=i[kl];return s||(s=i[kl]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Et(i){i[Ji]=!0}var io=new Set,Gr={};function yn(i,s){Ni(i,s),Ni(i+"Capture",s)}function Ni(i,s){for(Gr[i]=s,i=0;i<s.length;i++)io.add(s[i])}var Hd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pl={},Vl={};function Uc(i){return eo.call(Vl,i)?!0:eo.call(Pl,i)?!1:Hd.test(i)?Vl[i]=!0:(Pl[i]=!0,!1)}function Kr(i,s,o){if(Uc(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function Yr(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function Qn(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}function vn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function zc(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Gd(i,s,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,m.call(this,v)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function ro(i){if(!i._valueTracker){var s=zc(i)?"checked":"value";i._valueTracker=Gd(i,s,""+i[s])}}function Ll(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=zc(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function so(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var tr=/[\n"\\]/g;function _t(i){return i.replace(tr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Qr(i,s,o,u,f,m,v,A){i.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?i.type=v:i.removeAttribute("type"),s!=null?v==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+vn(s)):i.value!==""+vn(s)&&(i.value=""+vn(s)):v!=="submit"&&v!=="reset"||i.removeAttribute("value"),s!=null?ao(i,v,vn(s)):o!=null?ao(i,v,vn(o)):u!=null&&i.removeAttribute("value"),f==null&&m!=null&&(i.defaultChecked=!!m),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+vn(A):i.removeAttribute("name")}function la(i,s,o,u,f,m,v,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(i.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){ro(i);return}o=o!=null?""+vn(o):"",s=s!=null?""+vn(s):o,A||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=A?i.checked:!!u,i.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.name=v),ro(i)}function ao(i,s,o){s==="number"&&so(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function He(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+vn(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function ua(i,s,o){if(s!=null&&(s=""+vn(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+vn(o):""}function Wr(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(Qt(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=vn(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),ro(i)}function Wn(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var Kd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ul(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||Kd.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function Bc(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Ul(i,f,u)}else for(var m in s)s.hasOwnProperty(m)&&Ul(i,m,s[m])}function zl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Di(i){return Qd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Bt(){}var oo=null;function lo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var nr=null,xn=null;function Fc(i){var s=er(i);if(s&&(i=s.stateNode)){var o=i[Jt]||null;e:switch(i=s.stateNode,s.type){case"input":if(Qr(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+_t(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[Jt]||null;if(!f)throw Error(r(90));Qr(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&Ll(u)}break e;case"textarea":ua(i,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&He(i,!!o.multiple,s,!1)}}}var Bl=!1;function jc(i,s,o){if(Bl)return i(s,o);Bl=!0;try{var u=i(s);return u}finally{if(Bl=!1,(nr!==null||xn!==null)&&(Uh(),nr&&(s=nr,i=xn,xn=nr=null,Fc(s),i)))for(s=0;s<i.length;s++)Fc(i[s])}}function An(i,s){var o=i.stateNode;if(o===null)return null;var u=o[Jt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fl=!1;if(ci)try{var Oi={};Object.defineProperty(Oi,"passive",{get:function(){Fl=!0}}),window.addEventListener("test",Oi,Oi),window.removeEventListener("test",Oi,Oi)}catch{Fl=!1}var kn=null,uo=null,Mi=null;function $r(){if(Mi)return Mi;var i,s=uo,o=s.length,u,f="value"in kn?kn.value:kn.textContent,m=f.length;for(i=0;i<o&&s[i]===f[i];i++);var v=o-i;for(u=1;u<=v&&s[o-u]===f[m-u];u++);return Mi=f.slice(i,1<u?1-u:void 0)}function ca(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Xr(){return!0}function at(){return!1}function ln(i){function s(o,u,f,m,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(o=i[A],this[A]=o?o(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Xr:at,this.isPropagationStopped=at,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),s}var ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=ln(ir),Jr=T({},ir,{view:0,detail:0}),qc=ln(Jr),Zr,co,En,fa=T({},Jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==En&&(En&&i.type==="mousemove"?(Zr=i.screenX-En.screenX,co=i.screenY-En.screenY):co=Zr=0,En=i),Zr)},movementY:function(i){return"movementY"in i?i.movementY:co}}),Hc=ln(fa),da=T({},fa,{dataTransfer:0}),Gc=ln(da),jl=T({},Jr,{relatedTarget:0}),es=ln(jl),Kc=T({},ir,{animationName:0,elapsedTime:0,pseudoElement:0}),ho=ln(Kc),Wd=T({},ir,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Yc=ln(Wd),ma=T({},ir,{data:0}),ql=ln(ma),Qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wc(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Gl[i])?!!s[i]:!1}function ts(){return Wc}var $c=T({},Jr,{key:function(i){if(i.key){var s=Qc[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ca(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Hl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(i){return i.type==="keypress"?ca(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ca(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Xc=ln($c),rr=T({},fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kl=ln(rr),Jc=T({},Jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),Zc=ln(Jc),eh=T({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),fo=ln(eh),Tn=T({},fa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),th=ln(Tn),nh=T({},ir,{newState:0,oldState:0}),ns=ln(nh),h=[9,13,27,32],_=ci&&"CompositionEvent"in window,E=null;ci&&"documentMode"in document&&(E=document.documentMode);var w=ci&&"TextEvent"in window&&!E,U=ci&&(!_||E&&8<E&&11>=E),K=" ",se=!1;function We(i,s){switch(i){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ne=!1;function Ft(i,s){switch(i){case"compositionend":return bt(s);case"keypress":return s.which!==32?null:(se=!0,K);case"textInput":return i=s.data,i===K&&se?null:i;default:return null}}function jt(i,s){if(Ne)return i==="compositionend"||!_&&We(i,s)?(i=$r(),Mi=uo=kn=null,Ne=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return U&&s.locale!=="ko"?null:s.data;default:return null}}var is={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wn(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!is[i.type]:s==="textarea"}function pa(i,s,o,u){nr?xn?xn.push(u):xn=[u]:nr=u,s=Gh(s,"onChange"),0<s.length&&(o=new ha("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var sr=null,Yl=null;function eI(i){RT(i,0)}function ih(i){var s=oa(i);if(Ll(s))return i}function Gy(i,s){if(i==="change")return s}var Ky=!1;if(ci){var $d;if(ci){var Xd="oninput"in document;if(!Xd){var Yy=document.createElement("div");Yy.setAttribute("oninput","return;"),Xd=typeof Yy.oninput=="function"}$d=Xd}else $d=!1;Ky=$d&&(!document.documentMode||9<document.documentMode)}function Qy(){sr&&(sr.detachEvent("onpropertychange",Wy),Yl=sr=null)}function Wy(i){if(i.propertyName==="value"&&ih(Yl)){var s=[];pa(s,Yl,i,lo(i)),jc(eI,s)}}function tI(i,s,o){i==="focusin"?(Qy(),sr=s,Yl=o,sr.attachEvent("onpropertychange",Wy)):i==="focusout"&&Qy()}function nI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ih(Yl)}function iI(i,s){if(i==="click")return ih(s)}function rI(i,s){if(i==="input"||i==="change")return ih(s)}function sI(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Pn=typeof Object.is=="function"?Object.is:sI;function Ql(i,s){if(Pn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!eo.call(s,f)||!Pn(i[f],s[f]))return!1}return!0}function $y(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Xy(i,s){var o=$y(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=$y(o)}}function Jy(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Jy(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Zy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=so(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=so(i.document)}return s}function Jd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var aI=ci&&"documentMode"in document&&11>=document.documentMode,mo=null,Zd=null,Wl=null,em=!1;function ev(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;em||mo==null||mo!==so(u)||(u=mo,"selectionStart"in u&&Jd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Wl&&Ql(Wl,u)||(Wl=u,u=Gh(Zd,"onSelect"),0<u.length&&(s=new ha("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=mo)))}function ga(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var po={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionrun:ga("Transition","TransitionRun"),transitionstart:ga("Transition","TransitionStart"),transitioncancel:ga("Transition","TransitionCancel"),transitionend:ga("Transition","TransitionEnd")},tm={},tv={};ci&&(tv=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function _a(i){if(tm[i])return tm[i];if(!po[i])return i;var s=po[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in tv)return tm[i]=s[o];return i}var nv=_a("animationend"),iv=_a("animationiteration"),rv=_a("animationstart"),oI=_a("transitionrun"),lI=_a("transitionstart"),uI=_a("transitioncancel"),sv=_a("transitionend"),av=new Map,nm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nm.push("scrollEnd");function hi(i,s){av.set(i,s),yn(s,[i])}var rh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},$n=[],go=0,im=0;function sh(){for(var i=go,s=im=go=0;s<i;){var o=$n[s];$n[s++]=null;var u=$n[s];$n[s++]=null;var f=$n[s];$n[s++]=null;var m=$n[s];if($n[s++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}m!==0&&ov(o,f,m)}}function ah(i,s,o,u){$n[go++]=i,$n[go++]=s,$n[go++]=o,$n[go++]=u,im|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function rm(i,s,o,u){return ah(i,s,o,u),oh(i)}function ya(i,s){return ah(i,null,null,s),oh(i)}function ov(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=i.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(i=m.stateNode,i===null||i._visibility&1||(f=!0)),i=m,m=m.return;return i.tag===3?(m=i.stateNode,f&&s!==null&&(f=31-_n(o),i=m.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function oh(i){if(50<_u)throw _u=0,dp=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var _o={};function cI(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(i,s,o,u){return new cI(i,s,o,u)}function sm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ar(i,s){var o=i.alternate;return o===null?(o=Vn(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function lv(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function lh(i,s,o,u,f,m){var v=0;if(u=i,typeof i=="function")sm(i)&&(v=1);else if(typeof i=="string")v=p1(i,o,he.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=Vn(31,o,s,f),i.elementType=R,i.lanes=m,i;case z:return va(o.children,f,m,s);case F:v=8,f|=24;break;case ne:return i=Vn(12,o,s,f|2),i.elementType=ne,i.lanes=m,i;case Ce:return i=Vn(13,o,s,f),i.elementType=Ce,i.lanes=m,i;case Se:return i=Vn(19,o,s,f),i.elementType=Se,i.lanes=m,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ie:v=10;break e;case ee:v=9;break e;case ge:v=11;break e;case D:v=14;break e;case b:v=16,u=null;break e}v=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=Vn(v,o,s,f),s.elementType=i,s.type=u,s.lanes=m,s}function va(i,s,o,u){return i=Vn(7,i,u,s),i.lanes=o,i}function am(i,s,o){return i=Vn(6,i,null,s),i.lanes=o,i}function uv(i){var s=Vn(18,null,null,0);return s.stateNode=i,s}function om(i,s,o){return s=Vn(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var cv=new WeakMap;function Xn(i,s){if(typeof i=="object"&&i!==null){var o=cv.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Mc(s)},cv.set(i,s),s)}return{value:i,source:s,stack:Mc(s)}}var yo=[],vo=0,uh=null,$l=0,Jn=[],Zn=0,rs=null,xi=1,ki="";function or(i,s){yo[vo++]=$l,yo[vo++]=uh,uh=i,$l=s}function hv(i,s,o){Jn[Zn++]=xi,Jn[Zn++]=ki,Jn[Zn++]=rs,rs=i;var u=xi;i=ki;var f=32-_n(u)-1;u&=~(1<<f),o+=1;var m=32-_n(s)+f;if(30<m){var v=f-f%5;m=(u&(1<<v)-1).toString(32),u>>=v,f-=v,xi=1<<32-_n(s)+f|o<<f|u,ki=m+i}else xi=1<<m|o<<f|u,ki=i}function lm(i){i.return!==null&&(or(i,1),hv(i,1,0))}function um(i){for(;i===uh;)uh=yo[--vo],yo[vo]=null,$l=yo[--vo],yo[vo]=null;for(;i===rs;)rs=Jn[--Zn],Jn[Zn]=null,ki=Jn[--Zn],Jn[Zn]=null,xi=Jn[--Zn],Jn[Zn]=null}function fv(i,s){Jn[Zn++]=xi,Jn[Zn++]=ki,Jn[Zn++]=rs,xi=s.id,ki=s.overflow,rs=i}var Zt=null,ot=null,Ue=!1,ss=null,ei=!1,cm=Error(r(519));function as(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xl(Xn(s,i)),cm}function dv(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[gt]=i,s[Jt]=u,o){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(o=0;o<vu.length;o++)Me(vu[o],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":Me("invalid",s),la(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Me("invalid",s);break;case"textarea":Me("invalid",s),Wr(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||DT(s.textContent,o)?(u.popover!=null&&(Me("beforetoggle",s),Me("toggle",s)),u.onScroll!=null&&Me("scroll",s),u.onScrollEnd!=null&&Me("scrollend",s),u.onClick!=null&&(s.onclick=Bt),s=!0):s=!1,s||as(i,!0)}function mv(i){for(Zt=i.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:Zt=Zt.return}}function Eo(i){if(i!==Zt)return!1;if(!Ue)return mv(i),Ue=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Ip(i.type,i.memoizedProps)),o=!o),o&&ot&&as(i),mv(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ot=zT(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ot=zT(i)}else s===27?(s=ot,Es(i.type)?(i=xp,xp=null,ot=i):ot=s):ot=Zt?ni(i.stateNode.nextSibling):null;return!0}function Ea(){ot=Zt=null,Ue=!1}function hm(){var i=ss;return i!==null&&(In===null?In=i:In.push.apply(In,i),ss=null),i}function Xl(i){ss===null?ss=[i]:ss.push(i)}var fm=x(null),Ta=null,lr=null;function os(i,s,o){re(fm,s._currentValue),s._currentValue=o}function ur(i){i._currentValue=fm.current,W(fm)}function dm(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function mm(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var A=m;m=f;for(var C=0;C<s.length;C++)if(A.context===s[C]){m.lanes|=o,A=m.alternate,A!==null&&(A.lanes|=o),dm(m.return,o,i),u||(v=null);break e}m=A.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=o,m=v.alternate,m!==null&&(m.lanes|=o),dm(v,o,i),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===i){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function To(i,s,o,u){i=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var A=f.type;Pn(f.pendingProps.value,v.value)||(i!==null?i.push(A):i=[A])}}else if(f===Le.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(wu):i=[wu])}f=f.return}i!==null&&mm(s,i,o,u),s.flags|=262144}function ch(i){for(i=i.firstContext;i!==null;){if(!Pn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Sa(i){Ta=i,lr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function en(i){return pv(Ta,i)}function hh(i,s){return Ta===null&&Sa(i),pv(i,s)}function pv(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},lr===null){if(i===null)throw Error(r(308));lr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else lr=lr.next=s;return o}var hI=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},fI=n.unstable_scheduleCallback,dI=n.unstable_NormalPriority,Rt={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pm(){return{controller:new hI,data:new Map,refCount:0}}function Jl(i){i.refCount--,i.refCount===0&&fI(dI,function(){i.controller.abort()})}var Zl=null,gm=0,So=0,Ao=null;function mI(i,s){if(Zl===null){var o=Zl=[];gm=0,So=vp(),Ao={status:"pending",value:void 0,then:function(u){o.push(u)}}}return gm++,s.then(gv,gv),s}function gv(){if(--gm===0&&Zl!==null){Ao!==null&&(Ao.status="fulfilled");var i=Zl;Zl=null,So=0,Ao=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function pI(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var _v=Q.S;Q.S=function(i,s){eT=$t(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&mI(i,s),_v!==null&&_v(i,s)};var Aa=x(null);function _m(){var i=Aa.current;return i!==null?i:rt.pooledCache}function fh(i,s){s===null?re(Aa,Aa.current):re(Aa,s.pool)}function yv(){var i=_m();return i===null?null:{parent:Rt._currentValue,pool:i}}var wo=Error(r(460)),ym=Error(r(474)),dh=Error(r(542)),mh={then:function(){}};function vv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Ev(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Bt,Bt),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Sv(i),i;default:if(typeof s.status=="string")s.then(Bt,Bt);else{if(i=rt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Sv(i),i}throw ba=s,wo}}function wa(i){try{var s=i._init;return s(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ba=o,wo):o}}var ba=null;function Tv(){if(ba===null)throw Error(r(459));var i=ba;return ba=null,i}function Sv(i){if(i===wo||i===dh)throw Error(r(483))}var bo=null,eu=0;function ph(i){var s=eu;return eu+=1,bo===null&&(bo=[]),Ev(bo,i,s)}function tu(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function gh(i,s){throw s.$$typeof===S?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Av(i){function s(V,O){if(i){var B=V.deletions;B===null?(V.deletions=[O],V.flags|=16):B.push(O)}}function o(V,O){if(!i)return null;for(;O!==null;)s(V,O),O=O.sibling;return null}function u(V){for(var O=new Map;V!==null;)V.key!==null?O.set(V.key,V):O.set(V.index,V),V=V.sibling;return O}function f(V,O){return V=ar(V,O),V.index=0,V.sibling=null,V}function m(V,O,B){return V.index=B,i?(B=V.alternate,B!==null?(B=B.index,B<O?(V.flags|=67108866,O):B):(V.flags|=67108866,O)):(V.flags|=1048576,O)}function v(V){return i&&V.alternate===null&&(V.flags|=67108866),V}function A(V,O,B,$){return O===null||O.tag!==6?(O=am(B,V.mode,$),O.return=V,O):(O=f(O,B),O.return=V,O)}function C(V,O,B,$){var de=B.type;return de===z?Y(V,O,B.props.children,$,B.key):O!==null&&(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===b&&wa(de)===O.type)?(O=f(O,B.props),tu(O,B),O.return=V,O):(O=lh(B.type,B.key,B.props,null,V.mode,$),tu(O,B),O.return=V,O)}function j(V,O,B,$){return O===null||O.tag!==4||O.stateNode.containerInfo!==B.containerInfo||O.stateNode.implementation!==B.implementation?(O=om(B,V.mode,$),O.return=V,O):(O=f(O,B.children||[]),O.return=V,O)}function Y(V,O,B,$,de){return O===null||O.tag!==7?(O=va(B,V.mode,$,de),O.return=V,O):(O=f(O,B),O.return=V,O)}function J(V,O,B){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=am(""+O,V.mode,B),O.return=V,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case I:return B=lh(O.type,O.key,O.props,null,V.mode,B),tu(B,O),B.return=V,B;case P:return O=om(O,V.mode,B),O.return=V,O;case b:return O=wa(O),J(V,O,B)}if(Qt(O)||L(O))return O=va(O,V.mode,B,null),O.return=V,O;if(typeof O.then=="function")return J(V,ph(O),B);if(O.$$typeof===ie)return J(V,hh(V,O),B);gh(V,O)}return null}function q(V,O,B,$){var de=O!==null?O.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return de!==null?null:A(V,O,""+B,$);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return B.key===de?C(V,O,B,$):null;case P:return B.key===de?j(V,O,B,$):null;case b:return B=wa(B),q(V,O,B,$)}if(Qt(B)||L(B))return de!==null?null:Y(V,O,B,$,null);if(typeof B.then=="function")return q(V,O,ph(B),$);if(B.$$typeof===ie)return q(V,O,hh(V,B),$);gh(V,B)}return null}function G(V,O,B,$,de){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return V=V.get(B)||null,A(O,V,""+$,de);if(typeof $=="object"&&$!==null){switch($.$$typeof){case I:return V=V.get($.key===null?B:$.key)||null,C(O,V,$,de);case P:return V=V.get($.key===null?B:$.key)||null,j(O,V,$,de);case b:return $=wa($),G(V,O,B,$,de)}if(Qt($)||L($))return V=V.get(B)||null,Y(O,V,$,de,null);if(typeof $.then=="function")return G(V,O,B,ph($),de);if($.$$typeof===ie)return G(V,O,B,hh(O,$),de);gh(O,$)}return null}function ce(V,O,B,$){for(var de=null,Ge=null,fe=O,Re=O=0,Pe=null;fe!==null&&Re<B.length;Re++){fe.index>Re?(Pe=fe,fe=null):Pe=fe.sibling;var Ke=q(V,fe,B[Re],$);if(Ke===null){fe===null&&(fe=Pe);break}i&&fe&&Ke.alternate===null&&s(V,fe),O=m(Ke,O,Re),Ge===null?de=Ke:Ge.sibling=Ke,Ge=Ke,fe=Pe}if(Re===B.length)return o(V,fe),Ue&&or(V,Re),de;if(fe===null){for(;Re<B.length;Re++)fe=J(V,B[Re],$),fe!==null&&(O=m(fe,O,Re),Ge===null?de=fe:Ge.sibling=fe,Ge=fe);return Ue&&or(V,Re),de}for(fe=u(fe);Re<B.length;Re++)Pe=G(fe,V,Re,B[Re],$),Pe!==null&&(i&&Pe.alternate!==null&&fe.delete(Pe.key===null?Re:Pe.key),O=m(Pe,O,Re),Ge===null?de=Pe:Ge.sibling=Pe,Ge=Pe);return i&&fe.forEach(function(bs){return s(V,bs)}),Ue&&or(V,Re),de}function _e(V,O,B,$){if(B==null)throw Error(r(151));for(var de=null,Ge=null,fe=O,Re=O=0,Pe=null,Ke=B.next();fe!==null&&!Ke.done;Re++,Ke=B.next()){fe.index>Re?(Pe=fe,fe=null):Pe=fe.sibling;var bs=q(V,fe,Ke.value,$);if(bs===null){fe===null&&(fe=Pe);break}i&&fe&&bs.alternate===null&&s(V,fe),O=m(bs,O,Re),Ge===null?de=bs:Ge.sibling=bs,Ge=bs,fe=Pe}if(Ke.done)return o(V,fe),Ue&&or(V,Re),de;if(fe===null){for(;!Ke.done;Re++,Ke=B.next())Ke=J(V,Ke.value,$),Ke!==null&&(O=m(Ke,O,Re),Ge===null?de=Ke:Ge.sibling=Ke,Ge=Ke);return Ue&&or(V,Re),de}for(fe=u(fe);!Ke.done;Re++,Ke=B.next())Ke=G(fe,V,Re,Ke.value,$),Ke!==null&&(i&&Ke.alternate!==null&&fe.delete(Ke.key===null?Re:Ke.key),O=m(Ke,O,Re),Ge===null?de=Ke:Ge.sibling=Ke,Ge=Ke);return i&&fe.forEach(function(R1){return s(V,R1)}),Ue&&or(V,Re),de}function nt(V,O,B,$){if(typeof B=="object"&&B!==null&&B.type===z&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case I:e:{for(var de=B.key;O!==null;){if(O.key===de){if(de=B.type,de===z){if(O.tag===7){o(V,O.sibling),$=f(O,B.props.children),$.return=V,V=$;break e}}else if(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===b&&wa(de)===O.type){o(V,O.sibling),$=f(O,B.props),tu($,B),$.return=V,V=$;break e}o(V,O);break}else s(V,O);O=O.sibling}B.type===z?($=va(B.props.children,V.mode,$,B.key),$.return=V,V=$):($=lh(B.type,B.key,B.props,null,V.mode,$),tu($,B),$.return=V,V=$)}return v(V);case P:e:{for(de=B.key;O!==null;){if(O.key===de)if(O.tag===4&&O.stateNode.containerInfo===B.containerInfo&&O.stateNode.implementation===B.implementation){o(V,O.sibling),$=f(O,B.children||[]),$.return=V,V=$;break e}else{o(V,O);break}else s(V,O);O=O.sibling}$=om(B,V.mode,$),$.return=V,V=$}return v(V);case b:return B=wa(B),nt(V,O,B,$)}if(Qt(B))return ce(V,O,B,$);if(L(B)){if(de=L(B),typeof de!="function")throw Error(r(150));return B=de.call(B),_e(V,O,B,$)}if(typeof B.then=="function")return nt(V,O,ph(B),$);if(B.$$typeof===ie)return nt(V,O,hh(V,B),$);gh(V,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,O!==null&&O.tag===6?(o(V,O.sibling),$=f(O,B),$.return=V,V=$):(o(V,O),$=am(B,V.mode,$),$.return=V,V=$),v(V)):o(V,O)}return function(V,O,B,$){try{eu=0;var de=nt(V,O,B,$);return bo=null,de}catch(fe){if(fe===wo||fe===dh)throw fe;var Ge=Vn(29,fe,null,V.mode);return Ge.lanes=$,Ge.return=V,Ge}}}var Ra=Av(!0),wv=Av(!1),ls=!1;function vm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Em(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function us(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function cs(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ye&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=oh(i),ov(i,null,o),s}return ah(i,u,s,o),oh(i)}function nu(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,jr(i,o)}}function Tm(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var Sm=!1;function iu(){if(Sm){var i=Ao;if(i!==null)throw i}}function ru(i,s,o,u){Sm=!1;var f=i.updateQueue;ls=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var C=A,j=C.next;C.next=null,v===null?m=j:v.next=j,v=C;var Y=i.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==v&&(A===null?Y.firstBaseUpdate=j:A.next=j,Y.lastBaseUpdate=C))}if(m!==null){var J=f.baseState;v=0,Y=j=C=null,A=m;do{var q=A.lane&-536870913,G=q!==A.lane;if(G?(ke&q)===q:(u&q)===q){q!==0&&q===So&&(Sm=!0),Y!==null&&(Y=Y.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ce=i,_e=A;q=s;var nt=o;switch(_e.tag){case 1:if(ce=_e.payload,typeof ce=="function"){J=ce.call(nt,J,q);break e}J=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=_e.payload,q=typeof ce=="function"?ce.call(nt,J,q):ce,q==null)break e;J=T({},J,q);break e;case 2:ls=!0}}q=A.callback,q!==null&&(i.flags|=64,G&&(i.flags|=8192),G=f.callbacks,G===null?f.callbacks=[q]:G.push(q))}else G={lane:q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?(j=Y=G,C=J):Y=Y.next=G,v|=q;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;G=A,A=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);Y===null&&(C=J),f.baseState=C,f.firstBaseUpdate=j,f.lastBaseUpdate=Y,m===null&&(f.shared.lanes=0),ps|=v,i.lanes=v,i.memoizedState=J}}function bv(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function Rv(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)bv(o[i],s)}var Ro=x(null),_h=x(0);function Cv(i,s){i=yr,re(_h,i),re(Ro,s),yr=i|s.baseLanes}function Am(){re(_h,yr),re(Ro,Ro.current)}function wm(){yr=_h.current,W(Ro),W(_h)}var Ln=x(null),ti=null;function hs(i){var s=i.alternate;re(Tt,Tt.current&1),re(Ln,i),ti===null&&(s===null||Ro.current!==null||s.memoizedState!==null)&&(ti=i)}function bm(i){re(Tt,Tt.current),re(Ln,i),ti===null&&(ti=i)}function Iv(i){i.tag===22?(re(Tt,Tt.current),re(Ln,i),ti===null&&(ti=i)):fs()}function fs(){re(Tt,Tt.current),re(Ln,Ln.current)}function Un(i){W(Ln),ti===i&&(ti=null),W(Tt)}var Tt=x(0);function yh(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Op(o)||Mp(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var cr=0,be=null,et=null,Ct=null,vh=!1,Co=!1,Ca=!1,Eh=0,su=0,Io=null,gI=0;function yt(){throw Error(r(321))}function Rm(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!Pn(i[o],s[o]))return!1;return!0}function Cm(i,s,o,u,f,m){return cr=m,be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=i===null||i.memoizedState===null?hE:jm,Ca=!1,m=o(u,f),Ca=!1,Co&&(m=Dv(s,o,u,f)),Nv(i),m}function Nv(i){Q.H=lu;var s=et!==null&&et.next!==null;if(cr=0,Ct=et=be=null,vh=!1,su=0,Io=null,s)throw Error(r(300));i===null||It||(i=i.dependencies,i!==null&&ch(i)&&(It=!0))}function Dv(i,s,o,u){be=i;var f=0;do{if(Co&&(Io=null),su=0,Co=!1,25<=f)throw Error(r(301));if(f+=1,Ct=et=null,i.updateQueue!=null){var m=i.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=fE,m=s(o,u)}while(Co);return m}function _I(){var i=Q.H,s=i.useState()[0];return s=typeof s.then=="function"?au(s):s,i=i.useState()[0],(et!==null?et.memoizedState:null)!==i&&(be.flags|=1024),s}function Im(){var i=Eh!==0;return Eh=0,i}function Nm(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function Dm(i){if(vh){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}vh=!1}cr=0,Ct=et=be=null,Co=!1,su=Eh=0,Io=null}function Sn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?be.memoizedState=Ct=i:Ct=Ct.next=i,Ct}function St(){if(et===null){var i=be.alternate;i=i!==null?i.memoizedState:null}else i=et.next;var s=Ct===null?be.memoizedState:Ct.next;if(s!==null)Ct=s,et=i;else{if(i===null)throw be.alternate===null?Error(r(467)):Error(r(310));et=i,i={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Ct===null?be.memoizedState=Ct=i:Ct=Ct.next=i}return Ct}function Th(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function au(i){var s=su;return su+=1,Io===null&&(Io=[]),i=Ev(Io,i,s),s=be,(Ct===null?s.memoizedState:Ct.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?hE:jm),i}function Sh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return au(i);if(i.$$typeof===ie)return en(i)}throw Error(r(438,String(i)))}function Om(i){var s=null,o=be.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=be.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Th(),be.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=M;return s.index++,o}function hr(i,s){return typeof s=="function"?s(i):s}function Ah(i){var s=St();return Mm(s,et,i)}function Mm(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,m=u.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}s.baseQueue=f=m,u.pending=null}if(m=i.baseState,f===null)i.memoizedState=m;else{s=f.next;var A=v=null,C=null,j=s,Y=!1;do{var J=j.lane&-536870913;if(J!==j.lane?(ke&J)===J:(cr&J)===J){var q=j.revertLane;if(q===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),J===So&&(Y=!0);else if((cr&q)===q){j=j.next,q===So&&(Y=!0);continue}else J={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},C===null?(A=C=J,v=m):C=C.next=J,be.lanes|=q,ps|=q;J=j.action,Ca&&o(m,J),m=j.hasEagerState?j.eagerState:o(m,J)}else q={lane:J,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},C===null?(A=C=q,v=m):C=C.next=q,be.lanes|=J,ps|=J;j=j.next}while(j!==null&&j!==s);if(C===null?v=m:C.next=A,!Pn(m,i.memoizedState)&&(It=!0,Y&&(o=Ao,o!==null)))throw o;i.memoizedState=m,i.baseState=v,i.baseQueue=C,u.lastRenderedState=m}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function xm(i){var s=St(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do m=i(m,v.action),v=v.next;while(v!==f);Pn(m,s.memoizedState)||(It=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function Ov(i,s,o){var u=be,f=St(),m=Ue;if(m){if(o===void 0)throw Error(r(407));o=o()}else o=s();var v=!Pn((et||f).memoizedState,o);if(v&&(f.memoizedState=o,It=!0),f=f.queue,Vm(kv.bind(null,u,f,i),[i]),f.getSnapshot!==s||v||Ct!==null&&Ct.memoizedState.tag&1){if(u.flags|=2048,No(9,{destroy:void 0},xv.bind(null,u,f,o,s),null),rt===null)throw Error(r(349));m||(cr&127)!==0||Mv(u,s,o)}return o}function Mv(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=be.updateQueue,s===null?(s=Th(),be.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function xv(i,s,o,u){s.value=o,s.getSnapshot=u,Pv(s)&&Vv(i)}function kv(i,s,o){return o(function(){Pv(s)&&Vv(i)})}function Pv(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!Pn(i,o)}catch{return!0}}function Vv(i){var s=ya(i,2);s!==null&&Nn(s,i,2)}function km(i){var s=Sn();if(typeof i=="function"){var o=i;if(i=o(),Ca){Kn(!0);try{o()}finally{Kn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:i},s}function Lv(i,s,o,u){return i.baseState=o,Mm(i,et,typeof u=="function"?u:hr)}function yI(i,s,o,u,f){if(Rh(i))throw Error(r(485));if(i=s.action,i!==null){var m={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};Q.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,Uv(s,m)):(m.next=o.next,s.pending=o.next=m)}}function Uv(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var m=Q.T,v={};Q.T=v;try{var A=o(f,u),C=Q.S;C!==null&&C(v,A),zv(i,s,A)}catch(j){Pm(i,s,j)}finally{m!==null&&v.types!==null&&(m.types=v.types),Q.T=m}}else try{m=o(f,u),zv(i,s,m)}catch(j){Pm(i,s,j)}}function zv(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Bv(i,s,u)},function(u){return Pm(i,s,u)}):Bv(i,s,o)}function Bv(i,s,o){s.status="fulfilled",s.value=o,Fv(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,Uv(i,o)))}function Pm(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Fv(s),s=s.next;while(s!==u)}i.action=null}function Fv(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function jv(i,s){return s}function qv(i,s){if(Ue){var o=rt.formState;if(o!==null){e:{var u=be;if(Ue){if(ot){t:{for(var f=ot,m=ei;f.nodeType!==8;){if(!m){f=null;break t}if(f=ni(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ot=ni(f.nextSibling),u=f.data==="F!";break e}}as(u)}u=!1}u&&(s=o[0])}}return o=Sn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jv,lastRenderedState:s},o.queue=u,o=lE.bind(null,be,u),u.dispatch=o,u=km(!1),m=Fm.bind(null,be,!1,u.queue),u=Sn(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=yI.bind(null,be,f,m,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function Hv(i){var s=St();return Gv(s,et,i)}function Gv(i,s,o){if(s=Mm(i,s,jv)[0],i=Ah(hr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=au(s)}catch(v){throw v===wo?dh:v}else u=s;s=St();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(be.flags|=2048,No(9,{destroy:void 0},vI.bind(null,f,o),null)),[u,m,i]}function vI(i,s){i.action=s}function Kv(i){var s=St(),o=et;if(o!==null)return Gv(s,o,i);St(),s=s.memoizedState,o=St();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function No(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=be.updateQueue,s===null&&(s=Th(),be.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function Yv(){return St().memoizedState}function wh(i,s,o,u){var f=Sn();be.flags|=i,f.memoizedState=No(1|s,{destroy:void 0},o,u===void 0?null:u)}function bh(i,s,o,u){var f=St();u=u===void 0?null:u;var m=f.memoizedState.inst;et!==null&&u!==null&&Rm(u,et.memoizedState.deps)?f.memoizedState=No(s,m,o,u):(be.flags|=i,f.memoizedState=No(1|s,m,o,u))}function Qv(i,s){wh(8390656,8,i,s)}function Vm(i,s){bh(2048,8,i,s)}function EI(i){be.flags|=4;var s=be.updateQueue;if(s===null)s=Th(),be.updateQueue=s,s.events=[i];else{var o=s.events;o===null?s.events=[i]:o.push(i)}}function Wv(i){var s=St().memoizedState;return EI({ref:s,nextImpl:i}),function(){if((Ye&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function $v(i,s){return bh(4,2,i,s)}function Xv(i,s){return bh(4,4,i,s)}function Jv(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Zv(i,s,o){o=o!=null?o.concat([i]):null,bh(4,4,Jv.bind(null,s,i),o)}function Lm(){}function eE(i,s){var o=St();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Rm(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function tE(i,s){var o=St();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Rm(s,u[1]))return u[0];if(u=i(),Ca){Kn(!0);try{i()}finally{Kn(!1)}}return o.memoizedState=[u,s],u}function Um(i,s,o){return o===void 0||(cr&1073741824)!==0&&(ke&261930)===0?i.memoizedState=s:(i.memoizedState=o,i=nT(),be.lanes|=i,ps|=i,o)}function nE(i,s,o,u){return Pn(o,s)?o:Ro.current!==null?(i=Um(i,o,u),Pn(i,s)||(It=!0),i):(cr&42)===0||(cr&1073741824)!==0&&(ke&261930)===0?(It=!0,i.memoizedState=o):(i=nT(),be.lanes|=i,ps|=i,s)}function iE(i,s,o,u,f){var m=ae.p;ae.p=m!==0&&8>m?m:8;var v=Q.T,A={};Q.T=A,Fm(i,!1,s,o);try{var C=f(),j=Q.S;if(j!==null&&j(A,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Y=pI(C,u);ou(i,s,Y,Fn(i))}else ou(i,s,u,Fn(i))}catch(J){ou(i,s,{then:function(){},status:"rejected",reason:J},Fn())}finally{ae.p=m,v!==null&&A.types!==null&&(v.types=A.types),Q.T=v}}function TI(){}function zm(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=rE(i).queue;iE(i,f,s,pe,o===null?TI:function(){return sE(i),o(u)})}function rE(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:pe},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function sE(i){var s=rE(i);s.next===null&&(s=i.alternate.memoizedState),ou(i,s.next.queue,{},Fn())}function Bm(){return en(wu)}function aE(){return St().memoizedState}function oE(){return St().memoizedState}function SI(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=Fn();i=us(o);var u=cs(s,i,o);u!==null&&(Nn(u,s,o),nu(u,s,o)),s={cache:pm()},i.payload=s;return}s=s.return}}function AI(i,s,o){var u=Fn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Rh(i)?uE(s,o):(o=rm(i,s,o,u),o!==null&&(Nn(o,i,u),cE(o,s,u)))}function lE(i,s,o){var u=Fn();ou(i,s,o,u)}function ou(i,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Rh(i))uE(s,f);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,A=m(v,o);if(f.hasEagerState=!0,f.eagerState=A,Pn(A,v))return ah(i,s,f,0),rt===null&&sh(),!1}catch{}if(o=rm(i,s,f,u),o!==null)return Nn(o,i,u),cE(o,s,u),!0}return!1}function Fm(i,s,o,u){if(u={lane:2,revertLane:vp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Rh(i)){if(s)throw Error(r(479))}else s=rm(i,o,u,2),s!==null&&Nn(s,i,2)}function Rh(i){var s=i.alternate;return i===be||s!==null&&s===be}function uE(i,s){Co=vh=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function cE(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,jr(i,o)}}var lu={readContext:en,use:Sh,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};lu.useEffectEvent=yt;var hE={readContext:en,use:Sh,useCallback:function(i,s){return Sn().memoizedState=[i,s===void 0?null:s],i},useContext:en,useEffect:Qv,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,wh(4194308,4,Jv.bind(null,s,i),o)},useLayoutEffect:function(i,s){return wh(4194308,4,i,s)},useInsertionEffect:function(i,s){wh(4,2,i,s)},useMemo:function(i,s){var o=Sn();s=s===void 0?null:s;var u=i();if(Ca){Kn(!0);try{i()}finally{Kn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=Sn();if(o!==void 0){var f=o(s);if(Ca){Kn(!0);try{o(s)}finally{Kn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=AI.bind(null,be,i),[u.memoizedState,i]},useRef:function(i){var s=Sn();return i={current:i},s.memoizedState=i},useState:function(i){i=km(i);var s=i.queue,o=lE.bind(null,be,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:Lm,useDeferredValue:function(i,s){var o=Sn();return Um(o,i,s)},useTransition:function(){var i=km(!1);return i=iE.bind(null,be,i.queue,!0,!1),Sn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=be,f=Sn();if(Ue){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),rt===null)throw Error(r(349));(ke&127)!==0||Mv(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,Qv(kv.bind(null,u,m,i),[i]),u.flags|=2048,No(9,{destroy:void 0},xv.bind(null,u,m,o,s),null),o},useId:function(){var i=Sn(),s=rt.identifierPrefix;if(Ue){var o=ki,u=xi;o=(u&~(1<<32-_n(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Eh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=gI++,s="_"+s+"r_"+o.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Bm,useFormState:qv,useActionState:qv,useOptimistic:function(i){var s=Sn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Fm.bind(null,be,!0,o),o.dispatch=s,[i,s]},useMemoCache:Om,useCacheRefresh:function(){return Sn().memoizedState=SI.bind(null,be)},useEffectEvent:function(i){var s=Sn(),o={impl:i};return s.memoizedState=o,function(){if((Ye&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},jm={readContext:en,use:Sh,useCallback:eE,useContext:en,useEffect:Vm,useImperativeHandle:Zv,useInsertionEffect:$v,useLayoutEffect:Xv,useMemo:tE,useReducer:Ah,useRef:Yv,useState:function(){return Ah(hr)},useDebugValue:Lm,useDeferredValue:function(i,s){var o=St();return nE(o,et.memoizedState,i,s)},useTransition:function(){var i=Ah(hr)[0],s=St().memoizedState;return[typeof i=="boolean"?i:au(i),s]},useSyncExternalStore:Ov,useId:aE,useHostTransitionStatus:Bm,useFormState:Hv,useActionState:Hv,useOptimistic:function(i,s){var o=St();return Lv(o,et,i,s)},useMemoCache:Om,useCacheRefresh:oE};jm.useEffectEvent=Wv;var fE={readContext:en,use:Sh,useCallback:eE,useContext:en,useEffect:Vm,useImperativeHandle:Zv,useInsertionEffect:$v,useLayoutEffect:Xv,useMemo:tE,useReducer:xm,useRef:Yv,useState:function(){return xm(hr)},useDebugValue:Lm,useDeferredValue:function(i,s){var o=St();return et===null?Um(o,i,s):nE(o,et.memoizedState,i,s)},useTransition:function(){var i=xm(hr)[0],s=St().memoizedState;return[typeof i=="boolean"?i:au(i),s]},useSyncExternalStore:Ov,useId:aE,useHostTransitionStatus:Bm,useFormState:Kv,useActionState:Kv,useOptimistic:function(i,s){var o=St();return et!==null?Lv(o,et,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Om,useCacheRefresh:oE};fE.useEffectEvent=Wv;function qm(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:T({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Hm={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=Fn(),f=us(u);f.payload=s,o!=null&&(f.callback=o),s=cs(i,f,u),s!==null&&(Nn(s,i,u),nu(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=Fn(),f=us(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=cs(i,f,u),s!==null&&(Nn(s,i,u),nu(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=Fn(),u=us(o);u.tag=2,s!=null&&(u.callback=s),s=cs(i,u,o),s!==null&&(Nn(s,i,o),nu(s,i,o))}};function dE(i,s,o,u,f,m,v){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,m,v):s.prototype&&s.prototype.isPureReactComponent?!Ql(o,u)||!Ql(f,m):!0}function mE(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&Hm.enqueueReplaceState(s,s.state,null)}function Ia(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=T({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}function pE(i){rh(i)}function gE(i){console.error(i)}function _E(i){rh(i)}function Ch(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function yE(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Gm(i,s,o){return o=us(o),o.tag=3,o.payload={element:null},o.callback=function(){Ch(i,s)},o}function vE(i){return i=us(i),i.tag=3,i}function EE(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;i.payload=function(){return f(m)},i.callback=function(){yE(s,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(i.callback=function(){yE(s,o,u),typeof f!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function wI(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&To(s,o,f,!0),o=Ln.current,o!==null){switch(o.tag){case 31:case 13:return ti===null?zh():o.alternate===null&&vt===0&&(vt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===mh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),gp(i,u,f)),!1;case 22:return o.flags|=65536,u===mh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),gp(i,u,f)),!1}throw Error(r(435,o.tag))}return gp(i,u,f),zh(),!1}if(Ue)return s=Ln.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==cm&&(i=Error(r(422),{cause:u}),Xl(Xn(i,o)))):(u!==cm&&(s=Error(r(423),{cause:u}),Xl(Xn(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=Xn(u,o),f=Gm(i.stateNode,u,f),Tm(i,f),vt!==4&&(vt=2)),!1;var m=Error(r(520),{cause:u});if(m=Xn(m,o),gu===null?gu=[m]:gu.push(m),vt!==4&&(vt=2),s===null)return!0;u=Xn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=Gm(o.stateNode,u,i),Tm(o,i),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(gs===null||!gs.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=vE(f),EE(f,i,o,u),Tm(o,f),!1}o=o.return}while(o!==null);return!1}var Km=Error(r(461)),It=!1;function tn(i,s,o,u){s.child=i===null?wv(s,null,o,u):Ra(s,i.child,o,u)}function TE(i,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var v={};for(var A in u)A!=="ref"&&(v[A]=u[A])}else v=u;return Sa(s),u=Cm(i,s,o,v,m,f),A=Im(),i!==null&&!It?(Nm(i,s,f),fr(i,s,f)):(Ue&&A&&lm(s),s.flags|=1,tn(i,s,u,f),s.child)}function SE(i,s,o,u,f){if(i===null){var m=o.type;return typeof m=="function"&&!sm(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,AE(i,s,m,u,f)):(i=lh(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(m=i.child,!ep(i,f)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:Ql,o(v,u)&&i.ref===s.ref)return fr(i,s,f)}return s.flags|=1,i=ar(m,u),i.ref=s.ref,i.return=s,s.child=i}function AE(i,s,o,u,f){if(i!==null){var m=i.memoizedProps;if(Ql(m,u)&&i.ref===s.ref)if(It=!1,s.pendingProps=u=m,ep(i,f))(i.flags&131072)!==0&&(It=!0);else return s.lanes=i.lanes,fr(i,s,f)}return Ym(i,s,o,u,f)}function wE(i,s,o,u){var f=u.children,m=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,i!==null){for(u=s.child=i.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,s.child=null;return bE(i,s,m,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&fh(s,m!==null?m.cachePool:null),m!==null?Cv(s,m):Am(),Iv(s);else return u=s.lanes=536870912,bE(i,s,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(fh(s,m.cachePool),Cv(s,m),fs(),s.memoizedState=null):(i!==null&&fh(s,null),Am(),fs());return tn(i,s,f,o),s.child}function uu(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function bE(i,s,o,u,f){var m=_m();return m=m===null?null:{parent:Rt._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},i!==null&&fh(s,null),Am(),Iv(s),i!==null&&To(i,s,u,!0),s.childLanes=f,null}function Ih(i,s){return s=Dh({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function RE(i,s,o){return Ra(s,i.child,null,o),i=Ih(s,s.pendingProps),i.flags|=2,Un(s),s.memoizedState=null,i}function bI(i,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Ue){if(u.mode==="hidden")return i=Ih(s,u),s.lanes=536870912,uu(null,i);if(bm(s),(i=ot)?(i=UT(i,ei),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:rs!==null?{id:xi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},o=uv(i),o.return=s,s.child=o,Zt=s,ot=null)):i=null,i===null)throw as(s);return s.lanes=536870912,null}return Ih(s,u)}var m=i.memoizedState;if(m!==null){var v=m.dehydrated;if(bm(s),f)if(s.flags&256)s.flags&=-257,s=RE(i,s,o);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(It||To(i,s,o,!1),f=(o&i.childLanes)!==0,It||f){if(u=rt,u!==null&&(v=qr(u,o),v!==0&&v!==m.retryLane))throw m.retryLane=v,ya(i,v),Nn(u,i,v),Km;zh(),s=RE(i,s,o)}else i=m.treeContext,ot=ni(v.nextSibling),Zt=s,Ue=!0,ss=null,ei=!1,i!==null&&fv(s,i),s=Ih(s,u),s.flags|=4096;return s}return i=ar(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Nh(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function Ym(i,s,o,u,f){return Sa(s),o=Cm(i,s,o,u,void 0,f),u=Im(),i!==null&&!It?(Nm(i,s,f),fr(i,s,f)):(Ue&&u&&lm(s),s.flags|=1,tn(i,s,o,f),s.child)}function CE(i,s,o,u,f,m){return Sa(s),s.updateQueue=null,o=Dv(s,u,o,f),Nv(i),u=Im(),i!==null&&!It?(Nm(i,s,m),fr(i,s,m)):(Ue&&u&&lm(s),s.flags|=1,tn(i,s,o,m),s.child)}function IE(i,s,o,u,f){if(Sa(s),s.stateNode===null){var m=_o,v=o.contextType;typeof v=="object"&&v!==null&&(m=en(v)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Hm,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},vm(s),v=o.contextType,m.context=typeof v=="object"&&v!==null?en(v):_o,m.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(qm(s,o,v,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Hm.enqueueReplaceState(m,m.state,null),ru(s,u,m,f),iu(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){m=s.stateNode;var A=s.memoizedProps,C=Ia(o,A);m.props=C;var j=m.context,Y=o.contextType;v=_o,typeof Y=="object"&&Y!==null&&(v=en(Y));var J=o.getDerivedStateFromProps;Y=typeof J=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,Y||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||j!==v)&&mE(s,m,u,v),ls=!1;var q=s.memoizedState;m.state=q,ru(s,u,m,f),iu(),j=s.memoizedState,A||q!==j||ls?(typeof J=="function"&&(qm(s,o,J,u),j=s.memoizedState),(C=ls||dE(s,o,C,u,q,j,v))?(Y||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=j),m.props=u,m.state=j,m.context=v,u=C):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Em(i,s),v=s.memoizedProps,Y=Ia(o,v),m.props=Y,J=s.pendingProps,q=m.context,j=o.contextType,C=_o,typeof j=="object"&&j!==null&&(C=en(j)),A=o.getDerivedStateFromProps,(j=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==J||q!==C)&&mE(s,m,u,C),ls=!1,q=s.memoizedState,m.state=q,ru(s,u,m,f),iu();var G=s.memoizedState;v!==J||q!==G||ls||i!==null&&i.dependencies!==null&&ch(i.dependencies)?(typeof A=="function"&&(qm(s,o,A,u),G=s.memoizedState),(Y=ls||dE(s,o,Y,u,q,G,C)||i!==null&&i.dependencies!==null&&ch(i.dependencies))?(j||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,G,C),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,G,C)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===i.memoizedProps&&q===i.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===i.memoizedProps&&q===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=G),m.props=u,m.state=G,m.context=C,u=Y):(typeof m.componentDidUpdate!="function"||v===i.memoizedProps&&q===i.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===i.memoizedProps&&q===i.memoizedState||(s.flags|=1024),u=!1)}return m=u,Nh(i,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,i!==null&&u?(s.child=Ra(s,i.child,null,f),s.child=Ra(s,null,o,f)):tn(i,s,o,f),s.memoizedState=m.state,i=s.child):i=fr(i,s,f),i}function NE(i,s,o,u){return Ea(),s.flags|=256,tn(i,s,o,u),s.child}var Qm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wm(i){return{baseLanes:i,cachePool:yv()}}function $m(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=Bn),i}function DE(i,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=i!==null&&i.memoizedState===null?!1:(Tt.current&2)!==0),v&&(f=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,i===null){if(Ue){if(f?hs(s):fs(),(i=ot)?(i=UT(i,ei),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:rs!==null?{id:xi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},o=uv(i),o.return=s,s.child=o,Zt=s,ot=null)):i=null,i===null)throw as(s);return Mp(i)?s.lanes=32:s.lanes=536870912,null}var A=u.children;return u=u.fallback,f?(fs(),f=s.mode,A=Dh({mode:"hidden",children:A},f),u=va(u,f,o,null),A.return=s,u.return=s,A.sibling=u,s.child=A,u=s.child,u.memoizedState=Wm(o),u.childLanes=$m(i,v,o),s.memoizedState=Qm,uu(null,u)):(hs(s),Xm(s,A))}var C=i.memoizedState;if(C!==null&&(A=C.dehydrated,A!==null)){if(m)s.flags&256?(hs(s),s.flags&=-257,s=Jm(i,s,o)):s.memoizedState!==null?(fs(),s.child=i.child,s.flags|=128,s=null):(fs(),A=u.fallback,f=s.mode,u=Dh({mode:"visible",children:u.children},f),A=va(A,f,o,null),A.flags|=2,u.return=s,A.return=s,u.sibling=A,s.child=u,Ra(s,i.child,null,o),u=s.child,u.memoizedState=Wm(o),u.childLanes=$m(i,v,o),s.memoizedState=Qm,s=uu(null,u));else if(hs(s),Mp(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var j=v.dgst;v=j,u=Error(r(419)),u.stack="",u.digest=v,Xl({value:u,source:null,stack:null}),s=Jm(i,s,o)}else if(It||To(i,s,o,!1),v=(o&i.childLanes)!==0,It||v){if(v=rt,v!==null&&(u=qr(v,o),u!==0&&u!==C.retryLane))throw C.retryLane=u,ya(i,u),Nn(v,i,u),Km;Op(A)||zh(),s=Jm(i,s,o)}else Op(A)?(s.flags|=192,s.child=i.child,s=null):(i=C.treeContext,ot=ni(A.nextSibling),Zt=s,Ue=!0,ss=null,ei=!1,i!==null&&fv(s,i),s=Xm(s,u.children),s.flags|=4096);return s}return f?(fs(),A=u.fallback,f=s.mode,C=i.child,j=C.sibling,u=ar(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,j!==null?A=ar(j,A):(A=va(A,f,o,null),A.flags|=2),A.return=s,u.return=s,u.sibling=A,s.child=u,uu(null,u),u=s.child,A=i.child.memoizedState,A===null?A=Wm(o):(f=A.cachePool,f!==null?(C=Rt._currentValue,f=f.parent!==C?{parent:C,pool:C}:f):f=yv(),A={baseLanes:A.baseLanes|o,cachePool:f}),u.memoizedState=A,u.childLanes=$m(i,v,o),s.memoizedState=Qm,uu(i.child,u)):(hs(s),o=i.child,i=o.sibling,o=ar(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(v=s.deletions,v===null?(s.deletions=[i],s.flags|=16):v.push(i)),s.child=o,s.memoizedState=null,o)}function Xm(i,s){return s=Dh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Dh(i,s){return i=Vn(22,i,null,s),i.lanes=0,i}function Jm(i,s,o){return Ra(s,i.child,null,o),i=Xm(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function OE(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),dm(i.return,s,o)}function Zm(i,s,o,u,f,m){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=f,v.treeForkCount=m)}function ME(i,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var v=Tt.current,A=(v&2)!==0;if(A?(v=v&1|2,s.flags|=128):v&=1,re(Tt,v),tn(i,s,u,o),u=Ue?$l:0,!A&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&OE(i,o,s);else if(i.tag===19)OE(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&yh(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Zm(s,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&yh(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}Zm(s,!0,o,null,m,u);break;case"together":Zm(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function fr(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),ps|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(To(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=ar(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=ar(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function ep(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&ch(i)))}function RI(i,s,o){switch(s.tag){case 3:Wt(s,s.stateNode.containerInfo),os(s,Rt,i.memoizedState.cache),Ea();break;case 27:case 5:wi(s);break;case 4:Wt(s,s.stateNode.containerInfo);break;case 10:os(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,bm(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(hs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?DE(i,s,o):(hs(s),i=fr(i,s,o),i!==null?i.sibling:null);hs(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(To(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return ME(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),re(Tt,Tt.current),u)break;return null;case 22:return s.lanes=0,wE(i,s,o,s.pendingProps);case 24:os(s,Rt,i.memoizedState.cache)}return fr(i,s,o)}function xE(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)It=!0;else{if(!ep(i,o)&&(s.flags&128)===0)return It=!1,RI(i,s,o);It=(i.flags&131072)!==0}else It=!1,Ue&&(s.flags&1048576)!==0&&hv(s,$l,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=wa(s.elementType),s.type=i,typeof i=="function")sm(i)?(u=Ia(i,u),s.tag=1,s=IE(null,s,i,u,o)):(s.tag=0,s=Ym(null,s,i,u,o));else{if(i!=null){var f=i.$$typeof;if(f===ge){s.tag=11,s=TE(null,s,i,u,o);break e}else if(f===D){s.tag=14,s=SE(null,s,i,u,o);break e}}throw s=Pt(i)||i,Error(r(306,s,""))}}return s;case 0:return Ym(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=Ia(u,s.pendingProps),IE(i,s,u,f,o);case 3:e:{if(Wt(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,Em(i,s),ru(s,u,null,o);var v=s.memoizedState;if(u=v.cache,os(s,Rt,u),u!==m.cache&&mm(s,[Rt],o,!0),iu(),u=v.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=NE(i,s,u,o);break e}else if(u!==f){f=Xn(Error(r(424)),s),Xl(f),s=NE(i,s,u,o);break e}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,ot=ni(i.firstChild),Zt=s,Ue=!0,ss=null,ei=!0,o=wv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ea(),u===f){s=fr(i,s,o);break e}tn(i,s,u,o)}s=s.child}return s;case 26:return Nh(i,s),i===null?(o=HT(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ue||(o=s.type,i=s.pendingProps,u=Kh(Ie.current).createElement(o),u[gt]=s,u[Jt]=i,nn(u,o,i),Et(u),s.stateNode=u):s.memoizedState=HT(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return wi(s),i===null&&Ue&&(u=s.stateNode=FT(s.type,s.pendingProps,Ie.current),Zt=s,ei=!0,f=ot,Es(s.type)?(xp=f,ot=ni(u.firstChild)):ot=f),tn(i,s,s.pendingProps.children,o),Nh(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Ue&&((f=u=ot)&&(u=n1(u,s.type,s.pendingProps,ei),u!==null?(s.stateNode=u,Zt=s,ot=ni(u.firstChild),ei=!1,f=!0):f=!1),f||as(s)),wi(s),f=s.type,m=s.pendingProps,v=i!==null?i.memoizedProps:null,u=m.children,Ip(f,m)?u=null:v!==null&&Ip(f,v)&&(s.flags|=32),s.memoizedState!==null&&(f=Cm(i,s,_I,null,null,o),wu._currentValue=f),Nh(i,s),tn(i,s,u,o),s.child;case 6:return i===null&&Ue&&((i=o=ot)&&(o=i1(o,s.pendingProps,ei),o!==null?(s.stateNode=o,Zt=s,ot=null,i=!0):i=!1),i||as(s)),null;case 13:return DE(i,s,o);case 4:return Wt(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Ra(s,null,u,o):tn(i,s,u,o),s.child;case 11:return TE(i,s,s.type,s.pendingProps,o);case 7:return tn(i,s,s.pendingProps,o),s.child;case 8:return tn(i,s,s.pendingProps.children,o),s.child;case 12:return tn(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,os(s,s.type,u.value),tn(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,Sa(s),f=en(f),u=u(f),s.flags|=1,tn(i,s,u,o),s.child;case 14:return SE(i,s,s.type,s.pendingProps,o);case 15:return AE(i,s,s.type,s.pendingProps,o);case 19:return ME(i,s,o);case 31:return bI(i,s,o);case 22:return wE(i,s,o,s.pendingProps);case 24:return Sa(s),u=en(Rt),i===null?(f=_m(),f===null&&(f=rt,m=pm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},vm(s),os(s,Rt,f)):((i.lanes&o)!==0&&(Em(i,s),ru(s,null,null,o),iu()),f=i.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),os(s,Rt,u)):(u=m.cache,os(s,Rt,u),u!==f.cache&&mm(s,[Rt],o,!0))),tn(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function dr(i){i.flags|=4}function tp(i,s,o,u,f){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(f&335544128)===f)if(i.stateNode.complete)i.flags|=8192;else if(aT())i.flags|=8192;else throw ba=mh,ym}else i.flags&=-16777217}function kE(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!WT(s))if(aT())i.flags|=8192;else throw ba=mh,ym}function Oh(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Dl():536870912,i.lanes|=s,xo|=s)}function cu(i,s){if(!Ue)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function lt(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function CI(i,s,o){var u=s.pendingProps;switch(um(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(s),null;case 1:return lt(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ur(Rt),pt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Eo(s)?dr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,hm())),lt(s),null;case 26:var f=s.type,m=s.memoizedState;return i===null?(dr(s),m!==null?(lt(s),kE(s,m)):(lt(s),tp(s,f,null,u,o))):m?m!==i.memoizedState?(dr(s),lt(s),kE(s,m)):(lt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&dr(s),lt(s),tp(s,f,i,u,o)),null;case 27:if(Qi(s),o=Ie.current,f=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&dr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return lt(s),null}i=he.current,Eo(s)?dv(s):(i=FT(f,u,o),s.stateNode=i,dr(s))}return lt(s),null;case 5:if(Qi(s),f=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&dr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return lt(s),null}if(m=he.current,Eo(s))dv(s);else{var v=Kh(Ie.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}m[gt]=s,m[Jt]=u;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=m;e:switch(nn(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&dr(s)}}return lt(s),tp(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,o),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&dr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=Ie.current,Eo(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=Zt,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[gt]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||DT(i.nodeValue,o)),i||as(s,!0)}else i=Kh(i).createTextNode(u),i[gt]=s,s.stateNode=i}return lt(s),null;case 31:if(o=s.memoizedState,i===null||i.memoizedState!==null){if(u=Eo(s),o!==null){if(i===null){if(!u)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[gt]=s}else Ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),i=!1}else o=hm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return s.flags&256?(Un(s),s):(Un(s),null);if((s.flags&128)!==0)throw Error(r(558))}return lt(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Eo(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[gt]=s}else Ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),f=!1}else f=hm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Un(s),s):(Un(s),null)}return Un(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==i&&o&&(s.child.flags|=8192),Oh(s,s.updateQueue),lt(s),null);case 4:return pt(),i===null&&Ap(s.stateNode.containerInfo),lt(s),null;case 10:return ur(s.type),lt(s),null;case 19:if(W(Tt),u=s.memoizedState,u===null)return lt(s),null;if(f=(s.flags&128)!==0,m=u.rendering,m===null)if(f)cu(u,!1);else{if(vt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(m=yh(i),m!==null){for(s.flags|=128,cu(u,!1),i=m.updateQueue,s.updateQueue=i,Oh(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)lv(o,i),o=o.sibling;return re(Tt,Tt.current&1|2),Ue&&or(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&$t()>Vh&&(s.flags|=128,f=!0,cu(u,!1),s.lanes=4194304)}else{if(!f)if(i=yh(m),i!==null){if(s.flags|=128,f=!0,i=i.updateQueue,s.updateQueue=i,Oh(s,i),cu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Ue)return lt(s),null}else 2*$t()-u.renderingStartTime>Vh&&o!==536870912&&(s.flags|=128,f=!0,cu(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(i=u.last,i!==null?i.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=$t(),i.sibling=null,o=Tt.current,re(Tt,f?o&1|2:o&1),Ue&&or(s,u.treeForkCount),i):(lt(s),null);case 22:case 23:return Un(s),wm(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(lt(s),s.subtreeFlags&6&&(s.flags|=8192)):lt(s),o=s.updateQueue,o!==null&&Oh(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&W(Aa),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ur(Rt),lt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function II(i,s){switch(um(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return ur(Rt),pt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Qi(s),null;case 31:if(s.memoizedState!==null){if(Un(s),s.alternate===null)throw Error(r(340));Ea()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Un(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ea()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return W(Tt),null;case 4:return pt(),null;case 10:return ur(s.type),null;case 22:case 23:return Un(s),wm(),i!==null&&W(Aa),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return ur(Rt),null;case 25:return null;default:return null}}function PE(i,s){switch(um(s),s.tag){case 3:ur(Rt),pt();break;case 26:case 27:case 5:Qi(s);break;case 4:pt();break;case 31:s.memoizedState!==null&&Un(s);break;case 13:Un(s);break;case 19:W(Tt);break;case 10:ur(s.type);break;case 22:case 23:Un(s),wm(),i!==null&&W(Aa);break;case 24:ur(Rt)}}function hu(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var m=o.create,v=o.inst;u=m(),v.destroy=u}o=o.next}while(o!==f)}}catch(A){Ze(s,s.return,A)}}function ds(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&i)===i){var v=u.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,f=s;var C=o,j=A;try{j()}catch(Y){Ze(f,C,Y)}}}u=u.next}while(u!==m)}}catch(Y){Ze(s,s.return,Y)}}function VE(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{Rv(s,o)}catch(u){Ze(i,i.return,u)}}}function LE(i,s,o){o.props=Ia(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){Ze(i,s,u)}}function fu(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){Ze(i,s,f)}}function Pi(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){Ze(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Ze(i,s,f)}else o.current=null}function UE(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){Ze(i,i.return,f)}}function np(i,s,o){try{var u=i.stateNode;$I(u,i.type,o,s),u[Jt]=s}catch(f){Ze(i,i.return,f)}}function zE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Es(i.type)||i.tag===4}function ip(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||zE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Es(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function rp(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Bt));else if(u!==4&&(u===27&&Es(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(rp(i,s,o),i=i.sibling;i!==null;)rp(i,s,o),i=i.sibling}function Mh(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&Es(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(Mh(i,s,o),i=i.sibling;i!==null;)Mh(i,s,o),i=i.sibling}function BE(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);nn(s,u,o),s[gt]=i,s[Jt]=o}catch(m){Ze(i,i.return,m)}}var mr=!1,Nt=!1,sp=!1,FE=typeof WeakSet=="function"?WeakSet:Set,qt=null;function NI(i,s){if(i=i.containerInfo,Rp=Zh,i=Zy(i),Jd(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,A=-1,C=-1,j=0,Y=0,J=i,q=null;t:for(;;){for(var G;J!==o||f!==0&&J.nodeType!==3||(A=v+f),J!==m||u!==0&&J.nodeType!==3||(C=v+u),J.nodeType===3&&(v+=J.nodeValue.length),(G=J.firstChild)!==null;)q=J,J=G;for(;;){if(J===i)break t;if(q===o&&++j===f&&(A=v),q===m&&++Y===u&&(C=v),(G=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=G}o=A===-1||C===-1?null:{start:A,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(Cp={focusedElem:i,selectionRange:o},Zh=!1,qt=s;qt!==null;)if(s=qt,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,qt=i;else for(;qt!==null;){switch(s=qt,m=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)f=i[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&m!==null){i=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var ce=Ia(o.type,f);i=u.getSnapshotBeforeUpdate(ce,m),u.__reactInternalSnapshotBeforeUpdate=i}catch(_e){Ze(o,o.return,_e)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)Dp(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Dp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,qt=i;break}qt=s.return}}function jE(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:gr(i,o),u&4&&hu(5,o);break;case 1:if(gr(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(v){Ze(o,o.return,v)}else{var f=Ia(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(v){Ze(o,o.return,v)}}u&64&&VE(o),u&512&&fu(o,o.return);break;case 3:if(gr(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Rv(i,s)}catch(v){Ze(o,o.return,v)}}break;case 27:s===null&&u&4&&BE(o);case 26:case 5:gr(i,o),s===null&&u&4&&UE(o),u&512&&fu(o,o.return);break;case 12:gr(i,o);break;case 31:gr(i,o),u&4&&GE(i,o);break;case 13:gr(i,o),u&4&&KE(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=UI.bind(null,o),r1(i,o))));break;case 22:if(u=o.memoizedState!==null||mr,!u){s=s!==null&&s.memoizedState!==null||Nt,f=mr;var m=Nt;mr=u,(Nt=s)&&!m?_r(i,o,(o.subtreeFlags&8772)!==0):gr(i,o),mr=f,Nt=m}break;case 30:break;default:gr(i,o)}}function qE(i){var s=i.alternate;s!==null&&(i.alternate=null,qE(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&aa(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var dt=null,bn=!1;function pr(i,s,o){for(o=o.child;o!==null;)HE(i,s,o),o=o.sibling}function HE(i,s,o){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Ur,o)}catch{}switch(o.tag){case 26:Nt||Pi(o,s),pr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Nt||Pi(o,s);var u=dt,f=bn;Es(o.type)&&(dt=o.stateNode,bn=!1),pr(i,s,o),Tu(o.stateNode),dt=u,bn=f;break;case 5:Nt||Pi(o,s);case 6:if(u=dt,f=bn,dt=null,pr(i,s,o),dt=u,bn=f,dt!==null)if(bn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(o.stateNode)}catch(m){Ze(o,s,m)}else try{dt.removeChild(o.stateNode)}catch(m){Ze(o,s,m)}break;case 18:dt!==null&&(bn?(i=dt,VT(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Fo(i)):VT(dt,o.stateNode));break;case 4:u=dt,f=bn,dt=o.stateNode.containerInfo,bn=!0,pr(i,s,o),dt=u,bn=f;break;case 0:case 11:case 14:case 15:ds(2,o,s),Nt||ds(4,o,s),pr(i,s,o);break;case 1:Nt||(Pi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&LE(o,s,u)),pr(i,s,o);break;case 21:pr(i,s,o);break;case 22:Nt=(u=Nt)||o.memoizedState!==null,pr(i,s,o),Nt=u;break;default:pr(i,s,o)}}function GE(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Fo(i)}catch(o){Ze(s,s.return,o)}}}function KE(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Fo(i)}catch(o){Ze(s,s.return,o)}}function DI(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new FE),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new FE),s;default:throw Error(r(435,i.tag))}}function xh(i,s){var o=DI(i);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=zI.bind(null,i,u);u.then(f,f)}})}function Rn(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=i,v=s,A=v;e:for(;A!==null;){switch(A.tag){case 27:if(Es(A.type)){dt=A.stateNode,bn=!1;break e}break;case 5:dt=A.stateNode,bn=!1;break e;case 3:case 4:dt=A.stateNode.containerInfo,bn=!0;break e}A=A.return}if(dt===null)throw Error(r(160));HE(m,v,f),dt=null,bn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)YE(s,i),s=s.sibling}var fi=null;function YE(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Rn(s,i),Cn(i),u&4&&(ds(3,i,i.return),hu(3,i),ds(5,i,i.return));break;case 1:Rn(s,i),Cn(i),u&512&&(Nt||o===null||Pi(o,o.return)),u&64&&mr&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=fi;if(Rn(s,i),Cn(i),u&512&&(Nt||o===null||Pi(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ji]||m[gt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),nn(m,u,o),m[gt]=i,Et(m),u=m;break e;case"link":var v=YT("link","href",f).get(u+(o.href||""));if(v){for(var A=0;A<v.length;A++)if(m=v[A],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(A,1);break t}}m=f.createElement(u),nn(m,u,o),f.head.appendChild(m);break;case"meta":if(v=YT("meta","content",f).get(u+(o.content||""))){for(A=0;A<v.length;A++)if(m=v[A],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(A,1);break t}}m=f.createElement(u),nn(m,u,o),f.head.appendChild(m);break;default:throw Error(r(468,u))}m[gt]=i,Et(m),u=m}i.stateNode=u}else QT(f,i.type,i.stateNode);else i.stateNode=KT(f,u,i.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?QT(f,i.type,i.stateNode):KT(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&np(i,i.memoizedProps,o.memoizedProps)}break;case 27:Rn(s,i),Cn(i),u&512&&(Nt||o===null||Pi(o,o.return)),o!==null&&u&4&&np(i,i.memoizedProps,o.memoizedProps);break;case 5:if(Rn(s,i),Cn(i),u&512&&(Nt||o===null||Pi(o,o.return)),i.flags&32){f=i.stateNode;try{Wn(f,"")}catch(ce){Ze(i,i.return,ce)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,np(i,f,o!==null?o.memoizedProps:f)),u&1024&&(sp=!0);break;case 6:if(Rn(s,i),Cn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(ce){Ze(i,i.return,ce)}}break;case 3:if(Wh=null,f=fi,fi=Yh(s.containerInfo),Rn(s,i),fi=f,Cn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Fo(s.containerInfo)}catch(ce){Ze(i,i.return,ce)}sp&&(sp=!1,QE(i));break;case 4:u=fi,fi=Yh(i.stateNode.containerInfo),Rn(s,i),Cn(i),fi=u;break;case 12:Rn(s,i),Cn(i);break;case 31:Rn(s,i),Cn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,xh(i,u)));break;case 13:Rn(s,i),Cn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ph=$t()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,xh(i,u)));break;case 22:f=i.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,j=mr,Y=Nt;if(mr=j||f,Nt=Y||C,Rn(s,i),Nt=Y,mr=j,Cn(i),u&8192)e:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||C||mr||Nt||Na(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){C=o=s;try{if(m=C.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=C.stateNode;var J=C.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;A.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ce){Ze(C,C.return,ce)}}}else if(s.tag===6){if(o===null){C=s;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(ce){Ze(C,C.return,ce)}}}else if(s.tag===18){if(o===null){C=s;try{var G=C.stateNode;f?LT(G,!0):LT(C.stateNode,!1)}catch(ce){Ze(C,C.return,ce)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,xh(i,o))));break;case 19:Rn(s,i),Cn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,xh(i,u)));break;case 30:break;case 21:break;default:Rn(s,i),Cn(i)}}function Cn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(zE(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,m=ip(i);Mh(i,m,f);break;case 5:var v=o.stateNode;o.flags&32&&(Wn(v,""),o.flags&=-33);var A=ip(i);Mh(i,A,v);break;case 3:case 4:var C=o.stateNode.containerInfo,j=ip(i);rp(i,j,C);break;default:throw Error(r(161))}}catch(Y){Ze(i,i.return,Y)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function QE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;QE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function gr(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)jE(i,s.alternate,s),s=s.sibling}function Na(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ds(4,s,s.return),Na(s);break;case 1:Pi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&LE(s,s.return,o),Na(s);break;case 27:Tu(s.stateNode);case 26:case 5:Pi(s,s.return),Na(s);break;case 22:s.memoizedState===null&&Na(s);break;case 30:Na(s);break;default:Na(s)}i=i.sibling}}function _r(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:_r(f,m,o),hu(4,m);break;case 1:if(_r(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(j){Ze(u,u.return,j)}if(u=m,f=u.updateQueue,f!==null){var A=u.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)bv(C[f],A)}catch(j){Ze(u,u.return,j)}}o&&v&64&&VE(m),fu(m,m.return);break;case 27:BE(m);case 26:case 5:_r(f,m,o),o&&u===null&&v&4&&UE(m),fu(m,m.return);break;case 12:_r(f,m,o);break;case 31:_r(f,m,o),o&&v&4&&GE(f,m);break;case 13:_r(f,m,o),o&&v&4&&KE(f,m);break;case 22:m.memoizedState===null&&_r(f,m,o),fu(m,m.return);break;case 30:break;default:_r(f,m,o)}s=s.sibling}}function ap(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Jl(o))}function op(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Jl(i))}function di(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)WE(i,s,o,u),s=s.sibling}function WE(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:di(i,s,o,u),f&2048&&hu(9,s);break;case 1:di(i,s,o,u);break;case 3:di(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Jl(i)));break;case 12:if(f&2048){di(i,s,o,u),i=s.stateNode;try{var m=s.memoizedProps,v=m.id,A=m.onPostCommit;typeof A=="function"&&A(v,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(C){Ze(s,s.return,C)}}else di(i,s,o,u);break;case 31:di(i,s,o,u);break;case 13:di(i,s,o,u);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?di(i,s,o,u):du(i,s):m._visibility&2?di(i,s,o,u):(m._visibility|=2,Do(i,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&ap(v,s);break;case 24:di(i,s,o,u),f&2048&&op(s.alternate,s);break;default:di(i,s,o,u)}}function Do(i,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=i,v=s,A=o,C=u,j=v.flags;switch(v.tag){case 0:case 11:case 15:Do(m,v,A,C,f),hu(8,v);break;case 23:break;case 22:var Y=v.stateNode;v.memoizedState!==null?Y._visibility&2?Do(m,v,A,C,f):du(m,v):(Y._visibility|=2,Do(m,v,A,C,f)),f&&j&2048&&ap(v.alternate,v);break;case 24:Do(m,v,A,C,f),f&&j&2048&&op(v.alternate,v);break;default:Do(m,v,A,C,f)}s=s.sibling}}function du(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:du(o,u),f&2048&&ap(u.alternate,u);break;case 24:du(o,u),f&2048&&op(u.alternate,u);break;default:du(o,u)}s=s.sibling}}var mu=8192;function Oo(i,s,o){if(i.subtreeFlags&mu)for(i=i.child;i!==null;)$E(i,s,o),i=i.sibling}function $E(i,s,o){switch(i.tag){case 26:Oo(i,s,o),i.flags&mu&&i.memoizedState!==null&&g1(o,fi,i.memoizedState,i.memoizedProps);break;case 5:Oo(i,s,o);break;case 3:case 4:var u=fi;fi=Yh(i.stateNode.containerInfo),Oo(i,s,o),fi=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=mu,mu=16777216,Oo(i,s,o),mu=u):Oo(i,s,o));break;default:Oo(i,s,o)}}function XE(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function pu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];qt=u,ZE(u,i)}XE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)JE(i),i=i.sibling}function JE(i){switch(i.tag){case 0:case 11:case 15:pu(i),i.flags&2048&&ds(9,i,i.return);break;case 3:pu(i);break;case 12:pu(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,kh(i)):pu(i);break;default:pu(i)}}function kh(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];qt=u,ZE(u,i)}XE(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ds(8,s,s.return),kh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,kh(s));break;default:kh(s)}i=i.sibling}}function ZE(i,s){for(;qt!==null;){var o=qt;switch(o.tag){case 0:case 11:case 15:ds(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Jl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,qt=u;else e:for(o=i;qt!==null;){u=qt;var f=u.sibling,m=u.return;if(qE(u),u===o){qt=null;break e}if(f!==null){f.return=m,qt=f;break e}qt=m}}}var OI={getCacheForType:function(i){var s=en(Rt),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o},cacheSignal:function(){return en(Rt).controller.signal}},MI=typeof WeakMap=="function"?WeakMap:Map,Ye=0,rt=null,Oe=null,ke=0,Je=0,zn=null,ms=!1,Mo=!1,lp=!1,yr=0,vt=0,ps=0,Da=0,up=0,Bn=0,xo=0,gu=null,In=null,cp=!1,Ph=0,eT=0,Vh=1/0,Lh=null,gs=null,Lt=0,_s=null,ko=null,vr=0,hp=0,fp=null,tT=null,_u=0,dp=null;function Fn(){return(Ye&2)!==0&&ke!==0?ke&-ke:Q.T!==null?vp():Xi()}function nT(){if(Bn===0)if((ke&536870912)===0||Ue){var i=bi;bi<<=1,(bi&3932160)===0&&(bi=262144),Bn=i}else Bn=536870912;return i=Ln.current,i!==null&&(i.flags|=32),Bn}function Nn(i,s,o){(i===rt&&(Je===2||Je===9)||i.cancelPendingCommit!==null)&&(Po(i,0),ys(i,ke,Bn,!1)),Fr(i,o),((Ye&2)===0||i!==rt)&&(i===rt&&((Ye&2)===0&&(Da|=o),vt===4&&ys(i,ke,Bn,!1)),Vi(i))}function iT(i,s,o){if((Ye&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&i.expiredLanes)===0||Br(i,s),f=u?PI(i,s):pp(i,s,!0),m=u;do{if(f===0){Mo&&!u&&ys(i,s,0,!1);break}else{if(o=i.current.alternate,m&&!xI(o)){f=pp(i,s,!1),m=!1;continue}if(f===2){if(m=s,i.errorRecoveryDisabledLanes&m)var v=0;else v=i.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var A=i;f=gu;var C=A.current.memoizedState.isDehydrated;if(C&&(Po(A,v).flags|=256),v=pp(A,v,!1),v!==2){if(lp&&!C){A.errorRecoveryDisabledLanes|=m,Da|=m,f=4;break e}m=In,In=f,m!==null&&(In===null?In=m:In.push.apply(In,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){Po(i,0),ys(i,s,0,!0);break}e:{switch(u=i,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ys(u,s,Bn,!ms);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Ph+300-$t(),10<f)){if(ys(u,s,Bn,!ms),Yn(u,0,!0)!==0)break e;vr=s,u.timeoutHandle=kT(rT.bind(null,u,o,In,Lh,cp,s,Bn,Da,xo,ms,m,"Throttled",-0,0),f);break e}rT(u,o,In,Lh,cp,s,Bn,Da,xo,ms,m,null,-0,0)}}break}while(!0);Vi(i)}function rT(i,s,o,u,f,m,v,A,C,j,Y,J,q,G){if(i.timeoutHandle=-1,J=s.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bt},$E(s,m,J);var ce=(m&62914560)===m?Ph-$t():(m&4194048)===m?eT-$t():0;if(ce=_1(J,ce),ce!==null){vr=m,i.cancelPendingCommit=ce(fT.bind(null,i,s,m,o,u,f,v,A,C,Y,J,null,q,G)),ys(i,m,v,!j);return}}fT(i,s,m,o,u,f,v,A,C)}function xI(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!Pn(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ys(i,s,o,u){s&=~up,s&=~Da,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var m=31-_n(f),v=1<<m;u[m]=-1,f&=~v}o!==0&&Ol(i,o,s)}function Uh(){return(Ye&6)===0?(yu(0),!1):!0}function mp(){if(Oe!==null){if(Je===0)var i=Oe.return;else i=Oe,lr=Ta=null,Dm(i),bo=null,eu=0,i=Oe;for(;i!==null;)PE(i.alternate,i),i=i.return;Oe=null}}function Po(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,ZI(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),vr=0,mp(),rt=i,Oe=o=ar(i.current,null),ke=s,Je=0,zn=null,ms=!1,Mo=Br(i,s),lp=!1,xo=Bn=up=Da=ps=vt=0,In=gu=null,cp=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-_n(u),m=1<<f;s|=i[f],u&=~m}return yr=s,sh(),o}function sT(i,s){be=null,Q.H=lu,s===wo||s===dh?(s=Tv(),Je=3):s===ym?(s=Tv(),Je=4):Je=s===Km?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,zn=s,Oe===null&&(vt=1,Ch(i,Xn(s,i.current)))}function aT(){var i=Ln.current;return i===null?!0:(ke&4194048)===ke?ti===null:(ke&62914560)===ke||(ke&536870912)!==0?i===ti:!1}function oT(){var i=Q.H;return Q.H=lu,i===null?lu:i}function lT(){var i=Q.A;return Q.A=OI,i}function zh(){vt=4,ms||(ke&4194048)!==ke&&Ln.current!==null||(Mo=!0),(ps&134217727)===0&&(Da&134217727)===0||rt===null||ys(rt,ke,Bn,!1)}function pp(i,s,o){var u=Ye;Ye|=2;var f=oT(),m=lT();(rt!==i||ke!==s)&&(Lh=null,Po(i,s)),s=!1;var v=vt;e:do try{if(Je!==0&&Oe!==null){var A=Oe,C=zn;switch(Je){case 8:mp(),v=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(s=!0);var j=Je;if(Je=0,zn=null,Vo(i,A,C,j),o&&Mo){v=0;break e}break;default:j=Je,Je=0,zn=null,Vo(i,A,C,j)}}kI(),v=vt;break}catch(Y){sT(i,Y)}while(!0);return s&&i.shellSuspendCounter++,lr=Ta=null,Ye=u,Q.H=f,Q.A=m,Oe===null&&(rt=null,ke=0,sh()),v}function kI(){for(;Oe!==null;)uT(Oe)}function PI(i,s){var o=Ye;Ye|=2;var u=oT(),f=lT();rt!==i||ke!==s?(Lh=null,Vh=$t()+500,Po(i,s)):Mo=Br(i,s);e:do try{if(Je!==0&&Oe!==null){s=Oe;var m=zn;t:switch(Je){case 1:Je=0,zn=null,Vo(i,s,m,1);break;case 2:case 9:if(vv(m)){Je=0,zn=null,cT(s);break}s=function(){Je!==2&&Je!==9||rt!==i||(Je=7),Vi(i)},m.then(s,s);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:vv(m)?(Je=0,zn=null,cT(s)):(Je=0,zn=null,Vo(i,s,m,7));break;case 5:var v=null;switch(Oe.tag){case 26:v=Oe.memoizedState;case 5:case 27:var A=Oe;if(v?WT(v):A.stateNode.complete){Je=0,zn=null;var C=A.sibling;if(C!==null)Oe=C;else{var j=A.return;j!==null?(Oe=j,Bh(j)):Oe=null}break t}}Je=0,zn=null,Vo(i,s,m,5);break;case 6:Je=0,zn=null,Vo(i,s,m,6);break;case 8:mp(),vt=6;break e;default:throw Error(r(462))}}VI();break}catch(Y){sT(i,Y)}while(!0);return lr=Ta=null,Q.H=u,Q.A=f,Ye=o,Oe!==null?0:(rt=null,ke=0,sh(),vt)}function VI(){for(;Oe!==null&&!Fd();)uT(Oe)}function uT(i){var s=xE(i.alternate,i,yr);i.memoizedProps=i.pendingProps,s===null?Bh(i):Oe=s}function cT(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=CE(o,s,s.pendingProps,s.type,void 0,ke);break;case 11:s=CE(o,s,s.pendingProps,s.type.render,s.ref,ke);break;case 5:Dm(s);default:PE(o,s),s=Oe=lv(s,yr),s=xE(o,s,yr)}i.memoizedProps=i.pendingProps,s===null?Bh(i):Oe=s}function Vo(i,s,o,u){lr=Ta=null,Dm(s),bo=null,eu=0;var f=s.return;try{if(wI(i,f,s,o,ke)){vt=1,Ch(i,Xn(o,i.current)),Oe=null;return}}catch(m){if(f!==null)throw Oe=f,m;vt=1,Ch(i,Xn(o,i.current)),Oe=null;return}s.flags&32768?(Ue||u===1?i=!0:Mo||(ke&536870912)!==0?i=!1:(ms=i=!0,(u===2||u===9||u===3||u===6)&&(u=Ln.current,u!==null&&u.tag===13&&(u.flags|=16384))),hT(s,i)):Bh(s)}function Bh(i){var s=i;do{if((s.flags&32768)!==0){hT(s,ms);return}i=s.return;var o=CI(s.alternate,s,yr);if(o!==null){Oe=o;return}if(s=s.sibling,s!==null){Oe=s;return}Oe=s=i}while(s!==null);vt===0&&(vt=5)}function hT(i,s){do{var o=II(i.alternate,i);if(o!==null){o.flags&=32767,Oe=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){Oe=i;return}Oe=i=o}while(i!==null);vt=6,Oe=null}function fT(i,s,o,u,f,m,v,A,C){i.cancelPendingCommit=null;do Fh();while(Lt!==0);if((Ye&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=im,Xt(i,o,m,v,A,C),i===rt&&(Oe=rt=null,ke=0),ko=s,_s=i,vr=o,hp=m,fp=f,tT=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,BI(Wi,function(){return _T(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,f=ae.p,ae.p=2,v=Ye,Ye|=4;try{NI(i,s,o)}finally{Ye=v,ae.p=f,Q.T=u}}Lt=1,dT(),mT(),pT()}}function dT(){if(Lt===1){Lt=0;var i=_s,s=ko,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null;var u=ae.p;ae.p=2;var f=Ye;Ye|=4;try{YE(s,i);var m=Cp,v=Zy(i.containerInfo),A=m.focusedElem,C=m.selectionRange;if(v!==A&&A&&A.ownerDocument&&Jy(A.ownerDocument.documentElement,A)){if(C!==null&&Jd(A)){var j=C.start,Y=C.end;if(Y===void 0&&(Y=j),"selectionStart"in A)A.selectionStart=j,A.selectionEnd=Math.min(Y,A.value.length);else{var J=A.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var G=q.getSelection(),ce=A.textContent.length,_e=Math.min(C.start,ce),nt=C.end===void 0?_e:Math.min(C.end,ce);!G.extend&&_e>nt&&(v=nt,nt=_e,_e=v);var V=Xy(A,_e),O=Xy(A,nt);if(V&&O&&(G.rangeCount!==1||G.anchorNode!==V.node||G.anchorOffset!==V.offset||G.focusNode!==O.node||G.focusOffset!==O.offset)){var B=J.createRange();B.setStart(V.node,V.offset),G.removeAllRanges(),_e>nt?(G.addRange(B),G.extend(O.node,O.offset)):(B.setEnd(O.node,O.offset),G.addRange(B))}}}}for(J=[],G=A;G=G.parentNode;)G.nodeType===1&&J.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<J.length;A++){var $=J[A];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Zh=!!Rp,Cp=Rp=null}finally{Ye=f,ae.p=u,Q.T=o}}i.current=s,Lt=2}}function mT(){if(Lt===2){Lt=0;var i=_s,s=ko,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Q.T,Q.T=null;var u=ae.p;ae.p=2;var f=Ye;Ye|=4;try{jE(i,s.alternate,s)}finally{Ye=f,ae.p=u,Q.T=o}}Lt=3}}function pT(){if(Lt===4||Lt===3){Lt=0,Cl();var i=_s,s=ko,o=vr,u=tT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Lt=5:(Lt=0,ko=_s=null,gT(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(gs=null),xl(o),s=s.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Ur,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Q.T,f=ae.p,ae.p=2,Q.T=null;try{for(var m=i.onRecoverableError,v=0;v<u.length;v++){var A=u[v];m(A.value,{componentStack:A.stack})}}finally{Q.T=s,ae.p=f}}(vr&3)!==0&&Fh(),Vi(i),f=i.pendingLanes,(o&261930)!==0&&(f&42)!==0?i===dp?_u++:(_u=0,dp=i):_u=0,yu(0)}}function gT(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Jl(s)))}function Fh(){return dT(),mT(),pT(),_T()}function _T(){if(Lt!==5)return!1;var i=_s,s=hp;hp=0;var o=xl(vr),u=Q.T,f=ae.p;try{ae.p=32>o?32:o,Q.T=null,o=fp,fp=null;var m=_s,v=vr;if(Lt=0,ko=_s=null,vr=0,(Ye&6)!==0)throw Error(r(331));var A=Ye;if(Ye|=4,JE(m.current),WE(m,m.current,v,o),Ye=A,yu(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Ur,m)}catch{}return!0}finally{ae.p=f,Q.T=u,gT(i,s)}}function yT(i,s,o){s=Xn(o,s),s=Gm(i.stateNode,s,2),i=cs(i,s,2),i!==null&&(Fr(i,2),Vi(i))}function Ze(i,s,o){if(i.tag===3)yT(i,i,o);else for(;s!==null;){if(s.tag===3){yT(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(gs===null||!gs.has(u))){i=Xn(o,i),o=vE(2),u=cs(s,o,2),u!==null&&(EE(o,u,s,i),Fr(u,2),Vi(u));break}}s=s.return}}function gp(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new MI;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(lp=!0,f.add(o),i=LI.bind(null,i,s,o),s.then(i,i))}function LI(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,rt===i&&(ke&o)===o&&(vt===4||vt===3&&(ke&62914560)===ke&&300>$t()-Ph?(Ye&2)===0&&Po(i,0):up|=o,xo===ke&&(xo=0)),Vi(i)}function vT(i,s){s===0&&(s=Dl()),i=ya(i,s),i!==null&&(Fr(i,s),Vi(i))}function UI(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),vT(i,o)}function zI(i,s){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),vT(i,o)}function BI(i,s){return ia(i,s)}var jh=null,Lo=null,_p=!1,qh=!1,yp=!1,vs=0;function Vi(i){i!==Lo&&i.next===null&&(Lo===null?jh=Lo=i:Lo=Lo.next=i),qh=!0,_p||(_p=!0,jI())}function yu(i,s){if(!yp&&qh){yp=!0;do for(var o=!1,u=jh;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var v=u.suspendedLanes,A=u.pingedLanes;m=(1<<31-_n(42|i)+1)-1,m&=f&~(v&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,AT(u,m))}else m=ke,m=Yn(u,u===rt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Br(u,m)||(o=!0,AT(u,m));u=u.next}while(o);yp=!1}}function FI(){ET()}function ET(){qh=_p=!1;var i=0;vs!==0&&JI()&&(i=vs);for(var s=$t(),o=null,u=jh;u!==null;){var f=u.next,m=TT(u,s);m===0?(u.next=null,o===null?jh=f:o.next=f,f===null&&(Lo=o)):(o=u,(i!==0||(m&3)!==0)&&(qh=!0)),u=f}Lt!==0&&Lt!==5||yu(i),vs!==0&&(vs=0)}function TT(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,m=i.pendingLanes&-62914561;0<m;){var v=31-_n(m),A=1<<v,C=f[v];C===-1?((A&o)===0||(A&u)!==0)&&(f[v]=no(A,s)):C<=s&&(i.expiredLanes|=A),m&=~A}if(s=rt,o=ke,o=Yn(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(Je===2||Je===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&to(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Br(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&to(u),xl(o)){case 2:case 8:o=zt;break;case 32:o=Wi;break;case 268435456:o=Il;break;default:o=Wi}return u=ST.bind(null,i),o=ia(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&to(u),i.callbackPriority=2,i.callbackNode=null,2}function ST(i,s){if(Lt!==0&&Lt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Fh()&&i.callbackNode!==o)return null;var u=ke;return u=Yn(i,i===rt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(iT(i,u,s),TT(i,$t()),i.callbackNode!=null&&i.callbackNode===o?ST.bind(null,i):null)}function AT(i,s){if(Fh())return null;iT(i,s,!0)}function jI(){e1(function(){(Ye&6)!==0?ia(Vt,FI):ET()})}function vp(){if(vs===0){var i=So;i===0&&(i=sa,sa<<=1,(sa&261888)===0&&(sa=256)),vs=i}return vs}function wT(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Di(""+i)}function bT(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function qI(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=wT((f[Jt]||null).action),v=u.submitter;v&&(s=(s=v[Jt]||null)?wT(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var A=new ha("action","action",null,u,f);i.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(vs!==0){var C=v?bT(f,v):new FormData(f);zm(o,{pending:!0,data:C,method:f.method,action:m},null,C)}}else typeof m=="function"&&(A.preventDefault(),C=v?bT(f,v):new FormData(f),zm(o,{pending:!0,data:C,method:f.method,action:m},m,C))},currentTarget:f}]})}}for(var Ep=0;Ep<nm.length;Ep++){var Tp=nm[Ep],HI=Tp.toLowerCase(),GI=Tp[0].toUpperCase()+Tp.slice(1);hi(HI,"on"+GI)}hi(nv,"onAnimationEnd"),hi(iv,"onAnimationIteration"),hi(rv,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(oI,"onTransitionRun"),hi(lI,"onTransitionStart"),hi(uI,"onTransitionCancel"),hi(sv,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yn("onBeforeInput",["compositionend","keypress","textInput","paste"]),yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vu));function RT(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var v=u.length-1;0<=v;v--){var A=u[v],C=A.instance,j=A.currentTarget;if(A=A.listener,C!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=j;try{m(f)}catch(Y){rh(Y)}f.currentTarget=null,m=C}else for(v=0;v<u.length;v++){if(A=u[v],C=A.instance,j=A.currentTarget,A=A.listener,C!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=j;try{m(f)}catch(Y){rh(Y)}f.currentTarget=null,m=C}}}}function Me(i,s){var o=s[Hr];o===void 0&&(o=s[Hr]=new Set);var u=i+"__bubble";o.has(u)||(CT(s,i,2,!1),o.add(u))}function Sp(i,s,o){var u=0;s&&(u|=4),CT(o,i,u,s)}var Hh="_reactListening"+Math.random().toString(36).slice(2);function Ap(i){if(!i[Hh]){i[Hh]=!0,io.forEach(function(o){o!=="selectionchange"&&(KI.has(o)||Sp(o,!1,i),Sp(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Hh]||(s[Hh]=!0,Sp("selectionchange",!1,s))}}function CT(i,s,o,u){switch(n0(s)){case 2:var f=E1;break;case 8:f=T1;break;default:f=Up}o=f.bind(null,s,o,i),f=void 0,!Fl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function wp(i,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var A=u.stateNode.containerInfo;if(A===f)break;if(v===4)for(v=u.return;v!==null;){var C=v.tag;if((C===3||C===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;A!==null;){if(v=Zi(A),v===null)return;if(C=v.tag,C===5||C===6||C===26||C===27){u=m=v;continue e}A=A.parentNode}}u=u.return}jc(function(){var j=m,Y=lo(o),J=[];e:{var q=av.get(i);if(q!==void 0){var G=ha,ce=i;switch(i){case"keypress":if(ca(o)===0)break e;case"keydown":case"keyup":G=Xc;break;case"focusin":ce="focus",G=es;break;case"focusout":ce="blur",G=es;break;case"beforeblur":case"afterblur":G=es;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Zc;break;case nv:case iv:case rv:G=ho;break;case sv:G=fo;break;case"scroll":case"scrollend":G=qc;break;case"wheel":G=th;break;case"copy":case"cut":case"paste":G=Yc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Kl;break;case"toggle":case"beforetoggle":G=ns}var _e=(s&4)!==0,nt=!_e&&(i==="scroll"||i==="scrollend"),V=_e?q!==null?q+"Capture":null:q;_e=[];for(var O=j,B;O!==null;){var $=O;if(B=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||B===null||V===null||($=An(O,V),$!=null&&_e.push(Eu(O,$,B))),nt)break;O=O.return}0<_e.length&&(q=new G(q,ce,null,o,Y),J.push({event:q,listeners:_e}))}}if((s&7)===0){e:{if(q=i==="mouseover"||i==="pointerover",G=i==="mouseout"||i==="pointerout",q&&o!==oo&&(ce=o.relatedTarget||o.fromElement)&&(Zi(ce)||ce[Ci]))break e;if((G||q)&&(q=Y.window===Y?Y:(q=Y.ownerDocument)?q.defaultView||q.parentWindow:window,G?(ce=o.relatedTarget||o.toElement,G=j,ce=ce?Zi(ce):null,ce!==null&&(nt=l(ce),_e=ce.tag,ce!==nt||_e!==5&&_e!==27&&_e!==6)&&(ce=null)):(G=null,ce=j),G!==ce)){if(_e=Hc,$="onMouseLeave",V="onMouseEnter",O="mouse",(i==="pointerout"||i==="pointerover")&&(_e=Kl,$="onPointerLeave",V="onPointerEnter",O="pointer"),nt=G==null?q:oa(G),B=ce==null?q:oa(ce),q=new _e($,O+"leave",G,o,Y),q.target=nt,q.relatedTarget=B,$=null,Zi(Y)===j&&(_e=new _e(V,O+"enter",ce,o,Y),_e.target=B,_e.relatedTarget=nt,$=_e),nt=$,G&&ce)t:{for(_e=YI,V=G,O=ce,B=0,$=V;$;$=_e($))B++;$=0;for(var de=O;de;de=_e(de))$++;for(;0<B-$;)V=_e(V),B--;for(;0<$-B;)O=_e(O),$--;for(;B--;){if(V===O||O!==null&&V===O.alternate){_e=V;break t}V=_e(V),O=_e(O)}_e=null}else _e=null;G!==null&&IT(J,q,G,_e,!1),ce!==null&&nt!==null&&IT(J,nt,ce,_e,!0)}}e:{if(q=j?oa(j):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var Ge=Gy;else if(wn(q))if(Ky)Ge=rI;else{Ge=nI;var fe=tI}else G=q.nodeName,!G||G.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?j&&zl(j.elementType)&&(Ge=Gy):Ge=iI;if(Ge&&(Ge=Ge(i,j))){pa(J,Ge,o,Y);break e}fe&&fe(i,q,j),i==="focusout"&&j&&q.type==="number"&&j.memoizedProps.value!=null&&ao(q,"number",q.value)}switch(fe=j?oa(j):window,i){case"focusin":(wn(fe)||fe.contentEditable==="true")&&(mo=fe,Zd=j,Wl=null);break;case"focusout":Wl=Zd=mo=null;break;case"mousedown":em=!0;break;case"contextmenu":case"mouseup":case"dragend":em=!1,ev(J,o,Y);break;case"selectionchange":if(aI)break;case"keydown":case"keyup":ev(J,o,Y)}var Re;if(_)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Ne?We(i,o)&&(Pe="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Pe="onCompositionStart");Pe&&(U&&o.locale!=="ko"&&(Ne||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Ne&&(Re=$r()):(kn=Y,uo="value"in kn?kn.value:kn.textContent,Ne=!0)),fe=Gh(j,Pe),0<fe.length&&(Pe=new ql(Pe,i,null,o,Y),J.push({event:Pe,listeners:fe}),Re?Pe.data=Re:(Re=bt(o),Re!==null&&(Pe.data=Re)))),(Re=w?Ft(i,o):jt(i,o))&&(Pe=Gh(j,"onBeforeInput"),0<Pe.length&&(fe=new ql("onBeforeInput","beforeinput",null,o,Y),J.push({event:fe,listeners:Pe}),fe.data=Re)),qI(J,i,j,o,Y)}RT(J,s)})}function Eu(i,s,o){return{instance:i,listener:s,currentTarget:o}}function Gh(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=An(i,o),f!=null&&u.unshift(Eu(i,f,m)),f=An(i,s),f!=null&&u.push(Eu(i,f,m))),i.tag===3)return u;i=i.return}return[]}function YI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function IT(i,s,o,u,f){for(var m=s._reactName,v=[];o!==null&&o!==u;){var A=o,C=A.alternate,j=A.stateNode;if(A=A.tag,C!==null&&C===u)break;A!==5&&A!==26&&A!==27||j===null||(C=j,f?(j=An(o,m),j!=null&&v.unshift(Eu(o,j,C))):f||(j=An(o,m),j!=null&&v.push(Eu(o,j,C)))),o=o.return}v.length!==0&&i.push({event:s,listeners:v})}var QI=/\r\n?/g,WI=/\u0000|\uFFFD/g;function NT(i){return(typeof i=="string"?i:""+i).replace(QI,`
`).replace(WI,"")}function DT(i,s){return s=NT(s),NT(i)===s}function tt(i,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Wn(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Wn(i,""+u);break;case"className":Yr(i,"class",u);break;case"tabIndex":Yr(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Yr(i,o,u);break;case"style":Bc(i,u,m);break;case"data":if(s!=="object"){Yr(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Di(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&tt(i,s,"name",f.name,f,null),tt(i,s,"formEncType",f.formEncType,f,null),tt(i,s,"formMethod",f.formMethod,f,null),tt(i,s,"formTarget",f.formTarget,f,null)):(tt(i,s,"encType",f.encType,f,null),tt(i,s,"method",f.method,f,null),tt(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Di(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Bt);break;case"onScroll":u!=null&&Me("scroll",i);break;case"onScrollEnd":u!=null&&Me("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Di(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Me("beforetoggle",i),Me("toggle",i),Kr(i,"popover",u);break;case"xlinkActuate":Qn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Qn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Qn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Qn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Qn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Qn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Qn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Qn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Qn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Kr(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Yd.get(o)||o,Kr(i,o,u))}}function bp(i,s,o,u,f,m){switch(o){case"style":Bc(i,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?Wn(i,u):(typeof u=="number"||typeof u=="bigint")&&Wn(i,""+u);break;case"onScroll":u!=null&&Me("scroll",i);break;case"onScrollEnd":u!=null&&Me("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Bt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gr.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=i[Jt]||null,m=m!=null?m[o]:null,typeof m=="function"&&i.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):Kr(i,o,u)}}}function nn(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",i),Me("load",i);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var v=o[m];if(v!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:tt(i,s,m,v,o,null)}}f&&tt(i,s,"srcSet",o.srcSet,o,null),u&&tt(i,s,"src",o.src,o,null);return;case"input":Me("invalid",i);var A=m=v=f=null,C=null,j=null;for(u in o)if(o.hasOwnProperty(u)){var Y=o[u];if(Y!=null)switch(u){case"name":f=Y;break;case"type":v=Y;break;case"checked":C=Y;break;case"defaultChecked":j=Y;break;case"value":m=Y;break;case"defaultValue":A=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:tt(i,s,u,Y,o,null)}}la(i,m,A,C,j,v,f,!1);return;case"select":Me("invalid",i),u=v=m=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":v=A;break;case"multiple":u=A;default:tt(i,s,f,A,o,null)}s=m,o=v,i.multiple=!!u,s!=null?He(i,!!u,s,!1):o!=null&&He(i,!!u,o,!0);return;case"textarea":Me("invalid",i),m=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(A=o[v],A!=null))switch(v){case"value":u=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:tt(i,s,v,A,o,null)}Wr(i,u,f,m);return;case"option":for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null)&&(C==="selected"?i.selected=u&&typeof u!="function"&&typeof u!="symbol":tt(i,s,C,u,o,null));return;case"dialog":Me("beforetoggle",i),Me("toggle",i),Me("cancel",i),Me("close",i);break;case"iframe":case"object":Me("load",i);break;case"video":case"audio":for(u=0;u<vu.length;u++)Me(vu[u],i);break;case"image":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"embed":case"source":case"link":Me("error",i),Me("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in o)if(o.hasOwnProperty(j)&&(u=o[j],u!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:tt(i,s,j,u,o,null)}return;default:if(zl(s)){for(Y in o)o.hasOwnProperty(Y)&&(u=o[Y],u!==void 0&&bp(i,s,Y,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&tt(i,s,A,u,o,null))}function $I(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,A=null,C=null,j=null,Y=null;for(G in o){var J=o[G];if(o.hasOwnProperty(G)&&J!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":C=J;default:u.hasOwnProperty(G)||tt(i,s,G,null,u,J)}}for(var q in u){var G=u[q];if(J=o[q],u.hasOwnProperty(q)&&(G!=null||J!=null))switch(q){case"type":m=G;break;case"name":f=G;break;case"checked":j=G;break;case"defaultChecked":Y=G;break;case"value":v=G;break;case"defaultValue":A=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:G!==J&&tt(i,s,q,G,u,J)}}Qr(i,v,A,C,j,Y,m,f);return;case"select":G=v=A=q=null;for(m in o)if(C=o[m],o.hasOwnProperty(m)&&C!=null)switch(m){case"value":break;case"multiple":G=C;default:u.hasOwnProperty(m)||tt(i,s,m,null,u,C)}for(f in u)if(m=u[f],C=o[f],u.hasOwnProperty(f)&&(m!=null||C!=null))switch(f){case"value":q=m;break;case"defaultValue":A=m;break;case"multiple":v=m;default:m!==C&&tt(i,s,f,m,u,C)}s=A,o=v,u=G,q!=null?He(i,!!o,q,!1):!!u!=!!o&&(s!=null?He(i,!!o,s,!0):He(i,!!o,o?[]:"",!1));return;case"textarea":G=q=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:tt(i,s,A,null,u,f)}for(v in u)if(f=u[v],m=o[v],u.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":q=f;break;case"defaultValue":G=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&tt(i,s,v,f,u,m)}ua(i,q,G);return;case"option":for(var ce in o)q=o[ce],o.hasOwnProperty(ce)&&q!=null&&!u.hasOwnProperty(ce)&&(ce==="selected"?i.selected=!1:tt(i,s,ce,null,u,q));for(C in u)q=u[C],G=o[C],u.hasOwnProperty(C)&&q!==G&&(q!=null||G!=null)&&(C==="selected"?i.selected=q&&typeof q!="function"&&typeof q!="symbol":tt(i,s,C,q,u,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in o)q=o[_e],o.hasOwnProperty(_e)&&q!=null&&!u.hasOwnProperty(_e)&&tt(i,s,_e,null,u,q);for(j in u)if(q=u[j],G=o[j],u.hasOwnProperty(j)&&q!==G&&(q!=null||G!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,s));break;default:tt(i,s,j,q,u,G)}return;default:if(zl(s)){for(var nt in o)q=o[nt],o.hasOwnProperty(nt)&&q!==void 0&&!u.hasOwnProperty(nt)&&bp(i,s,nt,void 0,u,q);for(Y in u)q=u[Y],G=o[Y],!u.hasOwnProperty(Y)||q===G||q===void 0&&G===void 0||bp(i,s,Y,q,u,G);return}}for(var V in o)q=o[V],o.hasOwnProperty(V)&&q!=null&&!u.hasOwnProperty(V)&&tt(i,s,V,null,u,q);for(J in u)q=u[J],G=o[J],!u.hasOwnProperty(J)||q===G||q==null&&G==null||tt(i,s,J,q,u,G)}function OT(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function XI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,v=f.initiatorType,A=f.duration;if(m&&A&&OT(v)){for(v=0,A=f.responseEnd,u+=1;u<o.length;u++){var C=o[u],j=C.startTime;if(j>A)break;var Y=C.transferSize,J=C.initiatorType;Y&&OT(J)&&(C=C.responseEnd,v+=Y*(C<A?1:(A-j)/(C-j)))}if(--u,s+=8*(m+v)/(f.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Rp=null,Cp=null;function Kh(i){return i.nodeType===9?i:i.ownerDocument}function MT(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xT(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Ip(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Np=null;function JI(){var i=window.event;return i&&i.type==="popstate"?i===Np?!1:(Np=i,!0):(Np=null,!1)}var kT=typeof setTimeout=="function"?setTimeout:void 0,ZI=typeof clearTimeout=="function"?clearTimeout:void 0,PT=typeof Promise=="function"?Promise:void 0,e1=typeof queueMicrotask=="function"?queueMicrotask:typeof PT<"u"?function(i){return PT.resolve(null).then(i).catch(t1)}:kT;function t1(i){setTimeout(function(){throw i})}function Es(i){return i==="head"}function VT(i,s){var o=s,u=0;do{var f=o.nextSibling;if(i.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(f),Fo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Tu(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,Tu(o);for(var m=o.firstChild;m;){var v=m.nextSibling,A=m.nodeName;m[Ji]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=v}}else o==="body"&&Tu(i.ownerDocument.body);o=f}while(o);Fo(s)}function LT(i,s){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function Dp(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Dp(o),aa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function n1(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ji])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(m=i.getAttribute("rel"),m==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(m!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(m=i.getAttribute("src"),(m!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===m)return i}else return i;if(i=ni(i.nextSibling),i===null)break}return null}function i1(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=ni(i.nextSibling),i===null))return null;return i}function UT(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=ni(i.nextSibling),i===null))return null;return i}function Op(i){return i.data==="$?"||i.data==="$~"}function Mp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function r1(i,s){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function ni(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var xp=null;function zT(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(s===0)return ni(i.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}i=i.nextSibling}return null}function BT(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return i;s--}else o!=="/$"&&o!=="/&"||s++}i=i.previousSibling}return null}function FT(i,s,o){switch(s=Kh(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Tu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);aa(i)}var ii=new Map,jT=new Set;function Yh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Er=ae.d;ae.d={f:s1,r:a1,D:o1,C:l1,L:u1,m:c1,X:f1,S:h1,M:d1};function s1(){var i=Er.f(),s=Uh();return i||s}function a1(i){var s=er(i);s!==null&&s.tag===5&&s.type==="form"?sE(s):Er.r(i)}var Uo=typeof document>"u"?null:document;function qT(i,s,o){var u=Uo;if(u&&typeof s=="string"&&s){var f=_t(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),jT.has(f)||(jT.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),nn(s,"link",i),Et(s),u.head.appendChild(s)))}}function o1(i){Er.D(i),qT("dns-prefetch",i,null)}function l1(i,s){Er.C(i,s),qT("preconnect",i,s)}function u1(i,s,o){Er.L(i,s,o);var u=Uo;if(u&&i&&s){var f='link[rel="preload"][as="'+_t(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+_t(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+_t(o.imageSizes)+'"]')):f+='[href="'+_t(i)+'"]';var m=f;switch(s){case"style":m=zo(i);break;case"script":m=Bo(i)}ii.has(m)||(i=T({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),ii.set(m,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(Su(m))||s==="script"&&u.querySelector(Au(m))||(s=u.createElement("link"),nn(s,"link",i),Et(s),u.head.appendChild(s)))}}function c1(i,s){Er.m(i,s);var o=Uo;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+_t(u)+'"][href="'+_t(i)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Bo(i)}if(!ii.has(m)&&(i=T({rel:"modulepreload",href:i},s),ii.set(m,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Au(m)))return}u=o.createElement("link"),nn(u,"link",i),Et(u),o.head.appendChild(u)}}}function h1(i,s,o){Er.S(i,s,o);var u=Uo;if(u&&i){var f=ui(u).hoistableStyles,m=zo(i);s=s||"default";var v=f.get(m);if(!v){var A={loading:0,preload:null};if(v=u.querySelector(Su(m)))A.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":s},o),(o=ii.get(m))&&kp(i,o);var C=v=u.createElement("link");Et(C),nn(C,"link",i),C._p=new Promise(function(j,Y){C.onload=j,C.onerror=Y}),C.addEventListener("load",function(){A.loading|=1}),C.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Qh(v,s,u)}v={type:"stylesheet",instance:v,count:1,state:A},f.set(m,v)}}}function f1(i,s){Er.X(i,s);var o=Uo;if(o&&i){var u=ui(o).hoistableScripts,f=Bo(i),m=u.get(f);m||(m=o.querySelector(Au(f)),m||(i=T({src:i,async:!0},s),(s=ii.get(f))&&Pp(i,s),m=o.createElement("script"),Et(m),nn(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function d1(i,s){Er.M(i,s);var o=Uo;if(o&&i){var u=ui(o).hoistableScripts,f=Bo(i),m=u.get(f);m||(m=o.querySelector(Au(f)),m||(i=T({src:i,async:!0,type:"module"},s),(s=ii.get(f))&&Pp(i,s),m=o.createElement("script"),Et(m),nn(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function HT(i,s,o,u){var f=(f=Ie.current)?Yh(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=zo(o.href),o=ui(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=zo(o.href);var m=ui(f).hoistableStyles,v=m.get(i);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(i,v),(m=f.querySelector(Su(i)))&&!m._p&&(v.instance=m,v.state.loading=5),ii.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ii.set(i,o),m||m1(f,i,o,v.state))),s&&u===null)throw Error(r(528,""));return v}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Bo(o),o=ui(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function zo(i){return'href="'+_t(i)+'"'}function Su(i){return'link[rel="stylesheet"]['+i+"]"}function GT(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function m1(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),nn(s,"link",o),Et(s),i.head.appendChild(s))}function Bo(i){return'[src="'+_t(i)+'"]'}function Au(i){return"script[async]"+i}function KT(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+_t(o.href)+'"]');if(u)return s.instance=u,Et(u),u;var f=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Et(u),nn(u,"style",f),Qh(u,o.precedence,i),s.instance=u;case"stylesheet":f=zo(o.href);var m=i.querySelector(Su(f));if(m)return s.state.loading|=4,s.instance=m,Et(m),m;u=GT(o),(f=ii.get(f))&&kp(u,f),m=(i.ownerDocument||i).createElement("link"),Et(m);var v=m;return v._p=new Promise(function(A,C){v.onload=A,v.onerror=C}),nn(m,"link",u),s.state.loading|=4,Qh(m,o.precedence,i),s.instance=m;case"script":return m=Bo(o.src),(f=i.querySelector(Au(m)))?(s.instance=f,Et(f),f):(u=o,(f=ii.get(m))&&(u=T({},o),Pp(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Et(f),nn(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Qh(u,o.precedence,i));return s.instance}function Qh(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,v=0;v<u.length;v++){var A=u[v];if(A.dataset.precedence===s)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(i,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function kp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Pp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Wh=null;function YT(i,s,o){if(Wh===null){var u=new Map,f=Wh=new Map;f.set(o,u)}else f=Wh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var m=o[f];if(!(m[Ji]||m[gt]||i==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=i+v;var A=u.get(v);A?A.push(m):u.set(v,[m])}}return u}function QT(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function p1(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function WT(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function g1(i,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=zo(u.href),m=s.querySelector(Su(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=$h.bind(i),s.then(i,i)),o.state.loading|=4,o.instance=m,Et(m);return}m=s.ownerDocument||s,u=GT(u),(f=ii.get(f))&&kp(u,f),m=m.createElement("link"),Et(m);var v=m;v._p=new Promise(function(A,C){v.onload=A,v.onerror=C}),nn(m,"link",u),o.instance=m}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=$h.bind(i),s.addEventListener("load",o),s.addEventListener("error",o))}}var Vp=0;function _1(i,s){return i.stylesheets&&i.count===0&&Jh(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&Jh(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4+s);0<i.imgBytes&&Vp===0&&(Vp=62500*XI());var f=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Jh(i,i.stylesheets),i.unsuspend)){var m=i.unsuspend;i.unsuspend=null,m()}},(i.imgBytes>Vp?50:800)+s);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function $h(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jh(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Xh=null;function Jh(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Xh=new Map,s.forEach(y1,i),Xh=null,$h.call(i))}function y1(i,s){if(!(s.state.loading&4)){var o=Xh.get(i);if(o)var u=o.get(null);else{o=new Map,Xh.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=s.instance,v=f.getAttribute("data-precedence"),m=o.get(v)||u,m===u&&o.set(null,f),o.set(v,f),this.count++,u=$h.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var wu={$$typeof:ie,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function v1(i,s,o,u,f,m,v,A,C){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$i(0),this.hiddenUpdates=$i(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function $T(i,s,o,u,f,m,v,A,C,j,Y,J){return i=new v1(i,s,o,v,C,j,Y,J,A),s=1,m===!0&&(s|=24),m=Vn(3,null,null,s),i.current=m,m.stateNode=i,s=pm(),s.refCount++,i.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},vm(m),i}function XT(i){return i?(i=_o,i):_o}function JT(i,s,o,u,f,m){f=XT(f),u.context===null?u.context=f:u.pendingContext=f,u=us(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=cs(i,u,s),o!==null&&(Nn(o,i,s),nu(o,i,s))}function ZT(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function Lp(i,s){ZT(i,s),(i=i.alternate)&&ZT(i,s)}function e0(i){if(i.tag===13||i.tag===31){var s=ya(i,67108864);s!==null&&Nn(s,i,67108864),Lp(i,67108864)}}function t0(i){if(i.tag===13||i.tag===31){var s=Fn();s=Ml(s);var o=ya(i,s);o!==null&&Nn(o,i,s),Lp(i,s)}}var Zh=!0;function E1(i,s,o,u){var f=Q.T;Q.T=null;var m=ae.p;try{ae.p=2,Up(i,s,o,u)}finally{ae.p=m,Q.T=f}}function T1(i,s,o,u){var f=Q.T;Q.T=null;var m=ae.p;try{ae.p=8,Up(i,s,o,u)}finally{ae.p=m,Q.T=f}}function Up(i,s,o,u){if(Zh){var f=zp(u);if(f===null)wp(i,s,u,ef,o),i0(i,u);else if(A1(f,i,s,o,u))u.stopPropagation();else if(i0(i,u),s&4&&-1<S1.indexOf(i)){for(;f!==null;){var m=er(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=li(m.pendingLanes);if(v!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var C=1<<31-_n(v);A.entanglements[1]|=C,v&=~C}Vi(m),(Ye&6)===0&&(Vh=$t()+500,yu(0))}}break;case 31:case 13:A=ya(m,2),A!==null&&Nn(A,m,2),Uh(),Lp(m,2)}if(m=zp(u),m===null&&wp(i,s,u,ef,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else wp(i,s,u,null,o)}}function zp(i){return i=lo(i),Bp(i)}var ef=null;function Bp(i){if(ef=null,i=Zi(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===31){if(i=d(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return ef=i,null}function n0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xc()){case Vt:return 2;case zt:return 8;case Wi:case kc:return 32;case Il:return 268435456;default:return 32}default:return 32}}var Fp=!1,Ts=null,Ss=null,As=null,bu=new Map,Ru=new Map,ws=[],S1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function i0(i,s){switch(i){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":bu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(s.pointerId)}}function Cu(i,s,o,u,f,m){return i===null||i.nativeEvent!==m?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=er(s),s!==null&&e0(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function A1(i,s,o,u,f){switch(s){case"focusin":return Ts=Cu(Ts,i,s,o,u,f),!0;case"dragenter":return Ss=Cu(Ss,i,s,o,u,f),!0;case"mouseover":return As=Cu(As,i,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return bu.set(m,Cu(bu.get(m)||null,i,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Ru.set(m,Cu(Ru.get(m)||null,i,s,o,u,f)),!0}return!1}function r0(i){var s=Zi(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,Vc(i.priority,function(){t0(o)});return}}else if(s===31){if(s=d(o),s!==null){i.blockedOn=s,Vc(i.priority,function(){t0(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function tf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=zp(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);oo=u,o.target.dispatchEvent(u),oo=null}else return s=er(o),s!==null&&e0(s),i.blockedOn=o,!1;s.shift()}return!0}function s0(i,s,o){tf(i)&&o.delete(s)}function w1(){Fp=!1,Ts!==null&&tf(Ts)&&(Ts=null),Ss!==null&&tf(Ss)&&(Ss=null),As!==null&&tf(As)&&(As=null),bu.forEach(s0),Ru.forEach(s0)}function nf(i,s){i.blockedOn===s&&(i.blockedOn=null,Fp||(Fp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,w1)))}var rf=null;function a0(i){rf!==i&&(rf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){rf===i&&(rf=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(Bp(u||o)===null)continue;break}var m=er(o);m!==null&&(i.splice(s,3),s-=3,zm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Fo(i){function s(C){return nf(C,i)}Ts!==null&&nf(Ts,i),Ss!==null&&nf(Ss,i),As!==null&&nf(As,i),bu.forEach(s),Ru.forEach(s);for(var o=0;o<ws.length;o++){var u=ws[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<ws.length&&(o=ws[0],o.blockedOn===null);)r0(o),o.blockedOn===null&&ws.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],v=f[Jt]||null;if(typeof m=="function")v||a0(o);else if(v){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[Jt]||null)A=v.formAction;else if(Bp(f)!==null)continue}else A=v.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),a0(o)}}}function o0(){function i(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function jp(i){this._internalRoot=i}sf.prototype.render=jp.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Fn();JT(o,u,i,s,null,null)},sf.prototype.unmount=jp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;JT(i.current,2,null,i,null,null),Uh(),s[Ci]=null}};function sf(i){this._internalRoot=i}sf.prototype.unstable_scheduleHydration=function(i){if(i){var s=Xi();i={blockedOn:null,target:i,priority:s};for(var o=0;o<ws.length&&s!==0&&s<ws[o].priority;o++);ws.splice(o,0,i),o===0&&r0(i)}};var l0=e.version;if(l0!=="19.2.4")throw Error(r(527,l0,"19.2.4"));ae.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=g(s),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var b1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{Ur=af.inject(b1),on=af}catch{}}return Nu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=pE,m=gE,v=_E;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=$T(i,1,!1,null,null,o,u,null,f,m,v,o0),i[Ci]=s.current,Ap(i),new jp(s)},Nu.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",m=pE,v=gE,A=_E,C=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.formState!==void 0&&(C=o.formState)),s=$T(i,1,!0,s,o??null,u,f,C,m,v,A,o0),s.context=XT(null),o=s.current,u=Fn(),u=Ml(u),f=us(u),f.callback=null,cs(o,f,u),o=u,s.current.lanes=o,Fr(s,o),Vi(s),i[Ci]=s.current,Ap(i),new sf(s)},Nu.version="19.2.4",Nu}var y0;function P1(){if(y0)return Gp.exports;y0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Gp.exports=k1(),Gp.exports}var V1=P1();var v0="popstate";function L1(n={}){function e(r,a){let{pathname:l,search:c,hash:d}=r.location;return Eg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Ju(a)}return z1(e,t,null,n)}function mt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function vi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function U1(){return Math.random().toString(36).substring(2,10)}function E0(n,e){return{usr:n.state,key:n.key,idx:e}}function Eg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?hl(e):e,state:t,key:e&&e.key||r||U1()}}function Ju({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function hl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function z1(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",p=null,g=y();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function y(){return(c.state||{idx:null}).idx}function T(){d="POP";let F=y(),ne=F==null?null:F-g;g=F,p&&p({action:d,location:z.location,delta:ne})}function S(F,ne){d="PUSH";let ee=Eg(z.location,F,ne);g=y()+1;let ie=E0(ee,g),ge=z.createHref(ee);try{c.pushState(ie,"",ge)}catch(Ce){if(Ce instanceof DOMException&&Ce.name==="DataCloneError")throw Ce;a.location.assign(ge)}l&&p&&p({action:d,location:z.location,delta:1})}function I(F,ne){d="REPLACE";let ee=Eg(z.location,F,ne);g=y();let ie=E0(ee,g),ge=z.createHref(ee);c.replaceState(ie,"",ge),l&&p&&p({action:d,location:z.location,delta:0})}function P(F){return B1(F)}let z={get action(){return d},get location(){return n(a,c)},listen(F){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(v0,T),p=F,()=>{a.removeEventListener(v0,T),p=null}},createHref(F){return e(a,F)},createURL:P,encodeLocation(F){let ne=P(F);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:S,replace:I,go(F){return c.go(F)}};return z}function B1(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),mt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Ju(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function UA(n,e,t="/"){return F1(n,e,t,!1)}function F1(n,e,t,r){let a=typeof e=="string"?hl(e):e,l=Dr(a.pathname||"/",t);if(l==null)return null;let c=zA(n);j1(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=Z1(l);d=X1(c[p],g,r)}return d}function zA(n,e=[],t=[],r="",a=!1){let l=(c,d,p=a,g)=>{let y={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&p)return;mt(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let T=br([r,y.relativePath]),S=t.concat(y);c.children&&c.children.length>0&&(mt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),zA(c.children,e,S,T,p)),!(c.path==null&&!c.index)&&e.push({path:T,score:W1(T,c.index),routesMeta:S})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of BA(c.path))l(c,d,!0,p)}),e}function BA(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=BA(r.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function j1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:$1(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var q1=/^:[\w-]+$/,H1=3,G1=2,K1=1,Y1=10,Q1=-2,T0=n=>n==="*";function W1(n,e){let t=n.split("/"),r=t.length;return t.some(T0)&&(r+=Q1),e&&(r+=G1),t.filter(a=>!T0(a)).reduce((a,l)=>a+(q1.test(l)?H1:l===""?K1:Y1),r)}function $1(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function X1(n,e,t=!1){let{routesMeta:r}=n,a={},l="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],g=d===r.length-1,y=l==="/"?e:e.slice(l.length)||"/",T=Nf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),S=p.route;if(!T&&g&&t&&!r[r.length-1].route.index&&(T=Nf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:br([l,T.pathname]),pathnameBase:iN(br([l,T.pathnameBase])),route:S}),T.pathnameBase!=="/"&&(l=br([l,T.pathnameBase]))}return c}function Nf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=J1(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((g,{paramName:y,isOptional:T},S)=>{if(y==="*"){let P=d[S]||"";c=l.slice(0,l.length-P.length).replace(/(.)\/+$/,"$1")}const I=d[S];return T&&!I?g[y]=void 0:g[y]=(I||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function J1(n,e=!1,t=!0){vi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function Z1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Dr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var eN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function tN(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?hl(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=S0(t.substring(1),"/"):l=S0(t,e)):l=e,{pathname:l,search:rN(r),hash:sN(a)}}function S0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Wp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function d_(n){let e=nN(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function m_(n,e,t,r=!1){let a;typeof n=="string"?a=hl(n):(a={...n},mt(!a.pathname||!a.pathname.includes("?"),Wp("?","pathname","search",a)),mt(!a.pathname||!a.pathname.includes("#"),Wp("#","pathname","hash",a)),mt(!a.search||!a.search.includes("#"),Wp("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!r&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),T-=1;a.pathname=S.join("/")}d=T>=0?e[T]:"/"}let p=tN(a,d),g=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}var br=n=>n.join("/").replace(/\/\/+/g,"/"),iN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),rN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,sN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,aN=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function oN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function lN(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var FA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function jA(n,e){let t=n;if(typeof t!="string"||!eN.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,a=!1;if(FA)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=Dr(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:a=!0}catch{vi(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var qA=["POST","PUT","PATCH","DELETE"];new Set(qA);var uN=["GET",...qA];new Set(uN);var fl=H.createContext(null);fl.displayName="DataRouter";var od=H.createContext(null);od.displayName="DataRouterState";var cN=H.createContext(!1),HA=H.createContext({isTransitioning:!1});HA.displayName="ViewTransition";var hN=H.createContext(new Map);hN.displayName="Fetchers";var fN=H.createContext(null);fN.displayName="Await";var Gn=H.createContext(null);Gn.displayName="Navigation";var fc=H.createContext(null);fc.displayName="Location";var Ai=H.createContext({outlet:null,matches:[],isDataRoute:!1});Ai.displayName="Route";var p_=H.createContext(null);p_.displayName="RouteError";var GA="REACT_ROUTER_ERROR",dN="REDIRECT",mN="ROUTE_ERROR_RESPONSE";function pN(n){if(n.startsWith(`${GA}:${dN}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function gN(n){if(n.startsWith(`${GA}:${mN}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new aN(e.status,e.statusText,e.data)}catch{}}function _N(n,{relative:e}={}){mt(dl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=H.useContext(Gn),{hash:a,pathname:l,search:c}=dc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:br([t,l])),r.createHref({pathname:d,search:c,hash:a})}function dl(){return H.useContext(fc)!=null}function Qs(){return mt(dl(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(fc).location}var KA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function YA(n){H.useContext(Gn).static||H.useLayoutEffect(n)}function ml(){let{isDataRoute:n}=H.useContext(Ai);return n?ON():yN()}function yN(){mt(dl(),"useNavigate() may be used only in the context of a <Router> component.");let n=H.useContext(fl),{basename:e,navigator:t}=H.useContext(Gn),{matches:r}=H.useContext(Ai),{pathname:a}=Qs(),l=JSON.stringify(d_(r)),c=H.useRef(!1);return YA(()=>{c.current=!0}),H.useCallback((p,g={})=>{if(vi(c.current,KA),!c.current)return;if(typeof p=="number"){t.go(p);return}let y=m_(p,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:br([e,y.pathname])),(g.replace?t.replace:t.push)(y,g.state,g)},[e,t,l,a,n])}H.createContext(null);function vN(){let{matches:n}=H.useContext(Ai),e=n[n.length-1];return e?e.params:{}}function dc(n,{relative:e}={}){let{matches:t}=H.useContext(Ai),{pathname:r}=Qs(),a=JSON.stringify(d_(t));return H.useMemo(()=>m_(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function EN(n,e){return QA(n,e)}function QA(n,e,t,r,a){mt(dl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=H.useContext(Gn),{matches:c}=H.useContext(Ai),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",y=d?d.pathnameBase:"/",T=d&&d.route;{let ee=T&&T.path||"";$A(g,!T||ee.endsWith("*")||ee.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${ee}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ee}"> to <Route path="${ee==="/"?"*":`${ee}/*`}">.`)}let S=Qs(),I;if(e){let ee=typeof e=="string"?hl(e):e;mt(y==="/"||ee.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${ee.pathname}" was given in the \`location\` prop.`),I=ee}else I=S;let P=I.pathname||"/",z=P;if(y!=="/"){let ee=y.replace(/^\//,"").split("/");z="/"+P.replace(/^\//,"").split("/").slice(ee.length).join("/")}let F=UA(n,{pathname:z});vi(T||F!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),vi(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ne=bN(F&&F.map(ee=>Object.assign({},ee,{params:Object.assign({},p,ee.params),pathname:br([y,l.encodeLocation?l.encodeLocation(ee.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathname]),pathnameBase:ee.pathnameBase==="/"?y:br([y,l.encodeLocation?l.encodeLocation(ee.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathnameBase])})),c,t,r,a);return e&&ne?H.createElement(fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},ne):ne}function TN(){let n=DN(),e=oN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=H.createElement(H.Fragment,null,H.createElement("p",null," Hey developer "),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:l},"ErrorBoundary")," or"," ",H.createElement("code",{style:l},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:a},t):null,c)}var SN=H.createElement(TN,null),WA=class extends H.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=gN(n.digest);t&&(n=t)}let e=n!==void 0?H.createElement(Ai.Provider,{value:this.props.routeContext},H.createElement(p_.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?H.createElement(AN,{error:n},e):e}};WA.contextType=cN;var $p=new WeakMap;function AN({children:n,error:e}){let{basename:t}=H.useContext(Gn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=pN(e.digest);if(r){let a=$p.get(e);if(a)throw a;let l=jA(r.location,t);if(FA&&!$p.get(e))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw $p.set(e,c),c}return H.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function wN({routeContext:n,match:e,children:t}){let r=H.useContext(fl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(Ai.Provider,{value:n},t)}function bN(n,e=[],t=null,r=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let y=l.findIndex(T=>T.route.id&&c?.[T.route.id]!==void 0);mt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,p=-1;if(t)for(let y=0;y<l.length;y++){let T=l[y];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(p=y),T.route.id){let{loaderData:S,errors:I}=t,P=T.route.loader&&!S.hasOwnProperty(T.route.id)&&(!I||I[T.route.id]===void 0);if(T.route.lazy||P){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&r?(y,T)=>{r(y,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:lN(t.matches),errorInfo:T})}:void 0;return l.reduceRight((y,T,S)=>{let I,P=!1,z=null,F=null;t&&(I=c&&T.route.id?c[T.route.id]:void 0,z=T.route.errorElement||SN,d&&(p<0&&S===0?($A("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,F=null):p===S&&(P=!0,F=T.route.hydrateFallbackElement||null)));let ne=e.concat(l.slice(0,S+1)),ee=()=>{let ie;return I?ie=z:P?ie=F:T.route.Component?ie=H.createElement(T.route.Component,null):T.route.element?ie=T.route.element:ie=y,H.createElement(wN,{match:T,routeContext:{outlet:y,matches:ne,isDataRoute:t!=null},children:ie})};return t&&(T.route.ErrorBoundary||T.route.errorElement||S===0)?H.createElement(WA,{location:t.location,revalidation:t.revalidation,component:z,error:I,children:ee(),routeContext:{outlet:null,matches:ne,isDataRoute:!0},onError:g}):ee()},null)}function g_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RN(n){let e=H.useContext(fl);return mt(e,g_(n)),e}function CN(n){let e=H.useContext(od);return mt(e,g_(n)),e}function IN(n){let e=H.useContext(Ai);return mt(e,g_(n)),e}function __(n){let e=IN(n),t=e.matches[e.matches.length-1];return mt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function NN(){return __("useRouteId")}function DN(){let n=H.useContext(p_),e=CN("useRouteError"),t=__("useRouteError");return n!==void 0?n:e.errors?.[t]}function ON(){let{router:n}=RN("useNavigate"),e=__("useNavigate"),t=H.useRef(!1);return YA(()=>{t.current=!0}),H.useCallback(async(a,l={})=>{vi(t.current,KA),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var A0={};function $A(n,e,t){!e&&!A0[n]&&(A0[n]=!0,vi(!1,t))}H.memo(MN);function MN({routes:n,future:e,state:t,onError:r}){return QA(n,void 0,t,r,e)}function XA({to:n,replace:e,state:t,relative:r}){mt(dl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=H.useContext(Gn);vi(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=H.useContext(Ai),{pathname:c}=Qs(),d=ml(),p=m_(n,d_(l),c,r==="path"),g=JSON.stringify(p);return H.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:r})},[d,g,r,e,t]),null}function Pu(n){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xN({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){mt(!dl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),p=H.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[d,a,l,c]);typeof t=="string"&&(t=hl(t));let{pathname:g="/",search:y="",hash:T="",state:S=null,key:I="default"}=t,P=H.useMemo(()=>{let z=Dr(g,d);return z==null?null:{location:{pathname:z,search:y,hash:T,state:S,key:I},navigationType:r}},[d,g,y,T,S,I,r]);return vi(P!=null,`<Router basename="${d}"> is not able to match the URL "${g}${y}${T}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:H.createElement(Gn.Provider,{value:p},H.createElement(fc.Provider,{children:e,value:P}))}function kN({children:n,location:e}){return EN(Tg(n),e)}function Tg(n,e=[]){let t=[];return H.Children.forEach(n,(r,a)=>{if(!H.isValidElement(r))return;let l=[...e,a];if(r.type===H.Fragment){t.push.apply(t,Tg(r.props.children,l));return}mt(r.type===Pu,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Tg(r.props.children,l)),t.push(c)}),t}var gf="get",_f="application/x-www-form-urlencoded";function ld(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function PN(n){return ld(n)&&n.tagName.toLowerCase()==="button"}function VN(n){return ld(n)&&n.tagName.toLowerCase()==="form"}function LN(n){return ld(n)&&n.tagName.toLowerCase()==="input"}function UN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function zN(n,e){return n.button===0&&(!e||e==="_self")&&!UN(n)}var of=null;function BN(){if(of===null)try{new FormData(document.createElement("form"),0),of=!1}catch{of=!0}return of}var FN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xp(n){return n!=null&&!FN.has(n)?(vi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_f}"`),null):n}function jN(n,e){let t,r,a,l,c;if(VN(n)){let d=n.getAttribute("action");r=d?Dr(d,e):null,t=n.getAttribute("method")||gf,a=Xp(n.getAttribute("enctype"))||_f,l=new FormData(n)}else if(PN(n)||LN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(r=p?Dr(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||gf,a=Xp(n.getAttribute("formenctype"))||Xp(d.getAttribute("enctype"))||_f,l=new FormData(d,n),!BN()){let{name:g,type:y,value:T}=n;if(y==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,T)}}else{if(ld(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=gf,r=null,a=_f,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function y_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function qN(n,e,t,r){let a=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${r}`:a.pathname=`${a.pathname}.${r}`:a.pathname==="/"?a.pathname=`_root.${r}`:e&&Dr(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function HN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function KN(n,e,t){let r=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await HN(l,t);return c.links?c.links():[]}return[]}));return $N(r.flat(1).filter(GN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function w0(n,e,t,r,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{let y=r.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function YN(n,e,{includeHydrateFallback:t}={}){return QN(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function QN(n){return[...new Set(n)]}function WN(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function $N(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let l=JSON.stringify(WN(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function JA(){let n=H.useContext(fl);return y_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function XN(){let n=H.useContext(od);return y_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var v_=H.createContext(void 0);v_.displayName="FrameworkContext";function ZA(){let n=H.useContext(v_);return y_(n,"You must render this element inside a <HydratedRouter> element"),n}function JN(n,e){let t=H.useContext(v_),[r,a]=H.useState(!1),[l,c]=H.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:y,onTouchStart:T}=e,S=H.useRef(null);H.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let z=ne=>{ne.forEach(ee=>{c(ee.isIntersecting)})},F=new IntersectionObserver(z,{threshold:.5});return S.current&&F.observe(S.current),()=>{F.disconnect()}}},[n]),H.useEffect(()=>{if(r){let z=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(z)}}},[r]);let I=()=>{a(!0)},P=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:Du(d,I),onBlur:Du(p,P),onMouseEnter:Du(g,I),onMouseLeave:Du(y,P),onTouchStart:Du(T,I)}]:[!1,S,{}]}function Du(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function ZN({page:n,...e}){let{router:t}=JA(),r=H.useMemo(()=>UA(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?H.createElement(tD,{page:n,matches:r,...e}):null}function eD(n){let{manifest:e,routeModules:t}=ZA(),[r,a]=H.useState([]);return H.useEffect(()=>{let l=!1;return KN(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),r}function tD({page:n,matches:e,...t}){let r=Qs(),{future:a,manifest:l,routeModules:c}=ZA(),{basename:d}=JA(),{loaderData:p,matches:g}=XN(),y=H.useMemo(()=>w0(n,e,g,l,r,"data"),[n,e,g,l,r]),T=H.useMemo(()=>w0(n,e,g,l,r,"assets"),[n,e,g,l,r]),S=H.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let z=new Set,F=!1;if(e.forEach(ee=>{let ie=l.routes[ee.route.id];!ie||!ie.hasLoader||(!y.some(ge=>ge.route.id===ee.route.id)&&ee.route.id in p&&c[ee.route.id]?.shouldRevalidate||ie.hasClientLoader?F=!0:z.add(ee.route.id))}),z.size===0)return[];let ne=qN(n,d,a.unstable_trailingSlashAwareDataRequests,"data");return F&&z.size>0&&ne.searchParams.set("_routes",e.filter(ee=>z.has(ee.route.id)).map(ee=>ee.route.id).join(",")),[ne.pathname+ne.search]},[d,a.unstable_trailingSlashAwareDataRequests,p,r,l,y,e,n,c]),I=H.useMemo(()=>YN(T,l),[T,l]),P=eD(T);return H.createElement(H.Fragment,null,S.map(z=>H.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),I.map(z=>H.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),P.map(({key:z,link:F})=>H.createElement("link",{key:z,nonce:t.nonce,...F,crossOrigin:F.crossOrigin??t.crossOrigin})))}function nD(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var iD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{iD&&(window.__reactRouterVersion="7.13.0")}catch{}function rD({basename:n,children:e,unstable_useTransitions:t,window:r}){let a=H.useRef();a.current==null&&(a.current=L1({window:r,v5Compat:!0}));let l=a.current,[c,d]=H.useState({action:l.action,location:l.location}),p=H.useCallback(g=>{t===!1?d(g):H.startTransition(()=>d(g))},[t]);return H.useLayoutEffect(()=>l.listen(p),[l,p]),H.createElement(xN,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var ew=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tw=H.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:y,viewTransition:T,unstable_defaultShouldRevalidate:S,...I},P){let{basename:z,unstable_useTransitions:F}=H.useContext(Gn),ne=typeof g=="string"&&ew.test(g),ee=jA(g,z);g=ee.to;let ie=_N(g,{relative:a}),[ge,Ce,Se]=JN(r,I),D=lD(g,{replace:c,state:d,target:p,preventScrollReset:y,relative:a,viewTransition:T,unstable_defaultShouldRevalidate:S,unstable_useTransitions:F});function b(M){e&&e(M),M.defaultPrevented||D(M)}let R=H.createElement("a",{...I,...Se,href:ee.absoluteURL||ie,onClick:ee.isExternal||l?e:b,ref:nD(P,Ce),target:p,"data-discover":!ne&&t==="render"?"true":void 0});return ge&&!ne?H.createElement(H.Fragment,null,R,H.createElement(ZN,{page:ie})):R});tw.displayName="Link";var sD=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...g},y){let T=dc(c,{relative:g.relative}),S=Qs(),I=H.useContext(od),{navigator:P,basename:z}=H.useContext(Gn),F=I!=null&&dD(T)&&d===!0,ne=P.encodeLocation?P.encodeLocation(T).pathname:T.pathname,ee=S.pathname,ie=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(ee=ee.toLowerCase(),ie=ie?ie.toLowerCase():null,ne=ne.toLowerCase()),ie&&z&&(ie=Dr(ie,z)||ie);const ge=ne!=="/"&&ne.endsWith("/")?ne.length-1:ne.length;let Ce=ee===ne||!a&&ee.startsWith(ne)&&ee.charAt(ge)==="/",Se=ie!=null&&(ie===ne||!a&&ie.startsWith(ne)&&ie.charAt(ne.length)==="/"),D={isActive:Ce,isPending:Se,isTransitioning:F},b=Ce?e:void 0,R;typeof r=="function"?R=r(D):R=[r,Ce?"active":null,Se?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(D):l;return H.createElement(tw,{...g,"aria-current":b,className:R,ref:y,style:M,to:c,viewTransition:d},typeof p=="function"?p(D):p)});sD.displayName="NavLink";var aD=H.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=gf,action:d,onSubmit:p,relative:g,preventScrollReset:y,viewTransition:T,unstable_defaultShouldRevalidate:S,...I},P)=>{let{unstable_useTransitions:z}=H.useContext(Gn),F=hD(),ne=fD(d,{relative:g}),ee=c.toLowerCase()==="get"?"get":"post",ie=typeof d=="string"&&ew.test(d),ge=Ce=>{if(p&&p(Ce),Ce.defaultPrevented)return;Ce.preventDefault();let Se=Ce.nativeEvent.submitter,D=Se?.getAttribute("formmethod")||c,b=()=>F(Se||Ce.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:a,state:l,relative:g,preventScrollReset:y,viewTransition:T,unstable_defaultShouldRevalidate:S});z&&t!==!1?H.startTransition(()=>b()):b()};return H.createElement("form",{ref:P,method:ee,action:ne,onSubmit:r?p:ge,...I,"data-discover":!ie&&n==="render"?"true":void 0})});aD.displayName="Form";function oD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nw(n){let e=H.useContext(fl);return mt(e,oD(n)),e}function lD(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=ml(),y=Qs(),T=dc(n,{relative:l});return H.useCallback(S=>{if(zN(S,e)){S.preventDefault();let I=t!==void 0?t:Ju(y)===Ju(T),P=()=>g(n,{replace:I,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?H.startTransition(()=>P()):P()}},[y,g,T,t,r,e,n,a,l,c,d,p])}var uD=0,cD=()=>`__${String(++uD)}__`;function hD(){let{router:n}=nw("useSubmit"),{basename:e}=H.useContext(Gn),t=NN(),r=n.fetch,a=n.navigate;return H.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:y,body:T}=jN(l,e);if(c.navigate===!1){let S=c.fetcherKey||cD();await r(S,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:T,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await a(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:T,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,a,e,t])}function fD(n,{relative:e}={}){let{basename:t}=H.useContext(Gn),r=H.useContext(Ai);mt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...dc(n||".",{relative:e})},c=Qs();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(y=>y==="")){d.delete("index"),p.filter(T=>T).forEach(T=>d.append("index",T));let y=d.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:br([t,l.pathname])),Ju(l)}function dD(n,{relative:e}={}){let t=H.useContext(HA);mt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=nw("useViewTransitionState"),a=dc(n,{relative:e});if(!t.isTransitioning)return!1;let l=Dr(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Dr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Nf(a.pathname,c)!=null||Nf(a.pathname,l)!=null}const mD=()=>{};var b0={};const iw={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const oe=function(n,e){if(!n)throw pl(e)},pl=function(n){return new Error("Firebase Database ("+iw.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};const rw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},pD=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},E_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,p=a+2<n.length,g=p?n[a+2]:0,y=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,I=g&63;p||(I=64,c||(S=64)),r.push(t[y],t[T],t[S],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const T=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||T==null)throw new gD;const S=l<<2|d>>4;if(r.push(S),g!==64){const I=d<<4&240|g>>2;if(r.push(I),T!==64){const P=g<<6&192|T;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class gD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sw=function(n){const e=rw(n);return E_.encodeByteArray(e,!0)},Df=function(n){return sw(n).replace(/\./g,"")},Of=function(n){try{return E_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _D(n){return aw(void 0,n)}function aw(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!yD(t)||(n[t]=aw(n[t],e[t]));return n}function yD(n){return n!=="__proto__"}function vD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ED=()=>vD().__FIREBASE_DEFAULTS__,TD=()=>{if(typeof process>"u"||typeof b0>"u")return;const n=b0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},SD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Of(n[1]);return e&&JSON.parse(e)},ud=()=>{try{return mD()||ED()||TD()||SD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ow=n=>{var e,t;return(t=(e=ud())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},lw=n=>{const e=ow(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},uw=()=>{var n;return(n=ud())===null||n===void 0?void 0:n.config},cw=n=>{var e;return(e=ud())===null||e===void 0?void 0:e[`_${n}`]};class T_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Ws(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function S_(n){return(await fetch(n,{credentials:"include"})).ok}function hw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Df(JSON.stringify(t)),Df(JSON.stringify(c)),""].join(".")}const ju={};function AD(){const n={prod:[],emulator:[]};for(const e of Object.keys(ju))ju[e]?n.emulator.push(e):n.prod.push(e);return n}function wD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let R0=!1;function A_(n,e){if(typeof window>"u"||typeof document>"u"||!Ws(window.location.host)||ju[n]===e||ju[n]||R0)return;ju[n]=e;function t(S){return`__firebase__banner__${S}`}const r="__firebase__banner",l=AD().prod.length>0;function c(){const S=document.getElementById(r);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{R0=!0,c()},S}function y(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=wD(r),I=t("text"),P=document.getElementById(I)||document.createElement("span"),z=t("learnmore"),F=document.getElementById(z)||document.createElement("a"),ne=t("preprendIcon"),ee=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ie=S.element;d(ie),y(F,z);const ge=g();p(ee,ne),ie.append(ee,P,F,ge),document.body.appendChild(ie)}l?(P.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function bD(){var n;const e=(n=ud())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function fw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ID(){const n=gn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ND(){return iw.NODE_ADMIN===!0}function DD(){return!bD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OD(){try{return typeof indexedDB=="object"}catch{return!1}}function MD(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}const xD="FirebaseError";class Vr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=xD,Object.setPrototypeOf(this,Vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?kD(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Vr(a,d,r)}}function kD(n,e){return n.replace(PD,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const PD=/\{\$([^}]+)}/g;function Zu(n){return JSON.parse(n)}function rn(n){return JSON.stringify(n)}const dw=function(n){let e={},t={},r={},a="";try{const l=n.split(".");e=Zu(Of(l[0])||""),t=Zu(Of(l[1])||""),a=l[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:a}},VD=function(n){const e=dw(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},LD=function(n){const e=dw(n).claims;return typeof e=="object"&&e.admin===!0};function Lr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function il(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Sg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Mf(n,e,t){const r={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=e.call(t,n[a],a,n));return r}function Us(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(C0(l)&&C0(c)){if(!Us(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function C0(n){return n!==null&&typeof n=="object"}function gl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Lu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class UD{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let T=0;T<16;T++)r[T]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let T=0;T<16;T++)r[T]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let T=16;T<80;T++){const S=r[T-3]^r[T-8]^r[T-14]^r[T-16];r[T]=(S<<1|S>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],c=this.chain_[2],d=this.chain_[3],p=this.chain_[4],g,y;for(let T=0;T<80;T++){T<40?T<20?(g=d^l&(c^d),y=1518500249):(g=l^c^d,y=1859775393):T<60?(g=l&c|d&(l|c),y=2400959708):(g=l^c^d,y=3395469782);const S=(a<<5|a>>>27)+g+p+y+r[T]&4294967295;p=d,d=c,c=(l<<30|l>>>2)&4294967295,l=a,a=S}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let a=0;const l=this.buf_;let c=this.inbuf_;for(;a<t;){if(c===0)for(;a<=r;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(l[c]=e.charCodeAt(a),++c,++a,c===this.blockSize){this.compress_(l),c=0;break}}else for(;a<t;)if(l[c]=e[a],++c,++a,c===this.blockSize){this.compress_(l),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)e[r]=this.chain_[a]>>l&255,++r;return e}}function zD(n,e){const t=new BD(n,e);return t.subscribe.bind(t)}class BD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");FD(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Jp),a.error===void 0&&(a.error=Jp),a.complete===void 0&&(a.complete=Jp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jp(){}function jD(n,e){return`${n} failed: ${e} argument `}const qD=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);if(a>=55296&&a<=56319){const l=a-55296;r++,oe(r<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(r)-56320;a=65536+(l<<10)+c}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},cd=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function xt(n){return n&&n._delegate?n._delegate:n}class zs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ma="[DEFAULT]";class HD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new T_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),a=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KD(e))try{this.getOrInitializeService({instanceIdentifier:Ma})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ma){return this.instances.has(e)}getOptions(e=Ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ma){return this.component?this.component.multipleInstances?e:Ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GD(n){return n===Ma?void 0:n}function KD(n){return n.instantiationMode==="EAGER"}class YD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new HD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(xe||(xe={}));const QD={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},WD=xe.INFO,$D={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},XD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=$D[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hd{constructor(e){this.name=e,this._logLevel=WD,this._logHandler=XD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const JD=(n,e)=>e.some(t=>n instanceof t);let I0,N0;function ZD(){return I0||(I0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eO(){return N0||(N0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mw=new WeakMap,Ag=new WeakMap,pw=new WeakMap,Zp=new WeakMap,b_=new WeakMap;function tO(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ms(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&mw.set(t,n)}).catch(()=>{}),b_.set(e,n),e}function nO(n){if(Ag.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ag.set(n,e)}let wg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ag.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ms(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function iO(n){wg=n(wg)}function rO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(eg(this),e,...t);return pw.set(r,e.sort?e.sort():[e]),Ms(r)}:eO().includes(n)?function(...e){return n.apply(eg(this),e),Ms(mw.get(this))}:function(...e){return Ms(n.apply(eg(this),e))}}function sO(n){return typeof n=="function"?rO(n):(n instanceof IDBTransaction&&nO(n),JD(n,ZD())?new Proxy(n,wg):n)}function Ms(n){if(n instanceof IDBRequest)return tO(n);if(Zp.has(n))return Zp.get(n);const e=sO(n);return e!==n&&(Zp.set(n,e),b_.set(e,n)),e}const eg=n=>b_.get(n);function aO(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=Ms(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Ms(c.result),p.oldVersion,p.newVersion,Ms(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const oO=["get","getKey","getAll","getAllKeys","count"],lO=["put","add","delete","clear"],tg=new Map;function D0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tg.get(e))return tg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=lO.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||oO.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return tg.set(e,l),l}iO(n=>({...n,get:(e,t,r)=>D0(e,t)||n.get(e,t,r),has:(e,t)=>!!D0(e,t)||n.has(e,t)}));class uO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cO(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function cO(n){const e=n.getComponent();return e?.type==="VERSION"}const bg="@firebase/app",O0="0.13.2";const Or=new hd("@firebase/app"),hO="@firebase/app-compat",fO="@firebase/analytics-compat",dO="@firebase/analytics",mO="@firebase/app-check-compat",pO="@firebase/app-check",gO="@firebase/auth",_O="@firebase/auth-compat",yO="@firebase/database",vO="@firebase/data-connect",EO="@firebase/database-compat",TO="@firebase/functions",SO="@firebase/functions-compat",AO="@firebase/installations",wO="@firebase/installations-compat",bO="@firebase/messaging",RO="@firebase/messaging-compat",CO="@firebase/performance",IO="@firebase/performance-compat",NO="@firebase/remote-config",DO="@firebase/remote-config-compat",OO="@firebase/storage",MO="@firebase/storage-compat",xO="@firebase/firestore",kO="@firebase/ai",PO="@firebase/firestore-compat",VO="firebase",LO="11.10.0";const Rg="[DEFAULT]",UO={[bg]:"fire-core",[hO]:"fire-core-compat",[dO]:"fire-analytics",[fO]:"fire-analytics-compat",[pO]:"fire-app-check",[mO]:"fire-app-check-compat",[gO]:"fire-auth",[_O]:"fire-auth-compat",[yO]:"fire-rtdb",[vO]:"fire-data-connect",[EO]:"fire-rtdb-compat",[TO]:"fire-fn",[SO]:"fire-fn-compat",[AO]:"fire-iid",[wO]:"fire-iid-compat",[bO]:"fire-fcm",[RO]:"fire-fcm-compat",[CO]:"fire-perf",[IO]:"fire-perf-compat",[NO]:"fire-rc",[DO]:"fire-rc-compat",[OO]:"fire-gcs",[MO]:"fire-gcs-compat",[xO]:"fire-fst",[PO]:"fire-fst-compat",[kO]:"fire-vertex","fire-js":"fire-js",[VO]:"fire-js-all"};const xf=new Map,zO=new Map,Cg=new Map;function M0(n,e){try{n.container.addComponent(e)}catch(t){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function La(n){const e=n.name;if(Cg.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;Cg.set(e,n);for(const t of xf.values())M0(t,n);for(const t of zO.values())M0(t,n);return!0}function fd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jn(n){return n==null?!1:n.settings!==void 0}const BO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xs=new mc("app","Firebase",BO);class FO{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xs.create("app-deleted",{appName:this._name})}}const Ga=LO;function gw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Rg,automaticDataCollectionEnabled:!0},e),a=r.name;if(typeof a!="string"||!a)throw xs.create("bad-app-name",{appName:String(a)});if(t||(t=uw()),!t)throw xs.create("no-options");const l=xf.get(a);if(l){if(Us(t,l.options)&&Us(r,l.config))return l;throw xs.create("duplicate-app",{appName:a})}const c=new YD(a);for(const p of Cg.values())c.addComponent(p);const d=new FO(t,r,c);return xf.set(a,d),d}function R_(n=Rg){const e=xf.get(n);if(!e&&n===Rg&&uw())return gw();if(!e)throw xs.create("no-app",{appName:n});return e}function zi(n,e,t){var r;let a=(r=UO[n])!==null&&r!==void 0?r:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(d.join(" "));return}La(new zs(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const jO="firebase-heartbeat-database",qO=1,ec="firebase-heartbeat-store";let ng=null;function _w(){return ng||(ng=aO(jO,qO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ec)}catch(t){console.warn(t)}}}}).catch(n=>{throw xs.create("idb-open",{originalErrorMessage:n.message})})),ng}async function HO(n){try{const t=(await _w()).transaction(ec),r=await t.objectStore(ec).get(yw(n));return await t.done,r}catch(e){if(e instanceof Vr)Or.warn(e.message);else{const t=xs.create("idb-get",{originalErrorMessage:e?.message});Or.warn(t.message)}}}async function x0(n,e){try{const r=(await _w()).transaction(ec,"readwrite");await r.objectStore(ec).put(e,yw(n)),await r.done}catch(t){if(t instanceof Vr)Or.warn(t.message);else{const r=xs.create("idb-set",{originalErrorMessage:t?.message});Or.warn(r.message)}}}function yw(n){return`${n.name}!${n.options.appId}`}const GO=1024,KO=30;class YO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new WO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=k0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>KO){const c=$O(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=k0(),{heartbeatsToSend:r,unsentEntries:a}=QO(this._heartbeatsCache.heartbeats),l=Df(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Or.warn(t),""}}}function k0(){return new Date().toISOString().substring(0,10)}function QO(n,e=GO){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),P0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),P0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class WO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OD()?MD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HO(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return x0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return x0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function P0(n){return Df(JSON.stringify({version:2,heartbeats:n})).length}function $O(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function XO(n){La(new zs("platform-logger",e=>new uO(e),"PRIVATE")),La(new zs("heartbeat",e=>new YO(e),"PRIVATE")),zi(bg,O0,n),zi(bg,O0,"esm2017"),zi("fire-js","")}XO("");var JO="firebase",ZO="11.10.0";zi(JO,ZO,"app");function C_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}function vw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const e2=vw,Ew=new mc("auth","Firebase",vw());const kf=new hd("@firebase/auth");function t2(n,...e){kf.logLevel<=xe.WARN&&kf.warn(`Auth (${Ga}): ${n}`,...e)}function yf(n,...e){kf.logLevel<=xe.ERROR&&kf.error(`Auth (${Ga}): ${n}`,...e)}function Ei(n,...e){throw I_(n,...e)}function Bi(n,...e){return I_(n,...e)}function Tw(n,e,t){const r=Object.assign(Object.assign({},e2()),{[e]:t});return new mc("auth","Firebase",r).create(e,{appName:n.name})}function Rr(n){return Tw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function I_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Ew.create(n,...e)}function ye(n,e,...t){if(!n)throw I_(e,...t)}function Sr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw yf(e),new Error(e)}function Mr(n,e){n||Sr(e)}function Ig(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function n2(){return V0()==="http:"||V0()==="https:"}function V0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function i2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(n2()||CD()||"connection"in navigator)?navigator.onLine:!0}function r2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class pc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mr(t>e,"Short delay should be less than long delay!"),this.isMobile=w_()||fw()}get(){return i2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function N_(n,e){Mr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Sw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const s2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const a2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],o2=new pc(3e4,6e4);function $s(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Xs(n,e,t,r,a={}){return Aw(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=gl(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:p},l);return RD()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Ws(n.emulatorConfig.host)&&(g.credentials="include"),Sw.fetch()(await ww(n,n.config.apiHost,t,d),g)})}async function Aw(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},s2),e);try{const a=new u2(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw lf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw lf(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw lf(n,"user-disabled",c);const y=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Tw(n,y,g);Ei(n,y)}}catch(a){if(a instanceof Vr)throw a;Ei(n,"network-request-failed",{message:String(a)})}}async function gc(n,e,t,r,a={}){const l=await Xs(n,e,t,r,a);return"mfaPendingCredential"in l&&Ei(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function ww(n,e,t,r){const a=`${e}${t}?${r}`,l=n,c=l.config.emulator?N_(n.config,a):`${n.config.apiScheme}://${a}`;return a2.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function l2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class u2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Bi(this.auth,"network-request-failed")),o2.get())})}}function lf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Bi(n,e,r);return a.customData._tokenResponse=t,a}function L0(n){return n!==void 0&&n.enterprise!==void 0}class c2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return l2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function h2(n,e){return Xs(n,"GET","/v2/recaptchaConfig",$s(n,e))}async function f2(n,e){return Xs(n,"POST","/v1/accounts:delete",e)}async function Pf(n,e){return Xs(n,"POST","/v1/accounts:lookup",e)}function qu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function d2(n,e=!1){const t=xt(n),r=await t.getIdToken(e),a=D_(r);ye(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:qu(ig(a.auth_time)),issuedAtTime:qu(ig(a.iat)),expirationTime:qu(ig(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function ig(n){return Number(n)*1e3}function D_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return yf("JWT malformed, contained fewer than 3 sections"),null;try{const a=Of(t);return a?JSON.parse(a):(yf("Failed to decode base64 JWT payload"),null)}catch(a){return yf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function U0(n){const e=D_(n);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function tc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Vr&&m2(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function m2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class p2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ng{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vf(n){var e;const t=n.auth,r=await n.getIdToken(),a=await tc(n,Pf(t,{idToken:r}));ye(a?.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?bw(l.providerUserInfo):[],d=_2(n.providerData,c),p=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!d?.length,y=p?g:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Ng(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(n,T)}async function g2(n){const e=xt(n);await Vf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _2(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function bw(n){return n.map(e=>{var{providerId:t}=e,r=C_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function y2(n,e){const t=await Aw(n,{},async()=>{const r=gl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await ww(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:r};return n.emulatorConfig&&Ws(n.emulatorConfig.host)&&(p.credentials="include"),Sw.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function v2(n,e){return Xs(n,"POST","/v2/accounts:revokeToken",$s(n,e))}class $o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):U0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const t=U0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await y2(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new $o;return r&&(ye(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(ye(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(ye(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $o,this.toJSON())}_performRefresh(){return Sr("not implemented")}}function Rs(n,e){ye(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class pi{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,l=C_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new p2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ng(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await tc(this,this.stsTokenManager.getToken(this.auth,e));return ye(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return d2(this,e)}reload(){return g2(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Vf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Rr(this.auth));const e=await this.getIdToken();return await tc(this,f2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,l,c,d,p,g,y;const T=(r=t.displayName)!==null&&r!==void 0?r:void 0,S=(a=t.email)!==null&&a!==void 0?a:void 0,I=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,P=(c=t.photoURL)!==null&&c!==void 0?c:void 0,z=(d=t.tenantId)!==null&&d!==void 0?d:void 0,F=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,ne=(g=t.createdAt)!==null&&g!==void 0?g:void 0,ee=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:ie,emailVerified:ge,isAnonymous:Ce,providerData:Se,stsTokenManager:D}=t;ye(ie&&D,e,"internal-error");const b=$o.fromJSON(this.name,D);ye(typeof ie=="string",e,"internal-error"),Rs(T,e.name),Rs(S,e.name),ye(typeof ge=="boolean",e,"internal-error"),ye(typeof Ce=="boolean",e,"internal-error"),Rs(I,e.name),Rs(P,e.name),Rs(z,e.name),Rs(F,e.name),Rs(ne,e.name),Rs(ee,e.name);const R=new pi({uid:ie,auth:e,email:S,emailVerified:ge,displayName:T,isAnonymous:Ce,photoURL:P,phoneNumber:I,tenantId:z,stsTokenManager:b,createdAt:ne,lastLoginAt:ee});return Se&&Array.isArray(Se)&&(R.providerData=Se.map(M=>Object.assign({},M))),F&&(R._redirectEventId=F),R}static async _fromIdTokenResponse(e,t,r=!1){const a=new $o;a.updateFromServerResponse(t);const l=new pi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Vf(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];ye(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?bw(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new $o;d.updateFromIdToken(r);const p=new pi({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ng(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}const z0=new Map;function Ar(n){Mr(n instanceof Function,"Expected a class definition");let e=z0.get(n);return e?(Mr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,z0.set(n,e),e)}class Rw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Rw.type="NONE";const B0=Rw;function vf(n,e,t){return`firebase:${n}:${e}:${t}`}class Xo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=vf(this.userKey,a.apiKey,l),this.fullPersistenceKey=vf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Pf(this.auth,{idToken:e}).catch(()=>{});return t?pi._fromGetAccountInfoResponse(this.auth,t,e):null}return pi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Xo(Ar(B0),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Ar(B0);const c=vf(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const y=await g._get(c);if(y){let T;if(typeof y=="string"){const S=await Pf(e,{idToken:y}).catch(()=>{});if(!S)break;T=await pi._fromGetAccountInfoResponse(e,S,y)}else T=pi._fromJSON(e,y);g!==l&&(d=T),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Xo(l,e,r):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Xo(l,e,r))}}function F0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Dw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mw(e))return"Blackberry";if(xw(e))return"Webos";if(Iw(e))return"Safari";if((e.includes("chrome/")||Nw(e))&&!e.includes("edge/"))return"Chrome";if(Ow(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Cw(n=gn()){return/firefox\//i.test(n)}function Iw(n=gn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nw(n=gn()){return/crios\//i.test(n)}function Dw(n=gn()){return/iemobile/i.test(n)}function Ow(n=gn()){return/android/i.test(n)}function Mw(n=gn()){return/blackberry/i.test(n)}function xw(n=gn()){return/webos/i.test(n)}function O_(n=gn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function E2(n=gn()){var e;return O_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function T2(){return ID()&&document.documentMode===10}function kw(n=gn()){return O_(n)||Ow(n)||xw(n)||Mw(n)||/windows phone/i.test(n)||Dw(n)}function Pw(n,e=[]){let t;switch(n){case"Browser":t=F0(gn());break;case"Worker":t=`${F0(gn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ga}/${r}`}class S2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function A2(n,e={}){return Xs(n,"GET","/v2/passwordPolicy",$s(n,e))}const w2=6;class b2{constructor(e){var t,r,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:w2,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,l,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class R2{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j0(this),this.idTokenSubscription=new j0(this),this.beforeStateQueue=new S2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ew,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ar(t)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await Xo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Pf(this,{idToken:e}),r=await pi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(jn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(a=p.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=r2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(Rr(this));const t=e?xt(e):null;return t&&ye(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(Rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await A2(this),t=new b2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await v2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ar(e)||this._popupRedirectResolver;ye(t,this,"argument-error"),this.redirectPersistenceManager=await Xo.create(this,[Ar(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&t2(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Ka(n){return xt(n)}class j0{constructor(e){this.auth=e,this.observer=null,this.addObserver=zD(t=>this.observer=t)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let dd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function C2(n){dd=n}function Vw(n){return dd.loadJS(n)}function I2(){return dd.recaptchaEnterpriseScript}function N2(){return dd.gapiScript}function D2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class O2{constructor(){this.enterprise=new M2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class M2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const x2="recaptcha-enterprise",Lw="NO_RECAPTCHA";class k2{constructor(e){this.type=x2,this.auth=Ka(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{h2(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new c2(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function a(l,c,d){const p=window.grecaptcha;L0(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(Lw)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new O2().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!t&&L0(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=I2();p.length!==0&&(p+=d),Vw(p).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function q0(n,e,t,r=!1,a=!1){const l=new k2(n);let c;if(a)c=Lw;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Dg(n,e,t,r,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await q0(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await q0(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(c)})}function P2(n,e){const t=fd(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Us(l,e??{}))return a;Ei(a,"already-initialized")}return t.initialize({options:e})}function V2(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ar);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function L2(n,e,t){const r=Ka(n);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=Uw(e),{host:c,port:d}=U2(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(Us(g,r.config.emulator)&&Us(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Ws(c)?(S_(`${l}//${c}${p}`),A_("Auth",!0)):z2()}function Uw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function U2(n){const e=Uw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:H0(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:H0(c)}}}function H0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function z2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class M_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sr("not implemented")}_getIdTokenResponse(e){return Sr("not implemented")}_linkToIdToken(e,t){return Sr("not implemented")}_getReauthenticationResolver(e){return Sr("not implemented")}}async function B2(n,e){return Xs(n,"POST","/v1/accounts:signUp",e)}async function F2(n,e){return gc(n,"POST","/v1/accounts:signInWithPassword",$s(n,e))}async function j2(n,e){return gc(n,"POST","/v1/accounts:signInWithEmailLink",$s(n,e))}async function q2(n,e){return gc(n,"POST","/v1/accounts:signInWithEmailLink",$s(n,e))}class nc extends M_{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new nc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new nc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dg(e,t,"signInWithPassword",F2);case"emailLink":return j2(e,{email:this._email,oobCode:this._password});default:Ei(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dg(e,r,"signUpPassword",B2);case"emailLink":return q2(e,{idToken:t,email:this._email,oobCode:this._password});default:Ei(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Jo(n,e){return gc(n,"POST","/v1/accounts:signInWithIdp",$s(n,e))}const H2="http://localhost";class Ua extends M_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ua(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ei("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,l=C_(t,["providerId","signInMethod"]);if(!r||!a)return null;const c=new Ua(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Jo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Jo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jo(e,t)}buildRequest(){const e={requestUri:H2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gl(t)}return e}}function G2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function K2(n){const e=Vu(Lu(n)).link,t=e?Vu(Lu(e)).deep_link_id:null,r=Vu(Lu(n)).deep_link_id;return(r?Vu(Lu(r)).link:null)||r||t||e||n}class x_{constructor(e){var t,r,a,l,c,d;const p=Vu(Lu(e)),g=(t=p.apiKey)!==null&&t!==void 0?t:null,y=(r=p.oobCode)!==null&&r!==void 0?r:null,T=G2((a=p.mode)!==null&&a!==void 0?a:null);ye(g&&y&&T,"argument-error"),this.apiKey=g,this.operation=T,this.code=y,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=K2(e);try{return new x_(t)}catch{return null}}}class _l{constructor(){this.providerId=_l.PROVIDER_ID}static credential(e,t){return nc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=x_.parseLink(t);return ye(r,"argument-error"),nc._fromEmailAndCode(e,r.code,r.tenantId)}}_l.PROVIDER_ID="password";_l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class zw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _c extends zw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Cs extends _c{constructor(){super("facebook.com")}static credential(e){return Ua._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cs.credential(e.oauthAccessToken)}catch{return null}}}Cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cs.PROVIDER_ID="facebook.com";class Is extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ua._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Is.credential(t,r)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";class Ns extends _c{constructor(){super("github.com")}static credential(e){return Ua._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ns.credential(e.oauthAccessToken)}catch{return null}}}Ns.GITHUB_SIGN_IN_METHOD="github.com";Ns.PROVIDER_ID="github.com";class Ds extends _c{constructor(){super("twitter.com")}static credential(e,t){return Ua._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ds.credential(t,r)}catch{return null}}}Ds.TWITTER_SIGN_IN_METHOD="twitter.com";Ds.PROVIDER_ID="twitter.com";async function Y2(n,e){return gc(n,"POST","/v1/accounts:signUp",$s(n,e))}class za{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await pi._fromIdTokenResponse(e,r,a),c=G0(r);return new za({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=G0(r);return new za({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function G0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Lf extends Vr{constructor(e,t,r,a){var l;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Lf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Lf(e,t,r,a)}}function Bw(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Lf._fromErrorAndOperation(n,l,e,r):l})}async function Q2(n,e,t=!1){const r=await tc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return za._forOperation(n,"link",r)}async function W2(n,e,t=!1){const{auth:r}=n;if(jn(r.app))return Promise.reject(Rr(r));const a="reauthenticate";try{const l=await tc(n,Bw(r,a,e,n),t);ye(l.idToken,r,"internal-error");const c=D_(l.idToken);ye(c,r,"internal-error");const{sub:d}=c;return ye(n.uid===d,r,"user-mismatch"),za._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Ei(r,"user-mismatch"),l}}async function Fw(n,e,t=!1){if(jn(n.app))return Promise.reject(Rr(n));const r="signIn",a=await Bw(n,r,e),l=await za._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function $2(n,e){return Fw(Ka(n),e)}async function jw(n){const e=Ka(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function X2(n,e,t){if(jn(n.app))return Promise.reject(Rr(n));const r=Ka(n),c=await Dg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Y2).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&jw(n),p}),d=await za._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function J2(n,e,t){return jn(n.app)?Promise.reject(Rr(n)):$2(xt(n),_l.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jw(n),r})}function Z2(n,e,t,r){return xt(n).onIdTokenChanged(e,t,r)}function eM(n,e,t){return xt(n).beforeAuthStateChanged(e,t)}function tM(n,e,t,r){return xt(n).onAuthStateChanged(e,t,r)}function nM(n){return xt(n).signOut()}const Uf="__sak";class qw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uf,"1"),this.storage.removeItem(Uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const iM=1e3,rM=10;class Hw extends qw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);T2()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,rM):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},iM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hw.type="LOCAL";const sM=Hw;class Gw extends qw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Gw.type="SESSION";const Kw=Gw;function aM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class md{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new md(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await aM(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}md.receivers=[];function k_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class oM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=k_("",20);a.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(T){const S=T;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(y),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Fi(){return window}function lM(n){Fi().location.href=n}function Yw(){return typeof Fi().WorkerGlobalScope<"u"&&typeof Fi().importScripts=="function"}async function uM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cM(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function hM(){return Yw()?self:null}const Qw="firebaseLocalStorageDb",fM=1,zf="firebaseLocalStorage",Ww="fbase_key";class yc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function pd(n,e){return n.transaction([zf],e?"readwrite":"readonly").objectStore(zf)}function dM(){const n=indexedDB.deleteDatabase(Qw);return new yc(n).toPromise()}function Og(){const n=indexedDB.open(Qw,fM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(zf,{keyPath:Ww})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(zf)?e(r):(r.close(),await dM(),e(await Og()))})})}async function K0(n,e,t){const r=pd(n,!0).put({[Ww]:e,value:t});return new yc(r).toPromise()}async function mM(n,e){const t=pd(n,!1).get(e),r=await new yc(t).toPromise();return r===void 0?null:r.value}function Y0(n,e){const t=pd(n,!0).delete(e);return new yc(t).toPromise()}const pM=800,gM=3;class $w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Og(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>gM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=md._getInstance(hM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await uM(),!this.activeServiceWorker)return;this.sender=new oM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Og();return await K0(e,Uf,"1"),await Y0(e,Uf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>K0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>mM(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Y0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=pd(a,!1).getAll();return new yc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$w.type="LOCAL";const _M=$w;new pc(3e4,6e4);function yM(n,e){return e?Ar(e):(ye(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class P_ extends M_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vM(n){return Fw(n.auth,new P_(n),n.bypassAuthState)}function EM(n){const{auth:e,user:t}=n;return ye(t,e,"internal-error"),W2(t,new P_(n),n.bypassAuthState)}async function TM(n){const{auth:e,user:t}=n;return ye(t,e,"internal-error"),Q2(t,new P_(n),n.bypassAuthState)}class Xw{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vM;case"linkViaPopup":case"linkViaRedirect":return TM;case"reauthViaPopup":case"reauthViaRedirect":return EM;default:Ei(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const SM=new pc(2e3,1e4);class Yo extends Xw{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Yo.currentPopupAction&&Yo.currentPopupAction.cancel(),Yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=k_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,SM.get())};e()}}Yo.currentPopupAction=null;const AM="pendingRedirect",Ef=new Map;class wM extends Xw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ef.get(this.auth._key());if(!e){try{const r=await bM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ef.set(this.auth._key(),e)}return this.bypassAuthState||Ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bM(n,e){const t=IM(e),r=CM(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function RM(n,e){Ef.set(n._key(),e)}function CM(n){return Ar(n._redirectPersistence)}function IM(n){return vf(AM,n.config.apiKey,n.name)}async function NM(n,e,t=!1){if(jn(n.app))return Promise.reject(Rr(n));const r=Ka(n),a=yM(r,e),c=await new wM(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const DM=600*1e3;class OM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Jw(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Bi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Q0(e))}saveEventToCache(e){this.cachedEventUids.add(Q0(e)),this.lastProcessedEventTime=Date.now()}}function Q0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Jw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function MM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jw(n);default:return!1}}async function xM(n,e={}){return Xs(n,"GET","/v1/projects",e)}const kM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PM=/^https?/;async function VM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await xM(n);for(const t of e)try{if(LM(t))return}catch{}Ei(n,"unauthorized-domain")}function LM(n){const e=Ig(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!PM.test(t))return!1;if(kM.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const UM=new pc(3e4,6e4);function W0(){const n=Fi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function zM(n){return new Promise((e,t)=>{var r,a,l;function c(){W0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W0(),t(Bi(n,"network-request-failed"))},timeout:UM.get()})}if(!((a=(r=Fi().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Fi().gapi)===null||l===void 0)&&l.load)c();else{const d=D2("iframefcb");return Fi()[d]=()=>{gapi.load?c():t(Bi(n,"network-request-failed"))},Vw(`${N2()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function BM(n){return Tf=Tf||zM(n),Tf}const FM=new pc(5e3,15e3),jM="__/auth/iframe",qM="emulator/auth/iframe",HM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KM(n){const e=n.config;ye(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?N_(e,qM):`https://${n.config.authDomain}/${jM}`,r={apiKey:e.apiKey,appName:n.name,v:Ga},a=GM.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${gl(r).slice(1)}`}async function YM(n){const e=await BM(n),t=Fi().gapi;return ye(t,n,"internal-error"),e.open({where:document.body,url:KM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HM,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Bi(n,"network-request-failed"),d=Fi().setTimeout(()=>{l(c)},FM.get());function p(){Fi().clearTimeout(d),a(r)}r.ping(p).then(p,()=>{l(c)})}))}const QM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WM=500,$M=600,XM="_blank",JM="http://localhost";class $0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZM(n,e,t,r=WM,a=$M){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},QM),{width:r.toString(),height:a.toString(),top:l,left:c}),g=gn().toLowerCase();t&&(d=Nw(g)?XM:t),Cw(g)&&(e=e||JM,p.scrollbars="yes");const y=Object.entries(p).reduce((S,[I,P])=>`${S}${I}=${P},`,"");if(E2(g)&&d!=="_self")return ex(e||"",d),new $0(null);const T=window.open(e||"",d,y);ye(T,n,"popup-blocked");try{T.focus()}catch{}return new $0(T)}function ex(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const tx="__/auth/handler",nx="emulator/auth/handler",ix=encodeURIComponent("fac");async function X0(n,e,t,r,a,l){ye(n.config.authDomain,n,"auth-domain-config-required"),ye(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ga,eventId:a};if(e instanceof zw){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",Sg(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,T]of Object.entries({}))c[y]=T}if(e instanceof _c){const y=e.getScopes().filter(T=>T!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const p=await n._getAppCheckToken(),g=p?`#${ix}=${encodeURIComponent(p)}`:"";return`${rx(n)}?${gl(d).slice(1)}${g}`}function rx({config:n}){return n.emulator?N_(n,nx):`https://${n.authDomain}/${tx}`}const rg="webStorageSupport";class sx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kw,this._completeRedirectFn=NM,this._overrideRedirectResult=RM}async _openPopup(e,t,r,a){var l;Mr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await X0(e,t,r,Ig(),a);return ZM(e,c,k_())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await X0(e,t,r,Ig(),a);return lM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Mr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await YM(e),r=new OM(e);return t.register("authEvent",a=>(ye(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rg,{type:rg},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[rg];c!==void 0&&t(!!c),Ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=VM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kw()||Iw()||O_()}}const ax=sx;var J0="@firebase/auth",Z0="1.10.8";class ox{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function lx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ux(n){La(new zs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;ye(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pw(n)},g=new R2(r,a,l,p);return V2(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),La(new zs("auth-internal",e=>{const t=Ka(e.getProvider("auth").getImmediate());return(r=>new ox(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),zi(J0,Z0,lx(n)),zi(J0,Z0,"esm2017")}const cx=300,hx=cw("authIdTokenMaxAge")||cx;let eS=null;const fx=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>hx)return;const a=t?.token;eS!==a&&(eS=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function dx(n=R_()){const e=fd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=P2(n,{popupRedirectResolver:ax,persistence:[_M,sM,Kw]}),r=cw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=fx(l.toString());eM(t,c,()=>c(t.currentUser)),Z2(t,d=>c(d))}}const a=ow("auth");return a&&L2(t,`http://${a}`),t}function mx(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}C2({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=Bi("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",mx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ux("Browser");var tS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ks,Zw;(function(){var n;function e(D,b){function R(){}R.prototype=b.prototype,D.D=b.prototype,D.prototype=new R,D.prototype.constructor=D,D.C=function(M,k,L){for(var N=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)N[Pt-2]=arguments[Pt];return b.prototype[k].apply(M,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,b,R){R||(R=0);var M=Array(16);if(typeof b=="string")for(var k=0;16>k;++k)M[k]=b.charCodeAt(R++)|b.charCodeAt(R++)<<8|b.charCodeAt(R++)<<16|b.charCodeAt(R++)<<24;else for(k=0;16>k;++k)M[k]=b[R++]|b[R++]<<8|b[R++]<<16|b[R++]<<24;b=D.g[0],R=D.g[1],k=D.g[2];var L=D.g[3],N=b+(L^R&(k^L))+M[0]+3614090360&4294967295;b=R+(N<<7&4294967295|N>>>25),N=L+(k^b&(R^k))+M[1]+3905402710&4294967295,L=b+(N<<12&4294967295|N>>>20),N=k+(R^L&(b^R))+M[2]+606105819&4294967295,k=L+(N<<17&4294967295|N>>>15),N=R+(b^k&(L^b))+M[3]+3250441966&4294967295,R=k+(N<<22&4294967295|N>>>10),N=b+(L^R&(k^L))+M[4]+4118548399&4294967295,b=R+(N<<7&4294967295|N>>>25),N=L+(k^b&(R^k))+M[5]+1200080426&4294967295,L=b+(N<<12&4294967295|N>>>20),N=k+(R^L&(b^R))+M[6]+2821735955&4294967295,k=L+(N<<17&4294967295|N>>>15),N=R+(b^k&(L^b))+M[7]+4249261313&4294967295,R=k+(N<<22&4294967295|N>>>10),N=b+(L^R&(k^L))+M[8]+1770035416&4294967295,b=R+(N<<7&4294967295|N>>>25),N=L+(k^b&(R^k))+M[9]+2336552879&4294967295,L=b+(N<<12&4294967295|N>>>20),N=k+(R^L&(b^R))+M[10]+4294925233&4294967295,k=L+(N<<17&4294967295|N>>>15),N=R+(b^k&(L^b))+M[11]+2304563134&4294967295,R=k+(N<<22&4294967295|N>>>10),N=b+(L^R&(k^L))+M[12]+1804603682&4294967295,b=R+(N<<7&4294967295|N>>>25),N=L+(k^b&(R^k))+M[13]+4254626195&4294967295,L=b+(N<<12&4294967295|N>>>20),N=k+(R^L&(b^R))+M[14]+2792965006&4294967295,k=L+(N<<17&4294967295|N>>>15),N=R+(b^k&(L^b))+M[15]+1236535329&4294967295,R=k+(N<<22&4294967295|N>>>10),N=b+(k^L&(R^k))+M[1]+4129170786&4294967295,b=R+(N<<5&4294967295|N>>>27),N=L+(R^k&(b^R))+M[6]+3225465664&4294967295,L=b+(N<<9&4294967295|N>>>23),N=k+(b^R&(L^b))+M[11]+643717713&4294967295,k=L+(N<<14&4294967295|N>>>18),N=R+(L^b&(k^L))+M[0]+3921069994&4294967295,R=k+(N<<20&4294967295|N>>>12),N=b+(k^L&(R^k))+M[5]+3593408605&4294967295,b=R+(N<<5&4294967295|N>>>27),N=L+(R^k&(b^R))+M[10]+38016083&4294967295,L=b+(N<<9&4294967295|N>>>23),N=k+(b^R&(L^b))+M[15]+3634488961&4294967295,k=L+(N<<14&4294967295|N>>>18),N=R+(L^b&(k^L))+M[4]+3889429448&4294967295,R=k+(N<<20&4294967295|N>>>12),N=b+(k^L&(R^k))+M[9]+568446438&4294967295,b=R+(N<<5&4294967295|N>>>27),N=L+(R^k&(b^R))+M[14]+3275163606&4294967295,L=b+(N<<9&4294967295|N>>>23),N=k+(b^R&(L^b))+M[3]+4107603335&4294967295,k=L+(N<<14&4294967295|N>>>18),N=R+(L^b&(k^L))+M[8]+1163531501&4294967295,R=k+(N<<20&4294967295|N>>>12),N=b+(k^L&(R^k))+M[13]+2850285829&4294967295,b=R+(N<<5&4294967295|N>>>27),N=L+(R^k&(b^R))+M[2]+4243563512&4294967295,L=b+(N<<9&4294967295|N>>>23),N=k+(b^R&(L^b))+M[7]+1735328473&4294967295,k=L+(N<<14&4294967295|N>>>18),N=R+(L^b&(k^L))+M[12]+2368359562&4294967295,R=k+(N<<20&4294967295|N>>>12),N=b+(R^k^L)+M[5]+4294588738&4294967295,b=R+(N<<4&4294967295|N>>>28),N=L+(b^R^k)+M[8]+2272392833&4294967295,L=b+(N<<11&4294967295|N>>>21),N=k+(L^b^R)+M[11]+1839030562&4294967295,k=L+(N<<16&4294967295|N>>>16),N=R+(k^L^b)+M[14]+4259657740&4294967295,R=k+(N<<23&4294967295|N>>>9),N=b+(R^k^L)+M[1]+2763975236&4294967295,b=R+(N<<4&4294967295|N>>>28),N=L+(b^R^k)+M[4]+1272893353&4294967295,L=b+(N<<11&4294967295|N>>>21),N=k+(L^b^R)+M[7]+4139469664&4294967295,k=L+(N<<16&4294967295|N>>>16),N=R+(k^L^b)+M[10]+3200236656&4294967295,R=k+(N<<23&4294967295|N>>>9),N=b+(R^k^L)+M[13]+681279174&4294967295,b=R+(N<<4&4294967295|N>>>28),N=L+(b^R^k)+M[0]+3936430074&4294967295,L=b+(N<<11&4294967295|N>>>21),N=k+(L^b^R)+M[3]+3572445317&4294967295,k=L+(N<<16&4294967295|N>>>16),N=R+(k^L^b)+M[6]+76029189&4294967295,R=k+(N<<23&4294967295|N>>>9),N=b+(R^k^L)+M[9]+3654602809&4294967295,b=R+(N<<4&4294967295|N>>>28),N=L+(b^R^k)+M[12]+3873151461&4294967295,L=b+(N<<11&4294967295|N>>>21),N=k+(L^b^R)+M[15]+530742520&4294967295,k=L+(N<<16&4294967295|N>>>16),N=R+(k^L^b)+M[2]+3299628645&4294967295,R=k+(N<<23&4294967295|N>>>9),N=b+(k^(R|~L))+M[0]+4096336452&4294967295,b=R+(N<<6&4294967295|N>>>26),N=L+(R^(b|~k))+M[7]+1126891415&4294967295,L=b+(N<<10&4294967295|N>>>22),N=k+(b^(L|~R))+M[14]+2878612391&4294967295,k=L+(N<<15&4294967295|N>>>17),N=R+(L^(k|~b))+M[5]+4237533241&4294967295,R=k+(N<<21&4294967295|N>>>11),N=b+(k^(R|~L))+M[12]+1700485571&4294967295,b=R+(N<<6&4294967295|N>>>26),N=L+(R^(b|~k))+M[3]+2399980690&4294967295,L=b+(N<<10&4294967295|N>>>22),N=k+(b^(L|~R))+M[10]+4293915773&4294967295,k=L+(N<<15&4294967295|N>>>17),N=R+(L^(k|~b))+M[1]+2240044497&4294967295,R=k+(N<<21&4294967295|N>>>11),N=b+(k^(R|~L))+M[8]+1873313359&4294967295,b=R+(N<<6&4294967295|N>>>26),N=L+(R^(b|~k))+M[15]+4264355552&4294967295,L=b+(N<<10&4294967295|N>>>22),N=k+(b^(L|~R))+M[6]+2734768916&4294967295,k=L+(N<<15&4294967295|N>>>17),N=R+(L^(k|~b))+M[13]+1309151649&4294967295,R=k+(N<<21&4294967295|N>>>11),N=b+(k^(R|~L))+M[4]+4149444226&4294967295,b=R+(N<<6&4294967295|N>>>26),N=L+(R^(b|~k))+M[11]+3174756917&4294967295,L=b+(N<<10&4294967295|N>>>22),N=k+(b^(L|~R))+M[2]+718787259&4294967295,k=L+(N<<15&4294967295|N>>>17),N=R+(L^(k|~b))+M[9]+3951481745&4294967295,D.g[0]=D.g[0]+b&4294967295,D.g[1]=D.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+L&4294967295}r.prototype.u=function(D,b){b===void 0&&(b=D.length);for(var R=b-this.blockSize,M=this.B,k=this.h,L=0;L<b;){if(k==0)for(;L<=R;)a(this,D,L),L+=this.blockSize;if(typeof D=="string"){for(;L<b;)if(M[k++]=D.charCodeAt(L++),k==this.blockSize){a(this,M),k=0;break}}else for(;L<b;)if(M[k++]=D[L++],k==this.blockSize){a(this,M),k=0;break}}this.h=k,this.o+=b},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var b=1;b<D.length-8;++b)D[b]=0;var R=8*this.o;for(b=D.length-8;b<D.length;++b)D[b]=R&255,R/=256;for(this.u(D),D=Array(16),b=R=0;4>b;++b)for(var M=0;32>M;M+=8)D[R++]=this.g[b]>>>M&255;return D};function l(D,b){var R=d;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=b(D)}function c(D,b){this.h=b;for(var R=[],M=!0,k=D.length-1;0<=k;k--){var L=D[k]|0;M&&L==b||(R[k]=L,M=!1)}this.g=R}var d={};function p(D){return-128<=D&&128>D?l(D,function(b){return new c([b|0],0>b?-1:0)}):new c([D|0],0>D?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return T;if(0>D)return F(g(-D));for(var b=[],R=1,M=0;D>=R;M++)b[M]=D/R|0,R*=4294967296;return new c(b,0)}function y(D,b){if(D.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(D.charAt(0)=="-")return F(y(D.substring(1),b));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(b,8)),M=T,k=0;k<D.length;k+=8){var L=Math.min(8,D.length-k),N=parseInt(D.substring(k,k+L),b);8>L?(L=g(Math.pow(b,L)),M=M.j(L).add(g(N))):(M=M.j(R),M=M.add(g(N)))}return M}var T=p(0),S=p(1),I=p(16777216);n=c.prototype,n.m=function(){if(z(this))return-F(this).m();for(var D=0,b=1,R=0;R<this.g.length;R++){var M=this.i(R);D+=(0<=M?M:4294967296+M)*b,b*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(P(this))return"0";if(z(this))return"-"+F(this).toString(D);for(var b=g(Math.pow(D,6)),R=this,M="";;){var k=ge(R,b).g;R=ne(R,k.j(b));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(D);if(R=k,P(R))return L+M;for(;6>L.length;)L="0"+L;M=L+M}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function P(D){if(D.h!=0)return!1;for(var b=0;b<D.g.length;b++)if(D.g[b]!=0)return!1;return!0}function z(D){return D.h==-1}n.l=function(D){return D=ne(this,D),z(D)?-1:P(D)?0:1};function F(D){for(var b=D.g.length,R=[],M=0;M<b;M++)R[M]=~D.g[M];return new c(R,~D.h).add(S)}n.abs=function(){return z(this)?F(this):this},n.add=function(D){for(var b=Math.max(this.g.length,D.g.length),R=[],M=0,k=0;k<=b;k++){var L=M+(this.i(k)&65535)+(D.i(k)&65535),N=(L>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);M=N>>>16,L&=65535,N&=65535,R[k]=N<<16|L}return new c(R,R[R.length-1]&-2147483648?-1:0)};function ne(D,b){return D.add(F(b))}n.j=function(D){if(P(this)||P(D))return T;if(z(this))return z(D)?F(this).j(F(D)):F(F(this).j(D));if(z(D))return F(this.j(F(D)));if(0>this.l(I)&&0>D.l(I))return g(this.m()*D.m());for(var b=this.g.length+D.g.length,R=[],M=0;M<2*b;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(var k=0;k<D.g.length;k++){var L=this.i(M)>>>16,N=this.i(M)&65535,Pt=D.i(k)>>>16,Qt=D.i(k)&65535;R[2*M+2*k]+=N*Qt,ee(R,2*M+2*k),R[2*M+2*k+1]+=L*Qt,ee(R,2*M+2*k+1),R[2*M+2*k+1]+=N*Pt,ee(R,2*M+2*k+1),R[2*M+2*k+2]+=L*Pt,ee(R,2*M+2*k+2)}for(M=0;M<b;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=b;M<2*b;M++)R[M]=0;return new c(R,0)};function ee(D,b){for(;(D[b]&65535)!=D[b];)D[b+1]+=D[b]>>>16,D[b]&=65535,b++}function ie(D,b){this.g=D,this.h=b}function ge(D,b){if(P(b))throw Error("division by zero");if(P(D))return new ie(T,T);if(z(D))return b=ge(F(D),b),new ie(F(b.g),F(b.h));if(z(b))return b=ge(D,F(b)),new ie(F(b.g),b.h);if(30<D.g.length){if(z(D)||z(b))throw Error("slowDivide_ only works with positive integers.");for(var R=S,M=b;0>=M.l(D);)R=Ce(R),M=Ce(M);var k=Se(R,1),L=Se(M,1);for(M=Se(M,2),R=Se(R,2);!P(M);){var N=L.add(M);0>=N.l(D)&&(k=k.add(R),L=N),M=Se(M,1),R=Se(R,1)}return b=ne(D,k.j(b)),new ie(k,b)}for(k=T;0<=D.l(b);){for(R=Math.max(1,Math.floor(D.m()/b.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),L=g(R),N=L.j(b);z(N)||0<N.l(D);)R-=M,L=g(R),N=L.j(b);P(L)&&(L=S),k=k.add(L),D=ne(D,N)}return new ie(k,D)}n.A=function(D){return ge(this,D).h},n.and=function(D){for(var b=Math.max(this.g.length,D.g.length),R=[],M=0;M<b;M++)R[M]=this.i(M)&D.i(M);return new c(R,this.h&D.h)},n.or=function(D){for(var b=Math.max(this.g.length,D.g.length),R=[],M=0;M<b;M++)R[M]=this.i(M)|D.i(M);return new c(R,this.h|D.h)},n.xor=function(D){for(var b=Math.max(this.g.length,D.g.length),R=[],M=0;M<b;M++)R[M]=this.i(M)^D.i(M);return new c(R,this.h^D.h)};function Ce(D){for(var b=D.g.length+1,R=[],M=0;M<b;M++)R[M]=D.i(M)<<1|D.i(M-1)>>>31;return new c(R,D.h)}function Se(D,b){var R=b>>5;b%=32;for(var M=D.g.length-R,k=[],L=0;L<M;L++)k[L]=0<b?D.i(L+R)>>>b|D.i(L+R+1)<<32-b:D.i(L+R);return new c(k,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Zw=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,ks=c}).apply(typeof tS<"u"?tS:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var eb,Uu,tb,Sf,Mg,nb,ib,rb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function a(h,_){if(_)e:{var E=r;h=h.split(".");for(var w=0;w<h.length-1;w++){var U=h[w];if(!(U in E))break e;E=E[U]}h=h[h.length-1],w=E[h],_=_(w),_!=w&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var E=0,w=!1,U={next:function(){if(!w&&E<h.length){var K=E++;return{value:_(K,h[K]),done:!1}}return w=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,E){return E})}});var c=c||{},d=this||self;function p(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function g(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,E){return h.call.apply(h.bind,arguments)}function T(h,_,E){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,w),h.apply(_,U)}}return function(){return h.apply(_,arguments)}}function S(h,_,E){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:T,S.apply(null,arguments)}function I(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function P(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(w,U,K){for(var se=Array(arguments.length-2),We=2;We<arguments.length;We++)se[We-2]=arguments[We];return _.prototype[U].apply(w,se)}}function z(h){const _=h.length;if(0<_){const E=Array(_);for(let w=0;w<_;w++)E[w]=h[w];return E}return[]}function F(h,_){for(let E=1;E<arguments.length;E++){const w=arguments[E];if(p(w)){const U=h.length||0,K=w.length||0;h.length=U+K;for(let se=0;se<K;se++)h[U+se]=w[se]}else h.push(w)}}class ne{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function ee(h){return/^[\s\xa0]*$/.test(h)}function ie(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function ge(h){return ge[" "](h),h}ge[" "]=function(){};var Ce=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function Se(h,_,E){for(const w in h)_.call(E,h[w],w,h)}function D(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function b(h){const _={};for(const E in h)_[E]=h[E];return _}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(h,_){let E,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(E in w)h[E]=w[E];for(let K=0;K<R.length;K++)E=R[K],Object.prototype.hasOwnProperty.call(w,E)&&(h[E]=w[E])}}function k(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function L(h){d.setTimeout(()=>{throw h},0)}function N(){var h=qe;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class Pt{constructor(){this.h=this.g=null}add(_,E){const w=Qt.get();w.set(_,E),this.h?this.h.next=w:this.g=w,this.h=w}}var Qt=new ne(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,pe=!1,qe=new Pt,Qe=()=>{const h=d.Promise.resolve(void 0);ae=()=>{h.then(x)}};var x=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(E){L(E)}var _=Qt;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}pe=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var he=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,_),d.removeEventListener("test",E,_)}catch{}return h})();function Ee(h,_){if(re.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Ce){e:{try{ge(_.nodeName);var U=!0;break e}catch{}U=!1}U||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ie[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ee.aa.h.call(this)}}P(Ee,re);var Ie={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Wt=0;function pt(h,_,E,w,U){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!w,this.ha=U,this.key=++Wt,this.da=this.fa=!1}function wi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Qi(h){this.src=h,this.g={},this.h=0}Qi.prototype.add=function(h,_,E,w,U){var K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);var se=Ja(h,_,w,U);return-1<se?(_=h[se],E||(_.fa=!1)):(_=new pt(_,this.src,K,!!w,U),_.fa=E,h.push(_)),_};function ta(h,_){var E=_.type;if(E in h.g){var w=h.g[E],U=Array.prototype.indexOf.call(w,_,void 0),K;(K=0<=U)&&Array.prototype.splice.call(w,U,1),K&&(wi(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Ja(h,_,E,w){for(var U=0;U<h.length;++U){var K=h[U];if(!K.da&&K.listener==_&&K.capture==!!E&&K.ha==w)return U}return-1}var oi="closure_lm_"+(1e6*Math.random()|0),na={};function Za(h,_,E,w,U){if(Array.isArray(_)){for(var K=0;K<_.length;K++)Za(h,_[K],E,w,U);return null}return E=xc(E),h&&h[Le]?h.K(_,E,g(w)?!!w.capture:!1,U):Bd(h,_,E,!1,w,U)}function Bd(h,_,E,w,U,K){if(!_)throw Error("Invalid event type");var se=g(U)?!!U.capture:!!U,We=Cl(h);if(We||(h[oi]=We=new Qi(h)),E=We.add(_,E,w,se,K),E.proxy)return E;if(w=Mc(),E.proxy=w,w.src=h,w.listener=E,h.addEventListener)he||(U=se),U===void 0&&(U=!1),h.addEventListener(_.toString(),w,U);else if(h.attachEvent)h.attachEvent(to(_.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Mc(){function h(E){return _.call(h.src,h.listener,E)}const _=Fd;return h}function eo(h,_,E,w,U){if(Array.isArray(_))for(var K=0;K<_.length;K++)eo(h,_[K],E,w,U);else w=g(w)?!!w.capture:!!w,E=xc(E),h&&h[Le]?(h=h.i,_=String(_).toString(),_ in h.g&&(K=h.g[_],E=Ja(K,E,w,U),-1<E&&(wi(K[E]),Array.prototype.splice.call(K,E,1),K.length==0&&(delete h.g[_],h.h--)))):h&&(h=Cl(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ja(_,E,w,U)),(E=-1<h?_[h]:null)&&ia(E))}function ia(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Le])ta(_.i,h);else{var E=h.type,w=h.proxy;_.removeEventListener?_.removeEventListener(E,w,h.capture):_.detachEvent?_.detachEvent(to(E),w):_.addListener&&_.removeListener&&_.removeListener(w),(E=Cl(_))?(ta(E,h),E.h==0&&(E.src=null,_[oi]=null)):wi(h)}}}function to(h){return h in na?na[h]:na[h]="on"+h}function Fd(h,_){if(h.da)h=!0;else{_=new Ee(_,this);var E=h.listener,w=h.ha||h.src;h.fa&&ia(h),h=E.call(w,_)}return h}function Cl(h){return h=h[oi],h instanceof Qi?h:null}var $t="__closure_events_fn_"+(1e9*Math.random()>>>0);function xc(h){return typeof h=="function"?h:(h[$t]||(h[$t]=function(_){return h.handleEvent(_)}),h[$t])}function Vt(){W.call(this),this.i=new Qi(this),this.M=this,this.F=null}P(Vt,W),Vt.prototype[Le]=!0,Vt.prototype.removeEventListener=function(h,_,E,w){eo(this,h,_,E,w)};function zt(h,_){var E,w=h.F;if(w)for(E=[];w;w=w.F)E.push(w);if(h=h.M,w=_.type||_,typeof _=="string")_=new re(_,h);else if(_ instanceof re)_.target=_.target||h;else{var U=_;_=new re(w,h),M(_,U)}if(U=!0,E)for(var K=E.length-1;0<=K;K--){var se=_.g=E[K];U=Wi(se,w,!0,_)&&U}if(se=_.g=h,U=Wi(se,w,!0,_)&&U,U=Wi(se,w,!1,_)&&U,E)for(K=0;K<E.length;K++)se=_.g=E[K],U=Wi(se,w,!1,_)&&U}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],w=0;w<E.length;w++)wi(E[w]);delete h.g[_],h.h--}}this.F=null},Vt.prototype.K=function(h,_,E,w){return this.i.add(String(h),_,!1,E,w)},Vt.prototype.L=function(h,_,E,w){return this.i.add(String(h),_,!0,E,w)};function Wi(h,_,E,w){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var U=!0,K=0;K<_.length;++K){var se=_[K];if(se&&!se.da&&se.capture==E){var We=se.listener,bt=se.ha||se.src;se.fa&&ta(h.i,se),U=We.call(bt,w)!==!1&&U}}return U&&!w.defaultPrevented}function kc(h,_,E){if(typeof h=="function")E&&(h=S(h,E));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Il(h){h.g=kc(()=>{h.g=null,h.i&&(h.i=!1,Il(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class jd extends W{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Il(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ra(h){W.call(this),this.h=h,this.g={}}P(ra,W);var Ur=[];function on(h){Se(h.g,function(_,E){this.g.hasOwnProperty(E)&&ia(_)},h),h.g={}}ra.prototype.N=function(){ra.aa.N.call(this),on(this)},ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kn=d.JSON.stringify,_n=d.JSON.parse,qd=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Nl(){}Nl.prototype.h=null;function Pc(h){return h.h||(h.h=h.i())}function sa(){}var bi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zr(){re.call(this,"d")}P(zr,re);function li(){re.call(this,"c")}P(li,re);var Yn={},Br=null;function no(){return Br=Br||new Vt}Yn.La="serverreachability";function Dl(h){re.call(this,Yn.La,h)}P(Dl,re);function $i(h){const _=no();zt(_,new Dl(_))}Yn.STAT_EVENT="statevent";function Fr(h,_){re.call(this,Yn.STAT_EVENT,h),this.stat=_}P(Fr,re);function Xt(h){const _=no();zt(_,new Fr(_,h))}Yn.Ma="timingevent";function Ol(h,_){re.call(this,Yn.Ma,h),this.size=_}P(Ol,re);function jr(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function qr(){this.g=!0}qr.prototype.xa=function(){this.g=!1};function Ml(h,_,E,w,U,K){h.info(function(){if(h.g)if(K)for(var se="",We=K.split("&"),bt=0;bt<We.length;bt++){var Ne=We[bt].split("=");if(1<Ne.length){var Ft=Ne[0];Ne=Ne[1];var jt=Ft.split("_");se=2<=jt.length&&jt[1]=="type"?se+(Ft+"="+Ne+"&"):se+(Ft+"=redacted&")}}else se=null;else se=K;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+_+`
`+E+`
`+se})}function xl(h,_,E,w,U,K,se){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+_+`
`+E+`
`+K+" "+se})}function Xi(h,_,E,w){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ri(h,E)+(w?" "+w:"")})}function Vc(h,_){h.info(function(){return"TIMEOUT: "+_})}qr.prototype.info=function(){};function Ri(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var w=E[h];if(!(2>w.length)){var U=w[1];if(Array.isArray(U)&&!(1>U.length)){var K=U[0];if(K!="noop"&&K!="stop"&&K!="close")for(var se=1;se<U.length;se++)U[se]=""}}}}return Kn(E)}catch{return _}}var gt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ci;function Hr(){}P(Hr,Nl),Hr.prototype.g=function(){return new XMLHttpRequest},Hr.prototype.i=function(){return{}},Ci=new Hr;function Ii(h,_,E,w){this.j=h,this.i=_,this.l=E,this.R=w||1,this.U=new ra(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lc}function Lc(){this.i=null,this.g="",this.h=!1}var kl={},Ji={};function aa(h,_,E){h.L=1,h.v=ua(_t(_)),h.m=E,h.P=!0,Zi(h,null)}function Zi(h,_){h.F=Date.now(),ui(h),h.A=_t(h.v);var E=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),nr(E.i,"t",w),h.C=0,E=h.j.J,h.h=new Lc,h.g=Zc(h.j,E?_:null,!h.m),0<h.O&&(h.M=new jd(S(h.Y,h,h.g),h.O)),_=h.U,E=h.g,w=h.ca;var U="readystatechange";Array.isArray(U)||(U&&(Ur[0]=U.toString()),U=Ur);for(var K=0;K<U.length;K++){var se=Za(E,U[K],w||_.handleEvent,!1,_.h||_);if(!se)break;_.g[se.key]=se}_=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),$i(),Ml(h.i,h.u,h.A,h.l,h.R,h.m)}Ii.prototype.ca=function(h){h=h.target;const _=this.M;_&&En(h)==3?_.j():this.Y(h)},Ii.prototype.Y=function(h){try{if(h==this.g)e:{const jt=En(this.g);var _=this.g.Ba();const is=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||fa(this.g)))){this.J||jt!=4||_==7||(_==8||0>=is?$i(3):$i(2)),io(this);var E=this.g.Z();this.X=E;t:if(er(this)){var w=fa(this.g);h="";var U=w.length,K=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yn(this),Gr(this);var se="";break t}this.h.i=new d.TextDecoder}for(_=0;_<U;_++)this.h.h=!0,h+=this.h.i.decode(w[_],{stream:!(K&&_==U-1)});w.length=0,this.h.g+=h,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=E==200,xl(this.i,this.u,this.A,this.l,this.R,jt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var We,bt=this.g;if((We=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(We)){var Ne=We;break t}}Ne=null}if(E=Ne)Xi(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ni(this,E);else{this.o=!1,this.s=3,Xt(12),yn(this),Gr(this);break e}}if(this.P){E=!0;let wn;for(;!this.J&&this.C<se.length;)if(wn=oa(this,se),wn==Ji){jt==4&&(this.s=4,Xt(14),E=!1),Xi(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==kl){this.s=4,Xt(15),Xi(this.i,this.l,se,"[Invalid Chunk]"),E=!1;break}else Xi(this.i,this.l,wn,null),Ni(this,wn);if(er(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||se.length!=0||this.h.h||(this.s=1,Xt(16),E=!1),this.o=this.o&&E,!E)Xi(this.i,this.l,se,"[Invalid Chunked Response]"),yn(this),Gr(this);else if(0<se.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Gl(Ft),Ft.M=!0,Xt(11))}}else Xi(this.i,this.l,se,null),Ni(this,se);jt==4&&yn(this),this.o&&!this.J&&(jt==4?$c(this.j,this):(this.o=!1,ui(this)))}else Hc(this.g),E==400&&0<se.indexOf("Unknown SID")?(this.s=3,Xt(12)):(this.s=0,Xt(13)),yn(this),Gr(this)}}}catch{}};function er(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function oa(h,_){var E=h.C,w=_.indexOf(`
`,E);return w==-1?Ji:(E=Number(_.substring(E,w)),isNaN(E)?kl:(w+=1,w+E>_.length?Ji:(_=_.slice(w,w+E),h.C=w+E,_)))}Ii.prototype.cancel=function(){this.J=!0,yn(this)};function ui(h){h.S=Date.now()+h.I,Et(h,h.I)}function Et(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=jr(S(h.ba,h),_)}function io(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Ii.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Vc(this.i,this.A),this.L!=2&&($i(),Xt(17)),yn(this),this.s=2,Gr(this)):Et(this,this.S-h)};function Gr(h){h.j.G==0||h.J||$c(h.j,h)}function yn(h){io(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,on(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Ni(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||Kr(E.h,h))){if(!h.K&&Kr(E.h,h)&&E.G==3){try{var w=E.Da.g.parse(_)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)ts(E),es(E);else break e;Hl(E),Xt(18)}}else E.za=U[1],0<E.za-E.T&&37500>U[2]&&E.F&&E.v==0&&!E.C&&(E.C=jr(S(E.Za,E),6e3));if(1>=Uc(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else rr(E,11)}else if((h.K||E.g==h)&&ts(E),!ee(_))for(U=E.Da.g.parse(_),_=0;_<U.length;_++){let Ne=U[_];if(E.T=Ne[0],Ne=Ne[1],E.G==2)if(Ne[0]=="c"){E.K=Ne[1],E.ia=Ne[2];const Ft=Ne[3];Ft!=null&&(E.la=Ft,E.j.info("VER="+E.la));const jt=Ne[4];jt!=null&&(E.Aa=jt,E.j.info("SVER="+E.Aa));const is=Ne[5];is!=null&&typeof is=="number"&&0<is&&(w=1.5*is,E.L=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const wn=h.g;if(wn){const pa=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pa){var K=w.h;K.g||pa.indexOf("spdy")==-1&&pa.indexOf("quic")==-1&&pa.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Yr(K,K.h),K.h=null))}if(w.D){const sr=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;sr&&(w.ya=sr,He(w.I,w.D,sr))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),w=E;var se=h;if(w.qa=Jc(w,w.J?w.ia:null,w.W),se.K){Qn(w.h,se);var We=se,bt=w.L;bt&&(We.I=bt),We.B&&(io(We),ui(We)),w.g=se}else Qc(w);0<E.i.length&&ho(E)}else Ne[0]!="stop"&&Ne[0]!="close"||rr(E,7);else E.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?rr(E,7):jl(E):Ne[0]!="noop"&&E.l&&E.l.ta(Ne),E.v=0)}}$i(4)}catch{}}var Hd=class{constructor(h,_){this.g=h,this.map=_}};function Pl(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Uc(h){return h.h?1:h.g?h.g.size:0}function Kr(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Yr(h,_){h.g?h.g.add(_):h.h=_}function Qn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Pl.prototype.cancel=function(){if(this.i=vn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function vn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return z(h.i)}function zc(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var _=[],E=h.length,w=0;w<E;w++)_.push(h[w]);return _}_=[],E=0;for(w in h)_[E++]=h[w];return _}function Gd(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const w in h)_[E++]=w;return _}}}function ro(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=Gd(h),w=zc(h),U=w.length,K=0;K<U;K++)_.call(void 0,w[K],E&&E[K],h)}var Ll=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function so(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var w=h[E].indexOf("="),U=null;if(0<=w){var K=h[E].substring(0,w);U=h[E].substring(w+1)}else K=h[E];_(K,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function tr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof tr){this.h=h.h,Qr(this,h.j),this.o=h.o,this.g=h.g,la(this,h.s),this.l=h.l;var _=h.i,E=new Di;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),ao(this,E),this.m=h.m}else h&&(_=String(h).match(Ll))?(this.h=!1,Qr(this,_[1]||"",!0),this.o=Wr(_[2]||""),this.g=Wr(_[3]||"",!0),la(this,_[4]),this.l=Wr(_[5]||"",!0),ao(this,_[6]||"",!0),this.m=Wr(_[7]||"")):(this.h=!1,this.i=new Di(null,this.h))}tr.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Wn(_,Ul,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Wn(_,Ul,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Wn(E,E.charAt(0)=="/"?zl:Bc,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Wn(E,Qd)),h.join("")};function _t(h){return new tr(h)}function Qr(h,_,E){h.j=E?Wr(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function la(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function ao(h,_,E){_ instanceof Di?(h.i=_,Fc(h.i,h.h)):(E||(_=Wn(_,Yd)),h.i=new Di(_,h.h))}function He(h,_,E){h.i.set(_,E)}function ua(h){return He(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Wr(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Wn(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,Kd),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Kd(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ul=/[#\/\?@]/g,Bc=/[#\?:]/g,zl=/[#\?]/g,Yd=/[#\?@]/g,Qd=/#/g;function Di(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Bt(h){h.g||(h.g=new Map,h.h=0,h.i&&so(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Di.prototype,n.add=function(h,_){Bt(this),this.i=null,h=xn(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function oo(h,_){Bt(h),_=xn(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function lo(h,_){return Bt(h),_=xn(h,_),h.g.has(_)}n.forEach=function(h,_){Bt(this),this.g.forEach(function(E,w){E.forEach(function(U){h.call(_,U,w,this)},this)},this)},n.na=function(){Bt(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let w=0;w<_.length;w++){const U=h[w];for(let K=0;K<U.length;K++)E.push(_[w])}return E},n.V=function(h){Bt(this);let _=[];if(typeof h=="string")lo(this,h)&&(_=_.concat(this.g.get(xn(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return Bt(this),this.i=null,h=xn(this,h),lo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function nr(h,_,E){oo(h,_),0<E.length&&(h.i=null,h.g.set(xn(h,_),z(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var w=_[E];const K=encodeURIComponent(String(w)),se=this.V(w);for(w=0;w<se.length;w++){var U=K;se[w]!==""&&(U+="="+encodeURIComponent(String(se[w]))),h.push(U)}}return this.i=h.join("&")};function xn(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Fc(h,_){_&&!h.j&&(Bt(h),h.i=null,h.g.forEach(function(E,w){var U=w.toLowerCase();w!=U&&(oo(this,w),nr(this,U,E))},h)),h.j=_}function Bl(h,_){const E=new qr;if(d.Image){const w=new Image;w.onload=I(An,E,"TestLoadImage: loaded",!0,_,w),w.onerror=I(An,E,"TestLoadImage: error",!1,_,w),w.onabort=I(An,E,"TestLoadImage: abort",!1,_,w),w.ontimeout=I(An,E,"TestLoadImage: timeout",!1,_,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else _(!1)}function jc(h,_){const E=new qr,w=new AbortController,U=setTimeout(()=>{w.abort(),An(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:w.signal}).then(K=>{clearTimeout(U),K.ok?An(E,"TestPingServer: ok",!0,_):An(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(U),An(E,"TestPingServer: error",!1,_)})}function An(h,_,E,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(E)}catch{}}function ci(){this.g=new qd}function Fl(h,_,E){const w=E||"";try{ro(h,function(U,K){let se=U;g(U)&&(se=Kn(U)),_.push(w+K+"="+encodeURIComponent(se))})}catch(U){throw _.push(w+"type="+encodeURIComponent("_badmap")),U}}function Oi(h){this.l=h.Ub||null,this.j=h.eb||!1}P(Oi,Nl),Oi.prototype.g=function(){return new kn(this.l,this.j)},Oi.prototype.i=(function(h){return function(){return h}})({});function kn(h,_){Vt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(kn,Vt),n=kn.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,$r(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mi(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uo(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function uo(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Mi(this):$r(this),this.readyState==3&&uo(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Mi(this))},n.Qa=function(h){this.g&&(this.response=h,Mi(this))},n.ga=function(){this.g&&Mi(this)};function Mi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,$r(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function $r(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(kn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ca(h){let _="";return Se(h,function(E,w){_+=w,_+=":",_+=E,_+=`\r
`}),_}function Xr(h,_,E){e:{for(w in E){var w=!1;break e}w=!0}w||(E=ca(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):He(h,_,E))}function at(h){Vt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(at,Vt);var ln=/^https?$/i,ir=["POST","PUT"];n=at.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ci.g(),this.v=this.o?Pc(this.o):Pc(Ci),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(K){ha(this,K);return}if(h=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)E.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())E.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find(K=>K.toLowerCase()=="content-type"),U=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ir,_,void 0))||w||U||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,se]of E)this.g.setRequestHeader(K,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{co(this),this.u=!0,this.g.send(h),this.u=!1}catch(K){ha(this,K)}};function ha(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Jr(h),Zr(h)}function Jr(h){h.A||(h.A=!0,zt(h,"complete"),zt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,zt(this,"complete"),zt(this,"abort"),Zr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zr(this,!0)),at.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?qc(this):this.bb())},n.bb=function(){qc(this)};function qc(h){if(h.h&&typeof c<"u"&&(!h.v[1]||En(h)!=4||h.Z()!=2)){if(h.u&&En(h)==4)kc(h.Ea,0,h);else if(zt(h,"readystatechange"),En(h)==4){h.h=!1;try{const se=h.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var w;if(w=se===0){var U=String(h.D).match(Ll)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),w=!ln.test(U?U.toLowerCase():"")}E=w}if(E)zt(h,"complete"),zt(h,"success");else{h.m=6;try{var K=2<En(h)?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.Z()+"]",Jr(h)}}finally{Zr(h)}}}}function Zr(h,_){if(h.g){co(h);const E=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||zt(h,"ready");try{E.onreadystatechange=w}catch{}}}function co(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function En(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),_n(_)}};function fa(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Hc(h){const _={};h=(h.g&&2<=En(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(ee(h[w]))continue;var E=k(h[w]);const U=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const K=_[U]||[];_[U]=K,K.push(E)}D(_,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function da(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Gc(h){this.Aa=0,this.i=[],this.j=new qr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=da("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=da("baseRetryDelayMs",5e3,h),this.cb=da("retryDelaySeedMs",1e4,h),this.Wa=da("forwardChannelMaxRetries",2,h),this.wa=da("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Pl(h&&h.concurrentRequestLimit),this.Da=new ci,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Gc.prototype,n.la=8,n.G=1,n.connect=function(h,_,E,w){Xt(0),this.W=h,this.H=_||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.I=Jc(this,null,this.W),ho(this)};function jl(h){if(Kc(h),h.G==3){var _=h.U++,E=_t(h.I);if(He(E,"SID",h.K),He(E,"RID",_),He(E,"TYPE","terminate"),ma(h,E),_=new Ii(h,h.j,_),_.L=2,_.v=ua(_t(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=_.v,E=!0),E||(_.g=Zc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ui(_)}Kl(h)}function es(h){h.g&&(Gl(h),h.g.cancel(),h.g=null)}function Kc(h){es(h),h.u&&(d.clearTimeout(h.u),h.u=null),ts(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function ho(h){if(!Vl(h.h)&&!h.s){h.s=!0;var _=h.Ga;ae||Qe(),pe||(ae(),pe=!0),qe.add(_,h),h.B=0}}function Wd(h,_){return Uc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=jr(S(h.Ga,h,_),Xc(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const U=new Ii(this,this.j,h);let K=this.o;if(this.S&&(K?(K=b(K),M(K,this.S)):K=this.S),this.m!==null||this.O||(U.H=K,K=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(_+=w,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=ql(this,U,_),E=_t(this.I),He(E,"RID",h),He(E,"CVER",22),this.D&&He(E,"X-HTTP-Session-Id",this.D),ma(this,E),K&&(this.O?_="headers="+encodeURIComponent(String(ca(K)))+"&"+_:this.m&&Xr(E,this.m,K)),Yr(this.h,U),this.Ua&&He(E,"TYPE","init"),this.P?(He(E,"$req",_),He(E,"SID","null"),U.T=!0,aa(U,E,null)):aa(U,E,_),this.G=2}}else this.G==3&&(h?Yc(this,h):this.i.length==0||Vl(this.h)||Yc(this))};function Yc(h,_){var E;_?E=_.l:E=h.U++;const w=_t(h.I);He(w,"SID",h.K),He(w,"RID",E),He(w,"AID",h.T),ma(h,w),h.m&&h.o&&Xr(w,h.m,h.o),E=new Ii(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=ql(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Yr(h.h,E),aa(E,w,_)}function ma(h,_){h.H&&Se(h.H,function(E,w){He(_,w,E)}),h.l&&ro({},function(E,w){He(_,w,E)})}function ql(h,_,E){E=Math.min(h.i.length,E);var w=h.l?S(h.l.Na,h.l,h):null;e:{var U=h.i;let K=-1;for(;;){const se=["count="+E];K==-1?0<E?(K=U[0].g,se.push("ofs="+K)):K=0:se.push("ofs="+K);let We=!0;for(let bt=0;bt<E;bt++){let Ne=U[bt].g;const Ft=U[bt].map;if(Ne-=K,0>Ne)K=Math.max(0,U[bt].g-100),We=!1;else try{Fl(Ft,se,"req"+Ne+"_")}catch{w&&w(Ft)}}if(We){w=se.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,w}function Qc(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;ae||Qe(),pe||(ae(),pe=!0),qe.add(_,h),h.v=0}}function Hl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=jr(S(h.Fa,h),Xc(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Wc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=jr(S(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xt(10),es(this),Wc(this))};function Gl(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Wc(h){h.g=new Ii(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=_t(h.qa);He(_,"RID","rpc"),He(_,"SID",h.K),He(_,"AID",h.T),He(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&He(_,"TO",h.ja),He(_,"TYPE","xmlhttp"),ma(h,_),h.m&&h.o&&Xr(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=ua(_t(_)),E.m=null,E.P=!0,Zi(E,h)}n.Za=function(){this.C!=null&&(this.C=null,es(this),Hl(this),Xt(19))};function ts(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function $c(h,_){var E=null;if(h.g==_){ts(h),Gl(h),h.g=null;var w=2}else if(Kr(h.h,_))E=_.D,Qn(h.h,_),w=1;else return;if(h.G!=0){if(_.o)if(w==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var U=h.B;w=no(),zt(w,new Ol(w,E)),ho(h)}else Qc(h);else if(U=_.s,U==3||U==0&&0<_.X||!(w==1&&Wd(h,_)||w==2&&Hl(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),U){case 1:rr(h,5);break;case 4:rr(h,10);break;case 3:rr(h,6);break;default:rr(h,2)}}}function Xc(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function rr(h,_){if(h.j.info("Error code "+_),_==2){var E=S(h.fb,h),w=h.Xa;const U=!w;w=new tr(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Qr(w,"https"),ua(w),U?Bl(w.toString(),E):jc(w.toString(),E)}else Xt(2);h.G=0,h.l&&h.l.sa(_),Kl(h),Kc(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function Kl(h){if(h.G=0,h.ka=[],h.l){const _=vn(h.h);(_.length!=0||h.i.length!=0)&&(F(h.ka,_),F(h.ka,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.ra()}}function Jc(h,_,E){var w=E instanceof tr?_t(E):new tr(E);if(w.g!="")_&&(w.g=_+"."+w.g),la(w,w.s);else{var U=d.location;w=U.protocol,_=_?_+"."+U.hostname:U.hostname,U=+U.port;var K=new tr(null);w&&Qr(K,w),_&&(K.g=_),U&&la(K,U),E&&(K.l=E),w=K}return E=h.D,_=h.ya,E&&_&&He(w,E,_),He(w,"VER",h.la),ma(h,w),w}function Zc(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new at(new Oi({eb:E})):new at(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eh(){}n=eh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function fo(){}fo.prototype.g=function(h,_){return new Tn(h,_)};function Tn(h,_){Vt.call(this),this.g=new Gc(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!ee(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!ee(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new ns(this)}P(Tn,Vt),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){jl(this.g)},Tn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=Kn(h),h=E);_.i.push(new Hd(_.Ya++,h)),_.G==3&&ho(_)},Tn.prototype.N=function(){this.g.l=null,delete this.j,jl(this.g),delete this.g,Tn.aa.N.call(this)};function th(h){zr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}P(th,zr);function nh(){li.call(this),this.status=1}P(nh,li);function ns(h){this.g=h}P(ns,eh),ns.prototype.ua=function(){zt(this.g,"a")},ns.prototype.ta=function(h){zt(this.g,new th(h))},ns.prototype.sa=function(h){zt(this.g,new nh)},ns.prototype.ra=function(){zt(this.g,"b")},fo.prototype.createWebChannel=fo.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,rb=function(){return new fo},ib=function(){return no()},nb=Yn,Mg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gt.NO_ERROR=0,gt.TIMEOUT=8,gt.HTTP_ERROR=6,Sf=gt,Jt.COMPLETE="complete",tb=Jt,sa.EventType=bi,bi.OPEN="a",bi.CLOSE="b",bi.ERROR="c",bi.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,Uu=sa,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,eb=at}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});const nS="@firebase/firestore",iS="4.8.0";class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");let yl="11.10.0";const Ba=new hd("@firebase/firestore");function qo(){return Ba.logLevel}function ue(n,...e){if(Ba.logLevel<=xe.DEBUG){const t=e.map(V_);Ba.debug(`Firestore (${yl}): ${n}`,...t)}}function xr(n,...e){if(Ba.logLevel<=xe.ERROR){const t=e.map(V_);Ba.error(`Firestore (${yl}): ${n}`,...t)}}function Bs(n,...e){if(Ba.logLevel<=xe.WARN){const t=e.map(V_);Ba.warn(`Firestore (${yl}): ${n}`,...t)}}function V_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ve(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,sb(n,r,t)}function sb(n,e,t){let r=`FIRESTORE (${yl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw xr(r),new Error(r)}function Xe(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||sb(e,a,r)}function we(n,e){return n}const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Vr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Cr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ab{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class px{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(hn.UNAUTHENTICATED)))}shutdown(){}}class gx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _x{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let r=this.i;const a=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Cr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Cr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new ab(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class yx{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vx{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new yx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ex{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const r=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new rS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Tx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function ob(){return new TextEncoder}class L_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=Tx(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function De(n,e){return n<e?-1:n>e?1:0}function xg(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return De(r,a);{const l=ob(),c=Sx(l.encode(sS(n,t)),l.encode(sS(e,t)));return c!==0?c:De(r,a)}}t+=r>65535?2:1}return De(n.length,e.length)}function sS(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Sx(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return De(n[t],e[t]);return De(n.length,e.length)}function rl(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}const aS="__name__";class Li{constructor(e,t,r){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ve(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Li.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Li?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Li.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const r=Li.isNumericId(e),a=Li.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Li.extractNumericId(e).compare(Li.extractNumericId(t)):xg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ks.fromString(e.substring(4,e.length-2))}}class st extends Li{construct(e,t,r){return new st(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new st(t)}static emptyPath(){return new st([])}}const Ax=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Li{construct(e,t,r){return new sn(e,t,r)}static isValidIdentifier(e){return Ax.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aS}static keyField(){return new sn([aS])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new le(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new le(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new le(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(t)}static emptyPath(){return new sn([])}}class me{constructor(e){this.path=e}static fromPath(e){return new me(st.fromString(e))}static fromName(e){return new me(st.fromString(e).popFirst(5))}static empty(){return new me(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new st(e.slice()))}}function U_(n,e,t){if(!t)throw new le(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wx(n,e,t,r){if(e===!0&&r===!0)throw new le(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oS(n){if(!me.isDocumentKey(n))throw new le(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lS(n){if(me.isDocumentKey(n))throw new le(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function gd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve(12329,{type:typeof n})}function Ti(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gd(n);throw new le(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Mt(n,e){const t={typeString:n};return e&&(t.value=e),t}function vc(n,e){if(!lb(n))throw new le(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new le(X.INVALID_ARGUMENT,t);return!0}const uS=-62135596800,cS=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*cS);return new ht(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<uS)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cS}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vc(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-uS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Mt("string",ht._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new ht(0,0))}static max(){return new Te(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ic=-1;function bx(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Te.fromTimestamp(r===1e9?new ht(t+1,0):new ht(t,r));return new Fs(a,me.empty(),e)}function Rx(n){return new Fs(n.readTime,n.key,ic)}class Fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fs(Te.min(),me.empty(),ic)}static max(){return new Fs(Te.max(),me.empty(),ic)}}function Cx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}const Ix="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function vl(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==Ix)throw n;ue("LocalStore","Unexpectedly lost primary lease")}class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,r)=>{t(e)}))}static reject(e){return new Z(((t,r)=>{r(e)}))}static waitFor(e){return new Z(((t,r)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>r(p)))})),c=!0,l===a&&t()}))}static or(e){let t=Z.resolve(!1);for(const r of e)t=t.next((a=>a?Z.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new Z(((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((y=>{c[g]=y,++d,d===l&&r(c)}),(y=>a(y)))}}))}static doWhile(e,t){return new Z(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function Dx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function El(n){return n.name==="IndexedDbTransactionError"}class _d{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}_d.ue=-1;const z_=-1;function yd(n){return n==null}function Bf(n){return n===0&&1/n==-1/0}function Ox(n){return typeof n=="number"&&Number.isInteger(n)&&!Bf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ub="";function Mx(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hS(e)),e=xx(n.get(t),e);return hS(e)}function xx(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case ub:t+="";break;default:t+=l}}return t}function hS(n){return n+ub+""}function fS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Js(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}let kt=class kg{constructor(e,t){this.comparator=e,this.root=t||Ps.EMPTY}insert(e,t){return new kg(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ps.BLACK,null,null))}remove(e){return new kg(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ps.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cf(this.root,e,this.comparator,!1)}getReverseIterator(){return new cf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cf(this.root,e,this.comparator,!0)}},cf=class{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ps=class Tr{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Tr.RED,this.left=a??Tr.EMPTY,this.right=l??Tr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Tr(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Tr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Tr.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}};Ps.EMPTY=null,Ps.RED=!0,Ps.BLACK=!1;Ps.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Ps(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ut{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dS(this.data.getIterator())}getIteratorFrom(e){return new dS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class dS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class qn{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new qn([])}unionWith(e){let t=new Ut(sn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class hb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class an{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new hb("Invalid base64 string: "+l):l}})(e);return new an(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new an(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const kx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function js(n){if(Xe(!!n,39018),typeof n=="string"){let e=0;const t=kx.exec(n);if(Xe(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qs(n){return typeof n=="string"?an.fromBase64String(n):an.fromUint8Array(n)}const fb="server_timestamp",db="__type__",mb="__previous_value__",pb="__local_write_time__";function B_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[db])===null||t===void 0?void 0:t.stringValue)===fb}function vd(n){const e=n.mapValue.fields[mb];return B_(e)?vd(e):e}function rc(n){const e=js(n.mapValue.fields[pb].timestampValue);return new ht(e.seconds,e.nanos)}class Px{constructor(e,t,r,a,l,c,d,p,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=y}}const Ff="(default)";class sc{constructor(e,t){this.projectId=e,this.database=t||Ff}static empty(){return new sc("","")}get isDefaultDatabase(){return this.database===Ff}isEqual(e){return e instanceof sc&&e.projectId===this.projectId&&e.database===this.database}}const gb="__type__",Vx="__max__",hf={mapValue:{}},_b="__vector__",jf="value";function Hs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?B_(n)?4:Ux(n)?9007199254740991:Lx(n)?10:11:ve(28295,{value:n})}function Ki(n,e){if(n===e)return!0;const t=Hs(n);if(t!==Hs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rc(n).isEqual(rc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=js(a.timestampValue),d=js(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return qs(a.bytesValue).isEqual(qs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return At(a.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(a.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return At(a.integerValue)===At(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=At(a.doubleValue),d=At(l.doubleValue);return c===d?Bf(c)===Bf(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return rl(n.arrayValue.values||[],e.arrayValue.values||[],Ki);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(fS(c)!==fS(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ki(c[p],d[p])))return!1;return!0})(n,e);default:return ve(52216,{left:n})}}function ac(n,e){return(n.values||[]).find((t=>Ki(t,e)))!==void 0}function sl(n,e){if(n===e)return 0;const t=Hs(n),r=Hs(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=At(l.integerValue||l.doubleValue),p=At(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return mS(n.timestampValue,e.timestampValue);case 4:return mS(rc(n),rc(e));case 5:return xg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=qs(l),p=qs(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const y=De(d[g],p[g]);if(y!==0)return y}return De(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=De(At(l.latitude),At(c.latitude));return d!==0?d:De(At(l.longitude),At(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return pS(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var d,p,g,y;const T=l.fields||{},S=c.fields||{},I=(d=T[jf])===null||d===void 0?void 0:d.arrayValue,P=(p=S[jf])===null||p===void 0?void 0:p.arrayValue,z=De(((g=I?.values)===null||g===void 0?void 0:g.length)||0,((y=P?.values)===null||y===void 0?void 0:y.length)||0);return z!==0?z:pS(I,P)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===hf.mapValue&&c===hf.mapValue)return 0;if(l===hf.mapValue)return 1;if(c===hf.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},y=Object.keys(g);p.sort(),y.sort();for(let T=0;T<p.length&&T<y.length;++T){const S=xg(p[T],y[T]);if(S!==0)return S;const I=sl(d[p[T]],g[y[T]]);if(I!==0)return I}return De(p.length,y.length)})(n.mapValue,e.mapValue);default:throw ve(23264,{le:t})}}function mS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);const t=js(n),r=js(e),a=De(t.seconds,r.seconds);return a!==0?a:De(t.nanos,r.nanos)}function pS(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=sl(t[a],r[a]);if(l)return l}return De(t.length,r.length)}function al(n){return Pg(n)}function Pg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=js(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return qs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Pg(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Pg(t.fields[c])}`;return a+"}"})(n.mapValue):ve(61005,{value:n})}function Af(n){switch(Hs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vd(n);return e?16+Af(e):16;case 5:return 2*n.stringValue.length;case 6:return qs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Af(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return Js(r.fields,((l,c)=>{a+=l.length+Af(c)})),a})(n.mapValue);default:throw ve(13486,{value:n})}}function gS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vg(n){return!!n&&"integerValue"in n}function F_(n){return!!n&&"arrayValue"in n}function _S(n){return!!n&&"nullValue"in n}function yS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wf(n){return!!n&&"mapValue"in n}function Lx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[gb])===null||t===void 0?void 0:t.stringValue)===_b}function Hu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Js(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Hu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ux(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Vx}class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=sn.emptyPath(),r={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Hu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());wf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];wf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Js(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new On(Hu(this.value))}}function yb(n){const e=[];return Js(n.fields,((t,r)=>{const a=new sn([t]);if(wf(r)){const l=yb(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new qn(e)}class fn{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new fn(e,0,Te.min(),Te.min(),Te.min(),On.empty(),0)}static newFoundDocument(e,t,r,a){return new fn(e,1,t,Te.min(),r,a,0)}static newNoDocument(e,t){return new fn(e,2,t,Te.min(),Te.min(),On.empty(),0)}static newUnknownDocument(e,t){return new fn(e,3,t,Te.min(),Te.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qf{constructor(e,t){this.position=e,this.inclusive=t}}function vS(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=me.comparator(me.fromName(c.referenceValue),t.key):r=sl(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function ES(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ki(n.position[t],e.position[t]))return!1;return!0}class Hf{constructor(e,t="asc"){this.field=e,this.dir=t}}function zx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class vb{}class Ot extends vb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Fx(e,t,r):t==="array-contains"?new Hx(e,r):t==="in"?new Gx(e,r):t==="not-in"?new Kx(e,r):t==="array-contains-any"?new Yx(e,r):new Ot(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new jx(e,r):new qx(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(sl(t,this.value)):t!==null&&Hs(this.value)===Hs(t)&&this.matchesComparison(sl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends vb{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Si(e,t)}matches(e){return Eb(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Eb(n){return n.op==="and"}function Tb(n){return Bx(n)&&Eb(n)}function Bx(n){for(const e of n.filters)if(e instanceof Si)return!1;return!0}function Lg(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+al(n.value);if(Tb(n))return n.filters.map((e=>Lg(e))).join(",");{const e=n.filters.map((t=>Lg(t))).join(",");return`${n.op}(${e})`}}function Sb(n,e){return n instanceof Ot?(function(r,a){return a instanceof Ot&&r.op===a.op&&r.field.isEqual(a.field)&&Ki(r.value,a.value)})(n,e):n instanceof Si?(function(r,a){return a instanceof Si&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,d)=>l&&Sb(c,a.filters[d])),!0):!1})(n,e):void ve(19439)}function Ab(n){return n instanceof Ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${al(t.value)}`})(n):n instanceof Si?(function(t){return t.op.toString()+" {"+t.getFilters().map(Ab).join(" ,")+"}"})(n):"Filter"}class Fx extends Ot{constructor(e,t,r){super(e,t,r),this.key=me.fromName(r.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class jx extends Ot{constructor(e,t){super(e,"in",t),this.keys=wb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class qx extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=wb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function wb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>me.fromName(r.referenceValue)))}class Hx extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return F_(t)&&ac(t.arrayValue,this.value)}}class Gx extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ac(this.value.arrayValue,t)}}class Kx extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ac(this.value.arrayValue,t)}}class Yx extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!F_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ac(this.value.arrayValue,r)))}}class Qx{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Pe=null}}function TS(n,e=null,t=[],r=[],a=null,l=null,c=null){return new Qx(n,e,t,r,a,l,c)}function j_(n){const e=we(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Lg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),yd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>al(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>al(r))).join(",")),e.Pe=t}return e.Pe}function q_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Sb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ES(n.startAt,e.startAt)&&ES(n.endAt,e.endAt)}function Ug(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Tl{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Wx(n,e,t,r,a,l,c,d){return new Tl(n,e,t,r,a,l,c,d)}function H_(n){return new Tl(n)}function SS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bb(n){return n.collectionGroup!==null}function Gu(n){const e=we(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Ut(sn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Hf(l,r))})),t.has(sn.keyField().canonicalString())||e.Te.push(new Hf(sn.keyField(),r))}return e.Te}function ji(n){const e=we(n);return e.Ie||(e.Ie=$x(e,Gu(n))),e.Ie}function $x(n,e){if(n.limitType==="F")return TS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Hf(a.field,l)}));const t=n.endAt?new qf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qf(n.startAt.position,n.startAt.inclusive):null;return TS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function zg(n,e){const t=n.filters.concat([e]);return new Tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Bg(n,e,t){return new Tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ed(n,e){return q_(ji(n),ji(e))&&n.limitType===e.limitType}function Rb(n){return`${j_(ji(n))}|lt:${n.limitType}`}function Ho(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>Ab(a))).join(", ")}]`),yd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>al(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>al(a))).join(",")),`Target(${r})`})(ji(n))}; limitType=${n.limitType})`}function Td(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):me.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of Gu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,d,p){const g=vS(c,d,p);return c.inclusive?g<=0:g<0})(r.startAt,Gu(r),a)||r.endAt&&!(function(c,d,p){const g=vS(c,d,p);return c.inclusive?g>=0:g>0})(r.endAt,Gu(r),a))})(n,e)}function Xx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Cb(n){return(e,t)=>{let r=!1;for(const a of Gu(n)){const l=Jx(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function Jx(n,e,t){const r=n.field.isKeyField()?me.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?sl(p,g):ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:n.dir})}}class Ya{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return cb(this.inner)}size(){return this.innerSize}}const Zx=new kt(me.comparator);function kr(){return Zx}const Ib=new kt(me.comparator);function zu(...n){let e=Ib;for(const t of n)e=e.insert(t.key,t);return e}function Nb(n){let e=Ib;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ka(){return Ku()}function Db(){return Ku()}function Ku(){return new Ya((n=>n.toString()),((n,e)=>n.isEqual(e)))}const ek=new kt(me.comparator),tk=new Ut(me.comparator);function Ve(...n){let e=tk;for(const t of n)e=e.add(t);return e}const nk=new Ut(De);function ik(){return nk}function G_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bf(e)?"-0":e}}function Ob(n){return{integerValue:""+n}}function rk(n,e){return Ox(e)?Ob(e):G_(n,e)}class Sd{constructor(){this._=void 0}}function sk(n,e,t){return n instanceof oc?(function(a,l){const c={fields:{[db]:{stringValue:fb},[pb]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&B_(l)&&(l=vd(l)),l&&(c.fields[mb]=l),{mapValue:c}})(t,e):n instanceof lc?xb(n,e):n instanceof uc?kb(n,e):(function(a,l){const c=Mb(a,l),d=AS(c)+AS(a.Ee);return Vg(c)&&Vg(a.Ee)?Ob(d):G_(a.serializer,d)})(n,e)}function ak(n,e,t){return n instanceof lc?xb(n,e):n instanceof uc?kb(n,e):t}function Mb(n,e){return n instanceof Gf?(function(r){return Vg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class oc extends Sd{}class lc extends Sd{constructor(e){super(),this.elements=e}}function xb(n,e){const t=Pb(e);for(const r of n.elements)t.some((a=>Ki(a,r)))||t.push(r);return{arrayValue:{values:t}}}class uc extends Sd{constructor(e){super(),this.elements=e}}function kb(n,e){let t=Pb(e);for(const r of n.elements)t=t.filter((a=>!Ki(a,r)));return{arrayValue:{values:t}}}class Gf extends Sd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function AS(n){return At(n.integerValue||n.doubleValue)}function Pb(n){return F_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ok{constructor(e,t){this.field=e,this.transform=t}}function lk(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof lc&&a instanceof lc||r instanceof uc&&a instanceof uc?rl(r.elements,a.elements,Ki):r instanceof Gf&&a instanceof Gf?Ki(r.Ee,a.Ee):r instanceof oc&&a instanceof oc})(n.transform,e.transform)}class uk{constructor(e,t){this.version=e,this.transformResults=t}}class _i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ad{}function Vb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ub(n.key,_i.none()):new Ec(n.key,n.data,_i.none());{const t=n.data,r=On.empty();let a=new Ut(sn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Zs(n.key,r,new qn(a.toArray()),_i.none())}}function ck(n,e,t){n instanceof Ec?(function(a,l,c){const d=a.value.clone(),p=bS(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Zs?(function(a,l,c){if(!bf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=bS(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(Lb(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Yu(n,e,t,r){return n instanceof Ec?(function(l,c,d,p){if(!bf(l.precondition,c))return d;const g=l.value.clone(),y=RS(l.fieldTransforms,p,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,r):n instanceof Zs?(function(l,c,d,p){if(!bf(l.precondition,c))return d;const g=RS(l.fieldTransforms,p,c),y=c.data;return y.setAll(Lb(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,r):(function(l,c,d){return bf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function hk(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=Mb(r.transform,a||null);l!=null&&(t===null&&(t=On.empty()),t.set(r.field,l))}return t||null}function wS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&rl(r,a,((l,c)=>lk(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ec extends Ad{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Zs extends Ad{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Lb(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function bS(n,e,t){const r=new Map;Xe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,ak(c,d,t[a]))}return r}function RS(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,sk(l,c,e))}return r}class Ub extends Ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fk extends Ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dk{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&ck(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Db();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=Vb(c,d);p!==null&&r.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Te.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,((t,r)=>wS(t,r)))&&rl(this.baseMutations,e.baseMutations,((t,r)=>wS(t,r)))}}class K_{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Xe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let a=(function(){return ek})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new K_(e,t,r,a)}}class mk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class pk{constructor(e,t){this.count=e,this.unchangedNames=t}}var Dt,Be;function gk(n){switch(n){case X.OK:return ve(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return ve(15467,{code:n})}}function zb(n){if(n===void 0)return xr("GRPC error has no .code"),X.UNKNOWN;switch(n){case Dt.OK:return X.OK;case Dt.CANCELLED:return X.CANCELLED;case Dt.UNKNOWN:return X.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return X.INTERNAL;case Dt.UNAVAILABLE:return X.UNAVAILABLE;case Dt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Dt.NOT_FOUND:return X.NOT_FOUND;case Dt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Dt.ABORTED:return X.ABORTED;case Dt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Dt.DATA_LOSS:return X.DATA_LOSS;default:return ve(39323,{code:n})}}(Be=Dt||(Dt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";const _k=new ks([4294967295,4294967295],0);function CS(n){const e=ob().encode(n),t=new Zw;return t.update(e),new Uint8Array(t.digest())}function IS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ks([t,r],0),new ks([a,l],0)]}class Y_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bu(`Invalid padding: ${t}`);if(r<0)throw new Bu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ks.fromNumber(this.fe)}pe(e,t,r){let a=e.add(t.multiply(ks.fromNumber(r)));return a.compare(_k)===1&&(a=new ks([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=CS(e),[r,a]=IS(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,a,l);if(!this.ye(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Y_(l,a,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.fe===0)return;const t=CS(e),[r,a]=IS(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,a,l);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wd{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new wd(Te.min(),a,new kt(De),kr(),Ve())}}class Tc{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Tc(r,t,Ve(),Ve(),Ve())}}class Rf{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=a}}class Bb{constructor(e,t){this.targetId=e,this.De=t}}class Fb{constructor(e,t,r=an.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class NS{constructor(){this.ve=0,this.Ce=DS(),this.Fe=an.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ve(),t=Ve(),r=Ve();return this.Ce.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ve(38017,{changeType:l})}})),new Tc(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=DS()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class yk{constructor(e){this.We=e,this.Ge=new Map,this.ze=kr(),this.je=ff(),this.Je=ff(),this.He=new kt(De)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,a)=>{this.nt(a)&&t(a)}))}it(e){const t=e.targetId,r=e.De.count,a=this.st(t);if(a){const l=a.target;if(Ug(l))if(r===0){const c=new me(l.path);this.Xe(t,c,fn.newNoDocument(c,Te.min()))}else Xe(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const d=this._t(e),p=d?this.ut(d,e,c):1;if(p!==0){this.rt(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,g)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=qs(r).toUint8Array()}catch(p){if(p instanceof hb)return Bs("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Y_(c,a,l)}catch(p){return Bs(p instanceof Bu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),a++)})),a}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const d=this.st(c);if(d){if(l.current&&Ug(d.target)){const p=new me(d.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,fn.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let r=Ve();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.st(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const a=new wd(e,t,this.He,this.ze,r);return this.ze=kr(),this.je=ff(),this.Je=ff(),this.He=new kt(De),a}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new NS,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ut(De),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ut(De),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new NS),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ff(){return new kt(me.comparator)}function DS(){return new kt(me.comparator)}const vk={asc:"ASCENDING",desc:"DESCENDING"},Ek={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tk={and:"AND",or:"OR"};class Sk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fg(n,e){return n.useProto3Json||yd(e)?e:{value:e}}function Kf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ak(n,e){return Kf(n,e.toTimestamp())}function qi(n){return Xe(!!n,49232),Te.fromTimestamp((function(t){const r=js(t);return new ht(r.seconds,r.nanos)})(n))}function Q_(n,e){return jg(n,e).canonicalString()}function jg(n,e){const t=(function(a){return new st(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function qb(n){const e=st.fromString(n);return Xe(Qb(e),10190,{key:e.toString()}),e}function qg(n,e){return Q_(n.databaseId,e.path)}function sg(n,e){const t=qb(e);if(t.get(1)!==n.databaseId.projectId)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(Gb(t))}function Hb(n,e){return Q_(n.databaseId,e)}function wk(n){const e=qb(n);return e.length===4?st.emptyPath():Gb(e)}function Hg(n){return new st(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Gb(n){return Xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function OS(n,e,t){return{name:qg(n,e),fields:t.value.mapValue.fields}}function bk(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ve(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(Xe(y===void 0||typeof y=="string",58123),an.fromBase64String(y||"")):(Xe(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),an.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const y=g.code===void 0?X.UNKNOWN:zb(g.code);return new le(y,g.message||"")})(c);t=new Fb(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=sg(n,r.document.name),l=qi(r.document.updateTime),c=r.document.createTime?qi(r.document.createTime):Te.min(),d=new On({mapValue:{fields:r.document.fields}}),p=fn.newFoundDocument(a,l,c,d),g=r.targetIds||[],y=r.removedTargetIds||[];t=new Rf(g,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=sg(n,r.document),l=r.readTime?qi(r.readTime):Te.min(),c=fn.newNoDocument(a,l),d=r.removedTargetIds||[];t=new Rf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=sg(n,r.document),l=r.removedTargetIds||[];t=new Rf([],l,a,null)}else{if(!("filter"in e))return ve(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new pk(a,l),d=r.targetId;t=new Bb(d,c)}}return t}function Rk(n,e){let t;if(e instanceof Ec)t={update:OS(n,e.key,e.value)};else if(e instanceof Ub)t={delete:qg(n,e.key)};else if(e instanceof Zs)t={update:OS(n,e.key,e.data),updateMask:Pk(e.fieldMask)};else{if(!(e instanceof fk))return ve(16599,{Rt:e.type});t={verify:qg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof oc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof lc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof uc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Gf)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw ve(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:Ak(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ve(27497)})(n,e.precondition)),t}function Ck(n,e){return n&&n.length>0?(Xe(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?qi(a.updateTime):qi(l);return c.isEqual(Te.min())&&(c=qi(l)),new uk(c,a.transformResults||[])})(t,e)))):[]}function Ik(n,e){return{documents:[Hb(n,e.path)]}}function Nk(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Hb(n,a);const l=(function(g){if(g.length!==0)return Yb(Si.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((y=>(function(S){return{field:Go(S.field),direction:Mk(S.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Fg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{Vt:t,parent:a}}function Dk(n){let e=wk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Xe(r===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(T){const S=Kb(T);return S instanceof Si&&Tb(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((S=>(function(P){return new Hf(Ko(P.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,yd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,I=T.values||[];return new qf(I,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const S=!T.before,I=T.values||[];return new qf(I,S)})(t.endAt)),Wx(e,a,c,l,d,"F",p,g)}function Ok(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Kb(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ko(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Ko(t.unaryFilter.field);return Ot.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ko(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ko(t.unaryFilter.field);return Ot.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ot.create(Ko(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Si.create(t.compositeFilter.filters.map((r=>Kb(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(n):ve(30097,{filter:n})}function Mk(n){return vk[n]}function xk(n){return Ek[n]}function kk(n){return Tk[n]}function Go(n){return{fieldPath:n.canonicalString()}}function Ko(n){return sn.fromServerFormat(n.fieldPath)}function Yb(n){return n instanceof Ot?(function(t){if(t.op==="=="){if(yS(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NAN"}};if(_S(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(yS(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NOT_NAN"}};if(_S(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(t.field),op:xk(t.op),value:t.value}}})(n):n instanceof Si?(function(t){const r=t.getFilters().map((a=>Yb(a)));return r.length===1?r[0]:{compositeFilter:{op:kk(t.op),filters:r}}})(n):ve(54877,{filter:n})}function Pk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Qb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Os{constructor(e,t,r,a,l=Te.min(),c=Te.min(),d=an.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Vk{constructor(e){this.gt=e}}function Lk(n){const e=Dk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bg(e,e.limit,"L"):e}class Uk{constructor(){this.Dn=new zk}addToCollectionParentIndex(e,t){return this.Dn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(Fs.min())}updateCollectionGroup(e,t,r){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class zk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Ut(st.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Ut(st.comparator)).toArray()}}const MS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wb=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(Wb,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);class ol{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ol(0)}static ur(){return new ol(-1)}}const xS="LruGarbageCollector",Bk=1048576;function kS([n,e],[t,r]){const a=De(n,t);return a===0?De(e,r):a}class Fk{constructor(e){this.Tr=e,this.buffer=new Ut(kS),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jk{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ue(xS,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){El(t)?ue(xS,"Ignoring IndexedDB error during garbage collection: ",t):await vl(t)}await this.Rr(3e5)}))}}class qk{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(_d.ue);const r=new Fk(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(MS)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),MS):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,a,l,c,d,p,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(r=T,d=Date.now(),this.removeTargets(e,r,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(g=Date.now(),qo()<=xe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-y}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function Hk(n,e){return new qk(n,e)}class Gk{constructor(){this.changes=new Ya((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Kk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Yk{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Yu(r.mutation,a,qn.empty(),ht.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ve()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ve()){const a=ka();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=zu();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=ka();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ve())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,a){let l=kr();const c=Ku(),d=(function(){return Ku()})();return t.forEach(((p,g)=>{const y=r.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof Zs)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),Yu(y.mutation,g,y.mutation.getFieldMask(),ht.now())):c.set(g.key,qn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,y)=>c.set(g,y))),t.forEach(((g,y)=>{var T;return d.set(g,new Kk(y,(T=c.get(g))!==null&&T!==void 0?T:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=Ku();let a=new kt(((c,d)=>c-d)),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let y=r.get(p)||qn.empty();y=d.applyToLocalView(g,y),r.set(p,y);const T=(a.get(d.batchId)||Ve()).add(p);a=a.insert(d.batchId,T)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,y=p.value,T=Db();y.forEach((S=>{if(!l.has(S)){const I=Vb(t.get(S),r.get(S));I!==null&&T.set(S,I),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return Z.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return me.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):Z.resolve(ka());let d=ic,p=l;return c.next((g=>Z.forEach(g,((y,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(y)?Z.resolve():this.remoteDocumentCache.getEntry(e,y).next((S=>{p=p.insert(y,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Ve()))).next((y=>({batchId:d,changes:Nb(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next((r=>{let a=zu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=zu();return this.indexManager.getCollectionParents(e,l).next((d=>Z.forEach(d,(p=>{const g=(function(T,S){return new Tl(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((y=>{y.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((p,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,fn.newInvalidDocument(y)))}));let d=zu();return c.forEach(((p,g)=>{const y=l.get(p);y!==void 0&&Yu(y.mutation,g,qn.empty(),ht.now()),Td(t,g)&&(d=d.insert(p,g))})),d}))}}class Qk{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Z.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:qi(a.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(a){return{name:a.name,query:Lk(a.bundledQuery),readTime:qi(a.readTime)}})(t)),Z.resolve()}}class Wk{constructor(){this.overlays=new kt(me.comparator),this.kr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ka();return Z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.wt(e,t,l)})),Z.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.kr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(r)),Z.resolve()}getOverlaysForCollection(e,t,r){const a=ka(),l=t.length+1,c=new me(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>r&&a.set(p.getKey(),p)}return Z.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new kt(((g,y)=>g-y));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let y=l.get(g.largestBatchId);y===null&&(y=ka(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const d=ka(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,y)=>d.set(g,y))),!(d.size()>=a)););return Z.resolve(d)}wt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.kr.get(a.largestBatchId).delete(r.key);this.kr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new mk(t,r));let l=this.kr.get(t);l===void 0&&(l=Ve(),this.kr.set(t,l)),this.kr.set(t,l.add(r.key))}}class $k{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}class W_{constructor(){this.qr=new Ut(Gt.Qr),this.$r=new Ut(Gt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Gt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Gt(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new me(new st([])),r=new Gt(t,e),a=new Gt(t,e+1),l=[];return this.$r.forEachInRange([r,a],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new me(new st([])),r=new Gt(t,e),a=new Gt(t,e+1);let l=Ve();return this.$r.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Gt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return me.comparator(e.key,t.key)||De(e.Hr,t.Hr)}static Ur(e,t){return De(e.Hr,t.Hr)||me.comparator(e.key,t.key)}}class Xk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ut(Gt.Qr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new dk(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Yr=this.Yr.add(new Gt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Z.resolve(c)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return Z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?z_:this.er-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gt(t,0),a=new Gt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([r,a],(c=>{const d=this.Zr(c.Hr);l.push(d)})),Z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(De);return t.forEach((a=>{const l=new Gt(a,0),c=new Gt(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(d=>{r=r.add(d.Hr)}))})),Z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;me.isDocumentKey(l)||(l=l.child(""));const c=new Gt(new me(l),0);let d=new Ut(De);return this.Yr.forEachWhile((p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Hr)),!0)}),c),Z.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Xe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Z.forEach(t.mutations,(a=>{const l=new Gt(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new Gt(t,0),a=this.Yr.firstAfterOrEqual(r);return Z.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Jk{constructor(e){this.ni=e,this.docs=(function(){return new kt(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Z.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let r=kr();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():fn.newInvalidDocument(a))})),Z.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=kr();const c=t.path,d=new me(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:y}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Cx(Rx(y),r)<=0||(a.has(y.key)||Td(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return Z.resolve(l)}getAllFromCollectionGroup(e,t,r,a){ve(9500)}ri(e,t){return Z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Zk(this)}getSize(e){return Z.resolve(this.size)}}class Zk extends Gk{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(r)})),Z.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class eP{constructor(e){this.persistence=e,this.ii=new Ya((t=>j_(t)),q_),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.si=0,this.oi=new W_,this.targetCount=0,this._i=ol.ar()}forEachTarget(e,t){return this.ii.forEach(((r,a)=>t(a))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),Z.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ol(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.hr(t),Z.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ii.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),Z.waitFor(l).next((()=>a))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return Z.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),Z.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),Z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return Z.resolve(r)}containsKey(e,t){return Z.resolve(this.oi.containsKey(t))}}class $b{constructor(e,t){this.ai={},this.overlays={},this.ui=new _d(0),this.ci=!1,this.ci=!0,this.li=new $k,this.referenceDelegate=e(this),this.hi=new eP(this),this.indexManager=new Uk,this.remoteDocumentCache=(function(a){return new Jk(a)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new Vk(t),this.Ti=new Qk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Wk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Xk(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const a=new tP(this.ui.next());return this.referenceDelegate.Ii(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return Z.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class tP extends Nx{constructor(e){super(),this.currentSequenceNumber=e}}class $_{constructor(e){this.persistence=e,this.Ai=new W_,this.Ri=null}static Vi(e){return new $_(e)}get mi(){if(this.Ri)return this.Ri;throw ve(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),Z.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((a=>this.mi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.mi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.mi,(r=>{const a=me.fromPath(r);return this.fi(e,a).next((l=>{l||t.removeEntry(a,Te.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return Z.or([()=>Z.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Yf{constructor(e,t){this.persistence=e,this.gi=new Ya((r=>Mx(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=Hk(this,t)}static Vi(e,t){return new Yf(e,t)}Ii(){}di(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return Z.forEach(this.gi,((r,a)=>this.Sr(e,r,a).next((l=>l?Z.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(e,(c=>this.Sr(e,c,t).next((d=>{d||(r++,l.removeEntry(c,Te.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Af(e.data.value)),t}Sr(e,t,r){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return Z.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class X_{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=a}static Es(e,t){let r=Ve(),a=Ve();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new X_(e,t.fromCache,r,a)}}class nP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class iP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return DD()?8:Dx(gn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new nP;return this.ws(e,t,c).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,c,d.size)}))})).next((()=>l.result))}Ss(e,t,r,a){return r.documentReadCount<this.Vs?(qo()<=xe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ho(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(qo()<=xe.DEBUG&&ue("QueryEngine","Query:",Ho(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.fs*a?(qo()<=xe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ho(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(t))):Z.resolve())}ps(e,t){if(SS(t))return Z.resolve(null);let r=ji(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Bg(t,null,"F"),r=ji(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Ve(...l);return this.gs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((p=>{const g=this.bs(t,d);return this.Ds(t,g,c,p.readTime)?this.ps(e,Bg(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ys(e,t,r,a){return SS(t)||a.isEqual(Te.min())?Z.resolve(null):this.gs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,r,a)?Z.resolve(null):(qo()<=xe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ho(t)),this.vs(e,c,t,bx(a,ic)).next((d=>d)))}))}bs(e,t){let r=new Ut(Cb(e));return t.forEach(((a,l)=>{Td(e,l)&&(r=r.add(l))})),r}Ds(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(e,t,r){return qo()<=xe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ho(t)),this.gs.getDocumentsMatchingQuery(e,t,Fs.min(),r)}vs(e,t,r,a){return this.gs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const J_="LocalStore",rP=3e8;class sP{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new kt(De),this.Ms=new Ya((l=>j_(l)),q_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yk(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function aP(n,e,t,r){return new sP(n,e,t,r)}async function Xb(n,e){const t=we(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let p=Ve();for(const g of a){c.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}for(const g of l){d.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}return t.localDocuments.getDocuments(r,p).next((g=>({Bs:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function oP(n,e){const t=we(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,y){const T=g.batch,S=T.keys();let I=Z.resolve();return S.forEach((P=>{I=I.next((()=>y.getEntry(p,P))).next((z=>{const F=g.docVersions.get(P);Xe(F!==null,48541),z.version.compareTo(F)<0&&(T.applyToRemoteDocument(z,g),z.isValidDocument()&&(z.setReadTime(g.commitVersion),y.addEntry(z)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let p=Ve();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function Jb(n){const e=we(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function lP(n,e){const t=we(n),r=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const d=[];e.targetChanges.forEach(((y,T)=>{const S=a.get(T);if(!S)return;d.push(t.hi.removeMatchingKeys(l,y.removedDocuments,T).next((()=>t.hi.addMatchingKeys(l,y.addedDocuments,T))));let I=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?I=I.withResumeToken(an.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):y.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(y.resumeToken,r)),a=a.insert(T,I),(function(z,F,ne){return z.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=rP?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(S,I,y)&&d.push(t.hi.updateTargetData(l,I))}));let p=kr(),g=Ve();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),d.push(uP(l,c,e.documentUpdates).next((y=>{p=y.Ls,g=y.ks}))),!r.isEqual(Te.min())){const y=t.hi.getLastRemoteSnapshotVersion(l).next((T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(y)}return Z.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Fs=a,l)))}function uP(n,e,t){let r=Ve(),a=Ve();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=kr();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Te.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ue(J_,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Ls:c,ks:a}}))}function cP(n,e){const t=we(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=z_),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function hP(n,e){const t=we(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.hi.getTargetData(r,e).next((l=>l?(a=l,Z.resolve(a)):t.hi.allocateTargetId(r).next((c=>(a=new Os(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Fs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function Gg(n,e,t){const r=we(n),a=r.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!El(c))throw c;ue(J_,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(a.target)}function PS(n,e,t){const r=we(n);let a=Te.min(),l=Ve();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,y){const T=we(p),S=T.Ms.get(y);return S!==void 0?Z.resolve(T.Fs.get(S)):T.hi.getTargetData(g,y)})(r,c,ji(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?a:Te.min(),t?l:Ve()))).next((d=>(fP(r,Xx(e),d),{documents:d,qs:l})))))}function fP(n,e,t){let r=n.xs.get(e)||Te.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.xs.set(e,r)}class VS{constructor(){this.activeTargetIds=ik()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dP{constructor(){this.Fo=new VS,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new VS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mP{xo(e){}shutdown(){}}const LS="ConnectivityMonitor";class US{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ue(LS,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ue(LS,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let df=null;function Kg(){return df===null?df=(function(){return 268435456+Math.round(2147483648*Math.random())})():df++,"0x"+df.toString(16)}const ag="RestConnection",pP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.Ko=this.databaseId.database===Ff?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const c=Kg(),d=this.Go(e,t.toUriEncodedString());ue(ag,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,a,l);const{host:g}=new URL(d),y=Ws(g);return this.jo(e,d,p,r,y).then((T=>(ue(ag,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Bs(ag,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",r),T}))}Jo(e,t,r,a,l,c){return this.Wo(e,t,r,a,l)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Go(e,t){const r=pP[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}class _P{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const cn="WebChannelConnection";class yP extends gP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,a,l){const c=Kg();return new Promise(((d,p)=>{const g=new eb;g.setWithCredentials(!0),g.listenOnce(tb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Sf.NO_ERROR:const T=g.getResponseJson();ue(cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case Sf.TIMEOUT:ue(cn,`RPC '${e}' ${c} timed out`),p(new le(X.DEADLINE_EXCEEDED,"Request time out"));break;case Sf.HTTP_ERROR:const S=g.getStatus();if(ue(cn,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I?.error;if(P&&P.status&&P.message){const z=(function(ne){const ee=ne.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ee)>=0?ee:X.UNKNOWN})(P.status);p(new le(z,P.message))}else p(new le(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new le(X.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{c_:e,streamId:c,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{ue(cn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);ue(cn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",y,r,15)}))}P_(e,t,r){const a=Kg(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=rb(),d=ib(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const y=l.join("");ue(cn,`Creating RPC '${e}' stream ${a}: ${y}`,p);const T=c.createWebChannel(y,p);this.T_(T);let S=!1,I=!1;const P=new _P({Ho:F=>{I?ue(cn,`Not sending because RPC '${e}' stream ${a} is closed:`,F):(S||(ue(cn,`Opening RPC '${e}' stream ${a} transport.`),T.open(),S=!0),ue(cn,`RPC '${e}' stream ${a} sending:`,F),T.send(F))},Yo:()=>T.close()}),z=(F,ne,ee)=>{F.listen(ne,(ie=>{try{ee(ie)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return z(T,Uu.EventType.OPEN,(()=>{I||(ue(cn,`RPC '${e}' stream ${a} transport opened.`),P.s_())})),z(T,Uu.EventType.CLOSE,(()=>{I||(I=!0,ue(cn,`RPC '${e}' stream ${a} transport closed`),P.__(),this.I_(T))})),z(T,Uu.EventType.ERROR,(F=>{I||(I=!0,Bs(cn,`RPC '${e}' stream ${a} transport errored. Name:`,F.name,"Message:",F.message),P.__(new le(X.UNAVAILABLE,"The operation could not be completed")))})),z(T,Uu.EventType.MESSAGE,(F=>{var ne;if(!I){const ee=F.data[0];Xe(!!ee,16349);const ie=ee,ge=ie?.error||((ne=ie[0])===null||ne===void 0?void 0:ne.error);if(ge){ue(cn,`RPC '${e}' stream ${a} received error:`,ge);const Ce=ge.status;let Se=(function(R){const M=Dt[R];if(M!==void 0)return zb(M)})(Ce),D=ge.message;Se===void 0&&(Se=X.INTERNAL,D="Unknown error status: "+Ce+" with message "+ge.message),I=!0,P.__(new le(Se,D)),T.close()}else ue(cn,`RPC '${e}' stream ${a} received:`,ee),P.a_(ee)}})),z(d,nb.STAT_EVENT,(F=>{F.stat===Mg.PROXY?ue(cn,`RPC '${e}' stream ${a} detected buffering proxy`):F.stat===Mg.NOPROXY&&ue(cn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{P.o_()}),0),P}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function og(){return typeof document<"u"?document:null}function bd(n){return new Sk(n,!0)}class Zb{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-r);a>0&&ue("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const zS="PersistentStream";class eR{constructor(e,t,r,a,l,c,d,p){this.Fi=e,this.w_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Zb(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(xr(t.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.b_===t&&this.W_(r,a)}),(r=>{e((()=>{const a=new le(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(a)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{r((()=>this.G_(a)))})),this.stream.onMessage((a=>{r((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ue(zS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ue(zS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vP extends eR{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=bk(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Te.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Te.min():c.readTime?qi(c.readTime):Te.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Hg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Ug(p)?{documents:Ik(l,p)}:{query:Nk(l,p).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=jb(l,c.resumeToken);const g=Fg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Te.min())>0){d.readTime=Kf(l,c.snapshotVersion.toTimestamp());const g=Fg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const r=Ok(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Hg(this.serializer),t.removeTarget=e,this.k_(t)}}class EP extends eR{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=Ck(e.writeResults,e.commitTime),r=qi(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Hg(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Rk(this.serializer,r)))};this.k_(t)}}class TP{}class SP extends TP{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,jg(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(X.UNKNOWN,l.toString())}))}Jo(e,t,r,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Jo(e,jg(t,r),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new le(X.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class AP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xr(t),this._a=!1):ue("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}const Fa="RemoteStore";class wP{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{r.enqueueAndForget((async()=>{Qa(this)&&(ue(Fa,"Restarting streams for network reachability change."),await(async function(p){const g=we(p);g.Ia.add(4),await Sc(g),g.Aa.set("Unknown"),g.Ia.delete(4),await Rd(g)})(this))}))})),this.Aa=new AP(r,a)}}async function Rd(n){if(Qa(n))for(const e of n.da)await e(!0)}async function Sc(n){for(const e of n.da)await e(!1)}function tR(n,e){const t=we(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ny(t)?ty(t):Sl(t).x_()&&ey(t,e))}function Z_(n,e){const t=we(n),r=Sl(t);t.Ta.delete(e),r.x_()&&nR(t,e),t.Ta.size===0&&(r.x_()?r.B_():Qa(t)&&t.Aa.set("Unknown"))}function ey(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sl(n).H_(e)}function nR(n,e){n.Ra.$e(e),Sl(n).Y_(e)}function ty(n){n.Ra=new yk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Sl(n).start(),n.Aa.aa()}function ny(n){return Qa(n)&&!Sl(n).M_()&&n.Ta.size>0}function Qa(n){return we(n).Ia.size===0}function iR(n){n.Ra=void 0}async function bP(n){n.Aa.set("Online")}async function RP(n){n.Ta.forEach(((e,t)=>{ey(n,e)}))}async function CP(n,e){iR(n),ny(n)?(n.Aa.la(e),ty(n)):n.Aa.set("Unknown")}async function IP(n,e,t){if(n.Aa.set("Online"),e instanceof Fb&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ta.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ta.delete(d),a.Ra.removeTarget(d))})(n,e)}catch(r){ue(Fa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qf(n,r)}else if(e instanceof Rf?n.Ra.Ye(e):e instanceof Bb?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Te.min()))try{const r=await Jb(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.Ra.Pt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const y=l.Ta.get(g);y&&l.Ta.set(g,y.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const y=l.Ta.get(p);if(!y)return;l.Ta.set(p,y.withResumeToken(an.EMPTY_BYTE_STRING,y.snapshotVersion)),nR(l,p);const T=new Os(y.target,p,g,y.sequenceNumber);ey(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){ue(Fa,"Failed to raise snapshot:",r),await Qf(n,r)}}async function Qf(n,e,t){if(!El(e))throw e;n.Ia.add(1),await Sc(n),n.Aa.set("Offline"),t||(t=()=>Jb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(Fa,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Rd(n)}))}function rR(n,e){return e().catch((t=>Qf(n,t,e)))}async function Cd(n){const e=we(n),t=Gs(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:z_;for(;NP(e);)try{const a=await cP(e.localStore,r);if(a===null){e.Pa.length===0&&t.B_();break}r=a.batchId,DP(e,a)}catch(a){await Qf(e,a)}sR(e)&&aR(e)}function NP(n){return Qa(n)&&n.Pa.length<10}function DP(n,e){n.Pa.push(e);const t=Gs(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function sR(n){return Qa(n)&&!Gs(n).M_()&&n.Pa.length>0}function aR(n){Gs(n).start()}async function OP(n){Gs(n).na()}async function MP(n){const e=Gs(n);for(const t of n.Pa)e.X_(t.mutations)}async function xP(n,e,t){const r=n.Pa.shift(),a=K_.from(r,e,t);await rR(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Cd(n)}async function kP(n,e){e&&Gs(n).Z_&&await(async function(r,a){if((function(c){return gk(c)&&c!==X.ABORTED})(a.code)){const l=r.Pa.shift();Gs(r).N_(),await rR(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Cd(r)}})(n,e),sR(n)&&aR(n)}async function BS(n,e){const t=we(n);t.asyncQueue.verifyOperationInProgress(),ue(Fa,"RemoteStore received new credentials");const r=Qa(t);t.Ia.add(3),await Sc(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Rd(t)}async function PP(n,e){const t=we(n);e?(t.Ia.delete(2),await Rd(t)):e||(t.Ia.add(2),await Sc(t),t.Aa.set("Unknown"))}function Sl(n){return n.Va||(n.Va=(function(t,r,a){const l=we(t);return l.ia(),new vP(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:bP.bind(null,n),e_:RP.bind(null,n),n_:CP.bind(null,n),J_:IP.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),ny(n)?ty(n):n.Aa.set("Unknown")):(await n.Va.stop(),iR(n))}))),n.Va}function Gs(n){return n.ma||(n.ma=(function(t,r,a){const l=we(t);return l.ia(),new EP(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:OP.bind(null,n),n_:kP.bind(null,n),ea:MP.bind(null,n),ta:xP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Cd(n)):(await n.ma.stop(),n.Pa.length>0&&(ue(Fa,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}class iy{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new iy(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ry(n,e){if(xr("AsyncQueue",`${e}: ${n}`),El(n))return new le(X.UNAVAILABLE,`${e}: ${n}`);throw n}class Zo{static emptySet(e){return new Zo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||me.comparator(t.key,r.key):(t,r)=>me.comparator(t.key,r.key),this.keyedMap=zu(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Zo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class FS{constructor(){this.fa=new kt(me.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ve(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ll{constructor(e,t,r,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new ll(e,t,Zo.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class VP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class LP{constructor(){this.queries=jS(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const a=we(t),l=a.queries;a.queries=jS(),l.forEach(((c,d)=>{for(const p of d.wa)p.onError(r)}))})(this,new le(X.ABORTED,"Firestore shutting down"))}}function jS(){return new Ya((n=>Rb(n)),Ed)}async function oR(n,e){const t=we(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.ba()&&(r=2):(l=new VP,r=e.ba()?0:1);try{switch(r){case 0:l.ya=await t.onListen(a,!0);break;case 1:l.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=ry(c,`Initialization of query '${Ho(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&sy(t)}async function lR(n,e){const t=we(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?a=e.ba()?0:1:!l.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function UP(n,e){const t=we(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.wa)d.Ca(a)&&(r=!0);c.ya=a}}r&&sy(t)}function zP(n,e,t){const r=we(n),a=r.queries.get(e);if(a)for(const l of a.wa)l.onError(t);r.queries.delete(e)}function sy(n){n.Da.forEach((e=>{e.next()}))}var Yg,qS;(qS=Yg||(Yg={})).Fa="default",qS.Cache="cache";class uR{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new ll(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Yg.Cache}}class cR{constructor(e){this.key=e}}class hR{constructor(e){this.key=e}}class BP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ve(),this.mutatedKeys=Ve(),this.Xa=Cb(e),this.eu=new Zo(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new FS,a=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,T)=>{const S=a.get(y),I=Td(this.query,T)?T:null,P=!!S&&this.mutatedKeys.has(S.key),z=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let F=!1;S&&I?S.data.isEqual(I.data)?P!==z&&(r.track({type:3,doc:I}),F=!0):this.iu(S,I)||(r.track({type:2,doc:I}),F=!0,(p&&this.Xa(I,p)>0||g&&this.Xa(I,g)<0)&&(d=!0)):!S&&I?(r.track({type:0,doc:I}),F=!0):S&&!I&&(r.track({type:1,doc:S}),F=!0,(p||g)&&(d=!0)),F&&(I?(c=c.add(I),l=z?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{eu:c,ru:r,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((y,T)=>(function(I,P){const z=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{At:F})}};return z(I)-z(P)})(y.type,T.type)||this.Xa(y.doc,T.doc))),this.su(r),a=a!=null&&a;const d=t&&!a?this.ou():[],p=this.Za.size===0&&this.current&&!a?1:0,g=p!==this.Ya;return this.Ya=p,c.length!==0||g?{snapshot:new ll(this.query,e.eu,l,c,e.mutatedKeys,p===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new FS,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ve(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new hR(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new cR(r))})),t}uu(e){this.Ha=e.qs,this.Za=Ve();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ll.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ay="SyncEngine";class FP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jP{constructor(e){this.key=e,this.lu=!1}}class qP{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Ya((d=>Rb(d)),Ed),this.Tu=new Map,this.Iu=new Set,this.du=new kt(me.comparator),this.Eu=new Map,this.Au=new W_,this.Ru={},this.Vu=new Map,this.mu=ol.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function HP(n,e,t=!0){const r=_R(n);let a;const l=r.Pu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await fR(r,e,t,!0),a}async function GP(n,e){const t=_R(n);await fR(t,e,!0,!1)}async function fR(n,e,t,r){const a=await hP(n.localStore,ji(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await KP(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&tR(n.remoteStore,a),d}async function KP(n,e,t,r,a){n.gu=(T,S,I)=>(async function(z,F,ne,ee){let ie=F.view.nu(ne);ie.Ds&&(ie=await PS(z.localStore,F.query,!1).then((({documents:D})=>F.view.nu(D,ie))));const ge=ee&&ee.targetChanges.get(F.targetId),Ce=ee&&ee.targetMismatches.get(F.targetId)!=null,Se=F.view.applyChanges(ie,z.isPrimaryClient,ge,Ce);return GS(z,F.targetId,Se._u),Se.snapshot})(n,T,S,I);const l=await PS(n.localStore,e,!0),c=new BP(e,l.qs),d=c.nu(l.documents),p=Tc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,p);GS(n,t,g._u);const y=new FP(e,t,c);return n.Pu.set(e,y),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),g.snapshot}async function YP(n,e,t){const r=we(n),a=r.Pu.get(e),l=r.Tu.get(a.targetId);if(l.length>1)return r.Tu.set(a.targetId,l.filter((c=>!Ed(c,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Gg(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Z_(r.remoteStore,a.targetId),Qg(r,a.targetId)})).catch(vl)):(Qg(r,a.targetId),await Gg(r.localStore,a.targetId,!0))}async function QP(n,e){const t=we(n),r=t.Pu.get(e),a=t.Tu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Z_(t.remoteStore,r.targetId))}async function WP(n,e,t){const r=nV(n);try{const a=await(function(c,d){const p=we(c),g=ht.now(),y=d.reduce(((I,P)=>I.add(P.key)),Ve());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let P=kr(),z=Ve();return p.Os.getEntries(I,y).next((F=>{P=F,P.forEach(((ne,ee)=>{ee.isValidDocument()||(z=z.add(ne))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,P))).next((F=>{T=F;const ne=[];for(const ee of d){const ie=hk(ee,T.get(ee.key).overlayedDocument);ie!=null&&ne.push(new Zs(ee.key,ie,yb(ie.value.mapValue),_i.exists(!0)))}return p.mutationQueue.addMutationBatch(I,g,ne,d)})).next((F=>{S=F;const ne=F.applyToLocalDocumentSet(T,z);return p.documentOverlayCache.saveOverlays(I,F.batchId,ne)}))})).then((()=>({batchId:S.batchId,changes:Nb(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.Ru[c.currentUser.toKey()];g||(g=new kt(De)),g=g.insert(d,p),c.Ru[c.currentUser.toKey()]=g})(r,a.batchId,t),await Ac(r,a.changes),await Cd(r.remoteStore)}catch(a){const l=ry(a,"Failed to persist write");t.reject(l)}}async function dR(n,e){const t=we(n);try{const r=await lP(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Eu.get(l);c&&(Xe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.lu=!0:a.modifiedDocuments.size>0?Xe(c.lu,14607):a.removedDocuments.size>0&&(Xe(c.lu,42227),c.lu=!1))})),await Ac(t,r,e)}catch(r){await vl(r)}}function HS(n,e,t){const r=we(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Pu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=we(c);p.onlineState=d;let g=!1;p.queries.forEach(((y,T)=>{for(const S of T.wa)S.va(d)&&(g=!0)})),g&&sy(p)})(r.eventManager,e),a.length&&r.hu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $P(n,e,t){const r=we(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Eu.get(e),l=a&&a.key;if(l){let c=new kt(me.comparator);c=c.insert(l,fn.newNoDocument(l,Te.min()));const d=Ve().add(l),p=new wd(Te.min(),new Map,new kt(De),c,d);await dR(r,p),r.du=r.du.remove(l),r.Eu.delete(e),oy(r)}else await Gg(r.localStore,e,!1).then((()=>Qg(r,e,t))).catch(vl)}async function XP(n,e){const t=we(n),r=e.batch.batchId;try{const a=await oP(t.localStore,e);pR(t,r,null),mR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ac(t,a)}catch(a){await vl(a)}}async function JP(n,e,t){const r=we(n);try{const a=await(function(c,d){const p=we(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return p.mutationQueue.lookupMutationBatch(g,d).next((T=>(Xe(T!==null,37113),y=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,y,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>p.localDocuments.getDocuments(g,y)))}))})(r.localStore,e);pR(r,e,t),mR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ac(r,a)}catch(a){await vl(a)}}function mR(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function pR(n,e,t){const r=we(n);let a=r.Ru[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Ru[r.currentUser.toKey()]=a}}function Qg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||gR(n,r)}))}function gR(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Z_(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),oy(n))}function GS(n,e,t){for(const r of t)r instanceof cR?(n.Au.addReference(r.key,e),ZP(n,r)):r instanceof hR?(ue(ay,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||gR(n,r.key)):ve(19791,{yu:r})}function ZP(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ue(ay,"New document in limbo: "+t),n.Iu.add(r),oy(n))}function oy(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new me(st.fromString(e)),r=n.mu.next();n.Eu.set(r,new jP(t)),n.du=n.du.insert(t,r),tR(n.remoteStore,new Os(ji(H_(t.path)),r,"TargetPurposeLimboResolution",_d.ue))}}async function Ac(n,e,t){const r=we(n),a=[],l=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,p)=>{c.push(r.gu(p,e,t).then((g=>{var y;if((g||t)&&r.isPrimaryClient){const T=g?!g.fromCache:(y=t?.targetChanges.get(p.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(g){a.push(g);const T=X_.Es(p.targetId,g);l.push(T)}})))})),await Promise.all(c),r.hu.J_(a),await(async function(p,g){const y=we(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>Z.forEach(g,(S=>Z.forEach(S.Is,(I=>y.persistence.referenceDelegate.addReference(T,S.targetId,I))).next((()=>Z.forEach(S.ds,(I=>y.persistence.referenceDelegate.removeReference(T,S.targetId,I)))))))))}catch(T){if(!El(T))throw T;ue(J_,"Failed to update sequence numbers: "+T)}for(const T of g){const S=T.targetId;if(!T.fromCache){const I=y.Fs.get(S),P=I.snapshotVersion,z=I.withLastLimboFreeSnapshotVersion(P);y.Fs=y.Fs.insert(S,z)}}})(r.localStore,l))}async function eV(n,e){const t=we(n);if(!t.currentUser.isEqual(e)){ue(ay,"User change. New user:",e.toKey());const r=await Xb(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((d=>{d.forEach((p=>{p.reject(new le(X.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ac(t,r.Bs)}}function tV(n,e){const t=we(n),r=t.Eu.get(e);if(r&&r.lu)return Ve().add(r.key);{let a=Ve();const l=t.Tu.get(e);if(!l)return a;for(const c of l){const d=t.Pu.get(c);a=a.unionWith(d.view.tu)}return a}}function _R(n){const e=we(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$P.bind(null,e),e.hu.J_=UP.bind(null,e.eventManager),e.hu.pu=zP.bind(null,e.eventManager),e}function nV(n){const e=we(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JP.bind(null,e),e}class Wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return aP(this.persistence,new iP,e.initialUser,this.serializer)}Du(e){return new $b($_.Vi,this.serializer)}bu(e){return new dP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wf.provider={build:()=>new Wf};class iV extends Wf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Xe(this.persistence.referenceDelegate instanceof Yf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jk(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new $b((r=>Yf.Vi(r,t)),this.serializer)}}class Wg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>HS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eV.bind(null,this.syncEngine),await PP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new LP})()}createDatastore(e){const t=bd(e.databaseInfo.databaseId),r=(function(l){return new yP(l)})(e.databaseInfo);return(function(l,c,d,p){return new SP(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,d){return new wP(r,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>HS(this.syncEngine,t,0)),(function(){return US.C()?new US:new mP})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,y){const T=new qP(a,l,c,d,p,g);return y&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=we(a);ue(Fa,"RemoteStore shutting down."),l.Ia.add(5),await Sc(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Wg.provider={build:()=>new Wg};class yR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ks="FirestoreClient";class rV{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=hn.UNAUTHENTICATED,this.clientId=L_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{ue(Ks,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ue(Ks,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ry(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function lg(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Ks,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await Xb(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>{Bs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{ue("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{Bs("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),n._offlineComponents=e}async function KS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await sV(n);ue(Ks,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>BS(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>BS(e.remoteStore,a))),n._onlineComponents=e}async function sV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Ks,"Using user provided OfflineComponentProvider");try{await lg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===X.FAILED_PRECONDITION||a.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Bs("Error using user provided cache. Falling back to memory cache: "+t),await lg(n,new Wf)}}else ue(Ks,"Using default OfflineComponentProvider"),await lg(n,new iV(void 0));return n._offlineComponents}async function vR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Ks,"Using user provided OnlineComponentProvider"),await KS(n,n._uninitializedComponentsProvider._online)):(ue(Ks,"Using default OnlineComponentProvider"),await KS(n,new Wg))),n._onlineComponents}function aV(n){return vR(n).then((e=>e.syncEngine))}async function ER(n){const e=await vR(n),t=e.eventManager;return t.onListen=HP.bind(null,e.syncEngine),t.onUnlisten=YP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=GP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QP.bind(null,e.syncEngine),t}function oV(n,e,t={}){const r=new Cr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const y=new yR({next:S=>{y.Ou(),c.enqueueAndForget((()=>lR(l,T)));const I=S.docs.has(d);!I&&S.fromCache?g.reject(new le(X.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&p&&p.source==="server"?g.reject(new le(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),T=new uR(H_(d.path),y,{includeMetadataChanges:!0,ka:!0});return oR(l,T)})(await ER(n),n.asyncQueue,e,t,r))),r.promise}function lV(n,e,t={}){const r=new Cr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const y=new yR({next:S=>{y.Ou(),c.enqueueAndForget((()=>lR(l,T))),S.fromCache&&p.source==="server"?g.reject(new le(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),T=new uR(d,y,{includeMetadataChanges:!0,ka:!0});return oR(l,T)})(await ER(n),n.asyncQueue,e,t,r))),r.promise}function TR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const YS=new Map;const SR="firestore.googleapis.com",QS=!0;class WS{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new le(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SR,this.ssl=QS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:QS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Wb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bk)throw new le(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wc{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new px;switch(r.type){case"firstParty":return new vx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=YS.get(t);r&&(ue("ComponentProvider","Removing Datastore"),YS.delete(t),r.terminate())})(this),Promise.resolve()}}function uV(n,e,t,r={}){var a;n=Ti(n,wc);const l=Ws(e),c=n._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(S_(`https://${p}`),A_("Firestore",!0)),c.host!==SR&&c.host!==p&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:r});if(!Us(g,d)&&(n._setSettings(g),r.mockUserToken)){let y,T;if(typeof r.mockUserToken=="string")y=r.mockUserToken,T=hn.MOCK_USER;else{y=hw(r.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new le(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new hn(S)}n._authCredentials=new gx(new ab(y,T))}}class Wa{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wa(this.firestore,e,this._query)}}class wt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(vc(t,wt._jsonSchema))return new wt(e,r||null,new me(st.fromString(t.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:Mt("string",wt._jsonSchemaVersion),referencePath:Mt("string")};class Vs extends Wa{constructor(e,t,r){super(e,t,H_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new me(e))}withConverter(e){return new Vs(this.firestore,e,this._path)}}function ly(n,e,...t){if(n=xt(n),U_("collection","path",e),n instanceof wc){const r=st.fromString(e,...t);return lS(r),new Vs(n,null,r)}{if(!(n instanceof wt||n instanceof Vs))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(st.fromString(e,...t));return lS(r),new Vs(n.firestore,null,r)}}function AR(n,e){if(n=Ti(n,wc),U_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new le(X.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wa(n,null,(function(r){return new Tl(st.emptyPath(),r)})(e))}function Id(n,e,...t){if(n=xt(n),arguments.length===1&&(e=L_.newId()),U_("doc","path",e),n instanceof wc){const r=st.fromString(e,...t);return oS(r),new wt(n,null,new me(r))}{if(!(n instanceof wt||n instanceof Vs))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(st.fromString(e,...t));return oS(r),new wt(n.firestore,n instanceof Vs?n.converter:null,new me(r))}}const $S="AsyncQueue";class XS{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Zb(this,"async_queue_retry"),this.oc=()=>{const r=og();r&&ue($S,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=og();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=og();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Cr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!El(e))throw e;ue($S,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,xr("INTERNAL UNHANDLED ERROR: ",JS(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=iy.createAndSchedule(this,e,t,r,(l=>this.lc(l)));return this.ec.push(a),a}ac(){this.tc&&ve(47125,{hc:JS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function JS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Al extends wc{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new XS,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new XS(e),this._firestoreClient=void 0,await e}}}function cV(n,e){const t=typeof n=="object"?n:R_(),r=typeof n=="string"?n:Ff,a=fd(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=lw("firestore");l&&uV(a,...l)}return a}function uy(n){if(n._terminated)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||hV(n),n._firestoreClient}function hV(n){var e,t,r;const a=n._freezeSettings(),l=(function(d,p,g,y){return new Px(d,p,g,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,TR(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new rV(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const p=d?._online.build();return{_offline:d?._offline.build(p),_online:p}})(n._componentsProvider))}class ri{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ri(an.fromBase64String(e))}catch(t){throw new le(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ri(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ri._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vc(e,ri._jsonSchema))return ri.fromBase64String(e.bytes)}}ri._jsonSchemaVersion="firestore/bytes/1.0",ri._jsonSchema={type:Mt("string",ri._jsonSchemaVersion),bytes:Mt("string")};class Nd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Dd{constructor(e){this._methodName=e}}class Hi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hi._jsonSchemaVersion}}static fromJSON(e){if(vc(e,Hi._jsonSchema))return new Hi(e.latitude,e.longitude)}}Hi._jsonSchemaVersion="firestore/geoPoint/1.0",Hi._jsonSchema={type:Mt("string",Hi._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};class Gi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vc(e,Gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Gi(e.vectorValues);throw new le(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gi._jsonSchemaVersion="firestore/vectorValue/1.0",Gi._jsonSchema={type:Mt("string",Gi._jsonSchemaVersion),vectorValues:Mt("object")};const fV=/^__.*__$/;class dV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Zs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ec(e,this.data,t,this.fieldTransforms)}}class wR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Zs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ec:n})}}class cy{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new cy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:r,mc:!1});return a.fc(e),a}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:r,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return $f(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(bR(this.Ec)&&fV.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class mV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||bd(e)}Dc(e,t,r,a=!1){return new cy({Ec:e,methodName:t,bc:r,path:sn.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Od(n){const e=n._freezeSettings(),t=bd(n._databaseId);return new mV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RR(n,e,t,r,a,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,a);fy("Data must be an object, but it was:",c,r);const d=CR(r,c);let p,g;if(l.merge)p=new qn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const T of l.mergeFields){const S=$g(e,T,t);if(!c.contains(S))throw new le(X.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);NR(y,S)||y.push(S)}p=new qn(y),g=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=c.fieldTransforms;return new dV(new On(d),p,g)}class Md extends Dd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Md}}class hy extends Dd{_toFieldTransform(e){return new ok(e.path,new oc)}isEqual(e){return e instanceof hy}}function pV(n,e,t,r){const a=n.Dc(1,e,t);fy("Data must be an object, but it was:",a,r);const l=[],c=On.empty();Js(r,((p,g)=>{const y=dy(e,p,t);g=xt(g);const T=a.gc(y);if(g instanceof Md)l.push(y);else{const S=bc(g,T);S!=null&&(l.push(y),c.set(y,S))}}));const d=new qn(l);return new wR(c,d,a.fieldTransforms)}function gV(n,e,t,r,a,l){const c=n.Dc(1,e,t),d=[$g(e,r,t)],p=[a];if(l.length%2!=0)throw new le(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push($g(e,l[S])),p.push(l[S+1]);const g=[],y=On.empty();for(let S=d.length-1;S>=0;--S)if(!NR(g,d[S])){const I=d[S];let P=p[S];P=xt(P);const z=c.gc(I);if(P instanceof Md)g.push(I);else{const F=bc(P,z);F!=null&&(g.push(I),y.set(I,F))}}const T=new qn(g);return new wR(y,T,c.fieldTransforms)}function _V(n,e,t,r=!1){return bc(t,n.Dc(r?4:3,e))}function bc(n,e){if(IR(n=xt(n)))return fy("Unsupported field value:",e,n),CR(n,e);if(n instanceof Dd)return(function(r,a){if(!bR(a.Ec))throw a.wc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const d of r){let p=bc(d,a.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rk(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ht.fromDate(r);return{timestampValue:Kf(a.serializer,l)}}if(r instanceof ht){const l=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kf(a.serializer,l)}}if(r instanceof Hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ri)return{bytesValue:jb(a.serializer,r._byteString)};if(r instanceof wt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Q_(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Gi)return(function(c,d){return{mapValue:{fields:{[gb]:{stringValue:_b},[jf]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.wc("VectorValues must only contain numeric values.");return G_(d.serializer,g)}))}}}}}})(r,a);throw a.wc(`Unsupported field value: ${gd(r)}`)})(n,e)}function CR(n,e){const t={};return cb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(n,((r,a)=>{const l=bc(a,e.Vc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function IR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ht||n instanceof Hi||n instanceof ri||n instanceof wt||n instanceof Dd||n instanceof Gi)}function fy(n,e,t){if(!IR(t)||!lb(t)){const r=gd(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function $g(n,e,t){if((e=xt(e))instanceof Nd)return e._internalPath;if(typeof e=="string")return dy(n,e);throw $f("Field path arguments must be of type string or ",n,!1,void 0,t)}const yV=new RegExp("[~\\*/\\[\\]]");function dy(n,e,t){if(e.search(yV)>=0)throw $f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nd(...e.split("."))._internalPath}catch{throw $f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $f(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${r}`),c&&(p+=` in document ${a}`),p+=")"),new le(X.INVALID_ARGUMENT,d+n+p)}function NR(n,e){return n.some((t=>t.isEqual(e)))}class DR{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(my("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class vV extends DR{data(){return super.data()}}function my(n,e){return typeof e=="string"?dy(n,e):e instanceof Nd?e._internalPath:e._delegate._internalPath}function EV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class py{}class TV extends py{}function Xg(n,e,...t){let r=[];e instanceof py&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((p=>p instanceof gy)).length,d=l.filter((p=>p instanceof xd)).length;if(c>1||c>0&&d>0)throw new le(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class xd extends TV{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new xd(e,t,r)}_apply(e){const t=this._parse(e);return OR(e._query,t),new Wa(e.firestore,e.converter,zg(e._query,t))}_parse(e){const t=Od(e.firestore);return(function(l,c,d,p,g,y,T){let S;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new le(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){eA(T,y);const P=[];for(const z of T)P.push(ZS(p,l,z));S={arrayValue:{values:P}}}else S=ZS(p,l,T)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||eA(T,y),S=_V(d,c,T,y==="in"||y==="not-in");return Ot.create(g,y,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Xf(n,e,t){const r=e,a=my("where",n);return xd._create(a,r,t)}class gy extends py{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)OR(c,p),c=zg(c,p)})(e._query,t),new Wa(e.firestore,e.converter,zg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ZS(n,e,t){if(typeof(t=xt(t))=="string"){if(t==="")throw new le(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bb(e)&&t.indexOf("/")!==-1)throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(st.fromString(t));if(!me.isDocumentKey(r))throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gS(n,new me(r))}if(t instanceof wt)return gS(n,t._key);throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gd(t)}.`)}function eA(n,e){if(!Array.isArray(n)||n.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OR(n,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class SV{convertValue(e,t="none"){switch(Hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Js(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){var t,r,a;const l=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[jf].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map((c=>At(c.doubleValue)));return new Gi(l)}convertGeoPoint(e){return new Hi(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=vd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const t=js(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=st.fromString(e);Xe(Qb(r),9688,{name:e});const a=new sc(r.get(1),r.get(3)),l=new me(r.popFirst(5));return a.isEqual(t)||xr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function MR(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Fu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Va extends DR{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(my("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Va._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Va._jsonSchemaVersion="firestore/documentSnapshot/1.0",Va._jsonSchema={type:Mt("string",Va._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class Cf extends Va{data(e={}){return super.data(e)}}class el{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Fu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Cf(this._firestore,this._userDataWriter,r.key,r,new Fu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new Cf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Fu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Cf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Fu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:AV(d.type),doc:p,oldIndex:g,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=el._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=L_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function AV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:n})}}function _y(n){n=Ti(n,wt);const e=Ti(n.firestore,Al);return oV(uy(e),n._key).then((t=>wV(e,n,t)))}el._jsonSchemaVersion="firestore/querySnapshot/1.0",el._jsonSchema={type:Mt("string",el._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class xR extends SV{constructor(e){super(),this.firestore=e}convertBytes(e){return new ri(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}}function Jf(n){n=Ti(n,Wa);const e=Ti(n.firestore,Al),t=uy(e),r=new xR(e);return EV(n._query),lV(t,n._query).then((a=>new el(e,r,n,a)))}function kR(n,e,t){n=Ti(n,wt);const r=Ti(n.firestore,Al),a=MR(n.converter,e);return vy(r,[RR(Od(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,_i.none())])}function yy(n,e,t,...r){n=Ti(n,wt);const a=Ti(n.firestore,Al),l=Od(a);let c;return c=typeof(e=xt(e))=="string"||e instanceof Nd?gV(l,"updateDoc",n._key,e,t,r):pV(l,"updateDoc",n._key,e),vy(a,[c.toMutation(n._key,_i.exists(!0))])}function PR(n,e){const t=Ti(n.firestore,Al),r=Id(n),a=MR(n.converter,e);return vy(t,[RR(Od(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,_i.exists(!1))]).then((()=>r))}function vy(n,e){return(function(r,a){const l=new Cr;return r.asyncQueue.enqueueAndForget((async()=>WP(await aV(r),a,l))),l.promise})(uy(n),e)}function wV(n,e,t){const r=t.docs.get(e._key),a=new xR(n);return new Va(n,a,e._key,r,new Fu(t.hasPendingWrites,t.fromCache),e.converter)}function Ir(){return new hy("serverTimestamp")}(function(e,t=!0){(function(a){yl=a})(Ga),La(new zs("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Al(new _x(r.getProvider("auth-internal")),new Ex(c,r.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new le(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sc(g.options.projectId,y)})(c,a),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),zi(nS,iS,e),zi(nS,iS,"esm2017")})();var tA={};const nA="@firebase/database",iA="1.0.20";let VR="";function bV(n){VR=n}class RV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),rn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Zu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class CV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Lr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const LR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new RV(e)}}catch{}return new CV},Pa=LR("localStorage"),IV=LR("sessionStorage");const tl=new hd("@firebase/database"),NV=(function(){let n=1;return function(){return n++}})(),UR=function(n){const e=qD(n),t=new UD;t.update(e);const r=t.digest();return E_.encodeByteArray(r)},Rc=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Rc.apply(null,r):typeof r=="object"?e+=rn(r):e+=r,e+=" "}return e};let Qu=null,rA=!0;const DV=function(n,e){oe(!0,"Can't turn on custom loggers persistently."),tl.logLevel=xe.VERBOSE,Qu=tl.log.bind(tl)},dn=function(...n){if(rA===!0&&(rA=!1,Qu===null&&IV.get("logging_enabled")===!0&&DV()),Qu){const e=Rc.apply(null,n);Qu(e)}},Cc=function(n){return function(...e){dn(n,...e)}},Jg=function(...n){const e="FIREBASE INTERNAL ERROR: "+Rc(...n);tl.error(e)},Pr=function(...n){const e=`FIREBASE FATAL ERROR: ${Rc(...n)}`;throw tl.error(e),new Error(e)},Hn=function(...n){const e="FIREBASE WARNING: "+Rc(...n);tl.warn(e)},OV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Hn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},zR=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},MV=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},ul="[MIN_NAME]",ja="[MAX_NAME]",wl=function(n,e){if(n===e)return 0;if(n===ul||e===ja)return-1;if(e===ul||n===ja)return 1;{const t=sA(n),r=sA(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},xV=function(n,e){return n===e?0:n<e?-1:1},Ou=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+rn(e))},Ey=function(n){if(typeof n!="object"||n===null)return rn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=rn(e[r]),t+=":",t+=Ey(n[e[r]]);return t+="}",t},BR=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let a=0;a<t;a+=e)a+e>t?r.push(n.substring(a,t)):r.push(n.substring(a,a+e));return r};function ai(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const FR=function(n){oe(!zR(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let a,l,c,d,p;n===0?(l=0,c=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=d+r,c=Math.round(n*Math.pow(2,t-d)-Math.pow(2,t))):(l=0,c=Math.round(n/Math.pow(2,1-r-t))));const g=[];for(p=t;p;p-=1)g.push(c%2?1:0),c=Math.floor(c/2);for(p=e;p;p-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(a?1:0),g.reverse();const y=g.join("");let T="";for(p=0;p<64;p+=8){let S=parseInt(y.substr(p,8),2).toString(16);S.length===1&&(S="0"+S),T=T+S}return T.toLowerCase()},kV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},PV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},VV=new RegExp("^-?(0*)\\d{1,10}$"),LV=-2147483648,UV=2147483647,sA=function(n){if(VV.test(n)){const e=Number(n);if(e>=LV&&e<=UV)return e}return null},Ic=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Hn("Exception was thrown by user callback.",t),e},Math.floor(0))}},zV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Wu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};class BV{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,jn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Hn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class FV{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Hn(e)}}class If{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}If.OWNER="owner";const Ty="5",jR="v",qR="s",HR="r",GR="f",KR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,YR="ls",QR="p",Zg="ac",WR="websocket",$R="long_polling";class XR{constructor(e,t,r,a,l=!1,c="",d=!1,p=!1,g=null){this.secure=t,this.namespace=r,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=p,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Pa.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Pa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function jV(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function JR(n,e,t){oe(typeof e=="string","typeof type must == string"),oe(typeof t=="object","typeof params must == object");let r;if(e===WR)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===$R)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);jV(n)&&(t.ns=n.namespace);const a=[];return ai(t,(l,c)=>{a.push(l+"="+c)}),r+a.join("&")}class qV{constructor(){this.counters_={}}incrementCounter(e,t=1){Lr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return _D(this.counters_)}}const ug={},cg={};function Sy(n){const e=n.toString();return ug[e]||(ug[e]=new qV),ug[e]}function HV(n,e){const t=n.toString();return cg[t]||(cg[t]=e()),cg[t]}class GV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<r.length;++a)r[a]&&Ic(()=>{this.onMessage_(r[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const aA="start",KV="close",YV="pLPCommand",QV="pRTLPCB",ZR="id",eC="pw",tC="ser",WV="cb",$V="seg",XV="ts",JV="d",ZV="dframe",nC=1870,iC=30,eL=nC-iC,tL=25e3,nL=3e4;class Qo{constructor(e,t,r,a,l,c,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=a,this.authToken=l,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Cc(e),this.stats_=Sy(t),this.urlFn=p=>(this.appCheckToken&&(p[Zg]=this.appCheckToken),JR(t,$R,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new GV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(nL)),MV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ay((...l)=>{const[c,d,p,g,y]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===aA)this.id=d,this.password=p;else if(c===KV)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...l)=>{const[c,d]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const r={};r[aA]="t",r[tC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[WV]=this.scriptTagHolder.uniqueCallbackIdentifier),r[jR]=Ty,this.transportSessionId&&(r[qR]=this.transportSessionId),this.lastSessionId&&(r[YR]=this.lastSessionId),this.applicationId&&(r[QR]=this.applicationId),this.appCheckToken&&(r[Zg]=this.appCheckToken),typeof location<"u"&&location.hostname&&KR.test(location.hostname)&&(r[HR]=GR);const a=this.urlFn(r);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qo.forceAllow_=!0}static forceDisallow(){Qo.forceDisallow_=!0}static isAvailable(){return Qo.forceAllow_?!0:!Qo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!kV()&&!PV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=rn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=sw(t),a=BR(r,eL);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[ZV]="t",r[ZR]=e,r[eC]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=rn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ay{constructor(e,t,r,a){this.onDisconnect=r,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=NV(),window[YV+this.uniqueCallbackIdentifier]=e,window[QV+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ay.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){dn("frame writing exception"),d.stack&&dn(d.stack),dn(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||dn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ZR]=this.myID,e[eC]=this.myPW,e[tC]=this.currentSerial;let t=this.urlFn(e),r="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+iC+r.length<=nC;){const c=this.pendingSegs.shift();r=r+"&"+$V+a+"="+c.seg+"&"+XV+a+"="+c.ts+"&"+JV+a+"="+c.d,a++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(r,Math.floor(tL)),l=()=>{clearTimeout(a),r()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const a=r.readyState;(!a||a==="loaded"||a==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{dn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}const iL=16384,rL=45e3;let Zf=null;typeof MozWebSocket<"u"?Zf=MozWebSocket:typeof WebSocket<"u"&&(Zf=WebSocket);class mi{constructor(e,t,r,a,l,c,d){this.connId=e,this.applicationId=r,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Cc(this.connId),this.stats_=Sy(t),this.connURL=mi.connectionURL_(t,c,d,a,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,a,l){const c={};return c[jR]=Ty,typeof location<"u"&&location.hostname&&KR.test(location.hostname)&&(c[HR]=GR),t&&(c[qR]=t),r&&(c[YR]=r),a&&(c[Zg]=a),l&&(c[QR]=l),JR(e,WR,c)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Pa.set("previous_websocket_failure",!0);try{let r;ND(),this.mySock=new Zf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const a=r.message||r.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const a=r.message||r.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){mi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Zf!==null&&!mi.forceDisallow_}static previouslyFailed(){return Pa.isInMemoryStorage||Pa.get("previous_websocket_failure")===!0}markConnectionHealthy(){Pa.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=Zu(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(oe(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=rn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=BR(t,iL);r.length>1&&this.sendString_(String(r.length));for(let a=0;a<r.length;a++)this.sendString_(r[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(rL))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}mi.responsesRequiredToBeHealthy=2;mi.healthyTimeout=3e4;class cc{static get ALL_TRANSPORTS(){return[Qo,mi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=mi&&mi.isAvailable();let r=t&&!mi.previouslyFailed();if(e.webSocketOnly&&(t||Hn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[mi];else{const a=this.transports_=[];for(const l of cc.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);cc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}cc.globalTransportInitialized_=!1;const sL=6e4,aL=5e3,oL=10*1024,lL=100*1024,hg="t",oA="d",uL="s",lA="r",cL="e",uA="o",cA="a",hA="n",fA="p",hL="h";class fL{constructor(e,t,r,a,l,c,d,p,g,y){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=p,this.onKill_=g,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Cc("c:"+this.id+":"),this.transportManager_=new cc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=Wu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>lL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>oL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(hg in e){const t=e[hg];t===cA?this.upgradeIfSecondaryHealthy_():t===lA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===uA&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ou("t",e),r=Ou("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:fA,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:cA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:hA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ou("t",e),r=Ou("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ou(hg,e);if(oA in e){const r=e[oA];if(t===hL){const a=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===hA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===uL?this.onConnectionShutdown_(r):t===lA?this.onReset_(r):t===cL?Jg("Server Error: "+r):t===uA?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jg("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Ty!==r&&Hn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Wu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(sL))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(aL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:fA,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Pa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class rC{put(e,t,r,a){}merge(e,t,r,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class sC{constructor(e){this.allowedEvents_=e,this.listeners_={},oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let a=0;a<r.length;a++)r[a].callback.apply(r[a].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const a=this.getInitialEvent(e);a&&t.apply(r,a)}off(e,t,r){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let l=0;l<a.length;l++)if(a[l].callback===t&&(!r||r===a[l].context)){a.splice(l,1);return}}validateEventType_(e){oe(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ed extends sC{static getInstance(){return new ed}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!w_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return oe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const dA=32,mA=768;class ft{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[r]=this.pieces_[a],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function it(){return new ft("")}function Fe(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ys(n){return n.pieces_.length-n.pieceNum_}function ct(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ft(n.pieces_,e)}function aC(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function dL(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function oC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function lC(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ft(e,0)}function Yt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ft)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let a=0;a<r.length;a++)r[a].length>0&&t.push(r[a])}return new ft(t,0)}function ze(n){return n.pieceNum_>=n.pieces_.length}function si(n,e){const t=Fe(n),r=Fe(e);if(t===null)return e;if(t===r)return si(ct(n),ct(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function uC(n,e){if(Ys(n)!==Ys(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function gi(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ys(n)>Ys(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class mL{constructor(e,t){this.errorPrefix_=t,this.parts_=oC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=cd(this.parts_[r]);cC(this)}}function pL(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=cd(e),cC(n)}function gL(n){const e=n.parts_.pop();n.byteLength_-=cd(e),n.parts_.length>0&&(n.byteLength_-=1)}function cC(n){if(n.byteLength_>mA)throw new Error(n.errorPrefix_+"has a key path longer than "+mA+" bytes ("+n.byteLength_+").");if(n.parts_.length>dA)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+dA+") or object contains a cycle "+xa(n))}function xa(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}class wy extends sC{static getInstance(){return new wy}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return oe(e==="visible","Unknown event type: "+e),[this.visible_]}}const Mu=1e3,_L=300*1e3,pA=30*1e3,yL=1.3,vL=3e4,EL="server_kill",gA=3;class Nr extends rC{constructor(e,t,r,a,l,c,d,p){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=c,this.appCheckTokenProvider_=d,this.authOverride_=p,this.id=Nr.nextPersistentConnectionId_++,this.log_=Cc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Mu,this.maxReconnectDelay_=_L,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ed.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const a=++this.requestNumber_,l={r:a,a:e,b:t};this.log_(rn(l)),oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[a]=r)}get(e){this.initConnection_();const t=new T_,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const d=c.d;c.s==="ok"?t.resolve(d):t.reject(d)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,r,a){this.initConnection_();const l=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+l),this.listens.has(c)||this.listens.set(c,new Map),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),oe(!this.listens.get(c).has(l),"listen() called twice for same path/queryId.");const d={onComplete:a,hashFn:t,query:e,tag:r};this.listens.get(c).set(l,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+r+" for "+a);const l={p:r},c="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(c,l,d=>{const p=d.d,g=d.s;Nr.warnOnListenWarnings_(p,t),(this.listens.get(r)&&this.listens.get(r).get(a))===e&&(this.log_("listen response",d),g!=="ok"&&this.removeListen_(r,a),e.onComplete&&e.onComplete(g,p))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Lr(e,"w")){const r=il(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();Hn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||LD(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=pA)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=VD(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,a=>{const l=a.s,c=a.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+a),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,a)&&this.connected_&&this.sendUnlisten_(r,a,e._queryObject,t)}sendUnlisten_(e,t,r,a){this.log_("Unlisten on "+e+" for "+t);const l={p:e},c="n";a&&(l.q=r,l.t=a),this.sendRequest(c,l)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,a){const l={p:t,d:r};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,c=>{a&&setTimeout(()=>{a(c.s,c.d)},Math.floor(0))})}put(e,t,r,a){this.putInternal("p",e,t,r,a)}merge(e,t,r,a){this.putInternal("m",e,t,r,a)}putInternal(e,t,r,a,l){this.initConnection_();const c={p:t,d:r};l!==void 0&&(c.h=l),this.outstandingPuts_.push({action:e,request:c,onComplete:a}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const l=r.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+rn(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Jg("Unrecognized action received from server: "+rn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Mu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vL&&(this.reconnectDelay_=Mu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*yL)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+Nr.nextConnectionId_++,l=this.lastSessionId;let c=!1,d=null;const p=function(){d?d.close():(c=!0,r())},g=function(T){oe(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(T)};this.realtime_={close:p,sendRequest:g};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[T,S]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);c?dn("getToken() completed but was canceled"):(dn("getToken() completed. Creating connection."),this.authToken_=T&&T.accessToken,this.appCheckToken_=S&&S.token,d=new fL(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,I=>{Hn(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(EL)},l))}catch(T){this.log_("Failed to get token: "+T),c||(this.repoInfo_.nodeAdmin&&Hn(T),p())}}}interrupt(e){dn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){dn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Sg(this.interruptReasons_)&&(this.reconnectDelay_=Mu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(l=>Ey(l)).join("$"):r="default";const a=this.removeListen_(e,r);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const r=new ft(e).toString();let a;if(this.listens.has(r)){const l=this.listens.get(r);a=l.get(t),l.delete(t),l.size===0&&this.listens.delete(r)}else a=void 0;return a}onAuthRevoked_(e,t){dn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=gA&&(this.reconnectDelay_=pA,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){dn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=gA&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+VR.replace(/\./g,"-")]=1,w_()?e["framework.cordova"]=1:fw()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ed.getInstance().currentlyOnline();return Sg(this.interruptReasons_)&&e}}Nr.nextPersistentConnectionId_=0;Nr.nextConnectionId_=0;class je{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new je(e,t)}}class kd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new je(ul,e),a=new je(ul,t);return this.compare(r,a)!==0}minPost(){return je.MIN}}let mf;class hC extends kd{static get __EMPTY_NODE(){return mf}static set __EMPTY_NODE(e){mf=e}compare(e,t){return wl(e.name,t.name)}isDefinedOn(e){throw pl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return je.MIN}maxPost(){return new je(ja,mf)}makePost(e,t){return oe(typeof e=="string","KeyIndex indexValue must always be a string."),new je(e,mf)}toString(){return".key"}}const nl=new hC;class pf{constructor(e,t,r,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,a&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Kt{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Kt.RED,this.left=a??Mn.EMPTY_NODE,this.right=l??Mn.EMPTY_NODE}copy(e,t,r,a,l){return new Kt(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Mn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,a;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return Mn.EMPTY_NODE;a=r.right.min_(),r=r.copy(a.key,a.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Kt.RED=!0;Kt.BLACK=!1;class TL{copy(e,t,r,a,l){return this}insert(e,t,r){return new Kt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Mn{constructor(e,t=Mn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Mn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Kt.BLACK,null,null))}remove(e){return new Mn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Kt.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,a=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return a?a.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(a=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new pf(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new pf(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new pf(this.root_,null,this.comparator_,!0,e)}}Mn.EMPTY_NODE=new TL;function SL(n,e){return wl(n.name,e.name)}function by(n,e){return wl(n,e)}let e_;function AL(n){e_=n}const fC=function(n){return typeof n=="number"?"number:"+FR(n):"string:"+n},dC=function(n){if(n.isLeafNode()){const e=n.val();oe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Lr(e,".sv"),"Priority must be a string or number.")}else oe(n===e_||n.isEmpty(),"priority of unexpected type.");oe(n===e_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let _A;class Ht{static set __childrenNodeConstructor(e){_A=e}static get __childrenNodeConstructor(){return _A}constructor(e,t=Ht.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,oe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),dC(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ht(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ht.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ze(e)?this:Fe(e)===".priority"?this.priorityNode_:Ht.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Ht.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=Fe(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(oe(r!==".priority"||Ys(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ht.__childrenNodeConstructor.EMPTY_NODE.updateChild(ct(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+fC(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=FR(this.value_):e+=this.value_,this.lazyHash_=UR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ht.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ht.__childrenNodeConstructor?-1:(oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,a=Ht.VALUE_TYPE_ORDER.indexOf(t),l=Ht.VALUE_TYPE_ORDER.indexOf(r);return oe(a>=0,"Unknown leaf type: "+t),oe(l>=0,"Unknown leaf type: "+r),a===l?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Ht.VALUE_TYPE_ORDER=["object","boolean","number","string"];let mC,pC;function wL(n){mC=n}function bL(n){pC=n}class RL extends kd{compare(e,t){const r=e.node.getPriority(),a=t.node.getPriority(),l=r.compareTo(a);return l===0?wl(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return je.MIN}maxPost(){return new je(ja,new Ht("[PRIORITY-POST]",pC))}makePost(e,t){const r=mC(e);return new je(t,new Ht("[PRIORITY-POST]",r))}toString(){return".priority"}}const pn=new RL;const CL=Math.log(2);class IL{constructor(e){const t=l=>parseInt(Math.log(l)/CL,10),r=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=r(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const td=function(n,e,t,r){n.sort(e);const a=function(p,g){const y=g-p;let T,S;if(y===0)return null;if(y===1)return T=n[p],S=t?t(T):T,new Kt(S,T.node,Kt.BLACK,null,null);{const I=parseInt(y/2,10)+p,P=a(p,I),z=a(I+1,g);return T=n[I],S=t?t(T):T,new Kt(S,T.node,Kt.BLACK,P,z)}},l=function(p){let g=null,y=null,T=n.length;const S=function(P,z){const F=T-P,ne=T;T-=P;const ee=a(F+1,ne),ie=n[F],ge=t?t(ie):ie;I(new Kt(ge,ie.node,z,null,ee))},I=function(P){g?(g.left=P,g=P):(y=P,g=P)};for(let P=0;P<p.count;++P){const z=p.nextBitIsOne(),F=Math.pow(2,p.count-(P+1));z?S(F,Kt.BLACK):(S(F,Kt.BLACK),S(F,Kt.RED))}return y},c=new IL(n.length),d=l(c);return new Mn(r||e,d)};let fg;const jo={};class wr{static get Default(){return oe(jo&&pn,"ChildrenNode.ts has not been loaded"),fg=fg||new wr({".priority":jo},{".priority":pn}),fg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=il(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Mn?t:null}hasIndex(e){return Lr(this.indexSet_,e.toString())}addIndex(e,t){oe(e!==nl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let a=!1;const l=t.getIterator(je.Wrap);let c=l.getNext();for(;c;)a=a||e.isDefinedOn(c.node),r.push(c),c=l.getNext();let d;a?d=td(r,e.getCompare()):d=jo;const p=e.toString(),g=Object.assign({},this.indexSet_);g[p]=e;const y=Object.assign({},this.indexes_);return y[p]=d,new wr(y,g)}addToIndexes(e,t){const r=Mf(this.indexes_,(a,l)=>{const c=il(this.indexSet_,l);if(oe(c,"Missing index implementation for "+l),a===jo)if(c.isDefinedOn(e.node)){const d=[],p=t.getIterator(je.Wrap);let g=p.getNext();for(;g;)g.name!==e.name&&d.push(g),g=p.getNext();return d.push(e),td(d,c.getCompare())}else return jo;else{const d=t.get(e.name);let p=a;return d&&(p=p.remove(new je(e.name,d))),p.insert(e,e.node)}});return new wr(r,this.indexSet_)}removeFromIndexes(e,t){const r=Mf(this.indexes_,a=>{if(a===jo)return a;{const l=t.get(e.name);return l?a.remove(new je(e.name,l)):a}});return new wr(r,this.indexSet_)}}let xu;class $e{static get EMPTY_NODE(){return xu||(xu=new $e(new Mn(by),null,wr.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&dC(this.priorityNode_),this.children_.isEmpty()&&oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xu}updatePriority(e){return this.children_.isEmpty()?this:new $e(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?xu:t}}getChild(e){const t=Fe(e);return t===null?this:this.getImmediateChild(t).getChild(ct(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(oe(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new je(e,t);let a,l;t.isEmpty()?(a=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(r,this.children_)):(a=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(r,this.children_));const c=a.isEmpty()?xu:this.priorityNode_;return new $e(a,c,l)}}updateChild(e,t){const r=Fe(e);if(r===null)return t;{oe(Fe(e)!==".priority"||Ys(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(r).updateChild(ct(e),t);return this.updateImmediateChild(r,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,a=0,l=!0;if(this.forEachChild(pn,(c,d)=>{t[c]=d.val(e),r++,l&&$e.INTEGER_REGEXP_.test(c)?a=Math.max(a,Number(c)):l=!1}),!e&&l&&a<2*r){const c=[];for(const d in t)c[d]=t[d];return c}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+fC(this.getPriority().val())+":"),this.forEachChild(pn,(t,r)=>{const a=r.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":UR(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const a=this.resolveIndex_(r);if(a){const l=a.getPredecessorKey(new je(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new je(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new je(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,je.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,je.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)>0;)a.getNext(),l=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Nc?-1:0}withIndex(e){if(e===nl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new $e(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===nl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(pn),a=t.getIterator(pn);let l=r.getNext(),c=a.getNext();for(;l&&c;){if(l.name!==c.name||!l.node.equals(c.node))return!1;l=r.getNext(),c=a.getNext()}return l===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===nl?null:this.indexMap_.get(e.toString())}}$e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class NL extends $e{constructor(){super(new Mn(by),$e.EMPTY_NODE,wr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return $e.EMPTY_NODE}isEmpty(){return!1}}const Nc=new NL;Object.defineProperties(je,{MIN:{value:new je(ul,$e.EMPTY_NODE)},MAX:{value:new je(ja,Nc)}});hC.__EMPTY_NODE=$e.EMPTY_NODE;Ht.__childrenNodeConstructor=$e;AL(Nc);bL(Nc);const DL=!0;function mn(n,e=null){if(n===null)return $e.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),oe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Ht(t,mn(e))}if(!(n instanceof Array)&&DL){const t=[];let r=!1;if(ai(n,(c,d)=>{if(c.substring(0,1)!=="."){const p=mn(d);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new je(c,p)))}}),t.length===0)return $e.EMPTY_NODE;const l=td(t,SL,c=>c.name,by);if(r){const c=td(t,pn.getCompare());return new $e(l,mn(e),new wr({".priority":c},{".priority":pn}))}else return new $e(l,mn(e),wr.Default)}else{let t=$e.EMPTY_NODE;return ai(n,(r,a)=>{if(Lr(n,r)&&r.substring(0,1)!=="."){const l=mn(a);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(r,l))}}),t.updatePriority(mn(e))}}wL(mn);class OL extends kd{constructor(e){super(),this.indexPath_=e,oe(!ze(e)&&Fe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),a=this.extractChild(t.node),l=r.compareTo(a);return l===0?wl(e.name,t.name):l}makePost(e,t){const r=mn(e),a=$e.EMPTY_NODE.updateChild(this.indexPath_,r);return new je(t,a)}maxPost(){const e=$e.EMPTY_NODE.updateChild(this.indexPath_,Nc);return new je(ja,e)}toString(){return oC(this.indexPath_,0).join("/")}}class ML extends kd{compare(e,t){const r=e.node.compareTo(t.node);return r===0?wl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return je.MIN}maxPost(){return je.MAX}makePost(e,t){const r=mn(e);return new je(t,r)}toString(){return".value"}}const xL=new ML;function kL(n){return{type:"value",snapshotNode:n}}function PL(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function VL(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function yA(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function LL(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}class Ry{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ul}hasEnd(){return this.endSet_}getIndexEndValue(){return oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ja}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pn}copy(){const e=new Ry;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function vA(n){const e={};if(n.isDefault())return e;let t;if(n.index_===pn?t="$priority":n.index_===xL?t="$value":n.index_===nl?t="$key":(oe(n.index_ instanceof OL,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=rn(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=rn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+rn(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=rn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+rn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function EA(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==pn&&(e.i=n.index_.toString()),e}class nd extends rC{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(oe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=a,this.log_=Cc("p:rest:"),this.listens_={}}listen(e,t,r,a){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const c=nd.getListenId_(e,r),d={};this.listens_[c]=d;const p=vA(e._queryParams);this.restRequest_(l+".json",p,(g,y)=>{let T=y;if(g===404&&(T=null,g=null),g===null&&this.onDataUpdate_(l,T,!1,r),il(this.listens_,c)===d){let S;g?g===401?S="permission_denied":S="rest_error:"+g:S="ok",a(S,null)}})}unlisten(e,t){const r=nd.getListenId_(e,t);delete this.listens_[r]}get(e){const t=vA(e._queryParams),r=e._path.toString(),a=new T_;return this.restRequest_(r+".json",t,(l,c)=>{let d=c;l===404&&(d=null,l=null),l===null?(this.onDataUpdate_(r,d,!1,null),a.resolve(d)):a.reject(new Error(d))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(t.auth=a.accessToken),l&&l.token&&(t.ac=l.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+gl(t);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&d.readyState===4){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=Zu(d.responseText)}catch{Hn("Failed to parse JSON response for "+c+": "+d.responseText)}r(null,p)}else d.status!==401&&d.status!==404&&Hn("Got unsuccessful REST response for "+c+" Status: "+d.status),r(d.status);r=null}},d.open("GET",c,!0),d.send()})}}class UL{constructor(){this.rootNode_=$e.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function id(){return{value:null,children:new Map}}function gC(n,e,t){if(ze(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=Fe(e);n.children.has(r)||n.children.set(r,id());const a=n.children.get(r);e=ct(e),gC(a,e,t)}}function t_(n,e,t){n.value!==null?t(e,n.value):zL(n,(r,a)=>{const l=new ft(e.toString()+"/"+r);t_(a,l,t)})}function zL(n,e){n.children.forEach((t,r)=>{e(r,t)})}class BL{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ai(this.last_,(r,a)=>{t[r]=t[r]-a}),this.last_=e,t}}const TA=10*1e3,FL=30*1e3,jL=300*1e3;class qL{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new BL(e);const r=TA+(FL-TA)*Math.random();Wu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ai(e,(a,l)=>{l>0&&Lr(this.statsToReport_,a)&&(t[a]=l,r=!0)}),r&&this.server_.reportStats(t),Wu(this.reportStats_.bind(this),Math.floor(Math.random()*2*jL))}}var Ui;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ui||(Ui={}));function _C(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function yC(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function vC(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class rd{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ui.ACK_USER_WRITE,this.source=_C()}operationForChild(e){if(ze(this.path)){if(this.affectedTree.value!=null)return oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ft(e));return new rd(it(),t,this.revert)}}else return oe(Fe(this.path)===e,"operationForChild called for unrelated child."),new rd(ct(this.path),this.affectedTree,this.revert)}}class qa{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ui.OVERWRITE}operationForChild(e){return ze(this.path)?new qa(this.source,it(),this.snap.getImmediateChild(e)):new qa(this.source,ct(this.path),this.snap)}}class hc{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ui.MERGE}operationForChild(e){if(ze(this.path)){const t=this.children.subtree(new ft(e));return t.isEmpty()?null:t.value?new qa(this.source,it(),t.value):new hc(this.source,it(),t)}else return oe(Fe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new hc(this.source,ct(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Cy{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ze(e))return this.isFullyInitialized()&&!this.filtered_;const t=Fe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function HL(n,e,t,r){const a=[],l=[];return e.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&l.push(LL(c.childName,c.snapshotNode))}),ku(n,a,"child_removed",e,r,t),ku(n,a,"child_added",e,r,t),ku(n,a,"child_moved",l,r,t),ku(n,a,"child_changed",e,r,t),ku(n,a,"value",e,r,t),a}function ku(n,e,t,r,a,l){const c=r.filter(d=>d.type===t);c.sort((d,p)=>KL(n,d,p)),c.forEach(d=>{const p=GL(n,d,l);a.forEach(g=>{g.respondsTo(d.type)&&e.push(g.createEvent(p,n.query_))})})}function GL(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function KL(n,e,t){if(e.childName==null||t.childName==null)throw pl("Should only compare child_ events.");const r=new je(e.childName,e.snapshotNode),a=new je(t.childName,t.snapshotNode);return n.index_.compare(r,a)}function EC(n,e){return{eventCache:n,serverCache:e}}function $u(n,e,t,r){return EC(new Cy(e,t,r),n.serverCache)}function TC(n,e,t,r){return EC(n.eventCache,new Cy(e,t,r))}function n_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ha(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let dg;const YL=()=>(dg||(dg=new Mn(xV)),dg);class ut{static fromObject(e){let t=new ut(null);return ai(e,(r,a)=>{t=t.set(new ft(r),a)}),t}constructor(e,t=YL()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:it(),value:this.value};if(ze(e))return null;{const r=Fe(e),a=this.children.get(r);if(a!==null){const l=a.findRootMostMatchingPathAndValue(ct(e),t);return l!=null?{path:Yt(new ft(r),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ze(e))return this;{const t=Fe(e),r=this.children.get(t);return r!==null?r.subtree(ct(e)):new ut(null)}}set(e,t){if(ze(e))return new ut(t,this.children);{const r=Fe(e),l=(this.children.get(r)||new ut(null)).set(ct(e),t),c=this.children.insert(r,l);return new ut(this.value,c)}}remove(e){if(ze(e))return this.children.isEmpty()?new ut(null):new ut(null,this.children);{const t=Fe(e),r=this.children.get(t);if(r){const a=r.remove(ct(e));let l;return a.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,a),this.value===null&&l.isEmpty()?new ut(null):new ut(this.value,l)}else return this}}get(e){if(ze(e))return this.value;{const t=Fe(e),r=this.children.get(t);return r?r.get(ct(e)):null}}setTree(e,t){if(ze(e))return t;{const r=Fe(e),l=(this.children.get(r)||new ut(null)).setTree(ct(e),t);let c;return l.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,l),new ut(this.value,c)}}fold(e){return this.fold_(it(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((a,l)=>{r[a]=l.fold_(Yt(e,a),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,it(),t)}findOnPath_(e,t,r){const a=this.value?r(t,this.value):!1;if(a)return a;if(ze(e))return null;{const l=Fe(e),c=this.children.get(l);return c?c.findOnPath_(ct(e),Yt(t,l),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,it(),t)}foreachOnPath_(e,t,r){if(ze(e))return this;{this.value&&r(t,this.value);const a=Fe(e),l=this.children.get(a);return l?l.foreachOnPath_(ct(e),Yt(t,a),r):new ut(null)}}foreach(e){this.foreach_(it(),e)}foreach_(e,t){this.children.inorderTraversal((r,a)=>{a.foreach_(Yt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class yi{constructor(e){this.writeTree_=e}static empty(){return new yi(new ut(null))}}function Xu(n,e,t){if(ze(e))return new yi(new ut(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const a=r.path;let l=r.value;const c=si(a,e);return l=l.updateChild(c,t),new yi(n.writeTree_.set(a,l))}else{const a=new ut(t),l=n.writeTree_.setTree(e,a);return new yi(l)}}}function SA(n,e,t){let r=n;return ai(t,(a,l)=>{r=Xu(r,Yt(e,a),l)}),r}function AA(n,e){if(ze(e))return yi.empty();{const t=n.writeTree_.setTree(e,new ut(null));return new yi(t)}}function i_(n,e){return $a(n,e)!=null}function $a(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(si(t.path,e)):null}function wA(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(pn,(r,a)=>{e.push(new je(r,a))}):n.writeTree_.children.inorderTraversal((r,a)=>{a.value!=null&&e.push(new je(r,a.value))}),e}function Ls(n,e){if(ze(e))return n;{const t=$a(n,e);return t!=null?new yi(new ut(t)):new yi(n.writeTree_.subtree(e))}}function r_(n){return n.writeTree_.isEmpty()}function cl(n,e){return SC(it(),n.writeTree_,e)}function SC(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((a,l)=>{a===".priority"?(oe(l.value!==null,"Priority writes must always be leaf nodes"),r=l.value):t=SC(Yt(n,a),l,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Yt(n,".priority"),r)),t}}function AC(n,e){return IC(e,n)}function QL(n,e,t,r,a){oe(r>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:a}),a&&(n.visibleWrites=Xu(n.visibleWrites,e,t)),n.lastWriteId=r}function WL(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function $L(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);oe(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let a=r.visible,l=!1,c=n.allWrites.length-1;for(;a&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=t&&XL(d,r.path)?a=!1:gi(r.path,d.path)&&(l=!0)),c--}if(a){if(l)return JL(n),!0;if(r.snap)n.visibleWrites=AA(n.visibleWrites,r.path);else{const d=r.children;ai(d,p=>{n.visibleWrites=AA(n.visibleWrites,Yt(r.path,p))})}return!0}else return!1}function XL(n,e){if(n.snap)return gi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&gi(Yt(n.path,t),e))return!0;return!1}function JL(n){n.visibleWrites=wC(n.allWrites,ZL,it()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function ZL(n){return n.visible}function wC(n,e,t){let r=yi.empty();for(let a=0;a<n.length;++a){const l=n[a];if(e(l)){const c=l.path;let d;if(l.snap)gi(t,c)?(d=si(t,c),r=Xu(r,d,l.snap)):gi(c,t)&&(d=si(c,t),r=Xu(r,it(),l.snap.getChild(d)));else if(l.children){if(gi(t,c))d=si(t,c),r=SA(r,d,l.children);else if(gi(c,t))if(d=si(c,t),ze(d))r=SA(r,it(),l.children);else{const p=il(l.children,Fe(d));if(p){const g=p.getChild(ct(d));r=Xu(r,it(),g)}}}else throw pl("WriteRecord should have .snap or .children")}}return r}function bC(n,e,t,r,a){if(!r&&!a){const l=$a(n.visibleWrites,e);if(l!=null)return l;{const c=Ls(n.visibleWrites,e);if(r_(c))return t;if(t==null&&!i_(c,it()))return null;{const d=t||$e.EMPTY_NODE;return cl(c,d)}}}else{const l=Ls(n.visibleWrites,e);if(!a&&r_(l))return t;if(!a&&t==null&&!i_(l,it()))return null;{const c=function(g){return(g.visible||a)&&(!r||!~r.indexOf(g.writeId))&&(gi(g.path,e)||gi(e,g.path))},d=wC(n.allWrites,c,e),p=t||$e.EMPTY_NODE;return cl(d,p)}}}function e4(n,e,t){let r=$e.EMPTY_NODE;const a=$a(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(pn,(l,c)=>{r=r.updateImmediateChild(l,c)}),r;if(t){const l=Ls(n.visibleWrites,e);return t.forEachChild(pn,(c,d)=>{const p=cl(Ls(l,new ft(c)),d);r=r.updateImmediateChild(c,p)}),wA(l).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}else{const l=Ls(n.visibleWrites,e);return wA(l).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}}function t4(n,e,t,r,a){oe(r||a,"Either existingEventSnap or existingServerSnap must exist");const l=Yt(e,t);if(i_(n.visibleWrites,l))return null;{const c=Ls(n.visibleWrites,l);return r_(c)?a.getChild(t):cl(c,a.getChild(t))}}function n4(n,e,t,r){const a=Yt(e,t),l=$a(n.visibleWrites,a);if(l!=null)return l;if(r.isCompleteForChild(t)){const c=Ls(n.visibleWrites,a);return cl(c,r.getNode().getImmediateChild(t))}else return null}function i4(n,e){return $a(n.visibleWrites,e)}function r4(n,e,t,r,a,l,c){let d;const p=Ls(n.visibleWrites,e),g=$a(p,it());if(g!=null)d=g;else if(t!=null)d=cl(p,t);else return[];if(d=d.withIndex(c),!d.isEmpty()&&!d.isLeafNode()){const y=[],T=c.getCompare(),S=l?d.getReverseIteratorFrom(r,c):d.getIteratorFrom(r,c);let I=S.getNext();for(;I&&y.length<a;)T(I,r)!==0&&y.push(I),I=S.getNext();return y}else return[]}function s4(){return{visibleWrites:yi.empty(),allWrites:[],lastWriteId:-1}}function s_(n,e,t,r){return bC(n.writeTree,n.treePath,e,t,r)}function RC(n,e){return e4(n.writeTree,n.treePath,e)}function bA(n,e,t,r){return t4(n.writeTree,n.treePath,e,t,r)}function sd(n,e){return i4(n.writeTree,Yt(n.treePath,e))}function a4(n,e,t,r,a,l){return r4(n.writeTree,n.treePath,e,t,r,a,l)}function Iy(n,e,t){return n4(n.writeTree,n.treePath,e,t)}function CC(n,e){return IC(Yt(n.treePath,e),n.writeTree)}function IC(n,e){return{treePath:n,writeTree:e}}class o4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;oe(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),oe(r!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(r);if(a){const l=a.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(r,yA(r,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(r,VL(r,a.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(r,PL(r,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(r,yA(r,e.snapshotNode,a.oldSnap));else throw pl("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}class l4{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const NC=new l4;class Ny{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Cy(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Iy(this.writes_,e,r)}}getChildAfterChild(e,t,r){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ha(this.viewCache_),l=a4(this.writes_,a,t,1,r,e);return l.length===0?null:l[0]}}function u4(n,e){oe(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),oe(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function c4(n,e,t,r,a){const l=new o4;let c,d;if(t.type===Ui.OVERWRITE){const g=t;g.source.fromUser?c=a_(n,e,g.path,g.snap,r,a,l):(oe(g.source.fromServer,"Unknown source."),d=g.source.tagged||e.serverCache.isFiltered()&&!ze(g.path),c=ad(n,e,g.path,g.snap,r,a,d,l))}else if(t.type===Ui.MERGE){const g=t;g.source.fromUser?c=f4(n,e,g.path,g.children,r,a,l):(oe(g.source.fromServer,"Unknown source."),d=g.source.tagged||e.serverCache.isFiltered(),c=o_(n,e,g.path,g.children,r,a,d,l))}else if(t.type===Ui.ACK_USER_WRITE){const g=t;g.revert?c=p4(n,e,g.path,r,a,l):c=d4(n,e,g.path,g.affectedTree,r,a,l)}else if(t.type===Ui.LISTEN_COMPLETE)c=m4(n,e,t.path,r,l);else throw pl("Unknown operation type: "+t.type);const p=l.getChanges();return h4(e,c,p),{viewCache:c,changes:p}}function h4(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const a=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=n_(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&t.push(kL(n_(e)))}}function DC(n,e,t,r,a,l){const c=e.eventCache;if(sd(r,t)!=null)return e;{let d,p;if(ze(t))if(oe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=Ha(e),y=g instanceof $e?g:$e.EMPTY_NODE,T=RC(r,y);d=n.filter.updateFullNode(e.eventCache.getNode(),T,l)}else{const g=s_(r,Ha(e));d=n.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const g=Fe(t);if(g===".priority"){oe(Ys(t)===1,"Can't have a priority with additional path components");const y=c.getNode();p=e.serverCache.getNode();const T=bA(r,t,y,p);T!=null?d=n.filter.updatePriority(y,T):d=c.getNode()}else{const y=ct(t);let T;if(c.isCompleteForChild(g)){p=e.serverCache.getNode();const S=bA(r,t,c.getNode(),p);S!=null?T=c.getNode().getImmediateChild(g).updateChild(y,S):T=c.getNode().getImmediateChild(g)}else T=Iy(r,g,e.serverCache);T!=null?d=n.filter.updateChild(c.getNode(),g,T,y,a,l):d=c.getNode()}}return $u(e,d,c.isFullyInitialized()||ze(t),n.filter.filtersNodes())}}function ad(n,e,t,r,a,l,c,d){const p=e.serverCache;let g;const y=c?n.filter:n.filter.getIndexedFilter();if(ze(t))g=y.updateFullNode(p.getNode(),r,null);else if(y.filtersNodes()&&!p.isFiltered()){const I=p.getNode().updateChild(t,r);g=y.updateFullNode(p.getNode(),I,null)}else{const I=Fe(t);if(!p.isCompleteForPath(t)&&Ys(t)>1)return e;const P=ct(t),F=p.getNode().getImmediateChild(I).updateChild(P,r);I===".priority"?g=y.updatePriority(p.getNode(),F):g=y.updateChild(p.getNode(),I,F,P,NC,null)}const T=TC(e,g,p.isFullyInitialized()||ze(t),y.filtersNodes()),S=new Ny(a,T,l);return DC(n,T,t,a,S,d)}function a_(n,e,t,r,a,l,c){const d=e.eventCache;let p,g;const y=new Ny(a,e,l);if(ze(t))g=n.filter.updateFullNode(e.eventCache.getNode(),r,c),p=$u(e,g,!0,n.filter.filtersNodes());else{const T=Fe(t);if(T===".priority")g=n.filter.updatePriority(e.eventCache.getNode(),r),p=$u(e,g,d.isFullyInitialized(),d.isFiltered());else{const S=ct(t),I=d.getNode().getImmediateChild(T);let P;if(ze(S))P=r;else{const z=y.getCompleteChild(T);z!=null?aC(S)===".priority"&&z.getChild(lC(S)).isEmpty()?P=z:P=z.updateChild(S,r):P=$e.EMPTY_NODE}if(I.equals(P))p=e;else{const z=n.filter.updateChild(d.getNode(),T,P,S,y,c);p=$u(e,z,d.isFullyInitialized(),n.filter.filtersNodes())}}}return p}function RA(n,e){return n.eventCache.isCompleteForChild(e)}function f4(n,e,t,r,a,l,c){let d=e;return r.foreach((p,g)=>{const y=Yt(t,p);RA(e,Fe(y))&&(d=a_(n,d,y,g,a,l,c))}),r.foreach((p,g)=>{const y=Yt(t,p);RA(e,Fe(y))||(d=a_(n,d,y,g,a,l,c))}),d}function CA(n,e,t){return t.foreach((r,a)=>{e=e.updateChild(r,a)}),e}function o_(n,e,t,r,a,l,c,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,g;ze(t)?g=r:g=new ut(null).setTree(t,r);const y=e.serverCache.getNode();return g.children.inorderTraversal((T,S)=>{if(y.hasChild(T)){const I=e.serverCache.getNode().getImmediateChild(T),P=CA(n,I,S);p=ad(n,p,new ft(T),P,a,l,c,d)}}),g.children.inorderTraversal((T,S)=>{const I=!e.serverCache.isCompleteForChild(T)&&S.value===null;if(!y.hasChild(T)&&!I){const P=e.serverCache.getNode().getImmediateChild(T),z=CA(n,P,S);p=ad(n,p,new ft(T),z,a,l,c,d)}}),p}function d4(n,e,t,r,a,l,c){if(sd(a,t)!=null)return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(r.value!=null){if(ze(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return ad(n,e,t,p.getNode().getChild(t),a,l,d,c);if(ze(t)){let g=new ut(null);return p.getNode().forEachChild(nl,(y,T)=>{g=g.set(new ft(y),T)}),o_(n,e,t,g,a,l,d,c)}else return e}else{let g=new ut(null);return r.foreach((y,T)=>{const S=Yt(t,y);p.isCompleteForPath(S)&&(g=g.set(y,p.getNode().getChild(S)))}),o_(n,e,t,g,a,l,d,c)}}function m4(n,e,t,r,a){const l=e.serverCache,c=TC(e,l.getNode(),l.isFullyInitialized()||ze(t),l.isFiltered());return DC(n,c,t,r,NC,a)}function p4(n,e,t,r,a,l){let c;if(sd(r,t)!=null)return e;{const d=new Ny(r,e,a),p=e.eventCache.getNode();let g;if(ze(t)||Fe(t)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=s_(r,Ha(e));else{const T=e.serverCache.getNode();oe(T instanceof $e,"serverChildren would be complete if leaf node"),y=RC(r,T)}y=y,g=n.filter.updateFullNode(p,y,l)}else{const y=Fe(t);let T=Iy(r,y,e.serverCache);T==null&&e.serverCache.isCompleteForChild(y)&&(T=p.getImmediateChild(y)),T!=null?g=n.filter.updateChild(p,y,T,ct(t),d,l):e.eventCache.getNode().hasChild(y)?g=n.filter.updateChild(p,y,$e.EMPTY_NODE,ct(t),d,l):g=p,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=s_(r,Ha(e)),c.isLeafNode()&&(g=n.filter.updateFullNode(g,c,l)))}return c=e.serverCache.isFullyInitialized()||sd(r,it())!=null,$u(e,g,c,n.filter.filtersNodes())}}function g4(n,e){const t=Ha(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ze(e)&&!t.getImmediateChild(Fe(e)).isEmpty())?t.getChild(e):null}function IA(n,e,t,r){e.type===Ui.MERGE&&e.source.queryId!==null&&(oe(Ha(n.viewCache_),"We should always have a full cache before handling merges"),oe(n_(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,l=c4(n.processor_,a,e,t,r);return u4(n.processor_,l.viewCache),oe(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,_4(n,l.changes,l.viewCache.eventCache.getNode())}function _4(n,e,t,r){const a=n.eventRegistrations_;return HL(n.eventGenerator_,e,t,a)}let NA;function y4(n){oe(!NA,"__referenceConstructor has already been defined"),NA=n}function Dy(n,e,t,r){const a=e.source.queryId;if(a!==null){const l=n.views.get(a);return oe(l!=null,"SyncTree gave us an op for an invalid query."),IA(l,e,t,r)}else{let l=[];for(const c of n.views.values())l=l.concat(IA(c,e,t,r));return l}}function Oy(n,e){let t=null;for(const r of n.views.values())t=t||g4(r,e);return t}let DA;function v4(n){oe(!DA,"__referenceConstructor has already been defined"),DA=n}class OA{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ut(null),this.pendingWriteTree_=s4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function E4(n,e,t,r,a){return QL(n.pendingWriteTree_,e,t,r,a),a?Vd(n,new qa(_C(),e,t)):[]}function Wo(n,e,t=!1){const r=WL(n.pendingWriteTree_,e);if($L(n.pendingWriteTree_,e)){let l=new ut(null);return r.snap!=null?l=l.set(it(),!0):ai(r.children,c=>{l=l.set(new ft(c),!0)}),Vd(n,new rd(r.path,l,t))}else return[]}function Pd(n,e,t){return Vd(n,new qa(yC(),e,t))}function T4(n,e,t){const r=ut.fromObject(t);return Vd(n,new hc(yC(),e,r))}function S4(n,e,t,r){const a=kC(n,r);if(a!=null){const l=PC(a),c=l.path,d=l.queryId,p=si(c,e),g=new qa(vC(d),p,t);return VC(n,c,g)}else return[]}function A4(n,e,t,r){const a=kC(n,r);if(a){const l=PC(a),c=l.path,d=l.queryId,p=si(c,e),g=ut.fromObject(t),y=new hc(vC(d),p,g);return VC(n,c,y)}else return[]}function OC(n,e,t){const a=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(c,d)=>{const p=si(c,e),g=Oy(d,p);if(g)return g});return bC(a,e,l,t,!0)}function Vd(n,e){return MC(e,n.syncPointTree_,null,AC(n.pendingWriteTree_,it()))}function MC(n,e,t,r){if(ze(n.path))return xC(n,e,t,r);{const a=e.get(it());t==null&&a!=null&&(t=Oy(a,it()));let l=[];const c=Fe(n.path),d=n.operationForChild(c),p=e.children.get(c);if(p&&d){const g=t?t.getImmediateChild(c):null,y=CC(r,c);l=l.concat(MC(d,p,g,y))}return a&&(l=l.concat(Dy(a,n,r,t))),l}}function xC(n,e,t,r){const a=e.get(it());t==null&&a!=null&&(t=Oy(a,it()));let l=[];return e.children.inorderTraversal((c,d)=>{const p=t?t.getImmediateChild(c):null,g=CC(r,c),y=n.operationForChild(c);y&&(l=l.concat(xC(y,d,p,g)))}),a&&(l=l.concat(Dy(a,n,r,t))),l}function kC(n,e){return n.tagToQueryMap.get(e)}function PC(n){const e=n.indexOf("$");return oe(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ft(n.substr(0,e))}}function VC(n,e,t){const r=n.syncPointTree_.get(e);oe(r,"Missing sync point for query tag that we're tracking");const a=AC(n.pendingWriteTree_,e);return Dy(r,t,a,null)}class My{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new My(t)}node(){return this.node_}}class xy{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Yt(this.path_,e);return new xy(this.syncTree_,t)}node(){return OC(this.syncTree_,this.path_)}}const w4=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},MA=function(n,e,t){if(!n||typeof n!="object")return n;if(oe(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return b4(n[".sv"],e,t);if(typeof n[".sv"]=="object")return R4(n[".sv"],e);oe(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},b4=function(n,e,t){if(n==="timestamp")return t.timestamp;oe(!1,"Unexpected server value: "+n)},R4=function(n,e,t){n.hasOwnProperty("increment")||oe(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&oe(!1,"Unexpected increment value: "+r);const a=e.node();if(oe(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return r;const c=a.getValue();return typeof c!="number"?r:c+r},C4=function(n,e,t,r){return ky(e,new xy(t,n),r)},I4=function(n,e,t){return ky(n,new My(e),t)};function ky(n,e,t){const r=n.getPriority().val(),a=MA(r,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const c=n,d=MA(c.getValue(),e,t);return d!==c.getValue()||a!==c.getPriority().val()?new Ht(d,mn(a)):n}else{const c=n;return l=c,a!==c.getPriority().val()&&(l=l.updatePriority(new Ht(a))),c.forEachChild(pn,(d,p)=>{const g=ky(p,e.getImmediateChild(d),t);g!==p&&(l=l.updateImmediateChild(d,g))}),l}}class Py{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Vy(n,e){let t=e instanceof ft?e:new ft(e),r=n,a=Fe(t);for(;a!==null;){const l=il(r.node.children,a)||{children:{},childCount:0};r=new Py(a,r,l),t=ct(t),a=Fe(t)}return r}function bl(n){return n.node.value}function LC(n,e){n.node.value=e,l_(n)}function UC(n){return n.node.childCount>0}function N4(n){return bl(n)===void 0&&!UC(n)}function Ld(n,e){ai(n.node.children,(t,r)=>{e(new Py(t,n,r))})}function zC(n,e,t,r){t&&e(n),Ld(n,a=>{zC(a,e,!0)})}function D4(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Dc(n){return new ft(n.parent===null?n.name:Dc(n.parent)+"/"+n.name)}function l_(n){n.parent!==null&&O4(n.parent,n.name,n)}function O4(n,e,t){const r=N4(t),a=Lr(n.node.children,e);r&&a?(delete n.node.children[e],n.node.childCount--,l_(n)):!r&&!a&&(n.node.children[e]=t.node,n.node.childCount++,l_(n))}const M4=/[\[\].#$\/\u0000-\u001F\u007F]/,x4=/[\[\].#$\u0000-\u001F\u007F]/,mg=10*1024*1024,BC=function(n){return typeof n=="string"&&n.length!==0&&!M4.test(n)},k4=function(n){return typeof n=="string"&&n.length!==0&&!x4.test(n)},P4=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),k4(n)},FC=function(n,e,t){const r=t instanceof ft?new mL(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+xa(r));if(typeof e=="function")throw new Error(n+"contains a function "+xa(r)+" with contents = "+e.toString());if(zR(e))throw new Error(n+"contains "+e.toString()+" "+xa(r));if(typeof e=="string"&&e.length>mg/3&&cd(e)>mg)throw new Error(n+"contains a string greater than "+mg+" utf8 bytes "+xa(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,l=!1;if(ai(e,(c,d)=>{if(c===".value")a=!0;else if(c!==".priority"&&c!==".sv"&&(l=!0,!BC(c)))throw new Error(n+" contains an invalid key ("+c+") "+xa(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);pL(r,c),FC(n,d,r),gL(r)}),a&&l)throw new Error(n+' contains ".value" child '+xa(r)+" in addition to actual children.")}},V4=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!BC(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!P4(t))throw new Error(jD(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class L4{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function U4(n,e){let t=null;for(let r=0;r<e.length;r++){const a=e[r],l=a.getPath();t!==null&&!uC(l,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(a)}t&&n.eventLists_.push(t)}function Xa(n,e,t){U4(n,t),z4(n,r=>gi(r,e)||gi(e,r))}function z4(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const a=n.eventLists_[r];if(a){const l=a.path;e(l)?(B4(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function B4(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();Qu&&dn("event: "+t.toString()),Ic(r)}}}const F4="repo_interrupt",j4=25;class q4{constructor(e,t,r,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new L4,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=id(),this.transactionQueueTree_=new Py,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function H4(n,e,t){if(n.stats_=Sy(n.repoInfo_),n.forceRestClient_||zV())n.server_=new nd(n.repoInfo_,(r,a,l,c)=>{xA(n,r,a,l,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>kA(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{rn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Nr(n.repoInfo_,e,(r,a,l,c)=>{xA(n,r,a,l,c)},r=>{kA(n,r)},r=>{K4(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=HV(n.repoInfo_,()=>new qL(n.stats_,n.server_)),n.infoData_=new UL,n.infoSyncTree_=new OA({startListening:(r,a,l,c)=>{let d=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(d=Pd(n.infoSyncTree_,r._path,p),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),Ly(n,"connected",!1),n.serverSyncTree_=new OA({startListening:(r,a,l,c)=>(n.server_.listen(r,l,a,(d,p)=>{const g=c(d,p);Xa(n.eventQueue_,r._path,g)}),[]),stopListening:(r,a)=>{n.server_.unlisten(r,a)}})}function G4(n){const t=n.infoData_.getNode(new ft(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function jC(n){return w4({timestamp:G4(n)})}function xA(n,e,t,r,a){n.dataUpdateCount++;const l=new ft(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(a)if(r){const p=Mf(t,g=>mn(g));c=A4(n.serverSyncTree_,l,p,a)}else{const p=mn(t);c=S4(n.serverSyncTree_,l,p,a)}else if(r){const p=Mf(t,g=>mn(g));c=T4(n.serverSyncTree_,l,p)}else{const p=mn(t);c=Pd(n.serverSyncTree_,l,p)}let d=l;c.length>0&&(d=zy(n,l)),Xa(n.eventQueue_,d,c)}function kA(n,e){Ly(n,"connected",e),e===!1&&Q4(n)}function K4(n,e){ai(e,(t,r)=>{Ly(n,t,r)})}function Ly(n,e,t){const r=new ft("/.info/"+e),a=mn(t);n.infoData_.updateSnapshot(r,a);const l=Pd(n.infoSyncTree_,r,a);Xa(n.eventQueue_,r,l)}function Y4(n){return n.nextWriteId_++}function Q4(n){qC(n,"onDisconnectEvents");const e=jC(n),t=id();t_(n.onDisconnect_,it(),(a,l)=>{const c=C4(a,l,n.serverSyncTree_,e);gC(t,a,c)});let r=[];t_(t,it(),(a,l)=>{r=r.concat(Pd(n.serverSyncTree_,a,l));const c=J4(n,a);zy(n,c)}),n.onDisconnect_=id(),Xa(n.eventQueue_,it(),r)}function W4(n){n.persistentConnection_&&n.persistentConnection_.interrupt(F4)}function qC(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),dn(t,...e)}function HC(n,e,t){return OC(n.serverSyncTree_,e,t)||$e.EMPTY_NODE}function Uy(n,e=n.transactionQueueTree_){if(e||Ud(n,e),bl(e)){const t=KC(n,e);oe(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&$4(n,Dc(e),t)}else UC(e)&&Ld(e,t=>{Uy(n,t)})}function $4(n,e,t){const r=t.map(g=>g.currentWriteId),a=HC(n,e,r);let l=a;const c=a.hash();for(let g=0;g<t.length;g++){const y=t[g];oe(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const T=si(e,y.path);l=l.updateChild(T,y.currentOutputSnapshotRaw)}const d=l.val(!0),p=e;n.server_.put(p.toString(),d,g=>{qC(n,"transaction put response",{path:p.toString(),status:g});let y=[];if(g==="ok"){const T=[];for(let S=0;S<t.length;S++)t[S].status=2,y=y.concat(Wo(n.serverSyncTree_,t[S].currentWriteId)),t[S].onComplete&&T.push(()=>t[S].onComplete(null,!0,t[S].currentOutputSnapshotResolved)),t[S].unwatcher();Ud(n,Vy(n.transactionQueueTree_,e)),Uy(n,n.transactionQueueTree_),Xa(n.eventQueue_,e,y);for(let S=0;S<T.length;S++)Ic(T[S])}else{if(g==="datastale")for(let T=0;T<t.length;T++)t[T].status===3?t[T].status=4:t[T].status=0;else{Hn("transaction at "+p.toString()+" failed: "+g);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=g}zy(n,e)}},c)}function zy(n,e){const t=GC(n,e),r=Dc(t),a=KC(n,t);return X4(n,a,r),r}function X4(n,e,t){if(e.length===0)return;const r=[];let a=[];const c=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],g=si(t,p.path);let y=!1,T;if(oe(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)y=!0,T=p.abortReason,a=a.concat(Wo(n.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=j4)y=!0,T="maxretry",a=a.concat(Wo(n.serverSyncTree_,p.currentWriteId,!0));else{const S=HC(n,p.path,c);p.currentInputSnapshot=S;const I=e[d].update(S.val());if(I!==void 0){FC("transaction failed: Data returned ",I,p.path);let P=mn(I);typeof I=="object"&&I!=null&&Lr(I,".priority")||(P=P.updatePriority(S.getPriority()));const F=p.currentWriteId,ne=jC(n),ee=I4(P,S,ne);p.currentOutputSnapshotRaw=P,p.currentOutputSnapshotResolved=ee,p.currentWriteId=Y4(n),c.splice(c.indexOf(F),1),a=a.concat(E4(n.serverSyncTree_,p.path,ee,p.currentWriteId,p.applyLocally)),a=a.concat(Wo(n.serverSyncTree_,F,!0))}else y=!0,T="nodata",a=a.concat(Wo(n.serverSyncTree_,p.currentWriteId,!0))}Xa(n.eventQueue_,t,a),a=[],y&&(e[d].status=2,(function(S){setTimeout(S,Math.floor(0))})(e[d].unwatcher),e[d].onComplete&&(T==="nodata"?r.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):r.push(()=>e[d].onComplete(new Error(T),!1,null))))}Ud(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)Ic(r[d]);Uy(n,n.transactionQueueTree_)}function GC(n,e){let t,r=n.transactionQueueTree_;for(t=Fe(e);t!==null&&bl(r)===void 0;)r=Vy(r,t),e=ct(e),t=Fe(e);return r}function KC(n,e){const t=[];return YC(n,e,t),t.sort((r,a)=>r.order-a.order),t}function YC(n,e,t){const r=bl(e);if(r)for(let a=0;a<r.length;a++)t.push(r[a]);Ld(e,a=>{YC(n,a,t)})}function Ud(n,e){const t=bl(e);if(t){let r=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[r]=t[a],r++);t.length=r,LC(e,t.length>0?t:void 0)}Ld(e,r=>{Ud(n,r)})}function J4(n,e){const t=Dc(GC(n,e)),r=Vy(n.transactionQueueTree_,e);return D4(r,a=>{pg(n,a)}),pg(n,r),zC(r,a=>{pg(n,a)}),t}function pg(n,e){const t=bl(e);if(t){const r=[];let a=[],l=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(oe(l===c-1,"All SENT items should be at beginning of queue."),l=c,t[c].status=3,t[c].abortReason="set"):(oe(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),a=a.concat(Wo(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));l===-1?LC(e,void 0):t.length=l+1,Xa(n.eventQueue_,Dc(e),a);for(let c=0;c<r.length;c++)Ic(r[c])}}function Z4(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let a=t[r];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function eU(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Hn(`Invalid query segment '${t}' in query '${n}'`)}return e}const PA=function(n,e){const t=tU(n),r=t.namespace;t.domain==="firebase.com"&&Pr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Pr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||OV();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new XR(t.host,t.secure,r,a,e,"",r!==t.subdomain),path:new ft(t.pathString)}},tU=function(n){let e="",t="",r="",a="",l="",c=!0,d="https",p=443;if(typeof n=="string"){let g=n.indexOf("//");g>=0&&(d=n.substring(0,g-1),n=n.substring(g+2));let y=n.indexOf("/");y===-1&&(y=n.length);let T=n.indexOf("?");T===-1&&(T=n.length),e=n.substring(0,Math.min(y,T)),y<T&&(a=Z4(n.substring(y,T)));const S=eU(n.substring(Math.min(n.length,T)));g=e.indexOf(":"),g>=0?(c=d==="https"||d==="wss",p=parseInt(e.substring(g+1),10)):g=e.length;const I=e.slice(0,g);if(I.toLowerCase()==="localhost")t="localhost";else if(I.split(".").length<=2)t=I;else{const P=e.indexOf(".");r=e.substring(0,P).toLowerCase(),t=e.substring(P+1),l=r}"ns"in S&&(l=S.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:c,scheme:d,pathString:a,namespace:l}};class By{constructor(e,t,r,a){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=a}get key(){return ze(this._path)?null:aC(this._path)}get ref(){return new Rl(this._repo,this._path)}get _queryIdentifier(){const e=EA(this._queryParams),t=Ey(e);return t==="{}"?"default":t}get _queryObject(){return EA(this._queryParams)}isEqual(e){if(e=xt(e),!(e instanceof By))return!1;const t=this._repo===e._repo,r=uC(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&r&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+dL(this._path)}}class Rl extends By{constructor(e,t){super(e,t,new Ry,!1)}get parent(){const e=lC(this._path);return e===null?null:new Rl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}y4(Rl);v4(Rl);const nU="FIREBASE_DATABASE_EMULATOR_HOST",u_={};let iU=!1;function rU(n,e,t,r){const a=e.lastIndexOf(":"),l=e.substring(0,a),c=Ws(l);n.repoInfo_=new XR(e,c,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function sU(n,e,t,r,a){let l=r||n.options.databaseURL;l===void 0&&(n.options.projectId||Pr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dn("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=PA(l,a),d=c.repoInfo,p;typeof process<"u"&&tA&&(p=tA[nU]),p?(l=`http://${p}?ns=${d.namespace}`,c=PA(l,a),d=c.repoInfo):c.repoInfo.secure;const g=new FV(n.name,n.options,e);V4("Invalid Firebase Database URL",c),ze(c.path)||Pr("Database URL must point to the root of a Firebase Database (not including a child path).");const y=oU(d,n,g,new BV(n,t));return new lU(y,n)}function aU(n,e){const t=u_[e];(!t||t[n.key]!==n)&&Pr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),W4(n),delete t[n.key]}function oU(n,e,t,r){let a=u_[e.name];a||(a={},u_[e.name]=a);let l=a[n.toURLString()];return l&&Pr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new q4(n,iU,t,r),a[n.toURLString()]=l,l}class lU{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(H4(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Rl(this._repo,it())),this._rootInternal}_delete(){return this._rootInternal!==null&&(aU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Pr("Cannot call "+e+" on a deleted database.")}}function uU(n=R_(),e){const t=fd(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=lw("database");r&&cU(t,...r)}return t}function cU(n,e,t,r={}){n=xt(n),n._checkNotDeleted("useEmulator");const a=`${e}:${t}`,l=n._repoInternal;if(n._instanceStarted){if(a===n._repoInternal.repoInfo_.host&&Us(r,l.repoInfo_.emulatorOptions))return;Pr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(l.repoInfo_.nodeAdmin)r.mockUserToken&&Pr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new If(If.OWNER);else if(r.mockUserToken){const d=typeof r.mockUserToken=="string"?r.mockUserToken:hw(r.mockUserToken,n.app.options.projectId);c=new If(d)}Ws(e)&&(S_(e),A_("Database",!0)),rU(l,a,r,c)}function hU(n){bV(Ga),La(new zs("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return sU(r,a,l,t)},"PUBLIC").setMultipleInstances(!0)),zi(nA,iA,n),zi(nA,iA,"esm2017")}Nr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Nr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};hU();const fU={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,databaseURL:void 0};let Oa,gg,_g,yg;function dU(){return typeof Oa<"u"?{app:Oa,auth:gg,db:_g,rtdb:yg}:(Oa=gw(fU),gg=dx(Oa),_g=cV(Oa),yg=uU(Oa),{app:Oa,auth:gg,db:_g,rtdb:yg})}const{app:jU,auth:Yi,db:ea,rtdb:qU}=dU();async function mU(n,e){return J2(Yi,n,e)}async function pU(n,e){return X2(Yi,n,e)}async function gU(){return nM(Yi)}function _U(n){return tM(Yi,n)}const QC=H.createContext(null);function yU({children:n}){const[e,t]=H.useState(null),[r,a]=H.useState(!0);return H.useEffect(()=>_U(c=>{t(c),a(!1)}),[]),te.jsx(QC.Provider,{value:{user:e,loading:r},children:n})}function Fy(){const n=H.useContext(QC);if(!n)throw new Error("useAuth must be used within AuthProvider");return n}function vU(){const n=ml(),[e,t]=H.useState(""),[r,a]=H.useState(""),[l,c]=H.useState(!1),[d,p]=H.useState(null),[g,y]=H.useState(!1);async function T(S){S.preventDefault(),p(null),y(!0);try{l?await pU(e,r):await mU(e,r),n("/",{replace:!0})}catch(I){const P=I instanceof Error?I.message:"Something went wrong";P.includes("password")?p("Incorrect password"):P.includes("email")||P.includes("user")?p("Invalid email or user not found"):p(P)}finally{y(!1)}}return te.jsx("div",{className:"login-page",children:te.jsxs("div",{className:"login-card",children:[te.jsx("h1",{children:"CollabBoard"}),te.jsx("p",{className:"login-subtitle",children:"Real-time collaborative whiteboard"}),te.jsxs("form",{onSubmit:T,className:"login-form",children:[te.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:S=>t(S.target.value),required:!0,autoComplete:"email"}),te.jsx("input",{type:"password",placeholder:"Password",value:r,onChange:S=>a(S.target.value),required:!0,autoComplete:l?"new-password":"current-password"}),d&&te.jsx("p",{className:"login-error",children:d}),te.jsx("button",{type:"submit",disabled:g,children:g?"Please wait":l?"Create account":"Sign in"})]}),te.jsx("button",{type:"button",className:"login-toggle",onClick:()=>{c(S=>!S),p(null)},children:l?"Already have an account? Sign in":"Need an account? Sign up"})]})})}const EU="modulepreload",TU=function(n){return"/"+n},VA={},SU=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let g=function(y){return Promise.all(y.map(T=>Promise.resolve(T).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};var c=g;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");a=g(t.map(y=>{if(y=TU(y),y in VA)return;VA[y]=!0;const T=y.endsWith(".css"),S=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${S}`))return;const I=document.createElement("link");if(I.rel=T?"stylesheet":EU,T||(I.as="script"),I.crossOrigin="",I.href=y,p&&I.setAttribute("nonce",p),document.head.appendChild(I),T)return new Promise((P,z)=>{I.addEventListener("load",P),I.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${y}`)))})}))}function l(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return a.then(d=>{for(const p of d||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})},zd="boards",jy="members";function WC(){return ly(ea,zd)}function $C(n){return Id(ea,zd,n)}function AU(n){return ly(ea,zd,n,jy)}function qy(n,e){return Id(ea,zd,n,jy,e)}async function wU(n){const e=Yi.currentUser;if(!e)throw new Error("Not authenticated");const t={name:n||"Untitled Board",ownerId:e.uid,createdAt:Ir(),updatedAt:Ir()},r=await PR(WC(),t);return await kR(qy(r.id,e.uid),{userId:e.uid,email:e.email??"",displayName:e.displayName??null,role:"edit",addedAt:Ir()}),r.id}async function Oc(n){const e=await _y($C(n));if(!e.exists())return null;const t=e.data();return{id:e.id,...t}}async function c_(){const n=Yi.currentUser;if(!n)return[];const e=await Jf(Xg(WC(),Xf("ownerId","==",n.uid))),r=(await Jf(Xg(AR(ea,jy),Xf("userId","==",n.uid)))).docs.map(c=>c.ref.parent.parent?.id).filter(c=>!!c),a=[],l=new Set;return e.docs.forEach(c=>{const d=c.id;l.add(d);const p=c.data();a.push({id:d,...p})}),await Promise.all(r.filter(c=>!l.has(c)).map(async c=>{const d=await Oc(c);d&&(a.push(d),l.add(c))})),a.sort((c,d)=>{const p=c.updatedAt?.toMillis?.()??0;return(d.updatedAt?.toMillis?.()??0)-p}),a}async function h_(n){return(await Jf(AU(n))).docs.map(t=>{const r=t.data();return{...r,addedAt:r.addedAt}})}async function XC(n,e,t,r,a){await yy($C(n),{updatedAt:Ir()}),await kR(qy(n,e),{userId:e,email:t,displayName:r,role:a,addedAt:Ir()})}async function JC(n){const e=Yi.currentUser;if(!e)return null;const t=await Oc(n);if(!t)return null;if(t.ownerId===e.uid)return"owner";const r=await _y(qy(n,e.uid));return r.exists()?r.data().role??null:null}const bU=Object.freeze(Object.defineProperty({__proto__:null,addBoardMember:XC,createBoard:wU,getBoard:Oc,getBoardMembers:h_,getBoardsForUser:c_,getCurrentUserRole:JC},Symbol.toStringTag,{value:"Module"})),Hy="invites";function RU(n){return ly(ea,"boards",n,Hy)}function ZC(n,e){return Id(ea,"boards",n,Hy,e)}async function CU(n){const e=Yi.currentUser;if(!e)throw new Error("Not authenticated");const t=await Oc(n.boardId);if(!t||t.ownerId!==e.uid)throw new Error("Only the board owner can send invites");const a={email:n.email.trim().toLowerCase(),role:n.role,invitedBy:e.uid,invitedByName:e.displayName??null,status:"pending",createdAt:Ir(),updatedAt:Ir()};return(await PR(RU(n.boardId),a)).id}async function IU(n){const e=n.trim().toLowerCase();return(await Jf(Xg(AR(ea,Hy),Xf("email","==",e),Xf("status","==","pending")))).docs.map(r=>{const a=r.data(),l=r.ref.parent.parent?.id??"";return{id:r.id,boardId:l,...a}})}async function vg(){const n=Yi.currentUser;return n?.email?IU(n.email):[]}async function NU(n,e){const t=Yi.currentUser;if(!t)throw new Error("Not authenticated");const r=ZC(n,e),a=await _y(r);if(!a.exists())throw new Error("Invite not found");const l=a.data();if(l.status!=="pending")throw new Error("Invite already used");if(l.email!==(t.email??"").trim().toLowerCase())throw new Error("This invite was sent to a different email");await XC(n,t.uid,t.email??"",t.displayName??null,l.role),await yy(r,{status:"accepted",updatedAt:Ir()})}async function DU(n,e){const t=ZC(n,e);await yy(t,{status:"rejected",updatedAt:Ir()})}function OU({boards:n,currentUserId:e,onOpen:t,onShare:r}){return n.length===0?te.jsx("div",{className:"board-list-empty",children:te.jsx("p",{children:"No boards yet. Create one to get started."})}):te.jsx("ul",{className:"board-list",children:n.map(a=>te.jsx(MU,{board:a,currentUserId:e,onOpen:t,onShare:r},a.id))})}function MU({board:n,currentUserId:e,onOpen:t,onShare:r}){const a=n.ownerId===e;return te.jsxs("li",{className:"board-row",children:[te.jsxs("button",{type:"button",className:"board-row-main",onClick:()=>t(n.id),children:[te.jsx("span",{className:"board-name",children:n.name||"Untitled Board"}),te.jsxs("span",{className:"board-meta",children:["Updated ",xU(n.updatedAt)]})]}),a&&te.jsx("button",{type:"button",className:"board-row-share",onClick:l=>{l.stopPropagation(),r(n.id)},title:"Share board",children:"Share"})]})}function xU(n){if(!n?.toMillis)return"";const e=new Date(n.toMillis()),r=new Date().getTime()-e.getTime();return r<6e4?"just now":r<36e5?`${Math.floor(r/6e4)}m ago`:r<864e5?`${Math.floor(r/36e5)}h ago`:e.toLocaleDateString()}function kU({boardId:n,onClose:e}){const[t,r]=H.useState(""),[a,l]=H.useState("edit"),[c,d]=H.useState([]),[p,g]=H.useState(!1),[y,T]=H.useState(null),[S,I]=H.useState(null);H.useEffect(()=>{h_(n).then(d)},[n]);async function P(z){z.preventDefault(),T(null),I(null),g(!0);try{await CU({boardId:n,email:t.trim(),role:a}),I(`Invite sent to ${t.trim()}`),r(""),h_(n).then(d)}catch(F){T(F instanceof Error?F.message:"Failed to send invite")}finally{g(!1)}}return te.jsx("div",{className:"modal-overlay",onClick:e,children:te.jsxs("div",{className:"modal invite-modal",onClick:z=>z.stopPropagation(),children:[te.jsxs("div",{className:"modal-header",children:[te.jsx("h2",{children:"Share board"}),te.jsx("button",{type:"button",className:"modal-close",onClick:e,"aria-label":"Close",children:""})]}),te.jsxs("form",{onSubmit:P,className:"invite-form",children:[te.jsxs("div",{className:"invite-form-row",children:[te.jsx("input",{type:"email",placeholder:"Email address",value:t,onChange:z=>r(z.target.value),required:!0}),te.jsxs("select",{value:a,onChange:z=>l(z.target.value),children:[te.jsx("option",{value:"edit",children:"Can Edit"}),te.jsx("option",{value:"view",children:"View Only"})]}),te.jsx("button",{type:"submit",disabled:p,children:p?"Sending":"Send invite"})]}),y&&te.jsx("p",{className:"invite-error",children:y}),S&&te.jsx("p",{className:"invite-success",children:S})]}),te.jsxs("div",{className:"invite-members",children:[te.jsx("h3",{children:"Board members"}),c.length===0?te.jsx("p",{className:"invite-muted",children:"Only you so far. Send an invite to add others."}):te.jsx("ul",{className:"members-list",children:c.map(z=>te.jsxs("li",{className:"members-list-item",children:[te.jsx("span",{className:"member-email",children:z.email}),te.jsx("span",{className:"member-role",children:z.role})]},z.userId))})]})]})})}function PU({invites:n,onClose:e,onAccept:t,onReject:r}){const a=ml();async function l(d){try{await NU(d.boardId,d.id),t(),e(),a(`/board/${d.boardId}`,{replace:!0})}catch{t()}}async function c(d){try{await DU(d.boardId,d.id),r()}catch{r()}}return te.jsx("div",{className:"modal-overlay",onClick:e,children:te.jsxs("div",{className:"modal pending-invites-modal",onClick:d=>d.stopPropagation(),children:[te.jsxs("div",{className:"modal-header",children:[te.jsx("h2",{children:"Pending invites"}),te.jsx("button",{type:"button",className:"modal-close",onClick:e,"aria-label":"Close",children:""})]}),te.jsx("div",{className:"pending-invites-content",children:n.length===0?te.jsx("p",{className:"invite-muted",children:"No pending invites."}):te.jsx("ul",{className:"pending-invites-list",children:n.map(d=>te.jsxs("li",{className:"pending-invite-item",children:[te.jsxs("div",{className:"pending-invite-info",children:[te.jsx("strong",{children:d.invitedByName||d.invitedBy}),te.jsxs("span",{className:"invite-detail",children:["invited you to a board (",d.role," access)"]})]}),te.jsxs("div",{className:"pending-invite-actions",children:[te.jsx("button",{type:"button",className:"btn-accept",onClick:()=>l(d),children:"Accept"}),te.jsx("button",{type:"button",className:"btn-reject",onClick:()=>c(d),children:"Decline"})]})]},`${d.boardId}-${d.id}`))})})]})})}function VU(){const{user:n}=Fy(),e=ml(),[t,r]=H.useState([]),[a,l]=H.useState([]),[c,d]=H.useState(!0),[p,g]=H.useState(null),[y,T]=H.useState(!1);H.useEffect(()=>{let z=!1;async function F(){try{const[ne,ee]=await Promise.all([c_(),vg()]);z||(r(ne),l(ee))}finally{z||d(!1)}}return F(),()=>{z=!0}},[]);async function S(){const{createBoard:z}=await SU(async()=>{const{createBoard:ne}=await Promise.resolve().then(()=>bU);return{createBoard:ne}},[]),F=await z("Untitled Board");e(`/board/${F}`)}async function I(z){e(`/board/${z}`)}function P(){T(!1),c_().then(r),vg().then(l)}return te.jsxs("div",{className:"dashboard",children:[te.jsxs("header",{className:"dashboard-header",children:[te.jsx("h1",{children:"CollabBoard"}),te.jsxs("div",{className:"dashboard-actions",children:[te.jsxs("button",{type:"button",className:"btn-invites",onClick:()=>T(!0),title:"Pending invites",children:["Invites",a.length>0&&te.jsx("span",{className:"badge",children:a.length})]}),te.jsx("span",{className:"user-email",children:n?.email??""}),te.jsx("button",{type:"button",className:"btn-logout",onClick:()=>gU(),children:"Sign out"})]})]}),te.jsxs("main",{className:"dashboard-main",children:[te.jsx("div",{className:"dashboard-toolbar",children:te.jsx("button",{type:"button",className:"btn-primary",onClick:S,children:"Create New Board"})}),c?te.jsx("p",{className:"dashboard-loading",children:"Loading boards"}):te.jsx(OU,{boards:t,currentUserId:n?.uid??"",onOpen:I,onShare:g})]}),p&&te.jsx(kU,{boardId:p,onClose:()=>g(null)}),y&&te.jsx(PU,{invites:a,onClose:()=>T(!1),onAccept:P,onReject:()=>vg().then(l)})]})}function LU(){const{boardId:n}=vN(),e=ml(),{user:t}=Fy(),[r,a]=H.useState(null),[l,c]=H.useState(!1),[d,p]=H.useState(!0);return H.useEffect(()=>{const g=n??"";if(!g||!t)return;let y=!1;async function T(){try{const S=await Oc(g);if(y)return;if(!S){c(!0),a(null);return}const I=await JC(g);if(y)return;if(I===null){c(!0),a(null);return}a(S),c(!1)}finally{y||p(!1)}}return T(),()=>{y=!0}},[n??"",t]),t?d?te.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading board"}):l?te.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[te.jsx("p",{children:"You don't have access to this board."}),te.jsx("button",{type:"button",onClick:()=>e("/"),children:"Back to Dashboard"})]}):r?te.jsxs("div",{style:{padding:"1rem"},children:[te.jsxs("div",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[te.jsx("button",{type:"button",onClick:()=>e("/"),children:" Dashboard"}),te.jsx("h1",{style:{margin:0},children:r.name||"Untitled Board"})]}),te.jsx("p",{className:"board-placeholder",children:"Canvas and real-time collaboration will be implemented next."})]}):null:null}function LA({children:n}){const{user:e,loading:t}=Fy();return t?te.jsx("div",{className:"app-loading",children:"Loading"}):e?te.jsx(te.Fragment,{children:n}):te.jsx(XA,{to:"/login",replace:!0})}function UU(){return te.jsxs(kN,{children:[te.jsx(Pu,{path:"/login",element:te.jsx(vU,{})}),te.jsx(Pu,{path:"/",element:te.jsx(LA,{children:te.jsx(VU,{})})}),te.jsx(Pu,{path:"/board/:boardId",element:te.jsx(LA,{children:te.jsx(LU,{})})}),te.jsx(Pu,{path:"*",element:te.jsx(XA,{to:"/",replace:!0})})]})}function zU(){return te.jsx(rD,{children:te.jsx(yU,{children:te.jsx(UU,{})})})}V1.createRoot(document.getElementById("root")).render(te.jsx(H.StrictMode,{children:te.jsx(zU,{})}));
